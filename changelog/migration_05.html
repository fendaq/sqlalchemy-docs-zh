<h1><span class="yiyi-st" id="yiyi-58">SQLAlchemy 0.5&#x6709;&#x54EA;&#x4E9B;&#x65B0;&#x7279;&#x6027;&#xFF1F;<a class="headerlink" href="#what-s-new-in-sqlalchemy-0-5" title="Permalink to this headline">&#xB6;</a></span></h1><div class="admonition-about-this-document admonition"><p class="first admonition-title"><span class="yiyi-st" id="yiyi-59">&#x5173;&#x4E8E;&#x672C;&#x6587;&#x6863;</span></p><p><span class="yiyi-st" id="yiyi-60">&#x672C;&#x6587;&#x6863;&#x4ECB;&#x7ECD;&#x4E86;2008&#x5E74;10&#x6708;12&#x65E5;&#x53D1;&#x5E03;&#x7684;SQLAlchemy 0.4&#x7248;&#x548C;2010&#x5E74;1&#x6708;16&#x65E5;&#x53D1;&#x5E03;&#x7684;SQLAlchemy 0.5&#x7248;&#x4E4B;&#x95F4;&#x7684;&#x53D8;&#x5316;&#x3002;</span></p><p class="last"><span class="yiyi-st" id="yiyi-61">&#x6587;&#x4EF6;&#x65E5;&#x671F;&#xFF1A;2009&#x5E74;8&#x6708;4&#x65E5;</span></p></div><p><span class="yiyi-st" id="yiyi-62">&#x672C;&#x6307;&#x5357;&#x8BB0;&#x5F55;&#x4E86;&#x5F71;&#x54CD;&#x7528;&#x6237;&#x5C06;&#x4ED6;&#x4EEC;&#x7684;&#x5E94;&#x7528;&#x7A0B;&#x5E8F;&#x4ECE;0.4&#x7CFB;&#x5217;SQLAlchemy&#x8FC1;&#x79FB;&#x5230;0.5&#x7684;API&#x66F4;&#x6539;&#x3002;</span><span class="yiyi-st" id="yiyi-63">&#x5B83;&#x4E5F;&#x9002;&#x7528;&#x4E8E;<a class="reference external" href="http://oreilly.com/catalog/9780596516147/">&#x57FA;&#x672C;SQLAlchemy</a>&#x4E2D;&#x7684;&#x5DE5;&#x4F5C;&#xFF0C;&#x5B83;&#x53EA;&#x6DB5;&#x76D6;&#x4E86;0.4&#xFF0C;&#x5E76;&#x4E14;&#x4F3C;&#x4E4E;&#x751A;&#x81F3;&#x8FD8;&#x6709;&#x4E00;&#x4E9B;&#x65E7;&#x7684;0.3ism&#x3002;</span><span class="yiyi-st" id="yiyi-64">&#x8BF7;&#x6CE8;&#x610F;&#xFF0C;SQLAlchemy 0.5&#x5220;&#x9664;&#x4E86;&#x8BB8;&#x591A;&#x5728;0.4&#x7CFB;&#x5217;&#x8303;&#x56F4;&#x5185;&#x88AB;&#x5F03;&#x7528;&#x7684;&#x884C;&#x4E3A;&#xFF0C;&#x5E76;&#x4E14;&#x4E5F;&#x5F03;&#x7528;&#x4E86;&#x66F4;&#x591A;&#x7279;&#x5B9A;&#x4E8E;0.4&#x7684;&#x884C;&#x4E3A;&#x3002;</span></p><div class="section" id="major-documentation-changes"><h2><span class="yiyi-st" id="yiyi-65">&#x4E3B;&#x8981;&#x6587;&#x6863;&#x66F4;&#x6539;<a class="headerlink" href="#major-documentation-changes" title="Permalink to this headline">&#xB6;</a></span></h2><p><span class="yiyi-st" id="yiyi-66">&#x6587;&#x6863;&#x7684;&#x67D0;&#x4E9B;&#x90E8;&#x5206;&#x5DF2;&#x7ECF;&#x5B8C;&#x5168;&#x91CD;&#x5199;&#xFF0C;&#x53EF;&#x4EE5;&#x4F5C;&#x4E3A;&#x65B0;ORM&#x529F;&#x80FD;&#x7684;&#x4ECB;&#x7ECD;&#x3002;</span><span class="yiyi-st" id="yiyi-67">&#x7279;&#x522B;&#x662F;&#xFF0C;<code class="docutils literal"><span class="pre">Query</span></code>&#x548C;<code class="docutils literal"><span class="pre">Session</span></code>&#x5BF9;&#x8C61;&#x5728;API&#x548C;&#x884C;&#x4E3A;&#x65B9;&#x9762;&#x6709;&#x7740;&#x660E;&#x663E;&#x7684;&#x533A;&#x522B;&#xFF0C;&#x4ECE;&#x6839;&#x672C;&#x4E0A;&#x6539;&#x53D8;&#x4E86;&#x8BB8;&#x591A;&#x57FA;&#x672C;&#x65B9;&#x5F0F;&#xFF0C;&#x7279;&#x522B;&#x662F;&#x6784;&#x5EFA;&#x9AD8;&#x5EA6;&#x81EA;&#x5B9A;&#x4E49;&#x7684;ORM&#x67E5;&#x8BE2;&#x5E76;&#x5904;&#x7406;&#x9648;&#x65E7;&#x7684;&#x4F1A;&#x8BDD;&#x72B6;&#x6001;&#xFF0C;&#x63D0;&#x4EA4;&#x548C;&#x56DE;&#x6EDA;&#x3002;</span></p><ul class="simple"><li><span class="yiyi-st" id="yiyi-68"><a class="reference external" href="http://www.sqlalchemy.org/docs/05/ormtutorial.html">ORM Tutorial</a></span></li><li><span class="yiyi-st" id="yiyi-69"><a class="reference external" href="http://www.sqlalchemy.org/docs/05/session.html">&#x4F1A;&#x8BDD;&#x8BB0;&#x5F55;</a></span></li></ul></div><div class="section" id="deprecations-source"><h2><span class="yiyi-st" id="yiyi-70">&#x5F03;&#x7528;&#x6765;&#x6E90;<a class="headerlink" href="#deprecations-source" title="Permalink to this headline">&#xB6;</a></span></h2><p><span class="yiyi-st" id="yiyi-71">&#x53E6;&#x4E00;&#x4E2A;&#x4FE1;&#x606F;&#x6765;&#x6E90;&#x88AB;&#x8BB0;&#x5F55;&#x5728;&#x4E00;&#x7CFB;&#x5217;&#x5355;&#x5143;&#x6D4B;&#x8BD5;&#x4E2D;&#xFF0C;&#x8BF4;&#x660E;&#x4E86;&#x4E00;&#x4E9B;&#x5E38;&#x89C1;&#x7684;<code class="docutils literal"><span class="pre">Query</span></code>&#x6A21;&#x5F0F;&#x7684;&#x6700;&#x65B0;&#x7528;&#x6CD5;&#xFF1B;&#x8FD9;&#x4E2A;&#x6587;&#x4EF6;&#x53EF;&#x4EE5;&#x5728;[source&#xFF1A;sqlalchemy / trunk / test / orm_test_deprecations.py]&#x4E2D;&#x67E5;&#x770B;&#x3002;</span></p></div><div class="section" id="requirements-changes"><h2><span class="yiyi-st" id="yiyi-72">&#x9700;&#x6C42;&#x53D8;&#x66F4;<a class="headerlink" href="#requirements-changes" title="Permalink to this headline">&#xB6;</a></span></h2><ul class="simple"><li><span class="yiyi-st" id="yiyi-73">Python 2.4&#x6216;&#x66F4;&#x9AD8;&#x7248;&#x672C;&#x662F;&#x5FC5;&#x9700;&#x7684;&#x3002;</span><span class="yiyi-st" id="yiyi-74">SQLAlchemy 0.4&#x884C;&#x662F;Python 2.3&#x652F;&#x6301;&#x7684;&#x6700;&#x540E;&#x4E00;&#x4E2A;&#x7248;&#x672C;&#x3002;</span></li></ul></div><div class="section" id="object-relational-mapping"><h2><span class="yiyi-st" id="yiyi-75">&#x5BF9;&#x8C61;&#x5173;&#x7CFB;&#x6620;&#x5C04;<a class="headerlink" href="#object-relational-mapping" title="Permalink to this headline">&#xB6;</a></span></h2><ul><li><p class="first"><span class="yiyi-st" id="yiyi-76"><strong>&#x67E5;&#x8BE2;&#x4E2D;&#x7684;&#x5217;&#x7EA7;&#x8868;&#x8FBE;&#x5F0F;</strong></span><span class="yiyi-st" id="yiyi-77"> - &#x8BE6;&#x89C1;<a class="reference external" href="http://www.sqlalchemy.org/docs/05/ormtutorial.html">&#x6559;&#x7A0B;</a>&#xFF0C;<code class="docutils literal"><span class="pre">Query</span></code>&#x6709;&#x80FD;&#x529B;&#x521B;&#x5EFA;&#x7279;&#x5B9A;&#x7684;SELECT&#x8BED;&#x53E5;&#xFF0C;&#x800C;&#x4E0D;&#x4EC5;&#x4EC5;&#x662F;&#x9488;&#x5BF9;&#x6574;&#x884C;&#x7684;&#x90A3;&#x4E9B;&#x8BED;&#x53E5;&#xFF1A;</span></p><div class="highlight-python"><div class="highlight"><pre><span></span><span class="n">session</span><span class="o">.</span><span class="n">query</span><span class="p">(</span><span class="n">User</span><span class="o">.</span><span class="n">name</span><span class="p">,</span> <span class="n">func</span><span class="o">.</span><span class="n">count</span><span class="p">(</span><span class="n">Address</span><span class="o">.</span><span class="n">id</span><span class="p">)</span><span class="o">.</span><span class="n">label</span><span class="p">(</span><span class="s2">&quot;numaddresses&quot;</span><span class="p">))</span><span class="o">.</span><span class="n">join</span><span class="p">(</span><span class="n">Address</span><span class="p">)</span><span class="o">.</span><span class="n">group_by</span><span class="p">(</span><span class="n">User</span><span class="o">.</span><span class="n">name</span><span class="p">)</span></pre></div></div><p><span class="yiyi-st" id="yiyi-78">&#x4EFB;&#x4F55;&#x591A;&#x5217;/&#x5B9E;&#x4F53;&#x67E5;&#x8BE2;&#x8FD4;&#x56DE;&#x7684;&#x5143;&#x7EC4;&#x90FD;&#x662F;<em>&#x547D;&#x540D;&#x7684;</em>&#x5143;&#x7EC4;&#xFF1A;</span></p><div class="highlight-python"><div class="highlight"><pre><span></span><span class="k">for</span> <span class="n">row</span> <span class="ow">in</span> <span class="n">session</span><span class="o">.</span><span class="n">query</span><span class="p">(</span><span class="n">User</span><span class="o">.</span><span class="n">name</span><span class="p">,</span> <span class="n">func</span><span class="o">.</span><span class="n">count</span><span class="p">(</span><span class="n">Address</span><span class="o">.</span><span class="n">id</span><span class="p">)</span><span class="o">.</span><span class="n">label</span><span class="p">(</span><span class="s1">&apos;numaddresses&apos;</span><span class="p">))</span><span class="o">.</span><span class="n">join</span><span class="p">(</span><span class="n">Address</span><span class="p">)</span><span class="o">.</span><span class="n">group_by</span><span class="p">(</span><span class="n">User</span><span class="o">.</span><span class="n">name</span><span class="p">):</span>
   <span class="k">print</span><span class="p">(</span><span class="s2">&quot;name&quot;</span><span class="p">,</span> <span class="n">row</span><span class="o">.</span><span class="n">name</span><span class="p">,</span> <span class="s2">&quot;number&quot;</span><span class="p">,</span> <span class="n">row</span><span class="o">.</span><span class="n">numaddresses</span><span class="p">)</span></pre></div></div><p><span class="yiyi-st" id="yiyi-79"><code class="docutils literal"><span class="pre">Query</span></code> has a <code class="docutils literal"><span class="pre">statement</span></code> accessor, as well as a <code class="docutils literal"><span class="pre">subquery()</span></code> method which allow <code class="docutils literal"><span class="pre">Query</span></code> to be used to create more complex combinations:</span></p><div class="highlight-python"><div class="highlight"><pre><span></span><span class="n">subq</span> <span class="o">=</span> <span class="n">session</span><span class="o">.</span><span class="n">query</span><span class="p">(</span><span class="n">Keyword</span><span class="o">.</span><span class="n">id</span><span class="o">.</span><span class="n">label</span><span class="p">(</span><span class="s1">&apos;keyword_id&apos;</span><span class="p">))</span><span class="o">.</span><span class="n">filter</span><span class="p">(</span><span class="n">Keyword</span><span class="o">.</span><span class="n">name</span><span class="o">.</span><span class="n">in_</span><span class="p">([</span><span class="s1">&apos;beans&apos;</span><span class="p">,</span> <span class="s1">&apos;carrots&apos;</span><span class="p">]))</span><span class="o">.</span><span class="n">subquery</span><span class="p">()</span>
<span class="n">recipes</span> <span class="o">=</span> <span class="n">session</span><span class="o">.</span><span class="n">query</span><span class="p">(</span><span class="n">Recipe</span><span class="p">)</span><span class="o">.</span><span class="n">filter</span><span class="p">(</span><span class="n">exists</span><span class="p">()</span><span class="o">.</span>
   <span class="n">where</span><span class="p">(</span><span class="n">Recipe</span><span class="o">.</span><span class="n">id</span><span class="o">==</span><span class="n">recipe_keywords</span><span class="o">.</span><span class="n">c</span><span class="o">.</span><span class="n">recipe_id</span><span class="p">)</span><span class="o">.</span>
   <span class="n">where</span><span class="p">(</span><span class="n">recipe_keywords</span><span class="o">.</span><span class="n">c</span><span class="o">.</span><span class="n">keyword_id</span><span class="o">==</span><span class="n">subq</span><span class="o">.</span><span class="n">c</span><span class="o">.</span><span class="n">keyword_id</span><span class="p">)</span>
<span class="p">)</span></pre></div></div></li><li><p class="first"><span class="yiyi-st" id="yiyi-80"><strong>Explicit ORM aliases are recommended for aliased joins</strong> - The <code class="docutils literal"><span class="pre">aliased()</span></code> function produces an &#x201C;alias&#x201D; of a class, which allows fine-grained control of aliases in conjunction with ORM queries. </span><span class="yiyi-st" id="yiyi-81">&#x5C3D;&#x7BA1;&#x8868;&#x7EA7;&#x522B;&#x522B;&#x540D;&#xFF08;&#x5373;<code class="docutils literal"><span class="pre">table.alias()</span></code>&#xFF09;&#x4ECD;&#x7136;&#x53EF;&#x7528;&#xFF0C;&#x4F46;ORM&#x7EA7;&#x522B;&#x522B;&#x540D;&#x4FDD;&#x7559;&#x4E86;ORM&#x6620;&#x5C04;&#x5BF9;&#x8C61;&#x7684;&#x8BED;&#x4E49;&#xFF0C;&#x8FD9;&#x5BF9;&#x4E8E;&#x7EE7;&#x627F;&#x6620;&#x5C04;&#xFF0C;&#x9009;&#x9879;&#x548C;&#x5176;&#x4ED6;&#x573A;&#x666F;&#x5F88;&#x91CD;&#x8981;&#x3002;</span><span class="yiyi-st" id="yiyi-82">&#x4F8B;&#x5982;&#x3002;&#xFF1A;</span></p><div class="highlight-python"><div class="highlight"><pre><span></span><span class="n">Friend</span> <span class="o">=</span> <span class="n">aliased</span><span class="p">(</span><span class="n">Person</span><span class="p">)</span>
<span class="n">session</span><span class="o">.</span><span class="n">query</span><span class="p">(</span><span class="n">Person</span><span class="p">,</span> <span class="n">Friend</span><span class="p">)</span><span class="o">.</span><span class="n">join</span><span class="p">((</span><span class="n">Friend</span><span class="p">,</span> <span class="n">Person</span><span class="o">.</span><span class="n">friends</span><span class="p">))</span><span class="o">.</span><span class="n">all</span><span class="p">()</span></pre></div></div></li><li><p class="first"><span class="yiyi-st" id="yiyi-83"><strong>query.join()&#x5927;&#x5927;&#x589E;&#x5F3A;&#x3002;</strong></span><span class="yiyi-st" id="yiyi-84"> - &#x60A8;&#x73B0;&#x5728;&#x53EF;&#x4EE5;&#x901A;&#x8FC7;&#x591A;&#x79CD;&#x65B9;&#x5F0F;&#x6307;&#x5B9A;&#x8054;&#x63A5;&#x7684;&#x76EE;&#x6807;&#x548C;ON&#x5B50;&#x53E5;&#x3002;</span><span class="yiyi-st" id="yiyi-85">&#x53EF;&#x4EE5;&#x63D0;&#x4F9B;&#x5355;&#x72EC;&#x7684;&#x76EE;&#x6807;&#x7C7B;&#xFF0C;&#x5176;&#x4E2D;SQLA&#x5C06;&#x5C1D;&#x8BD5;&#x901A;&#x8FC7;&#x4E0E;<code class="docutils literal"><span class="pre">table.join(someothertable)</span></code>&#x76F8;&#x540C;&#x7684;&#x65B9;&#x5F0F;&#x901A;&#x8FC7;&#x5916;&#x952E;&#x5F62;&#x6210;&#x8FDE;&#x63A5;&#x3002;</span><span class="yiyi-st" id="yiyi-86">&#x53EF;&#x4EE5;&#x63D0;&#x4F9B;&#x4E00;&#x4E2A;&#x76EE;&#x6807;&#x548C;&#x4E00;&#x4E2A;&#x660E;&#x786E;&#x7684;ON&#x6761;&#x4EF6;&#xFF0C;&#x5176;&#x4E2D;ON&#x6761;&#x4EF6;&#x53EF;&#x4EE5;&#x662F;<code class="docutils literal"><span class="pre">relation()</span></code>&#x540D;&#x79F0;&#xFF0C;&#x5B9E;&#x9645;&#x7C7B;&#x63CF;&#x8FF0;&#x7B26;&#x6216;SQL&#x8868;&#x8FBE;&#x5F0F;&#x3002;</span><span class="yiyi-st" id="yiyi-87">&#x6216;&#x8005;&#x53EA;&#x662F;<code class="docutils literal"><span class="pre">relation()</span></code>&#x540D;&#x79F0;&#x6216;&#x7C7B;&#x63CF;&#x8FF0;&#x7B26;&#x7684;&#x65E7;&#x65B9;&#x6CD5;&#x4E5F;&#x9002;&#x7528;&#x3002;</span><span class="yiyi-st" id="yiyi-88">&#x8BF7;&#x53C2;&#x9605;&#x5305;&#x542B;&#x51E0;&#x4E2A;&#x793A;&#x4F8B;&#x7684;ORM&#x6559;&#x7A0B;&#x3002;</span></p></li><li><p class="first"><span class="yiyi-st" id="yiyi-89"><strong>&#x58F0;&#x660E;&#x5F0F;&#x63A8;&#x8350;&#x7528;&#x4E8E;&#x4E0D;&#x9700;&#x8981;&#xFF08;&#x4E14;&#x4E0D;&#x559C;&#x6B22;&#xFF09;&#x8868;&#x548C;&#x6620;&#x5C04;&#x5668;&#x4E4B;&#x95F4;&#x7684;&#x62BD;&#x8C61;&#x7684;&#x5E94;&#x7528;&#x7A0B;&#x5E8F;&#x3002; -  [/docs/05/reference/ext/declarative.html&#x58F0;&#x660E;&#x5F0F;]&#x6A21;&#x5757;&#xFF0C;&#x5B83;&#x662F;&#x7528;&#x4E8E;&#x5C06;<code class="docutils literal"><span class="pre">Table</span></code>&#xFF0C;<code class="docutils literal"><span class="pre">mapper()</span></code>&#x548C;&#x7528;&#x6237;&#x5B9A;&#x4E49;&#x7684;&#x7C7B;&#x5BF9;&#x8C61;&#x7684;&#x8868;&#x8FBE;&#x5F0F;&#x7EC4;&#x5408;&#x5728;&#x4E00;&#x8D77;&#xFF0C;&#x56E0;&#x4E3A;&#x5B83;&#x7B80;&#x5316;&#x4E86;&#x5E94;&#x7528;&#x7A0B;&#x5E8F;&#x914D;&#x7F6E;&#xFF0C;&#x786E;&#x4FDD;&#x201C;&#x6BCF;&#x4E2A;&#x7C7B;&#x4E00;&#x4E2A;&#x6620;&#x5C04;&#x5668;&#x201D;&#x6A21;&#x5F0F;&#xFF0C;&#x5E76;&#x5141;&#x8BB8;&#x5168;&#x9762;&#x7684;&#x914D;&#x7F6E;&#x53EF;&#x7528;&#x4E8E;&#x4E0D;&#x540C;&#x7684;<code class="docutils literal"><span class="pre">mapper()</span></code>&#x8C03;&#x7528;&#x3002;</strong></span><span class="yiyi-st" id="yiyi-90">&#x5355;&#x72EC;&#x7684;<code class="docutils literal"><span class="pre">mapper()</span></code>&#x548C;<code class="docutils literal"><span class="pre">Table</span></code>&#x7528;&#x6CD5;&#x73B0;&#x5728;&#x79F0;&#x4E3A;&#x201C;&#x53E4;&#x5178;SQLAlchemy&#x7528;&#x6CD5;&#x201D;&#xFF0C;&#x5F53;&#x7136;&#x53EF;&#x4EE5;&#x81EA;&#x7531;&#x6DF7;&#x5408;&#x58F0;&#x660E;&#x3002;</span></p></li><li><p class="first"><span class="yiyi-st" id="yiyi-91"><strong>.c&#x3002;&#x5C5E;&#x6027;&#x5DF2;&#x4ECE;&#x7C7B;&#xFF08;&#x5373;<code class="docutils literal"><span class="pre">MyClass.c.somecolumn</span></code>&#xFF09;&#x4E2D;&#x79FB;&#x9664;</strong>&#x3002;</span><span class="yiyi-st" id="yiyi-92">&#x4E0E;0.4&#x4E2D;&#x7684;&#x60C5;&#x51B5;&#x4E00;&#x6837;&#xFF0C;&#x7C7B;&#x7EA7;&#x5C5E;&#x6027;&#x53EF;&#x7528;&#x4F5C;&#x67E5;&#x8BE2;&#x5143;&#x7D20;&#xFF0C;&#x5373;<code class="docutils literal"><span class="pre">Class.c.propname</span></code>&#x73B0;&#x5728;&#x88AB;<code class="docutils literal"><span class="pre">Class.propname</span></code>&#x53D6;&#x4EE3;&#xFF0C;<code class="docutils literal"><span class="pre">c</span></code>&#x5C5E;&#x6027;&#x7EE7;&#x7EED;&#x4FDD;&#x7559;&#x5728;<code class="docutils literal"><span class="pre">Table</span></code>&#x5BF9;&#x8C61;&#x4E0A;&#xFF0C;&#x5B83;&#x4EEC;&#x8868;&#x793A;&#x5B58;&#x5728;&#x4E8E;&#x8868;&#x4E0A;&#x7684;<code class="docutils literal"><span class="pre">Column</span></code>&#x5BF9;&#x8C61;&#x7684;&#x540D;&#x79F0;&#x7A7A;&#x95F4;&#x3002;</span></p><p><span class="yiyi-st" id="yiyi-93">&#x4E3A;&#x4E86;&#x5F97;&#x5230;&#x6620;&#x5C04;&#x7C7B;&#x7684;&#x8868;&#xFF08;&#x5982;&#x679C;&#x4F60;&#x6CA1;&#x6709;&#x4FDD;&#x7559;&#x5B83;&#xFF09;&#xFF1A;</span></p><div class="highlight-python"><div class="highlight"><pre><span></span><span class="n">table</span> <span class="o">=</span> <span class="n">class_mapper</span><span class="p">(</span><span class="n">someclass</span><span class="p">)</span><span class="o">.</span><span class="n">mapped_table</span></pre></div></div><p><span class="yiyi-st" id="yiyi-94">&#x904D;&#x5386;&#x5217;&#xFF1A;</span></p><div class="highlight-python"><div class="highlight"><pre><span></span><span class="k">for</span> <span class="n">col</span> <span class="ow">in</span> <span class="n">table</span><span class="o">.</span><span class="n">c</span><span class="p">:</span>
    <span class="k">print</span><span class="p">(</span><span class="n">col</span><span class="p">)</span></pre></div></div><p><span class="yiyi-st" id="yiyi-95">&#x4F7F;&#x7528;&#x7279;&#x5B9A;&#x5217;&#xFF1A;</span></p><div class="highlight-python"><div class="highlight"><pre><span></span><span class="n">table</span><span class="o">.</span><span class="n">c</span><span class="o">.</span><span class="n">somecolumn</span></pre></div></div><p><span class="yiyi-st" id="yiyi-96">&#x7C7B;&#x7ED1;&#x5B9A;&#x63CF;&#x8FF0;&#x7B26;&#x652F;&#x6301;&#x5B8C;&#x6574;&#x7684;Column&#x8FD0;&#x7B97;&#x7B26;&#x4EE5;&#x53CA;&#x6587;&#x6863;&#x5316;&#x7684;&#x9762;&#x5411;&#x5173;&#x7CFB;&#x7684;&#x8FD0;&#x7B97;&#x7B26;&#xFF0C;&#x5982;<code class="docutils literal"><span class="pre">has()</span></code>&#xFF0C;<code class="docutils literal"><span class="pre">any()</span></code>&#xFF0C;<code class="docutils literal"><span class="pre">contains()</span></code>&#x7B49;</span></p><p><span class="yiyi-st" id="yiyi-97">&#x4E25;&#x91CD;&#x79FB;&#x9664;<code class="docutils literal"><span class="pre">.c.</span></code>&#x7684;&#x539F;&#x56E0;</span><span class="yiyi-st" id="yiyi-98"> is that in 0.5, class-bound descriptors carry potentially different meaning, as well as information regarding class mappings, versus plain <code class="docutils literal"><span class="pre">Column</span></code> objects - and there are use cases where you&#x2019;d specifically want to use one or the other. </span><span class="yiyi-st" id="yiyi-99">&#x901A;&#x5E38;&#xFF0C;&#x4F7F;&#x7528;&#x7C7B;&#x7ED1;&#x5B9A;&#x63CF;&#x8FF0;&#x7B26;&#x4F1A;&#x8C03;&#x7528;&#x4E00;&#x7EC4;&#x6620;&#x5C04;/&#x591A;&#x6001;&#x611F;&#x77E5;&#x7684;&#x8F6C;&#x6362;&#xFF0C;&#x800C;&#x4F7F;&#x7528;&#x8868;&#x7ED1;&#x5B9A;&#x7684;&#x5217;&#x5219;&#x4E0D;&#x4F1A;&#x3002;</span><span class="yiyi-st" id="yiyi-100">&#x5728;0.4&#x4E2D;&#xFF0C;&#x8FD9;&#x4E9B;&#x7FFB;&#x8BD1;&#x88AB;&#x5168;&#x9762;&#x5E94;&#x7528;&#x4E8E;&#x6240;&#x6709;&#x8868;&#x8FBE;&#x5F0F;&#xFF0C;&#x4F46;&#x662F;0.5&#x4E0E;&#x5217;&#x548C;&#x6620;&#x5C04;&#x63CF;&#x8FF0;&#x7B26;&#x5B8C;&#x5168;&#x4E0D;&#x540C;&#xFF0C;&#x53EA;&#x662F;&#x5C06;&#x7FFB;&#x8BD1;&#x5E94;&#x7528;&#x4E8E;&#x540E;&#x8005;&#x3002;</span><span class="yiyi-st" id="yiyi-101">&#x56E0;&#x6B64;&#xFF0C;&#x5728;&#x5F88;&#x591A;&#x60C5;&#x51B5;&#x4E0B;&#xFF0C;&#x7279;&#x522B;&#x662F;&#x5728;&#x5904;&#x7406;&#x8FDE;&#x63A5;&#x8868;&#x7EE7;&#x627F;&#x914D;&#x7F6E;&#x4EE5;&#x53CA;&#x4F7F;&#x7528;<code class="docutils literal"><span class="pre">query(&lt;columns&gt;)</span></code>&#xFF0C;<code class="docutils literal"><span class="pre">Class.propname</span></code>&#x548C;<code class="docutils literal"><span class="pre">table.c.colname</span></code>&#x4E0D;&#x53EF;&#x4E92;&#x6362;&#x3002;</span></p><p><span class="yiyi-st" id="yiyi-102">For example, <code class="docutils literal"><span class="pre">session.query(users.c.id,</span> <span class="pre">users.c.name)</span></code> is different versus <code class="docutils literal"><span class="pre">session.query(User.id,</span> <span class="pre">User.name)</span></code>; in the latter case, the <code class="docutils literal"><span class="pre">Query</span></code> is aware of the mapper in use and further mapper-specific operations like <code class="docutils literal"><span class="pre">query.join(&lt;propname&gt;)</span></code>, <code class="docutils literal"><span class="pre">query.with_parent()</span></code> etc. </span><span class="yiyi-st" id="yiyi-103">&#x53EF;&#x80FD;&#x4F1A;&#x4F7F;&#x7528;&#xFF0C;&#x4F46;&#x5728;&#x524D;&#x8005;&#x60C5;&#x51B5;&#x4E0B;&#x4E0D;&#x80FD;&#x3002;</span><span class="yiyi-st" id="yiyi-104">&#x6B64;&#x5916;&#xFF0C;&#x5728;&#x591A;&#x6001;&#x7EE7;&#x627F;&#x573A;&#x666F;&#x4E2D;&#xFF0C;&#x7C7B;&#x7ED1;&#x5B9A;&#x63CF;&#x8FF0;&#x7B26;&#x5F15;&#x7528;&#x53EF;&#x7528;&#x7684;&#x591A;&#x6001;&#x53EF;&#x9009;&#x5217;&#x4E2D;&#x7684;&#x5217;&#xFF0C;&#x800C;&#x4E0D;&#x4E00;&#x5B9A;&#x662F;&#x76F4;&#x63A5;&#x5BF9;&#x5E94;&#x4E8E;&#x63CF;&#x8FF0;&#x7B26;&#x7684;&#x8868;&#x5217;&#x3002;</span><span class="yiyi-st" id="yiyi-105">For example, a set of classes related by joined-table inheritance to the <code class="docutils literal"><span class="pre">person</span></code> table along the <code class="docutils literal"><span class="pre">person_id</span></code> column of each table will all have their <code class="docutils literal"><span class="pre">Class.person_id</span></code> attribute mapped to the <code class="docutils literal"><span class="pre">person_id</span></code> column in <code class="docutils literal"><span class="pre">person</span></code>, and not their subclass table. </span><span class="yiyi-st" id="yiyi-106">&#x7248;&#x672C;0.4&#x5C06;&#x81EA;&#x52A8;&#x5C06;&#x6B64;&#x884C;&#x4E3A;&#x6620;&#x5C04;&#x5230;&#x8868;&#x683C;&#x7ED1;&#x5B9A;&#x7684;<code class="docutils literal"><span class="pre">Column</span></code>&#x5BF9;&#x8C61;&#x3002;</span><span class="yiyi-st" id="yiyi-107">In 0.5, this automatic conversion has been removed, so that you in fact <em>can</em> use table-bound columns as a means to override the translations which occur with polymorphic querying; this allows <code class="docutils literal"><span class="pre">Query</span></code> to be able to create optimized selects among joined-table or concrete-table inheritance setups, as well as portable subqueries, etc.</span></p></li><li><p class="first"><span class="yiyi-st" id="yiyi-108"><strong>Session Now Synchronizes Automatically with Transactions.</strong></span><span class="yiyi-st" id="yiyi-109">&#x4F1A;&#x8BDD;&#x73B0;&#x5728;&#x9ED8;&#x8BA4;&#x4F1A;&#x81EA;&#x52A8;&#x4E0E;&#x4E8B;&#x52A1;&#x540C;&#x6B65;&#xFF0C;&#x5305;&#x62EC;autoflush&#x548C;autoexpire&#x3002;</span><span class="yiyi-st" id="yiyi-110">&#x9664;&#x975E;&#x7981;&#x6B62;&#x4F7F;&#x7528;<code class="docutils literal"><span class="pre">autocommit</span></code>&#x9009;&#x9879;&#xFF0C;&#x5426;&#x5219;&#x4EA4;&#x6613;&#x59CB;&#x7EC8;&#x5B58;&#x5728;&#x3002;</span><span class="yiyi-st" id="yiyi-111">&#x5F53;&#x6240;&#x6709;&#x4E09;&#x4E2A;&#x6807;&#x5FD7;&#x90FD;&#x8BBE;&#x7F6E;&#x4E3A;&#x9ED8;&#x8BA4;&#x503C;&#x65F6;&#xFF0C;&#x4F1A;&#x8BDD;&#x5728;&#x56DE;&#x6EDA;&#x4E4B;&#x540E;&#x4F1A;&#x4F18;&#x96C5;&#x5730;&#x6062;&#x590D;&#xFF0C;&#x5E76;&#x4E14;&#x5F88;&#x96BE;&#x5C06;&#x9648;&#x65E7;&#x7684;&#x6570;&#x636E;&#x5BFC;&#x5165;&#x4F1A;&#x8BDD;&#x3002;</span><span class="yiyi-st" id="yiyi-112">&#x6709;&#x5173;&#x8BE6;&#x7EC6;&#x4FE1;&#x606F;&#xFF0C;&#x8BF7;&#x53C2;&#x9605;&#x65B0;&#x7684;Session&#x6587;&#x6863;&#x3002;</span></p></li><li><p class="first"><span class="yiyi-st" id="yiyi-113"><strong>&#x9690;&#x5F0F;&#x8BA2;&#x5355;&#x88AB;&#x79FB;&#x9664;</strong>&#x3002;</span><span class="yiyi-st" id="yiyi-114">&#x8FD9;&#x5C06;&#x5F71;&#x54CD;&#x4F9D;&#x8D56;&#x4E8E;SA&#x7684;&#x201C;&#x9690;&#x5F0F;&#x6392;&#x5E8F;&#x201D;&#x884C;&#x4E3A;&#x7684;ORM&#x7528;&#x6237;&#xFF0C;&#x8FD9;&#x4E9B;&#x7528;&#x6237;&#x58F0;&#x660E;&#x6240;&#x6709;&#x6CA1;&#x6709;<code class="docutils literal"><span class="pre">order_by()</span></code>&#x7684;Query&#x5BF9;&#x8C61;&#x5C06;ORDER BY&#x7684;&#x201C;id&#x201D;&#x6216;&#x201C;oid&#x201D;&#x5217;&#x4E3B;&#x6620;&#x5C04;&#x8868;&#x548C;&#x6240;&#x6709;&#x61D2;&#x60F0;/&#x6025;&#x5207;&#x52A0;&#x8F7D;&#x7684;&#x96C6;&#x5408;&#x90FD;&#x4F1A;&#x5E94;&#x7528;&#x7C7B;&#x4F3C;&#x7684;&#x6392;&#x5E8F;&#x3002;</span><span class="yiyi-st" id="yiyi-115">&#x5728;0.5&#x4E2D;&#xFF0C;&#x5FC5;&#x987B;&#x5728;<code class="docutils literal"><span class="pre">mapper()</span></code>&#x548C;<code class="docutils literal"><span class="pre">relation()</span></code>&#x5BF9;&#x8C61;&#xFF08;&#x5982;&#x679C;&#x9700;&#x8981;&#xFF09;&#x4E0A;&#x663E;&#x5F0F;&#x914D;&#x7F6E;&#x81EA;&#x52A8;&#x6392;&#x5E8F;&#xFF0C;&#x5426;&#x5219;&#x5728;&#x4F7F;&#x7528;<code class="docutils literal"><span class="pre">Query</span></code>&#x65F6;&#x81EA;&#x52A8;&#x6392;&#x5E8F;&#x3002;</span></p><p><span class="yiyi-st" id="yiyi-116">To convert an 0.4 mapping to 0.5, such that its ordering behavior will be extremely similar to 0.4 or previous, use the <code class="docutils literal"><span class="pre">order_by</span></code> setting on <code class="docutils literal"><span class="pre">mapper()</span></code> and <code class="docutils literal"><span class="pre">relation()</span></code>:</span></p><div class="highlight-python"><div class="highlight"><pre><span></span><span class="n">mapper</span><span class="p">(</span><span class="n">User</span><span class="p">,</span> <span class="n">users</span><span class="p">,</span> <span class="n">properties</span><span class="o">=</span><span class="p">{</span>
    <span class="s1">&apos;addresses&apos;</span><span class="p">:</span><span class="n">relation</span><span class="p">(</span><span class="n">Address</span><span class="p">,</span> <span class="n">order_by</span><span class="o">=</span><span class="n">addresses</span><span class="o">.</span><span class="n">c</span><span class="o">.</span><span class="n">id</span><span class="p">)</span>
<span class="p">},</span> <span class="n">order_by</span><span class="o">=</span><span class="n">users</span><span class="o">.</span><span class="n">c</span><span class="o">.</span><span class="n">id</span><span class="p">)</span></pre></div></div><p><span class="yiyi-st" id="yiyi-117">&#x8981;&#x8BBE;&#x7F6E;backref&#x7684;&#x987A;&#x5E8F;&#xFF0C;&#x8BF7;&#x4F7F;&#x7528;<code class="docutils literal"><span class="pre">backref()</span></code>&#x51FD;&#x6570;&#xFF1A;</span></p><div class="highlight-python"><div class="highlight"><pre><span></span>&apos;keywords&apos;:relation(Keyword, secondary=item_keywords,
      order_by=keywords.c.name, backref=backref(&apos;items&apos;, order_by=items.c.id))</pre></div></div><p><span class="yiyi-st" id="yiyi-118">&#x4F7F;&#x7528;&#x58F0;&#x660E;&#xFF1F;</span><span class="yiyi-st" id="yiyi-119">To help with the new <code class="docutils literal"><span class="pre">order_by</span></code> requirement, <code class="docutils literal"><span class="pre">order_by</span></code> and friends can now be set using strings which are evaluated in Python later on (this works <strong>only</strong> with declarative, not plain mappers):</span></p><div class="highlight-python"><div class="highlight"><pre><span></span>class MyClass(MyDeclarativeBase):
    ...
    &apos;addresses&apos;:relation(&quot;Address&quot;, order_by=&quot;Address.id&quot;)</pre></div></div><p><span class="yiyi-st" id="yiyi-120">&#x5728;<code class="docutils literal"><span class="pre">relation()s</span></code>&#x4E0A;&#x8BBE;&#x7F6E;<code class="docutils literal"><span class="pre">order_by</span></code>&#x901A;&#x5E38;&#x662F;&#x4E2A;&#x597D;&#x4E3B;&#x610F;&#xFF0C;&#x56E0;&#x4E3A;&#x8BE5;&#x987A;&#x5E8F;&#x4E0D;&#x4F1A;&#x53D7;&#x5230;&#x5F71;&#x54CD;&#x3002;</span><span class="yiyi-st" id="yiyi-121">&#x9664;&#x6B64;&#x4E4B;&#x5916;&#xFF0C;&#x6700;&#x4F73;&#x505A;&#x6CD5;&#x662F;&#x4F7F;&#x7528;<code class="docutils literal"><span class="pre">Query.order_by()</span></code>&#x6765;&#x63A7;&#x5236;&#x6B63;&#x5728;&#x52A0;&#x8F7D;&#x7684;&#x4E3B;&#x8981;&#x5B9E;&#x4F53;&#x7684;&#x6392;&#x5E8F;&#x3002;</span></p></li><li><p class="first"><span class="yiyi-st" id="yiyi-122"><strong>&#x4F1A;&#x8BDD;&#x73B0;&#x5728;&#x662F;autoflush = True / autoexpire = True / autocommit = False&#x3002;</strong></span><span class="yiyi-st" id="yiyi-123"> - &#x8981;&#x8BBE;&#x7F6E;&#x5B83;&#xFF0C;&#x53EA;&#x9700;&#x8C03;&#x7528;&#x4E0D;&#x5E26;&#x53C2;&#x6570;&#x7684;<code class="docutils literal"><span class="pre">sessionmaker()</span></code>&#x5373;&#x53EF;&#x3002;</span><span class="yiyi-st" id="yiyi-124">&#x540D;&#x79F0;<code class="docutils literal"><span class="pre">transactional=True</span></code>&#x73B0;&#x5728;&#x662F;<code class="docutils literal"><span class="pre">autocommit=False</span></code>&#x3002;</span><span class="yiyi-st" id="yiyi-125">Flushes occur upon each query issued (disable with <code class="docutils literal"><span class="pre">autoflush=False</span></code>), within each <code class="docutils literal"><span class="pre">commit()</span></code> (as always), and before each <code class="docutils literal"><span class="pre">begin_nested()</span></code> (so rolling back to the SAVEPOINT is meaningful). </span><span class="yiyi-st" id="yiyi-126">&#x6240;&#x6709;&#x5BF9;&#x8C61;&#x90FD;&#x5728;&#x6BCF;&#x4E2A;<code class="docutils literal"><span class="pre">commit()</span></code>&#x4E4B;&#x540E;&#x548C;&#x6BCF;&#x4E2A;<code class="docutils literal"><span class="pre">rollback()</span></code>&#x4E4B;&#x540E;&#x8FC7;&#x671F;&#x3002;</span><span class="yiyi-st" id="yiyi-127">&#x56DE;&#x6EDA;&#x540E;&#xFF0C;&#x6302;&#x8D77;&#x7684;&#x5BF9;&#x8C61;&#x88AB;&#x6E05;&#x9664;&#xFF0C;&#x88AB;&#x5220;&#x9664;&#x7684;&#x5BF9;&#x8C61;&#x79FB;&#x56DE;&#x5230;&#x6301;&#x4E45;&#x6027;&#x3002;</span><span class="yiyi-st" id="yiyi-128">&#x8FD9;&#x4E9B;&#x9ED8;&#x8BA4;&#x503C;&#x4E00;&#x8D77;&#x5DE5;&#x4F5C;&#x5F97;&#x975E;&#x5E38;&#x597D;&#xFF0C;&#x5E76;&#x4E14;&#x5B9E;&#x9645;&#x4E0A;&#x4E0D;&#x518D;&#x9700;&#x8981;&#x50CF;<code class="docutils literal"><span class="pre">clear()</span></code>&#x8FD9;&#x6837;&#x7684;&#x65E7;&#x6280;&#x672F;&#xFF08;&#x5B83;&#x4E5F;&#x91CD;&#x65B0;&#x547D;&#x540D;&#x4E3A;<code class="docutils literal"><span class="pre">expunge_all()</span></code>&#xFF09;&#x3002;</span></p><p><span class="yiyi-st" id="yiyi-129">&#x9644;&#xFF1A;</span><span class="yiyi-st" id="yiyi-130">&#xFF1A;&#x4F1A;&#x8BDD;&#x73B0;&#x5728;&#x53EF;&#x4EE5;&#x5728;<code class="docutils literal"><span class="pre">rollback()</span></code>&#x4E4B;&#x540E;&#x91CD;&#x7528;&#x3002;</span><span class="yiyi-st" id="yiyi-131">&#x6807;&#x91CF;&#x548C;&#x96C6;&#x5408;&#x5C5E;&#x6027;&#x7684;&#x53D8;&#x5316;&#xFF0C;&#x6DFB;&#x52A0;&#x548C;&#x5220;&#x9664;&#x90FD;&#x56DE;&#x6EDA;&#x3002;</span></p></li><li><p class="first"><span class="yiyi-st" id="yiyi-132"><strong>session.add() replaces session.save(), session.update(), session.save_or_update().</strong></span><span class="yiyi-st" id="yiyi-133"> - the <code class="docutils literal"><span class="pre">session.add(someitem)</span></code> and <code class="docutils literal"><span class="pre">session.add_all([list</span> <span class="pre">of</span> <span class="pre">items])</span></code> methods replace <code class="docutils literal"><span class="pre">save()</span></code>, <code class="docutils literal"><span class="pre">update()</span></code>, and <code class="docutils literal"><span class="pre">save_or_update()</span></code>. </span><span class="yiyi-st" id="yiyi-134">&#x8FD9;&#x4E9B;&#x65B9;&#x6CD5;&#x5C06;&#x5728;&#x6574;&#x4E2A;0.5&#x4E2D;&#x4FDD;&#x6301;&#x4E0D;&#x63A8;&#x8350;&#x3002;</span></p></li><li><p class="first"><span class="yiyi-st" id="yiyi-135"><strong>backref&#x914D;&#x7F6E;&#x6CA1;&#x6709;&#x5197;&#x957F;&#x3002;</strong></span><span class="yiyi-st" id="yiyi-136"> - The <code class="docutils literal"><span class="pre">backref()</span></code> function now uses the <code class="docutils literal"><span class="pre">primaryjoin</span></code> and <code class="docutils literal"><span class="pre">secondaryjoin</span></code> arguments of the forwards-facing <code class="docutils literal"><span class="pre">relation()</span></code> when they are not explicitly stated. </span><span class="yiyi-st" id="yiyi-137">&#x4E0D;&#x518D;&#x9700;&#x8981;&#x5206;&#x522B;&#x5728;&#x4E24;&#x4E2A;&#x65B9;&#x5411;&#x4E0A;&#x6307;&#x5B9A;<code class="docutils literal"><span class="pre">primaryjoin</span></code> / <code class="docutils literal"><span class="pre">secondaryjoin</span></code>&#x3002;</span></p></li><li><p class="first"><span class="yiyi-st" id="yiyi-138"><strong>&#x7B80;&#x5316;&#x7684;&#x591A;&#x6001;&#x9009;&#x9879;&#x3002;</strong></span><span class="yiyi-st" id="yiyi-139"> -  ORM&#x7684;&#x201C;&#x591A;&#x6001;&#x8D1F;&#x8F7D;&#x201D;&#x884C;&#x4E3A;&#x5DF2;&#x88AB;&#x7B80;&#x5316;&#x3002;</span><span class="yiyi-st" id="yiyi-140">&#x5728;0.4&#x4E2D;&#xFF0C;mapper()&#x6709;&#x4E00;&#x4E2A;&#x540D;&#x4E3A;<code class="docutils literal"><span class="pre">polymorphic_fetch</span></code>&#x7684;&#x53C2;&#x6570;&#xFF0C;&#x53EF;&#x4EE5;&#x5C06;&#x5176;&#x914D;&#x7F6E;&#x4E3A;<code class="docutils literal"><span class="pre">select</span></code>&#x6216;<code class="docutils literal"><span class="pre">deferred</span></code>&#x3002;</span><span class="yiyi-st" id="yiyi-141">&#x8BE5;&#x9009;&#x9879;&#x88AB;&#x5220;&#x9664;&#xFF1B;&#x73B0;&#x5728;&#xFF0C;&#x6620;&#x5C04;&#x5668;&#x53EA;&#x4F1A;&#x63A8;&#x8FDF;SELECT&#x8BED;&#x53E5;&#x4E2D;&#x4E0D;&#x5B58;&#x5728;&#x7684;&#x4EFB;&#x4F55;&#x5217;&#x3002;</span><span class="yiyi-st" id="yiyi-142">The actual SELECT statement used is controlled by the <code class="docutils literal"><span class="pre">with_polymorphic</span></code> mapper argument (which is also in 0.4 and replaces <code class="docutils literal"><span class="pre">select_table</span></code>), as well as the <code class="docutils literal"><span class="pre">with_polymorphic()</span></code> method on <code class="docutils literal"><span class="pre">Query</span></code> (also in 0.4).</span></p><p><span class="yiyi-st" id="yiyi-143">&#x5BF9;&#x7EE7;&#x627F;&#x7C7B;&#x7684;&#x5EF6;&#x8FDF;&#x52A0;&#x8F7D;&#x7684;&#x4E00;&#x4E2A;&#x6539;&#x8FDB;&#x662F;&#x6620;&#x5C04;&#x5668;&#x73B0;&#x5728;&#x5728;&#x6240;&#x6709;&#x60C5;&#x51B5;&#x4E0B;&#x90FD;&#x4EA7;&#x751F;&#x4E86;SELECT&#x8BED;&#x53E5;&#x7684;&#x201C;&#x4F18;&#x5316;&#x201D;&#x7248;&#x672C;&#xFF1B;&#x4E5F;&#x5C31;&#x662F;&#x8BF4;&#xFF0C;&#x5982;&#x679C;B&#x7C7B;&#x4ECE;A&#x7EE7;&#x627F;&#xFF0C;&#x5E76;&#x4E14;&#x53EA;&#x6709;B&#x7C7B;&#x4E2D;&#x5B58;&#x5728;&#x7684;&#x51E0;&#x4E2A;&#x5C5E;&#x6027;&#x5DF2;&#x8FC7;&#x671F;&#xFF0C;&#x5219;&#x5237;&#x65B0;&#x64CD;&#x4F5C;&#x5C06;&#x53EA;&#x5728;SELECT&#x8BED;&#x53E5;&#x4E2D;&#x5305;&#x542B;B&#x7684;&#x8868;&#xFF0C;&#x5E76;&#x4E14;&#x4E0D;&#x4F1A;&#x52A0;&#x5165;A.</span></p></li><li><p class="first"><span class="yiyi-st" id="yiyi-144"><code class="docutils literal"><span class="pre">Session</span></code>&#x4E0A;&#x7684;<code class="docutils literal"><span class="pre">execute()</span></code>&#x65B9;&#x6CD5;&#x5C06;&#x666E;&#x901A;&#x5B57;&#x7B26;&#x4E32;&#x8F6C;&#x6362;&#x4E3A;<code class="docutils literal"><span class="pre">text()</span></code>&#x7ED3;&#x6784;&#xFF0C;&#x4EE5;&#x4FBF;&#x7ED1;&#x5B9A;&#x53C2;&#x6570;&#x53EF;&#x4EE5;&#x5168;&#x90E8;&#x6307;&#x5B9A;&#x4E3A;&#x201C;&#xFF1A;bindname&#x201D;&#x800C;&#x4E0D;&#x9700;&#x8981;&#x660E;&#x786E;&#x5730;&#x8C03;&#x7528;<code class="docutils literal"><span class="pre">text()</span></code>&#x3002;</span><span class="yiyi-st" id="yiyi-145">&#x5982;&#x679C;&#x9700;&#x8981;&#x201C;&#x539F;&#x59CB;&#x201D;SQL&#xFF0C;&#x8BF7;&#x4F7F;&#x7528;<code class="docutils literal"><span class="pre">session.connection()&#x3002;execute&#xFF08;&#x201C;raw</span> <span class="pre">text&#x201D;&#xFF09;</span></code>&#x3002;</span></p></li><li><p class="first"><span class="yiyi-st" id="yiyi-146"><code class="docutils literal"><span class="pre">session.Query().iterate_instances()</span></code>&#x5DF2;&#x88AB;&#x91CD;&#x547D;&#x540D;&#x4E3A;<code class="docutils literal"><span class="pre">instances()</span></code>&#x3002;</span><span class="yiyi-st" id="yiyi-147">&#x8FD4;&#x56DE;&#x5217;&#x8868;&#x800C;&#x4E0D;&#x662F;&#x8FED;&#x4EE3;&#x5668;&#x7684;&#x65E7;<code class="docutils literal"><span class="pre">instances()</span></code>&#x65B9;&#x6CD5;&#x4E0D;&#x518D;&#x5B58;&#x5728;&#x3002;</span><span class="yiyi-st" id="yiyi-148">&#x5982;&#x679C;&#x4F60;&#x4F9D;&#x8D56;&#x8FD9;&#x79CD;&#x884C;&#x4E3A;&#xFF0C;&#x4F60;&#x5E94;&#x8BE5;&#x4F7F;&#x7528;<code class="docutils literal"><span class="pre">list(your_query.instances())</span></code>&#x3002;</span></p></li></ul></div><div class="section" id="extending-the-orm"><h2><span class="yiyi-st" id="yiyi-149">&#x6269;&#x5C55;ORM <a class="headerlink" href="#extending-the-orm" title="Permalink to this headline">&#xB6;</a></span></h2><p><span class="yiyi-st" id="yiyi-150">&#x5728;0.5&#x4E2D;&#xFF0C;&#x6211;&#x4EEC;&#x6B63;&#x5728;&#x91C7;&#x53D6;&#x66F4;&#x591A;&#x65B9;&#x6CD5;&#x6765;&#x4FEE;&#x6539;&#x548C;&#x6269;&#x5C55;ORM&#x3002;</span><span class="yiyi-st" id="yiyi-151">&#x4E0B;&#x9762;&#x662F;&#x4E00;&#x4E2A;&#x603B;&#x7ED3;&#xFF1A;</span></p><ul class="simple"><li><span class="yiyi-st" id="yiyi-152"><strong> MapperExtension&#x3002; T0&gt;</strong></span><span class="yiyi-st" id="yiyi-153"> - &#x8FD9;&#x662F;&#x7ECF;&#x5178;&#x7684;&#x6269;&#x5C55;&#x200B;&#x200B;&#x7C7B;&#xFF0C;&#x5B83;&#x4ECD;&#x7136;&#x5B58;&#x5728;&#x3002;</span><span class="yiyi-st" id="yiyi-154">Methods which should rarely be needed are <code class="docutils literal"><span class="pre">create_instance()</span></code> and <code class="docutils literal"><span class="pre">populate_instance()</span></code>. </span><span class="yiyi-st" id="yiyi-155">&#x8981;&#x4ECE;&#x6570;&#x636E;&#x5E93;&#x52A0;&#x8F7D;&#x5BF9;&#x8C61;&#x65F6;&#x63A7;&#x5236;&#x5BF9;&#x8C61;&#x7684;&#x521D;&#x59CB;&#x5316;&#xFF0C;&#x8BF7;&#x4F7F;&#x7528;&#x6587;&#x6863;&#x4E2D;&#x63CF;&#x8FF0;&#x7684;<code class="docutils literal"><span class="pre">reconstruct_instance()</span></code>&#x65B9;&#x6CD5;&#x6216;&#x66F4;&#x7B80;&#x5355;&#x7684;<code class="docutils literal"><span class="pre">@reconstructor</span></code>&#x88C5;&#x9970;&#x5668;&#x3002;</span></li><li><span class="yiyi-st" id="yiyi-156"><strong> SessionExtension&#x3002; T0&gt;</strong></span><span class="yiyi-st" id="yiyi-157"> - &#x8FD9;&#x662F;&#x4E00;&#x4E2A;&#x6613;&#x4E8E;&#x4F7F;&#x7528;&#x7684;&#x4F1A;&#x8BDD;&#x4E8B;&#x4EF6;&#x6269;&#x5C55;&#x7C7B;&#x3002;</span><span class="yiyi-st" id="yiyi-158">In particular, it provides <code class="docutils literal"><span class="pre">before_flush()</span></code>, <code class="docutils literal"><span class="pre">after_flush()</span></code> and <code class="docutils literal"><span class="pre">after_flush_postexec()</span></code> methods. </span><span class="yiyi-st" id="yiyi-159">&#x7531;&#x4E8E;&#x5728;<code class="docutils literal"><span class="pre">before_flush()</span></code>&#x4E4B;&#x5185;&#xFF0C;&#x60A8;&#x53EF;&#x4EE5;&#x81EA;&#x7531;&#x4FEE;&#x6539;&#x4F1A;&#x8BDD;&#x7684;&#x5237;&#x65B0;&#x8BA1;&#x5212;&#xFF0C;&#x56E0;&#x6B64;&#x5EFA;&#x8BAE;&#x5728;<code class="docutils literal"><span class="pre">MapperExtension.before_XXX</span></code>&#x4E4B;&#x4E0A;&#x4F7F;&#x7528;&#x6B64;&#x7528;&#x6CD5;&#xFF0C;&#x800C;<code class="docutils literal"><span class="pre">MapperExtension</span></code></span></li><li><span class="yiyi-st" id="yiyi-160"><strong> AttributeExtension&#x3002; T0&gt;</strong></span><span class="yiyi-st" id="yiyi-161"> - &#x8FD9;&#x4E2A;&#x7C7B;&#x73B0;&#x5728;&#x662F;&#x516C;&#x5171;API&#x7684;&#x4E00;&#x90E8;&#x5206;&#xFF0C;&#x5141;&#x8BB8;&#x62E6;&#x622A;&#x5C5E;&#x6027;&#x4E0A;&#x7684;userland&#x4E8B;&#x4EF6;&#xFF0C;&#x5305;&#x62EC;&#x5C5E;&#x6027;&#x8BBE;&#x7F6E;&#x548C;&#x5220;&#x9664;&#x64CD;&#x4F5C;&#x4EE5;&#x53CA;&#x96C6;&#x5408;&#x9644;&#x52A0;&#x548C;&#x5220;&#x9664;&#x3002;</span><span class="yiyi-st" id="yiyi-162">&#x5B83;&#x8FD8;&#x5141;&#x8BB8;&#x4FEE;&#x6539;&#x6216;&#x8BBE;&#x7F6E;&#x503C;&#x3002;</span><span class="yiyi-st" id="yiyi-163">&#x6587;&#x6863;&#x4E2D;&#x63CF;&#x8FF0;&#x7684;<code class="docutils literal"><span class="pre">@validates</span></code>&#x88C5;&#x9970;&#x5668;&#x63D0;&#x4F9B;&#x4E86;&#x4E00;&#x79CD;&#x5C06;&#x4EFB;&#x4F55;&#x6620;&#x5C04;&#x5C5E;&#x6027;&#x6807;&#x8BB0;&#x4E3A;&#x7531;&#x7279;&#x5B9A;&#x7C7B;&#x65B9;&#x6CD5;&#x201C;&#x9A8C;&#x8BC1;&#x201D;&#x7684;&#x5FEB;&#x901F;&#x65B9;&#x6CD5;&#x3002;</span></li><li><span class="yiyi-st" id="yiyi-164"><strong>&#x5C5E;&#x6027;&#x5DE5;&#x5177;&#x5B9A;&#x5236;&#x3002;</strong></span><span class="yiyi-st" id="yiyi-165"> - &#x63D0;&#x4F9B;&#x4E86;&#x4E00;&#x4E2A;API&#xFF0C;&#x7528;&#x4E8E;&#x5B8C;&#x5168;&#x66FF;&#x4EE3;SQLAlchemy&#x7684;&#x5C5E;&#x6027;&#x68C0;&#x6D4B;&#xFF0C;&#x6216;&#x8005;&#x4EC5;&#x4EC5;&#x5728;&#x67D0;&#x4E9B;&#x60C5;&#x51B5;&#x4E0B;&#x5BF9;&#x5176;&#x8FDB;&#x884C;&#x6269;&#x5145;&#x3002;</span><span class="yiyi-st" id="yiyi-166">&#x8BE5;API&#x662F;&#x4E3A;&#x4E86;Trellis&#x5DE5;&#x5177;&#x5305;&#x7684;&#x76EE;&#x7684;&#x800C;&#x751F;&#x6210;&#x7684;&#xFF0C;&#x4F46;&#x53EF;&#x4F5C;&#x4E3A;&#x516C;&#x5171;API&#x63D0;&#x4F9B;&#x3002;</span><span class="yiyi-st" id="yiyi-167">&#x5728;<code class="docutils literal"><span class="pre">/examples/custom_attributes</span></code>&#x76EE;&#x5F55;&#x4E2D;&#x7684;&#x5206;&#x53D1;&#x4E2D;&#x63D0;&#x4F9B;&#x4E86;&#x4E00;&#x4E9B;&#x793A;&#x4F8B;&#x3002;</span></li></ul></div><div class="section" id="schema-types"><h2><span class="yiyi-st" id="yiyi-168">&#x6A21;&#x5F0F;/&#x7C7B;&#x578B;<a class="headerlink" href="#schema-types" title="Permalink to this headline">&#xB6; T0&gt;</a></span></h2><ul><li><p class="first"><span class="yiyi-st" id="yiyi-169"><strong>&#x6CA1;&#x6709;&#x957F;&#x5EA6;&#x7684;&#x5B57;&#x7B26;&#x4E32;&#x4E0D;&#x4F1A;&#x518D;&#x751F;&#x6210;TEXT&#xFF0C;&#x5B83;&#x4F1A;&#x751F;&#x6210;VARCHAR</strong>  - &#x5F53;&#x6307;&#x5B9A;&#x957F;&#x5EA6;&#x65F6;&#xFF0C;<code class="docutils literal"><span class="pre">String</span></code>&#x7C7B;&#x578B;&#x4E0D;&#x518D;&#x5947;&#x8FF9;&#x822C;&#x5730;&#x8F6C;&#x6362;&#x4E3A;<code class="docutils literal"><span class="pre">Text</span></code> &#x3002;</span><span class="yiyi-st" id="yiyi-170">&#x8FD9;&#x4EC5;&#x5728;&#x53D1;&#x51FA;CREATE TABLE&#x65F6;&#x6709;&#x6548;&#xFF0C;&#x56E0;&#x4E3A;&#x5B83;&#x5C06;&#x53D1;&#x51FA;&#x6CA1;&#x6709;&#x957F;&#x5EA6;&#x53C2;&#x6570;&#x7684;<code class="docutils literal"><span class="pre">VARCHAR</span></code>&#xFF0C;&#x8FD9;&#x5728;&#x8BB8;&#x591A;&#xFF08;&#x4F46;&#x4E0D;&#x662F;&#x5168;&#x90E8;&#xFF09;&#x6570;&#x636E;&#x5E93;&#x4E0A;&#x90FD;&#x65E0;&#x6548;&#x3002;</span><span class="yiyi-st" id="yiyi-171">&#x8981;&#x521B;&#x5EFA;TEXT&#xFF08;&#x6216;CLOB&#xFF0C;&#x5373;&#x65E0;&#x754C;&#x5B57;&#x7B26;&#x4E32;&#xFF09;&#x5217;&#xFF0C;&#x8BF7;&#x4F7F;&#x7528;<code class="docutils literal"><span class="pre">Text</span></code>&#x7C7B;&#x578B;&#x3002;</span></p></li><li><p class="first"><span class="yiyi-st" id="yiyi-172"><strong>&#x5177;&#x6709;mutable = True&#x7684;PickleType()&#x9700;&#x8981;__eq __()&#x65B9;&#x6CD5;</strong>  -  <code class="docutils literal"><span class="pre">PickleType</span></code>&#x7C7B;&#x578B;&#x9700;&#x8981;&#x5728;mutable = True&#x65F6;&#x6BD4;&#x8F83;&#x503C;&#x3002;</span><span class="yiyi-st" id="yiyi-173">&#x6BD4;&#x8F83;<code class="docutils literal"><span class="pre">pickle.dumps()</span></code>&#x7684;&#x65B9;&#x6CD5;&#x662F;&#x4F4E;&#x6548;&#x4E14;&#x4E0D;&#x53EF;&#x9760;&#x7684;&#x3002;</span><span class="yiyi-st" id="yiyi-174">&#x5982;&#x679C;&#x4F20;&#x5165;&#x7684;&#x5BF9;&#x8C61;&#x6CA1;&#x6709;&#x5B9E;&#x73B0;<code class="docutils literal"><span class="pre">__eq__()</span></code>&#x5E76;&#x4E14;&#x4E5F;&#x4E0D;&#x662F;<code class="docutils literal"><span class="pre">None</span></code>&#xFF0C;&#x5219;&#x4F7F;&#x7528;<code class="docutils literal"><span class="pre">dumps()</span></code>&#x6BD4;&#x8F83;&#xFF0C;&#x4F46;&#x4F1A;&#x5F15;&#x53D1;&#x8B66;&#x544A;&#x3002;</span><span class="yiyi-st" id="yiyi-175">&#x5BF9;&#x4E8E;&#x5B9E;&#x73B0;&#x5305;&#x542B;&#x6240;&#x6709;&#x5B57;&#x5178;&#xFF0C;&#x5217;&#x8868;&#x7B49;&#x7684;<code class="docutils literal"><span class="pre">__eq__()</span></code>&#x7684;&#x7C7B;&#x578B;&#xFF0C;&#x6BD4;&#x8F83;&#x5C06;&#x4F7F;&#x7528;<code class="docutils literal"><span class="pre">==</span></code>&#xFF0C;&#x73B0;&#x5728;&#x9ED8;&#x8BA4;&#x60C5;&#x51B5;&#x4E0B;&#x53EF;&#x9760;&#x3002;</span></p></li><li><p class="first"><span class="yiyi-st" id="yiyi-176"><strong>convert_bind_param() and convert_result_value() methods of TypeEngine/TypeDecorator are removed.</strong></span><span class="yiyi-st" id="yiyi-177"> - &#x4E0D;&#x5E78;&#x7684;&#x662F;&#xFF0C;O&apos;Reilly&#x7684;&#x4E66;&#x4E2D;&#x8BB0;&#x5F55;&#x4E86;&#x8FD9;&#x4E9B;&#x65B9;&#x6CD5;&#xFF0C;&#x5373;&#x4F7F;&#x5B83;&#x4EEC;&#x5728;0.3&#x540E;&#x88AB;&#x5F03;&#x7528;&#x3002;</span><span class="yiyi-st" id="yiyi-178">&#x5BF9;&#x4E8E;&#x7C7B;&#x578B;&#x4E3A;<code class="docutils literal"><span class="pre">TypeEngine</span></code>&#x7684;&#x7528;&#x6237;&#x5B9A;&#x4E49;&#x7C7B;&#x578B;&#xFF0C;&#x5E94;&#x8BE5;&#x4F7F;&#x7528;<code class="docutils literal"><span class="pre">bind_processor()</span></code>&#x548C;<code class="docutils literal"><span class="pre">result_processor()</span></code>&#x65B9;&#x6CD5;&#x8FDB;&#x884C;&#x7ED1;&#x5B9A;/&#x7ED3;&#x679C;&#x5904;&#x7406;&#x3002;</span><span class="yiyi-st" id="yiyi-179">&#x4EFB;&#x4F55;&#x7528;&#x6237;&#x5B9A;&#x4E49;&#x7684;&#x7C7B;&#x578B;&#xFF0C;&#x65E0;&#x8BBA;&#x662F;&#x6269;&#x5C55;<code class="docutils literal"><span class="pre">TypeEngine</span></code>&#x8FD8;&#x662F;<code class="docutils literal"><span class="pre">TypeDecorator</span></code>&#xFF0C;&#x90FD;&#x53EF;&#x4EE5;&#x4F7F;&#x7528;&#x4EE5;&#x4E0B;&#x9002;&#x914D;&#x5668;&#x8F7B;&#x677E;&#x9002;&#x5E94;&#x65B0;&#x6837;&#x5F0F;&#xFF1A;</span></p><div class="highlight-python"><div class="highlight"><pre><span></span><span class="k">class</span> <span class="nc">AdaptOldConvertMethods</span><span class="p">(</span><span class="nb">object</span><span class="p">):</span>
    <span class="sd">&quot;&quot;&quot;A mixin which adapts 0.3-style convert_bind_param and</span>
<span class="sd">    convert_result_value methods</span>

<span class="sd">    &quot;&quot;&quot;</span>
    <span class="k">def</span> <span class="nf">bind_processor</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">dialect</span><span class="p">):</span>
        <span class="k">def</span> <span class="nf">convert</span><span class="p">(</span><span class="n">value</span><span class="p">):</span>
            <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">convert_bind_param</span><span class="p">(</span><span class="n">value</span><span class="p">,</span> <span class="n">dialect</span><span class="p">)</span>
        <span class="k">return</span> <span class="n">convert</span>

    <span class="k">def</span> <span class="nf">result_processor</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">dialect</span><span class="p">):</span>
        <span class="k">def</span> <span class="nf">convert</span><span class="p">(</span><span class="n">value</span><span class="p">):</span>
            <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">convert_result_value</span><span class="p">(</span><span class="n">value</span><span class="p">,</span> <span class="n">dialect</span><span class="p">)</span>
        <span class="k">return</span> <span class="n">convert</span>

    <span class="k">def</span> <span class="nf">convert_result_value</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">value</span><span class="p">,</span> <span class="n">dialect</span><span class="p">):</span>
        <span class="k">return</span> <span class="n">value</span>

    <span class="k">def</span> <span class="nf">convert_bind_param</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">value</span><span class="p">,</span> <span class="n">dialect</span><span class="p">):</span>
        <span class="k">return</span> <span class="n">value</span></pre></div></div><p><span class="yiyi-st" id="yiyi-180">&#x8981;&#x4F7F;&#x7528;&#x4E0A;&#x9762;&#x7684;mixin&#xFF1A;</span></p><div class="highlight-python"><div class="highlight"><pre><span></span>class MyType(AdaptOldConvertMethods, TypeEngine):
   # ...</pre></div></div></li><li><p class="first"><span class="yiyi-st" id="yiyi-181"><code class="docutils literal"><span class="pre">Column</span></code>&#x548C;<code class="docutils literal"><span class="pre">Table</span></code>&#x4EE5;&#x53CA;<code class="docutils literal"><span class="pre">Table</span></code>&#x4E2D;&#x7684;<code class="docutils literal"><span class="pre">quote_schema</span></code>&#x6807;&#x5FD7;&#x4E0A;&#x7684;<code class="docutils literal"><span class="pre">quote</span></code></span><span class="yiyi-st" id="yiyi-182">&#x9ED8;&#x8BA4;&#x503C;&#x662F;<code class="docutils literal"><span class="pre">None</span></code>&#xFF0C;&#x8FD9;&#x610F;&#x5473;&#x7740;&#x8BA9;&#x5E38;&#x89C4;&#x5F15;&#x7528;&#x89C4;&#x5219;&#x751F;&#x6548;&#x3002;</span><span class="yiyi-st" id="yiyi-183">&#x5F53;<code class="docutils literal"><span class="pre">True</span></code>&#x65F6;&#xFF0C;&#x5F3A;&#x5236;&#x5F15;&#x7528;&#x5F15;&#x7528;&#x3002;</span><span class="yiyi-st" id="yiyi-184">&#x5F53;<code class="docutils literal"><span class="pre">False</span></code>&#x65F6;&#xFF0C;&#x5F15;&#x7528;&#x88AB;&#x5F3A;&#x5236;&#x5173;&#x95ED;&#x3002;</span></p></li><li><p class="first"><span class="yiyi-st" id="yiyi-185">&#x5217;<code class="docutils literal"><span class="pre">DEFAULT</span></code>&#x503C;DDL&#x73B0;&#x5728;&#x53EF;&#x4EE5;&#x901A;&#x8FC7;<code class="docutils literal"><span class="pre">Column&#xFF08;...&#xFF0C;</span> <span class="pre">server_default =&apos;val&apos;&#xFF09;</span>  t2 &gt;&#xFF0C;&#x5F03;&#x7528;<code class="docutils literal"><span class="pre">&#x5217;&#xFF08;...&#xFF0C;</span> <span class="pre">PassiveDefault&#xFF08;&apos;val&apos;&#xFF09;&#xFF09;</span></code>&#x3002;</code></span><span class="yiyi-st" id="yiyi-186"><code class="docutils literal"><span class="pre">default=</span></code>&#x73B0;&#x5728;&#x4E13;&#x7528;&#x4E8E;Python&#x542F;&#x52A8;&#x7684;&#x9ED8;&#x8BA4;&#x503C;&#xFF0C;&#x5E76;&#x4E14;&#x53EF;&#x4EE5;&#x4E0E;server_default&#x5171;&#x5B58;&#x3002;</span><span class="yiyi-st" id="yiyi-187">&#x65B0;&#x7684;<code class="docutils literal"><span class="pre">server_default=FetchedValue()</span></code>&#x53D6;&#x4EE3;&#x4E86;&#x7528;&#x4E8E;&#x6807;&#x8BB0;&#x5217;&#x7684;<code class="docutils literal"><span class="pre">PassiveDefault(&apos;&apos;)</span></code>&#x6210;&#x8BED;&#x53D7;&#x5916;&#x90E8;&#x89E6;&#x53D1;&#x5F71;&#x54CD;&#x5E76;&#x4E14;&#x6CA1;&#x6709;DDL&#x526F;&#x4F5C;&#x7528;&#x3002;</span></p></li><li><p class="first"><span class="yiyi-st" id="yiyi-188">SQLite&#x7684;<code class="docutils literal"><span class="pre">DateTime</span></code>&#xFF0C;<code class="docutils literal"><span class="pre">Time</span></code>&#x548C;<code class="docutils literal"><span class="pre">Date</span></code>&#x7C7B;&#x578B;&#x73B0;&#x5728;<strong>&#x53EA;&#x63A5;&#x53D7;&#x65E5;&#x671F;&#x65F6;&#x95F4;&#x5BF9;&#x8C61;&#xFF0C;&#x800C;&#x4E0D;&#x63A5;&#x53D7;&#x5B57;&#x7B26;&#x4E32;</strong>&#x4F5C;&#x4E3A;&#x7ED1;&#x5B9A;&#x53C2;&#x6570;&#x8F93;&#x5165;&#x3002;</span><span class="yiyi-st" id="yiyi-189">&#x5982;&#x679C;&#x4F60;&#x60F3;&#x521B;&#x5EFA;&#x81EA;&#x5DF1;&#x7684;&#x201C;hybrid&#x201D;&#x7C7B;&#x578B;&#xFF0C;&#x5B83;&#x63A5;&#x53D7;&#x5B57;&#x7B26;&#x4E32;&#x5E76;&#x5C06;&#x7ED3;&#x679C;&#x4F5C;&#x4E3A;&#x65E5;&#x671F;&#x5BF9;&#x8C61;&#x8FD4;&#x56DE;&#xFF08;&#x4ECE;&#x4EFB;&#x4F55;&#x4F60;&#x60F3;&#x8981;&#x7684;&#x683C;&#x5F0F;&#xFF09;&#xFF0C;&#x521B;&#x5EFA;&#x4E00;&#x4E2A;<code class="docutils literal"><span class="pre">TypeDecorator</span></code>&#xFF0C;&#x5B83;&#x5EFA;&#x7ACB;&#x5728;<code class="docutils literal"><span class="pre">String</span></code></span><span class="yiyi-st" id="yiyi-190">&#x5982;&#x679C;&#x60A8;&#x53EA;&#x9700;&#x8981;&#x57FA;&#x4E8E;&#x5B57;&#x7B26;&#x4E32;&#x7684;&#x65E5;&#x671F;&#xFF0C;&#x53EA;&#x9700;&#x4F7F;&#x7528;<code class="docutils literal"><span class="pre">String</span></code>&#x5373;&#x53EF;&#x3002;</span></p></li><li><p class="first"><span class="yiyi-st" id="yiyi-191">&#x6B64;&#x5916;&#xFF0C;&#x5F53;&#x4E0E;SQLite&#x4E00;&#x8D77;&#x4F7F;&#x7528;&#x65F6;&#xFF0C;<code class="docutils literal"><span class="pre">DateTime</span></code>&#x548C;<code class="docutils literal"><span class="pre">Time</span></code>&#x7C7B;&#x578B;&#x73B0;&#x5728;&#x8868;&#x793A;Python <code class="docutils literal"><span class="pre">datetime.datetime</span></code>&#x5BF9;&#x8C61;&#x7684;&#x201C;microseconds&#x201D;&#x5B57;&#x6BB5;&#x4E0E;<code class="docutils literal"><span class="pre">str(datetime)</span></code>&#x76F8;&#x540C;&#x7684;&#x65B9;&#x5F0F; - &#x5206;&#x6570;&#x79D2;&#xFF0C;&#x800C;&#x4E0D;&#x662F;&#x5FAE;&#x79D2;&#x6570;&#x3002;</span><span class="yiyi-st" id="yiyi-192">&#x90A3;&#x662F;&#xFF1A;</span></p><div class="highlight-python"><div class="highlight"><pre><span></span><span class="n">dt</span> <span class="o">=</span> <span class="n">datetime</span><span class="o">.</span><span class="n">datetime</span><span class="p">(</span><span class="mi">2008</span><span class="p">,</span> <span class="mi">6</span><span class="p">,</span> <span class="mi">27</span><span class="p">,</span> <span class="mi">12</span><span class="p">,</span> <span class="mi">0</span><span class="p">,</span> <span class="mi">0</span><span class="p">,</span> <span class="mi">125</span><span class="p">)</span>  <span class="c1"># 125 usec</span>

<span class="c1"># old way</span>
<span class="s1">&apos;2008-06-27 12:00:00.125&apos;</span>

<span class="c1"># new way</span>
<span class="s1">&apos;2008-06-27 12:00:00.000125&apos;</span></pre></div></div><p><span class="yiyi-st" id="yiyi-193">&#x56E0;&#x6B64;&#xFF0C;&#x5982;&#x679C;&#x73B0;&#x6709;&#x7684;&#x57FA;&#x4E8E;SQLite&#x6587;&#x4EF6;&#x7684;&#x6570;&#x636E;&#x5E93;&#x6253;&#x7B97;&#x5728;0.4&#x548C;0.5&#x4E4B;&#x95F4;&#x4F7F;&#x7528;&#xFF0C;&#x5219;&#x5FC5;&#x987B;&#x5347;&#x7EA7;&#x65E5;&#x671F;&#x65F6;&#x95F4;&#x5217;&#x4EE5;&#x5B58;&#x50A8;&#x65B0;&#x683C;&#x5F0F;&#xFF08;&#x8BF7;&#x6CE8;&#x610F;&#xFF1A;&#x8BF7;&#x6D4B;&#x8BD5;&#x4E00;&#x4E0B;&#xFF0C;&#x6211;&#x975E;&#x5E38;&#x80AF;&#x5B9A;&#x5B83;&#x7684;&#x6B63;&#x786E;&#x6027;&#xFF09;&#xFF1A;</span></p><div class="highlight-python"><div class="highlight"><pre><span></span>UPDATE mytable SET somedatecol =
  substr(somedatecol, 0, 19) || &apos;.&apos; || substr((substr(somedatecol, 21, -1) / 1000000), 3, -1);</pre></div></div><p><span class="yiyi-st" id="yiyi-194">&#x6216;&#x8005;&#xFF0C;&#x542F;&#x7528;&#x201C;&#x4F20;&#x7EDF;&#x201D;&#x6A21;&#x5F0F;&#xFF0C;&#x5982;&#x4E0B;&#x6240;&#x793A;&#xFF1A;</span></p><div class="highlight-python"><div class="highlight"><pre><span></span><span class="kn">from</span> <span class="nn">sqlalchemy.databases.sqlite</span> <span class="kn">import</span> <span class="n">DateTimeMixin</span>
<span class="n">DateTimeMixin</span><span class="o">.</span><span class="n">__legacy_microseconds__</span> <span class="o">=</span> <span class="bp">True</span></pre></div></div></li></ul></div><div class="section" id="connection-pool-no-longer-threadlocal-by-default"><h2><span class="yiyi-st" id="yiyi-195">&#x9ED8;&#x8BA4;&#x60C5;&#x51B5;&#x4E0B;&#xFF0C;&#x8FDE;&#x63A5;&#x6C60;&#x4E0D;&#x518D;&#x662F;threadlocal <a class="headerlink" href="#connection-pool-no-longer-threadlocal-by-default" title="Permalink to this headline">&#xB6;</a></span></h2><p><span class="yiyi-st" id="yiyi-196">0.4&#x6709;&#x4E00;&#x4E2A;&#x4E0D;&#x5E78;&#x7684;&#x9ED8;&#x8BA4;&#x8BBE;&#x7F6E;&#x201C;pool_threadlocal = True&#x201D;&#xFF0C;&#x4F8B;&#x5982;&#xFF0C;&#x5F53;&#x5728;&#x5355;&#x4E2A;&#x7EBF;&#x7A0B;&#x4E2D;&#x4F7F;&#x7528;&#x591A;&#x4E2A;&#x4F1A;&#x8BDD;&#x65F6;&#x4F1A;&#x5BFC;&#x81F4;&#x610F;&#x5916;&#x884C;&#x4E3A;&#x3002;</span><span class="yiyi-st" id="yiyi-197">&#x8FD9;&#x4E2A;&#x6807;&#x5FD7;&#x73B0;&#x5728;&#x5728;0.5&#x3002;</span><span class="yiyi-st" id="yiyi-198">To re-enable 0.4&#x2019;s behavior, specify <code class="docutils literal"><span class="pre">pool_threadlocal=True</span></code> to <code class="docutils literal"><span class="pre">create_engine()</span></code>, or alternatively use the &#x201C;threadlocal&#x201D; strategy via <code class="docutils literal"><span class="pre">strategy=&quot;threadlocal&quot;</span></code>.</span></p></div><div class="section" id="args-accepted-args-no-longer-accepted"><h2><span class="yiyi-st" id="yiyi-199">* args Accepted&#xFF0C;* args&#x4E0D;&#x518D;&#x88AB;&#x63A5;&#x53D7;<a class="headerlink" href="#args-accepted-args-no-longer-accepted" title="Permalink to this headline">&#xB6;</a></span></h2><p><span class="yiyi-st" id="yiyi-200">&#x4F7F;&#x7528;<code class="docutils literal"><span class="pre">method(\*args)</span></code>&#x4E0E;<code class="docutils literal"><span class="pre">method([args])</span></code>&#x7684;&#x7B56;&#x7565;&#x662F;&#xFF0C;&#x5982;&#x679C;&#x65B9;&#x6CD5;&#x63A5;&#x53D7;&#x8868;&#x793A;&#x56FA;&#x5B9A;&#x7ED3;&#x6784;&#x7684;&#x53EF;&#x53D8;&#x957F;&#x5EA6;&#x9879;&#x96C6;&#xFF0C;&#x5B83;&#x9700;&#x8981;<code class="docutils literal"><span class="pre">\*args</span></code>&#x3002;</span><span class="yiyi-st" id="yiyi-201">&#x5982;&#x679C;&#x8BE5;&#x65B9;&#x6CD5;&#x63A5;&#x53D7;&#x6570;&#x636E;&#x9A71;&#x52A8;&#x7684;&#x53EF;&#x53D8;&#x957F;&#x5EA6;&#x9879;&#x76EE;&#x96C6;&#x5408;&#xFF0C;&#x5219;&#x9700;&#x8981;<code class="docutils literal"><span class="pre">[args]</span></code>&#x3002;</span></p><ul><li><p class="first"><span class="yiyi-st" id="yiyi-202">The various Query.options() functions <code class="docutils literal"><span class="pre">eagerload()</span></code>, <code class="docutils literal"><span class="pre">eagerload_all()</span></code>, <code class="docutils literal"><span class="pre">lazyload()</span></code>, <code class="docutils literal"><span class="pre">contains_eager()</span></code>, <code class="docutils literal"><span class="pre">defer()</span></code>, <code class="docutils literal"><span class="pre">undefer()</span></code> all accept variable-length <code class="docutils literal"><span class="pre">\*keys</span></code> as their argument now, which allows a path to be formulated using descriptors, ie. </span><span class="yiyi-st" id="yiyi-203">:</span></p><div class="highlight-python"><div class="highlight"><pre><span></span><span class="n">query</span><span class="o">.</span><span class="n">options</span><span class="p">(</span><span class="n">eagerload_all</span><span class="p">(</span><span class="n">User</span><span class="o">.</span><span class="n">orders</span><span class="p">,</span> <span class="n">Order</span><span class="o">.</span><span class="n">items</span><span class="p">,</span> <span class="n">Item</span><span class="o">.</span><span class="n">keywords</span><span class="p">))</span></pre></div></div><p><span class="yiyi-st" id="yiyi-204">&#x4E3A;&#x4E86;&#x5411;&#x540E;&#x517C;&#x5BB9;&#xFF0C;&#x4ECD;&#x7136;&#x63A5;&#x53D7;&#x5355;&#x4E2A;&#x6570;&#x7EC4;&#x53C2;&#x6570;&#x3002;</span></p></li><li><p class="first"><span class="yiyi-st" id="yiyi-205">Similarly, the <code class="docutils literal"><span class="pre">Query.join()</span></code> and <code class="docutils literal"><span class="pre">Query.outerjoin()</span></code> methods accept a variable length *args, with a single array accepted for backwards compatibility:</span></p><div class="highlight-python"><div class="highlight"><pre><span></span><span class="n">query</span><span class="o">.</span><span class="n">join</span><span class="p">(</span><span class="s1">&apos;orders&apos;</span><span class="p">,</span> <span class="s1">&apos;items&apos;</span><span class="p">)</span>
<span class="n">query</span><span class="o">.</span><span class="n">join</span><span class="p">(</span><span class="n">User</span><span class="o">.</span><span class="n">orders</span><span class="p">,</span> <span class="n">Order</span><span class="o">.</span><span class="n">items</span><span class="p">)</span></pre></div></div></li><li><p class="first"><span class="yiyi-st" id="yiyi-206">&#x5217;&#x548C;&#x7C7B;&#x4F3C;&#x7684;_()&#x65B9;&#x6CD5;&#x4E2D;&#x7684;<code class="docutils literal"><span class="pre">in_()</span></code></span><span class="yiyi-st" id="yiyi-207">&#x5B83;&#x4E0D;&#x518D;&#x63A5;&#x53D7;<code class="docutils literal"><span class="pre">\*args</span></code>&#x3002;</span></p></li></ul></div><div class="section" id="removed"><h2><span class="yiyi-st" id="yiyi-208">&#x9664;&#x53BB;<a class="headerlink" href="#removed" title="Permalink to this headline">&#xB6; T0&gt;</a></span></h2><ul><li><p class="first"><span class="yiyi-st" id="yiyi-209"><strong>entity_name</strong>  - &#x6B64;&#x529F;&#x80FD;&#x59CB;&#x7EC8;&#x5B58;&#x5728;&#x95EE;&#x9898;&#x5E76;&#x4E14;&#x5F88;&#x5C11;&#x4F7F;&#x7528;&#x3002;</span><span class="yiyi-st" id="yiyi-210">0.5&#x7684;&#x66F4;&#x6DF1;&#x5165;&#x5145;&#x5B9E;&#x7684;&#x7528;&#x4F8B;&#x63ED;&#x793A;&#x4E86;&#x5BFC;&#x81F4;&#x5176;&#x88AB;&#x5220;&#x9664;&#x7684;<code class="docutils literal"><span class="pre">entity_name</span></code>&#x7684;&#x8FDB;&#x4E00;&#x6B65;&#x95EE;&#x9898;&#x3002;</span><span class="yiyi-st" id="yiyi-211">&#x5982;&#x679C;&#x5355;&#x4E2A;&#x7C7B;&#x9700;&#x8981;&#x4E0D;&#x540C;&#x7684;&#x6620;&#x5C04;&#xFF0C;&#x8BF7;&#x5C06;&#x8BE5;&#x7C7B;&#x62C6;&#x5206;&#x4E3A;&#x5355;&#x72EC;&#x7684;&#x5B50;&#x7C7B;&#x5E76;&#x5206;&#x522B;&#x6620;&#x5C04;&#x5B83;&#x4EEC;&#x3002;</span><span class="yiyi-st" id="yiyi-212">&#x4E00;&#x4E2A;&#x4F8B;&#x5B50;&#x662F;[wiki&#xFF1A;UsageRecipes / EntityName]&#x3002;</span><span class="yiyi-st" id="yiyi-213">&#x6709;&#x5173;&#x57FA;&#x672C;&#x539F;&#x7406;&#x7684;&#x66F4;&#x591A;&#x4FE1;&#x606F;&#xFF0C;&#x8BF7;&#x53C2;&#x89C1;http&#xFF1A;//groups.google.c om / group / sqlalchemy / browse_thread / thread / 9e23a0641a88b96d&#xFF1F;</span><span class="yiyi-st" id="yiyi-214">hl = en&#x3002;</span></p></li><li><p class="first"><span class="yiyi-st" id="yiyi-215"><strong>get()/load() cleanup</strong></span></p><p><span class="yiyi-st" id="yiyi-216"><code class="docutils literal"><span class="pre">load()</span></code>&#x65B9;&#x6CD5;&#x5DF2;&#x88AB;&#x5220;&#x9664;&#x3002;</span><span class="yiyi-st" id="yiyi-217">&#x5B83;&#x7684;&#x529F;&#x80FD;&#x662F;&#x4EFB;&#x610F;&#x7684;&#xFF0C;&#x57FA;&#x672C;&#x4E0A;&#x4ECE;Hibernate&#x4E2D;&#x590D;&#x5236;&#xFF0C;&#x5B83;&#x4E5F;&#x4E0D;&#x662F;&#x4E00;&#x4E2A;&#x7279;&#x522B;&#x6709;&#x610F;&#x4E49;&#x7684;&#x65B9;&#x6CD5;&#x3002;</span></p><p><span class="yiyi-st" id="yiyi-218">&#x8981;&#x83B7;&#x5F97;&#x540C;&#x7B49;&#x529F;&#x80FD;&#xFF1A;</span></p><div class="highlight-python"><div class="highlight"><pre><span></span><span class="n">x</span> <span class="o">=</span> <span class="n">session</span><span class="o">.</span><span class="n">query</span><span class="p">(</span><span class="n">SomeClass</span><span class="p">)</span><span class="o">.</span><span class="n">populate_existing</span><span class="p">()</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="mi">7</span><span class="p">)</span></pre></div></div><p><span class="yiyi-st" id="yiyi-219"><code class="docutils literal"><span class="pre">Session.get(cls,</span> <span class="pre">id)</span></code> and <code class="docutils literal"><span class="pre">Session.load(cls,</span> <span class="pre">id)</span></code> have been removed. </span><span class="yiyi-st" id="yiyi-220"><code class="docutils literal"><span class="pre">Session.get()</span></code> is redundant vs. <code class="docutils literal"><span class="pre">session.query(cls).get(id)</span></code>.</span></p><p><span class="yiyi-st" id="yiyi-221"><code class="docutils literal"><span class="pre">MapperExtension.get()</span></code>&#x4E5F;&#x88AB;&#x5220;&#x9664;&#xFF08;&#x5C31;&#x50CF;<code class="docutils literal"><span class="pre">MapperExtension.load()</span></code>&#xFF09;&#x3002;</span><span class="yiyi-st" id="yiyi-222">&#x8981;&#x8986;&#x76D6;<code class="docutils literal"><span class="pre">Query.get()</span></code>&#x7684;&#x529F;&#x80FD;&#xFF0C;&#x8BF7;&#x4F7F;&#x7528;&#x4EE5;&#x4E0B;&#x5B50;&#x7C7B;&#xFF1A;</span></p><div class="highlight-python"><div class="highlight"><pre><span></span>class MyQuery(Query):
    def get(self, ident):
        # ...

session = sessionmaker(query_cls=MyQuery)()

ad1 = session.query(Address).get(1)</pre></div></div></li><li><p class="first"><span class="yiyi-st" id="yiyi-223"><code class="docutils literal"><span class="pre">sqlalchemy.orm.relation()</span></code></span></p><p><span class="yiyi-st" id="yiyi-224">&#x4EE5;&#x4E0B;&#x5DF2;&#x5F03;&#x7528;&#x7684;&#x5173;&#x952E;&#x5B57;&#x53C2;&#x6570;&#x5DF2;&#x88AB;&#x5220;&#x9664;&#xFF1A;</span></p><p><span class="yiyi-st" id="yiyi-225">foreignkey&#xFF0C;association&#xFF0C;private&#xFF0C;attributeext&#xFF0C;is_backref</span></p><p><span class="yiyi-st" id="yiyi-226">&#x7279;&#x522B;&#x662F;&#xFF0C;<code class="docutils literal"><span class="pre">attributeext</span></code>&#x88AB;&#x66FF;&#x6362;&#x4E3A;<code class="docutils literal"><span class="pre">extension</span></code>  -  <code class="docutils literal"><span class="pre">AttributeExtension</span></code>&#x7C7B;&#x73B0;&#x5728;&#x5904;&#x4E8E;&#x516C;&#x5171;API&#x4E2D;&#x3002;</span></p></li><li><p class="first"><span class="yiyi-st" id="yiyi-227"><code class="docutils literal"><span class="pre">session.Query()</span></code></span></p><p><span class="yiyi-st" id="yiyi-228">&#x4EE5;&#x4E0B;&#x5F03;&#x7528;&#x51FD;&#x6570;&#x5DF2;&#x88AB;&#x5220;&#x9664;&#xFF1A;</span></p><p><span class="yiyi-st" id="yiyi-229">&#x5217;&#x8868;&#xFF0C;&#x6807;&#x91CF;&#xFF0C;count_by&#xFF0C;select_whereclause&#xFF0C;get_by&#xFF0C;select_by&#xFF0C;join_by&#xFF0C;selectfirst&#xFF0C;selectone&#xFF0C;select&#xFF0C;execute&#xFF0C;select_statement&#xFF0C;select_text&#xFF0C;join_to&#xFF0C;join_via&#xFF0C;selectfirst_by&#xFF0C;selectone_by&#xFF0C;apply_max&#xFF0C;apply_min&#xFF0C;apply_avg&#xFF0C;apply_sum</span></p><p><span class="yiyi-st" id="yiyi-230">Additionally, the <code class="docutils literal"><span class="pre">id</span></code> keyword argument to <code class="docutils literal"><span class="pre">join()</span></code>, <code class="docutils literal"><span class="pre">outerjoin()</span></code>, <code class="docutils literal"><span class="pre">add_entity()</span></code> and <code class="docutils literal"><span class="pre">add_column()</span></code> has been removed. </span><span class="yiyi-st" id="yiyi-231">&#x8981;&#x5C06;<code class="docutils literal"><span class="pre">Query</span></code>&#x4E2D;&#x7684;&#x8868;&#x522B;&#x540D;&#x4F5C;&#x4E3A;&#x7ED3;&#x679C;&#x5217;&#xFF0C;&#x8BF7;&#x4F7F;&#x7528;<code class="docutils literal"><span class="pre">aliased</span></code>&#x7ED3;&#x6784;&#xFF1A;</span></p><div class="highlight-python"><div class="highlight"><pre><span></span><span class="kn">from</span> <span class="nn">sqlalchemy.orm</span> <span class="kn">import</span> <span class="n">aliased</span>
<span class="n">address_alias</span> <span class="o">=</span> <span class="n">aliased</span><span class="p">(</span><span class="n">Address</span><span class="p">)</span>
<span class="k">print</span><span class="p">(</span><span class="n">session</span><span class="o">.</span><span class="n">query</span><span class="p">(</span><span class="n">User</span><span class="p">,</span> <span class="n">address_alias</span><span class="p">)</span><span class="o">.</span><span class="n">join</span><span class="p">((</span><span class="n">address_alias</span><span class="p">,</span> <span class="n">User</span><span class="o">.</span><span class="n">addresses</span><span class="p">))</span><span class="o">.</span><span class="n">all</span><span class="p">())</span></pre></div></div></li><li><p class="first"><span class="yiyi-st" id="yiyi-232"><code class="docutils literal"><span class="pre">sqlalchemy.orm.Mapper</span></code></span></p><ul class="simple"><li><span class="yiyi-st" id="yiyi-233">&#x5B9E;&#x4F8B;()</span></li><li><span class="yiyi-st" id="yiyi-234">get_session() - &#x8FD9;&#x4E2A;&#x65B9;&#x6CD5;&#x4E0D;&#x662F;&#x5F88;&#x660E;&#x663E;&#xFF0C;&#x4F46;&#x662F;&#x5177;&#x6709;&#x5C06;&#x60F0;&#x6027;&#x52A0;&#x8F7D;&#x4E0E;&#x7279;&#x5B9A;&#x4F1A;&#x8BDD;&#x76F8;&#x5173;&#x8054;&#x7684;&#x6548;&#x679C;&#xFF0C;&#x5373;&#x4F7F;&#x7236;&#x5BF9;&#x8C61;&#x5B8C;&#x5168;&#x5206;&#x79BB;&#xFF0C;&#x5F53;&#x6269;&#x5C55;&#x540D;&#x5982;<code class="docutils literal"><span class="pre">scoped_session()</span></code>&#x6216;&#x65E7;&#x4F7F;&#x7528;<code class="docutils literal"><span class="pre">SessionContextExt</span></code>&#x3002;</span><span class="yiyi-st" id="yiyi-235">&#x4E00;&#x4E9B;&#x4F9D;&#x8D56;&#x6B64;&#x884C;&#x4E3A;&#x7684;&#x5E94;&#x7528;&#x7A0B;&#x5E8F;&#x53EF;&#x80FD;&#x4E0D;&#x518D;&#x6309;&#x9884;&#x671F;&#x5DE5;&#x4F5C;&#xFF1B;&#x4F46;&#x662F;&#x66F4;&#x597D;&#x7684;&#x7F16;&#x7A0B;&#x4E60;&#x60EF;&#x662F;&#x5728;&#x9700;&#x8981;&#x4ECE;&#x5C5E;&#x6027;&#x8BBF;&#x95EE;&#x6570;&#x636E;&#x5E93;&#x65F6;&#x59CB;&#x7EC8;&#x786E;&#x4FDD;&#x5BF9;&#x8C61;&#x5B58;&#x5728;&#x4E8E;&#x4F1A;&#x8BDD;&#x4E2D;&#x3002;</span></li></ul></li><li><p class="first"><span class="yiyi-st" id="yiyi-236"><code class="docutils literal"><span class="pre">mapper&#xFF08;MyClass&#xFF0C;</span> <span class="pre">mytable&#xFF09;</span></code></span></p><p><span class="yiyi-st" id="yiyi-237">&#x6620;&#x5C04;&#x7C7B;no&#x66F4;&#x957F;&#xFF0C;&#x5177;&#x6709;&#x201C;c&#x201D;&#x7C7B;&#x5C5E;&#x6027;&#xFF1B;&#x4F8B;&#x5982;<code class="docutils literal"><span class="pre">MyClass.c</span></code></span></p></li><li><p class="first"><span class="yiyi-st" id="yiyi-238"><code class="docutils literal"><span class="pre">sqlalchemy.orm.collections</span></code></span></p><p><span class="yiyi-st" id="yiyi-239">prepare_instrumentation&#x7684;_prepare_instrumentation&#x522B;&#x540D;&#x5DF2;&#x88AB;&#x5220;&#x9664;&#x3002;</span></p></li><li><p class="first"><span class="yiyi-st" id="yiyi-240"><code class="docutils literal"><span class="pre">sqlalchemy.orm</span></code></span></p><p><span class="yiyi-st" id="yiyi-241">&#x5220;&#x9664;&#x4E86;<code class="docutils literal"><span class="pre">EXT_PASS</span></code> <code class="docutils literal"><span class="pre">EXT_CONTINUE</span></code>&#x7684;&#x522B;&#x540D;&#x3002;</span></p></li><li><p class="first"><span class="yiyi-st" id="yiyi-242"><code class="docutils literal"><span class="pre">sqlalchemy.engine</span></code></span></p><p><span class="yiyi-st" id="yiyi-243">&#x4ECE;<code class="docutils literal"><span class="pre">DefaultDialect.preexecute_sequences</span></code>&#x5230;<code class="docutils literal"><span class="pre">.preexecute_pk_sequences</span></code>&#x7684;&#x522B;&#x540D;&#x5DF2;&#x88AB;&#x5220;&#x9664;&#x3002;</span></p><p><span class="yiyi-st" id="yiyi-244">&#x5DF2;&#x5F03;&#x7528;&#x7684;engine_descriptors()&#x51FD;&#x6570;&#x5DF2;&#x88AB;&#x5220;&#x9664;&#x3002;</span></p></li><li><p class="first"><span class="yiyi-st" id="yiyi-245"><code class="docutils literal"><span class="pre">sqlalchemy.ext.activemapper</span></code></span></p><p><span class="yiyi-st" id="yiyi-246">&#x6A21;&#x5757;&#x5DF2;&#x79FB;&#x9664;&#x3002;</span></p></li><li><p class="first"><span class="yiyi-st" id="yiyi-247"><code class="docutils literal"><span class="pre">sqlalchemy.ext.assignmapper</span></code></span></p><p><span class="yiyi-st" id="yiyi-248">&#x6A21;&#x5757;&#x5DF2;&#x79FB;&#x9664;&#x3002;</span></p></li><li><p class="first"><span class="yiyi-st" id="yiyi-249"><code class="docutils literal"><span class="pre">sqlalchemy.ext.associationproxy</span></code></span></p><p><span class="yiyi-st" id="yiyi-250">&#x5173;&#x952E;&#x5B57;&#x53C2;&#x6570;&#x5728;&#x4EE3;&#x7406;&#x7684;<code class="docutils literal"><span class="pre">.append&#xFF08;item&#xFF0C;</span> <span class="pre">\ ** kw&#xFF09;</span></code>&#x4E0A;&#x7684;&#x4F20;&#x9012;&#x5DF2;&#x88AB;&#x5220;&#x9664;&#xFF0C;&#x73B0;&#x5728;&#x7B80;&#x5355;&#x5730;<code class="docutils literal"><span class="pre">.append(item)</span></code></span></p></li><li><p class="first"><span class="yiyi-st" id="yiyi-251"><code class="docutils literal"><span class="pre">sqlalchemy.ext.selectresults</span></code>&#xFF0C;<code class="docutils literal"><span class="pre">sqlalchemy.mods.selectresults</span></code></span></p><p><span class="yiyi-st" id="yiyi-252">&#x6A21;&#x5757;&#x5DF2;&#x79FB;&#x9664;&#x3002;</span></p></li><li><p class="first"><span class="yiyi-st" id="yiyi-253"><code class="docutils literal"><span class="pre">sqlalchemy.ext.declarative</span></code></span></p><p><span class="yiyi-st" id="yiyi-254"><code class="docutils literal"><span class="pre">declared_synonym()</span></code> removed.</span></p></li><li><p class="first"><span class="yiyi-st" id="yiyi-255"><code class="docutils literal"><span class="pre">sqlalchemy.ext.sessioncontext</span></code></span></p><p><span class="yiyi-st" id="yiyi-256">&#x6A21;&#x5757;&#x5DF2;&#x79FB;&#x9664;&#x3002;</span></p></li><li><p class="first"><span class="yiyi-st" id="yiyi-257"><code class="docutils literal"><span class="pre">sqlalchemy.log</span></code></span></p><p><span class="yiyi-st" id="yiyi-258">&#x5DF2;&#x5C06;<code class="docutils literal"><span class="pre">sqlalchemy.exc.SADeprecationWarning</span></code>&#x7684;<code class="docutils literal"><span class="pre">SADeprecationWarning</span></code>&#x522B;&#x540D;&#x5220;&#x9664;&#x3002;</span></p></li><li><p class="first"><span class="yiyi-st" id="yiyi-259"><code class="docutils literal"><span class="pre">sqlalchemy.exc</span></code></span></p><p><span class="yiyi-st" id="yiyi-260"><code class="docutils literal"><span class="pre">exc.AssertionError</span></code>&#x5DF2;&#x88AB;&#x5220;&#x9664;&#xFF0C;&#x5E76;&#x4E14;&#x4F7F;&#x7528;&#x7531;&#x5185;&#x7F6E;&#x76F8;&#x540C;&#x540D;&#x79F0;&#x7684;Python&#x66FF;&#x6362;&#x3002;</span></p></li><li><p class="first"><span class="yiyi-st" id="yiyi-261"><code class="docutils literal"><span class="pre">sqlalchemy.databases.mysql</span></code></span></p><p><span class="yiyi-st" id="yiyi-262">&#x5F03;&#x7528;&#x7684;<code class="docutils literal"><span class="pre">get_version_info</span></code>&#x65B9;&#x8A00;&#x65B9;&#x6CD5;&#x5DF2;&#x88AB;&#x5220;&#x9664;&#x3002;</span></p></li></ul></div><div class="section" id="renamed-or-moved"><h2><span class="yiyi-st" id="yiyi-263">&#x91CD;&#x547D;&#x540D;&#x6216;&#x79FB;&#x52A8;<a class="headerlink" href="#renamed-or-moved" title="Permalink to this headline">&#xB6;</a></span></h2><ul><li><p class="first"><span class="yiyi-st" id="yiyi-264"><code class="docutils literal"><span class="pre">sqlalchemy.exceptions</span></code>&#x73B0;&#x5728;&#x662F;<code class="docutils literal"><span class="pre">sqlalchemy.exc</span></code></span></p><p><span class="yiyi-st" id="yiyi-265">&#x8BE5;&#x6A21;&#x5757;&#x4ECD;&#x7136;&#x53EF;&#x4EE5;&#x4EE5;&#x65E7;&#x540D;&#x79F0;&#x5BFC;&#x5165;&#xFF0C;&#x76F4;&#x5230;0.6&#x3002;</span></p></li><li><p class="first"><span class="yiyi-st" id="yiyi-266"><code class="docutils literal"><span class="pre">FlushError</span></code>&#xFF0C;<code class="docutils literal"><span class="pre">ConcurrentModificationError</span></code>&#xFF0C;<code class="docutils literal"><span class="pre">UnmappedColumnError</span></code>  - &gt; sqlalchemy.orm.exc</span></p><p><span class="yiyi-st" id="yiyi-267">&#x8FD9;&#x4E9B;&#x5F02;&#x5E38;&#x79FB;&#x81F3;orm&#x5305;&#x3002;</span><span class="yiyi-st" id="yiyi-268">&#x5BFC;&#x5165;&apos;sqlalchemy.orm&apos;&#x5C06;&#x5728;sqlalchemy.exc&#x4E2D;&#x5B89;&#x88C5;&#x522B;&#x540D;&#xFF0C;&#x76F4;&#x5230;0.6&#x3002;</span></p></li><li><p class="first"><span class="yiyi-st" id="yiyi-269"><code class="docutils literal"><span class="pre">sqlalchemy.logging</span></code>  - &gt; <code class="docutils literal"><span class="pre">sqlalchemy.log</span></code></span></p><p><span class="yiyi-st" id="yiyi-270">&#x6B64;&#x5185;&#x90E8;&#x6A21;&#x5757;&#x5DF2;&#x91CD;&#x547D;&#x540D;&#x3002;</span><span class="yiyi-st" id="yiyi-271">&#x4F7F;&#x7528;py2app&#x548C;&#x7C7B;&#x4F3C;&#x5DE5;&#x5177;&#x626B;&#x63CF;&#x5BFC;&#x5165;&#x65F6;&#xFF0C;&#x4E0D;&#x518D;&#x9700;&#x8981;&#x7279;&#x6B8A;&#x7684;&#x5957;&#x4EF6;&#x3002;</span></p></li><li><p class="first"><span class="yiyi-st" id="yiyi-272"><code class="docutils literal"><span class="pre">session.Query().iterate_instances()</span></code>  - &gt; <code class="docutils literal"><span class="pre">session.Query().instances()</span></code>&#x3002;</span></p></li></ul></div><div class="section" id="deprecated"><h2><span class="yiyi-st" id="yiyi-273">&#x5F03;&#x7528;<a class="headerlink" href="#deprecated" title="Permalink to this headline">&#xB6; T0&gt;</a></span></h2><ul><li><p class="first"><span class="yiyi-st" id="yiyi-274"><code class="docutils literal"><span class="pre">Session.save()</span></code>, <code class="docutils literal"><span class="pre">Session.update()</span></code>, <code class="docutils literal"><span class="pre">Session.save_or_update()</span></code></span></p><p><span class="yiyi-st" id="yiyi-275">&#x6240;&#x6709;&#x4E09;&#x4E2A;&#x90FD;&#x88AB;<code class="docutils literal"><span class="pre">Session.add()</span></code>&#x53D6;&#x4EE3;</span></p></li><li><p class="first"><span class="yiyi-st" id="yiyi-276"><code class="docutils literal"><span class="pre">sqlalchemy.PassiveDefault</span></code></span></p><p><span class="yiyi-st" id="yiyi-277">&#x4F7F;&#x7528;<code class="docutils literal"><span class="pre">Column(server_default=...)</span></code>&#x5C06;&#x5176;&#x8F6C;&#x6362;&#x4E3A;sqlalchemy.DefaultClause()&#x3002;</span></p></li><li><p class="first"><span class="yiyi-st" id="yiyi-278"><code class="docutils literal"><span class="pre">session.Query().iterate_instances()</span></code></span><span class="yiyi-st" id="yiyi-279">&#x5B83;&#x5DF2;&#x88AB;&#x91CD;&#x547D;&#x540D;&#x4E3A;<code class="docutils literal"><span class="pre">instances()</span></code>&#x3002;</span></p></li></ul></div>