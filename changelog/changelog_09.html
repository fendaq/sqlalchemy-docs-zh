<h1><span class="yiyi-st" id="yiyi-158">0.9 Changelog <a class="headerlink" href="#changelog" title="Permalink to this headline">&#xB6;</a></span></h1><div class="section" id="change-0.9.11"><h2><span class="yiyi-st" id="yiyi-159">0.9.11 <a class="headerlink" href="#change-0.9.11" title="Permalink to this headline">&#xB6; T0&gt;</a></span></h2><span class="yiyi-st" id="yiyi-168">&#x6CA1;&#x6709;&#x53D1;&#x5E03;&#x65E5;&#x671F;</span><div class="section" id="change-0.9.11-engine"><h3><span class="yiyi-st" id="yiyi-160">&#x53D1;&#x52A8;&#x673A;<a class="headerlink" href="#change-0.9.11-engine" title="Permalink to this headline">&#xB6; T0&gt;</a></span></h3><ul class="simple"><li><p id="change-0.9.11-0"><span class="yiyi-st" id="yiyi-161"><span class="target" id="change-4c50f070b6a282e0335d9fb87a2131cc"><strong>[engine] [bug] </strong></span>Fixed critical issue whereby the pool &#x201C;checkout&#x201D; event handler may be called against a stale connection without the &#x201C;connect&#x201D; event handler having been called, in the case where the pool attempted to reconnect after being invalidated and failed; the stale connection would remain present and would be used on a subsequent attempt. </span><span class="yiyi-st" id="yiyi-162">&#x8FD9;&#x4E2A;&#x95EE;&#x9898;&#x5728;1.0.2&#x4E4B;&#x540E;&#x7684;1.0&#x7CFB;&#x5217;&#x4E2D;&#x6709;&#x66F4;&#x5927;&#x7684;&#x5F71;&#x54CD;&#xFF0C;&#x56E0;&#x4E3A;&#x5B83;&#x8FD8;&#x5411;&#x4E8B;&#x4EF6;&#x5904;&#x7406;&#x7A0B;&#x5E8F;&#x63D0;&#x4F9B;&#x4E86;&#x4E00;&#x4E2A;&#x7A7A;&#x767D;&#x7684;<code class="docutils literal"><span class="pre">.info</span></code>&#x5B57;&#x5178;&#xFF1B;&#x5728;1.0.2&#x4E4B;&#x524D;&#xFF0C;<code class="docutils literal"><span class="pre">.info</span></code>&#x5B57;&#x5178;&#x4ECD;&#x7136;&#x662F;&#x524D;&#x4E00;&#x4E2A;&#x3002;<a class="changeset-link headerlink reference internal" href="#change-4c50f070b6a282e0335d9fb87a2131cc">&#xB6;</a></span></p><p><span class="yiyi-st" id="yiyi-163">&#x53C2;&#x8003;&#x6587;&#x732E;&#xFF1A;<a class="reference external" href="http://www.sqlalchemy.org/trac/ticket/3497">&#xFF03;3497</a></span></p></li></ul></div><div class="section" id="change-0.9.11-oracle"><h3><span class="yiyi-st" id="yiyi-164">&#x9884;&#x8A00;<a class="headerlink" href="#change-0.9.11-oracle" title="Permalink to this headline">&#xB6; T0&gt;</a></span></h3><ul class="simple"><li><p id="change-0.9.11-1"><span class="yiyi-st" id="yiyi-165"><span class="target" id="change-0b5a9411f0cb0fb5b9ed763837dacee7"><strong>[oracle] [bug] [py3k] </strong></span>Fixed support for cx_Oracle version 5.2, which was tripping up SQLAlchemy&#x2019;s version detection under Python 3 and inadvertently not using the correct unicode mode for Python 3. </span><span class="yiyi-st" id="yiyi-166">&#x8FD9;&#x4F1A;&#x5BFC;&#x81F4;&#x7ED1;&#x5B9A;&#x53D8;&#x91CF;&#x88AB;&#x9519;&#x8BEF;&#x5730;&#x89E3;&#x91CA;&#x4E3A;NULL&#xFF0C;&#x5E76;&#x4E14;&#x884C;&#x65E0;&#x58F0;&#x65E0;&#x606F;&#x5730;&#x8FD4;&#x56DE;&#x3002;<a class="changeset-link headerlink reference internal" href="#change-0b5a9411f0cb0fb5b9ed763837dacee7">&#xB6;</a></span></p><p><span class="yiyi-st" id="yiyi-167">&#x53C2;&#x8003;&#x6587;&#x732E;&#xFF1A;<a class="reference external" href="http://www.sqlalchemy.org/trac/ticket/3491">&#xFF03;3491</a></span></p></li></ul></div></div><div class="section" id="change-0.9.10"><h2><span class="yiyi-st" id="yiyi-169">0.9.10 <a class="headerlink" href="#change-0.9.10" title="Permalink to this headline">&#xB6; T0&gt;</a></span></h2><span class="yiyi-st" id="yiyi-213">&#x53D1;&#x5E03;&#x65E5;&#x671F;&#xFF1A;2015&#x5E74;7&#x6708;22&#x65E5;</span><div class="section" id="change-0.9.10-orm"><h3><span class="yiyi-st" id="yiyi-170">ORM <a class="headerlink" href="#change-0.9.10-orm" title="Permalink to this headline">&#xB6; T0&gt;</a></span></h3><ul class="simple"><li><p id="change-0.9.10-0"><span class="yiyi-st" id="yiyi-171"><span class="target" id="change-ca4fc751ceaa91a33992ee87c9a525a3"><strong>[orm] [feature] </strong></span>&#x5411;&#x7531;<a class="reference internal" href="orm_query.html#sqlalchemy.orm.query.Query.column_descriptions" title="sqlalchemy.orm.query.Query.column_descriptions"><code class="xref py py-attr docutils literal"><span class="pre">Query.column_descriptions</span></code></a>&#x8FD4;&#x56DE;&#x7684;&#x5B57;&#x5178;&#x6DFB;&#x52A0;&#x4E86;&#x4E00;&#x4E2A;&#x65B0;&#x6761;&#x76EE;<code class="docutils literal"><span class="pre">&quot;entity&quot;</span></code>&#x3002;</span><span class="yiyi-st" id="yiyi-172">&#x8FD9;&#x662F;&#x6307;&#x7531;&#x8868;&#x8FBE;&#x5F0F;&#x5F15;&#x7528;&#x7684;&#x4E3B;&#x8981;ORM&#x6620;&#x5C04;&#x7C7B;&#x6216;&#x522B;&#x540D;&#x7C7B;&#x3002;</span><span class="yiyi-st" id="yiyi-173">&#x4E0E;<code class="docutils literal"><span class="pre">&quot;type&quot;</span></code>&#x7684;&#x73B0;&#x6709;&#x6761;&#x76EE;&#x76F8;&#x6BD4;&#xFF0C;&#x5373;&#x4F7F;&#x4ECE;&#x5217;&#x8868;&#x8FBE;&#x5F0F;&#x4E2D;&#x63D0;&#x53D6;&#xFF0C;&#x5B83;&#x4E5F;&#x5C06;&#x59CB;&#x7EC8;&#x662F;&#x6620;&#x5C04;&#x5B9E;&#x4F53;&#xFF0C;&#x5982;&#x679C;&#x7ED9;&#x5B9A;&#x8868;&#x8FBE;&#x5F0F;&#x662F;&#x7EAF;&#x7CB9;&#x6838;&#x5FC3;&#x8868;&#x8FBE;&#x5F0F;&#xFF0C;&#x5B83;&#x5C06;&#x59CB;&#x7EC8;&#x4E3A;None&#x3002;</span><span class="yiyi-st" id="yiyi-174">&#x53E6;&#x89C1;<a class="reference external" href="http://www.sqlalchemy.org/trac/ticket/3403">&#xFF03;3403</a>&#xFF0C;&#x5B83;&#x4FEE;&#x590D;&#x4E86;&#x6B64;&#x529F;&#x80FD;&#x4E2D;&#x7684;&#x56DE;&#x5F52;&#xFF0C;&#x8BE5;&#x529F;&#x80FD;&#x5728;0.9.10&#x4E2D;&#x672A;&#x53D1;&#x5E03;&#xFF0C;&#x4F46;&#x5728;1.0&#x7248;&#x672C;&#x4E2D;&#x53D1;&#x5E03;&#x3002;<a class="changeset-link headerlink reference internal" href="#change-ca4fc751ceaa91a33992ee87c9a525a3">&#xB6;</a></span></p><p><span class="yiyi-st" id="yiyi-175">&#x53C2;&#x8003;&#x6587;&#x732E;&#xFF1A;<a class="reference external" href="http://www.sqlalchemy.org/trac/ticket/3320">&#xFF03;3320</a></span></p></li><li><p id="change-0.9.10-1"><span class="yiyi-st" id="yiyi-176"><span class="target" id="change-af136f4c0f377ed2650ebb765f409144"><strong>[orm] [bug] </strong></span><a class="reference internal" href="orm_query.html#sqlalchemy.orm.query.Query" title="sqlalchemy.orm.query.Query"><code class="xref py py-class docutils literal"><span class="pre">Query</span></code></a> doesn&#x2019;t support joins, subselects, or special FROM clauses when using the <a class="reference internal" href="orm_query.html#sqlalchemy.orm.query.Query.update" title="sqlalchemy.orm.query.Query.update"><code class="xref py py-meth docutils literal"><span class="pre">Query.update()</span></code></a> or <a class="reference internal" href="orm_query.html#sqlalchemy.orm.query.Query.delete" title="sqlalchemy.orm.query.Query.delete"><code class="xref py py-meth docutils literal"><span class="pre">Query.delete()</span></code></a> methods; instead of silently ignoring these fields if methods like <a class="reference internal" href="orm_query.html#sqlalchemy.orm.query.Query.join" title="sqlalchemy.orm.query.Query.join"><code class="xref py py-meth docutils literal"><span class="pre">Query.join()</span></code></a> or <a class="reference internal" href="orm_query.html#sqlalchemy.orm.query.Query.select_from" title="sqlalchemy.orm.query.Query.select_from"><code class="xref py py-meth docutils literal"><span class="pre">Query.select_from()</span></code></a> has been called, a warning is emitted. </span><span class="yiyi-st" id="yiyi-177">&#x4ECE;1.0.0b5&#x5F00;&#x59CB;&#xFF0C;&#x8FD9;&#x4F1A;&#x5F15;&#x53D1;&#x9519;&#x8BEF;&#x3002;<a class="changeset-link headerlink reference internal" href="#change-af136f4c0f377ed2650ebb765f409144">&#xB6;</a></span></p><p><span class="yiyi-st" id="yiyi-178">&#x53C2;&#x8003;&#x6587;&#x732E;&#xFF1A;<a class="reference external" href="http://www.sqlalchemy.org/trac/ticket/3349">&#xFF03;3349</a></span></p></li><li><p id="change-0.9.10-2"><span class="yiyi-st" id="yiyi-179"><span class="target" id="change-ee81192da55510d7336bb2550e22a385"><strong>[orm] [bug] </strong></span>Fixed bug where the state tracking within multiple, nested <a class="reference internal" href="orm_session_api.html#sqlalchemy.orm.session.Session.begin_nested" title="sqlalchemy.orm.session.Session.begin_nested"><code class="xref py py-meth docutils literal"><span class="pre">Session.begin_nested()</span></code></a> operations would fail to propagate the &#x201C;dirty&#x201D; flag for an object that had been updated within the inner savepoint, such that if the enclosing savepoint were rolled back, the object would not be part of the state that was expired and therefore reverted to its database state.<a class="changeset-link headerlink reference internal" href="#change-ee81192da55510d7336bb2550e22a385">&#xB6;</a></span></p><p><span class="yiyi-st" id="yiyi-180">&#x53C2;&#x8003;&#x6587;&#x732E;&#xFF1A;<a class="reference external" href="http://www.sqlalchemy.org/trac/ticket/3352">&#xFF03;3352</a></span></p></li></ul></div><div class="section" id="change-0.9.10-engine"><h3><span class="yiyi-st" id="yiyi-181">&#x53D1;&#x52A8;&#x673A;<a class="headerlink" href="#change-0.9.10-engine" title="Permalink to this headline">&#xB6; T0&gt;</a></span></h3><ul class="simple"><li><p id="change-0.9.10-3"><span class="yiyi-st" id="yiyi-182"><span class="target" id="change-2bc8922c3d02ea661e42e2f54e7c7201"><strong>[engine] [bug] </strong></span>Added the string value <code class="docutils literal"><span class="pre">&quot;none&quot;</span></code> to those accepted by the <a class="reference internal" href="core_pooling.html#sqlalchemy.pool.Pool.params.reset_on_return" title="sqlalchemy.pool.Pool"><code class="xref py py-paramref docutils literal"><span class="pre">Pool.reset_on_return</span></code></a> parameter as a synonym for <code class="docutils literal"><span class="pre">None</span></code>, so that string values can be used for all settings, allowing utilities like <a class="reference internal" href="core_engines.html#sqlalchemy.engine_from_config" title="sqlalchemy.engine_from_config"><code class="xref py py-func docutils literal"><span class="pre">engine_from_config()</span></code></a> to be usable without issue.<a class="changeset-link headerlink reference internal" href="#change-2bc8922c3d02ea661e42e2f54e7c7201">&#xB6;</a></span></p><p><span class="yiyi-st" id="yiyi-183">&#x53C2;&#x8003;&#x6587;&#x732E;&#xFF1A;<a class="reference external" href="http://www.sqlalchemy.org/trac/ticket/3375">&#xFF03;3375</a></span></p></li></ul></div><div class="section" id="change-0.9.10-sql"><h3><span class="yiyi-st" id="yiyi-184">SQL <a class="headerlink" href="#change-0.9.10-sql" title="Permalink to this headline">&#xB6; T0&gt;</a></span></h3><ul class="simple"><li><p id="change-0.9.10-4"><span class="yiyi-st" id="yiyi-185"><span class="target" id="change-f8414532972c2d7d0d9d856124692667"><strong>[sql] [feature] </strong></span>&#x589E;&#x52A0;&#x4E86;&#x5BF9;<a class="reference internal" href="core_dml.html#sqlalchemy.sql.expression.Insert.from_select" title="sqlalchemy.sql.expression.Insert.from_select"><code class="xref py py-meth docutils literal"><span class="pre">Insert.from_select()</span></code></a>&#x4E2D;&#x5B58;&#x5728;&#x7684;SELECT&#x6240;&#x4F7F;&#x7528;&#x7684;CTE&#x7684;&#x5B98;&#x65B9;&#x652F;&#x6301;&#x3002;</span><span class="yiyi-st" id="yiyi-186">&#x8FD9;&#x79CD;&#x884C;&#x4E3A;&#x610F;&#x5916;&#x5730;&#x4E00;&#x76F4;&#x8FD0;&#x884C;&#x5230;0.9.9&#xFF0C;&#x5F53;&#x5B83;&#x7531;&#x4E8E;&#x4F5C;&#x4E3A;<a class="reference external" href="http://www.sqlalchemy.org/trac/ticket/3248">&#xFF03;3248</a>&#x7684;&#x4E00;&#x90E8;&#x5206;&#x7684;&#x4E0D;&#x76F8;&#x5173;&#x66F4;&#x6539;&#x800C;&#x4E0D;&#x518D;&#x8D77;&#x4F5C;&#x7528;&#x65F6;&#x3002;</span><span class="yiyi-st" id="yiyi-187">&#x8BF7;&#x6CE8;&#x610F;&#xFF0C;&#x8FD9;&#x662F;&#x5728;SELECT&#x4E4B;&#x524D;&#x7684;INSERT&#x4E4B;&#x540E;&#x7684;WITH&#x5B50;&#x53E5;&#x7684;&#x5448;&#x73B0;&#xFF1B;&#x5728;INSERT&#xFF0C;UPDATE&#xFF0C;DELETE&#x9876;&#x5C42;&#x5448;&#x73B0;&#x7684;CTE&#x7684;&#x5168;&#x90E8;&#x529F;&#x80FD;&#x662F;&#x9488;&#x5BF9;&#x4EE5;&#x540E;&#x7248;&#x672C;&#x7684;&#x4E00;&#x9879;&#x65B0;&#x529F;&#x80FD;&#x3002;<a class="changeset-link headerlink reference internal" href="#change-f8414532972c2d7d0d9d856124692667">&#xB6;</a></span></p><p><span class="yiyi-st" id="yiyi-188">&#x53C2;&#x8003;&#x6587;&#x732E;&#xFF1A;<a class="reference external" href="http://www.sqlalchemy.org/trac/ticket/3418">&#xFF03;3418</a></span></p></li><li><p id="change-0.9.10-5"><span class="yiyi-st" id="yiyi-189"><span class="target" id="change-9a35a9fd17b1c1a118ee92550ccf0b00"><strong>[sql] [bug] </strong></span>Fixed issue where a <a class="reference internal" href="core_metadata.html#sqlalchemy.schema.MetaData" title="sqlalchemy.schema.MetaData"><code class="xref py py-class docutils literal"><span class="pre">MetaData</span></code></a> object that used a naming convention would not properly work with pickle. </span><span class="yiyi-st" id="yiyi-190">&#x5982;&#x679C;&#x4F7F;&#x7528;&#x4E0D;&#x5E26;&#x94A9;&#x7684;<a class="reference internal" href="core_metadata.html#sqlalchemy.schema.MetaData" title="sqlalchemy.schema.MetaData"><code class="xref py py-class docutils literal"><span class="pre">MetaData</span></code></a>&#x5BF9;&#x8C61;&#x6765;&#x6784;&#x5EFA;&#x9644;&#x52A0;&#x8868;&#x683C;&#xFF0C;&#x5219;&#x8DF3;&#x8FC7;&#x8BE5;&#x5C5E;&#x6027;&#x4F1A;&#x5BFC;&#x81F4;&#x4E0D;&#x4E00;&#x81F4;&#x548C;&#x5931;&#x8D25;&#x3002;<a class="changeset-link headerlink reference internal" href="#change-9a35a9fd17b1c1a118ee92550ccf0b00">&#xB6;</a></span></p><p><span class="yiyi-st" id="yiyi-191">&#x53C2;&#x8003;&#x6587;&#x732E;&#xFF1A;<a class="reference external" href="http://www.sqlalchemy.org/trac/ticket/3362">&#xFF03;3362</a></span></p></li></ul></div><div class="section" id="change-0.9.10-postgresql"><h3><span class="yiyi-st" id="yiyi-192">&#x7684;PostgreSQL <a class="headerlink" href="#change-0.9.10-postgresql" title="Permalink to this headline">&#xB6; T0&gt;</a></span></h3><ul class="simple"><li><p id="change-0.9.10-6"><span class="yiyi-st" id="yiyi-193"><span class="target" id="change-f48ebfdbd81e4166cec7fa2687c381e8"><strong>[postgresql] [bug] </strong></span>&#x4FEE;&#x590D;&#x4E86;&#x957F;&#x671F;&#x5B58;&#x5728;&#x7684;bug&#xFF0C;&#x5176;&#x4E2D;psycopg2&#x65B9;&#x8A00;&#x4F7F;&#x7528;&#x7684;<a class="reference internal" href="core_type_basics.html#sqlalchemy.types.Enum" title="sqlalchemy.types.Enum"><code class="xref py py-class docutils literal"><span class="pre">Enum</span></code></a>&#x7C7B;&#x578B;&#x4E0E;&#x975E;ascii&#x503C;&#x548C;<code class="docutils literal"><span class="pre">native_enum=False</span></code>&#x5C06;&#x65E0;&#x6CD5;&#x6B63;&#x786E;&#x89E3;&#x7801;&#x8FD4;&#x56DE;&#x7ED3;&#x679C;&#x3002;</span><span class="yiyi-st" id="yiyi-194">&#x8FD9;&#x6E90;&#x4E8E;PG <a class="reference internal" href="dialects_postgresql.html#sqlalchemy.dialects.postgresql.ENUM" title="sqlalchemy.dialects.postgresql.ENUM"><code class="xref py py-class docutils literal"><span class="pre">postgresql.ENUM</span></code></a>&#x7C7B;&#x578B;&#x66FE;&#x7ECF;&#x662F;&#x6CA1;&#x6709;&#x201C;&#x975E;&#x672C;&#x5730;&#x201D;&#x9009;&#x9879;&#x7684;&#x72EC;&#x7ACB;&#x7C7B;&#x578B;&#x3002;<a class="changeset-link headerlink reference internal" href="#change-f48ebfdbd81e4166cec7fa2687c381e8">&#xB6;</a></span></p><p><span class="yiyi-st" id="yiyi-195">&#x53C2;&#x8003;&#x6587;&#x732E;&#xFF1A;<a class="reference external" href="http://www.sqlalchemy.org/trac/ticket/3354">&#xFF03;3354</a></span></p></li></ul></div><div class="section" id="change-0.9.10-mysql"><h3><span class="yiyi-st" id="yiyi-196">MySQL&#x7684;<a class="headerlink" href="#change-0.9.10-mysql" title="Permalink to this headline">&#xB6; T0&gt;</a></span></h3><ul class="simple"><li><p id="change-0.9.10-7"><span class="yiyi-st" id="yiyi-197"><span class="target" id="change-5898fc79f1b4c5e52fc6ecd0a9319733"><strong>[mysql] [bug] [pymysql] </strong></span>&#x4FEE;&#x6B63;&#x4E86;&#x4F7F;&#x7528;unicode&#x53C2;&#x6570;&#x4F7F;&#x7528;&#x201C;executemany&#x201D;&#x64CD;&#x4F5C;&#x65F6;&#x5BF9;PyMySQL&#x7684;Unicode&#x652F;&#x6301;&#x3002;</span><span class="yiyi-st" id="yiyi-198">SQLAlchemy&#x73B0;&#x5728;&#x5C06;&#x8BED;&#x53E5;&#x4EE5;&#x53CA;&#x7ED1;&#x5B9A;&#x53C2;&#x6570;&#x4F5C;&#x4E3A;unicode&#x5BF9;&#x8C61;&#x4F20;&#x9012;&#xFF0C;&#x56E0;&#x4E3A;PyMySQL&#x901A;&#x5E38;&#x5728;&#x5185;&#x90E8;&#x4F7F;&#x7528;&#x5B57;&#x7B26;&#x4E32;&#x63D2;&#x503C;&#x6765;&#x751F;&#x6210;&#x6700;&#x7EC8;&#x8BED;&#x53E5;&#xFF0C;&#x800C;&#x5728;executemany&#x7684;&#x60C5;&#x51B5;&#x4E0B;&#xFF0C;&#x4EC5;&#x5728;&#x6700;&#x540E;&#x8BED;&#x53E5;&#x4E2D;&#x6267;&#x884C;&#x201C;&#x7F16;&#x7801;&#x201D;&#x6B65;&#x9AA4;&#x3002;<a class="changeset-link headerlink reference internal" href="#change-5898fc79f1b4c5e52fc6ecd0a9319733">&#xB6; T0&gt;</a></span></p><p><span class="yiyi-st" id="yiyi-199">&#x53C2;&#x8003;&#x6587;&#x732E;&#xFF1A;<a class="reference external" href="http://www.sqlalchemy.org/trac/ticket/3337">&#xFF03;3337</a></span></p></li><li><p id="change-0.9.10-8"><span class="yiyi-st" id="yiyi-200"><span class="target" id="change-966802f406201dd8d7ea0b0b85d328ec"><strong>[mysql] [bug] [py3k] </strong></span>&#x4FEE;&#x6B63;&#x4E86;Py3K&#x4E0A;&#x6CA1;&#x6709;&#x6B63;&#x786E;&#x4F7F;&#x7528;<code class="docutils literal"><span class="pre">ord()</span></code>&#x51FD;&#x6570;&#x7684;<a class="reference internal" href="dialects_mysql.html#sqlalchemy.dialects.mysql.BIT" title="sqlalchemy.dialects.mysql.BIT"><code class="xref py py-class docutils literal"><span class="pre">mysql.BIT</span></code></a>&#x7C7B;&#x578B;&#x3002;</span><span class="yiyi-st" id="yiyi-201">&#x8BF7;&#x6C42;&#x793C;&#x8C8C;David Marin&#x3002;<a class="changeset-link headerlink reference internal" href="#change-966802f406201dd8d7ea0b0b85d328ec">&#xB6;</a></span></p><p><span class="yiyi-st" id="yiyi-202">&#x53C2;&#x8003;&#x6587;&#x732E;&#xFF1A;<a class="reference external" href="http://www.sqlalchemy.org/trac/ticket/3333">&#xFF03;3333</a>&#xFF0C;<a class="reference external" href="https://github.com/zzzeek/sqlalchemy/pull/158">&#x8BF7;&#x6C42;github&#xFF1A;158</a></span></p></li></ul></div><div class="section" id="change-0.9.10-sqlite"><h3><span class="yiyi-st" id="yiyi-203">&#x6E90;&#x7801;<a class="headerlink" href="#change-0.9.10-sqlite" title="Permalink to this headline">&#xB6; T0&gt;</a></span></h3><ul class="simple"><li><p id="change-0.9.10-9"><span class="yiyi-st" id="yiyi-204"><span class="target" id="change-ca0388dc5ea3dd8415b40032f83e85d0"><strong>[sqlite] [bug] </strong></span>Fixed bug in SQLite dialect where reflection of UNIQUE constraints that included non-alphabetic characters in the names, like dots or spaces, would not be reflected with their name.<a class="changeset-link headerlink reference internal" href="#change-ca0388dc5ea3dd8415b40032f83e85d0">&#xB6;</a></span></p><p><span class="yiyi-st" id="yiyi-205">&#x53C2;&#x8003;&#x6587;&#x732E;&#xFF1A;<a class="reference external" href="http://www.sqlalchemy.org/trac/ticket/3495">&#xFF03;3495</a></span></p></li></ul></div><div class="section" id="change-0.9.10-misc"><h3><span class="yiyi-st" id="yiyi-206">&#x6742;&#x9879;<a class="headerlink" href="#change-0.9.10-misc" title="Permalink to this headline">&#xB6; T0&gt;</a></span></h3><ul class="simple"><li><p id="change-0.9.10-10"><span class="yiyi-st" id="yiyi-207"><span class="target" id="change-bd0e166193a07e1132fc4c7f5a08f039"><strong>[bug] [ext] </strong></span>Fixed bug where when using extended attribute instrumentation system, the correct exception would not be raised when <a class="reference internal" href="orm_mapping_api.html#sqlalchemy.orm.class_mapper" title="sqlalchemy.orm.class_mapper"><code class="xref py py-func docutils literal"><span class="pre">class_mapper()</span></code></a> were called with an invalid input that also happened to not be weak referencable, such as an integer.<a class="changeset-link headerlink reference internal" href="#change-bd0e166193a07e1132fc4c7f5a08f039">&#xB6;</a></span></p><p><span class="yiyi-st" id="yiyi-208">&#x53C2;&#x8003;&#x6587;&#x732E;&#xFF1A;<a class="reference external" href="http://www.sqlalchemy.org/trac/ticket/3408">&#xFF03;3408</a></span></p></li><li><p id="change-0.9.10-11"><span class="yiyi-st" id="yiyi-209"><span class="target" id="change-0fcc791335c7b1ce1b81b5dbeaaa9cc1"><strong>[bug] [tests] [pypy] </strong></span>&#x4FEE;&#x6B63;&#x4E86;&#x963B;&#x6B62;&#x201C;pypy setup.py test&#x201D;&#x6B63;&#x5E38;&#x5DE5;&#x4F5C;&#x7684;&#x5BFC;&#x5165;&#x3002;<a class="changeset-link headerlink reference internal" href="#change-0fcc791335c7b1ce1b81b5dbeaaa9cc1">&#xB6;</a></span></p><p><span class="yiyi-st" id="yiyi-210">&#x53C2;&#x8003;&#x6587;&#x732E;&#xFF1A;<a class="reference external" href="http://www.sqlalchemy.org/trac/ticket/3406">&#xFF03;3406</a></span></p></li><li><p id="change-0.9.10-12"><span class="yiyi-st" id="yiyi-211"><span class="target" id="change-d74f0c6b46400abe7e625144366f5e3e"><strong>[bug] [ext] </strong></span>&#x56FA;&#x5B9A;&#x4ECE;0.9.9&#x5F00;&#x59CB;&#x7684;&#x56DE;&#x5F52;&#xFF0C;&#x5176;&#x4E2D;<a class="reference internal" href="orm_extensions_declarative_api.html#sqlalchemy.ext.declarative.as_declarative" title="sqlalchemy.ext.declarative.as_declarative"><code class="xref py py-func docutils literal"><span class="pre">as_declarative()</span></code></a>&#x7B26;&#x53F7;&#x5DF2;&#x4ECE;<code class="docutils literal"><span class="pre">sqlalchemy.ext.declarative</span></code>&#x540D;&#x79F0;&#x7A7A;&#x95F4;&#x4E2D;&#x79FB;&#x9664;&#x3002; <a class="changeset-link headerlink reference internal" href="#change-d74f0c6b46400abe7e625144366f5e3e">&#xB6; T7&gt;</a></span></p><p><span class="yiyi-st" id="yiyi-212">&#x53C2;&#x8003;&#x6587;&#x732E;&#xFF1A;<a class="reference external" href="http://www.sqlalchemy.org/trac/ticket/3324">&#xFF03;3324</a></span></p></li></ul></div></div><div class="section" id="change-0.9.9"><h2><span class="yiyi-st" id="yiyi-214">0.9.9 <a class="headerlink" href="#change-0.9.9" title="Permalink to this headline">&#xB6; T0&gt;</a></span></h2><span class="yiyi-st" id="yiyi-307">&#x53D1;&#x5E03;&#x65E5;&#x671F;&#xFF1A;2015&#x5E74;3&#x6708;10&#x65E5;</span><div class="section" id="change-0.9.9-orm"><h3><span class="yiyi-st" id="yiyi-215">ORM <a class="headerlink" href="#change-0.9.9-orm" title="Permalink to this headline">&#xB6; T0&gt;</a></span></h3><ul class="simple"><li><p id="change-0.9.9-0"><span class="yiyi-st" id="yiyi-216"><span class="target" id="change-257ec602824da39666b558dd308ddd68"><strong>[orm] [feature] </strong></span>&#x6DFB;&#x52A0;&#x4E86;&#x4E00;&#x4E2A;&#x65B0;&#x53C2;&#x6570;<a class="reference internal" href="orm_session_api.html#sqlalchemy.orm.session.Session.connection.params.execution_options" title="sqlalchemy.orm.session.Session.connection"><code class="xref py py-paramref docutils literal"><span class="pre">Session.connection.execution_options</span></code></a>&#xFF0C;&#x5B83;&#x53EF;&#x7528;&#x4E8E;&#x5728;<a class="reference internal" href="core_connections.html#sqlalchemy.engine.Connection" title="sqlalchemy.engine.Connection"><code class="xref py py-class docutils literal"><span class="pre">Connection</span></code></a>&#x4E0A;&#x8BBE;&#x7F6E;&#x6267;&#x884C;&#x9009;&#x9879;&#x5728;&#x4EA4;&#x6613;&#x5F00;&#x59CB;&#x4E4B;&#x524D;&#x9996;&#x5148;&#x68C0;&#x67E5;&#x51FA;&#x6765;&#x3002;</span><span class="yiyi-st" id="yiyi-217">&#x8FD9;&#x7528;&#x4E8E;&#x5728;&#x4E8B;&#x52A1;&#x542F;&#x52A8;&#x4E4B;&#x524D;&#x8BBE;&#x7F6E;&#x8FDE;&#x63A5;&#x4E0A;&#x7684;&#x9694;&#x79BB;&#x7EA7;&#x522B;&#x7B49;&#x9009;&#x9879;&#x3002;</span></p><div class="admonition seealso"><p class="first admonition-title"><span class="yiyi-st" id="yiyi-218">&#x4E5F;&#x53EF;&#x4EE5;&#x770B;&#x770B;</span></p><p class="last"><span class="yiyi-st" id="yiyi-219"><a class="reference internal" href="orm_session_transaction.html#session-transaction-isolation"><span>Setting Transaction Isolation Levels</span></a>  - &#x65B0;&#x7684;&#x6587;&#x6863;&#x90E8;&#x5206;&#x8BE6;&#x7EC6;&#x4ECB;&#x7ECD;&#x4E86;&#x4F7F;&#x7528;&#x4F1A;&#x8BDD;&#x8BBE;&#x7F6E;&#x4E8B;&#x52A1;&#x9694;&#x79BB;&#x7684;&#x6700;&#x4F73;&#x5B9E;&#x8DF5;&#x3002;</span></p></div><span class="yiyi-st" id="yiyi-221"> <a class="changeset-link headerlink reference internal" href="#change-257ec602824da39666b558dd308ddd68">&#xB6;</a></span><p><span class="yiyi-st" id="yiyi-220">&#x53C2;&#x8003;&#x6587;&#x732E;&#xFF1A;<a class="reference external" href="http://www.sqlalchemy.org/trac/ticket/3296">&#xFF03;3296</a></span></p></li><li><p id="change-0.9.9-1"><span class="yiyi-st" id="yiyi-222"><span class="target" id="change-81f7e383b3862c1f1b3ec7f7a6e0aafe"><strong>[orm] [feature] </strong></span>Added new method <a class="reference internal" href="orm_session_api.html#sqlalchemy.orm.session.Session.invalidate" title="sqlalchemy.orm.session.Session.invalidate"><code class="xref py py-meth docutils literal"><span class="pre">Session.invalidate()</span></code></a>, functions similarly to <a class="reference internal" href="orm_session_api.html#sqlalchemy.orm.session.Session.close" title="sqlalchemy.orm.session.Session.close"><code class="xref py py-meth docutils literal"><span class="pre">Session.close()</span></code></a>, except also calls <a class="reference internal" href="core_connections.html#sqlalchemy.engine.Connection.invalidate" title="sqlalchemy.engine.Connection.invalidate"><code class="xref py py-meth docutils literal"><span class="pre">Connection.invalidate()</span></code></a> on all connections, guaranteeing that they will not be returned to the connection pool. </span><span class="yiyi-st" id="yiyi-223">&#x8FD9;&#x5728;&#x4F8B;&#x5982;&#x60C5;&#x51B5;&#x4E0B;&#x662F;&#x6709;&#x7528;&#x7684;&#x5728;&#x8FDB;&#x4E00;&#x6B65;&#x4F7F;&#x7528;&#x8FDE;&#x63A5;&#x4E0D;&#x5B89;&#x5168;&#x65F6;&#x5904;&#x7406;gevent&#x8D85;&#x65F6;&#xFF0C;&#x5373;&#x4F7F;&#x662F;&#x56DE;&#x6EDA;&#x3002;<a class="changeset-link headerlink reference internal" href="#change-81f7e383b3862c1f1b3ec7f7a6e0aafe">&#xB6;</a></span></p><p></p></li><li><p id="change-0.9.9-2"><span class="yiyi-st" id="yiyi-224"><span class="target" id="change-2df829d258aa418fc9764a2c877c271f"><strong>[orm] [bug] </strong></span>Fixed bugs in ORM object comparisons where comparison of many-to-one <code class="docutils literal"><span class="pre">!=</span> <span class="pre">None</span></code> would fail if the source were an aliased class, or if the query needed to apply special aliasing to the expression due to aliased joins or polymorphic querying; also fixed bug in the case where comparing a many-to-one to an object state would fail if the query needed to apply special aliasing due to aliased joins or polymorphic querying.<a class="changeset-link headerlink reference internal" href="#change-2df829d258aa418fc9764a2c877c271f">&#xB6;</a></span></p><p><span class="yiyi-st" id="yiyi-225">&#x53C2;&#x8003;&#x6587;&#x732E;&#xFF1A;<a class="reference external" href="http://www.sqlalchemy.org/trac/ticket/3310">&#xFF03;3310</a></span></p></li><li><p id="change-0.9.9-3"><span class="yiyi-st" id="yiyi-226">&#x4FEE;&#x6B63;&#x4E86;&#x5728;<a class="reference internal" href="orm_session_api.html#sqlalchemy.orm.session.Session" title="sqlalchemy.orm.session.Session"><code class="xref py py-class docutils literal"><span class="pre">Session</span></code></a>&#x7684;<code class="docutils literal"><span class="pre">after_rollback()</span></code>&#x5904;&#x7406;&#x7A0B;&#x5E8F;&#x9519;&#x8BEF;&#x5730;&#x5C06;&#x72B6;&#x6001;&#x6DFB;&#x52A0;&#x5230;&#x5185;&#x90E8;&#x65AD;&#x8A00;&#x7684;&#x60C5;&#x51B5;&#x4E0B;&#x4F1A;&#x5931;&#x8D25;&#x7684;&#x95EE;&#x9898;&#x3002;<span class="target" id="change-7b35681c2beaa12811329756cbdad1b5"><strong>[orm] [bug] </strong></span> <a class="reference internal" href="orm_session_api.html#sqlalchemy.orm.session.Session" title="sqlalchemy.orm.session.Session"><code class="xref py py-class docutils literal"><span class="pre">Session</span></code></a>&#x5904;&#x7406;&#x7A0B;&#x5E8F;&#x4E2D;&#xFF0C;&#x4EE5;&#x53CA;&#x8B66;&#x544A;&#x548C;&#x79FB;&#x9664;&#x6B64;&#x72B6;&#x6001;&#x7684;&#x4EFB;&#x52A1;&#xFF08;&#x7531;<a class="reference external" href="http://www.sqlalchemy.org/trac/ticket/2389">&#xFF03;2389</a>&#x5EFA;&#x7ACB;&#xFF09;&#x5C1D;&#x8BD5;&#x7EE7;&#x7EED;&#x3002;<a class="changeset-link headerlink reference internal" href="#change-7b35681c2beaa12811329756cbdad1b5">&#xB6;</a></span></p><p><span class="yiyi-st" id="yiyi-227">&#x53C2;&#x8003;&#x6587;&#x732E;&#xFF1A;<a class="reference external" href="http://www.sqlalchemy.org/trac/ticket/3309">&#xFF03;3309</a></span></p></li><li><p id="change-0.9.9-4"><span class="yiyi-st" id="yiyi-228"><span class="target" id="change-ec432e8e77803ef9276f98ec61867b39"><strong>[orm] [bug] </strong></span>Fixed bug where TypeError raised when <a class="reference internal" href="orm_query.html#sqlalchemy.orm.query.Query.join" title="sqlalchemy.orm.query.Query.join"><code class="xref py py-meth docutils literal"><span class="pre">Query.join()</span></code></a> called with unknown kw arguments would raise its own TypeError due to broken formatting. </span><span class="yiyi-st" id="yiyi-229">&#x8BF7;&#x6C42;Malthe Borch&#x63D0;&#x51FA;&#x8BF7;&#x6C42;&#x3002;<a class="changeset-link headerlink reference internal" href="#change-ec432e8e77803ef9276f98ec61867b39">&#xB6;</a></span></p><p><span class="yiyi-st" id="yiyi-230">&#x53C2;&#x8003;&#x6587;&#x732E;&#xFF1A;<a class="reference external" href="https://github.com/zzzeek/sqlalchemy/pull/147">&#x8BF7;&#x6C42;github&#xFF1A;147</a></span></p></li><li><p id="change-0.9.9-5"><span class="yiyi-st" id="yiyi-231"><span class="target" id="change-3ce9474490eb936aecbfe90a61b6989b"><strong>[orm] [bug] </strong></span>Fixed bug in lazy loading SQL construction whereby a complex primaryjoin that referred to the same &#x201C;local&#x201D; column multiple times in the &#x201C;column that points to itself&#x201D; style of self-referential join would not be substituted in all cases. </span><span class="yiyi-st" id="yiyi-232">&#x8FD9;&#x91CC;&#x786E;&#x5B9A;&#x66FF;&#x4EE3;&#x7684;&#x903B;&#x8F91;&#x5DF2;&#x88AB;&#x91CD;&#x65B0;&#x8BBE;&#x8BA1;&#x4E3A;&#x66F4;&#x52A0;&#x5F00;&#x653E;&#x3002;<a class="changeset-link headerlink reference internal" href="#change-3ce9474490eb936aecbfe90a61b6989b">&#xB6;</a></span></p><p><span class="yiyi-st" id="yiyi-233">&#x53C2;&#x8003;&#x6587;&#x732E;&#xFF1A;<a class="reference external" href="http://www.sqlalchemy.org/trac/ticket/3300">&#xFF03;3300</a></span></p></li><li><p id="change-0.9.9-6"><span class="yiyi-st" id="yiyi-234"><span class="target" id="change-cb85bfd5b9268fd26d4bb6655f9647fc"><strong>[orm] [bug] </strong></span>&#x201C;&#x901A;&#x914D;&#x7B26;&#x201D;&#x52A0;&#x8F7D;&#x5668;&#x9009;&#x9879;&#xFF0C;&#x7279;&#x522B;&#x662F;&#x7531;<a class="reference internal" href="orm_loading_columns.html#sqlalchemy.orm.load_only" title="sqlalchemy.orm.load_only"><code class="xref py py-func docutils literal"><span class="pre">orm.load_only()</span></code></a>&#x9009;&#x9879;&#x8BBE;&#x7F6E;&#x7684;&#x9009;&#x9879;&#xFF0C;&#x4EE5;&#x8986;&#x76D6;&#x672A;&#x660E;&#x786E;&#x63D0;&#x53CA;&#x7684;&#x6240;&#x6709;&#x5C5E;&#x6027;&#xFF0C;&#x73B0;&#x5728;&#x8003;&#x8651;&#x7ED9;&#x5B9A;&#x5B9E;&#x4F53;&#x7684;&#x8D85;&#x7C7B;&#xFF0C;&#x5982;&#x679C;&#x8BE5;&#x5B9E;&#x4F53;&#x4F7F;&#x7528;&#x7EE7;&#x627F;&#x6620;&#x5C04;&#x8FDB;&#x884C;&#x6620;&#x5C04;&#xFF0C;&#x90A3;&#x4E48;&#x8D85;&#x7C7B;&#x4E2D;&#x7684;&#x5C5E;&#x6027;&#x540D;&#x4E5F;&#x4ECE;&#x52A0;&#x8F7D;&#x4E2D;&#x7701;&#x7565;&#x3002;</span><span class="yiyi-st" id="yiyi-235">&#x6B64;&#x5916;&#xFF0C;&#x591A;&#x6001;&#x5224;&#x522B;&#x5668;&#x5217;&#x65E0;&#x6761;&#x4EF6;&#x5730;&#x5305;&#x542B;&#x5728;&#x5217;&#x8868;&#x4E2D;&#xFF0C;&#x5C31;&#x50CF;&#x4E3B;&#x952E;&#x5217;&#x4E00;&#x6837;&#xFF0C;&#x6240;&#x4EE5;&#x5373;&#x4F7F;&#x8BBE;&#x7F6E;&#x4E86;load_only()&#xFF0C;&#x5B50;&#x7C7B;&#x578B;&#x7684;&#x591A;&#x6001;&#x52A0;&#x8F7D;&#x4E5F;&#x80FD;&#x6B63;&#x5E38;&#x8FD0;&#x884C;&#x3002;<a class="changeset-link headerlink reference internal" href="#change-cb85bfd5b9268fd26d4bb6655f9647fc">&#xB6; t0 &gt;</a></span></p><p><span class="yiyi-st" id="yiyi-236">&#x53C2;&#x8003;&#x6587;&#x732E;&#xFF1A;<a class="reference external" href="http://www.sqlalchemy.org/trac/ticket/3287">&#xFF03;3287</a></span></p></li><li><p id="change-0.9.9-7"><span class="yiyi-st" id="yiyi-237"><span class="target" id="change-eb4c6d7da5a58814047869eac9bfc873"><strong>[orm] [bug] [pypy] </strong></span>Fixed bug where if an exception were thrown at the start of a <a class="reference internal" href="orm_query.html#sqlalchemy.orm.query.Query" title="sqlalchemy.orm.query.Query"><code class="xref py py-class docutils literal"><span class="pre">Query</span></code></a> before it fetched results, particularly when row processors can&#x2019;t be formed, the cursor would stay open with results pending and not actually be closed. </span><span class="yiyi-st" id="yiyi-238">&#x5BF9;&#x4E8E;&#x50CF;Pypy&#x8FD9;&#x6837;&#x7684;&#x89E3;&#x91CA;&#x5668;&#x6765;&#x8BF4;&#xFF0C;&#x8FD9;&#x901A;&#x5E38;&#x53EA;&#x662F;&#x4E00;&#x4E2A;&#x95EE;&#x9898;&#xFF0C;&#x5728;&#x8FD9;&#x79CD;&#x89E3;&#x91CA;&#x5668;&#x4E2D;&#xFF0C;&#x5149;&#x6807;&#x6CA1;&#x6709;&#x7ACB;&#x5373;&#x88AB;GC&#x5316;&#xFF0C;&#x5E76;&#x4E14;&#x5728;&#x67D0;&#x4E9B;&#x60C5;&#x51B5;&#x4E0B;&#x4F1A;&#x5BFC;&#x81F4;&#x4E8B;&#x52A1;/&#x9501;&#x7684;&#x6253;&#x5F00;&#x65F6;&#x95F4;&#x8D85;&#x8FC7;&#x6240;&#x9700;&#x7684;&#x65F6;&#x95F4;&#x3002;<a class="changeset-link headerlink reference internal" href="#change-eb4c6d7da5a58814047869eac9bfc873">&#xB6;</a></span></p><p><span class="yiyi-st" id="yiyi-239">&#x53C2;&#x8003;&#x6587;&#x732E;&#xFF1A;<a class="reference external" href="http://www.sqlalchemy.org/trac/ticket/3285">&#xFF03;3285</a></span></p></li><li><p id="change-0.9.9-8"><span class="yiyi-st" id="yiyi-240"><span class="target" id="change-11dd64077e54acf0bf1bb5947c23de22"><strong>[orm] [bug] </strong></span>Fixed a leak which would occur in the unsupported and highly non-recommended use case of replacing a relationship on a fixed mapped class many times, referring to an arbitrarily growing number of target mappers. </span><span class="yiyi-st" id="yiyi-241">&#x5F53;&#x65E7;&#x7684;&#x5173;&#x7CFB;&#x88AB;&#x66FF;&#x6362;&#x65F6;&#x53D1;&#x51FA;&#x8B66;&#x544A;&#xFF0C;&#x4F46;&#x662F;&#x5982;&#x679C;&#x6620;&#x5C04;&#x5DF2;&#x7ECF;&#x7528;&#x4E8E;&#x67E5;&#x8BE2;&#xFF0C;&#x65E7;&#x7684;&#x5173;&#x7CFB;&#x4ECD;&#x7136;&#x4F1A;&#x5728;&#x4E00;&#x4E9B;&#x6CE8;&#x518C;&#x8868;&#x4E2D;&#x88AB;&#x5F15;&#x7528;&#x3002;<a class="changeset-link headerlink reference internal" href="#change-11dd64077e54acf0bf1bb5947c23de22">&#xB6;</a></span></p><p><span class="yiyi-st" id="yiyi-242">&#x53C2;&#x8003;&#x6587;&#x732E;&#xFF1A;<a class="reference external" href="http://www.sqlalchemy.org/trac/ticket/3251">&#xFF03;3251</a></span></p></li><li><p id="change-0.9.9-9"><span class="yiyi-st" id="yiyi-243"><span class="target" id="change-34fb265e26bf9318cfcc46fe62fabfd6"><strong>[orm] [bug] [sqlite] </strong></span>Fixed bug regarding expression mutations which could express itself as a &#x201C;Could not locate column&#x201D; error when using <a class="reference internal" href="orm_query.html#sqlalchemy.orm.query.Query" title="sqlalchemy.orm.query.Query"><code class="xref py py-class docutils literal"><span class="pre">Query</span></code></a> to select from multiple, anonymous column entities when querying against SQLite, as a side effect of the &#x201C;join rewriting&#x201D; feature used by the SQLite dialect.<a class="changeset-link headerlink reference internal" href="#change-34fb265e26bf9318cfcc46fe62fabfd6">&#xB6;</a></span></p><p><span class="yiyi-st" id="yiyi-244">&#x53C2;&#x8003;&#x6587;&#x732E;&#xFF1A;<a class="reference external" href="http://www.sqlalchemy.org/trac/ticket/3241">&#xFF03;3241</a></span></p></li><li><p id="change-0.9.9-10"><span class="yiyi-st" id="yiyi-245"><span class="target" id="change-80b153398da9fb25bd731706ec2ce525"><strong>[orm] [bug] </strong></span>Fixed bug where the ON clause for <a class="reference internal" href="orm_query.html#sqlalchemy.orm.query.Query.join" title="sqlalchemy.orm.query.Query.join"><code class="xref py py-meth docutils literal"><span class="pre">Query.join()</span></code></a>, and <a class="reference internal" href="orm_query.html#sqlalchemy.orm.query.Query.outerjoin" title="sqlalchemy.orm.query.Query.outerjoin"><code class="xref py py-meth docutils literal"><span class="pre">Query.outerjoin()</span></code></a> to a single-inheritance subclass using <code class="docutils literal"><span class="pre">of_type()</span></code> would not render the &#x201C;single table criteria&#x201D; in the ON clause if the <code class="docutils literal"><span class="pre">from_joinpoint=True</span></code> flag were set.<a class="changeset-link headerlink reference internal" href="#change-80b153398da9fb25bd731706ec2ce525">&#xB6;</a></span></p><p><span class="yiyi-st" id="yiyi-246">&#x53C2;&#x8003;&#x6587;&#x732E;&#xFF1A;<a class="reference external" href="http://www.sqlalchemy.org/trac/ticket/3232">&#xFF03;3232</a></span></p></li></ul></div><div class="section" id="change-0.9.9-engine"><h3><span class="yiyi-st" id="yiyi-247">&#x53D1;&#x52A8;&#x673A;<a class="headerlink" href="#change-0.9.9-engine" title="Permalink to this headline">&#xB6; T0&gt;</a></span></h3><ul class="simple"><li><p id="change-0.9.9-11"><span class="yiyi-st" id="yiyi-248"><span class="target" id="change-f30f7db6662d7e6a49a0036659a63554"><strong>[engine] [feature] </strong></span>&#x589E;&#x52A0;&#x4E86;&#x7528;&#x4E8E;&#x67E5;&#x770B;&#x4E8B;&#x52A1;&#x9694;&#x79BB;&#x7EA7;&#x522B;&#x7684;&#x65B0;&#x7528;&#x6237;&#x7A7A;&#x95F4;&#x8BBF;&#x95EE;&#x5668;&#xFF1B; <a class="reference internal" href="core_connections.html#sqlalchemy.engine.Connection.get_isolation_level" title="sqlalchemy.engine.Connection.get_isolation_level"><code class="xref py py-meth docutils literal"><span class="pre">Connection.get_isolation_level()</span></code></a>&#xFF0C;<a class="reference internal" href="core_connections.html#sqlalchemy.engine.Connection.default_isolation_level" title="sqlalchemy.engine.Connection.default_isolation_level"><code class="xref py py-attr docutils literal"><span class="pre">Connection.default_isolation_level</span></code></a>&#x3002;<a class="changeset-link headerlink reference internal" href="#change-f30f7db6662d7e6a49a0036659a63554">&#xB6;</a></span></p><p></p></li><li><p id="change-0.9.9-12"><span class="yiyi-st" id="yiyi-249"><span class="target" id="change-394c5516672e736e3c9559084ec887cd"><strong>[engine] [bug] </strong></span>Fixed bug in <a class="reference internal" href="core_connections.html#sqlalchemy.engine.Connection" title="sqlalchemy.engine.Connection"><code class="xref py py-class docutils literal"><span class="pre">Connection</span></code></a> and pool where the <a class="reference internal" href="core_connections.html#sqlalchemy.engine.Connection.invalidate" title="sqlalchemy.engine.Connection.invalidate"><code class="xref py py-meth docutils literal"><span class="pre">Connection.invalidate()</span></code></a> method, or an invalidation due to a database disconnect, would fail if the <code class="docutils literal"><span class="pre">isolation_level</span></code> parameter had been used with <a class="reference internal" href="core_connections.html#sqlalchemy.engine.Connection.execution_options" title="sqlalchemy.engine.Connection.execution_options"><code class="xref py py-meth docutils literal"><span class="pre">Connection.execution_options()</span></code></a>; the &#x201C;finalizer&#x201D; that resets the isolation level would be called on the no longer opened connection.<a class="changeset-link headerlink reference internal" href="#change-394c5516672e736e3c9559084ec887cd">&#xB6;</a></span></p><p><span class="yiyi-st" id="yiyi-250">&#x53C2;&#x8003;&#x6587;&#x732E;&#xFF1A;<a class="reference external" href="http://www.sqlalchemy.org/trac/ticket/3302">&#xFF03;3302</a></span></p></li><li><p id="change-0.9.9-13"><span class="yiyi-st" id="yiyi-251"><span class="target" id="change-e69b88c19910ee3b225c03d45a8a0d07"><strong>[engine] [bug] </strong></span>A warning is emitted if the <code class="docutils literal"><span class="pre">isolation_level</span></code> parameter is used with <a class="reference internal" href="core_connections.html#sqlalchemy.engine.Connection.execution_options" title="sqlalchemy.engine.Connection.execution_options"><code class="xref py py-meth docutils literal"><span class="pre">Connection.execution_options()</span></code></a> when a <a class="reference internal" href="core_connections.html#sqlalchemy.engine.Transaction" title="sqlalchemy.engine.Transaction"><code class="xref py py-class docutils literal"><span class="pre">Transaction</span></code></a> is in play; DBAPIs and/or SQLAlchemy dialects such as psycopg2, MySQLdb may implicitly rollback or commit the transaction, or not change the setting til next transaction, so this is never safe.<a class="changeset-link headerlink reference internal" href="#change-e69b88c19910ee3b225c03d45a8a0d07">&#xB6;</a></span></p><p><span class="yiyi-st" id="yiyi-252">&#x53C2;&#x8003;&#x6587;&#x732E;&#xFF1A;<a class="reference external" href="http://www.sqlalchemy.org/trac/ticket/3296">&#xFF03;3296</a></span></p></li></ul></div><div class="section" id="change-0.9.9-sql"><h3><span class="yiyi-st" id="yiyi-253">SQL <a class="headerlink" href="#change-0.9.9-sql" title="Permalink to this headline">&#xB6; T0&gt;</a></span></h3><ul class="simple"><li><p id="change-0.9.9-14"><span class="yiyi-st" id="yiyi-254"><span class="target" id="change-3577552ba354e8d369dededa4f306eb8"><strong>[sql] [bug] </strong></span>&#x5C06;<code class="docutils literal"><span class="pre">native_enum</span></code>&#x6807;&#x5FD7;&#x6DFB;&#x52A0;&#x5230;<a class="reference internal" href="core_type_basics.html#sqlalchemy.types.Enum" title="sqlalchemy.types.Enum"><code class="xref py py-class docutils literal"><span class="pre">Enum</span></code></a>&#x7684;<code class="docutils literal"><span class="pre">__repr__()</span></code>&#x4E0E;Alembic&#x81EA;&#x52A8;&#x751F;&#x6210;&#x4E00;&#x8D77;&#x4F7F;&#x7528;&#x65F6;&#x5F88;&#x91CD;&#x8981;&#x3002;</span><span class="yiyi-st" id="yiyi-255">&#x62C9;&#x8BF7;&#x6C42;&#x793C;&#x8C8C;Dimitris Theodorou&#x3002;<a class="changeset-link headerlink reference internal" href="#change-3577552ba354e8d369dededa4f306eb8">&#xB6;</a></span></p><p><span class="yiyi-st" id="yiyi-256">&#x53C2;&#x8003;&#x6587;&#x732E;&#xFF1A;<a class="reference external" href="https://bitbucket.org/zzzeek/sqlalchemy/pull-request/41">pull request bitbucket&#xFF1A;41</a></span></p></li><li><p id="change-0.9.9-15"><span class="yiyi-st" id="yiyi-257"><span class="target" id="change-a61899ed2d03a8e546f7daf26f476c1c"><strong>[sql] [bug] </strong></span>Fixed bug where using a <a class="reference internal" href="core_custom_types.html#sqlalchemy.types.TypeDecorator" title="sqlalchemy.types.TypeDecorator"><code class="xref py py-class docutils literal"><span class="pre">TypeDecorator</span></code></a> that implemented a type that was also a <a class="reference internal" href="core_custom_types.html#sqlalchemy.types.TypeDecorator" title="sqlalchemy.types.TypeDecorator"><code class="xref py py-class docutils literal"><span class="pre">TypeDecorator</span></code></a> would fail with Python&#x2019;s &#x201C;Cannot create a consistent method resolution order (MRO)&#x201D; error, when any kind of SQL comparison expression were used against an object using this type.<a class="changeset-link headerlink reference internal" href="#change-a61899ed2d03a8e546f7daf26f476c1c">&#xB6;</a></span></p><p><span class="yiyi-st" id="yiyi-258">&#x53C2;&#x8003;&#x6587;&#x732E;&#xFF1A;<a class="reference external" href="http://www.sqlalchemy.org/trac/ticket/3278">&#xFF03;3278</a></span></p></li><li><p id="change-0.9.9-16"><span class="yiyi-st" id="yiyi-259"><span class="target" id="change-2bdcbd3f5a1eb1534034bea319ff6eb5"><strong>[sql] [bug] </strong></span>Fixed issue where the columns from a SELECT embedded in an INSERT, either through the values clause or as a &#x201C;from select&#x201D;, would pollute the column types used in the result set produced by the RETURNING clause when columns from both statements shared the same name, leading to potential errors or mis-adaptation when retrieving the returning rows.<a class="changeset-link headerlink reference internal" href="#change-2bdcbd3f5a1eb1534034bea319ff6eb5">&#xB6;</a></span></p><p><span class="yiyi-st" id="yiyi-260">&#x53C2;&#x8003;&#x6587;&#x732E;&#xFF1A;<a class="reference external" href="http://www.sqlalchemy.org/trac/ticket/3248">&#xFF03;3248</a></span></p></li></ul></div><div class="section" id="change-0.9.9-schema"><h3><span class="yiyi-st" id="yiyi-261">&#x67B6;&#x6784;<a class="headerlink" href="#change-0.9.9-schema" title="Permalink to this headline">&#xB6; T0&gt;</a></span></h3><ul class="simple"><li><p id="change-0.9.9-17"><span class="yiyi-st" id="yiyi-262"><span class="target" id="change-4174c5d38944ec13bc76cc10181274df"><strong>[schema] [bug] </strong></span>Fixed bug in 0.9&#x2019;s foreign key setup system, such that the logic used to link a <a class="reference internal" href="core_constraints.html#sqlalchemy.schema.ForeignKey" title="sqlalchemy.schema.ForeignKey"><code class="xref py py-class docutils literal"><span class="pre">ForeignKey</span></code></a> to its parent could fail when the foreign key used &#x201C;link_to_name=True&#x201D; in conjunction with a target <a class="reference internal" href="core_metadata.html#sqlalchemy.schema.Table" title="sqlalchemy.schema.Table"><code class="xref py py-class docutils literal"><span class="pre">Table</span></code></a> that would not receive its parent column until later, such as within a reflection + &#x201C;useexisting&#x201D; scenario, if the target column in fact had a key value different from its name, as would occur in reflection if column reflect events were used to alter the .key of reflected <a class="reference internal" href="core_metadata.html#sqlalchemy.schema.Column" title="sqlalchemy.schema.Column"><code class="xref py py-class docutils literal"><span class="pre">Column</span></code></a> objects so that the link_to_name becomes significant. </span><span class="yiyi-st" id="yiyi-263">&#x5F53;&#x76EE;&#x6807;&#x5217;&#x5177;&#x6709;&#x4E0D;&#x540C;&#x7684;&#x952E;&#x5E76;&#x4F7F;&#x7528;link_to_name&#x5F15;&#x7528;&#x65F6;&#xFF0C;&#x4E5F;&#x901A;&#x8FC7;&#x7C7B;&#x4F3C;&#x7684;&#x65B9;&#x5F0F;&#x4FEE;&#x590D;&#x4E86;&#x5BF9;&#x5217;&#x7C7B;&#x578B;&#x7684;&#x652F;&#x6301;&#x3002;<a class="changeset-link headerlink reference internal" href="#change-4174c5d38944ec13bc76cc10181274df">&#xB6;</a></span></p><p><span class="yiyi-st" id="yiyi-264">&#x53C2;&#x8003;&#x6587;&#x732E;&#xFF1A;<a class="reference external" href="http://www.sqlalchemy.org/trac/ticket/3298">&#xFF03;3298</a>&#xFF0C;<a class="reference external" href="http://www.sqlalchemy.org/trac/ticket/1765">&#xFF03;1765</a></span></p></li></ul></div><div class="section" id="change-0.9.9-postgresql"><h3><span class="yiyi-st" id="yiyi-265">&#x7684;PostgreSQL <a class="headerlink" href="#change-0.9.9-postgresql" title="Permalink to this headline">&#xB6; T0&gt;</a></span></h3><ul class="simple"><li><p id="change-0.9.9-18"><span class="yiyi-st" id="yiyi-266"><span class="target" id="change-2a4614f79e145b5f9d8a3861d75f3006"><strong>[postgresql] [feature] </strong></span>&#x4F7F;&#x7528;<code class="docutils literal"><span class="pre">postgresql_concurrently</span></code>&#x6DFB;&#x52A0;&#x4E86;&#x5BF9;&#x4F7F;&#x7528;Postgresql&#x7D22;&#x5F15;&#x7684;<code class="docutils literal"><span class="pre">CONCURRENTLY</span></code>&#x5173;&#x952E;&#x5B57;&#x7684;&#x652F;&#x6301;&#x3002;</span><span class="yiyi-st" id="yiyi-267">&#x8BF7;&#x6C42;Iuri de Silvio&#x63D0;&#x51FA;&#x8BF7;&#x6C42;&#x3002;</span></p><div class="admonition seealso"><p class="first admonition-title"><span class="yiyi-st" id="yiyi-268">&#x4E5F;&#x53EF;&#x4EE5;&#x770B;&#x770B;</span></p><p class="last"><span class="yiyi-st" id="yiyi-269"><a class="reference internal" href="dialects_postgresql.html#postgresql-index-concurrently"><span>Indexes with CONCURRENTLY</span></a></span></p></div><span class="yiyi-st" id="yiyi-271"> <a class="changeset-link headerlink reference internal" href="#change-2a4614f79e145b5f9d8a3861d75f3006">&#xB6;</a></span><p><span class="yiyi-st" id="yiyi-270">&#x53C2;&#x8003;&#xFF1A;<a class="reference external" href="https://bitbucket.org/zzzeek/sqlalchemy/pull-request/45">&#x62C9;&#x8BF7;&#x6C42;bitbucket&#xFF1A;45</a></span></p></li><li><p id="change-0.9.9-19"><span class="yiyi-st" id="yiyi-272"><span class="target" id="change-fc15276f16d5f99614d8b4a54fecfaa5"><strong>[postgresql] [bug] </strong></span>&#x4F7F;&#x7528;psycopg2&#x65F6;&#x4FEE;&#x590D;&#x4E86;&#x5BF9;Postgresql UUID&#x7C7B;&#x578B;&#x4E0E;ARRAY&#x7C7B;&#x578B;&#x7684;&#x652F;&#x6301;&#x3002;</span><span class="yiyi-st" id="yiyi-273">psycopg2&#x65B9;&#x8A00;&#x73B0;&#x5728;&#x4F7F;&#x7528;psycopg2.extras.register_uuid()&#x6302;&#x94A9;&#xFF0C;&#x4EE5;&#x4FBF;&#x59CB;&#x7EC8;&#x5C06;UUID&#x503C;&#x4F5C;&#x4E3A;UUID()&#x5BF9;&#x8C61;&#x4F20;&#x9012;&#x7ED9;DBAPI&#x6216;&#x4ECE;DBAPI&#x4F20;&#x9012;&#x3002;</span><span class="yiyi-st" id="yiyi-274"><a class="reference internal" href="dialects_postgresql.html#sqlalchemy.dialects.postgresql.UUID.params.as_uuid" title="sqlalchemy.dialects.postgresql.UUID"><code class="xref py py-paramref docutils literal"><span class="pre">UUID.as_uuid</span></code></a>&#x6807;&#x5FD7;&#x4ECD;&#x7136;&#x6709;&#x6548;&#xFF0C;&#x9664;&#x975E;&#x4F7F;&#x7528;psycopg2&#xFF0C;&#x5426;&#x5219;&#x6211;&#x4EEC;&#x9700;&#x8981;&#x5728;&#x7981;&#x7528;&#x65F6;&#x5C06;&#x8FD4;&#x56DE;&#x7684;UUID&#x5BF9;&#x8C61;&#x8F6C;&#x6362;&#x56DE;&#x5B57;&#x7B26;&#x4E32;&#x3002;<a class="changeset-link headerlink reference internal" href="#change-fc15276f16d5f99614d8b4a54fecfaa5">&#xB6;</a></span></p><p><span class="yiyi-st" id="yiyi-275">&#x53C2;&#x8003;&#x6587;&#x732E;&#xFF1A;<a class="reference external" href="http://www.sqlalchemy.org/trac/ticket/2940">&#xFF03;2940</a></span></p></li><li><p id="change-0.9.9-20"><span class="yiyi-st" id="yiyi-276"><span class="target" id="change-c632de8dde067c70ccf363e6daeedb9e"><strong>[postgresql] [bug] </strong></span>Added support for the <code class="xref py py-class docutils literal"><span class="pre">postgresql.JSONB</span></code> datatype when using psycopg2 2.5.4 or greater, which features native conversion of JSONB data so that SQLAlchemy&#x2019;s converters must be disabled; additionally, the newly added psycopg2 extension <code class="docutils literal"><span class="pre">extras.register_default_jsonb</span></code> is used to establish a JSON deserializer passed to the dialect via the <code class="docutils literal"><span class="pre">json_deserializer</span></code> argument. </span><span class="yiyi-st" id="yiyi-277">&#x8FD8;&#x4FEE;&#x590D;&#x4E86;Postgresql&#x96C6;&#x6210;&#x6D4B;&#x8BD5;&#xFF0C;&#x5B83;&#x5B9E;&#x9645;&#x4E0A;&#x5E76;&#x672A;&#x5C06;JSONB&#x7C7B;&#x578B;&#x4E0E;JSON&#x7C7B;&#x578B;&#x76F8;&#x53CD;&#x3002;</span><span class="yiyi-st" id="yiyi-278">&#x8BF7;&#x6C42;Mateusz Susik&#x63D0;&#x4F9B;&#x3002;<a class="changeset-link headerlink reference internal" href="#change-c632de8dde067c70ccf363e6daeedb9e">&#xB6;</a></span></p><p><span class="yiyi-st" id="yiyi-279">&#x53C2;&#x8003;&#x6587;&#x732E;&#xFF1A;<a class="reference external" href="https://github.com/zzzeek/sqlalchemy/pull/145">&#x8BF7;&#x6C42;github&#xFF1A;145</a></span></p></li><li><p id="change-0.9.9-21"><span class="yiyi-st" id="yiyi-280"><span class="target" id="change-d9bcd810bfd2c7b0bf94a17822ff2207"><strong>[postgresql] [bug] </strong></span>&#x5728;&#x6CE8;&#x518C;HSTORE&#x7C7B;&#x578B;&#x65F6;&#xFF0C;&#x4FEE;&#x590D;&#x4E86;&#x4F7F;&#x7528;&#x201C;array_oid&#x201D;&#x6807;&#x5FD7;&#x7684;&#x65E7;&#x7248;psycopg2&#x7248;&#x672C;<2.4.3，该版本不支持该标志，以及使用native json串行器钩子“register_default_json”与用户定义的<code="" class="docutils literal"><span class="pre">json_deserializer</span>&#x5728;psycopg2&#x7248;&#x672C;<2.5上，其中不包含本地json <a="" class="changeset-link headerlink reference internal" href="#change-d9bcd810bfd2c7b0bf94a17822ff2207">&#xB6;</2.5上，其中不包含本地json></2.4.3，该版本不支持该标志，以及使用native></span></p><p></p></li><li><p id="change-0.9.9-22"><span class="yiyi-st" id="yiyi-281"><span class="target" id="change-32f226c662282afc1566aa854def390b"><strong>[postgresql] [bug] </strong></span>Fixed bug where Postgresql dialect would fail to render an expression in an <a class="reference internal" href="core_constraints.html#sqlalchemy.schema.Index" title="sqlalchemy.schema.Index"><code class="xref py py-class docutils literal"><span class="pre">Index</span></code></a> that did not correspond directly to a table-bound column; typically when a <a class="reference internal" href="core_sqlelement.html#sqlalchemy.sql.expression.text" title="sqlalchemy.sql.expression.text"><code class="xref py py-func docutils literal"><span class="pre">text()</span></code></a> construct was one of the expressions within the index; or could misinterpret the list of expressions if one or more of them were such an expression.<a class="changeset-link headerlink reference internal" href="#change-32f226c662282afc1566aa854def390b">&#xB6;</a></span></p><p><span class="yiyi-st" id="yiyi-282">&#x53C2;&#x8003;&#x6587;&#x732E;&#xFF1A;<a class="reference external" href="http://www.sqlalchemy.org/trac/ticket/3174">&#xFF03;3174</a></span></p></li></ul></div><div class="section" id="change-0.9.9-mysql"><h3><span class="yiyi-st" id="yiyi-283">MySQL&#x7684;<a class="headerlink" href="#change-0.9.9-mysql" title="Permalink to this headline">&#xB6; T0&gt;</a></span></h3><ul class="simple"><li><p id="change-0.9.9-23"><span class="yiyi-st" id="yiyi-284"><span class="target" id="change-7333b35e43798c9ea3a76af9a66e0994"><strong>[mysql] [bug] </strong></span>&#x589E;&#x52A0;&#x4E86;&#x5BF9;&apos;utf8_bin&apos;&#x6392;&#x5E8F;&#x68C0;&#x67E5;&#x5468;&#x56F4;&#x7684;MySQLdb&#x65B9;&#x8A00;&#x7684;&#x7248;&#x672C;&#x68C0;&#x67E5;&#xFF0C;&#x56E0;&#x4E3A;&#x8FD9;&#x5728;MySQL&#x670D;&#x52A1;&#x5668;<5.0中失败。<a class="changeset-link headerlink reference internal" href="#change-7333b35e43798c9ea3a76af9a66e0994">&#xB6;</5.0中失败。<a></span></p><p><span class="yiyi-st" id="yiyi-285">&#x53C2;&#x8003;&#x6587;&#x732E;&#xFF1A;<a class="reference external" href="http://www.sqlalchemy.org/trac/ticket/3274">&#xFF03;3274</a></span></p></li><li><p id="change-0.9.9-24"><span class="yiyi-st" id="yiyi-286"><span class="target" id="change-8ad918e4ff23a5c688ab088a851b3d84"><strong>[mysql] [change] </strong></span> <code class="docutils literal"><span class="pre">gaerdbms</span></code>&#x65B9;&#x8A00;&#x4E0D;&#x518D;&#x9700;&#x8981;&#xFF0C;&#x5E76;&#x4E14;&#x53D1;&#x51FA;&#x5F03;&#x7528;&#x8B66;&#x544A;&#x3002;</span><span class="yiyi-st" id="yiyi-287">Google&#x73B0;&#x5728;&#x5EFA;&#x8BAE;&#x76F4;&#x63A5;&#x4F7F;&#x7528;MySQLdb&#x65B9;&#x8A00;&#x3002;<a class="changeset-link headerlink reference internal" href="#change-8ad918e4ff23a5c688ab088a851b3d84">&#xB6;</a></span></p><p><span class="yiyi-st" id="yiyi-288">&#x53C2;&#x8003;&#x6587;&#x732E;&#xFF1A;<a class="reference external" href="http://www.sqlalchemy.org/trac/ticket/3275">&#xFF03;3275</a></span></p></li></ul></div><div class="section" id="change-0.9.9-sqlite"><h3><span class="yiyi-st" id="yiyi-289">&#x6E90;&#x7801;<a class="headerlink" href="#change-0.9.9-sqlite" title="Permalink to this headline">&#xB6; T0&gt;</a></span></h3><ul class="simple"><li><p id="change-0.9.9-25"><span class="yiyi-st" id="yiyi-290"><span class="target" id="change-2437d88dea80ab7c4b359b0a0b1c5851"><strong>[sqlite] [feature] </strong></span>&#x5728;SQLite&#x4E2D;&#x589E;&#x52A0;&#x4E86;&#x5BF9;&#x90E8;&#x5206;&#x7D22;&#x5F15;&#xFF08;&#x4F8B;&#x5982;&#x4F7F;&#x7528;WHERE&#x5B50;&#x53E5;&#xFF09;&#x7684;&#x652F;&#x6301;&#x3002;</span><span class="yiyi-st" id="yiyi-291">&#x8BF7;&#x6C42;Kai Groner&#x63D0;&#x4F9B;&#x7684;&#x8BF7;&#x6C42;&#x3002;</span></p><div class="admonition seealso"><p class="first admonition-title"><span class="yiyi-st" id="yiyi-292">&#x4E5F;&#x53EF;&#x4EE5;&#x770B;&#x770B;</span></p><p class="last"><span class="yiyi-st" id="yiyi-293"><a class="reference internal" href="dialects_sqlite.html#sqlite-partial-index"><span>Partial Indexes</span></a></span></p></div><span class="yiyi-st" id="yiyi-295"> <a class="changeset-link headerlink reference internal" href="#change-2437d88dea80ab7c4b359b0a0b1c5851">&#xB6;</a></span><p><span class="yiyi-st" id="yiyi-294">&#x53C2;&#x8003;&#x6587;&#x732E;&#xFF1A;<a class="reference external" href="https://bitbucket.org/zzzeek/sqlalchemy/pull-request/42">pull request bitbucket&#xFF1A;42</a></span></p></li><li><p id="change-0.9.9-26"><span class="yiyi-st" id="yiyi-296"><span class="target" id="change-e7af5da13cb89fc42bd84e28fe79ec07"><strong>[sqlite] [feature] </strong></span>&#x4E3A;SQLCipher&#x540E;&#x7AEF;&#x6DFB;&#x52A0;&#x4E86;&#x65B0;&#x7684;SQLite&#x540E;&#x7AEF;&#x3002;</span><span class="yiyi-st" id="yiyi-297">&#x8BE5;&#x540E;&#x7AEF;&#x4F7F;&#x7528;pysqlcipher Python&#x9A71;&#x52A8;&#x7A0B;&#x5E8F;&#x63D0;&#x4F9B;&#x52A0;&#x5BC6;&#x7684;SQLite&#x6570;&#x636E;&#x5E93;&#xFF0C;&#x8FD9;&#x4E0E;pysqlite&#x9A71;&#x52A8;&#x7A0B;&#x5E8F;&#x975E;&#x5E38;&#x76F8;&#x4F3C;&#x3002;</span></p><div class="admonition seealso"><p class="first admonition-title"><span class="yiyi-st" id="yiyi-298">&#x4E5F;&#x53EF;&#x4EE5;&#x770B;&#x770B;</span></p><p class="last"><span class="yiyi-st" id="yiyi-299"><a class="reference internal" href="dialects_sqlite.html#module-sqlalchemy.dialects.sqlite.pysqlcipher" title="sqlalchemy.dialects.sqlite.pysqlcipher"><code class="xref py py-mod docutils literal"><span class="pre">pysqlcipher</span></code></a></span></p></div><span class="yiyi-st" id="yiyi-300"> <a class="changeset-link headerlink reference internal" href="#change-e7af5da13cb89fc42bd84e28fe79ec07">&#xB6;</a></span><p></p></li></ul></div><div class="section" id="change-0.9.9-misc"><h3><span class="yiyi-st" id="yiyi-301">&#x6742;&#x9879;<a class="headerlink" href="#change-0.9.9-misc" title="Permalink to this headline">&#xB6; T0&gt;</a></span></h3><ul class="simple"><li><p id="change-0.9.9-27"><span class="yiyi-st" id="yiyi-302"><span class="target" id="change-10dacdfe5eb7c9ab611635de10cb4708"><strong>[bug] [ext] [py3k] </strong></span>Fixed bug where the association proxy list class would not interpret slices correctly under Py3K. </span><span class="yiyi-st" id="yiyi-303">&#x62C9;&#x5C14;&#x8BF7;&#x6C42;&#x793C;&#x8C8C;Gilles Dartiguelongue&#x3002;<a class="changeset-link headerlink reference internal" href="#change-10dacdfe5eb7c9ab611635de10cb4708">&#xB6;</a></span></p><p><span class="yiyi-st" id="yiyi-304">&#x53C2;&#x8003;&#x6587;&#x732E;&#xFF1A;<a class="reference external" href="https://github.com/zzzeek/sqlalchemy/pull/154">&#x8BF7;&#x6C42;github&#xFF1A;154</a></span></p></li><li><p id="change-0.9.9-28"><span class="yiyi-st" id="yiyi-305"><span class="target" id="change-9729fe8589ed3467a037083e5d6d0797"><strong>[bug] [examples] </strong></span>Updated the <a class="reference internal" href="orm_examples.html#examples-versioned-history"><span>Versioning with a History Table</span></a> example such that mapped columns are re-mapped to match column names as well as grouping of columns; in particular, this allows columns that are explicitly grouped in a same-column-named joined inheritance scenario to be mapped in the same way in the history mappings, avoiding warnings added in the 0.9 series regarding this pattern and allowing the same view of attribute keys.<a class="changeset-link headerlink reference internal" href="#change-9729fe8589ed3467a037083e5d6d0797">&#xB6;</a></span></p><p></p></li><li><p id="change-0.9.9-29"><span class="yiyi-st" id="yiyi-306"><span class="target" id="change-a2fae0619dae442c213a19d4a76aa3e4"><strong>[bug] [examples] </strong></span>Fixed a bug in the examples/generic_assocaitions/discriminator_on_association.py example, where the subclasses of AddressAssociation were not being mapped as &#x201C;single table inheritance&#x201D;, leading to problems when trying to use the mappings further.<a class="changeset-link headerlink reference internal" href="#change-a2fae0619dae442c213a19d4a76aa3e4">&#xB6;</a></span></p><p></p></li></ul></div></div><div class="section" id="change-0.9.8"><h2><span class="yiyi-st" id="yiyi-308">0.9.8 <a class="headerlink" href="#change-0.9.8" title="Permalink to this headline">&#xB6; T0&gt;</a></span></h2><span class="yiyi-st" id="yiyi-395">&#x53D1;&#x5E03;&#x65E5;&#x671F;&#xFF1A;2014&#x5E74;10&#x6708;13&#x65E5;</span><div class="section" id="change-0.9.8-orm"><h3><span class="yiyi-st" id="yiyi-309">ORM <a class="headerlink" href="#change-0.9.8-orm" title="Permalink to this headline">&#xB6; T0&gt;</a></span></h3><ul class="simple"><li><p id="change-0.9.8-0"><span class="yiyi-st" id="yiyi-310"><span class="target" id="change-040cb84155ffafc236b8a0959f655553"><strong>[orm] [bug] [engine] </strong></span>Fixed bug that affected generally the same classes of event as that of <a class="reference external" href="http://www.sqlalchemy.org/trac/ticket/3199">#3199</a>, when the <code class="docutils literal"><span class="pre">named=True</span></code> parameter would be used. </span><span class="yiyi-st" id="yiyi-311">&#x4E00;&#x4E9B;&#x4E8B;&#x4EF6;&#x5C06;&#x65E0;&#x6CD5;&#x6CE8;&#x518C;&#xFF0C;&#x800C;&#x5176;&#x4ED6;&#x4E8B;&#x4EF6;&#x4E0D;&#x4F1A;&#x6B63;&#x786E;&#x5730;&#x8C03;&#x7528;&#x4E8B;&#x4EF6;&#x53C2;&#x6570;&#xFF0C;&#x901A;&#x5E38;&#x662F;&#x5728;&#x4E8B;&#x4EF6;&#x88AB;&#x201C;&#x5305;&#x88C5;&#x201D;&#x4EE5;&#x4FBF;&#x4EE5;&#x5176;&#x4ED6;&#x65B9;&#x5F0F;&#x8FDB;&#x884C;&#x9002;&#x5E94;&#x7684;&#x60C5;&#x51B5;&#x4E0B;&#x3002;</span><span class="yiyi-st" id="yiyi-312">&#x201C;&#x547D;&#x540D;&#x201D;&#x673A;&#x5236;&#x5DF2;&#x91CD;&#x65B0;&#x6392;&#x5217;&#xFF0C;&#x4E0D;&#x4F1A;&#x5E72;&#x6270;&#x5185;&#x90E8;&#x5305;&#x88C5;&#x51FD;&#x6570;&#x671F;&#x671B;&#x7684;&#x53C2;&#x6570;&#x7B7E;&#x540D;&#x3002;<a class="changeset-link headerlink reference internal" href="#change-040cb84155ffafc236b8a0959f655553">&#xB6;</a></span></p><p><span class="yiyi-st" id="yiyi-313">&#x53C2;&#x8003;&#x6587;&#x732E;&#xFF1A;<a class="reference external" href="http://www.sqlalchemy.org/trac/ticket/3197">&#xFF03;3197</a></span></p></li><li><p id="change-0.9.8-1"><span class="yiyi-st" id="yiyi-314"><span class="target" id="change-65925a14215a5f14359c76d2e3b04bae"><strong>[orm] [bug] </strong></span>Fixed bug that affected many classes of event, particularly ORM events but also engine events, where the usual logic of &#x201C;de duplicating&#x201D; a redundant call to <a class="reference internal" href="core_event.html#sqlalchemy.event.listen" title="sqlalchemy.event.listen"><code class="xref py py-func docutils literal"><span class="pre">event.listen()</span></code></a> with the same arguments would fail, for those events where the listener function is wrapped. </span><span class="yiyi-st" id="yiyi-315">&#x65AD;&#x8A00;&#x5C06;&#x5728;registry.py&#x4E2D;&#x53D1;&#x751F;&#x3002;</span><span class="yiyi-st" id="yiyi-316">&#x8FD9;&#x4E00;&#x8BF4;&#x6CD5;&#x73B0;&#x5728;&#x5DF2;&#x7ECF;&#x88AB;&#x7EB3;&#x5165;&#x91CD;&#x590D;&#x6570;&#x636E;&#x5220;&#x9664;&#x68C0;&#x67E5;&#x4E2D;&#xFF0C;&#x5E76;&#x5E26;&#x6765;&#x66F4;&#x7B80;&#x5355;&#x7684;&#x65B9;&#x6CD5;&#x6765;&#x68C0;&#x67E5;&#x91CD;&#x590D;&#x6570;&#x636E;&#x5220;&#x9664;&#x7684;&#x989D;&#x5916;&#x597D;&#x5904;&#x3002;<a class="changeset-link headerlink reference internal" href="#change-65925a14215a5f14359c76d2e3b04bae">&#xB6;</a></span></p><p><span class="yiyi-st" id="yiyi-317">&#x53C2;&#x8003;&#x6587;&#x732E;&#xFF1A;<a class="reference external" href="http://www.sqlalchemy.org/trac/ticket/3199">&#xFF03;3199</a></span></p></li><li><p id="change-0.9.8-2"><span class="yiyi-st" id="yiyi-318"><span class="target" id="change-dc9752643faf4e960c03910d74b7c380"><strong>[orm] [bug] </strong></span>&#x56FA;&#x5B9A;&#x8B66;&#x544A;&#xFF0C;&#x5F53;&#x590D;&#x6742;&#x7684;&#x81EA;&#x5F15;&#x7528;primaryjoin&#x5305;&#x542B;&#x51FD;&#x6570;&#x65F6;&#x4F1A;&#x53D1;&#x51FA;&#x8B66;&#x544A;&#xFF0C;&#x540C;&#x65F6;&#x6307;&#x5B9A;remote_side&#xFF1B;&#x8B66;&#x544A;&#x4F1A;&#x5EFA;&#x8BAE;&#x8BBE;&#x7F6E;&#x201C;&#x8FDC;&#x7A0B;&#x7AEF;&#x201D;&#x3002;</span><span class="yiyi-st" id="yiyi-319">&#x5982;&#x679C;remote_side&#x4E0D;&#x5B58;&#x5728;&#xFF0C;&#x5B83;&#x73B0;&#x5728;&#x53EA;&#x4F1A;&#x53D1;&#x5C04;&#x3002;<a class="changeset-link headerlink reference internal" href="#change-dc9752643faf4e960c03910d74b7c380">&#xB6;</a></span></p><p><span class="yiyi-st" id="yiyi-320">&#x53C2;&#x8003;&#x6587;&#x732E;&#xFF1A;<a class="reference external" href="http://www.sqlalchemy.org/trac/ticket/3194">&#xFF03;3194</a></span></p></li></ul></div><div class="section" id="change-0.9.8-orm-declarative"><h3><span class="yiyi-st" id="yiyi-321">orm declarative <a class="headerlink" href="#change-0.9.8-orm-declarative" title="Permalink to this headline">&#xB6;</a></span></h3><ul class="simple"><li><p id="change-0.9.8-3"><span class="yiyi-st" id="yiyi-322"><span class="target" id="change-3e9abe4fb814c36d081c1af0743b68a0"><strong>[bug] [declarative] [orm] </strong></span>Fixed &#x201C;&#x2018;NoneType&#x2019; object has no attribute &#x2018;concrete&#x2019;&#x201D; error when using <a class="reference internal" href="orm_extensions_declarative_api.html#sqlalchemy.ext.declarative.AbstractConcreteBase" title="sqlalchemy.ext.declarative.AbstractConcreteBase"><code class="xref py py-class docutils literal"><span class="pre">AbstractConcreteBase</span></code></a> in conjunction with a subclass that declares <code class="docutils literal"><span class="pre">__abstract__</span></code>.<a class="changeset-link headerlink reference internal" href="#change-3e9abe4fb814c36d081c1af0743b68a0">&#xB6;</a></span></p><p><span class="yiyi-st" id="yiyi-323">&#x53C2;&#x8003;&#x6587;&#x732E;&#xFF1A;<a class="reference external" href="http://www.sqlalchemy.org/trac/ticket/3185">&#xFF03;3185</a></span></p></li></ul></div><div class="section" id="change-0.9.8-engine"><h3><span class="yiyi-st" id="yiyi-324">&#x53D1;&#x52A8;&#x673A;<a class="headerlink" href="#change-0.9.8-engine" title="Permalink to this headline">&#xB6; T0&gt;</a></span></h3><ul class="simple"><li><p id="change-0.9.8-4"><span class="yiyi-st" id="yiyi-325"><span class="target" id="change-5ea92686db96cba0e79afedbcc6adf59"><strong>[engine] [bug] </strong></span>The execution options passed to an <a class="reference internal" href="core_connections.html#sqlalchemy.engine.Engine" title="sqlalchemy.engine.Engine"><code class="xref py py-class docutils literal"><span class="pre">Engine</span></code></a> either via <a class="reference internal" href="core_engines.html#sqlalchemy.create_engine.params.execution_options" title="sqlalchemy.create_engine"><code class="xref py py-paramref docutils literal"><span class="pre">create_engine.execution_options</span></code></a> or <a class="reference internal" href="core_connections.html#sqlalchemy.engine.Engine.update_execution_options" title="sqlalchemy.engine.Engine.update_execution_options"><code class="xref py py-meth docutils literal"><span class="pre">Engine.update_execution_options()</span></code></a> are not passed to the special <a class="reference internal" href="core_connections.html#sqlalchemy.engine.Connection" title="sqlalchemy.engine.Connection"><code class="xref py py-class docutils literal"><span class="pre">Connection</span></code></a> used to initialize the dialect within the &#x201C;first connect&#x201D; event; dialects will usually perform their own queries in this phase, and none of the current available options should be applied here. </span><span class="yiyi-st" id="yiyi-326">&#x7279;&#x522B;&#x662F;&#xFF0C;&#x201C;&#x81EA;&#x52A8;&#x63D0;&#x4EA4;&#x201D;&#x9009;&#x9879;&#x4F1A;&#x5BFC;&#x81F4;&#x5C1D;&#x8BD5;&#x5728;&#x6B64;&#x521D;&#x59CB;&#x8FDE;&#x63A5;&#x4E2D;&#x81EA;&#x52A8;&#x63D0;&#x4EA4;&#xFF0C;&#x7531;&#x4E8E;<a class="reference internal" href="core_connections.html#sqlalchemy.engine.Connection" title="sqlalchemy.engine.Connection"><code class="xref py py-class docutils literal"><span class="pre">Connection</span></code></a>&#x7684;&#x975E;&#x6807;&#x51C6;&#x72B6;&#x6001;&#xFF0C;&#x8BE5;&#x9009;&#x9879;&#x5C06;&#x56E0;AttributeError&#x5931;&#x8D25;&#x3002;<a class="changeset-link headerlink reference internal" href="#change-5ea92686db96cba0e79afedbcc6adf59">&#xB6;</a></span></p><p><span class="yiyi-st" id="yiyi-327">&#x53C2;&#x8003;&#x6587;&#x732E;&#xFF1A;<a class="reference external" href="http://www.sqlalchemy.org/trac/ticket/3200">&#xFF03;3200</a></span></p></li><li><p id="change-0.9.8-5"><span class="yiyi-st" id="yiyi-328"><span class="target" id="change-6a98e0632754dd817947fcd39bd2a627"><strong>[engine] [bug] </strong></span>&#x7528;&#x4E8E;&#x786E;&#x5B9A;&#x53D7;INSERT&#x6216;UPDATE&#x5F71;&#x54CD;&#x7684;&#x5217;&#x7684;&#x5B57;&#x7B26;&#x4E32;&#x952E;&#x73B0;&#x5728;&#x5728;&#x5BF9;&#x201C;&#x7F16;&#x8BD1;&#x7F13;&#x5B58;&#x201D;&#x7F13;&#x5B58;&#x952E;&#x4F5C;&#x51FA;&#x8D21;&#x732E;&#x65F6;&#x88AB;&#x6392;&#x5E8F;&#x3002;</span><span class="yiyi-st" id="yiyi-329">&#x8FD9;&#x4E9B;&#x952E;&#x4EE5;&#x524D;&#x6CA1;&#x6709;&#x786E;&#x5B9A;&#x6027;&#x5730;&#x6392;&#x5E8F;&#xFF0C;&#x8FD9;&#x610F;&#x5473;&#x7740;&#x76F8;&#x540C;&#x7684;&#x8BED;&#x53E5;&#x53EF;&#x4EE5;&#x5728;&#x76F8;&#x540C;&#x7684;&#x952E;&#x4E0A;&#x591A;&#x6B21;&#x7F13;&#x5B58;&#xFF0C;&#x4ECE;&#x5185;&#x5B58;&#x548C;&#x6027;&#x80FD;&#x4E24;&#x4E2A;&#x65B9;&#x9762;&#x6765;&#x8BF4;&#x90FD;&#x662F;&#x8FD9;&#x6837;&#x3002;<a class="changeset-link headerlink reference internal" href="#change-6a98e0632754dd817947fcd39bd2a627">&#xB6;</a></span></p><p><span class="yiyi-st" id="yiyi-330">&#x53C2;&#x8003;&#x6587;&#x732E;&#xFF1A;<a class="reference external" href="http://www.sqlalchemy.org/trac/ticket/3165">&#xFF03;3165</a></span></p></li></ul></div><div class="section" id="change-0.9.8-sql"><h3><span class="yiyi-st" id="yiyi-331">SQL <a class="headerlink" href="#change-0.9.8-sql" title="Permalink to this headline">&#xB6; T0&gt;</a></span></h3><ul class="simple"><li><p id="change-0.9.8-6"><span class="yiyi-st" id="yiyi-332"><span class="target" id="change-222b0163a38f1bb2a9d159b7278af9fb"><strong>[sql] [bug] </strong></span>Fixed bug where a fair number of SQL elements within the sql package would fail to <code class="docutils literal"><span class="pre">__repr__()</span></code> successfully, due to a missing <code class="docutils literal"><span class="pre">description</span></code> attribute that would then invoke a recursion overflow when an internal AttributeError would then re-invoke <code class="docutils literal"><span class="pre">__repr__()</span></code>.<a class="changeset-link headerlink reference internal" href="#change-222b0163a38f1bb2a9d159b7278af9fb">&#xB6;</a></span></p><p><span class="yiyi-st" id="yiyi-333">&#x53C2;&#x8003;&#x6587;&#x732E;&#xFF1A;<a class="reference external" href="http://www.sqlalchemy.org/trac/ticket/3195">&#xFF03;3195</a></span></p></li><li><p id="change-0.9.8-7"><span class="yiyi-st" id="yiyi-334"><span class="target" id="change-c1ac48f9d293ea2e5f282a620ff1a9cc"><strong>[sql] [bug] </strong></span>An adjustment to table/index reflection such that if an index reports a column that isn&#x2019;t found to be present in the table, a warning is emitted and the column is skipped. </span><span class="yiyi-st" id="yiyi-335">&#x5BF9;&#x4E8E;&#x4E00;&#x4E9B;&#x7279;&#x6B8A;&#x7684;&#x7CFB;&#x7EDF;&#x5217;&#x60C5;&#x51B5;&#xFF0C;&#x53EF;&#x80FD;&#x4F1A;&#x53D1;&#x751F;&#x8FD9;&#x79CD;&#x60C5;&#x51B5;&#xFF0C;&#x6B63;&#x5982;Oracle&#x89C2;&#x5BDF;&#x5230;&#x7684;&#x90A3;&#x6837;&#x3002;<a class="changeset-link headerlink reference internal" href="#change-c1ac48f9d293ea2e5f282a620ff1a9cc">&#xB6;</a></span></p><p><span class="yiyi-st" id="yiyi-336">&#x53C2;&#x8003;&#x6587;&#x732E;&#xFF1A;<a class="reference external" href="http://www.sqlalchemy.org/trac/ticket/3180">&#xFF03;3180</a></span></p></li><li><p id="change-0.9.8-8"><span class="yiyi-st" id="yiyi-337"><span class="target" id="change-438513ba693d7e6a58994f37a3ed2ca5"><strong>[sql] [bug] </strong></span>Fixed bug in CTE where <code class="docutils literal"><span class="pre">literal_binds</span></code> compiler argument would not be always be correctly propagated when one CTE referred to another aliased CTE in a statement.<a class="changeset-link headerlink reference internal" href="#change-438513ba693d7e6a58994f37a3ed2ca5">&#xB6;</a></span></p><p><span class="yiyi-st" id="yiyi-338">&#x53C2;&#x8003;&#x6587;&#x732E;&#xFF1A;<a class="reference external" href="http://www.sqlalchemy.org/trac/ticket/3154">&#xFF03;3154</a></span></p></li><li><p id="change-0.9.8-9"><span class="yiyi-st" id="yiyi-339"><span class="target" id="change-ae836fdd12b932ca0dfa9804e5b52282"><strong>[sql] [bug] </strong></span>&#x4FEE;&#x6B63;&#x4E86;&#x7531;<a class="reference external" href="http://www.sqlalchemy.org/trac/ticket/3067">&#xFF03;3067</a>&#x5BFC;&#x81F4;&#x7684;0.9.7&#x56DE;&#x5F52;&#x4E0E;&#x9519;&#x8BEF;&#x7684;&#x5355;&#x5143;&#x6D4B;&#x8BD5;&#x7684;&#x7ED3;&#x5408;&#xFF0C;&#x4F7F;&#x5F97;&#x6240;&#x8C13;&#x7684;&#x201C;&#x6A21;&#x5F0F;&#x201D;&#x7C7B;&#x578B;&#x5982;<a class="reference internal" href="core_type_basics.html#sqlalchemy.types.Boolean" title="sqlalchemy.types.Boolean"><code class="xref py py-class docutils literal"><span class="pre">Boolean</span></code></a>&#x548C;<a class="reference internal" href="core_type_basics.html#sqlalchemy.types.Enum" title="sqlalchemy.types.Enum"><code class="xref py py-class docutils literal"><span class="pre">Enum</span></code></a>&#x4E0D;&#x80FD;&#x518D;&#x88AB;&#x814C;&#x5236;&#x3002;<a class="changeset-link headerlink reference internal" href="#change-ae836fdd12b932ca0dfa9804e5b52282">&#xB6;</a></span></p><p><span class="yiyi-st" id="yiyi-340">&#x53C2;&#x8003;&#x6587;&#x732E;&#xFF1A;<a class="reference external" href="http://www.sqlalchemy.org/trac/ticket/3144">&#xFF03;3144</a>&#xFF0C;<a class="reference external" href="http://www.sqlalchemy.org/trac/ticket/3067">&#xFF03;3067</a></span></p></li></ul></div><div class="section" id="change-0.9.8-postgresql"><h3><span class="yiyi-st" id="yiyi-341">&#x7684;PostgreSQL <a class="headerlink" href="#change-0.9.8-postgresql" title="Permalink to this headline">&#xB6; T0&gt;</a></span></h3><ul class="simple"><li><p id="change-0.9.8-10"><span class="yiyi-st" id="yiyi-342"><span class="target" id="change-348b76a1618d3c820757eb094ebca1ef"><strong>[postgresql] [feature] [pg8000] </strong></span>&#x901A;&#x8FC7;pg8000&#x9A71;&#x52A8;&#x7A0B;&#x5E8F;&#x4E3A;&#x201C;&#x7406;&#x667A;&#x7684;&#x591A;&#x884C;&#x6570;&#x201D;&#x6DFB;&#x52A0;&#x652F;&#x6301;&#xFF0C;&#x4E3B;&#x8981;&#x9002;&#x7528;&#x4E8E;&#x4F7F;&#x7528;ORM&#x8FDB;&#x884C;&#x7248;&#x672C;&#x63A7;&#x5236;&#x65F6;&#x3002;</span><span class="yiyi-st" id="yiyi-343">&#x8BE5;&#x529F;&#x80FD;&#x57FA;&#x4E8E;&#x4F7F;&#x7528;&#x7684;pg8000 1.9.14&#x6216;&#x66F4;&#x9AD8;&#x7248;&#x672C;&#x8FDB;&#x884C;&#x7248;&#x672C;&#x68C0;&#x6D4B;&#x3002;</span><span class="yiyi-st" id="yiyi-344">&#x62C9;&#x6258;&#x6D1B;&#x514B;&#x6D1B;&#x8BF7;&#x6C42;&#x793C;&#x8C8C;&#x3002;<a class="changeset-link headerlink reference internal" href="#change-348b76a1618d3c820757eb094ebca1ef">&#xB6;</a></span></p><p><span class="yiyi-st" id="yiyi-345">&#x53C2;&#x8003;&#x6587;&#x732E;&#xFF1A;<a class="reference external" href="https://github.com/zzzeek/sqlalchemy/pull/125">&#x8BF7;&#x6C42;github&#xFF1A;125</a></span></p></li><li><p id="change-0.9.8-11"><span class="yiyi-st" id="yiyi-346"><span class="target" id="change-f9a3e851447589d85ac72da3b5ae6f96"><strong>[postgresql] [bug] </strong></span>&#x91CD;&#x65B0;&#x5BA1;&#x89C6;&#x6B64;&#x95EE;&#x9898;&#x5728;0.9.5&#x4E2D;&#x9996;&#x6B21;&#x88AB;&#x4FEE;&#x8865;&#xFF0C;&#x663E;&#x7136;psycopg2&#x7684;<code class="docutils literal"><span class="pre">.closed</span></code>&#x8BBF;&#x95EE;&#x5668;&#x5E76;&#x4E0D;&#x50CF;&#x6211;&#x4EEC;&#x5047;&#x8BBE;&#x7684;&#x90A3;&#x6837;&#x53EF;&#x9760;&#xFF0C;&#x6240;&#x4EE5;&#x6211;&#x4EEC;&#x6DFB;&#x52A0;&#x4E86;&#x4E00;&#x4E2A;&#x5F53;&#x68C0;&#x6D4B;&#x5230;is-disconnect&#x573A;&#x666F;&#x65F6;&#xFF0C;&#x663E;&#x5F0F;&#x68C0;&#x67E5;&#x5F02;&#x5E38;&#x6D88;&#x606F;&#x201C;SSL SYSCALL&#x9519;&#x8BEF;&#xFF1A;&#x9519;&#x8BEF;&#x7684;&#x6587;&#x4EF6;&#x63CF;&#x8FF0;&#x7B26;&#x201D;&#x548C;&#x201C;SSL SYSCALL&#x9519;&#x8BEF;&#xFF1A;EOF&#x68C0;&#x6D4B;&#x5230;&#x201D;&#x3002;</span><span class="yiyi-st" id="yiyi-347">&#x6211;&#x4EEC;&#x5C06;&#x7EE7;&#x7EED;&#x54A8;&#x8BE2;psycopg2&#x7684;connection.closed&#x4F5C;&#x4E3A;&#x7B2C;&#x4E00;&#x6B21;&#x68C0;&#x67E5;&#x3002;<a class="changeset-link headerlink reference internal" href="#change-f9a3e851447589d85ac72da3b5ae6f96">&#xB6;</a></span></p><p><span class="yiyi-st" id="yiyi-348">&#x53C2;&#x8003;&#x6587;&#x732E;&#xFF1A;<a class="reference external" href="http://www.sqlalchemy.org/trac/ticket/3021">&#xFF03;3021</a></span></p></li><li><p id="change-0.9.8-12"><span class="yiyi-st" id="yiyi-349"><span class="target" id="change-5e8390463893d41899dc2296b9ed0f34"><strong>[postgresql] [bug] </strong></span>Fixed bug where Postgresql JSON type was not able to persist or otherwise render a SQL NULL column value, rather than a JSON-encoded <code class="docutils literal"><span class="pre">&apos;null&apos;</span></code>. </span><span class="yiyi-st" id="yiyi-350">&#x4E3A;&#x4E86;&#x652F;&#x6301;&#x8FD9;&#x79CD;&#x60C5;&#x51B5;&#xFF0C;&#x66F4;&#x6539;&#x5982;&#x4E0B;&#xFF1A;</span></p><ul><li><span class="yiyi-st" id="yiyi-351">&#x73B0;&#x5728;&#x53EF;&#x4EE5;&#x6307;&#x5B9A;<a class="reference internal" href="core_sqlelement.html#sqlalchemy.sql.expression.null" title="sqlalchemy.sql.expression.null"><code class="xref py py-func docutils literal"><span class="pre">null()</span></code></a>&#x503C;&#xFF0C;&#x8FD9;&#x5C06;&#x59CB;&#x7EC8;&#x5BFC;&#x81F4;&#x4EA7;&#x751F;&#x8BE5;&#x8BED;&#x53E5;&#x7684;NULL&#x503C;&#x3002;</span></li><li><span class="yiyi-st" id="yiyi-352">&#x6DFB;&#x52A0;&#x4E86;&#x4E00;&#x4E2A;&#x65B0;&#x53C2;&#x6570;<a class="reference internal" href="dialects_mysql.html#sqlalchemy.dialects.mysql.JSON.params.none_as_null" title="sqlalchemy.dialects.mysql.JSON"><code class="xref py py-paramref docutils literal"><span class="pre">JSON.none_as_null</span></code></a>&#xFF0C;&#x5F53;True&#x8868;&#x793A;Python <code class="docutils literal"><span class="pre">None</span></code>&#x503C;&#x5E94;&#x8BE5;&#x4F5C;&#x4E3A;SQL NULL&#x6267;&#x884C;&#xFF0C;&#x800C;&#x4E0D;&#x662F;JSON&#x7F16;&#x7801;<code class="docutils literal"><span class="pre">&apos;null&apos;</span></code></span></li></ul><p><span class="yiyi-st" id="yiyi-353">&#x5BF9;&#x4E8E;&#x975E;psycopg2&#x7684;DBAPI&#xFF0C;&#x5373;pg8000&#xFF0C;&#x4E5F;&#x4F1A;&#x4FEE;&#x590D;NULL&#x7684;&#x7A7A;&#x503C;&#x3002;</span></p><span class="yiyi-st" id="yiyi-355"> <a class="changeset-link headerlink reference internal" href="#change-5e8390463893d41899dc2296b9ed0f34">&#xB6;</a></span><p><span class="yiyi-st" id="yiyi-354">&#x53C2;&#x8003;&#x6587;&#x732E;&#xFF1A;<a class="reference external" href="http://www.sqlalchemy.org/trac/ticket/3159">&#xFF03;3159</a></span></p></li><li><p id="change-0.9.8-13"><span class="yiyi-st" id="yiyi-356"><span class="target" id="change-90221b5e6266d9262bf64826feba9769"><strong>[postgresql] [bug] </strong></span> DBAPI&#x9519;&#x8BEF;&#x7684;&#x5F02;&#x5E38;&#x5305;&#x88C5;&#x7CFB;&#x7EDF;&#x73B0;&#x5728;&#x53EF;&#x4EE5;&#x5BB9;&#x7EB3;&#x975E;&#x6807;&#x51C6;DBAPI&#x5F02;&#x5E38;&#xFF0C;&#x4F8B;&#x5982;psycopg2 TransactionRollbackError&#x3002;</span><span class="yiyi-st" id="yiyi-357">&#x8FD9;&#x4E9B;&#x5F02;&#x5E38;&#x73B0;&#x5728;&#x5C06;&#x4F7F;&#x7528;<code class="docutils literal"><span class="pre">sqlalchemy.exc</span></code>&#x4E2D;&#x6700;&#x63A5;&#x8FD1;&#x7684;&#x53EF;&#x7528;&#x5B50;&#x7C7B;&#x8FDB;&#x884C;&#x5F15;&#x53D1;&#xFF0C;&#x5982;&#x679C;&#x662F;TransactionRollbackError&#xFF0C;<code class="docutils literal"><span class="pre">sqlalchemy.exc.OperationalError</span></code>&#x3002;<a class="changeset-link headerlink reference internal" href="#change-90221b5e6266d9262bf64826feba9769">&#xB6;</a></span></p><p><span class="yiyi-st" id="yiyi-358">&#x53C2;&#x8003;&#x6587;&#x732E;&#xFF1A;<a class="reference external" href="http://www.sqlalchemy.org/trac/ticket/3075">&#xFF03;3075</a></span></p></li><li><p id="change-0.9.8-14"><span class="yiyi-st" id="yiyi-359"><span class="target" id="change-7f25bb6d60f7a1279948396ac86574bb"><strong>[postgresql] [bug] </strong></span>&#x4FEE;&#x6B63;&#x4E86;<a class="reference internal" href="dialects_postgresql.html#sqlalchemy.dialects.postgresql.array" title="sqlalchemy.dialects.postgresql.array"><code class="xref py py-class docutils literal"><span class="pre">postgresql.array</span></code></a>&#x5BF9;&#x8C61;&#x4E2D;&#x7684;&#x4E00;&#x4E2A;&#x9519;&#x8BEF;&#xFF0C;&#x5176;&#x4E2D;&#x4E0E;&#x666E;&#x901A;Python&#x5217;&#x8868;&#x7684;&#x6BD4;&#x8F83;&#x5C06;&#x65E0;&#x6CD5;&#x4F7F;&#x7528;&#x6B63;&#x786E;&#x7684;&#x6570;&#x7EC4;&#x6784;&#x9020;&#x51FD;&#x6570;&#x3002;</span><span class="yiyi-st" id="yiyi-360">&#x62C9;&#x8BF7;&#x6C42;&#x793C;&#x8C8C;Andrew&#x3002;<a class="changeset-link headerlink reference internal" href="#change-7f25bb6d60f7a1279948396ac86574bb">&#xB6;</a></span></p><p><span class="yiyi-st" id="yiyi-361">&#x53C2;&#x8003;&#x6587;&#x732E;&#xFF1A;<a class="reference external" href="http://www.sqlalchemy.org/trac/ticket/3141">&#xFF03;3141</a>&#xFF0C;<a class="reference external" href="https://github.com/zzzeek/sqlalchemy/pull/124">&#x8BF7;&#x6C42;github&#xFF1A;124</a></span></p></li><li><p id="change-0.9.8-15"><span class="yiyi-st" id="yiyi-362"><span class="target" id="change-aaaa4815736728bec50c929a09c7fa5a"><strong>[postgresql] [bug] </strong></span>&#x4E3A;&#x51FD;&#x6570;&#x6DFB;&#x52A0;&#x4E86;&#x652F;&#x6301;&#x7684;<a class="reference internal" href="core_functions.html#sqlalchemy.sql.functions.FunctionElement.alias" title="sqlalchemy.sql.functions.FunctionElement.alias"><code class="xref py py-meth docutils literal"><span class="pre">FunctionElement.alias()</span></code></a>&#x65B9;&#x6CD5;&#x3002; <code class="docutils literal"><span class="pre">func</span></code>&#x6784;&#x9020;&#x3002;</span><span class="yiyi-st" id="yiyi-363">&#x4EE5;&#x524D;&#xFF0C;&#x6B64;&#x65B9;&#x6CD5;&#x7684;&#x884C;&#x4E3A;&#x672A;&#x5B9A;&#x4E49;&#x3002;</span><span class="yiyi-st" id="yiyi-364">&#x5F53;&#x524D;&#x884C;&#x4E3A;&#x6A21;&#x4EFF;0.9.4&#x4E4B;&#x524D;&#x7684;&#x884C;&#x4E3A;&#xFF0C;&#x5373;&#x8BE5;&#x51FD;&#x6570;&#x88AB;&#x8F6C;&#x6362;&#x4E3A;&#x5177;&#x6709;&#x7ED9;&#x5B9A;&#x522B;&#x540D;&#x7684;&#x5355;&#x5217;FROM&#x5B50;&#x53E5;&#xFF0C;&#x5176;&#x4E2D;&#x5217;&#x672C;&#x8EAB;&#x662F;&#x533F;&#x540D;&#x547D;&#x540D;&#x7684;&#x3002;<a class="changeset-link headerlink reference internal" href="#change-aaaa4815736728bec50c929a09c7fa5a">&#xB6;</a></span></p><p><span class="yiyi-st" id="yiyi-365">&#x53C2;&#x8003;&#x6587;&#x732E;&#xFF1A;<a class="reference external" href="http://www.sqlalchemy.org/trac/ticket/3137">&#xFF03;3137</a></span></p></li></ul></div><div class="section" id="change-0.9.8-mysql"><h3><span class="yiyi-st" id="yiyi-366">MySQL&#x7684;<a class="headerlink" href="#change-0.9.8-mysql" title="Permalink to this headline">&#xB6; T0&gt;</a></span></h3><ul class="simple"><li><p id="change-0.9.8-16"><span class="yiyi-st" id="yiyi-367"><span class="target" id="change-32126a623ef93ac44e3e9243d1260fca"><strong>[mysql] [bug] [mysqlconnector] </strong></span>Mysqlconnector as of version 2.0, probably as a side effect of the python 3 merge, now does not expect percent signs (e.g. as used as the modulus operator and others) to be doubled, even when using the &#x201C;pyformat&#x201D; bound parameter format (this change is not documented by Mysqlconnector). </span><span class="yiyi-st" id="yiyi-368">&#x5F53;&#x68C0;&#x6D4B;&#x6A21;&#x8FD0;&#x7B97;&#x7B26;&#x662F;&#x5426;&#x5E94;&#x8BE5;&#x5448;&#x73B0;&#x4E3A;<code class="docutils literal"><span class="pre">%%</span></code>&#x6216;<code class="docutils literal"><span class="pre">%</span></code>&#x65F6;&#xFF0C;&#x65B9;&#x8A00;&#x73B0;&#x5728;&#x68C0;&#x67E5;py2k&#x548C;mysqlconnector&#x5C0F;&#x4E8E;2.0&#x7248;&#x3002;<a class="changeset-link headerlink reference internal" href="#change-32126a623ef93ac44e3e9243d1260fca">&#xB6;</a></span></p><p></p></li><li><p id="change-0.9.8-17"><span class="yiyi-st" id="yiyi-369"><span class="target" id="change-84da2ff9c9a80a77a2cc999ec3dfcf9e"><strong>[mysql] [bug] [mysqlconnector] </strong></span> Unicode SQL&#x73B0;&#x5728;&#x4F20;&#x9012;&#x7ED9;MySQLconnector 2.0&#x53CA;&#x66F4;&#x9AD8;&#x7248;&#x672C;&#xFF1B;&#x5BF9;&#x4E8E;Py2k&#x548C;MySQL <2.0，字符串被编码。<a class="changeset-link headerlink reference internal" href="#change-84da2ff9c9a80a77a2cc999ec3dfcf9e">&#xB6;</2.0，字符串被编码。<a></span></p><p></p></li></ul></div><div class="section" id="change-0.9.8-sqlite"><h3><span class="yiyi-st" id="yiyi-370">&#x6E90;&#x7801;<a class="headerlink" href="#change-0.9.8-sqlite" title="Permalink to this headline">&#xB6; T0&gt;</a></span></h3><ul class="simple"><li><p id="change-0.9.8-18"><span class="yiyi-st" id="yiyi-371"><span class="target" id="change-fa653d4ec018e069a52b2268725c5b88"><strong>[sqlite] [bug] </strong></span>When selecting from a UNION using an attached database file, the pysqlite driver reports column names in cursor.description as &#x2018;dbname.tablename.colname&#x2019;, instead of &#x2018;tablename.colname&#x2019; as it normally does for a UNION (note that it&#x2019;s supposed to just be &#x2018;colname&#x2019; for both, but we work around it). </span><span class="yiyi-st" id="yiyi-372">&#x6B64;&#x5904;&#x7684;&#x5217;&#x8F6C;&#x6362;&#x903B;&#x8F91;&#x5DF2;&#x88AB;&#x8C03;&#x6574;&#x4E3A;&#x68C0;&#x7D22;&#x6700;&#x53F3;&#x4FA7;&#x7684;&#x6807;&#x8BB0;&#xFF0C;&#x800C;&#x4E0D;&#x662F;&#x7B2C;&#x4E8C;&#x4E2A;&#x6807;&#x8BB0;&#xFF0C;&#x56E0;&#x6B64;&#x5B83;&#x9002;&#x7528;&#x4E8E;&#x8FD9;&#x4E24;&#x79CD;&#x60C5;&#x51B5;&#x3002;</span><span class="yiyi-st" id="yiyi-373">&#x89E3;&#x51B3;&#x65B9;&#x6CD5;&#x793C;&#x8C8C;Tony Roberts&#x3002;<a class="changeset-link headerlink reference internal" href="#change-fa653d4ec018e069a52b2268725c5b88">&#xB6;</a></span></p><p><span class="yiyi-st" id="yiyi-374">&#x53C2;&#x8003;&#x6587;&#x732E;&#xFF1A;<a class="reference external" href="http://www.sqlalchemy.org/trac/ticket/3211">&#xFF03;3211</a></span></p></li></ul></div><div class="section" id="change-0.9.8-mssql"><h3><span class="yiyi-st" id="yiyi-375">MSSQL <a class="headerlink" href="#change-0.9.8-mssql" title="Permalink to this headline">&#xB6; T0&gt;</a></span></h3><ul class="simple"><li><p id="change-0.9.8-19"><span class="yiyi-st" id="yiyi-376"><span class="target" id="change-80d8c2f1d6da858394e3f7fcf143fa10"><strong>[mssql] [bug] </strong></span>&#x4FEE;&#x590D;&#x4E86;pymssql&#x65B9;&#x8A00;&#x4E2D;&#x7684;&#x7248;&#x672C;&#x5B57;&#x7B26;&#x4E32;&#x68C0;&#x6D4B;&#x95EE;&#x9898;&#xFF0C;&#x4EE5;&#x4FBF;&#x4E0E;Microsoft SQL Azure&#x4E00;&#x8D77;&#x4F7F;&#x7528;&#xFF0C;&#x5B83;&#x5C06;&#x5355;&#x8BCD;&#x201C;SQL Server&#x201D;&#x66F4;&#x6539;&#x4E3A;&#x201C;SQL Azure&#x201D;&#x3002;<a class="changeset-link headerlink reference internal" href="#change-80d8c2f1d6da858394e3f7fcf143fa10">&#xB6; t2 &gt;</a></span></p><p><span class="yiyi-st" id="yiyi-377">&#x53C2;&#x8003;&#x6587;&#x732E;&#xFF1A;<a class="reference external" href="http://www.sqlalchemy.org/trac/ticket/3151">&#xFF03;3151</a></span></p></li></ul></div><div class="section" id="change-0.9.8-oracle"><h3><span class="yiyi-st" id="yiyi-378">&#x9884;&#x8A00;<a class="headerlink" href="#change-0.9.8-oracle" title="Permalink to this headline">&#xB6; T0&gt;</a></span></h3><ul class="simple"><li><p id="change-0.9.8-20"><span class="yiyi-st" id="yiyi-379"><span class="target" id="change-f3121682a918ac059e902d14e81d0d54"><strong>[oracle] [bug] </strong></span>Fixed long-standing bug in Oracle dialect where bound parameter names that started with numbers would not be quoted, as Oracle doesn&#x2019;t like numerics in bound parameter names.<a class="changeset-link headerlink reference internal" href="#change-f3121682a918ac059e902d14e81d0d54">&#xB6;</a></span></p><p><span class="yiyi-st" id="yiyi-380">&#x53C2;&#x8003;&#x6587;&#x732E;&#xFF1A;<a class="reference external" href="http://www.sqlalchemy.org/trac/ticket/2138">&#xFF03;2138</a></span></p></li></ul></div><div class="section" id="change-0.9.8-misc"><h3><span class="yiyi-st" id="yiyi-381">&#x6742;&#x9879;<a class="headerlink" href="#change-0.9.8-misc" title="Permalink to this headline">&#xB6; T0&gt;</a></span></h3><ul class="simple"><li><p id="change-0.9.8-21"><span class="yiyi-st" id="yiyi-382"><span class="target" id="change-1be20931c5cc779a5512e9e3ed985a11"><strong>[bug] [declarative] </strong></span>Fixed an unlikely race condition observed in some exotic end-user setups, where the attempt to check for &#x201C;duplicate class name&#x201D; in declarative would hit upon a not-totally-cleaned-up weak reference related to some other class being removed; the check here now ensures the weakref still references an object before calling upon it further.<a class="changeset-link headerlink reference internal" href="#change-1be20931c5cc779a5512e9e3ed985a11">&#xB6;</a></span></p><p><span class="yiyi-st" id="yiyi-383">&#x53C2;&#x8003;&#x6587;&#x732E;&#xFF1A;<a class="reference external" href="http://www.sqlalchemy.org/trac/ticket/3208">&#xFF03;3208</a></span></p></li><li><p id="change-0.9.8-22"><span class="yiyi-st" id="yiyi-384"><span class="target" id="change-f63e94a1795bd303f88294c462bd3b95"><strong>[bug] [ext] </strong></span>&#x4FEE;&#x6B63;&#x4E86;&#x8BA2;&#x8D2D;&#x6E05;&#x5355;&#x4E2D;&#x7684;bug&#xFF0C;&#x5982;&#x679C;reorder_on_append&#x6807;&#x5FD7;&#x88AB;&#x8BBE;&#x7F6E;&#x4E3A;True&#xFF0C;&#x5219;&#x5728;&#x6536;&#x96C6;&#x66FF;&#x6362;&#x4E8B;&#x4EF6;&#x671F;&#x95F4;&#x5C06;&#x629B;&#x51FA;&#x7269;&#x54C1;&#x7684;&#x987A;&#x5E8F;&#x3002;</span><span class="yiyi-st" id="yiyi-385">&#x8BE5;&#x4FEE;&#x590D;&#x786E;&#x4FDD;&#x6392;&#x5E8F;&#x5217;&#x8868;&#x4EC5;&#x5F71;&#x54CD;&#x4E0E;&#x8BE5;&#x5BF9;&#x8C61;&#x663E;&#x5F0F;&#x5173;&#x8054;&#x7684;&#x5217;&#x8868;&#x3002;<a class="changeset-link headerlink reference internal" href="#change-f63e94a1795bd303f88294c462bd3b95">&#xB6;</a></span></p><p><span class="yiyi-st" id="yiyi-386">&#x53C2;&#x8003;&#x6587;&#x732E;&#xFF1A;<a class="reference external" href="http://www.sqlalchemy.org/trac/ticket/3191">&#xFF03;3191</a></span></p></li><li><p id="change-0.9.8-23"><span class="yiyi-st" id="yiyi-387">&#x4FEE;&#x6B63;&#x4E86;<a class="reference internal" href="orm_extensions_mutable.html#sqlalchemy.ext.mutable.MutableDict" title="sqlalchemy.ext.mutable.MutableDict"><code class="xref py py-class docutils literal"><span class="pre">ext.mutable.MutableDict</span></code></a>&#x65E0;&#x6CD5;&#x5B9E;&#x73B0;<code class="docutils literal"><span class="pre">update()</span></code>&#x5B57;&#x5178;&#x65B9;&#x6CD5;&#x7684;&#x9519;&#x8BEF;&#xFF0C;&#x56E0;&#x6B64;&#x65E0;&#x6CD5;&#x6355;&#x6349;&#x66F4;&#x6539;&#x3002;<span class="target" id="change-8d9ef3d42e12a3991355d6db0d7e0590"><strong>[bug] [ext] </strong></span></span><span class="yiyi-st" id="yiyi-388">&#x62C9;&#x8BF7;&#x6C42;&#x9A6C;&#x7279;Chisholm&#x3002;<a class="changeset-link headerlink reference internal" href="#change-8d9ef3d42e12a3991355d6db0d7e0590">&#xB6;</a></span></p><p></p></li><li><p id="change-0.9.8-24"><span class="yiyi-st" id="yiyi-389"><span class="target" id="change-2995e85c7b79e5acb0500b5f7bef1116"><strong>[bug] [ext] </strong></span>Fixed bug where a custom subclass of <a class="reference internal" href="orm_extensions_mutable.html#sqlalchemy.ext.mutable.MutableDict" title="sqlalchemy.ext.mutable.MutableDict"><code class="xref py py-class docutils literal"><span class="pre">ext.mutable.MutableDict</span></code></a> would not show up in a &#x201C;coerce&#x201D; operation, and would instead return a plain <a class="reference internal" href="orm_extensions_mutable.html#sqlalchemy.ext.mutable.MutableDict" title="sqlalchemy.ext.mutable.MutableDict"><code class="xref py py-class docutils literal"><span class="pre">ext.mutable.MutableDict</span></code></a>. </span><span class="yiyi-st" id="yiyi-390">&#x62C9;&#x8BF7;&#x6C42;&#x9A6C;&#x7279;Chisholm&#x3002;<a class="changeset-link headerlink reference internal" href="#change-2995e85c7b79e5acb0500b5f7bef1116">&#xB6;</a></span></p><p></p></li><li><p id="change-0.9.8-25"><span class="yiyi-st" id="yiyi-391"><span class="target" id="change-45bc7ea621ab2ad2ee138f5a0f4af495"><strong>[bug] [pool] </strong></span>Fixed bug in connection pool logging where the &#x201C;connection checked out&#x201D; debug logging message would not emit if the logging were set up using <code class="docutils literal"><span class="pre">logging.setLevel()</span></code>, rather than using the <code class="docutils literal"><span class="pre">echo_pool</span></code> flag. </span><span class="yiyi-st" id="yiyi-392">&#x5DF2;&#x7ECF;&#x6DFB;&#x52A0;&#x4E86;&#x6D4B;&#x8BD5;&#x6765;&#x58F0;&#x660E;&#x8FD9;&#x4E2A;&#x65E5;&#x5FD7;&#x8BB0;&#x5F55;&#x3002;</span><span class="yiyi-st" id="yiyi-393">&#x8FD9;&#x662F;&#x5728;0.9.0&#x4E2D;&#x5F15;&#x5165;&#x7684;&#x56DE;&#x5F52;&#x3002;<a class="changeset-link headerlink reference internal" href="#change-45bc7ea621ab2ad2ee138f5a0f4af495">&#xB6;</a></span></p><p><span class="yiyi-st" id="yiyi-394">&#x53C2;&#x8003;&#x6587;&#x732E;&#xFF1A;<a class="reference external" href="http://www.sqlalchemy.org/trac/ticket/3168">&#xFF03;3168</a></span></p></li></ul></div></div><div class="section" id="change-0.9.7"><h2><span class="yiyi-st" id="yiyi-396">0.9.7 <a class="headerlink" href="#change-0.9.7" title="Permalink to this headline">&#xB6; T0&gt;</a></span></h2><span class="yiyi-st" id="yiyi-471">&#x53D1;&#x5E03;&#x65E5;&#x671F;&#xFF1A;2014&#x5E74;7&#x6708;22&#x65E5;</span><div class="section" id="change-0.9.7-orm"><h3><span class="yiyi-st" id="yiyi-397">ORM <a class="headerlink" href="#change-0.9.7-orm" title="Permalink to this headline">&#xB6; T0&gt;</a></span></h3><ul class="simple"><li><p id="change-0.9.7-0"><span class="yiyi-st" id="yiyi-398"><span class="target" id="change-6d4965c4def4ed6fe2cd5b1dc72055a2"><strong>[orm] [bug] [eagerloading] </strong></span>Fixed a regression caused by <a class="reference external" href="http://www.sqlalchemy.org/trac/ticket/2976">#2976</a> released in 0.9.4 where the &#x201C;outer join&#x201D; propagation along a chain of joined eager loads would incorrectly convert an &#x201C;inner join&#x201D; along a sibling join path into an outer join as well, when only descendant paths should be receiving the &#x201C;outer join&#x201D; propagation; additionally, fixed related issue where &#x201C;nested&#x201D; join propagation would take place inappropriately between two sibling join paths.<a class="changeset-link headerlink reference internal" href="#change-6d4965c4def4ed6fe2cd5b1dc72055a2">&#xB6;</a></span></p><p><span class="yiyi-st" id="yiyi-399">&#x53C2;&#x8003;&#x6587;&#x732E;&#xFF1A;<a class="reference external" href="http://www.sqlalchemy.org/trac/ticket/3131">&#xFF03;3131</a></span></p></li><li><p id="change-0.9.7-1"><span class="yiyi-st" id="yiyi-400"><span class="target" id="change-61d46ddadd1243c644e4afbb5051ce5d"><strong>[orm] [bug] </strong></span>Fixed a regression from 0.9.0 due to <a class="reference external" href="http://www.sqlalchemy.org/trac/ticket/2736">#2736</a> where the <a class="reference internal" href="orm_query.html#sqlalchemy.orm.query.Query.select_from" title="sqlalchemy.orm.query.Query.select_from"><code class="xref py py-meth docutils literal"><span class="pre">Query.select_from()</span></code></a> method no longer set up the &#x201C;from entity&#x201D; of the <a class="reference internal" href="orm_query.html#sqlalchemy.orm.query.Query" title="sqlalchemy.orm.query.Query"><code class="xref py py-class docutils literal"><span class="pre">Query</span></code></a> object correctly, so that subsequent <a class="reference internal" href="orm_query.html#sqlalchemy.orm.query.Query.filter_by" title="sqlalchemy.orm.query.Query.filter_by"><code class="xref py py-meth docutils literal"><span class="pre">Query.filter_by()</span></code></a> or <a class="reference internal" href="orm_query.html#sqlalchemy.orm.query.Query.join" title="sqlalchemy.orm.query.Query.join"><code class="xref py py-meth docutils literal"><span class="pre">Query.join()</span></code></a> calls would fail to check the appropriate &#x201C;from&#x201D; entity when searching for attributes by string name.<a class="changeset-link headerlink reference internal" href="#change-61d46ddadd1243c644e4afbb5051ce5d">&#xB6;</a></span></p><p><span class="yiyi-st" id="yiyi-401">&#x53C2;&#x8003;&#x6587;&#x732E;&#xFF1A;<a class="reference external" href="http://www.sqlalchemy.org/trac/ticket/2736">&#xFF03;2736</a>&#xFF0C;<a class="reference external" href="http://www.sqlalchemy.org/trac/ticket/3083">&#xFF03;3083</a></span></p></li><li><p id="change-0.9.7-2"><span class="yiyi-st" id="yiyi-402"><span class="target" id="change-93ffe57d97cc97b691e1697f532fa023"><strong>[orm] [bug] </strong></span>The &#x201C;evaluator&#x201D; for query.update()/delete() won&#x2019;t work with multi-table updates, and needs to be set to <cite>synchronize_session=False</cite> or <cite>synchronize_session=&#x2019;fetch&#x2019;</cite>; a warning is now emitted. </span><span class="yiyi-st" id="yiyi-403">&#x5728;1.0&#x4E2D;&#xFF0C;&#x8FD9;&#x5C06;&#x88AB;&#x63D0;&#x5347;&#x4E3A;&#x4E00;&#x4E2A;&#x5B8C;&#x6574;&#x7684;&#x4F8B;&#x5916;&#x3002;<a class="changeset-link headerlink reference internal" href="#change-93ffe57d97cc97b691e1697f532fa023">&#xB6;</a></span></p><p><span class="yiyi-st" id="yiyi-404">&#x53C2;&#x8003;&#x6587;&#x732E;&#xFF1A;<a class="reference external" href="http://www.sqlalchemy.org/trac/ticket/3117">&#xFF03;3117</a></span></p></li><li><p id="change-0.9.7-3"><span class="yiyi-st" id="yiyi-405"><span class="target" id="change-0f516bc305a847469d43e0869d992cdd"><strong>[orm] [bug] </strong></span>Fixed bug where items that were persisted, deleted, or had a primary key change within a savepoint block would not participate in being restored to their former state (not in session, in session, previous PK) after the outer transaction were rolled back.<a class="changeset-link headerlink reference internal" href="#change-0f516bc305a847469d43e0869d992cdd">&#xB6;</a></span></p><p><span class="yiyi-st" id="yiyi-406">&#x53C2;&#x8003;&#x6587;&#x732E;&#xFF1A;<a class="reference external" href="http://www.sqlalchemy.org/trac/ticket/3108">&#xFF03;3108</a></span></p></li><li><p id="change-0.9.7-4"><span class="yiyi-st" id="yiyi-407"><span class="target" id="change-94424863efab08f99293f7724de969bf"><strong>[orm] [bug] </strong></span>Fixed bug in subquery eager loading in conjunction with <a class="reference internal" href="orm_inheritance.html#sqlalchemy.orm.with_polymorphic" title="sqlalchemy.orm.with_polymorphic"><code class="xref py py-func docutils literal"><span class="pre">with_polymorphic()</span></code></a>, the targeting of entities and columns in the subquery load has been made more accurate with respect to this type of entity and others.<a class="changeset-link headerlink reference internal" href="#change-94424863efab08f99293f7724de969bf">&#xB6;</a></span></p><p><span class="yiyi-st" id="yiyi-408">&#x53C2;&#x8003;&#x6587;&#x732E;&#xFF1A;<a class="reference external" href="http://www.sqlalchemy.org/trac/ticket/3106">&#xFF03;3106</a></span></p></li><li><p id="change-0.9.7-5"><span class="yiyi-st" id="yiyi-409"><span class="target" id="change-cfc1f15148c259394c9b3b373392bc15"><strong>[orm] [bug] </strong></span>&#x4FEE;&#x590D;&#x4E86;&#x6D89;&#x53CA;&#x52A8;&#x6001;&#x5C5E;&#x6027;&#x7684;&#x9519;&#x8BEF;&#xFF0C;&#x8FD9;&#x53C8;&#x662F;&#x4ECE;&#x7248;&#x672C;0.9.5&#x5F00;&#x59CB;&#x7684;<a class="reference external" href="http://www.sqlalchemy.org/trac/ticket/3060">&#xFF03;3060</a>&#x7684;&#x56DE;&#x5F52;&#x3002;</span><span class="yiyi-st" id="yiyi-410">&#x4E0E;lazy =&apos;dynamic&apos;&#x7684;&#x81EA;&#x5F15;&#x7528;&#x5173;&#x7CFB;&#x4F1A;&#x5728;flush&#x64CD;&#x4F5C;&#x4E2D;&#x5F15;&#x53D1;TypeError&#x3002;<a class="changeset-link headerlink reference internal" href="#change-cfc1f15148c259394c9b3b373392bc15">&#xB6;</a></span></p><p><span class="yiyi-st" id="yiyi-411">&#x53C2;&#x8003;&#x6587;&#x732E;&#xFF1A;<a class="reference external" href="http://www.sqlalchemy.org/trac/ticket/3099">&#xFF03;3099</a></span></p></li></ul></div><div class="section" id="change-0.9.7-engine"><h3><span class="yiyi-st" id="yiyi-412">&#x53D1;&#x52A8;&#x673A;<a class="headerlink" href="#change-0.9.7-engine" title="Permalink to this headline">&#xB6; T0&gt;</a></span></h3><ul class="simple"><li><p id="change-0.9.7-6"><span class="yiyi-st" id="yiyi-413"><span class="target" id="change-4062d0afa2a67360ac9e7c97c79f35d4"><strong>[engine] [feature] </strong></span>Added new event <a class="reference internal" href="core_events.html#sqlalchemy.events.ConnectionEvents.handle_error" title="sqlalchemy.events.ConnectionEvents.handle_error"><code class="xref py py-meth docutils literal"><span class="pre">ConnectionEvents.handle_error()</span></code></a>, a more fully featured and comprehensive replacement for <a class="reference internal" href="core_events.html#sqlalchemy.events.ConnectionEvents.dbapi_error" title="sqlalchemy.events.ConnectionEvents.dbapi_error"><code class="xref py py-meth docutils literal"><span class="pre">ConnectionEvents.dbapi_error()</span></code></a>.<a class="changeset-link headerlink reference internal" href="#change-4062d0afa2a67360ac9e7c97c79f35d4">&#xB6;</a></span></p><p><span class="yiyi-st" id="yiyi-414">&#x53C2;&#x8003;&#x6587;&#x732E;&#xFF1A;<a class="reference external" href="http://www.sqlalchemy.org/trac/ticket/3076">&#xFF03;3076</a></span></p></li></ul></div><div class="section" id="change-0.9.7-sql"><h3><span class="yiyi-st" id="yiyi-415">SQL <a class="headerlink" href="#change-0.9.7-sql" title="Permalink to this headline">&#xB6; T0&gt;</a></span></h3><ul class="simple"><li><p id="change-0.9.7-7"><span class="yiyi-st" id="yiyi-416"><span class="target" id="change-08a78793c26fd10b053486a483ebad9f"><strong>[sql] [bug] </strong></span>Fixed bug in <a class="reference internal" href="core_type_basics.html#sqlalchemy.types.Enum" title="sqlalchemy.types.Enum"><code class="xref py py-class docutils literal"><span class="pre">Enum</span></code></a> and other <a class="reference internal" href="core_type_basics.html#sqlalchemy.types.SchemaType" title="sqlalchemy.types.SchemaType"><code class="xref py py-class docutils literal"><span class="pre">SchemaType</span></code></a> subclasses where direct association of the type with a <a class="reference internal" href="core_metadata.html#sqlalchemy.schema.MetaData" title="sqlalchemy.schema.MetaData"><code class="xref py py-class docutils literal"><span class="pre">MetaData</span></code></a> would lead to a hang when events (like create events) were emitted on the <a class="reference internal" href="core_metadata.html#sqlalchemy.schema.MetaData" title="sqlalchemy.schema.MetaData"><code class="xref py py-class docutils literal"><span class="pre">MetaData</span></code></a>.<a class="changeset-link headerlink reference internal" href="#change-08a78793c26fd10b053486a483ebad9f">&#xB6;</a></span></p><p><span class="yiyi-st" id="yiyi-417">&#x8FD9;&#x4E2A;&#x6539;&#x53D8;&#x4E5F;&#x88AB;<strong>&#x56DE;&#x9000;</strong>&#x4E3A;&#xFF1A;0.8.7</span></p><p><span class="yiyi-st" id="yiyi-418">&#x53C2;&#x8003;&#x6587;&#x732E;&#xFF1A;<a class="reference external" href="http://www.sqlalchemy.org/trac/ticket/3124">&#xFF03;3124</a></span></p></li><li><p id="change-0.9.7-8"><span class="yiyi-st" id="yiyi-419"><span class="target" id="change-be5c6a13348bdb50ab072eded4f844b3"><strong>[sql] [bug] </strong></span>Fixed a bug within the custom operator plus <a class="reference internal" href="core_type_api.html#sqlalchemy.types.TypeEngine.with_variant" title="sqlalchemy.types.TypeEngine.with_variant"><code class="xref py py-meth docutils literal"><span class="pre">TypeEngine.with_variant()</span></code></a> system, whereby using a <a class="reference internal" href="core_custom_types.html#sqlalchemy.types.TypeDecorator" title="sqlalchemy.types.TypeDecorator"><code class="xref py py-class docutils literal"><span class="pre">TypeDecorator</span></code></a> in conjunction with variant would fail with an MRO error when a comparison operator was used.<a class="changeset-link headerlink reference internal" href="#change-be5c6a13348bdb50ab072eded4f844b3">&#xB6;</a></span></p><p><span class="yiyi-st" id="yiyi-420">&#x8FD9;&#x4E2A;&#x6539;&#x53D8;&#x4E5F;&#x88AB;<strong>&#x56DE;&#x9000;</strong>&#x4E3A;&#xFF1A;0.8.7</span></p><p><span class="yiyi-st" id="yiyi-421">&#x53C2;&#x8003;&#x6587;&#x732E;&#xFF1A;<a class="reference external" href="http://www.sqlalchemy.org/trac/ticket/3102">&#xFF03;3102</a></span></p></li><li><p id="change-0.9.7-9"><span class="yiyi-st" id="yiyi-422"><span class="target" id="change-346b9ff8fbd8e4eac954bf271b4c6ad6"><strong>[sql] [bug] </strong></span>Fix bug in naming convention feature where using a check constraint convention that includes <code class="docutils literal"><span class="pre">constraint_name</span></code> would then force all <a class="reference internal" href="core_type_basics.html#sqlalchemy.types.Boolean" title="sqlalchemy.types.Boolean"><code class="xref py py-class docutils literal"><span class="pre">Boolean</span></code></a> and <a class="reference internal" href="core_type_basics.html#sqlalchemy.types.Enum" title="sqlalchemy.types.Enum"><code class="xref py py-class docutils literal"><span class="pre">Enum</span></code></a> types to require names as well, as these implicitly create a constraint, even if the ultimate target backend were one that does not require generation of the constraint such as Postgresql. </span><span class="yiyi-st" id="yiyi-423">&#x8FD9;&#x4E9B;&#x7279;&#x5B9A;&#x7EA6;&#x675F;&#x7684;&#x547D;&#x540D;&#x7EA6;&#x5B9A;&#x7684;&#x673A;&#x5236;&#x5DF2;&#x91CD;&#x65B0;&#x7EC4;&#x7EC7;&#xFF0C;&#x4EE5;&#x4FBF;&#x5728;DDL&#x7F16;&#x8BD1;&#x65F6;&#x5B8C;&#x6210;&#x547D;&#x540D;&#x786E;&#x5B9A;&#xFF0C;&#x800C;&#x4E0D;&#x662F;&#x5728;&#x7EA6;&#x675F;/&#x8868;&#x6784;&#x9020;&#x65F6;&#x5B8C;&#x6210;&#x547D;&#x4EE4;&#x3002;<a class="changeset-link headerlink reference internal" href="#change-346b9ff8fbd8e4eac954bf271b4c6ad6">&#xB6;</a></span></p><p><span class="yiyi-st" id="yiyi-424">&#x53C2;&#x8003;&#x6587;&#x732E;&#xFF1A;<a class="reference external" href="http://www.sqlalchemy.org/trac/ticket/3067">&#xFF03;3067</a></span></p></li><li><p id="change-0.9.7-10"><span class="yiyi-st" id="yiyi-425"><span class="target" id="change-b79d7dd3f1ca1273c1284f2b2e8c296d"><strong>[sql] [bug] </strong></span>Fixed bug in common table expressions whereby positional bound parameters could be expressed in the wrong final order when CTEs were nested in certain ways.<a class="changeset-link headerlink reference internal" href="#change-b79d7dd3f1ca1273c1284f2b2e8c296d">&#xB6;</a></span></p><p><span class="yiyi-st" id="yiyi-426">&#x53C2;&#x8003;&#x6587;&#x732E;&#xFF1A;<a class="reference external" href="http://www.sqlalchemy.org/trac/ticket/3090">&#xFF03;3090</a></span></p></li><li><p id="change-0.9.7-11"><span class="yiyi-st" id="yiyi-427">&#x4FEE;&#x6B63;&#x4E86;&#x591A;&#x503C;<a class="reference internal" href="core_dml.html#sqlalchemy.sql.expression.Insert" title="sqlalchemy.sql.expression.Insert"><code class="xref py py-class docutils literal"><span class="pre">Insert</span></code></a>&#x6784;&#x9020;&#x65E0;&#x6CD5;&#x68C0;&#x67E5;&#x7ED9;&#x5B9A;&#x7684;&#x5B57;&#x9762;SQL&#x8868;&#x8FBE;&#x5F0F;&#x7B2C;&#x4E00;&#x4E2A;&#x4EE5;&#x540E;&#x7684;&#x503C;&#x7684;&#x95EE;&#x9898;&#x3002;<a class="changeset-link headerlink reference internal" href="#change-9f3a810c852f582cfa2eef2e268ec4ef"><span class="target" id="change-9f3a810c852f582cfa2eef2e268ec4ef"><strong>[sql] [bug] </strong></span></a></span></p><p><span class="yiyi-st" id="yiyi-428">&#x53C2;&#x8003;&#x6587;&#x732E;&#xFF1A;<a class="reference external" href="http://www.sqlalchemy.org/trac/ticket/3069">&#xFF03;3069</a></span></p></li><li><p id="change-0.9.7-12"><span class="yiyi-st" id="yiyi-429"><span class="target" id="change-c80817d5fa95f2678e1eab3edb2eae19"><strong>[sql] [bug] </strong></span>&#x5728;Python&#x7248;&#x672C;<2.6.5的dialect_kwargs迭代中添加了一个“str()”步骤，解决了“no unicode="" keyword="" arg”关键字在一些反射过程中引用。<a="" class="changeset-link headerlink reference internal" href="#change-c80817d5fa95f2678e1eab3edb2eae19">&#xB6;</2.6.5的dialect_kwargs迭代中添加了一个“str()”步骤，解决了“no></span></p><p><span class="yiyi-st" id="yiyi-430">&#x53C2;&#x8003;&#x6587;&#x732E;&#xFF1A;<a class="reference external" href="http://www.sqlalchemy.org/trac/ticket/3123">&#xFF03;3123</a></span></p></li><li><p id="change-0.9.7-13"><span class="yiyi-st" id="yiyi-431"><span class="target" id="change-8b1c78cb8eeb1975b8c03e0275f0af7b"><strong>[sql] [bug] </strong></span>The <a class="reference internal" href="core_type_api.html#sqlalchemy.types.TypeEngine.with_variant" title="sqlalchemy.types.TypeEngine.with_variant"><code class="xref py py-meth docutils literal"><span class="pre">TypeEngine.with_variant()</span></code></a> method will now accept a type class as an argument which is internally converted to an instance, using the same convention long established by other constructs such as <a class="reference internal" href="core_metadata.html#sqlalchemy.schema.Column" title="sqlalchemy.schema.Column"><code class="xref py py-class docutils literal"><span class="pre">Column</span></code></a>.<a class="changeset-link headerlink reference internal" href="#change-8b1c78cb8eeb1975b8c03e0275f0af7b">&#xB6;</a></span></p><p><span class="yiyi-st" id="yiyi-432">&#x53C2;&#x8003;&#x6587;&#x732E;&#xFF1A;<a class="reference external" href="http://www.sqlalchemy.org/trac/ticket/3122">&#xFF03;3122</a></span></p></li></ul></div><div class="section" id="change-0.9.7-postgresql"><h3><span class="yiyi-st" id="yiyi-433">&#x7684;PostgreSQL <a class="headerlink" href="#change-0.9.7-postgresql" title="Permalink to this headline">&#xB6; T0&gt;</a></span></h3><ul class="simple"><li><p id="change-0.9.7-14"><span class="yiyi-st" id="yiyi-434"><span class="target" id="change-d5177977fbaffd2ad0990c4ebf70a9ae"><strong>[postgresql] [feature] </strong></span>&#x6DFB;&#x52A0;kw&#x53C2;&#x6570;<code class="docutils literal"><span class="pre">postgresql_regconfig</span></code>&#x5230;<a class="reference internal" href="core_sqlelement.html#sqlalchemy.sql.operators.ColumnOperators.match" title="sqlalchemy.sql.operators.ColumnOperators.match"><code class="xref py py-meth docutils literal"><span class="pre">ColumnOperators.match()</span></code></a>&#x8FD0;&#x7B97;&#x7B26;&#xFF0C;&#x5141;&#x8BB8;&#x6307;&#x5B9A;&#x201C;reg config&#x201D;&#x53C2;&#x6570;&#x53D1;&#x9001;&#x5230;<code class="docutils literal"><span class="pre">to_tsquery()</span></code>&#x51FD;&#x6570;&#x3002;</span><span class="yiyi-st" id="yiyi-435">&#x8BF7;&#x6C42;Jonathan Vanasco&#x63D0;&#x4F9B;&#x3002;<a class="changeset-link headerlink reference internal" href="#change-d5177977fbaffd2ad0990c4ebf70a9ae">&#xB6;</a></span></p><p><span class="yiyi-st" id="yiyi-436">References: <a class="reference external" href="http://www.sqlalchemy.org/trac/ticket/3078">#3078</a>, <a class="reference external" href="https://bitbucket.org/zzzeek/sqlalchemy/pull-request/22">pull request bitbucket:22</a></span></p></li><li><p id="change-0.9.7-15"><span class="yiyi-st" id="yiyi-437"><span class="target" id="change-b66794b4e3bffb82595c82694c32733b"><strong>[postgresql] [feature] </strong></span>&#x901A;&#x8FC7;<a class="reference internal" href="dialects_postgresql.html#sqlalchemy.dialects.postgresql.JSONB" title="sqlalchemy.dialects.postgresql.JSONB"><code class="xref py py-class docutils literal"><span class="pre">JSONB</span></code></a>&#x589E;&#x52A0;&#x4E86;&#x5BF9;Postgresql JSONB&#x7684;&#x652F;&#x6301;&#x3002;</span><span class="yiyi-st" id="yiyi-438">&#x8BF7;&#x6C42;&#x793C;&#x8C8C;Damian Dimmich&#x3002;<a class="changeset-link headerlink reference internal" href="#change-b66794b4e3bffb82595c82694c32733b">&#xB6;</a></span></p><p><span class="yiyi-st" id="yiyi-439">&#x53C2;&#x8003;&#x6587;&#x732E;&#xFF1A;<a class="reference external" href="https://github.com/zzzeek/sqlalchemy/pull/101">&#x8BF7;&#x6C42;github&#xFF1A;101</a></span></p></li><li><p id="change-0.9.7-16"><span class="yiyi-st" id="yiyi-440"><span class="target" id="change-42d4d4dfd75600d1aca8205469504bb4"><strong>[postgresql] [bug] [pg8000] </strong></span>&#x4FEE;&#x6B63;&#x4E86;0.9.5&#x7248;&#x672C;&#x4E2D;&#x65B0;&#x589E;&#x7684;pg8000&#x9694;&#x79BB;&#x7EA7;&#x522B;&#x529F;&#x80FD;&#x5BFC;&#x81F4;&#x7684;&#x9519;&#x8BEF;&#xFF0C;&#x5176;&#x4E2D;&#x5F15;&#x64CE;&#x7EA7;&#x522B;&#x7684;&#x9694;&#x79BB;&#x7EA7;&#x522B;&#x53C2;&#x6570;&#x4F1A;&#x5728;&#x8FDE;&#x63A5;&#x65F6;&#x4EA7;&#x751F;&#x9519;&#x8BEF;<a class="changeset-link headerlink reference internal" href="#change-42d4d4dfd75600d1aca8205469504bb4">&#xB6; t2 &gt;</a></span></p><p><span class="yiyi-st" id="yiyi-441">&#x53C2;&#x8003;&#x6587;&#x732E;&#xFF1A;<a class="reference external" href="http://www.sqlalchemy.org/trac/ticket/3134">&#xFF03;3134</a></span></p></li></ul></div><div class="section" id="change-0.9.7-mysql"><h3><span class="yiyi-st" id="yiyi-442">MySQL&#x7684;<a class="headerlink" href="#change-0.9.7-mysql" title="Permalink to this headline">&#xB6; T0&gt;</a></span></h3><ul class="simple"><li><p id="change-0.9.7-17"><span class="yiyi-st" id="yiyi-443"><span class="target" id="change-1548add72e7bdd221e888a5b3d6d9302"><strong>[mysql] [bug] </strong></span>MySQL error 2014 &#x201C;commands out of sync&#x201D; appears to be raised as a ProgrammingError, not OperationalError, in modern MySQL-Python versions; all MySQL error codes that are tested for &#x201C;is disconnect&#x201D; are now checked within OperationalError and ProgrammingError regardless.<a class="changeset-link headerlink reference internal" href="#change-1548add72e7bdd221e888a5b3d6d9302">&#xB6;</a></span></p><p><span class="yiyi-st" id="yiyi-444">&#x8FD9;&#x4E2A;&#x6539;&#x53D8;&#x4E5F;&#x88AB;<strong>&#x56DE;&#x9000;</strong>&#x4E3A;&#xFF1A;0.8.7</span></p><p><span class="yiyi-st" id="yiyi-445">&#x53C2;&#x8003;&#x6587;&#x732E;&#xFF1A;<a class="reference external" href="http://www.sqlalchemy.org/trac/ticket/3101">&#xFF03;3101</a></span></p></li></ul></div><div class="section" id="change-0.9.7-sqlite"><h3><span class="yiyi-st" id="yiyi-446">&#x6E90;&#x7801;<a class="headerlink" href="#change-0.9.7-sqlite" title="Permalink to this headline">&#xB6; T0&gt;</a></span></h3><ul class="simple"><li><p id="change-0.9.7-18"><span class="yiyi-st" id="yiyi-447"><span class="target" id="change-5068035ad308233e769418ef305a1621"><strong>[sqlite] [bug] </strong></span>Fixed a SQLite join rewriting issue where a subquery that is embedded as a scalar subquery such as within an IN would receive inappropriate substitutions from the enclosing query, if the same table were present inside the subquery as were in the enclosing query such as in a joined inheritance scenario.<a class="changeset-link headerlink reference internal" href="#change-5068035ad308233e769418ef305a1621">&#xB6;</a></span></p><p><span class="yiyi-st" id="yiyi-448">&#x53C2;&#x8003;&#x6587;&#x732E;&#xFF1A;<a class="reference external" href="http://www.sqlalchemy.org/trac/ticket/3130">&#xFF03;3130</a></span></p></li></ul></div><div class="section" id="change-0.9.7-mssql"><h3><span class="yiyi-st" id="yiyi-449">MSSQL <a class="headerlink" href="#change-0.9.7-mssql" title="Permalink to this headline">&#xB6; T0&gt;</a></span></h3><ul class="simple"><li><p id="change-0.9.7-19"><span class="yiyi-st" id="yiyi-450"><span class="target" id="change-e5ab682c0b41fbfd0dcfb6c0fa0578f2"><strong>[mssql] [feature] </strong></span>&#x4E3A;SQL Server 2008&#x542F;&#x7528;&#x201C;&#x591A;&#x503C;&#x63D2;&#x5165;&#x201D;&#x3002;</span><span class="yiyi-st" id="yiyi-451">&#x62C9;&#x5C14;&#x8BF7;&#x6C42;Albert Cervin&#x793C;&#x8C8C;&#x3002;</span><span class="yiyi-st" id="yiyi-452">&#x8FD8;&#x6269;&#x5C55;&#x4E86;&#x5BF9;&#x201C;IDENTITY INSERT&#x201D;&#x6A21;&#x5F0F;&#x7684;&#x68C0;&#x67E5;&#xFF0C;&#x4EE5;&#x4FBF;&#x5728;&#x8BED;&#x53E5;&#x7684;VALUE&#x5B50;&#x53E5;&#x4E2D;&#x5B58;&#x5728;&#x8EAB;&#x4EFD;&#x94A5;&#x5319;&#x65F6;&#x5305;&#x542B;&#x8BE5;&#x8EAB;&#x4EFD;&#x94A5;&#x5319;&#x3002;<a class="changeset-link headerlink reference internal" href="#change-e5ab682c0b41fbfd0dcfb6c0fa0578f2">&#xB6;</a></span></p><p><span class="yiyi-st" id="yiyi-453">&#x53C2;&#x8003;&#x6587;&#x732E;&#xFF1A;<a class="reference external" href="https://github.com/zzzeek/sqlalchemy/pull/98">&#x8BF7;&#x6C42;github&#xFF1A;98</a></span></p></li><li><p id="change-0.9.7-20"><span class="yiyi-st" id="yiyi-454"><span class="target" id="change-d9cb352dd29f9a5adb545d81d0cac1c9"><strong>[mssql] [bug] </strong></span>Added statement encoding to the &#x201C;SET IDENTITY_INSERT&#x201D; statements which operate when an explicit INSERT is being interjected into an IDENTITY column, to support non-ascii table identifiers on drivers such as pyodbc + unix + py2k that don&#x2019;t support unicode statements.<a class="changeset-link headerlink reference internal" href="#change-d9cb352dd29f9a5adb545d81d0cac1c9">&#xB6;</a></span></p><p><span class="yiyi-st" id="yiyi-455">&#x8FD9;&#x4E2A;&#x6539;&#x53D8;&#x4E5F;&#x88AB;<strong>&#x56DE;&#x9000;</strong>&#x4E3A;&#xFF1A;0.8.7</span></p><p></p></li><li><p id="change-0.9.7-21"><span class="yiyi-st" id="yiyi-456"><span class="target" id="change-4f728a60ab19f0468d57cf1bf84e2b5a"><strong>[mssql] [bug] </strong></span>In the SQL Server pyodbc dialect, repaired the implementation for the <code class="docutils literal"><span class="pre">description_encoding</span></code> dialect parameter, which when not explicitly set was preventing cursor.description from being parsed correctly in the case of result sets that contained names in alternate encodings. </span><span class="yiyi-st" id="yiyi-457">&#x8FD9;&#x4E2A;&#x53C2;&#x6570;&#x4E0D;&#x5E94;&#x8BE5;&#x88AB;&#x7EE7;&#x7EED;&#x4F7F;&#x7528;&#x3002;<a class="changeset-link headerlink reference internal" href="#change-4f728a60ab19f0468d57cf1bf84e2b5a">&#xB6;</a></span></p><p><span class="yiyi-st" id="yiyi-458">&#x8FD9;&#x4E2A;&#x6539;&#x53D8;&#x4E5F;&#x88AB;<strong>&#x56DE;&#x9000;</strong>&#x4E3A;&#xFF1A;0.8.7</span></p><p><span class="yiyi-st" id="yiyi-459">&#x53C2;&#x8003;&#x6587;&#x732E;&#xFF1A;<a class="reference external" href="http://www.sqlalchemy.org/trac/ticket/3091">&#xFF03;3091</a></span></p></li><li><p id="change-0.9.7-22"><span class="yiyi-st" id="yiyi-460"><span class="target" id="change-82de60fa2e391061691dd22349c22f5e"><strong>[mssql] [bug] </strong></span>&#x4FEE;&#x590D;&#x4E86;&#x7531;<a class="reference external" href="http://www.sqlalchemy.org/trac/ticket/3025">&#xFF03;3025</a>&#x5F15;&#x8D77;&#x7684;0.9.5&#x7684;&#x56DE;&#x5F52;&#xFF0C;&#x5176;&#x4E2D;&#x7528;&#x4E8E;&#x786E;&#x5B9A;&#x201C;&#x9ED8;&#x8BA4;&#x6A21;&#x5F0F;&#x201D;&#x7684;&#x67E5;&#x8BE2;&#x5728;SQL Server 2000&#x4E2D;&#x65E0;&#x6548;&#x3002;</span><span class="yiyi-st" id="yiyi-461">&#x5BF9;&#x4E8E;SQL Server 2000&#xFF0C;&#x6211;&#x4EEC;&#x56DE;&#x5230;&#x7F3A;&#x7701;&#x65B9;&#x8A00;&#x7684;&#x201C;&#x6A21;&#x5F0F;&#x540D;&#x79F0;&#x201D;&#x53C2;&#x6570;&#xFF0C;&#x8BE5;&#x53C2;&#x6570;&#x662F;&#x53EF;&#x914D;&#x7F6E;&#x7684;&#xFF0C;&#x4F46;&#x9ED8;&#x8BA4;&#x4E3A;&apos;dbo&apos;&#x3002;<a class="changeset-link headerlink reference internal" href="#change-82de60fa2e391061691dd22349c22f5e">&#xB6;</a></span></p><p><span class="yiyi-st" id="yiyi-462">&#x53C2;&#x8003;&#x6587;&#x732E;&#xFF1A;<a class="reference external" href="http://www.sqlalchemy.org/trac/ticket/3025">&#xFF03;3025</a></span></p></li></ul></div><div class="section" id="change-0.9.7-oracle"><h3><span class="yiyi-st" id="yiyi-463">&#x9884;&#x8A00;<a class="headerlink" href="#change-0.9.7-oracle" title="Permalink to this headline">&#xB6; T0&gt;</a></span></h3><ul class="simple"><li><p id="change-0.9.7-23"><span class="yiyi-st" id="yiyi-464"><span class="target" id="change-afb93babbe33115000779944030bb303"><strong>[oracle] [bug] [tests] </strong></span>Fixed bug in oracle dialect test suite where in one test, &#x2018;username&#x2019; was assumed to be in the database URL, even though this might not be the case.<a class="changeset-link headerlink reference internal" href="#change-afb93babbe33115000779944030bb303">&#xB6;</a></span></p><p><span class="yiyi-st" id="yiyi-465">&#x53C2;&#x8003;&#x6587;&#x732E;&#xFF1A;<a class="reference external" href="http://www.sqlalchemy.org/trac/ticket/3128">&#xFF03;3128</a></span></p></li></ul></div><div class="section" id="change-0.9.7-misc"><h3><span class="yiyi-st" id="yiyi-466">&#x6742;&#x9879;<a class="headerlink" href="#change-0.9.7-misc" title="Permalink to this headline">&#xB6; T0&gt;</a></span></h3><ul class="simple"><li><p id="change-0.9.7-24"><span class="yiyi-st" id="yiyi-467"><span class="target" id="change-7731e09fca20d7106d8a5a6a10e341f1"><strong>[bug] [tests] </strong></span>&#x4FEE;&#x6B63;&#x4E86;&#x201C;python setup.py test&#x201D;&#x6CA1;&#x6709;&#x6B63;&#x786E;&#x8C03;&#x7528;distutils&#x7684;&#x9519;&#x8BEF;&#xFF0C;&#x5E76;&#x4E14;&#x5728;&#x6D4B;&#x8BD5;&#x5957;&#x4EF6;&#x7ED3;&#x675F;&#x65F6;&#x4F1A;&#x53D1;&#x51FA;&#x9519;&#x8BEF;&#x3002;<a class="changeset-link headerlink reference internal" href="#change-7731e09fca20d7106d8a5a6a10e341f1"> T2&gt;</a></span></p><p></p></li><li><p id="change-0.9.7-25"><span class="yiyi-st" id="yiyi-468"><span class="target" id="change-905a41f06acdffd4ebc408aee599c147"><strong>[bug] [declarative] </strong></span>Fixed bug when the declarative <code class="docutils literal"><span class="pre">__abstract__</span></code> flag was not being distinguished for when it was actually the value <code class="docutils literal"><span class="pre">False</span></code>. </span><span class="yiyi-st" id="yiyi-469"><code class="docutils literal"><span class="pre">__abstract__</span></code>&#x6807;&#x5FD7;&#x9700;&#x8981;&#x5728;&#x88AB;&#x6D4B;&#x8BD5;&#x7684;&#x7EA7;&#x522B;&#x4E0A;&#x8FDB;&#x884C;&#x771F;&#x5B9E;&#x503C;&#x8BA1;&#x7B97;&#x3002;<a class="changeset-link headerlink reference internal" href="#change-905a41f06acdffd4ebc408aee599c147">&#xB6;</a></span></p><p><span class="yiyi-st" id="yiyi-470">&#x53C2;&#x8003;&#x6587;&#x732E;&#xFF1A;<a class="reference external" href="http://www.sqlalchemy.org/trac/ticket/3097">&#xFF03;3097</a></span></p></li></ul></div></div><div class="section" id="change-0.9.6"><h2><span class="yiyi-st" id="yiyi-472">0.9.6 <a class="headerlink" href="#change-0.9.6" title="Permalink to this headline">&#xB6; T0&gt;</a></span></h2><span class="yiyi-st" id="yiyi-477">&#x53D1;&#x5E03;&#x65E5;&#x671F;&#xFF1A;2014&#x5E74;6&#x6708;23&#x65E5;</span><div class="section" id="change-0.9.6-orm"><h3><span class="yiyi-st" id="yiyi-473">ORM <a class="headerlink" href="#change-0.9.6-orm" title="Permalink to this headline">&#xB6; T0&gt;</a></span></h3><ul class="simple"><li><p id="change-0.9.6-0"><span class="yiyi-st" id="yiyi-474"><span class="target" id="change-b34ddce636d140c62cb6b43b92ce3464"><strong>[orm] [bug] </strong></span>&#x6062;&#x590D;<a class="reference external" href="http://www.sqlalchemy.org/trac/ticket/3060">&#xFF03;3060</a>&#x7684;&#x66F4;&#x6539; - &#x8FD9;&#x662F;&#x4E00;&#x4E2A;&#x5DE5;&#x4F5C;&#x5355;&#x5143;&#x4FEE;&#x590D;&#xFF0C;&#x901A;&#x8FC7;<a class="reference external" href="http://www.sqlalchemy.org/trac/ticket/3061">&#xFF03;3061  t3&#x5728;1.0&#x4E2D;&#x66F4;&#x5168;&#x9762;&#x5730;&#x66F4;&#x65B0;&gt;&#x3002;</a></span><span class="yiyi-st" id="yiyi-475">&#x4E0D;&#x5E78;&#x7684;&#x662F;&#xFF0C;<a class="reference external" href="http://www.sqlalchemy.org/trac/ticket/3060">&#xFF03;3060</a>&#x4E2D;&#x7684;&#x4FEE;&#x590D;&#x4EA7;&#x751F;&#x4E86;&#x4E00;&#x4E2A;&#x65B0;&#x95EE;&#x9898;&#xFF0C;&#x5373;&#x591A;&#x5BF9;&#x4E00;&#x5C5E;&#x6027;&#x7684;&#x6025;&#x5207;&#x52A0;&#x8F7D;&#x53EF;&#x4EE5;&#x4EA7;&#x751F;&#x4E00;&#x4E2A;&#x89E3;&#x91CA;&#x4E3A;&#x5C5E;&#x6027;&#x66F4;&#x6539;&#x7684;&#x4E8B;&#x4EF6;&#x3002;<a class="changeset-link headerlink reference internal" href="#change-b34ddce636d140c62cb6b43b92ce3464">&#xB6;</a></span></p><p><span class="yiyi-st" id="yiyi-476">&#x53C2;&#x8003;&#x6587;&#x732E;&#xFF1A;<a class="reference external" href="http://www.sqlalchemy.org/trac/ticket/3060">&#xFF03;3060</a></span></p></li></ul></div></div><div class="section" id="change-0.9.5"><h2><span class="yiyi-st" id="yiyi-478">0.9.5 <a class="headerlink" href="#change-0.9.5" title="Permalink to this headline">&#xB6; T0&gt;</a></span></h2><span class="yiyi-st" id="yiyi-613">&#x53D1;&#x5E03;&#x65E5;&#x671F;&#xFF1A;2014&#x5E74;6&#x6708;23&#x65E5;</span><div class="section" id="change-0.9.5-orm"><h3><span class="yiyi-st" id="yiyi-479">ORM <a class="headerlink" href="#change-0.9.5-orm" title="Permalink to this headline">&#xB6; T0&gt;</a></span></h3><ul class="simple"><li><p id="change-0.9.5-0"><span class="yiyi-st" id="yiyi-480"><span class="target" id="change-b14ee29d17139fd41dceb132ae75ee3a"><strong>[orm] [feature] </strong></span>The &#x201C;primaryjoin&#x201D; model has been stretched a bit further to allow a join condition that is strictly from a single column to itself, translated through some kind of SQL function or expression. </span><span class="yiyi-st" id="yiyi-481">&#x8FD9;&#x662F;&#x4E00;&#x79CD;&#x5B9E;&#x9A8C;&#xFF0C;&#x4F46;&#x6982;&#x5FF5;&#x7684;&#x7B2C;&#x4E00;&#x4E2A;&#x8BC1;&#x660E;&#x662F;&#x201C;&#x7269;&#x5316;&#x8DEF;&#x5F84;&#x201D;&#x8FDE;&#x63A5;&#x6761;&#x4EF6;&#xFF0C;&#x5176;&#x4E2D;&#x8DEF;&#x5F84;&#x5B57;&#x7B26;&#x4E32;&#x4F7F;&#x7528;&#x201C;like&#x201D;&#x4E0E;&#x81EA;&#x8EAB;&#x8FDB;&#x884C;&#x6BD4;&#x8F83;&#x3002;</span><span class="yiyi-st" id="yiyi-482"><a class="reference internal" href="core_sqlelement.html#sqlalchemy.sql.operators.ColumnOperators.like" title="sqlalchemy.sql.operators.ColumnOperators.like"><code class="xref py py-meth docutils literal"><span class="pre">ColumnOperators.like()</span></code></a>&#x8FD0;&#x7B97;&#x7B26;&#x4E5F;&#x88AB;&#x6DFB;&#x52A0;&#x5230;&#x5728;primaryjoin&#x6761;&#x4EF6;&#x4E2D;&#x4F7F;&#x7528;&#x7684;&#x6709;&#x6548;&#x8FD0;&#x7B97;&#x7B26;&#x5217;&#x8868;&#x4E2D;&#x3002;<a class="changeset-link headerlink reference internal" href="#change-b14ee29d17139fd41dceb132ae75ee3a">&#xB6;</a></span></p><p><span class="yiyi-st" id="yiyi-483">&#x53C2;&#x8003;&#x6587;&#x732E;&#xFF1A;<a class="reference external" href="http://www.sqlalchemy.org/trac/ticket/3029">&#xFF03;3029</a></span></p></li><li><p id="change-0.9.5-1"><span class="yiyi-st" id="yiyi-484"><span class="target" id="change-d2f991a8058f33793f0f9fdd996750fa"><strong>[orm] [feature] </strong></span>&#x6DFB;&#x52A0;&#x4E86;&#x65B0;&#x7684;&#x5B9E;&#x7528;&#x7A0B;&#x5E8F;&#x51FD;&#x6570;<a class="reference internal" href="orm_session_api.html#sqlalchemy.orm.session.make_transient_to_detached" title="sqlalchemy.orm.session.make_transient_to_detached"><code class="xref py py-func docutils literal"><span class="pre">make_transient_to_detached()</span></code></a>&#xFF0C;&#x53EF;&#x7528;&#x4E8E;&#x5236;&#x9020;&#x8868;&#x73B0;&#x5982;&#x540C;&#x4ECE;&#x4F1A;&#x8BDD;&#x52A0;&#x8F7D;&#xFF0C;&#x7136;&#x540E;&#x5206;&#x79BB;&#x7684;&#x5BF9;&#x8C61;&#x3002;</span><span class="yiyi-st" id="yiyi-485">&#x4E0D;&#x5B58;&#x5728;&#x7684;&#x5C5E;&#x6027;&#x88AB;&#x6807;&#x8BB0;&#x4E3A;&#x8FC7;&#x671F;&#xFF0C;&#x5E76;&#x4E14;&#x8BE5;&#x5BF9;&#x8C61;&#x53EF;&#x4EE5;&#x88AB;&#x6DFB;&#x52A0;&#x5230;&#x4F1A;&#x8BDD;&#x4E2D;&#xFF0C;&#x5B83;&#x5C06;&#x50CF;&#x4E00;&#x4E2A;&#x6301;&#x4E45;&#x7684;&#x884C;&#x4E3A;&#x4E00;&#x6837;&#x3002;<a class="changeset-link headerlink reference internal" href="#change-d2f991a8058f33793f0f9fdd996750fa">&#xB6;</a></span></p><p><span class="yiyi-st" id="yiyi-486">&#x53C2;&#x8003;&#x6587;&#x732E;&#xFF1A;<a class="reference external" href="http://www.sqlalchemy.org/trac/ticket/3017">&#xFF03;3017</a></span></p></li><li><p id="change-0.9.5-2"><span class="yiyi-st" id="yiyi-487"><span class="target" id="change-368bbcba8a65910bc0ebf133019cd593"><strong>[orm] [bug] </strong></span>Fixed bug in subquery eager loading where a long chain of eager loads across a polymorphic-subclass boundary in conjunction with polymorphic loading would fail to locate the subclass-link in the chain, erroring out with a missing property name on an <a class="reference internal" href="orm_query.html#sqlalchemy.orm.util.AliasedClass" title="sqlalchemy.orm.util.AliasedClass"><code class="xref py py-class docutils literal"><span class="pre">AliasedClass</span></code></a>.<a class="changeset-link headerlink reference internal" href="#change-368bbcba8a65910bc0ebf133019cd593">&#xB6;</a></span></p><p><span class="yiyi-st" id="yiyi-488">&#x8FD9;&#x4E2A;&#x6539;&#x53D8;&#x4E5F;&#x88AB;<strong>&#x56DE;&#x9000;</strong>&#x4E3A;&#xFF1A;0.8.7</span></p><p><span class="yiyi-st" id="yiyi-489">&#x53C2;&#x8003;&#x6587;&#x732E;&#xFF1A;<a class="reference external" href="http://www.sqlalchemy.org/trac/ticket/3055">&#xFF03;3055</a></span></p></li><li><p id="change-0.9.5-3"><span class="yiyi-st" id="yiyi-490"><span class="target" id="change-871a7a18ca10428184a782f221a13740"><strong>[orm] [bug] </strong></span>Fixed ORM bug where the <a class="reference internal" href="orm_mapping_api.html#sqlalchemy.orm.class_mapper" title="sqlalchemy.orm.class_mapper"><code class="xref py py-func docutils literal"><span class="pre">class_mapper()</span></code></a> function would mask AttributeErrors or KeyErrors that should raise during mapper configuration due to user errors. </span><span class="yiyi-st" id="yiyi-491">&#x5BF9;&#x5C5E;&#x6027;/&#x952E;&#x9519;&#x8BEF;&#x7684;&#x6355;&#x83B7;&#x66F4;&#x5177;&#x4F53;&#xFF0C;&#x4E0D;&#x5305;&#x62EC;&#x914D;&#x7F6E;&#x6B65;&#x9AA4;&#x3002;<a class="changeset-link headerlink reference internal" href="#change-871a7a18ca10428184a782f221a13740">&#xB6;</a></span></p><p><span class="yiyi-st" id="yiyi-492">&#x8FD9;&#x4E2A;&#x6539;&#x53D8;&#x4E5F;&#x88AB;<strong>&#x56DE;&#x9000;</strong>&#x4E3A;&#xFF1A;0.8.7</span></p><p><span class="yiyi-st" id="yiyi-493">&#x53C2;&#x8003;&#x6587;&#x732E;&#xFF1A;<a class="reference external" href="http://www.sqlalchemy.org/trac/ticket/3047">&#xFF03;3047</a></span></p></li><li><p id="change-0.9.5-4"><span class="yiyi-st" id="yiyi-494"><span class="target" id="change-5ffa32a79580d10d4dc6e1f322b62326"><strong>[orm] [bug] </strong></span>Additional checks have been added for the case where an inheriting mapper is implicitly combining one of its column-based attributes with that of the parent, where those columns normally don&#x2019;t necessarily share the same value. </span><span class="yiyi-st" id="yiyi-495">&#x8FD9;&#x662F;&#x901A;&#x8FC7;<a class="reference external" href="http://www.sqlalchemy.org/trac/ticket/1892">&#xFF03;1892</a>&#x6DFB;&#x52A0;&#x7684;&#x73B0;&#x6709;&#x652F;&#x7968;&#x7684;&#x6269;&#x5C55;&#x3002;&#x7136;&#x800C;&#xFF0C;&#x8FD9;&#x4E2A;&#x65B0;&#x7684;&#x68C0;&#x67E5;&#x4EC5;&#x53D1;&#x51FA;&#x8B66;&#x544A;&#xFF0C;&#x800C;&#x4E0D;&#x662F;&#x4F8B;&#x5916;&#xFF0C;&#x4EE5;&#x5141;&#x8BB8;&#x53EF;&#x80FD;&#x4F9D;&#x8D56;&#x73B0;&#x6709;&#x884C;&#x4E3A;&#x7684;&#x5E94;&#x7528;&#x7A0B;&#x5E8F;&#x3002;</span></p><div class="admonition seealso"><p class="first admonition-title"><span class="yiyi-st" id="yiyi-496">&#x4E5F;&#x53EF;&#x4EE5;&#x770B;&#x770B;</span></p><p class="last"><span class="yiyi-st" id="yiyi-497"><a class="reference internal" href="faq_ormconfiguration.html#faq-combining-columns"><span>I&#x2019;m getting a warning or error about &#x201C;Implicitly combining column X under attribute Y&#x201D;</span></a></span></p></div><span class="yiyi-st" id="yiyi-499"> <a class="changeset-link headerlink reference internal" href="#change-5ffa32a79580d10d4dc6e1f322b62326">&#xB6;</a></span><p><span class="yiyi-st" id="yiyi-498">&#x53C2;&#x8003;&#x6587;&#x732E;&#xFF1A;<a class="reference external" href="http://www.sqlalchemy.org/trac/ticket/3042">&#xFF03;3042</a></span></p></li><li><p id="change-0.9.5-5"><span class="yiyi-st" id="yiyi-500"><span class="target" id="change-25bfed359ea9ffac545b3582739da0c4"><strong>[orm] [bug] </strong></span>Modified the behavior of <a class="reference internal" href="orm_loading_columns.html#sqlalchemy.orm.load_only" title="sqlalchemy.orm.load_only"><code class="xref py py-func docutils literal"><span class="pre">orm.load_only()</span></code></a> such that primary key columns are always added to the list of columns to be &#x201C;undeferred&#x201D;; otherwise, the ORM can&#x2019;t load the row&#x2019;s identity. </span><span class="yiyi-st" id="yiyi-501">&#x663E;&#x7136;&#xFF0C;&#x53EF;&#x4EE5;&#x63A8;&#x8FDF;&#x6620;&#x5C04;&#x7684;&#x4E3B;&#x952E;&#xFF0C;&#x5E76;&#x4E14;ORM&#x5C06;&#x5931;&#x8D25;&#xFF0C;&#x8FD9;&#x5E76;&#x6CA1;&#x6709;&#x6539;&#x53D8;&#x3002;</span><span class="yiyi-st" id="yiyi-502">But as load_only is essentially saying &#x201C;defer all but X&#x201D;, it&#x2019;s more critical that PK cols not be part of this deferral.<a class="changeset-link headerlink reference internal" href="#change-25bfed359ea9ffac545b3582739da0c4">&#xB6;</a></span></p><p><span class="yiyi-st" id="yiyi-503">&#x53C2;&#x8003;&#x6587;&#x732E;&#xFF1A;<a class="reference external" href="http://www.sqlalchemy.org/trac/ticket/3080">&#xFF03;3080</a></span></p></li><li><p id="change-0.9.5-6"><span class="yiyi-st" id="yiyi-504"><span class="target" id="change-7dee9371466176d8e4b29c007477a68a"><strong>[orm] [bug] </strong></span>Fixed a few edge cases which arise in the so-called &#x201C;row switch&#x201D; scenario, where an INSERT/DELETE can be turned into an UPDATE. </span><span class="yiyi-st" id="yiyi-505">&#x5728;&#x8FD9;&#x79CD;&#x60C5;&#x51B5;&#x4E0B;&#xFF0C;&#x5C06;&#x591A;&#x5BF9;&#x4E00;&#x5173;&#x7CFB;&#x8BBE;&#x7F6E;&#x4E3A;&#x65E0;&#xFF0C;&#x6216;&#x8005;&#x5728;&#x67D0;&#x4E9B;&#x60C5;&#x51B5;&#x4E0B;&#x5C06;&#x6807;&#x91CF;&#x5C5E;&#x6027;&#x8BBE;&#x7F6E;&#x4E3A;&#x65E0;&#xFF0C;&#x53EF;&#x80FD;&#x4E0D;&#x4F1A;&#x5C06;&#x5176;&#x68C0;&#x6D4B;&#x4E3A;&#x503C;&#x7684;&#x51C0;&#x66F4;&#x6539;&#xFF0C;&#x56E0;&#x6B64;UPDATE&#x4E0D;&#x4F1A;&#x91CD;&#x7F6E;&#x4E0A;&#x4E00;&#x884C;&#x4E2D;&#x7684;&#x5185;&#x5BB9;&#x3002;</span><span class="yiyi-st" id="yiyi-506">&#x8FD9;&#x662F;&#x7531;&#x4E8E;&#x4E00;&#x4E9B;&#x5C1A;&#x672A;&#x89E3;&#x51B3;&#x7684;&#x65B9;&#x5F0F;&#x5C5E;&#x6027;&#x5386;&#x53F2;&#x7684;&#x5DE5;&#x4F5C;&#x65B9;&#x5F0F;&#x9690;&#x542B;&#x5730;&#x5047;&#x8BBE;None&#x4E0D;&#x662F;&#x771F;&#x6B63;&#x7684;&#x201C;&#x6539;&#x53D8;&#x201D;&#x4EE5;&#x524D;&#x672A;&#x8BBE;&#x7F6E;&#x7684;&#x5C5E;&#x6027;&#x3002;</span><span class="yiyi-st" id="yiyi-507">&#x53E6;&#x89C1;<a class="reference external" href="http://www.sqlalchemy.org/trac/ticket/3061">&#xFF03;3061</a>&#x3002;</span></p><div class="admonition note"><p class="first admonition-title"><span class="yiyi-st" id="yiyi-508">&#x6CE8;&#x610F;</span></p><p class="last"><span class="yiyi-st" id="yiyi-509">This change has been <strong>REVERTED</strong> in 0.9.6. </span><span class="yiyi-st" id="yiyi-510">&#x5B8C;&#x6574;&#x7684;&#x4FEE;&#x8865;&#x7A0B;&#x5E8F;&#x5C06;&#x5728;SQLAlchemy 1.0&#x7248;&#x4E2D;&#x3002;</span></p></div><span class="yiyi-st" id="yiyi-512"> <a class="changeset-link headerlink reference internal" href="#change-7dee9371466176d8e4b29c007477a68a">&#xB6;</a></span><p><span class="yiyi-st" id="yiyi-511">&#x53C2;&#x8003;&#x6587;&#x732E;&#xFF1A;<a class="reference external" href="http://www.sqlalchemy.org/trac/ticket/3060">&#xFF03;3060</a></span></p></li><li><p id="change-0.9.5-7"><span class="yiyi-st" id="yiyi-513"><span class="target" id="change-075684cfd4ae61fbe83f5b7c147fcc8a"><strong>[orm] [bug] </strong></span>&#x4E0E;<a class="reference external" href="http://www.sqlalchemy.org/trac/ticket/3060">&#xFF03;3060</a>&#x76F8;&#x5173;&#xFF0C;&#x5DF2;&#x5BF9;&#x5DE5;&#x4F5C;&#x5355;&#x5143;&#x8FDB;&#x884C;&#x4E86;&#x8C03;&#x6574;&#xFF0C;&#x4EE5;&#x4F7F;&#x76F8;&#x5173;&#x7684;&#x591A;&#x5BF9;&#x4E00;&#x5BF9;&#x8C61;&#x7684;&#x52A0;&#x8F7D;&#x7A0D;&#x5FAE;&#x66F4;&#x79EF;&#x6781;&#x5728;&#x8981;&#x5220;&#x9664;&#x7684;&#x81EA;&#x5F15;&#x7528;&#x5BF9;&#x8C61;&#x7684;&#x56FE;&#x5F62;&#x7684;&#x60C5;&#x51B5;&#x4E0B;&#xFF1B;&#x5982;&#x679C;&#x672A;&#x8BBE;&#x7F6E;passive_deletes&#xFF0C;&#x5219;&#x76F8;&#x5173;&#x5BF9;&#x8C61;&#x7684;&#x8D1F;&#x8F7D;&#x5C06;&#x5E2E;&#x52A9;&#x786E;&#x5B9A;&#x6B63;&#x786E;&#x7684;&#x5220;&#x9664;&#x987A;&#x5E8F;&#x3002;<a class="changeset-link headerlink reference internal" href="#change-075684cfd4ae61fbe83f5b7c147fcc8a"></a></span></p><p></p></li><li><p id="change-0.9.5-8"><span class="yiyi-st" id="yiyi-514"><span class="target" id="change-fa2ca744e5fa4caa260e51dbac157f2e"><strong>[orm] [bug] </strong></span>Fixed bug in SQLite join rewriting where anonymized column names due to repeats would not correctly be rewritten in subqueries. </span><span class="yiyi-st" id="yiyi-515">&#x8FD9;&#x4F1A;&#x5F71;&#x54CD;&#x4EFB;&#x4F55;&#x7C7B;&#x578B;&#x7684;&#x5B50;&#x67E5;&#x8BE2;+&#x8FDE;&#x63A5;&#x7684;SELECT&#x67E5;&#x8BE2;&#x3002;<a class="changeset-link headerlink reference internal" href="#change-fa2ca744e5fa4caa260e51dbac157f2e">&#xB6;</a></span></p><p><span class="yiyi-st" id="yiyi-516">&#x53C2;&#x8003;&#x6587;&#x732E;&#xFF1A;<a class="reference external" href="http://www.sqlalchemy.org/trac/ticket/3057">&#xFF03;3057</a></span></p></li><li><p id="change-0.9.5-9"><span class="yiyi-st" id="yiyi-517"><span class="target" id="change-45db778576e325692f382fbe4e309669"><strong>[orm] [bug] [sql] </strong></span>Fixes to the newly enhanced boolean coercion in <a class="reference external" href="http://www.sqlalchemy.org/trac/ticket/2804">#2804</a> where the new rules for &#x201C;where&#x201D; and &#x201C;having&#x201D; woudn&#x2019;t take effect for the &#x201C;whereclause&#x201D; and &#x201C;having&#x201D; kw arguments of the <a class="reference internal" href="core_selectable.html#sqlalchemy.sql.expression.select" title="sqlalchemy.sql.expression.select"><code class="xref py py-func docutils literal"><span class="pre">select()</span></code></a> construct, which is also what <a class="reference internal" href="orm_query.html#sqlalchemy.orm.query.Query" title="sqlalchemy.orm.query.Query"><code class="xref py py-class docutils literal"><span class="pre">Query</span></code></a> uses so wasn&#x2019;t working in the ORM either.<a class="changeset-link headerlink reference internal" href="#change-45db778576e325692f382fbe4e309669">&#xB6;</a></span></p><p><span class="yiyi-st" id="yiyi-518">&#x53C2;&#x8003;&#x6587;&#x732E;&#xFF1A;<a class="reference external" href="http://www.sqlalchemy.org/trac/ticket/3013">&#xFF03;3013</a></span></p></li></ul></div><div class="section" id="change-0.9.5-engine"><h3><span class="yiyi-st" id="yiyi-519">&#x53D1;&#x52A8;&#x673A;<a class="headerlink" href="#change-0.9.5-engine" title="Permalink to this headline">&#xB6; T0&gt;</a></span></h3><ul class="simple"><li><p id="change-0.9.5-10"><span class="yiyi-st" id="yiyi-520"><span class="target" id="change-84310c96ae6744a277731d49bbf40a8a"><strong>[engine] [bug] </strong></span>Fixed bug which would occur if a DBAPI exception occurs when the engine first connects and does its initial checks, and the exception is not a disconnect exception, yet the cursor raises an error when we try to close it. </span><span class="yiyi-st" id="yiyi-521">&#x5728;&#x8FD9;&#x79CD;&#x60C5;&#x51B5;&#x4E0B;&#xFF0C;&#x5F53;&#x6211;&#x4EEC;&#x8BD5;&#x56FE;&#x901A;&#x8FC7;&#x8FDE;&#x63A5;&#x6C60;&#x8BB0;&#x5F55;&#x6E38;&#x6807;&#x5173;&#x95ED;&#x5F02;&#x5E38;&#x5E76;&#x4E14;&#x5931;&#x8D25;&#x65F6;&#xFF0C;&#x771F;&#x6B63;&#x7684;&#x5F02;&#x5E38;&#x5C06;&#x88AB;&#x5E9F;&#x9664;&#xFF0C;&#x56E0;&#x4E3A;&#x6211;&#x4EEC;&#x8BD5;&#x56FE;&#x4EE5;&#x5728;&#x8FD9;&#x79CD;&#x7279;&#x5B9A;&#x60C5;&#x51B5;&#x4E0B;&#x4E0D;&#x5408;&#x9002;&#x7684;&#x65B9;&#x5F0F;&#x8BBF;&#x95EE;&#x6C60;&#x7684;&#x8BB0;&#x5F55;&#x5668;&#x3002;<a class="changeset-link headerlink reference internal" href="#change-84310c96ae6744a277731d49bbf40a8a"> T0&gt;</a></span></p><p><span class="yiyi-st" id="yiyi-522">&#x53C2;&#x8003;&#x6587;&#x732E;&#xFF1A;<a class="reference external" href="http://www.sqlalchemy.org/trac/ticket/3063">&#xFF03;3063</a></span></p></li><li><p id="change-0.9.5-11"><span class="yiyi-st" id="yiyi-523"><span class="target" id="change-b17a4835aab34786d5ecedee0ead17e1"><strong>[engine] [bug] </strong></span>Fixed some &#x201C;double invalidate&#x201D; situations were detected where a connection invalidation could occur within an already critical section like a connection.close(); ultimately, these conditions are caused by the change in <a class="reference external" href="http://www.sqlalchemy.org/trac/ticket/2907">#2907</a>, in that the &#x201C;reset on return&#x201D; feature calls out to the Connection/Transaction in order to handle it, where &#x201C;disconnect detection&#x201D; might be caught. </span><span class="yiyi-st" id="yiyi-524">&#x7136;&#x800C;&#xFF0C;<a class="reference external" href="http://www.sqlalchemy.org/trac/ticket/2985">&#xFF03;2985</a>&#x4E2D;&#x6700;&#x8FD1;&#x53D1;&#x751F;&#x7684;&#x53D8;&#x5316;&#x53EF;&#x80FD;&#x4F1A;&#x5BFC;&#x81F4;&#x8FD9;&#x79CD;&#x60C5;&#x51B5;&#x51FA;&#x73B0;&#xFF0C;&#x56E0;&#x4E3A;&#x201C;&#x8FDE;&#x63A5;&#x65E0;&#x6548;&#x201D;&#x64CD;&#x4F5C;&#x7684;&#x901F;&#x5EA6;&#x66F4;&#x5FEB;&#xFF0C;&#x56E0;&#x4E3A;&#x95EE;&#x9898;&#x5728;0.9.4&#x4E0A;&#x7684;&#x53EF;&#x91CD;&#x590D;&#x6027;&#x9AD8;&#x4E8E;0.9.3&#x3002;</span></p><p><span class="yiyi-st" id="yiyi-525">&#x73B0;&#x5728;&#x5728;&#x4EFB;&#x4F55;&#x53EF;&#x80FD;&#x51FA;&#x73B0;&#x5931;&#x6548;&#x7684;&#x90E8;&#x5206;&#x6DFB;&#x52A0;&#x68C0;&#x67E5;&#xFF0C;&#x4EE5;&#x6682;&#x505C;&#x5BF9;&#x5931;&#x6548;&#x7684;&#x8FDE;&#x63A5;&#x8FDB;&#x4E00;&#x6B65;&#x7981;&#x6B62;&#x7684;&#x64CD;&#x4F5C;&#x3002;</span><span class="yiyi-st" id="yiyi-526">&#x8FD9;&#x5305;&#x62EC;&#x5728;&#x5F15;&#x64CE;&#x7EA7;&#x522B;&#x548C;&#x6C60;&#x7EA7;&#x522B;&#x7684;&#x4E24;&#x4E2A;&#x4FEE;&#x8865;&#x7A0B;&#x5E8F;&#x3002;</span><span class="yiyi-st" id="yiyi-527">&#x867D;&#x7136;&#x5728;&#x9AD8;&#x5EA6;&#x5E76;&#x53D1;&#x7684;&#x57FA;&#x56E0;&#x4E8B;&#x4EF6;&#x4E2D;&#x89C2;&#x5BDF;&#x5230;&#x8FD9;&#x4E2A;&#x95EE;&#x9898;&#xFF0C;&#x4F46;&#x7406;&#x8BBA;&#x4E0A;&#x53EF;&#x4EE5;&#x53D1;&#x751F;&#x5728;&#x8FDE;&#x63A5;&#x5173;&#x95ED;&#x64CD;&#x4F5C;&#x5185;&#x53D1;&#x751F;&#x65AD;&#x5F00;&#x8FDE;&#x63A5;&#x7684;&#x4EFB;&#x4F55;&#x60C5;&#x51B5;&#x4E0B;&#x3002;</span></p><span class="yiyi-st" id="yiyi-529"> <a class="changeset-link headerlink reference internal" href="#change-b17a4835aab34786d5ecedee0ead17e1">&#xB6;</a></span><p><span class="yiyi-st" id="yiyi-528">&#x53C2;&#x8003;&#x6587;&#x732E;&#xFF1A;<a class="reference external" href="http://www.sqlalchemy.org/trac/ticket/3043">&#xFF03;3043</a></span></p></li></ul></div><div class="section" id="change-0.9.5-sql"><h3><span class="yiyi-st" id="yiyi-530">SQL <a class="headerlink" href="#change-0.9.5-sql" title="Permalink to this headline">&#xB6; T0&gt;</a></span></h3><ul class="simple"><li><p id="change-0.9.5-12"><span class="yiyi-st" id="yiyi-531"><span class="target" id="change-f7babfe631a67d2dbe1627a033f09c8b"><strong>[sql] [feature] </strong></span>&#x7A0D;&#x5FAE;&#x653E;&#x5BBD;&#x4E86;<a class="reference internal" href="core_constraints.html#sqlalchemy.schema.Index" title="sqlalchemy.schema.Index"><code class="xref py py-class docutils literal"><span class="pre">Index</span></code></a>&#x7684;&#x5951;&#x7EA6;&#xFF0C;&#x56E0;&#x4E3A;&#x60A8;&#x53EF;&#x4EE5;&#x6307;&#x5B9A;&#x4E00;&#x4E2A;<a class="reference internal" href="core_sqlelement.html#sqlalchemy.sql.expression.text" title="sqlalchemy.sql.expression.text"><code class="xref py py-func docutils literal"><span class="pre">text()</span></code></a>&#x8868;&#x8FBE;&#x5F0F;&#x4F5C;&#x4E3A;&#x76EE;&#x6807;&#xFF1B;&#x5982;&#x679C;&#x8981;&#x901A;&#x8FC7;&#x5185;&#x8054;&#x58F0;&#x660E;&#x6216;&#x901A;&#x8FC7;<a class="reference internal" href="core_metadata.html#sqlalchemy.schema.Table.append_constraint" title="sqlalchemy.schema.Table.append_constraint"><code class="xref py py-meth docutils literal"><span class="pre">Table.append_constraint()</span></code></a>&#x5C06;&#x7D22;&#x5F15;&#x624B;&#x52A8;&#x6DFB;&#x52A0;&#x5230;&#x8868;&#x4E2D;&#xFF0C;&#x5219;&#x7D22;&#x5F15;&#x4E0D;&#x518D;&#x9700;&#x8981;&#x5B58;&#x5728;&#x8868;&#x683C;&#x7ED1;&#x5B9A;&#x5217;&#x3002;<a class="changeset-link headerlink reference internal" href="#change-f7babfe631a67d2dbe1627a033f09c8b"> T11&gt;</a></span></p><p><span class="yiyi-st" id="yiyi-532">&#x53C2;&#x8003;&#x6587;&#x732E;&#xFF1A;<a class="reference external" href="http://www.sqlalchemy.org/trac/ticket/3028">&#xFF03;3028</a></span></p></li><li><p id="change-0.9.5-13"><span class="yiyi-st" id="yiyi-533"><span class="target" id="change-af7cd160da5802d1180fd83faee35afd"><strong>[sql] [feature] </strong></span>Added new flag <a class="reference internal" href="core_sqlelement.html#sqlalchemy.sql.expression.between.params.symmetric" title="sqlalchemy.sql.expression.between"><code class="xref py py-paramref docutils literal"><span class="pre">expression.between.symmetric</span></code></a>, when set to True renders &#x201C;BETWEEN SYMMETRIC&#x201D;. </span><span class="yiyi-st" id="yiyi-534">&#x8FD8;&#x6DFB;&#x52A0;&#x4E86;&#x4E00;&#x4E2A;&#x65B0;&#x7684;&#x5426;&#x5B9A;&#x8FD0;&#x7B97;&#x7B26;&#x201C;notbetween_op&#x201D;&#xFF0C;&#x8BE5;&#x8FD0;&#x7B97;&#x7B26;&#x73B0;&#x5728;&#x5141;&#x8BB8;&#x50CF;<code class="docutils literal"><span class="pre">&#x301C;col.between&#xFF08;x&#xFF0C;</span> <span class="pre">y&#xFF09;</span></code>&#x8FD9;&#x6837;&#x7684;&#x8868;&#x8FBE;&#x5F0F;&#x5448;&#x73B0;&#x4E3A;&#x201C; col NOT BETWEEN x AND y&#x201C;&#xFF0C;&#x800C;&#x4E0D;&#x662F;&#x4E00;&#x4E2A;&#x5E26;&#x62EC;&#x53F7;&#x7684;NOT&#x5B57;&#x7B26;&#x4E32;&#x3002;<a class="changeset-link headerlink reference internal" href="#change-af7cd160da5802d1180fd83faee35afd">&#xB6;</a></span></p><p><span class="yiyi-st" id="yiyi-535">&#x53C2;&#x8003;&#x6587;&#x732E;&#xFF1A;<a class="reference external" href="http://www.sqlalchemy.org/trac/ticket/2990">&#xFF03;2990</a></span></p></li><li><p id="change-0.9.5-14"><span class="yiyi-st" id="yiyi-536"><span class="target" id="change-9f9af41aeaf6c84b4705936f62a45be9"><strong>[sql] [bug] </strong></span>Fixed bug in INSERT..FROM SELECT construct where selecting from a UNION would wrap the union in an anonymous (e.g. unlabled) subquery.<a class="changeset-link headerlink reference internal" href="#change-9f9af41aeaf6c84b4705936f62a45be9">&#xB6;</a></span></p><p><span class="yiyi-st" id="yiyi-537">&#x8FD9;&#x4E2A;&#x6539;&#x53D8;&#x4E5F;&#x88AB;<strong>&#x56DE;&#x9000;</strong>&#x4E3A;&#xFF1A;0.8.7</span></p><p><span class="yiyi-st" id="yiyi-538">&#x53C2;&#x8003;&#x6587;&#x732E;&#xFF1A;<a class="reference external" href="http://www.sqlalchemy.org/trac/ticket/3044">&#xFF03;3044</a></span></p></li><li><p id="change-0.9.5-15"><span class="yiyi-st" id="yiyi-539">&#x4FEE;&#x590D;&#x4E86;&#x5F53;<a class="reference internal" href="core_metadata.html#sqlalchemy.schema.Table.update" title="sqlalchemy.schema.Table.update"><code class="xref py py-meth docutils literal"><span class="pre">Table.update()</span></code></a>&#x548C;<a class="reference internal" href="core_metadata.html#sqlalchemy.schema.Table.delete" title="sqlalchemy.schema.Table.delete"><code class="xref py py-meth docutils literal"><span class="pre">Table.delete()</span></code></a>&#x5728;&#x7A7A;&#x7684;&#x65F6;&#x5019;&#x4F1A;&#x4EA7;&#x751F;&#x4E00;&#x4E2A;&#x7A7A;&#x7684;WHERE&#x5B50;&#x53E5;&#x7684;&#x95EE;&#x9898;&#x3002;<span class="target" id="change-74c445dabb61781a9bd829c5df7d80df"><strong>[sql] [bug] </strong></span> <a class="reference internal" href="core_sqlelement.html#sqlalchemy.sql.expression.and_" title="sqlalchemy.sql.expression.and_"><code class="xref py py-func docutils literal"><span class="pre">and_()</span></code></a>&#x6216;<a class="reference internal" href="core_sqlelement.html#sqlalchemy.sql.expression.or_" title="sqlalchemy.sql.expression.or_"><code class="xref py py-func docutils literal"><span class="pre">or_()</span></code></a>&#x6216;&#x5176;&#x4ED6;&#x7A7A;&#x767D;&#x8868;&#x8FBE;&#x3002;</span><span class="yiyi-st" id="yiyi-540">&#x8FD9;&#x4E0E;<a class="reference internal" href="core_selectable.html#sqlalchemy.sql.expression.select" title="sqlalchemy.sql.expression.select"><code class="xref py py-func docutils literal"><span class="pre">select()</span></code></a>&#x7684;&#x4E00;&#x81F4;&#x3002;<a class="changeset-link headerlink reference internal" href="#change-74c445dabb61781a9bd829c5df7d80df">&#xB6;</a></span></p><p><span class="yiyi-st" id="yiyi-541">&#x8FD9;&#x4E2A;&#x6539;&#x53D8;&#x4E5F;&#x88AB;<strong>&#x56DE;&#x9000;</strong>&#x4E3A;&#xFF1A;0.8.7</span></p><p><span class="yiyi-st" id="yiyi-542">&#x53C2;&#x8003;&#x6587;&#x732E;&#xFF1A;<a class="reference external" href="http://www.sqlalchemy.org/trac/ticket/3045">&#xFF03;3045</a></span></p></li><li><p id="change-0.9.5-16"><span class="yiyi-st" id="yiyi-543"><span class="target" id="change-83df5359e7efaeb82389957dec0cdb65"><strong>[sql] [bug] </strong></span>The <a class="reference internal" href="core_metadata.html#sqlalchemy.schema.Column.params.nullable" title="sqlalchemy.schema.Column"><code class="xref py py-paramref docutils literal"><span class="pre">Column.nullable</span></code></a> flag is implicitly set to <code class="docutils literal"><span class="pre">False</span></code> when that <a class="reference internal" href="core_metadata.html#sqlalchemy.schema.Column" title="sqlalchemy.schema.Column"><code class="xref py py-class docutils literal"><span class="pre">Column</span></code></a> is referred to in an explicit <a class="reference internal" href="core_constraints.html#sqlalchemy.schema.PrimaryKeyConstraint" title="sqlalchemy.schema.PrimaryKeyConstraint"><code class="xref py py-class docutils literal"><span class="pre">PrimaryKeyConstraint</span></code></a> for that table. </span><span class="yiyi-st" id="yiyi-544">&#x8FD9;&#x79CD;&#x884C;&#x4E3A;&#x73B0;&#x5728;&#x4E0E;<a class="reference internal" href="core_metadata.html#sqlalchemy.schema.Column" title="sqlalchemy.schema.Column"><code class="xref py py-class docutils literal"><span class="pre">Column</span></code></a>&#x672C;&#x8EAB;&#x5C06;<a class="reference internal" href="core_metadata.html#sqlalchemy.schema.Column.params.primary_key" title="sqlalchemy.schema.Column"><code class="xref py py-paramref docutils literal"><span class="pre">Column.primary_key</span></code></a>&#x6807;&#x5FD7;&#x8BBE;&#x7F6E;&#x4E3A;<code class="docutils literal"><span class="pre">True</span></code>&#x65F6;&#x7684;&#x884C;&#x4E3A;&#x76F8;&#x5339;&#x914D;&#xFF0C;&#x8BE5;&#x884C;&#x4E3A;&#x65E8;&#x5728;&#x6210;&#x4E3A;&#x4E00;&#x4E2A;&#x5B8C;&#x5168;&#x7B49;&#x6548;&#x7684;&#x60C5;&#x51B5;<a class="changeset-link headerlink reference internal" href="#change-83df5359e7efaeb82389957dec0cdb65">&#xB6; T8&gt;</a></span></p><p><span class="yiyi-st" id="yiyi-545">&#x53C2;&#x8003;&#x6587;&#x732E;&#xFF1A;<a class="reference external" href="http://www.sqlalchemy.org/trac/ticket/3023">&#xFF03;3023</a></span></p></li><li><p id="change-0.9.5-17"><span class="yiyi-st" id="yiyi-546"><span class="target" id="change-85577d5daa751d0acb0c47949a0c7e2f"><strong>[sql] [bug] </strong></span>Fixed bug where the <a class="reference internal" href="core_sqlelement.html#sqlalchemy.sql.operators.Operators.__and__" title="sqlalchemy.sql.operators.Operators.__and__"><code class="xref py py-meth docutils literal"><span class="pre">Operators.__and__()</span></code></a>, <a class="reference internal" href="core_sqlelement.html#sqlalchemy.sql.operators.Operators.__or__" title="sqlalchemy.sql.operators.Operators.__or__"><code class="xref py py-meth docutils literal"><span class="pre">Operators.__or__()</span></code></a> and <a class="reference internal" href="core_sqlelement.html#sqlalchemy.sql.operators.Operators.__invert__" title="sqlalchemy.sql.operators.Operators.__invert__"><code class="xref py py-meth docutils literal"><span class="pre">Operators.__invert__()</span></code></a> operator overload methods could not be overridden within a custom <a class="reference internal" href="core_type_api.html#sqlalchemy.types.TypeEngine.Comparator" title="sqlalchemy.types.TypeEngine.Comparator"><code class="xref py py-class docutils literal"><span class="pre">TypeEngine.Comparator</span></code></a> implementation.<a class="changeset-link headerlink reference internal" href="#change-85577d5daa751d0acb0c47949a0c7e2f">&#xB6;</a></span></p><p><span class="yiyi-st" id="yiyi-547">&#x53C2;&#x8003;&#x6587;&#x732E;&#xFF1A;<a class="reference external" href="http://www.sqlalchemy.org/trac/ticket/3012">&#xFF03;3012</a></span></p></li><li><p id="change-0.9.5-18"><span class="yiyi-st" id="yiyi-548"><span class="target" id="change-959ca2bf6fe8506aedc7d32093077f73"><strong>[sql] [bug] </strong></span>Fixed bug in new <a class="reference internal" href="core_sqlelement.html#sqlalchemy.sql.base.DialectKWArgs.argument_for" title="sqlalchemy.sql.base.DialectKWArgs.argument_for"><code class="xref py py-meth docutils literal"><span class="pre">DialectKWArgs.argument_for()</span></code></a> method where adding an argument for a construct not previously included for any special arguments would fail.<a class="changeset-link headerlink reference internal" href="#change-959ca2bf6fe8506aedc7d32093077f73">&#xB6;</a></span></p><p><span class="yiyi-st" id="yiyi-549">&#x53C2;&#x8003;&#x6587;&#x732E;&#xFF1A;<a class="reference external" href="http://www.sqlalchemy.org/trac/ticket/3024">&#xFF03;3024</a></span></p></li><li><p id="change-0.9.5-19"><span class="yiyi-st" id="yiyi-550"><span class="target" id="change-dfb711b371577e0da5d5793400a73450"><strong>[sql] [bug] </strong></span>Fixed regression introduced in 0.9 where new &#x201C;ORDER BY <labelname>&#x201D; feature from <a class="reference external" href="http://www.sqlalchemy.org/trac/ticket/1068">#1068</a> would not apply quoting rules to the label name as rendered in the ORDER BY.<a class="changeset-link headerlink reference internal" href="#change-dfb711b371577e0da5d5793400a73450">&#xB6;</a></labelname></span></p><p><span class="yiyi-st" id="yiyi-551">&#x53C2;&#x8003;&#x6587;&#x732E;&#xFF1A;<a class="reference external" href="http://www.sqlalchemy.org/trac/ticket/1068">&#xFF03;1068</a>&#xFF0C;<a class="reference external" href="http://www.sqlalchemy.org/trac/ticket/3020">&#xFF03;3020</a></span></p></li><li><p id="change-0.9.5-20"><span class="yiyi-st" id="yiyi-552"><span class="target" id="change-3cdb36857fd1906309e4a9c1af99bbea"><strong>[sql] [bug] </strong></span>&#x5C06;<a class="reference internal" href="core_functions.html#sqlalchemy.sql.functions.Function" title="sqlalchemy.sql.functions.Function"><code class="xref py py-class docutils literal"><span class="pre">Function</span></code></a>&#x7684;&#x5BFC;&#x5165;&#x6062;&#x590D;&#x5230;<code class="docutils literal"><span class="pre">sqlalchemy.sql.expression</span></code>&#x5BFC;&#x5165;&#x547D;&#x540D;&#x7A7A;&#x95F4;&#xFF0C;&#x8BE5;&#x7A7A;&#x95F4;&#x5728;0.9&#x5F00;&#x59CB;&#x65F6;&#x88AB;&#x5220;&#x9664;<a class="changeset-link headerlink reference internal" href="#change-3cdb36857fd1906309e4a9c1af99bbea">&#xB6; T7&gt;</a></span></p><p></p></li></ul></div><div class="section" id="change-0.9.5-postgresql"><h3><span class="yiyi-st" id="yiyi-553">&#x7684;PostgreSQL <a class="headerlink" href="#change-0.9.5-postgresql" title="Permalink to this headline">&#xB6; T0&gt;</a></span></h3><ul class="simple"><li><p id="change-0.9.5-21"><span class="yiyi-st" id="yiyi-554"><span class="target" id="change-911649ad2c23d32ab5dc1670d45c095c"><strong>[postgresql] [feature] </strong></span>&#x5728;&#x4F7F;&#x7528;pg8000 DBAPI&#x65F6;&#x589E;&#x52A0;&#x4E86;&#x5BF9;AUTOCOMMIT&#x9694;&#x79BB;&#x7EA7;&#x522B;&#x7684;&#x652F;&#x6301;&#x3002;</span><span class="yiyi-st" id="yiyi-555">&#x62C9;&#x6258;&#x6D1B;&#x514B;&#x6D1B;&#x8BF7;&#x6C42;&#x793C;&#x8C8C;&#x3002;<a class="changeset-link headerlink reference internal" href="#change-911649ad2c23d32ab5dc1670d45c095c">&#xB6;</a></span></p><p><span class="yiyi-st" id="yiyi-556">&#x53C2;&#x8003;&#x6587;&#x732E;&#xFF1A;<a class="reference external" href="https://github.com/zzzeek/sqlalchemy/pull/88">&#x8BF7;&#x6C42;github&#xFF1A;88</a></span></p></li><li><p id="change-0.9.5-22"><span class="yiyi-st" id="yiyi-557"><span class="target" id="change-4fa3bed78a6be8258c6b3e5fd7f621f3"><strong>[postgresql] [feature] </strong></span>&#x5C06;&#x65B0;&#x6807;&#x5FD7;<a class="reference internal" href="dialects_postgresql.html#sqlalchemy.dialects.postgresql.ARRAY.params.zero_indexes" title="sqlalchemy.dialects.postgresql.ARRAY"><code class="xref py py-paramref docutils literal"><span class="pre">ARRAY.zero_indexes</span></code></a>&#x6DFB;&#x52A0;&#x5230;Postgresql <a class="reference internal" href="dialects_postgresql.html#sqlalchemy.dialects.postgresql.ARRAY" title="sqlalchemy.dialects.postgresql.ARRAY"><code class="xref py py-class docutils literal"><span class="pre">ARRAY</span></code></a>&#x7C7B;&#x578B;&#x3002;</span><span class="yiyi-st" id="yiyi-558">&#x5F53;&#x8BBE;&#x7F6E;&#x4E3A;<code class="docutils literal"><span class="pre">True</span></code>&#x65F6;&#xFF0C;&#x5728;&#x4F20;&#x9012;&#x5230;&#x6570;&#x636E;&#x5E93;&#x4E4B;&#x524D;&#xFF0C;&#x503C;&#x4E3A;1&#x5C06;&#x88AB;&#x6DFB;&#x52A0;&#x5230;&#x6240;&#x6709;&#x6570;&#x7EC4;&#x7D22;&#x5F15;&#x503C;&#xFF0C;&#x4ECE;&#x800C;&#x5141;&#x8BB8;Python&#x6837;&#x5F0F;&#x7684;&#x57FA;&#x4E8E;&#x96F6;&#x7684;&#x7D22;&#x5F15;&#x548C;&#x57FA;&#x4E8E;Postgresql one&#x7684;&#x7D22;&#x5F15;&#x4E4B;&#x95F4;&#x5177;&#x6709;&#x66F4;&#x597D;&#x7684;&#x4E92;&#x64CD;&#x4F5C;&#x6027;&#x3002;</span><span class="yiyi-st" id="yiyi-559">&#x8BF7;&#x6C42;&#x793C;&#x8C8C;Alexey Terentev&#x3002;<a class="changeset-link headerlink reference internal" href="#change-4fa3bed78a6be8258c6b3e5fd7f621f3">&#xB6;</a></span></p><p><span class="yiyi-st" id="yiyi-560">&#x53C2;&#x8003;&#x6587;&#x732E;&#xFF1A;<a class="reference external" href="http://www.sqlalchemy.org/trac/ticket/2785">&#xFF03;2785</a>&#xFF0C;<a class="reference external" href="https://bitbucket.org/zzzeek/sqlalchemy/pull-request/18">&#x62C9;&#x53D6;&#x8BF7;&#x6C42;bitbucket&#xFF1A;18</a></span></p></li><li><p id="change-0.9.5-23"><span class="yiyi-st" id="yiyi-561"><span class="target" id="change-d1fc26504bf95db6331661b1c716fa84"><strong>[postgresql] [bug] </strong></span>&#x4E3A;PG <a class="reference internal" href="dialects_postgresql.html#sqlalchemy.dialects.postgresql.HSTORE" title="sqlalchemy.dialects.postgresql.HSTORE"><code class="xref py py-class docutils literal"><span class="pre">HSTORE</span></code></a>&#x7C7B;&#x578B;&#x6DFB;&#x52A0;&#x4E86;<code class="docutils literal"><span class="pre">hashable=False</span></code>&#x6807;&#x5FD7;&#xFF0C;&#x8FD9;&#x662F;&#x5141;&#x8BB8;ORM&#x8DF3;&#x8FC7;&#x5C1D;&#x8BD5;&#x5728;&#x6DF7;&#x5408;&#x5217;/&#x5B9E;&#x4F53;&#x5217;&#x8868;&#x4E2D;&#x8BF7;&#x6C42;ORM&#x6620;&#x5C04;&#x7684;HSTORE&#x5217;&#x65F6;&#x201C;&#x6563;&#x5217;&#x201D;&#x3002;</span><span class="yiyi-st" id="yiyi-562">&#x8865;&#x4E01;&#x793C;&#x8C8C;Gunnlaugur&#xDE;&#xF3;rBriem&#x3002;<a class="changeset-link headerlink reference internal" href="#change-d1fc26504bf95db6331661b1c716fa84">&#xB6;</a></span></p><p><span class="yiyi-st" id="yiyi-563">&#x8FD9;&#x4E2A;&#x6539;&#x53D8;&#x4E5F;&#x88AB;<strong>&#x56DE;&#x9000;</strong>&#x4E3A;&#xFF1A;0.8.7</span></p><p><span class="yiyi-st" id="yiyi-564">&#x53C2;&#x8003;&#x6587;&#x732E;&#xFF1A;<a class="reference external" href="http://www.sqlalchemy.org/trac/ticket/3053">&#xFF03;3053</a></span></p></li><li><p id="change-0.9.5-24"><span class="yiyi-st" id="yiyi-565"><span class="target" id="change-b4544c9476cfd8dbf4900f17cafbea73"><strong>[postgresql] [bug] </strong></span>&#x6DFB;&#x52A0;&#x4E86;&#x4E00;&#x4E2A;&#x65B0;&#x7684;&#x201C;&#x65AD;&#x5F00;&#x8FDE;&#x63A5;&#x201D;&#x6D88;&#x606F;&#x201C;&#x8FDE;&#x63A5;&#x610F;&#x5916;&#x5173;&#x95ED;&#x201D;&#x3002;</span><span class="yiyi-st" id="yiyi-566">&#x8FD9;&#x4F3C;&#x4E4E;&#x4E0E;&#x66F4;&#x65B0;&#x7248;&#x672C;&#x7684;SSL&#x6709;&#x5173;&#x3002;</span><span class="yiyi-st" id="yiyi-567">&#x62C9;&#x63D0;&#x8BF7;&#x6C42;Antti Haapala&#x793C;&#x8C8C;&#x3002;<a class="changeset-link headerlink reference internal" href="#change-b4544c9476cfd8dbf4900f17cafbea73">&#xB6;</a></span></p><p><span class="yiyi-st" id="yiyi-568">&#x8FD9;&#x4E2A;&#x6539;&#x53D8;&#x4E5F;&#x88AB;<strong>&#x56DE;&#x9000;</strong>&#x4E3A;&#xFF1A;0.8.7</span></p><p><span class="yiyi-st" id="yiyi-569">&#x53C2;&#x8003;&#xFF1A;<a class="reference external" href="https://bitbucket.org/zzzeek/sqlalchemy/pull-request/13">&#x62C9;&#x53D6;&#x8BF7;&#x6C42;bitbucket&#xFF1A;13</a></span></p></li><li><p id="change-0.9.5-25"><span class="yiyi-st" id="yiyi-570"><span class="target" id="change-28077f9da4dc99fa0ea9c3c26c2206b0"><strong>[postgresql] [bug] </strong></span>&#x5F53;&#x786E;&#x5B9A;&#x5F02;&#x5E38;&#x662F;&#x5426;&#x4E3A;&#x201C;&#x65AD;&#x5F00;&#x201D;&#x9519;&#x8BEF;&#x65F6;&#xFF0C;&#x73B0;&#x5728;&#x67E5;&#x9605;psycopg2 <code class="docutils literal"><span class="pre">.closed</span></code>&#x8BBF;&#x95EE;&#x5668;&#xFF1B;&#x7406;&#x60F3;&#x60C5;&#x51B5;&#x4E0B;&#xFF0C;&#x8FD9;&#x5E94;&#x8BE5;&#x4E0D;&#x9700;&#x8981;&#x5BF9;&#x5F02;&#x5E38;&#x6D88;&#x606F;&#x8FDB;&#x884C;&#x4EFB;&#x4F55;&#x5176;&#x4ED6;&#x68C0;&#x67E5;&#x6765;&#x68C0;&#x6D4B;&#x65AD;&#x5F00;&#x8FDE;&#x63A5;&#xFF0C;&#x4F46;&#x662F;&#x6211;&#x4EEC;&#x5C06;&#x4FDD;&#x7559;&#x73B0;&#x6709;&#x7684;&#x6D88;&#x606F;&#x4F5C;&#x4E3A;&#x540E;&#x5907;&#x6D88;&#x606F;&#x3002;</span><span class="yiyi-st" id="yiyi-571">&#x8FD9;&#x5E94;&#x8BE5;&#x80FD;&#x591F;&#x5904;&#x7406;&#x65B0;&#x7684;&#x60C5;&#x51B5;&#xFF0C;&#x5982;&#x201C;SSL EOF&#x201D;&#x6761;&#x4EF6;&#x3002;</span><span class="yiyi-st" id="yiyi-572">&#x62C9;&#x5FB7;&#x8BF7;&#x6C42;&#x793C;&#x8C8C;&#x5FB7;&#x514B;&#x7C73;&#x52D2;&#x3002;<a class="changeset-link headerlink reference internal" href="#change-28077f9da4dc99fa0ea9c3c26c2206b0">&#xB6;</a></span></p><p><span class="yiyi-st" id="yiyi-573">&#x53C2;&#x8003;&#x6587;&#x732E;&#xFF1A;<a class="reference external" href="http://www.sqlalchemy.org/trac/ticket/3021">&#xFF03;3021</a>&#xFF0C;<a class="reference external" href="https://github.com/zzzeek/sqlalchemy/pull/87">&#x8BF7;&#x6C42;github&#xFF1A;87</a></span></p></li><li><p id="change-0.9.5-26"><span class="yiyi-st" id="yiyi-574"><span class="target" id="change-3abc7a84a2cd2a4a6b699bf9051e8c4f"><strong>[postgresql] [enhancement] </strong></span>&#x5728;Postgresql&#x65B9;&#x8A00;&#x4E2D;&#x6DFB;&#x52A0;&#x4E86;&#x4E00;&#x4E2A;&#x65B0;&#x7C7B;&#x578B;&#x7684;<a class="reference internal" href="dialects_postgresql.html#sqlalchemy.dialects.postgresql.OID" title="sqlalchemy.dialects.postgresql.OID"><code class="xref py py-class docutils literal"><span class="pre">postgresql.OID</span></code></a>&#x3002;</span><span class="yiyi-st" id="yiyi-575">&#x867D;&#x7136;&#x201C;oid&#x201D;&#x901A;&#x5E38;&#x662F;PG&#x4E2D;&#x7684;&#x79C1;&#x6709;&#x7C7B;&#x578B;&#xFF0C;&#x4F46;&#x5728;&#x73B0;&#x4EE3;&#x7248;&#x672C;&#x4E2D;&#x5E76;&#x672A;&#x516C;&#x5F00;&#xFF0C;&#x4F46;&#x6709;&#x4E00;&#x4E9B;PG&#x7528;&#x4F8B;&#xFF0C;&#x4F8B;&#x5982;&#x53EF;&#x80FD;&#x66B4;&#x9732;&#x8FD9;&#x4E9B;&#x7C7B;&#x578B;&#x7684;&#x5927;&#x5BF9;&#x8C61;&#x652F;&#x6301;&#xFF0C;&#x4EE5;&#x53CA;&#x67D0;&#x4E9B;&#x7528;&#x6237;&#x62A5;&#x544A;&#x7684;&#x6A21;&#x5F0F;&#x53CD;&#x5C04;&#x7528;&#x4F8B;&#x3002; <a class="changeset-link headerlink reference internal" href="#change-3abc7a84a2cd2a4a6b699bf9051e8c4f">&#xB6; T0&gt;</a></span></p><p><span class="yiyi-st" id="yiyi-576">&#x53C2;&#x8003;&#x6587;&#x732E;&#xFF1A;<a class="reference external" href="http://www.sqlalchemy.org/trac/ticket/3002">&#xFF03;3002</a></span></p></li></ul></div><div class="section" id="change-0.9.5-mysql"><h3><span class="yiyi-st" id="yiyi-577">MySQL&#x7684;<a class="headerlink" href="#change-0.9.5-mysql" title="Permalink to this headline">&#xB6; T0&gt;</a></span></h3><ul class="simple"><li><p id="change-0.9.5-27"><span class="yiyi-st" id="yiyi-578"><span class="target" id="change-33595244b0c4abd0a6977c31c3b4f5fa"><strong>[mysql] [bug] </strong></span>Fixed bug where column names added to <code class="docutils literal"><span class="pre">mysql_length</span></code> parameter on an index needed to have the same quoting for quoted names in order to be recognized. </span><span class="yiyi-st" id="yiyi-579">&#x8BE5;&#x4FEE;&#x590D;&#x4F7F;&#x5F97;&#x5F15;&#x53F7;&#x662F;&#x53EF;&#x9009;&#x7684;&#xFF0C;&#x4F46;&#x4E5F;&#x63D0;&#x4F9B;&#x4E86;&#x65E7;&#x7684;&#x884C;&#x4E3A;&#xFF0C;&#x4EE5;&#x4FBF;&#x4E0E;&#x4F7F;&#x7528;&#x53D8;&#x901A;&#x65B9;&#x6CD5;&#x7684;&#x5411;&#x540E;&#x517C;&#x5BB9;&#x3002;<a class="changeset-link headerlink reference internal" href="#change-33595244b0c4abd0a6977c31c3b4f5fa">&#xB6;</a></span></p><p><span class="yiyi-st" id="yiyi-580">&#x8FD9;&#x4E2A;&#x6539;&#x53D8;&#x4E5F;&#x88AB;<strong>&#x56DE;&#x9000;</strong>&#x4E3A;&#xFF1A;0.8.7</span></p><p><span class="yiyi-st" id="yiyi-581">&#x53C2;&#x8003;&#x6587;&#x732E;&#xFF1A;<a class="reference external" href="http://www.sqlalchemy.org/trac/ticket/3085">&#xFF03;3085</a></span></p></li><li><p id="change-0.9.5-28"><span class="yiyi-st" id="yiyi-582"><span class="target" id="change-d8934497b6707c20ed9dc43c8386e63d"><strong>[mysql] [bug] </strong></span>&#x589E;&#x52A0;&#x4E86;&#x5BF9;&#x4F7F;&#x7528;&#x7B49;&#x53F7;&#x5728;&#x7D22;&#x5F15;&#x4E2D;&#x5305;&#x542B;KEY_BLOCK_SIZE&#x7684;&#x8868;&#x6765;&#x53CD;&#x6620;&#x8868;&#x7684;&#x652F;&#x6301;&#x3002;</span><span class="yiyi-st" id="yiyi-583">&#x62C9;&#x8BF7;&#x6C42;&#x793C;&#x8C8C;&#x8096;&#x6069;McGivern&#x3002;<a class="changeset-link headerlink reference internal" href="#change-d8934497b6707c20ed9dc43c8386e63d">&#xB6;</a></span></p><p><span class="yiyi-st" id="yiyi-584">&#x8FD9;&#x4E2A;&#x6539;&#x53D8;&#x4E5F;&#x88AB;<strong>&#x56DE;&#x9000;</strong>&#x4E3A;&#xFF1A;0.8.7</span></p><p><span class="yiyi-st" id="yiyi-585">&#x53C2;&#x8003;&#x6587;&#x732E;&#xFF1A;<a class="reference external" href="https://bitbucket.org/zzzeek/sqlalchemy/pull-request/15">&#x62C9;&#x53D6;&#x8BF7;&#x6C42;bitbucket&#xFF1A;15</a></span></p></li></ul></div><div class="section" id="change-0.9.5-mssql"><h3><span class="yiyi-st" id="yiyi-586">MSSQL <a class="headerlink" href="#change-0.9.5-mssql" title="Permalink to this headline">&#xB6; T0&gt;</a></span></h3><ul class="simple"><li><p id="change-0.9.5-29"><span class="yiyi-st" id="yiyi-587"><span class="target" id="change-0ff915fd49e5ce758c93f7563aebdb56"><strong>[mssql] [bug] </strong></span>Revised the query used to determine the current default schema name to use the <code class="docutils literal"><span class="pre">database_principal_id()</span></code> function in conjunction with the <code class="docutils literal"><span class="pre">sys.database_principals</span></code> view so that we can determine the default schema independently of the type of login in progress (e.g., SQL Server, Windows, etc).<a class="changeset-link headerlink reference internal" href="#change-0ff915fd49e5ce758c93f7563aebdb56">&#xB6;</a></span></p><p><span class="yiyi-st" id="yiyi-588">&#x53C2;&#x8003;&#x6587;&#x732E;&#xFF1A;<a class="reference external" href="http://www.sqlalchemy.org/trac/ticket/3025">&#xFF03;3025</a></span></p></li></ul></div><div class="section" id="change-0.9.5-firebird"><h3><span class="yiyi-st" id="yiyi-589">&#x706B;&#x9E1F;<a class="headerlink" href="#change-0.9.5-firebird" title="Permalink to this headline">&#xB6; T0&gt;</a></span></h3><ul class="simple"><li><p id="change-0.9.5-30"><span class="yiyi-st" id="yiyi-590"><span class="target" id="change-d63a34acab255efce997614e69c98053"><strong>[firebird] [bug] </strong></span>Fixed bug where the combination of &#x201C;limit&#x201D; rendering as &#x201C;SELECT FIRST n ROWS&#x201D; using a bound parameter (only firebird has both), combined with column-level subqueries which also feature &#x201C;limit&#x201D; as well as &#x201C;positional&#x201D; bound parameters (e.g. qmark style) would erroneously assign the subquery-level positions before that of the enclosing SELECT, thus returning parameters which are out of order.<a class="changeset-link headerlink reference internal" href="#change-d63a34acab255efce997614e69c98053">&#xB6;</a></span></p><p><span class="yiyi-st" id="yiyi-591">&#x53C2;&#x8003;&#x6587;&#x732E;&#xFF1A;<a class="reference external" href="http://www.sqlalchemy.org/trac/ticket/3038">&#xFF03;3038</a></span></p></li></ul></div><div class="section" id="change-0.9.5-misc"><h3><span class="yiyi-st" id="yiyi-592">&#x6742;&#x9879;<a class="headerlink" href="#change-0.9.5-misc" title="Permalink to this headline">&#xB6; T0&gt;</a></span></h3><ul class="simple"><li><p id="change-0.9.5-31"><span class="yiyi-st" id="yiyi-593"><span class="target" id="change-b027ac056997c7e3f7a6fa31de610989"><strong>[feature] [examples] </strong></span>&#x6DFB;&#x52A0;&#x4E86;&#x4E00;&#x4E2A;&#x4F7F;&#x7528;&#x6700;&#x65B0;&#x5173;&#x7CFB;&#x529F;&#x80FD;&#x8BF4;&#x660E;&#x7269;&#x5316;&#x8DEF;&#x5F84;&#x7684;&#x65B0;&#x793A;&#x4F8B;&#x3002;</span><span class="yiyi-st" id="yiyi-594">Jack Zhou&#x63D0;&#x4F9B;&#x7684;&#x4F8B;&#x5B50;&#x3002;<a class="changeset-link headerlink reference internal" href="#change-b027ac056997c7e3f7a6fa31de610989">&#xB6;</a></span></p><p><span class="yiyi-st" id="yiyi-595">&#x53C2;&#x8003;&#x6587;&#x732E;&#xFF1A;<a class="reference external" href="https://bitbucket.org/zzzeek/sqlalchemy/pull-request/21">pull request bitbucket&#xFF1A;21</a></span></p></li><li><p id="change-0.9.5-32"><span class="yiyi-st" id="yiyi-596"><span class="target" id="change-780993758db8d5169a0b88014034f665"><strong>[bug] [declarative] </strong></span>The <code class="docutils literal"><span class="pre">__mapper_args__</span></code> dictionary is copied from a declarative mixin or abstract class when accessed, so that modifications made to this dictionary by declarative itself won&#x2019;t conflict with that of other mappings. </span><span class="yiyi-st" id="yiyi-597">&#x5173;&#x4E8E;<code class="docutils literal"><span class="pre">version_id_col</span></code>&#x548C;<code class="docutils literal"><span class="pre">polymorphic_on</span></code>&#x53C2;&#x6570;&#x7684;&#x5B57;&#x5178;&#x88AB;&#x4FEE;&#x6539;&#xFF0C;&#x5C06;&#x5185;&#x90E8;&#x7684;&#x5217;&#x66FF;&#x6362;&#x4E3A;&#x6B63;&#x5F0F;&#x6620;&#x5C04;&#x5230;&#x672C;&#x5730;&#x7C7B;/&#x8868;&#x7684;&#x5217;&#x3002;<a class="changeset-link headerlink reference internal" href="#change-780993758db8d5169a0b88014034f665">&#xB6; t4 &gt;</a></span></p><p><span class="yiyi-st" id="yiyi-598">&#x8FD9;&#x4E2A;&#x6539;&#x53D8;&#x4E5F;&#x88AB;<strong>&#x56DE;&#x9000;</strong>&#x4E3A;&#xFF1A;0.8.7</span></p><p><span class="yiyi-st" id="yiyi-599">&#x53C2;&#x8003;&#x6587;&#x732E;&#xFF1A;<a class="reference external" href="http://www.sqlalchemy.org/trac/ticket/3062">&#xFF03;3062</a></span></p></li><li><p id="change-0.9.5-33"><span class="yiyi-st" id="yiyi-600"><span class="target" id="change-b4a24f8e25cdd80a7862778ebaa5bb60"><strong>[bug] [ext] </strong></span>Fixed bug in mutable extension where <a class="reference internal" href="orm_extensions_mutable.html#sqlalchemy.ext.mutable.MutableDict" title="sqlalchemy.ext.mutable.MutableDict"><code class="xref py py-class docutils literal"><span class="pre">MutableDict</span></code></a> did not report change events for the <code class="docutils literal"><span class="pre">setdefault()</span></code> dictionary operation.<a class="changeset-link headerlink reference internal" href="#change-b4a24f8e25cdd80a7862778ebaa5bb60">&#xB6;</a></span></p><p><span class="yiyi-st" id="yiyi-601">&#x8FD9;&#x4E2A;&#x6539;&#x53D8;&#x4E5F;&#x88AB;<strong>&#x56DE;&#x9000;</strong>&#x4E3A;&#xFF1A;0.8.7</span></p><p><span class="yiyi-st" id="yiyi-602">&#x53C2;&#x8003;&#x6587;&#x732E;&#xFF1A;<a class="reference external" href="http://www.sqlalchemy.org/trac/ticket/3093">&#xFF03;3093</a>&#xFF0C;<a class="reference external" href="http://www.sqlalchemy.org/trac/ticket/3051">&#xFF03;3051</a></span></p></li><li><p id="change-0.9.5-34"><span class="yiyi-st" id="yiyi-603"><span class="target" id="change-6faeea1f65b0b63436eba3a21a4eff20"><strong>[bug] [ext] </strong></span>Fixed bug where <a class="reference internal" href="orm_extensions_mutable.html#sqlalchemy.ext.mutable.MutableDict.setdefault" title="sqlalchemy.ext.mutable.MutableDict.setdefault"><code class="xref py py-meth docutils literal"><span class="pre">MutableDict.setdefault()</span></code></a> didn&#x2019;t return the existing or new value (this bug was not released in any 0.8 version). </span><span class="yiyi-st" id="yiyi-604">&#x8BF7;&#x6C42;&#x793C;&#x8C8C;&#x6258;&#x9A6C;&#x65AF;Herv&#xE9;&#x3002;<a class="changeset-link headerlink reference internal" href="#change-6faeea1f65b0b63436eba3a21a4eff20">&#xB6;</a></span></p><p><span class="yiyi-st" id="yiyi-605">&#x8FD9;&#x4E2A;&#x6539;&#x53D8;&#x4E5F;&#x88AB;<strong>&#x56DE;&#x9000;</strong>&#x4E3A;&#xFF1A;0.8.7</span></p><p><span class="yiyi-st" id="yiyi-606">References: <a class="reference external" href="http://www.sqlalchemy.org/trac/ticket/3093">#3093</a>, <a class="reference external" href="http://www.sqlalchemy.org/trac/ticket/3051">#3051</a>, <a class="reference external" href="https://bitbucket.org/zzzeek/sqlalchemy/pull-request/24">pull request bitbucket:24</a></span></p></li><li><p id="change-0.9.5-35"><span class="yiyi-st" id="yiyi-607"><span class="target" id="change-aa048eb945e5e5d48d5efed1dd7c64c2"><strong>[bug] [testsuite] </strong></span>In public test suite, shanged to use of <code class="docutils literal"><span class="pre">String(40)</span></code> from less-supported <code class="docutils literal"><span class="pre">Text</span></code> in <code class="docutils literal"><span class="pre">StringTest.test_literal_backslashes</span></code>. </span><span class="yiyi-st" id="yiyi-608">Pullreq&#x793C;&#x8C8C;Jan. <a class="changeset-link headerlink reference internal" href="#change-aa048eb945e5e5d48d5efed1dd7c64c2">&#xB6;</a></span></p><p><span class="yiyi-st" id="yiyi-609">&#x53C2;&#x8003;&#xFF1A;<a class="reference external" href="https://github.com/zzzeek/sqlalchemy/pull/95">&#x8BF7;&#x6C42;github&#xFF1A;95</a></span></p></li><li><p id="change-0.9.5-36"><span class="yiyi-st" id="yiyi-610"><span class="target" id="change-0482bb06234a4584cf24a7b5f94ba4e7"><strong>[bug] [tests] [py3k] </strong></span>&#x66F4;&#x6B63;&#x4E86;&#x8FD0;&#x884C;&#x6D4B;&#x8BD5;&#x65F6;&#x6D89;&#x53CA;<code class="docutils literal"><span class="pre">imp</span></code>&#x6A21;&#x5757;&#x548C;Python 3.3&#x6216;&#x66F4;&#x9AD8;&#x7248;&#x672C;&#x7684;&#x4E00;&#x4E9B;&#x5F03;&#x7528;&#x8B66;&#x544A;&#x3002;</span><span class="yiyi-st" id="yiyi-611">&#x62C9;&#x8BF7;&#x6C42;&#x9A6C;&#x7279;Chisholm&#x3002;<a class="changeset-link headerlink reference internal" href="#change-0482bb06234a4584cf24a7b5f94ba4e7">&#xB6;</a></span></p><p><span class="yiyi-st" id="yiyi-612">References: <a class="reference external" href="http://www.sqlalchemy.org/trac/ticket/2830">#2830</a>, <a class="reference external" href="https://bitbucket.org/zzzeek/sqlalchemy/pull-request/2830">pull request bitbucket:2830</a></span></p></li></ul></div></div><div class="section" id="change-0.9.4"><h2><span class="yiyi-st" id="yiyi-614">0.9.4 <a class="headerlink" href="#change-0.9.4" title="Permalink to this headline">&#xB6; T0&gt;</a></span></h2><span class="yiyi-st" id="yiyi-762">&#x53D1;&#x5E03;&#x65E5;&#x671F;&#xFF1A;2014&#x5E74;3&#x6708;28&#x65E5;</span><div class="section" id="change-0.9.4-general"><h3><span class="yiyi-st" id="yiyi-615">&#x4E00;&#x822C;<a class="headerlink" href="#change-0.9.4-general" title="Permalink to this headline">&#xB6; T0&gt;</a></span></h3><ul class="simple"><li><p id="change-0.9.4-0"><span class="yiyi-st" id="yiyi-616"><span class="target" id="change-8b07998904f97052927cddc00d64a109"><strong>[general] [feature] </strong></span>&#x4E3A;pytest&#x6DFB;&#x52A0;&#x4E86;&#x652F;&#x6301;&#x4EE5;&#x8FD0;&#x884C;&#x6D4B;&#x8BD5;&#x3002;</span><span class="yiyi-st" id="yiyi-617">&#x9664;&#x4E86;&#x9F3B;&#x5B50;&#x4E4B;&#x5916;&#xFF0C;&#x8FD9;&#x4E2A;&#x8DD1;&#x6B65;&#x8005;&#x76EE;&#x524D;&#x6B63;&#x5728;&#x5F97;&#x5230;&#x652F;&#x6301;&#xFF0C;&#x5E76;&#x4E14;&#x53EF;&#x80FD;&#x4F1A;&#x66F4;&#x559C;&#x6B22;&#x524D;&#x8FDB;&#x3002;</span><span class="yiyi-st" id="yiyi-618">SQLAlchemy&#x4F7F;&#x7528;&#x7684;&#x9F3B;&#x63D2;&#x4EF6;&#x7CFB;&#x7EDF;&#x5DF2;&#x7ECF;&#x62C6;&#x5206;&#x51FA;&#x6765;&#xFF0C;&#x56E0;&#x6B64;&#x5B83;&#x4E5F;&#x53EF;&#x4EE5;&#x5728;pytest&#x4E0B;&#x8FD0;&#x884C;&#x3002;</span><span class="yiyi-st" id="yiyi-619">&#x76EE;&#x524D;&#x8FD8;&#x6CA1;&#x6709;&#x8BA1;&#x5212;&#x653E;&#x5F03;&#x5BF9;&#x9F3B;&#x5B50;&#x7684;&#x652F;&#x6301;&#xFF0C;&#x6211;&#x4EEC;&#x5E0C;&#x671B;&#x6D4B;&#x8BD5;&#x5957;&#x4EF6;&#x672C;&#x8EAB;&#x53EF;&#x4EE5;&#x7EE7;&#x7EED;&#x5C3D;&#x53EF;&#x80FD;&#x4E0D;&#x53D7;&#x6D4B;&#x8BD5;&#x5E73;&#x53F0;&#x7684;&#x5F71;&#x54CD;&#x3002;</span><span class="yiyi-st" id="yiyi-620">&#x6709;&#x5173;&#x4F7F;&#x7528;pytest&#x8FD0;&#x884C;&#x6D4B;&#x8BD5;&#x7684;&#x66F4;&#x65B0;&#x4FE1;&#x606F;&#xFF0C;&#x8BF7;&#x53C2;&#x9605;&#x6587;&#x4EF6;README.unittests.rst&#x3002;</span></p><p><span class="yiyi-st" id="yiyi-621">&#x901A;&#x8FC7;&#x591A;&#x6B21;&#x6307;&#x5B9A;<code class="docutils literal"><span class="pre">--db</span></code>&#x548C;/&#x6216;<code class="docutils literal"><span class="pre">--dburi</span></code>&#x6807;&#x5FD7;&#xFF0C;&#x6D4B;&#x8BD5;&#x63D2;&#x4EF6;&#x7CFB;&#x7EDF;&#x4E5F;&#x5F97;&#x5230;&#x4E86;&#x589E;&#x5F3A;&#xFF0C;&#x4EE5;&#x652F;&#x6301;&#x4E00;&#x6B21;&#x8FD0;&#x884C;&#x591A;&#x4E2A;&#x6570;&#x636E;&#x5E93;URL&#x7684;&#x6D4B;&#x8BD5;&#x3002;</span><span class="yiyi-st" id="yiyi-622">&#x8FD9;&#x4E0D;&#x4F1A;&#x4E3A;&#x6BCF;&#x4E2A;&#x6570;&#x636E;&#x5E93;&#x8FD0;&#x884C;&#x6574;&#x4E2A;&#x6D4B;&#x8BD5;&#x5957;&#x4EF6;&#xFF0C;&#x800C;&#x662F;&#x5141;&#x8BB8;&#x7279;&#x5B9A;&#x4E8E;&#x67D0;&#x4E9B;&#x540E;&#x7AEF;&#x7684;&#x6D4B;&#x8BD5;&#x7528;&#x4F8B;&#x5728;&#x8FD0;&#x884C;&#x6D4B;&#x8BD5;&#x65F6;&#x4F7F;&#x7528;&#x8BE5;&#x540E;&#x7AEF;&#x3002;</span><span class="yiyi-st" id="yiyi-623">&#x5F53;&#x4F7F;&#x7528;pytest&#x4F5C;&#x4E3A;&#x6D4B;&#x8BD5;&#x8FD0;&#x884C;&#x5668;&#x65F6;&#xFF0C;&#x7CFB;&#x7EDF;&#x8FD8;&#x4F1A;&#x591A;&#x6B21;&#x8FD0;&#x884C;&#x7279;&#x5B9A;&#x7684;&#x6D4B;&#x8BD5;&#x5957;&#x4EF6;&#xFF0C;&#x6BCF;&#x4E2A;&#x6570;&#x636E;&#x5E93;&#x8FD0;&#x884C;&#x4E00;&#x6B21;&#xFF0C;&#x7279;&#x522B;&#x662F;&#x201C;&#x65B9;&#x8A00;&#x5957;&#x4EF6;&#x201D;&#x4E2D;&#x7684;&#x90A3;&#x4E9B;&#x6D4B;&#x8BD5;&#x3002;</span><span class="yiyi-st" id="yiyi-624">&#x8BA1;&#x5212;&#x662F;Alembic&#x8FD8;&#x5C06;&#x4F7F;&#x7528;&#x589E;&#x5F3A;&#x578B;&#x7CFB;&#x7EDF;&#xFF0C;&#x5E76;&#x5141;&#x8BB8;Alembic&#x5728;&#x4E00;&#x6B21;&#x8FD0;&#x884C;&#x4E2D;&#x9488;&#x5BF9;&#x591A;&#x4E2A;&#x540E;&#x7AEF;&#x8FD0;&#x884C;&#x8FC1;&#x79FB;&#x64CD;&#x4F5C;&#x6D4B;&#x8BD5;&#xFF0C;&#x5305;&#x62EC;Alembic&#x672C;&#x8EAB;&#x672A;&#x5305;&#x542B;&#x7684;&#x7B2C;&#x4E09;&#x65B9;&#x540E;&#x7AEF;&#x3002;</span><span class="yiyi-st" id="yiyi-625">&#x7B2C;&#x4E09;&#x65B9;&#x65B9;&#x8A00;&#x548C;&#x6269;&#x5C55;&#x4E5F;&#x88AB;&#x9F13;&#x52B1;&#x5C06;SQLAlchemy&#x7684;&#x6D4B;&#x8BD5;&#x5957;&#x4EF6;&#x4F5C;&#x4E3A;&#x57FA;&#x7840;&#x8FDB;&#x884C;&#x6807;&#x51C6;&#x5316;&#xFF1B;&#x8BF7;&#x53C2;&#x9605;README.dialects.rst&#x6587;&#x4EF6;&#x4EE5;&#x4E86;&#x89E3;&#x4ECE;SQLAlchemy&#x6D4B;&#x8BD5;&#x5E73;&#x53F0;&#x6784;&#x5EFA;&#x7684;&#x80CC;&#x666F;&#x3002;</span></p><span class="yiyi-st" id="yiyi-626"> <a class="changeset-link headerlink reference internal" href="#change-8b07998904f97052927cddc00d64a109">&#xB6;</a></span><p></p></li><li><p id="change-0.9.4-1"><span class="yiyi-st" id="yiyi-627"><span class="target" id="change-aa9491d98f1ead53e0464652e0816e71"><strong>[general] [bug] </strong></span>Adjusted <code class="docutils literal"><span class="pre">setup.py</span></code> file to support the possible future removal of the <code class="docutils literal"><span class="pre">setuptools.Feature</span></code> extension from setuptools. </span><span class="yiyi-st" id="yiyi-628">&#x5982;&#x679C;&#x6B64;&#x5173;&#x952E;&#x5B57;&#x4E0D;&#x5B58;&#x5728;&#xFF0C;&#x5219;&#x4F7F;&#x7528;setuptools&#x8FDB;&#x884C;&#x8BBE;&#x7F6E;&#x4ECD;&#x7136;&#x4F1A;&#x6210;&#x529F;&#xFF0C;&#x800C;&#x4E0D;&#x4F1A;&#x9000;&#x56DE;&#x5230;distutils&#x3002;</span><span class="yiyi-st" id="yiyi-629">&#x53EF;&#x4EE5;&#x901A;&#x8FC7;&#x8BBE;&#x7F6E;DISABLE_SQLALCHEMY_CEXT&#x73AF;&#x5883;&#x53D8;&#x91CF;&#x6765;&#x7981;&#x7528;C&#x6269;&#x5C55;&#x6784;&#x5EFA;&#x3002;</span><span class="yiyi-st" id="yiyi-630">&#x65E0;&#x8BBA;setuptools&#x662F;&#x5426;&#x53EF;&#x7528;&#xFF0C;&#x8BE5;&#x53D8;&#x91CF;&#x90FD;&#x9002;&#x7528;&#x3002;<a class="changeset-link headerlink reference internal" href="#change-aa9491d98f1ead53e0464652e0816e71">&#xB6;</a></span></p><p><span class="yiyi-st" id="yiyi-631">&#x8FD9;&#x4E2A;&#x6539;&#x53D8;&#x4E5F;&#x662F;<strong>backported</strong>&#x5230;&#xFF1A;0.8.6</span></p><p><span class="yiyi-st" id="yiyi-632">&#x53C2;&#x8003;&#x6587;&#x732E;&#xFF1A;<a class="reference external" href="http://www.sqlalchemy.org/trac/ticket/2986">&#xFF03;2986</a></span></p></li><li><p id="change-0.9.4-2"><span class="yiyi-st" id="yiyi-633"><span class="target" id="change-1c1ca7f7a0d5e6ba577a8a31920eba2d"><strong>[general] [bug] </strong></span>Fixed some test/feature failures occurring in Python 3.4, in particular the logic used to wrap &#x201C;column default&#x201D; callables wouldn&#x2019;t work properly for Python built-ins.<a class="changeset-link headerlink reference internal" href="#change-1c1ca7f7a0d5e6ba577a8a31920eba2d">&#xB6;</a></span></p><p><span class="yiyi-st" id="yiyi-634">&#x53C2;&#x8003;&#x6587;&#x732E;&#xFF1A;<a class="reference external" href="http://www.sqlalchemy.org/trac/ticket/2979">&#xFF03;2979</a></span></p></li></ul></div><div class="section" id="change-0.9.4-orm"><h3><span class="yiyi-st" id="yiyi-635">ORM <a class="headerlink" href="#change-0.9.4-orm" title="Permalink to this headline">&#xB6; T0&gt;</a></span></h3><ul class="simple"><li><p id="change-0.9.4-3"><span class="yiyi-st" id="yiyi-636"><span class="target" id="change-9e23c7c28f359372f92c6661ec54a74f"><strong>[orm] [feature] </strong></span>&#x6DFB;&#x52A0;&#x4E86;&#x65B0;&#x7684;&#x53C2;&#x6570;<a class="reference internal" href="orm_mapping_api.html#sqlalchemy.orm.mapper.params.confirm_deleted_rows" title="sqlalchemy.orm.mapper"><code class="xref py py-paramref docutils literal"><span class="pre">orm.mapper.confirm_deleted_rows</span></code></a>&#x3002;</span><span class="yiyi-st" id="yiyi-637">&#x9ED8;&#x8BA4;&#x4E3A;True&#xFF0C;&#x8868;&#x793A;&#x4E00;&#x7CFB;&#x5217;DELETE&#x8BED;&#x53E5;&#x5E94;&#x8BE5;&#x786E;&#x8BA4;&#x6E38;&#x6807;&#x7684;&#x884C;&#x6570;&#x4E0E;&#x5339;&#x914D;&#x7684;&#x4E3B;&#x952E;&#x7684;&#x6570;&#x91CF;&#x76F8;&#x5339;&#x914D;&#xFF1B;&#x5728;&#x5927;&#x591A;&#x6570;&#x60C5;&#x51B5;&#x4E0B;&#xFF08;&#x9664;&#x4E86;&#x4F7F;&#x7528;version_id&#x65F6;&#xFF09;&#xFF0C;&#x6B64;&#x884C;&#x4E3A;&#x5DF2;&#x88AB;&#x53D6;&#x6D88;&#x4EE5;&#x652F;&#x6301;&#x81EA;&#x5F15;&#x7528;ON DELETE CASCADE&#x7684;&#x5F02;&#x5E38;&#x8FB9;&#x7F18;&#x60C5;&#x51B5;&#xFF1B;&#x4E3A;&#x4E86;&#x9002;&#x5E94;&#x8FD9;&#x79CD;&#x60C5;&#x51B5;&#xFF0C;&#x8BE5;&#x6D88;&#x606F;&#x73B0;&#x5728;&#x53EA;&#x662F;&#x4E00;&#x4E2A;&#x8B66;&#x544A;&#xFF0C;&#x800C;&#x4E0D;&#x662F;&#x4E00;&#x4E2A;&#x4F8B;&#x5916;&#xFF0C;&#x5E76;&#x4E14;&#x8BE5;&#x6807;&#x5FD7;&#x53EF;&#x7528;&#x4E8E;&#x6307;&#x793A;&#x4E00;&#x79CD;&#x6620;&#x5C04;&#xFF0C;&#x8BE5;&#x6620;&#x5C04;&#x9700;&#x8981;&#x8FD9;&#x79CD;&#x6027;&#x8D28;&#x7684;&#x81EA;&#x5F15;&#x7528;&#x7EA7;&#x8054;&#x5220;&#x9664;&#x3002;</span><span class="yiyi-st" id="yiyi-638">&#x53E6;&#x8BF7;&#x53C2;&#x9605;<a class="reference external" href="http://www.sqlalchemy.org/trac/ticket/2403">&#xFF03;2403</a>&#x4EE5;&#x4E86;&#x89E3;&#x539F;&#x59CB;&#x66F4;&#x6539;&#x7684;&#x80CC;&#x666F;&#x3002;<a class="changeset-link headerlink reference internal" href="#change-9e23c7c28f359372f92c6661ec54a74f">&#xB6;</a></span></p><p><span class="yiyi-st" id="yiyi-639">&#x53C2;&#x8003;&#x6587;&#x732E;&#xFF1A;<a class="reference external" href="http://www.sqlalchemy.org/trac/ticket/3007">&#xFF03;3007</a></span></p></li><li><p id="change-0.9.4-4"><span class="yiyi-st" id="yiyi-640"><span class="target" id="change-4dbefa991bc15832dbd5722613a9ec8b"><strong>[orm] [feature] </strong></span>A warning is emitted if the <a class="reference internal" href="orm_events.html#sqlalchemy.orm.events.MapperEvents.before_configured" title="sqlalchemy.orm.events.MapperEvents.before_configured"><code class="xref py py-meth docutils literal"><span class="pre">MapperEvents.before_configured()</span></code></a> or <a class="reference internal" href="orm_events.html#sqlalchemy.orm.events.MapperEvents.after_configured" title="sqlalchemy.orm.events.MapperEvents.after_configured"><code class="xref py py-meth docutils literal"><span class="pre">MapperEvents.after_configured()</span></code></a> events are applied to a specific mapper or mapped class, as the events are only invoked for the <a class="reference internal" href="orm_mapping_api.html#sqlalchemy.orm.mapper.Mapper" title="sqlalchemy.orm.mapper.Mapper"><code class="xref py py-class docutils literal"><span class="pre">Mapper</span></code></a> target at the general level.<a class="changeset-link headerlink reference internal" href="#change-4dbefa991bc15832dbd5722613a9ec8b">&#xB6;</a></span></p><p></p></li><li><p id="change-0.9.4-5"><span class="yiyi-st" id="yiyi-641"><span class="target" id="change-aef7530390a87c53f08a067e5881ebc8"><strong>[orm] [feature] </strong></span>Added a new keyword argument <code class="docutils literal"><span class="pre">once=True</span></code> to <a class="reference internal" href="core_event.html#sqlalchemy.event.listen" title="sqlalchemy.event.listen"><code class="xref py py-func docutils literal"><span class="pre">event.listen()</span></code></a> and <a class="reference internal" href="core_event.html#sqlalchemy.event.listens_for" title="sqlalchemy.event.listens_for"><code class="xref py py-func docutils literal"><span class="pre">event.listens_for()</span></code></a>. </span><span class="yiyi-st" id="yiyi-642">&#x8FD9;&#x662F;&#x4E00;&#x4E2A;&#x65B9;&#x4FBF;&#x7684;&#x529F;&#x80FD;&#xFF0C;&#x5B83;&#x5C06;&#x5305;&#x88C5;&#x7ED9;&#x5B9A;&#x7684;&#x4FA6;&#x542C;&#x5668;&#xFF0C;&#x4F7F;&#x5176;&#x4EC5;&#x88AB;&#x8C03;&#x7528;&#x4E00;&#x6B21;&#x3002;<a class="changeset-link headerlink reference internal" href="#change-aef7530390a87c53f08a067e5881ebc8">&#xB6;</a></span></p><p></p></li><li><p id="change-0.9.4-6"><span class="yiyi-st" id="yiyi-643"><span class="target" id="change-2363c295319d0823eecd2e63c95663e5"><strong>[orm] [feature] </strong></span>&#x4E3A;<a class="reference internal" href="orm_relationship_api.html#sqlalchemy.orm.relationship.params.innerjoin" title="sqlalchemy.orm.relationship"><code class="xref py py-paramref docutils literal"><span class="pre">relationship.innerjoin</span></code></a>&#x6DFB;&#x52A0;&#x4E86;&#x4E00;&#x4E2A;&#x65B0;&#x9009;&#x9879;&#xFF0C;&#x7528;&#x4E8E;&#x6307;&#x5B9A;&#x5B57;&#x7B26;&#x4E32;<code class="docutils literal"><span class="pre">&quot;nested&quot;</span></code>&#x3002;</span><span class="yiyi-st" id="yiyi-644">&#x5F53;&#x8BBE;&#x7F6E;&#x4E3A;<code class="docutils literal"><span class="pre">&quot;nested&quot;</span></code>&#x800C;&#x4E0D;&#x662F;<code class="docutils literal"><span class="pre">True</span></code>&#x65F6;&#xFF0C;&#x8FDE;&#x63A5;&#x7684;&#x201C;&#x94FE;&#x63A5;&#x201D;&#x5C06;&#x5728;&#x73B0;&#x6709;&#x5916;&#x90E8;&#x8FDE;&#x63A5;&#x7684;&#x53F3;&#x4FA7;&#x52A0;&#x5165;&#x5185;&#x90E8;&#x8FDE;&#x63A5;&#xFF0C;&#x800C;&#x4E0D;&#x662F;&#x94FE;&#x63A5;&#x4E3A;&#x4E00;&#x4E32;&#x5916;&#x8FDE;&#x63A5;&#x3002;</span><span class="yiyi-st" id="yiyi-645">&#x8FD9;&#x53EF;&#x80FD;&#x5E94;&#x8BE5;&#x662F;0.9&#x53D1;&#x5E03;&#x65F6;&#x7684;&#x9ED8;&#x8BA4;&#x884C;&#x4E3A;&#xFF0C;&#x56E0;&#x4E3A;&#x6211;&#x4EEC;&#x5728;ORM&#x4E2D;&#x5F15;&#x5165;&#x4E86;&#x53F3;&#x5D4C;&#x5957;&#x8FDE;&#x63A5;&#x7684;&#x529F;&#x80FD;&#xFF0C;&#x4F46;&#x662F;&#x6211;&#x4EEC;&#x73B0;&#x5728;&#x5C06;&#x5176;&#x4FDD;&#x7559;&#x4E3A;&#x975E;&#x9ED8;&#x8BA4;&#x503C;&#x4EE5;&#x907F;&#x514D;&#x66F4;&#x591A;&#x7684;&#x610F;&#x5916;&#x3002;</span></p><div class="admonition seealso"><p class="first admonition-title"><span class="yiyi-st" id="yiyi-646">&#x4E5F;&#x53EF;&#x4EE5;&#x770B;&#x770B;</span></p><p class="last"><span class="yiyi-st" id="yiyi-647"><a class="reference internal" href="migration_09.html#feature-2976"><span>Right-nested inner joins available in joined eager loads</span></a></span></p></div><span class="yiyi-st" id="yiyi-649"> <a class="changeset-link headerlink reference internal" href="#change-2363c295319d0823eecd2e63c95663e5">&#xB6;</a></span><p><span class="yiyi-st" id="yiyi-648">&#x53C2;&#x8003;&#x6587;&#x732E;&#xFF1A;<a class="reference external" href="http://www.sqlalchemy.org/trac/ticket/2976">&#xFF03;2976</a></span></p></li><li><p id="change-0.9.4-7"><span class="yiyi-st" id="yiyi-650"><span class="target" id="change-0c43a5d88cf8a178453e8e7bb6dd6346"><strong>[orm] [bug] </strong></span>Fixed ORM bug where changing the primary key of an object, then marking it for DELETE would fail to target the correct row for DELETE.<a class="changeset-link headerlink reference internal" href="#change-0c43a5d88cf8a178453e8e7bb6dd6346">&#xB6;</a></span></p><p><span class="yiyi-st" id="yiyi-651">&#x8FD9;&#x4E2A;&#x6539;&#x53D8;&#x4E5F;&#x662F;<strong>backported</strong>&#x5230;&#xFF1A;0.8.6</span></p><p><span class="yiyi-st" id="yiyi-652">&#x53C2;&#x8003;&#x6587;&#x732E;&#xFF1A;<a class="reference external" href="http://www.sqlalchemy.org/trac/ticket/3006">&#xFF03;3006</a></span></p></li><li><p id="change-0.9.4-8"><span class="yiyi-st" id="yiyi-653"><span class="target" id="change-035773212f99eca992be16278ffa7c60"><strong>[orm] [bug] </strong></span>Fixed regression from 0.8.3 as a result of <a class="reference external" href="http://www.sqlalchemy.org/trac/ticket/2818">#2818</a> where <a class="reference internal" href="orm_query.html#sqlalchemy.orm.query.Query.exists" title="sqlalchemy.orm.query.Query.exists"><code class="xref py py-meth docutils literal"><span class="pre">Query.exists()</span></code></a> wouldn&#x2019;t work on a query that only had a <a class="reference internal" href="orm_query.html#sqlalchemy.orm.query.Query.select_from" title="sqlalchemy.orm.query.Query.select_from"><code class="xref py py-meth docutils literal"><span class="pre">Query.select_from()</span></code></a> entry but no other entities.<a class="changeset-link headerlink reference internal" href="#change-035773212f99eca992be16278ffa7c60">&#xB6;</a></span></p><p><span class="yiyi-st" id="yiyi-654">&#x8FD9;&#x4E2A;&#x6539;&#x53D8;&#x4E5F;&#x662F;<strong>backported</strong>&#x5230;&#xFF1A;0.8.6</span></p><p><span class="yiyi-st" id="yiyi-655">&#x53C2;&#x8003;&#x6587;&#x732E;&#xFF1A;<a class="reference external" href="http://www.sqlalchemy.org/trac/ticket/2995">&#xFF03;2995</a></span></p></li><li><p id="change-0.9.4-9"><span class="yiyi-st" id="yiyi-656"><span class="target" id="change-982465365ea40acced9cf15b19a4e419"><strong>[orm] [bug] </strong></span>Improved an error message which would occur if a query() were made against a non-selectable, such as a <a class="reference internal" href="core_sqlelement.html#sqlalchemy.sql.expression.literal_column" title="sqlalchemy.sql.expression.literal_column"><code class="xref py py-func docutils literal"><span class="pre">literal_column()</span></code></a>, and then an attempt was made to use <a class="reference internal" href="orm_query.html#sqlalchemy.orm.query.Query.join" title="sqlalchemy.orm.query.Query.join"><code class="xref py py-meth docutils literal"><span class="pre">Query.join()</span></code></a> such that the &#x201C;left&#x201D; side would be determined as <code class="docutils literal"><span class="pre">None</span></code> and then fail. </span><span class="yiyi-st" id="yiyi-657">&#x73B0;&#x5728;&#x53EF;&#x4EE5;&#x660E;&#x786E;&#x68C0;&#x6D4B;&#x5230;&#x8FD9;&#x79CD;&#x60C5;&#x51B5;&#x3002;<a class="changeset-link headerlink reference internal" href="#change-982465365ea40acced9cf15b19a4e419">&#xB6;</a></span></p><p><span class="yiyi-st" id="yiyi-658">&#x8FD9;&#x4E2A;&#x6539;&#x53D8;&#x4E5F;&#x662F;<strong>backported</strong>&#x5230;&#xFF1A;0.8.6</span></p><p></p></li><li><p id="change-0.9.4-10"><span class="yiyi-st" id="yiyi-659"><span class="target" id="change-bafeea020f9eb338bbde39de93481f0b"><strong>[orm] [bug] </strong></span>&#x4ECE;<code class="docutils literal"><span class="pre">sqlalchemy.orm.interfaces.__all__</span></code>&#x4E2D;&#x5220;&#x9664;&#x4E86;&#x8FC7;&#x671F;&#x540D;&#x79F0;&#xFF0C;&#x5E76;&#x4F7F;&#x7528;&#x5F53;&#x524D;&#x540D;&#x79F0;&#x5237;&#x65B0;&#xFF0C;&#x4EE5;&#x4FBF;&#x5BFC;&#x5165;<span class="pre"><span class="pre">&gt; <span class="pre">*</span>&#x518D;&#x6B21;&#x8FD0;&#x4F5C;&#x3002;<a class="changeset-link headerlink reference internal" href="#change-bafeea020f9eb338bbde39de93481f0b">&#xB6;</a></span></span></span></p><p><span class="yiyi-st" id="yiyi-660">&#x8FD9;&#x4E2A;&#x6539;&#x53D8;&#x4E5F;&#x662F;<strong>backported</strong>&#x5230;&#xFF1A;0.8.6</span></p><p><span class="yiyi-st" id="yiyi-661">&#x53C2;&#x8003;&#x6587;&#x732E;&#xFF1A;<a class="reference external" href="http://www.sqlalchemy.org/trac/ticket/2975">&#xFF03;2975</a></span></p></li><li><p id="change-0.9.4-11"><span class="yiyi-st" id="yiyi-662"><span class="target" id="change-c7ec7a2b899f6d33f4ef3c25d538daa0"><strong>[orm] [bug] </strong></span>Fixed a very old behavior where the lazy load emitted for a one-to-many could inappropriately pull in the parent table, and also return results inconsistent based on what&#x2019;s in the parent table, when the primaryjoin includes some kind of discriminator against the parent table, such as <code class="docutils literal"><span class="pre">and_(parent.id</span> <span class="pre">==</span> <span class="pre">child.parent_id,</span> <span class="pre">parent.deleted</span> <span class="pre">==</span> <span class="pre">False)</span></code>. </span><span class="yiyi-st" id="yiyi-663">&#x867D;&#x7136;&#x8FD9;&#x4E2A;&#x4E3B;&#x8981;&#x8FDE;&#x63A5;&#x5BF9;&#x4E8E;&#x4E00;&#x5BF9;&#x591A;&#x6765;&#x8BF4;&#x6CA1;&#x6709;&#x591A;&#x5927;&#x610F;&#x4E49;&#xFF0C;&#x4F46;&#x5728;&#x5E94;&#x7528;&#x4E8E;&#x591A;&#x5BF9;&#x4E00;&#x65F6;&#x66F4;&#x4E3A;&#x5E38;&#x89C1;&#xFF0C;&#x5E76;&#x4E14;&#x4E00;&#x5BF9;&#x591A;&#x6765;&#x81EA;&#x540E;&#x5411;&#x53C2;&#x8003;&#x3002;</span><span class="yiyi-st" id="yiyi-664">&#x5728;&#x8FD9;&#x79CD;&#x60C5;&#x51B5;&#x4E0B;&#xFF0C;&#x4ECE;<code class="docutils literal"><span class="pre">child</span></code>&#x52A0;&#x8F7D;&#x884C;&#x5C06;&#x4FDD;&#x6301;<code class="docutils literal"><span class="pre">parent.deleted</span> <span class="pre">==</span> <span class="pre">False</span></code>&#x5C31;&#x50CF;&#x5728;&#x67E5;&#x8BE2;&#x4E2D;&#x4E00;&#x6837;&#xFF0C;&#x56E0;&#x6B64;&#x5C06;&#x5176;&#x653E;&#x5230;FROM&#x5B50;&#x53E5;&#x4E2D;&#x5E76;&#x6267;&#x884C;&#x7B1B;&#x5361;&#x5C14;&#x79EF;&#x3002;</span><span class="yiyi-st" id="yiyi-665">&#x73B0;&#x5728;&#xFF0C;&#x65B0;&#x884C;&#x4E3A;&#x5C06;&#x9002;&#x5F53;&#x66FF;&#x6362;&#x8BE5;&#x53C2;&#x6570;&#x7684;&#x672C;&#x5730;&#x201C;parent.deleted&#x201D;&#x503C;&#x3002;</span><span class="yiyi-st" id="yiyi-666">&#x5C3D;&#x7BA1;&#x901A;&#x5E38;&#x60C5;&#x51B5;&#x4E0B;&#xFF0C;&#x771F;&#x5B9E;&#x4E16;&#x754C;&#x7684;&#x5E94;&#x7528;&#x7A0B;&#x5E8F;&#x53EF;&#x80FD;&#x90FD;&#x5E0C;&#x671B;&#x5728;&#x4EFB;&#x4F55;&#x60C5;&#x51B5;&#x4E0B;&#x90FD;&#x4F7F;&#x7528;&#x4E0D;&#x540C;&#x7684;primaryjoin&#x4F5C;&#x4E3A;o2m&#x7AEF;&#x3002;<a class="changeset-link headerlink reference internal" href="#change-c7ec7a2b899f6d33f4ef3c25d538daa0">&#xB6;</a></span></p><p><span class="yiyi-st" id="yiyi-667">&#x53C2;&#x8003;&#x6587;&#x732E;&#xFF1A;<a class="reference external" href="http://www.sqlalchemy.org/trac/ticket/2948">&#xFF03;2948</a></span></p></li><li><p id="change-0.9.4-12"><span class="yiyi-st" id="yiyi-668"><span class="target" id="change-f407535c51c6656da4cfb08cd1542503"><strong>[orm] [bug] </strong></span>Improved the check for &#x201C;how to join from A to B&#x201D; such that when a table has multiple, composite foreign keys targeting a parent table, the <a class="reference internal" href="orm_relationship_api.html#sqlalchemy.orm.relationship.params.foreign_keys" title="sqlalchemy.orm.relationship"><code class="xref py py-paramref docutils literal"><span class="pre">relationship.foreign_keys</span></code></a> argument will be properly interpreted in order to resolve the ambiguity; previously this condition would raise that there were multiple FK paths when in fact the foreign_keys argument should be establishing which one is expected.<a class="changeset-link headerlink reference internal" href="#change-f407535c51c6656da4cfb08cd1542503">&#xB6;</a></span></p><p><span class="yiyi-st" id="yiyi-669">&#x53C2;&#x8003;&#x6587;&#x732E;&#xFF1A;<a class="reference external" href="http://www.sqlalchemy.org/trac/ticket/2965">&#xFF03;2965</a></span></p></li><li><p id="change-0.9.4-13"><span class="yiyi-st" id="yiyi-670"><span class="target" id="change-d0595b585896aafd0894b807853463d3"><strong>[orm] [bug] </strong></span>&#x589E;&#x52A0;&#x4E86;&#x5BF9;<a class="reference internal" href="core_event.html#sqlalchemy.event.listen" title="sqlalchemy.event.listen"><code class="xref py py-func docutils literal"><span class="pre">event.listen()</span></code></a>&#x6807;&#x8BB0;&#x7684;<code class="docutils literal"><span class="pre">insert=True</span></code>&#x6807;&#x8BB0;&#x7684;&#x652F;&#x6301;&#x5E26;&#x6709;&#x6620;&#x5C04;&#x5668;/&#x5B9E;&#x4F8B;&#x4E8B;&#x4EF6;&#x3002;<a class="changeset-link headerlink reference internal" href="#change-d0595b585896aafd0894b807853463d3">&#xB6;</a></span></p><p></p></li><li><p id="change-0.9.4-14"><span class="yiyi-st" id="yiyi-671"><span class="target" id="change-efb079e4a2bde52cab05c332aee49e22"><strong>[orm] [bug] [engine] </strong></span>Fixed bug where events set to listen at the class level (e.g. on the <a class="reference internal" href="orm_mapping_api.html#sqlalchemy.orm.mapper.Mapper" title="sqlalchemy.orm.mapper.Mapper"><code class="xref py py-class docutils literal"><span class="pre">Mapper</span></code></a> or <a class="reference internal" href="orm_internals.html#sqlalchemy.orm.instrumentation.ClassManager" title="sqlalchemy.orm.instrumentation.ClassManager"><code class="xref py py-class docutils literal"><span class="pre">ClassManager</span></code></a> level, as opposed to on an individual mapped class, and also on <a class="reference internal" href="core_connections.html#sqlalchemy.engine.Connection" title="sqlalchemy.engine.Connection"><code class="xref py py-class docutils literal"><span class="pre">Connection</span></code></a>) that also made use of internal argument conversion (which is most within those categories) would fail to be removable.<a class="changeset-link headerlink reference internal" href="#change-efb079e4a2bde52cab05c332aee49e22">&#xB6;</a></span></p><p><span class="yiyi-st" id="yiyi-672">&#x53C2;&#x8003;&#x6587;&#x732E;&#xFF1A;<a class="reference external" href="http://www.sqlalchemy.org/trac/ticket/2973">&#xFF03;2973</a></span></p></li><li><p id="change-0.9.4-15"><span class="yiyi-st" id="yiyi-673"><span class="target" id="change-8aae354a4b3ff011dd6d9e53507c279f"><strong>[orm] [bug] </strong></span>Fixed regression from 0.8 where using an option like <a class="reference internal" href="orm_loading_relationships.html#sqlalchemy.orm.lazyload" title="sqlalchemy.orm.lazyload"><code class="xref py py-func docutils literal"><span class="pre">orm.lazyload()</span></code></a> with the &#x201C;wildcard&#x201D; expression, e.g. <code class="docutils literal"><span class="pre">&quot;*&quot;</span></code>, would raise an assertion error in the case where the query didn&#x2019;t contain any actual entities. </span><span class="yiyi-st" id="yiyi-674">&#x8FD9;&#x4E2A;&#x65AD;&#x8A00;&#x662F;&#x9488;&#x5BF9;&#x5176;&#x4ED6;&#x60C5;&#x51B5;&#x7684;&#xFF0C;&#x5E76;&#x4E14;&#x5728;&#x65E0;&#x610F;&#x4E2D;&#x6355;&#x6349;&#x5230;&#x8FD9;&#x4E2A;&#x65AD;&#x8A00;&#x3002;<a class="changeset-link headerlink reference internal" href="#change-8aae354a4b3ff011dd6d9e53507c279f">&#xB6;</a></span></p><p></p></li><li><p id="change-0.9.4-16"><span class="yiyi-st" id="yiyi-675"><span class="target" id="change-f9391466ff5f05d8025167143cffb3a3"><strong>[orm] [bug] [sqlite] </strong></span>&#x66F4;&#x591A;&#x89E3;&#x51B3;SQLite&#x201C;&#x52A0;&#x5165;&#x91CD;&#x5199;&#x201D;&#xFF1B;&#x5728;0.9.3&#x53D1;&#x5E03;&#x4E4B;&#x524D;&#x5B9E;&#x65BD;&#x7684;<a class="reference external" href="http://www.sqlalchemy.org/trac/ticket/2967">&#xFF03;2967</a>&#x4FEE;&#x590D;&#x5F71;&#x54CD;&#x4E86;UNION&#x5305;&#x542B;&#x5D4C;&#x5957;&#x8FDE;&#x63A5;&#x7684;&#x60C5;&#x51B5;&#x3002;</span><span class="yiyi-st" id="yiyi-676">&#x201C;&#x52A0;&#x5165;&#x91CD;&#x5199;&#x201D;&#x662F;&#x4E00;&#x79CD;&#x5177;&#x6709;&#x5E7F;&#x6CDB;&#x53EF;&#x80FD;&#x6027;&#x7684;&#x7279;&#x6027;&#xFF0C;&#x4E5F;&#x662F;&#x6211;&#x4EEC;&#x591A;&#x5E74;&#x6765;&#x63A8;&#x51FA;&#x7684;&#x7B2C;&#x4E00;&#x4E2A;&#x9519;&#x7EFC;&#x590D;&#x6742;&#x7684;&#x201C;SQL&#x91CD;&#x5199;&#x201D;&#x7279;&#x6027;&#xFF0C;&#x6240;&#x4EE5;&#x6211;&#x4EEC;&#x5BF9;&#x5176;&#x8FDB;&#x884C;&#x4E86;&#x5927;&#x91CF;&#x8FED;&#x4EE3;&#xFF08;&#x4E0E;&#x6025;&#x5207;&#x52A0;&#x8F7D;&#x5728;0.2 / 0.3&#x7CFB;&#x5217;&#x4E2D;&#xFF0C;&#x591A;&#x6676;&#x578B;&#x8D1F;&#x8377;&#x5728;0.4 / 0.5&#xFF09;&#x3002;</span><span class="yiyi-st" id="yiyi-677">&#x6211;&#x4EEC;&#x5E94;&#x8BE5;&#x5F88;&#x5FEB;&#x5230;&#x90A3;&#x91CC;&#xFF0C;&#x8C22;&#x8C22;&#x4F60;&#x7684;&#x652F;&#x6301;&#xFF1A;&#xFF09;&#x3002;<a class="changeset-link headerlink reference internal" href="#change-f9391466ff5f05d8025167143cffb3a3">&#xB6;</a></span></p><p><span class="yiyi-st" id="yiyi-678">&#x53C2;&#x8003;&#x6587;&#x732E;&#xFF1A;<a class="reference external" href="http://www.sqlalchemy.org/trac/ticket/2969">&#xFF03;2969</a></span></p></li></ul></div><div class="section" id="change-0.9.4-engine"><h3><span class="yiyi-st" id="yiyi-679">&#x53D1;&#x52A8;&#x673A;<a class="headerlink" href="#change-0.9.4-engine" title="Permalink to this headline">&#xB6; T0&gt;</a></span></h3><ul class="simple"><li><p id="change-0.9.4-17"><span class="yiyi-st" id="yiyi-680"><span class="target" id="change-0fbd5944c2467b0bab55d0a60ee42790"><strong>[engine] [feature] </strong></span>&#x4E3A;&#x65B9;&#x8A00;&#x7EA7;&#x4E8B;&#x4EF6;&#x6DFB;&#x52A0;&#x4E86;&#x4E00;&#x4E9B;&#x65B0;&#x7684;&#x4E8B;&#x4EF6;&#x673A;&#x5236;&#xFF1B;&#x521D;&#x59CB;&#x5B9E;&#x73B0;&#x5141;&#x8BB8;&#x4E8B;&#x4EF6;&#x5904;&#x7406;&#x7A0B;&#x5E8F;&#x91CD;&#x65B0;&#x5B9A;&#x4E49;&#x4EFB;&#x610F;&#x65B9;&#x8A00;&#x5728;DBAPI&#x6E38;&#x6807;&#x4E0A;&#x8C03;&#x7528;execute()&#x6216;executemany()&#x7684;&#x7279;&#x5B9A;&#x673A;&#x5236;&#x3002;</span><span class="yiyi-st" id="yiyi-681">&#x5728;&#x8FD9;&#x4E2A;&#x534A;&#x516C;&#x5F00;&#x548C;&#x5B9E;&#x9A8C;&#x6027;&#x7684;&#x65B0;&#x4E8B;&#x4EF6;&#x4E2D;&#xFF0C;&#x652F;&#x6301;&#x4E00;&#x4E9B;&#x5373;&#x5C06;&#x5230;&#x6765;&#x7684;&#x4E8B;&#x52A1;&#x76F8;&#x5173;&#x7684;&#x6269;&#x5C55;&#x3002;<a class="changeset-link headerlink reference internal" href="#change-0fbd5944c2467b0bab55d0a60ee42790">&#xB6;</a></span></p><p></p></li><li><p id="change-0.9.4-18"><span class="yiyi-st" id="yiyi-682"><span class="target" id="change-bf0cfd70bc72b3a0d338585889a63fb4"><strong>[engine] [feature] </strong></span>An event listener can now be associated with a <a class="reference internal" href="core_connections.html#sqlalchemy.engine.Engine" title="sqlalchemy.engine.Engine"><code class="xref py py-class docutils literal"><span class="pre">Engine</span></code></a>, after one or more <a class="reference internal" href="core_connections.html#sqlalchemy.engine.Connection" title="sqlalchemy.engine.Connection"><code class="xref py py-class docutils literal"><span class="pre">Connection</span></code></a> objects have been created (such as by an orm <a class="reference internal" href="orm_session_api.html#sqlalchemy.orm.session.Session" title="sqlalchemy.orm.session.Session"><code class="xref py py-class docutils literal"><span class="pre">Session</span></code></a> or via explicit connect) and the listener will pick up events from those connections. </span><span class="yiyi-st" id="yiyi-683">&#x4EE5;&#x524D;&#xFF0C;&#x6027;&#x80FD;&#x95EE;&#x9898;&#x53EA;&#x662F;&#x5728;&#x521D;&#x59CB;&#x9636;&#x6BB5;&#x5C06;&#x4E8B;&#x4EF6;&#x4ECE;<a class="reference internal" href="core_connections.html#sqlalchemy.engine.Engine" title="sqlalchemy.engine.Engine"><code class="xref py py-class docutils literal"><span class="pre">Engine</span></code></a>&#x8F6C;&#x79FB;&#x5230;<a class="reference internal" href="core_connections.html#sqlalchemy.engine.Connection" title="sqlalchemy.engine.Connection"><code class="xref py py-class docutils literal"><span class="pre">Connection</span></code></a>&#xFF0C;&#x4F46;&#x6211;&#x4EEC;&#x5DF2;&#x7ECF;&#x5185;&#x8054;&#x4E86;&#x4E00;&#x7CFB;&#x5217;&#x6761;&#x4EF6;&#x68C0;&#x67E5;&#xFF0C;&#x4EE5;&#x4F7F;&#x5176;&#x6210;&#x4E3A;&#x53EF;&#x80FD;&#xFF0C;&#x800C;&#x65E0;&#x9700;&#x4EFB;&#x4F55;&#x5176;&#x4ED6;&#x529F;&#x80FD;&#x547C;&#x53EB;&#x3002;<a class="changeset-link headerlink reference internal" href="#change-bf0cfd70bc72b3a0d338585889a63fb4">&#xB6; T6&gt;</a></span></p><p><span class="yiyi-st" id="yiyi-684">&#x53C2;&#x8003;&#x6587;&#x732E;&#xFF1A;<a class="reference external" href="http://www.sqlalchemy.org/trac/ticket/2978">&#xFF03;2978</a></span></p></li><li><p id="change-0.9.4-19"><span class="yiyi-st" id="yiyi-685"><span class="target" id="change-2f688763d982ec3ef2381d07c51dd435"><strong>[engine] [bug] </strong></span>&#x5728;&#x68C0;&#x6D4B;&#x5230;&#x201C;&#x65AD;&#x5F00;&#x8FDE;&#x63A5;&#x201D;&#x6761;&#x4EF6;&#x65F6;&#xFF0C;<a class="reference internal" href="core_connections.html#sqlalchemy.engine.Engine" title="sqlalchemy.engine.Engine"><code class="xref py py-class docutils literal"><span class="pre">Engine</span></code></a>&#x91CD;&#x65B0;&#x5229;&#x7528;&#x8FDE;&#x63A5;&#x7F13;&#x51B2;&#x6C60;&#x7684;&#x673A;&#x5236;&#x8FDB;&#x884C;&#x4E86;&#x91CD;&#x5927;&#x6539;&#x8FDB;&#xFF1B;&#x4E0D;&#x662F;&#x4E22;&#x5F03;&#x6C60;&#x5E76;&#x660E;&#x786E;&#x5173;&#x95ED;&#x8FDE;&#x63A5;&#xFF0C;&#x6C60;&#x5C06;&#x88AB;&#x4FDD;&#x7559;&#xFF0C;&#x5E76;&#x66F4;&#x65B0;&#x201C;&#x4EE3;&#x201D;&#x65F6;&#x95F4;&#x6233;&#x4EE5;&#x53CD;&#x6620;&#x5F53;&#x524D;&#x65F6;&#x95F4;&#xFF0C;&#x4ECE;&#x800C;&#x5BFC;&#x81F4;&#x6240;&#x6709;&#x73B0;&#x6709;&#x8FDE;&#x63A5;&#x5728;&#x4E0B;&#x6B21;&#x68C0;&#x51FA;&#x65F6;&#x88AB;&#x56DE;&#x6536;&#x3002;</span><span class="yiyi-st" id="yiyi-686">&#x8FD9;&#x5927;&#x5927;&#x7B80;&#x5316;&#x4E86;&#x56DE;&#x6536;&#x8FC7;&#x7A0B;&#xFF0C;&#x6D88;&#x9664;&#x4E86;&#x5728;&#x5524;&#x9192;&#x7B49;&#x5F85;&#x65E7;&#x6C60;&#x7684;&#x8FDE;&#x63A5;&#x5C1D;&#x8BD5;&#x7684;&#x9700;&#x8981;&#xFF0C;&#x5E76;&#x6D88;&#x9664;&#x4E86;&#x5728;&#x56DE;&#x6536;&#x64CD;&#x4F5C;&#x671F;&#x95F4;&#x53EF;&#x80FD;&#x521B;&#x5EFA;&#x7684;&#x8BB8;&#x591A;&#x7ACB;&#x5373;&#x4E22;&#x5F03;&#x7684;&#x201C;&#x6C60;&#x201D;&#x5BF9;&#x8C61;&#x7684;&#x4E89;&#x7528;&#x60C5;&#x51B5;&#x3002;<a class="changeset-link headerlink reference internal" href="#change-2f688763d982ec3ef2381d07c51dd435"> T0&gt;</a></span></p><p><span class="yiyi-st" id="yiyi-687">&#x53C2;&#x8003;&#x6587;&#x732E;&#xFF1A;<a class="reference external" href="http://www.sqlalchemy.org/trac/ticket/2985">&#xFF03;2985</a></span></p></li><li><p id="change-0.9.4-20"><span class="yiyi-st" id="yiyi-688"><span class="target" id="change-2bdaf42f4d681b56c349b95939f392fb"><strong>[engine] [bug] </strong></span>The <a class="reference internal" href="core_events.html#sqlalchemy.events.ConnectionEvents.after_cursor_execute" title="sqlalchemy.events.ConnectionEvents.after_cursor_execute"><code class="xref py py-meth docutils literal"><span class="pre">ConnectionEvents.after_cursor_execute()</span></code></a> event is now emitted for the &#x201C;_cursor_execute()&#x201D; method of <a class="reference internal" href="core_connections.html#sqlalchemy.engine.Connection" title="sqlalchemy.engine.Connection"><code class="xref py py-class docutils literal"><span class="pre">Connection</span></code></a>; this is the &#x201C;quick&#x201D; executor that is used for things like when a sequence is executed ahead of an INSERT statement, as well as for dialect startup checks like unicode returns, charset, etc. </span><span class="yiyi-st" id="yiyi-689">&#x8FD9;&#x91CC;&#x5DF2;&#x7ECF;&#x8C03;&#x7528;&#x4E86;<a class="reference internal" href="core_events.html#sqlalchemy.events.ConnectionEvents.before_cursor_execute" title="sqlalchemy.events.ConnectionEvents.before_cursor_execute"><code class="xref py py-meth docutils literal"><span class="pre">ConnectionEvents.before_cursor_execute()</span></code></a>&#x4E8B;&#x4EF6;&#x3002;</span><span class="yiyi-st" id="yiyi-690">&#x8FD9;&#x91CC;&#x7684;&#x201C;executemany&#x201D;&#x6807;&#x5FD7;&#x73B0;&#x5728;&#x603B;&#x662F;&#x88AB;&#x8BBE;&#x7F6E;&#x4E3A;False&#xFF0C;&#x56E0;&#x4E3A;&#x8FD9;&#x4E2A;&#x4E8B;&#x4EF6;&#x603B;&#x662F;&#x5BF9;&#x5E94;&#x4E8E;&#x4E00;&#x6B21;&#x6267;&#x884C;&#x3002;</span><span class="yiyi-st" id="yiyi-691">&#x4EE5;&#x524D;&#xFF0C;&#x5982;&#x679C;&#x6211;&#x4EEC;&#x4EE3;&#x8868;executemany INSERT&#x8BED;&#x53E5;&#x6267;&#x884C;&#x64CD;&#x4F5C;&#xFF0C;&#x5219;&#x6807;&#x5FD7;&#x53EF;&#x80FD;&#x4E3A;True&#x3002;<a class="changeset-link headerlink reference internal" href="#change-2bdaf42f4d681b56c349b95939f392fb">&#xB6;</a></span></p><p></p></li></ul></div><div class="section" id="change-0.9.4-sql"><h3><span class="yiyi-st" id="yiyi-692">SQL <a class="headerlink" href="#change-0.9.4-sql" title="Permalink to this headline">&#xB6; T0&gt;</a></span></h3><ul class="simple"><li><p id="change-0.9.4-21"><span class="yiyi-st" id="yiyi-693"><span class="target" id="change-ae73b72c5883a6bfadd83231bbc945cb"><strong>[sql] [feature] </strong></span>&#x589E;&#x52A0;&#x4E86;&#x5BF9;&#x5E03;&#x5C14;&#x503C;&#x7684;&#x6587;&#x5B57;&#x6E32;&#x67D3;&#x7684;&#x652F;&#x6301;&#xFF0C;&#x4F8B;&#x5982;&#x201C;true&#x201D;/&#x201C;false&#x201D;&#x6216;&#x201C;1&#x201D;/&#x201C;0&#x201D;&#x3002;<a class="changeset-link headerlink reference internal" href="#change-ae73b72c5883a6bfadd83231bbc945cb">&#xB6;</a></span></p><p></p></li><li><p id="change-0.9.4-22"><span class="yiyi-st" id="yiyi-694"><span class="target" id="change-eb76a93c5c1ba58cc198d3783e1d4d74"><strong>[sql] [feature] </strong></span>&#x6DFB;&#x52A0;&#x4E86;&#x4E00;&#x4E2A;&#x65B0;&#x7279;&#x6027;<a class="reference internal" href="core_constraints.html#sqlalchemy.schema.conv" title="sqlalchemy.schema.conv"><code class="xref py py-func docutils literal"><span class="pre">schema.conv()</span></code></a>&#xFF0C;&#x5176;&#x76EE;&#x7684;&#x662F;&#x5C06;&#x7EA6;&#x675F;&#x540D;&#x79F0;&#x6807;&#x8BB0;&#x4E3A;&#x5DF2;&#x7ECF;&#x5E94;&#x7528;&#x4E86;&#x547D;&#x540D;&#x7EA6;&#x5B9A;&#x3002;</span><span class="yiyi-st" id="yiyi-695">Alembic 0.6.4&#x7248;&#x672C;&#x4E2D;&#x7684;Alembic&#x8FC1;&#x79FB;&#x5C06;&#x4F7F;&#x7528;&#x6B64;&#x6807;&#x8BB0;&#xFF0C;&#x4EE5;&#x4FBF;&#x5728;&#x8FC1;&#x79FB;&#x811A;&#x672C;&#x4E2D;&#x663E;&#x793A;&#x7EA6;&#x675F;&#x6761;&#x4EF6;&#xFF0C;&#x5E76;&#x6807;&#x8BB0;&#x540D;&#x79F0;&#x5DF2;&#x53D7;&#x547D;&#x540D;&#x7EA6;&#x5B9A;&#x3002;<a class="changeset-link headerlink reference internal" href="#change-eb76a93c5c1ba58cc198d3783e1d4d74">&#xB6;</a></span></p><p></p></li><li><p id="change-0.9.4-23"><span class="yiyi-st" id="yiyi-696"><span class="target" id="change-da83b2502fb46853ce0e53aa3df91a9a"><strong>[sql] [feature] </strong></span>The new dialect-level keyword argument system for schema-level constructs has been enhanced in order to assist with existing schemes that rely upon addition of ad-hoc keyword arguments to constructs.</span></p><p><span class="yiyi-st" id="yiyi-697">&#x4F8B;&#x5982;&#xFF0C;&#x8BF8;&#x5982;<a class="reference internal" href="core_constraints.html#sqlalchemy.schema.Index" title="sqlalchemy.schema.Index"><code class="xref py py-class docutils literal"><span class="pre">Index</span></code></a>&#x4E4B;&#x7C7B;&#x7684;&#x7ED3;&#x6784;&#x5C06;&#x5728;&#x6784;&#x5EFA;&#x4E4B;&#x540E;&#x518D;&#x6B21;&#x63A5;&#x53D7;<a class="reference internal" href="core_constraints.html#sqlalchemy.schema.Index.kwargs" title="sqlalchemy.schema.Index.kwargs"><code class="xref py py-attr docutils literal"><span class="pre">Index.kwargs</span></code></a>&#x96C6;&#x5408;&#x5185;&#x7684;&#x4E34;&#x65F6;&#x5173;&#x952E;&#x5B57;&#x53C2;&#x6570;&#xFF1A;</span></p><div class="highlight-python"><div class="highlight"><pre><span></span><span class="n">idx</span> <span class="o">=</span> <span class="n">Index</span><span class="p">(</span><span class="s1">&apos;a&apos;</span><span class="p">,</span> <span class="s1">&apos;b&apos;</span><span class="p">)</span>
<span class="n">idx</span><span class="o">.</span><span class="n">kwargs</span><span class="p">[</span><span class="s1">&apos;mysql_someargument&apos;</span><span class="p">]</span> <span class="o">=</span> <span class="bp">True</span></pre></div></div><p><span class="yiyi-st" id="yiyi-698">&#x4E3A;&#x4E86;&#x9002;&#x5E94;&#x5728;&#x6784;&#x5EFA;&#x65F6;&#x5141;&#x8BB8;&#x81EA;&#x5B9A;&#x4E49;&#x53C2;&#x6570;&#x7684;&#x7528;&#x4F8B;&#xFF0C;&#x73B0;&#x5728;&#x5141;&#x8BB8;&#x6B64;&#x6CE8;&#x518C;&#xFF1A;<a class="reference internal" href="core_sqlelement.html#sqlalchemy.sql.base.DialectKWArgs.argument_for" title="sqlalchemy.sql.base.DialectKWArgs.argument_for"><code class="xref py py-meth docutils literal"><span class="pre">DialectKWArgs.argument_for()</span></code></a>&#x65B9;&#x6CD5;&#xFF1A;</span></p><div class="highlight-python"><div class="highlight"><pre><span></span><span class="n">Index</span><span class="o">.</span><span class="n">argument_for</span><span class="p">(</span><span class="s1">&apos;mysql&apos;</span><span class="p">,</span> <span class="s1">&apos;someargument&apos;</span><span class="p">,</span> <span class="bp">False</span><span class="p">)</span>

<span class="n">idx</span> <span class="o">=</span> <span class="n">Index</span><span class="p">(</span><span class="s1">&apos;a&apos;</span><span class="p">,</span> <span class="s1">&apos;b&apos;</span><span class="p">,</span> <span class="n">mysql_someargument</span><span class="o">=</span><span class="bp">True</span><span class="p">)</span></pre></div></div><div class="admonition seealso"><p class="first admonition-title"><span class="yiyi-st" id="yiyi-699">&#x4E5F;&#x53EF;&#x4EE5;&#x770B;&#x770B;</span></p><p class="last"><span class="yiyi-st" id="yiyi-700"><a class="reference internal" href="core_sqlelement.html#sqlalchemy.sql.base.DialectKWArgs.argument_for" title="sqlalchemy.sql.base.DialectKWArgs.argument_for"><code class="xref py py-meth docutils literal"><span class="pre">DialectKWArgs.argument_for()</span></code></a></span></p></div><span class="yiyi-st" id="yiyi-702"> <a class="changeset-link headerlink reference internal" href="#change-da83b2502fb46853ce0e53aa3df91a9a">&#xB6;</a></span><p><span class="yiyi-st" id="yiyi-701">&#x53C2;&#x8003;&#x6587;&#x732E;&#xFF1A;<a class="reference external" href="http://www.sqlalchemy.org/trac/ticket/2866">&#xFF03;2866</a>&#xFF0C;<a class="reference external" href="http://www.sqlalchemy.org/trac/ticket/2962">&#xFF03;2962</a></span></p></li><li><p id="change-0.9.4-24"><span class="yiyi-st" id="yiyi-703"><span class="target" id="change-fe06781a0af32115b5a219dbc350cb6b"><strong>[sql] [bug] </strong></span>Fixed bug in <a class="reference internal" href="core_sqlelement.html#sqlalchemy.sql.expression.tuple_" title="sqlalchemy.sql.expression.tuple_"><code class="xref py py-func docutils literal"><span class="pre">tuple_()</span></code></a> construct where the &#x201C;type&#x201D; of essentially the first SQL expression would be applied as the &#x201C;comparison type&#x201D; to a compared tuple value; this has the effect in some cases of an inappropriate &#x201C;type coersion&#x201D; occurring, such as when a tuple that has a mix of String and Binary values improperly coerces target values to Binary even though that&#x2019;s not what they are on the left side. </span><span class="yiyi-st" id="yiyi-704"><a class="reference internal" href="core_sqlelement.html#sqlalchemy.sql.expression.tuple_" title="sqlalchemy.sql.expression.tuple_"><code class="xref py py-func docutils literal"><span class="pre">tuple_()</span></code></a> now expects heterogeneous types within its list of values.<a class="changeset-link headerlink reference internal" href="#change-fe06781a0af32115b5a219dbc350cb6b">&#xB6;</a></span></p><p><span class="yiyi-st" id="yiyi-705">&#x8FD9;&#x4E2A;&#x6539;&#x53D8;&#x4E5F;&#x662F;<strong>backported</strong>&#x5230;&#xFF1A;0.8.6</span></p><p><span class="yiyi-st" id="yiyi-706">&#x53C2;&#x8003;&#x6587;&#x732E;&#xFF1A;<a class="reference external" href="http://www.sqlalchemy.org/trac/ticket/2977">&#xFF03;2977</a></span></p></li><li><p id="change-0.9.4-25"><span class="yiyi-st" id="yiyi-707"><span class="target" id="change-ba95c9ab0ff11216d8fe5bb713e2398c"><strong>[sql] [bug] </strong></span>Fixed an 0.9 regression where a <a class="reference internal" href="core_metadata.html#sqlalchemy.schema.Table" title="sqlalchemy.schema.Table"><code class="xref py py-class docutils literal"><span class="pre">Table</span></code></a> that failed to reflect correctly wouldn&#x2019;t be removed from the parent <a class="reference internal" href="core_metadata.html#sqlalchemy.schema.MetaData" title="sqlalchemy.schema.MetaData"><code class="xref py py-class docutils literal"><span class="pre">MetaData</span></code></a>, even though in an invalid state. </span><span class="yiyi-st" id="yiyi-708">Pullreq&#x793C;&#x8C8C;Roman Podoliaka&#x3002;<a class="changeset-link headerlink reference internal" href="#change-ba95c9ab0ff11216d8fe5bb713e2398c">&#xB6;</a></span></p><p><span class="yiyi-st" id="yiyi-709">&#x53C2;&#x8003;&#x6587;&#x732E;&#xFF1A;<a class="reference external" href="http://www.sqlalchemy.org/trac/ticket/2988">&#xFF03;2988</a>&#xFF0C;<a class="reference external" href="https://github.com/zzzeek/sqlalchemy/pull/78">&#x8BF7;&#x6C42;github&#xFF1A;78</a></span></p></li><li><p id="change-0.9.4-26"><span class="yiyi-st" id="yiyi-710"><span class="target" id="change-e9d783386f345232a96b9a9f34389e43"><strong>[sql] [bug] </strong></span><a class="reference internal" href="core_metadata.html#sqlalchemy.schema.MetaData.params.naming_convention" title="sqlalchemy.schema.MetaData"><code class="xref py py-paramref docutils literal"><span class="pre">MetaData.naming_convention</span></code></a> feature will now also apply to <a class="reference internal" href="core_constraints.html#sqlalchemy.schema.CheckConstraint" title="sqlalchemy.schema.CheckConstraint"><code class="xref py py-class docutils literal"><span class="pre">CheckConstraint</span></code></a> objects that are associated directly with a <a class="reference internal" href="core_metadata.html#sqlalchemy.schema.Column" title="sqlalchemy.schema.Column"><code class="xref py py-class docutils literal"><span class="pre">Column</span></code></a> instead of just on the <a class="reference internal" href="core_metadata.html#sqlalchemy.schema.Table" title="sqlalchemy.schema.Table"><code class="xref py py-class docutils literal"><span class="pre">Table</span></code></a>.<a class="changeset-link headerlink reference internal" href="#change-e9d783386f345232a96b9a9f34389e43">&#xB6;</a></span></p><p></p></li><li><p id="change-0.9.4-27"><span class="yiyi-st" id="yiyi-711"><span class="target" id="change-50c081ddded08f44824be844d1b15da9"><strong>[sql] [bug] </strong></span>Fixed bug in new <a class="reference internal" href="core_metadata.html#sqlalchemy.schema.MetaData.params.naming_convention" title="sqlalchemy.schema.MetaData"><code class="xref py py-paramref docutils literal"><span class="pre">MetaData.naming_convention</span></code></a> feature where the name of a check constraint making use of the <cite>&#x201C;%(constraint_name)s&#x201D;</cite> token would get doubled up for the constraint generated by a boolean or enum type, and overall duplicate events would cause the <cite>&#x201C;%(constraint_name)s&#x201D;</cite> token to keep compounding itself.<a class="changeset-link headerlink reference internal" href="#change-50c081ddded08f44824be844d1b15da9">&#xB6;</a></span></p><p><span class="yiyi-st" id="yiyi-712">&#x53C2;&#x8003;&#x6587;&#x732E;&#xFF1A;<a class="reference external" href="http://www.sqlalchemy.org/trac/ticket/2991">&#xFF03;2991</a></span></p></li><li><p id="change-0.9.4-28"><span class="yiyi-st" id="yiyi-713"><span class="target" id="change-e92ab0a211866ce5780a590de380dd1d"><strong>[sql] [bug] </strong></span>Adjusted the logic which applies names to the .c collection when a no-name <a class="reference internal" href="core_sqlelement.html#sqlalchemy.sql.expression.BindParameter" title="sqlalchemy.sql.expression.BindParameter"><code class="xref py py-class docutils literal"><span class="pre">BindParameter</span></code></a> is received, e.g. via <code class="xref py py-func docutils literal"><span class="pre">sql.literal()</span></code> or similar; the &#x201C;key&#x201D; of the bind param is used as the key within .c. </span><span class="yiyi-st" id="yiyi-714">&#x800C;&#x4E0D;&#x662F;&#x5448;&#x73B0;&#x7684;&#x540D;&#x79F0;&#x3002;</span><span class="yiyi-st" id="yiyi-715">&#x7531;&#x4E8E;&#x8FD9;&#x4E9B;&#x7ED1;&#x5B9A;&#x5728;&#x4EFB;&#x4F55;&#x60C5;&#x51B5;&#x4E0B;&#x90FD;&#x5177;&#x6709;&#x201C;&#x533F;&#x540D;&#x201D;&#x540D;&#x79F0;&#xFF0C;&#x56E0;&#x6B64;&#x8FD9;&#x5141;&#x8BB8;&#x4E2A;&#x522B;&#x7ED1;&#x5B9A;&#x53C2;&#x6570;&#x5728;&#x53EF;&#x9009;&#x62E9;&#x7684;&#x8303;&#x56F4;&#x5185;&#x5177;&#x6709;&#x5176;&#x81EA;&#x5DF1;&#x7684;&#x540D;&#x79F0;&#xFF0C;&#x5982;&#x679C;&#x5B83;&#x4EEC;&#x672A;&#x88AB;&#x6807;&#x8BB0;&#x7684;&#x8BDD;&#x3002;<a class="changeset-link headerlink reference internal" href="#change-e92ab0a211866ce5780a590de380dd1d">&#xB6;</a></span></p><p><span class="yiyi-st" id="yiyi-716">&#x53C2;&#x8003;&#x6587;&#x732E;&#xFF1A;<a class="reference external" href="http://www.sqlalchemy.org/trac/ticket/2974">&#xFF03;2974</a></span></p></li><li><p id="change-0.9.4-29"><span class="yiyi-st" id="yiyi-717"><span class="target" id="change-6c78e246b3394d4e4b227f1f06cc54ef"><strong>[sql] [bug] </strong></span>&#x5728;&#x5448;&#x73B0;&#x91CD;&#x590D;&#x5217;&#x65F6;&#xFF0C;<a class="reference internal" href="core_selectable.html#sqlalchemy.sql.expression.FromClause.c" title="sqlalchemy.sql.expression.FromClause.c"><code class="xref py py-attr docutils literal"><span class="pre">FromClause.c</span></code></a>&#x96C6;&#x5408;&#x7684;&#x884C;&#x4E3A;&#x53D1;&#x751F;&#x4E86;&#x4E00;&#x4E9B;&#x53D8;&#x5316;&#x3002;</span><span class="yiyi-st" id="yiyi-718">&#x53D1;&#x51FA;&#x8B66;&#x544A;&#x5E76;&#x66FF;&#x6362;&#x540C;&#x540D;&#x65E7;&#x680F;&#x7684;&#x884C;&#x4E3A;&#x4ECD;&#x7136;&#x5B58;&#x5728;&#x4E00;&#x5B9A;&#x7A0B;&#x5EA6;&#xFF1B;&#x66F4;&#x6362;&#x5C24;&#x5176;&#x662F;&#x4FDD;&#x6301;&#x5411;&#x540E;&#x517C;&#x5BB9;&#x6027;&#x3002;</span><span class="yiyi-st" id="yiyi-719">&#x4F46;&#x662F;&#xFF0C;&#x88AB;&#x66FF;&#x6362;&#x7684;&#x5217;&#x4ECD;&#x7136;&#x4E0E;&#x96C6;&#x5408;<code class="docutils literal"><span class="pre">._all_columns</span></code>&#x4E2D;&#x7684;<code class="docutils literal"><span class="pre">c</span></code>&#x96C6;&#x5408;&#x4FDD;&#x6301;&#x5173;&#x8054;&#xFF0C;&#x96C6;&#x5408; tt&gt;&#x7528;&#x4E8E;&#x6784;&#x9020;&#xFF08;&#x5982;&#x522B;&#x540D;&#x548C;&#x8054;&#x5408;&#xFF09;&#xFF0C;&#x4EE5;&#x5904;&#x7406;<code class="docutils literal"><span class="pre">c</span></code>&#x4E2D;&#x7684;&#x5217;&#x66F4;&#x591A;&#x5730;&#x6307;&#x5411;&#x5B9E;&#x9645;&#x5217;&#x5728;&#x5217;&#x4E2D;&#x7684;&#x5217;&#xFF0C;&#x800C;&#x4E0D;&#x662F;&#x552F;&#x4E00;&#x7684;&#x952E;&#x540D;&#x96C6;&#x3002;</span><span class="yiyi-st" id="yiyi-720">This helps with situations where SELECT statements with same-named columns are used in unions and such, so that the union can match the columns up positionally and also there&#x2019;s some chance of <a class="reference internal" href="core_selectable.html#sqlalchemy.sql.expression.FromClause.corresponding_column" title="sqlalchemy.sql.expression.FromClause.corresponding_column"><code class="xref py py-meth docutils literal"><span class="pre">FromClause.corresponding_column()</span></code></a> still being usable here (it can now return a column that is only in selectable.c._all_columns and not otherwise named). </span><span class="yiyi-st" id="yiyi-721">&#x6211;&#x4EEC;&#x4ECD;&#x7136;&#x9700;&#x8981;&#x786E;&#x5B9A;&#x8FD9;&#x4E2A;&#x6E05;&#x5355;&#x6700;&#x7EC8;&#x53EF;&#x80FD;&#x5728;&#x54EA;&#x91CC;&#xFF0C;&#x56E0;&#x6B64;&#x5F3A;&#x8C03;&#x4E86;&#x65B0;&#x7684;&#x96C6;&#x5408;&#x3002;</span><span class="yiyi-st" id="yiyi-722">&#x7406;&#x8BBA;&#x4E0A;&#x5B83;&#x4F1A;&#x6210;&#x4E3A;iter&#xFF08;selectable.c&#xFF09;&#x7684;&#x7ED3;&#x679C;&#xFF0C;&#x4F46;&#x8FD9;&#x610F;&#x5473;&#x7740;&#x8FED;&#x4EE3;&#x7684;&#x957F;&#x5EA6;&#x5C06;&#x4E0D;&#x518D;&#x4E0E;keys()&#x7684;&#x957F;&#x5EA6;&#x5339;&#x914D;&#xFF0C;&#x5E76;&#x4E14;&#x9700;&#x8981;&#x68C0;&#x51FA;&#x884C;&#x4E3A;&#x3002;<a class="changeset-link headerlink reference internal" href="#change-6c78e246b3394d4e4b227f1f06cc54ef"> T0&gt;</a></span></p><p><span class="yiyi-st" id="yiyi-723">&#x53C2;&#x8003;&#x6587;&#x732E;&#xFF1A;<a class="reference external" href="http://www.sqlalchemy.org/trac/ticket/2974">&#xFF03;2974</a></span></p></li><li><p id="change-0.9.4-30"><span class="yiyi-st" id="yiyi-724"><span class="target" id="change-650edc97a13474c853b5c10a976a29f0"><strong>[sql] [bug] </strong></span>Fixed issue in new <a class="reference internal" href="core_sqlelement.html#sqlalchemy.sql.expression.TextClause.columns" title="sqlalchemy.sql.expression.TextClause.columns"><code class="xref py py-meth docutils literal"><span class="pre">TextClause.columns()</span></code></a> method where the ordering of columns given positionally would not be preserved. </span><span class="yiyi-st" id="yiyi-725">This could have potential impact in positional situations such as applying the resulting <a class="reference internal" href="core_selectable.html#sqlalchemy.sql.expression.TextAsFrom" title="sqlalchemy.sql.expression.TextAsFrom"><code class="xref py py-class docutils literal"><span class="pre">TextAsFrom</span></code></a> object to a union.<a class="changeset-link headerlink reference internal" href="#change-650edc97a13474c853b5c10a976a29f0">&#xB6;</a></span></p><p></p></li></ul></div><div class="section" id="change-0.9.4-postgresql"><h3><span class="yiyi-st" id="yiyi-726">&#x7684;PostgreSQL <a class="headerlink" href="#change-0.9.4-postgresql" title="Permalink to this headline">&#xB6; T0&gt;</a></span></h3><ul class="simple"><li><p id="change-0.9.4-31"><span class="yiyi-st" id="yiyi-727"><span class="target" id="change-f238b48f610767a520453ae382fb1992"><strong>[postgresql] [feature] </strong></span>&#x542F;&#x7528;&#x4E86;&#x201C;&#x7406;&#x667A;&#x7684;&#x591A;&#x884C;&#x8BA1;&#x6570;&#x201D;&#x68C0;&#x67E5;psycopg2 DBAPI&#xFF0C;&#x56E0;&#x4E3A;&#x5B83;&#x4F3C;&#x4E4E;&#x5728;psycopg2 2.0.9&#x4E2D;&#x53D7;&#x652F;&#x6301;&#x3002;<a class="changeset-link headerlink reference internal" href="#change-f238b48f610767a520453ae382fb1992">&#xB6;</a></span></p><p><span class="yiyi-st" id="yiyi-728">&#x8FD9;&#x4E2A;&#x6539;&#x53D8;&#x4E5F;&#x662F;<strong>backported</strong>&#x5230;&#xFF1A;0.8.6</span></p><p></p></li><li><p id="change-0.9.4-32"><span class="yiyi-st" id="yiyi-729"><span class="target" id="change-9708a66fcf11605de634853699c1df71"><strong>[postgresql] [bug] </strong></span>Fixed regression caused by release 0.8.5 / 0.9.3&#x2019;s compatibility enhancements where index reflection on Postgresql versions specific to only the 8.1, 8.2 series again broke, surrounding the ever problematic int2vector type. </span><span class="yiyi-st" id="yiyi-730">&#x867D;&#x7136;int2vector&#x652F;&#x6301;&#x4ECE;8.1&#x5F00;&#x59CB;&#x7684;&#x6570;&#x7EC4;&#x64CD;&#x4F5C;&#xFF0C;&#x4F46;&#x663E;&#x7136;&#x5B83;&#x53EA;&#x652F;&#x6301;&#x4ECE;8.3&#x5F00;&#x59CB;&#x7684;&#x5BF9;&#x4E8E;varchar&#x7684;CAST&#x3002;<a class="changeset-link headerlink reference internal" href="#change-9708a66fcf11605de634853699c1df71">&#xB6;</a></span></p><p><span class="yiyi-st" id="yiyi-731">&#x8FD9;&#x4E2A;&#x6539;&#x53D8;&#x4E5F;&#x662F;<strong>backported</strong>&#x5230;&#xFF1A;0.8.6</span></p><p><span class="yiyi-st" id="yiyi-732">&#x53C2;&#x8003;&#x6587;&#x732E;&#xFF1A;<a class="reference external" href="http://www.sqlalchemy.org/trac/ticket/3000">&#xFF03;3000</a></span></p></li></ul></div><div class="section" id="change-0.9.4-mysql"><h3><span class="yiyi-st" id="yiyi-733">MySQL&#x7684;<a class="headerlink" href="#change-0.9.4-mysql" title="Permalink to this headline">&#xB6; T0&gt;</a></span></h3><ul class="simple"><li><p id="change-0.9.4-33"><span class="yiyi-st" id="yiyi-734"><span class="target" id="change-8fd1f3c05b103698df571c4d15925738"><strong>[mysql] [bug] </strong></span>&#x8C03;&#x6574;&#x4E86;mysql-connector-python&#x7684;&#x8BBE;&#x7F6E;&#xFF1B;&#x5728;Py2K&#x4E2D;&#xFF0C;&#x201C;&#x652F;&#x6301;unicode&#x8BED;&#x53E5;&#x201D;&#x6807;&#x5FD7;&#x73B0;&#x5728;&#x4E3A;False&#xFF0C;&#x56E0;&#x6B64;SQLAlchemy&#x4F1A;&#x5728;&#x53D1;&#x9001;&#x5230;&#x6570;&#x636E;&#x5E93;&#x4E4B;&#x524D;&#x5C06;<em>SQL&#x5B57;&#x7B26;&#x4E32;</em>&#xFF08;&#x6CE8;&#x610F;&#xFF1A;<em>&#x4E0D;&#x662F;</em>&#x53C2;&#x6570;&#xFF09;&#x7F16;&#x7801;&#x4E3A;&#x5B57;&#x8282;&#x3002;</span><span class="yiyi-st" id="yiyi-735">&#x8FD9;&#x4F3C;&#x4E4E;&#x5141;&#x8BB8;&#x6240;&#x6709;&#x4E0E;unicode&#x76F8;&#x5173;&#x7684;&#x6D4B;&#x8BD5;&#x901A;&#x8FC7;mysql&#x8FDE;&#x63A5;&#x5668;&#xFF0C;&#x5305;&#x62EC;&#x90A3;&#x4E9B;&#x4F7F;&#x7528;&#x975E;ascii&#x8868;/&#x5217;&#x540D;&#x79F0;&#x7684;&#x6D4B;&#x8BD5;&#xFF0C;&#x4EE5;&#x53CA;&#x4F7F;&#x7528;unicode&#x5728;cursor.executemany()&#x4E0B;&#x7684;TEXT&#x7C7B;&#x578B;&#x7684;&#x4E00;&#x4E9B;&#x6D4B;&#x8BD5;&#x3002;<a class="changeset-link headerlink reference internal" href="#change-8fd1f3c05b103698df571c4d15925738">&#xB6;  T0&gt;</a></span></p><p></p></li></ul></div><div class="section" id="change-0.9.4-oracle"><h3><span class="yiyi-st" id="yiyi-736">&#x9884;&#x8A00;<a class="headerlink" href="#change-0.9.4-oracle" title="Permalink to this headline">&#xB6; T0&gt;</a></span></h3><ul class="simple"><li><p id="change-0.9.4-34"><span class="yiyi-st" id="yiyi-737"><span class="target" id="change-3a96f2348877f517e9c2f5950d4c1d1b"><strong>[oracle] [feature] </strong></span>&#x5728;cx_Oracle&#x65B9;&#x8A00;&#x4E2D;&#x6DFB;&#x52A0;&#x4E86;&#x4E00;&#x4E2A;&#x65B0;&#x7684;&#x5F15;&#x64CE;&#x9009;&#x9879;<code class="docutils literal"><span class="pre">coerce_to_unicode=True</span></code>&#xFF0C;&#x8BE5;&#x65B9;&#x6CD5;&#x5C06;Python c2_Oracle outputtypehandler&#x65B9;&#x6CD5;&#x6062;&#x590D;&#x4E3A;Python 2&#x4E0B;&#x7684;Python unicode&#x8F6C;&#x6362;&#xFF0C;&#x5728;0.9.2&#x4E2D;&#x7531;&#x4E8E;<a class="reference external" href="http://www.sqlalchemy.org/trac/ticket/2911">&#xFF03;2911</a>&#x3002;</span><span class="yiyi-st" id="yiyi-738">&#x5C3D;&#x7BA1;&#x6709;&#x6027;&#x80FD;&#x65B9;&#x9762;&#x7684;&#x95EE;&#x9898;&#xFF0C;&#x4F46;&#x4E00;&#x4E9B;&#x4F7F;&#x7528;&#x6848;&#x4F8B;&#x5E0C;&#x671B;unicode coersion&#x5BF9;&#x6240;&#x6709;&#x5B57;&#x7B26;&#x4E32;&#x503C;&#x90FD;&#x662F;&#x65E0;&#x6761;&#x4EF6;&#x7684;&#x3002;</span><span class="yiyi-st" id="yiyi-739">&#x8BF7;&#x6C42;&#x793C;&#x8C8C;Christoph Zwerschke&#x3002;<a class="changeset-link headerlink reference internal" href="#change-3a96f2348877f517e9c2f5950d4c1d1b">&#xB6;</a></span></p><p><span class="yiyi-st" id="yiyi-740">&#x53C2;&#x8003;&#x6587;&#x732E;&#xFF1A;<a class="reference external" href="http://www.sqlalchemy.org/trac/ticket/2911">&#xFF03;2911</a>&#xFF0C;<a class="reference external" href="https://github.com/zzzeek/sqlalchemy/pull/74">&#x8BF7;&#x6C42;github&#xFF1A;74</a></span></p></li><li><p id="change-0.9.4-35"><span class="yiyi-st" id="yiyi-741"><span class="target" id="change-5861886a0faf27d02c29bdac44e39a74"><strong>[oracle] [bug] </strong></span>&#x589E;&#x52A0;&#x4E86;&#x65B0;&#x7684;&#x6570;&#x636E;&#x7C7B;&#x578B;<a class="reference internal" href="dialects_oracle.html#sqlalchemy.dialects.oracle.DATE" title="sqlalchemy.dialects.oracle.DATE"><code class="xref py py-class docutils literal"><span class="pre">oracle.DATE</span></code></a>&#xFF0C;&#x5B83;&#x662F;<a class="reference internal" href="core_type_basics.html#sqlalchemy.types.DateTime" title="sqlalchemy.types.DateTime"><code class="xref py py-class docutils literal"><span class="pre">DateTime</span></code></a>&#x7684;&#x5B50;&#x7C7B;&#x3002;</span><span class="yiyi-st" id="yiyi-742">As Oracle has no &#x201C;datetime&#x201D; type per se, it instead has only <code class="docutils literal"><span class="pre">DATE</span></code>, it is appropriate here that the <code class="docutils literal"><span class="pre">DATE</span></code> type as present in the Oracle dialect be an instance of <a class="reference internal" href="core_type_basics.html#sqlalchemy.types.DateTime" title="sqlalchemy.types.DateTime"><code class="xref py py-class docutils literal"><span class="pre">DateTime</span></code></a>. </span><span class="yiyi-st" id="yiyi-743">&#x8FD9;&#x4E2A;&#x95EE;&#x9898;&#x4E0D;&#x4F1A;&#x6539;&#x53D8;&#x4EFB;&#x4F55;&#x7C7B;&#x578B;&#x7684;&#x884C;&#x4E3A;&#xFF0C;&#x56E0;&#x4E3A;&#x5728;&#x4EFB;&#x4F55;&#x60C5;&#x51B5;&#x4E0B;&#x6570;&#x636E;&#x8F6C;&#x6362;&#x90FD;&#x7531;DBAPI&#x5904;&#x7406;&#xFF0C;&#x4F46;&#x6539;&#x8FDB;&#x7684;&#x5B50;&#x7C7B;&#x5E03;&#x5C40;&#x5C06;&#x6709;&#x52A9;&#x4E8E;&#x68C0;&#x67E5;&#x8DE8;&#x6570;&#x636E;&#x5E93;&#x517C;&#x5BB9;&#x6027;&#x7C7B;&#x578B;&#x7684;&#x7528;&#x4F8B;&#x3002;</span><span class="yiyi-st" id="yiyi-744">&#x8FD8;&#x4ECE;Oracle&#x65B9;&#x8A00;&#x4E2D;&#x5220;&#x9664;&#x4E86;&#x5927;&#x5199;&#x7684;<code class="docutils literal"><span class="pre">DATETIME</span></code>&#xFF0C;&#x56E0;&#x4E3A;&#x6B64;&#x7C7B;&#x578B;&#x5728;&#x8BE5;&#x4E0A;&#x4E0B;&#x6587;&#x4E2D;&#x4E0D;&#x8D77;&#x4F5C;&#x7528;&#x3002;<a class="changeset-link headerlink reference internal" href="#change-5861886a0faf27d02c29bdac44e39a74">&#xB6;</a></span></p><p><span class="yiyi-st" id="yiyi-745">&#x53C2;&#x8003;&#x6587;&#x732E;&#xFF1A;<a class="reference external" href="http://www.sqlalchemy.org/trac/ticket/2987">&#xFF03;2987</a></span></p></li></ul></div><div class="section" id="change-0.9.4-misc"><h3><span class="yiyi-st" id="yiyi-746">&#x6742;&#x9879;<a class="headerlink" href="#change-0.9.4-misc" title="Permalink to this headline">&#xB6; T0&gt;</a></span></h3><ul class="simple"><li><p id="change-0.9.4-36"><span class="yiyi-st" id="yiyi-747"><span class="target" id="change-7ed27baa911abecf8c4b54665d466e1c"><strong>[bug] [ext] </strong></span>Fixed bug in mutable extension as well as <a class="reference internal" href="orm_session_api.html#sqlalchemy.orm.attributes.flag_modified" title="sqlalchemy.orm.attributes.flag_modified"><code class="xref py py-func docutils literal"><span class="pre">attributes.flag_modified()</span></code></a> where the change event would not be propagated if the attribute had been reassigned to itself.<a class="changeset-link headerlink reference internal" href="#change-7ed27baa911abecf8c4b54665d466e1c">&#xB6;</a></span></p><p><span class="yiyi-st" id="yiyi-748">&#x8FD9;&#x4E2A;&#x6539;&#x53D8;&#x4E5F;&#x662F;<strong>backported</strong>&#x5230;&#xFF1A;0.8.6</span></p><p><span class="yiyi-st" id="yiyi-749">&#x53C2;&#x8003;&#x6587;&#x732E;&#xFF1A;<a class="reference external" href="http://www.sqlalchemy.org/trac/ticket/2997">&#xFF03;2997</a></span></p></li><li><p id="change-0.9.4-37"><span class="yiyi-st" id="yiyi-750"><span class="target" id="change-50822a3d39ca486f3c066ca9821edd45"><strong>[bug] [automap] [ext] </strong></span>&#x6DFB;&#x52A0;&#x4E86;&#x5BF9;automap&#x7684;&#x652F;&#x6301;&#xFF0C;&#x4EE5;&#x4FBF;&#x5728;&#x4E24;&#x4E2A;&#x5904;&#x4E8E;&#x5DF2;&#x8FDE;&#x63A5;&#x7EE7;&#x627F;&#x5173;&#x7CFB;&#x7684;&#x7C7B;&#x4E4B;&#x95F4;&#x4E0D;&#x5E94;&#x8BE5;&#x521B;&#x5EFA;&#x5173;&#x7CFB;&#x7684;&#x60C5;&#x51B5;&#x4E0B;&#xFF0C;&#x5C06;&#x5B50;&#x7C7B;&#x94FE;&#x63A5;&#x56DE;&#x8FD9;&#x4E9B;&#x5916;&#x952E;&#x5230;&#x8D85;&#x7C7B;&#x3002;<a class="changeset-link headerlink reference internal" href="#change-50822a3d39ca486f3c066ca9821edd45">&#xB6;</a></span></p><p><span class="yiyi-st" id="yiyi-751">&#x53C2;&#x8003;&#x6587;&#x732E;&#xFF1A;<a class="reference external" href="http://www.sqlalchemy.org/trac/ticket/3004">&#xFF03;3004</a></span></p></li><li><p id="change-0.9.4-38"><span class="yiyi-st" id="yiyi-752"><span class="target" id="change-65600f5e6f7388343eecd3b62edfa06e"><strong>[bug] [tests] </strong></span>&#x4FEE;&#x590D;&#x4E86;&#x4E00;&#x4E9B;&#x9519;&#x8BEF;&#x7684;<code class="docutils literal"><span class="pre">u&apos;&apos;</span></code>&#x5B57;&#x7B26;&#x4E32;&#xFF0C;&#x5B83;&#x4EEC;&#x4F1A;&#x963B;&#x6B62;&#x6D4B;&#x8BD5;&#x5728;Py3.2&#x4E2D;&#x4F20;&#x9012;&#x3002;</span><span class="yiyi-st" id="yiyi-753">&#x8865;&#x4E01;&#x793C;&#x8C8C;Arfrever Frehtes Taifersar Arahesis&#x3002;<a class="changeset-link headerlink reference internal" href="#change-65600f5e6f7388343eecd3b62edfa06e">&#xB6;</a></span></p><p><span class="yiyi-st" id="yiyi-754">&#x53C2;&#x8003;&#x6587;&#x732E;&#xFF1A;<a class="reference external" href="http://www.sqlalchemy.org/trac/ticket/2980">&#xFF03;2980</a></span></p></li><li><p id="change-0.9.4-39"><span class="yiyi-st" id="yiyi-755"><span class="target" id="change-fe5f6bf9974e7d6f327cb0f51b761366"><strong>[bug] [pool] </strong></span>Fixed small issue in <a class="reference internal" href="core_pooling.html#sqlalchemy.pool.SingletonThreadPool" title="sqlalchemy.pool.SingletonThreadPool"><code class="xref py py-class docutils literal"><span class="pre">SingletonThreadPool</span></code></a> where the current connection to be returned might get inadvertently cleaned out during the &#x201C;cleanup&#x201D; process. </span><span class="yiyi-st" id="yiyi-756">&#x8865;&#x4E01;&#x793C;&#x8C8C;jd23. <a class="changeset-link headerlink reference internal" href="#change-fe5f6bf9974e7d6f327cb0f51b761366">&#xB6;</a></span></p><p></p></li><li><p id="change-0.9.4-40"><span class="yiyi-st" id="yiyi-757"><span class="target" id="change-4efb0c1e9b726653c4fc710a9ed431bc"><strong>[bug] [ext] [py3k] </strong></span>Fixed bug in association proxy where assigning an empty slice (e.g. <code class="docutils literal"><span class="pre">x[:]</span> <span class="pre">=</span> <span class="pre">[...]</span></code>) would fail on Py3k.<a class="changeset-link headerlink reference internal" href="#change-4efb0c1e9b726653c4fc710a9ed431bc">&#xB6;</a></span></p><p></p></li><li><p id="change-0.9.4-41"><span class="yiyi-st" id="yiyi-758"><span class="target" id="change-30555d2dbceb91ce584663b6726101d0"><strong>[bug] [ext] </strong></span>Fixed a regression in association proxy caused by <a class="reference external" href="http://www.sqlalchemy.org/trac/ticket/2810">#2810</a> which caused a user-provided &#x201C;getter&#x201D; to no longer receive values of <code class="docutils literal"><span class="pre">None</span></code> when fetching scalar values from a target that is non-present. </span><span class="yiyi-st" id="yiyi-759">&#x6B64;&#x66F4;&#x6539;&#x5F15;&#x5165;&#x7684;None&#x68C0;&#x67E5;&#x73B0;&#x5728;&#x79FB;&#x5165;&#x9ED8;&#x8BA4;getter&#xFF0C;&#x56E0;&#x6B64;&#x7528;&#x6237;&#x63D0;&#x4F9B;&#x7684;getter&#x4E5F;&#x5C06;&#x518D;&#x6B21;&#x63A5;&#x6536;None&#x503C;&#x3002;<a class="changeset-link headerlink reference internal" href="#change-30555d2dbceb91ce584663b6726101d0">&#xB6;</a></span></p><p><span class="yiyi-st" id="yiyi-760">&#x53C2;&#x8003;&#x6587;&#x732E;&#xFF1A;<a class="reference external" href="http://www.sqlalchemy.org/trac/ticket/2810">&#xFF03;2810</a></span></p></li><li><p id="change-0.9.4-42"><span class="yiyi-st" id="yiyi-761"><span class="target" id="change-e0ab0a5338c4fe508e1a11411752a73c"><strong>[bug] [examples] </strong></span>&#x4FEE;&#x6B63;&#x4E86;&#x7248;&#x672C;&#x7EA7;&#x522B;&#x793A;&#x4F8B;&#x4E2D;&#x7684;&#x5217;&#x7EA7;&#x522B;INSERT&#x9ED8;&#x8BA4;&#x503C;&#x4F1A;&#x963B;&#x6B62;&#x5199;&#x5165;&#x5386;&#x53F2;&#x503C;NULL&#x7684;&#x9519;&#x8BEF;&#x3002;<a class="changeset-link headerlink reference internal" href="#change-e0ab0a5338c4fe508e1a11411752a73c">&#xB6;</a></span></p><p></p></li></ul></div></div><div class="section" id="change-0.9.3"><h2><span class="yiyi-st" id="yiyi-763">0.9.3 <a class="headerlink" href="#change-0.9.3" title="Permalink to this headline">&#xB6; T0&gt;</a></span></h2><span class="yiyi-st" id="yiyi-851">&#x53D1;&#x5E03;&#x65E5;&#x671F;&#xFF1A;2014&#x5E74;2&#x6708;19&#x65E5;</span><div class="section" id="change-0.9.3-orm"><h3><span class="yiyi-st" id="yiyi-764">ORM <a class="headerlink" href="#change-0.9.3-orm" title="Permalink to this headline">&#xB6; T0&gt;</a></span></h3><ul class="simple"><li><p id="change-0.9.3-0"><span class="yiyi-st" id="yiyi-765"><span class="target" id="change-eb786e8c736c09ac5a33083ba8a84ffd"><strong>[orm] [feature] </strong></span>&#x6DFB;&#x52A0;&#x4E86;&#x65B0;&#x7684;<a class="reference internal" href="orm_events.html#sqlalchemy.orm.events.MapperEvents.before_configured" title="sqlalchemy.orm.events.MapperEvents.before_configured"><code class="xref py py-meth docutils literal"><span class="pre">MapperEvents.before_configured()</span></code></a>&#x4E8B;&#x4EF6;&#xFF0C;&#x8BE5;&#x4E8B;&#x4EF6;&#x5141;&#x8BB8;&#x5728;<a class="reference internal" href="orm_mapping_api.html#sqlalchemy.orm.configure_mappers" title="sqlalchemy.orm.configure_mappers"><code class="xref py py-func docutils literal"><span class="pre">configure_mappers()</span></code></a> <code class="docutils literal"><span class="pre">__declare_first__()</span></code>&#x94A9;&#x5B50;&#x5728;&#x58F0;&#x660E;&#x4E2D;&#x8865;&#x5145;<code class="docutils literal"><span class="pre">__declare_last__()</span></code>&#x3002;<a class="changeset-link headerlink reference internal" href="#change-eb786e8c736c09ac5a33083ba8a84ffd">&#xB6;</a></span></p><p></p></li><li><p id="change-0.9.3-1"><span class="yiyi-st" id="yiyi-766"><span class="target" id="change-96a72422aa09306aa423720d8a97b57c"><strong>[orm] [bug] </strong></span>Fixed bug where <a class="reference internal" href="orm_query.html#sqlalchemy.orm.query.Query.get" title="sqlalchemy.orm.query.Query.get"><code class="xref py py-meth docutils literal"><span class="pre">Query.get()</span></code></a> would fail to consistently raise the <a class="reference internal" href="core_exceptions.html#sqlalchemy.exc.InvalidRequestError" title="sqlalchemy.exc.InvalidRequestError"><code class="xref py py-class docutils literal"><span class="pre">InvalidRequestError</span></code></a> that invokes when called on a query with existing criterion, when the given identity is already present in the identity map.<a class="changeset-link headerlink reference internal" href="#change-96a72422aa09306aa423720d8a97b57c">&#xB6;</a></span></p><p><span class="yiyi-st" id="yiyi-767">&#x8FD9;&#x4E2A;&#x6539;&#x53D8;&#x4E5F;&#x88AB;<strong>backported</strong>&#x4FEE;&#x6539;&#x4E3A;&#xFF1A;0.8.5</span></p><p><span class="yiyi-st" id="yiyi-768">&#x53C2;&#x8003;&#x6587;&#x732E;&#xFF1A;<a class="reference external" href="http://www.sqlalchemy.org/trac/ticket/2951">&#xFF03;2951</a></span></p></li><li><p id="change-0.9.3-2"><span class="yiyi-st" id="yiyi-769"><span class="target" id="change-bcd89a790df27cfdcae2a8109b61d16e"><strong>[orm] [bug] [sqlite] </strong></span>Fixed bug in SQLite &#x201C;join rewriting&#x201D; where usage of an exists() construct would fail to be rewritten properly, such as when the exists is mapped to a column_property in an intricate nested-join scenario. </span><span class="yiyi-st" id="yiyi-770">&#x8FD8;&#x4FEE;&#x590D;&#x4E86;&#x4E00;&#x4E2A;&#x6709;&#x70B9;&#x76F8;&#x5173;&#x7684;&#x95EE;&#x9898;&#xFF0C;&#x5982;&#x679C;&#x76EE;&#x6807;&#x662F;&#x522B;&#x540D;&#x8868;&#xFF0C;&#x800C;&#x4E0D;&#x662F;&#x5355;&#x72EC;&#x7684;&#x522B;&#x540D;&#x5217;&#xFF0C;&#x90A3;&#x4E48;&#x5728;SELECT&#x8BED;&#x53E5;&#x7684;columns&#x5B50;&#x53E5;&#x4E0A;&#x8FDE;&#x63A5;&#x91CD;&#x5199;&#x5C06;&#x5931;&#x8D25;&#x3002;<a class="changeset-link headerlink reference internal" href="#change-bcd89a790df27cfdcae2a8109b61d16e">&#xB6;</a></span></p><p><span class="yiyi-st" id="yiyi-771">&#x53C2;&#x8003;&#x6587;&#x732E;&#xFF1A;<a class="reference external" href="http://www.sqlalchemy.org/trac/ticket/2967">&#xFF03;2967</a></span></p></li><li><p id="change-0.9.3-3"><span class="yiyi-st" id="yiyi-772"><span class="target" id="change-5d64e437351667e0682df36dc7a55ebb"><strong>[orm] [bug] </strong></span>Fixed an 0.9 regression where ORM instance or mapper events applied to a base class such as a declarative base with the propagate=True flag would fail to apply to existing mapped classes which also used inheritance due to an assertion. </span><span class="yiyi-st" id="yiyi-773">&#x53E6;&#x5916;&#xFF0C;&#x6839;&#x636E;&#x9996;&#x6B21;&#x5206;&#x914D;&#x7684;&#x65B9;&#x5F0F;&#xFF0C;&#x4FEE;&#x590D;&#x4E86;&#x5728;&#x5220;&#x9664;&#x6B64;&#x7C7B;&#x4E8B;&#x4EF6;&#x671F;&#x95F4;&#x53EF;&#x80FD;&#x53D1;&#x751F;&#x7684;&#x5C5E;&#x6027;&#x9519;&#x8BEF;&#x3002;<a class="changeset-link headerlink reference internal" href="#change-5d64e437351667e0682df36dc7a55ebb">&#xB6;</a></span></p><p><span class="yiyi-st" id="yiyi-774">&#x53C2;&#x8003;&#x6587;&#x732E;&#xFF1A;<a class="reference external" href="http://www.sqlalchemy.org/trac/ticket/2949">&#xFF03;2949</a></span></p></li><li><p id="change-0.9.3-4"><span class="yiyi-st" id="yiyi-775"><span class="target" id="change-af92c4a9aa53d0e18016cc10a0c419db"><strong>[orm] [bug] </strong></span>&#x6539;&#x8FDB;&#x4E86;&#x7EC4;&#x5408;&#x5C5E;&#x6027;&#x7684;&#x521D;&#x59CB;&#x5316;&#x903B;&#x8F91;&#xFF0C;&#x4F8B;&#x5982;&#x8C03;&#x7528;<code class="docutils literal"><span class="pre">MyClass.attribute</span></code>&#x4E0D;&#x9700;&#x8981;&#x6267;&#x884C;configure mappers&#x6B65;&#x9AA4;&#x3002;&#x5B83;&#x4F1A;&#x5728;&#x6CA1;&#x6709;&#x4EFB;&#x4F55;&#x9519;&#x8BEF;&#x7684;&#x60C5;&#x51B5;&#x4E0B;&#x5DE5;&#x4F5C;&#x3002;<a class="changeset-link headerlink reference internal" href="#change-af92c4a9aa53d0e18016cc10a0c419db">&#xB6;</a></span></p><p><span class="yiyi-st" id="yiyi-776">&#x53C2;&#x8003;&#x6587;&#x732E;&#xFF1A;<a class="reference external" href="http://www.sqlalchemy.org/trac/ticket/2935">&#xFF03;2935</a></span></p></li><li><p id="change-0.9.3-5"><span class="yiyi-st" id="yiyi-777"><span class="target" id="change-f823d5ff3da539a90fc0cf3f7dac97c5"><strong>[orm] [bug] </strong></span>More issues with [ticket:2932] first resolved in 0.9.2 where using a column key of the form <code class="docutils literal"><span class="pre">&lt;tablename&gt;_&lt;columnname&gt;</span></code> matching that of an aliased column in the text would still not match at the ORM level, which is ultimately due to a core column-matching issue. </span><span class="yiyi-st" id="yiyi-778">&#x6DFB;&#x52A0;&#x4E86;&#x5176;&#x4ED6;&#x89C4;&#x5219;&#xFF0C;&#x4EE5;&#x4FBF;&#x5728;&#x4F7F;&#x7528;<a class="reference internal" href="core_selectable.html#sqlalchemy.sql.expression.TextAsFrom" title="sqlalchemy.sql.expression.TextAsFrom"><code class="xref py py-class docutils literal"><span class="pre">TextAsFrom</span></code></a>&#x6784;&#x9020;&#x6216;&#x4F7F;&#x7528;&#x6587;&#x5B57;&#x5217;&#x65F6;&#x8003;&#x8651;&#x5217;<code class="docutils literal"><span class="pre">_label</span></code>&#x3002;<a class="changeset-link headerlink reference internal" href="#change-f823d5ff3da539a90fc0cf3f7dac97c5">&#xB6;</a></span></p><p><span class="yiyi-st" id="yiyi-779">&#x53C2;&#x8003;&#x6587;&#x732E;&#xFF1A;<a class="reference external" href="http://www.sqlalchemy.org/trac/ticket/2932">&#xFF03;2932</a></span></p></li></ul></div><div class="section" id="change-0.9.3-orm-declarative"><h3><span class="yiyi-st" id="yiyi-780">orm declarative <a class="headerlink" href="#change-0.9.3-orm-declarative" title="Permalink to this headline">&#xB6;</a></span></h3><ul class="simple"><li><p id="change-0.9.3-6"><span class="yiyi-st" id="yiyi-781"><span class="target" id="change-fdcf86f8dfe04be777c674c066723232"><strong>[bug] [orm] [declarative] </strong></span>Fixed bug where <a class="reference internal" href="orm_extensions_declarative_api.html#sqlalchemy.ext.declarative.AbstractConcreteBase" title="sqlalchemy.ext.declarative.AbstractConcreteBase"><code class="xref py py-class docutils literal"><span class="pre">AbstractConcreteBase</span></code></a> would fail to be fully usable within declarative relationship configuration, as its string classname would not be available in the registry of classnames at mapper configuration time. </span><span class="yiyi-st" id="yiyi-782">The class now explicitly adds itself to the class regsitry, and additionally both <a class="reference internal" href="orm_extensions_declarative_api.html#sqlalchemy.ext.declarative.AbstractConcreteBase" title="sqlalchemy.ext.declarative.AbstractConcreteBase"><code class="xref py py-class docutils literal"><span class="pre">AbstractConcreteBase</span></code></a> as well as <a class="reference internal" href="orm_extensions_declarative_api.html#sqlalchemy.ext.declarative.ConcreteBase" title="sqlalchemy.ext.declarative.ConcreteBase"><code class="xref py py-class docutils literal"><span class="pre">ConcreteBase</span></code></a> set themselves up <em>before</em> mappers are configured within the <a class="reference internal" href="orm_mapping_api.html#sqlalchemy.orm.configure_mappers" title="sqlalchemy.orm.configure_mappers"><code class="xref py py-func docutils literal"><span class="pre">configure_mappers()</span></code></a> setup, using the new <a class="reference internal" href="orm_events.html#sqlalchemy.orm.events.MapperEvents.before_configured" title="sqlalchemy.orm.events.MapperEvents.before_configured"><code class="xref py py-meth docutils literal"><span class="pre">MapperEvents.before_configured()</span></code></a> event.<a class="changeset-link headerlink reference internal" href="#change-fdcf86f8dfe04be777c674c066723232">&#xB6;</a></span></p><p><span class="yiyi-st" id="yiyi-783">&#x53C2;&#x8003;&#x6587;&#x732E;&#xFF1A;<a class="reference external" href="http://www.sqlalchemy.org/trac/ticket/2950">&#xFF03;2950</a></span></p></li></ul></div><div class="section" id="change-0.9.3-engine"><h3><span class="yiyi-st" id="yiyi-784">&#x53D1;&#x52A8;&#x673A;<a class="headerlink" href="#change-0.9.3-engine" title="Permalink to this headline">&#xB6; T0&gt;</a></span></h3><ul class="simple"><li><p id="change-0.9.3-7"><span class="yiyi-st" id="yiyi-785"><span class="target" id="change-a5e88f49d79f6b2a868c6f66b3be7d98"><strong>[engine] [bug] [pool] </strong></span>Fixed a critical regression caused by <a class="reference external" href="http://www.sqlalchemy.org/trac/ticket/2880">#2880</a> where the newly concurrent ability to return connections from the pool means that the &#x201C;first_connect&#x201D; event is now no longer synchronized either, thus leading to dialect mis-configurations under even minimal concurrency situations.<a class="changeset-link headerlink reference internal" href="#change-a5e88f49d79f6b2a868c6f66b3be7d98">&#xB6;</a></span></p><p><span class="yiyi-st" id="yiyi-786">&#x8FD9;&#x4E2A;&#x6539;&#x53D8;&#x4E5F;&#x88AB;<strong>backported</strong>&#x4FEE;&#x6539;&#x4E3A;&#xFF1A;0.8.5</span></p><p><span class="yiyi-st" id="yiyi-787">&#x53C2;&#x8003;&#x6587;&#x732E;&#xFF1A;<a class="reference external" href="http://www.sqlalchemy.org/trac/ticket/2964">&#xFF03;2964</a>&#xFF0C;<a class="reference external" href="http://www.sqlalchemy.org/trac/ticket/2880">&#xFF03;2880</a></span></p></li></ul></div><div class="section" id="change-0.9.3-sql"><h3><span class="yiyi-st" id="yiyi-788">SQL <a class="headerlink" href="#change-0.9.3-sql" title="Permalink to this headline">&#xB6; T0&gt;</a></span></h3><ul class="simple"><li><p id="change-0.9.3-8"><span class="yiyi-st" id="yiyi-789"><span class="target" id="change-4bcdb46ed066a2c9b8490bf78da16720"><strong>[sql] [bug] </strong></span>Fixed bug where calling <a class="reference internal" href="core_dml.html#sqlalchemy.sql.expression.Insert.values" title="sqlalchemy.sql.expression.Insert.values"><code class="xref py py-meth docutils literal"><span class="pre">Insert.values()</span></code></a> with an empty list or tuple would raise an IndexError. </span><span class="yiyi-st" id="yiyi-790">&#x5B83;&#x73B0;&#x5728;&#x4EA7;&#x751F;&#x4E00;&#x4E2A;&#x7A7A;&#x7684;&#x63D2;&#x5165;&#x7ED3;&#x6784;&#xFF0C;&#x5C31;&#x50CF;&#x7A7A;&#x5B57;&#x5178;&#x4E00;&#x6837;&#x3002;<a class="changeset-link headerlink reference internal" href="#change-4bcdb46ed066a2c9b8490bf78da16720">&#xB6;</a></span></p><p><span class="yiyi-st" id="yiyi-791">&#x8FD9;&#x4E2A;&#x6539;&#x53D8;&#x4E5F;&#x88AB;<strong>backported</strong>&#x4FEE;&#x6539;&#x4E3A;&#xFF1A;0.8.5</span></p><p><span class="yiyi-st" id="yiyi-792">&#x53C2;&#x8003;&#x6587;&#x732E;&#xFF1A;<a class="reference external" href="http://www.sqlalchemy.org/trac/ticket/2944">&#xFF03;2944</a></span></p></li><li><p id="change-0.9.3-9"><span class="yiyi-st" id="yiyi-793"><span class="target" id="change-d04236a265c2b96a0d1c28f0cb10ee98"><strong>[sql] [bug] </strong></span>Fixed bug where <a class="reference internal" href="orm_internals.html#sqlalchemy.orm.properties.RelationshipProperty.Comparator.in_" title="sqlalchemy.orm.properties.RelationshipProperty.Comparator.in_"><code class="xref py py-meth docutils literal"><span class="pre">in_()</span></code></a> would go into an endless loop if erroneously passed a column expression whose comparator included the <code class="docutils literal"><span class="pre">__getitem__()</span></code> method, such as a column that uses the <a class="reference internal" href="dialects_postgresql.html#sqlalchemy.dialects.postgresql.ARRAY" title="sqlalchemy.dialects.postgresql.ARRAY"><code class="xref py py-class docutils literal"><span class="pre">postgresql.ARRAY</span></code></a> type.<a class="changeset-link headerlink reference internal" href="#change-d04236a265c2b96a0d1c28f0cb10ee98">&#xB6;</a></span></p><p><span class="yiyi-st" id="yiyi-794">&#x8FD9;&#x4E2A;&#x6539;&#x53D8;&#x4E5F;&#x88AB;<strong>backported</strong>&#x4FEE;&#x6539;&#x4E3A;&#xFF1A;0.8.5</span></p><p><span class="yiyi-st" id="yiyi-795">&#x53C2;&#x8003;&#x6587;&#x732E;&#xFF1A;<a class="reference external" href="http://www.sqlalchemy.org/trac/ticket/2957">&#xFF03;2957</a></span></p></li><li><p id="change-0.9.3-10"><span class="yiyi-st" id="yiyi-796"><span class="target" id="change-32e5f45f2c9cbe4cd6ccc0326087b300"><strong>[sql] [bug] </strong></span>Fixed regression in new &#x201C;naming convention&#x201D; feature where conventions would fail if the referred table in a foreign key contained a schema name. </span><span class="yiyi-st" id="yiyi-797">&#x8BF7;&#x6C42;&#x793C;&#x8C8C;Thomas Farvour&#x3002;<a class="changeset-link headerlink reference internal" href="#change-32e5f45f2c9cbe4cd6ccc0326087b300">&#xB6;</a></span></p><p><span class="yiyi-st" id="yiyi-798">&#x53C2;&#x8003;&#x6587;&#x732E;&#xFF1A;<a class="reference external" href="https://github.com/zzzeek/sqlalchemy/pull/67">pull request github&#xFF1A;67</a></span></p></li><li><p id="change-0.9.3-11"><span class="yiyi-st" id="yiyi-799"><span class="target" id="change-e2e7387ca4e9c810c4f780765399985c"><strong>[sql] [bug] </strong></span>Fixed bug where so-called &#x201C;literal render&#x201D; of <a class="reference internal" href="core_sqlelement.html#sqlalchemy.sql.expression.bindparam" title="sqlalchemy.sql.expression.bindparam"><code class="xref py py-func docutils literal"><span class="pre">bindparam()</span></code></a> constructs would fail if the bind were constructed with a callable, rather than a direct value. </span><span class="yiyi-st" id="yiyi-800">&#x8FD9;&#x963B;&#x6B62;&#x4E86;ORM&#x8868;&#x8FBE;&#x5F0F;&#x4F7F;&#x7528;&#x201C;literal_binds&#x201D;&#x7F16;&#x8BD1;&#x5668;&#x6807;&#x5FD7;&#x8FDB;&#x884C;&#x5448;&#x73B0;&#x3002;<a class="changeset-link headerlink reference internal" href="#change-e2e7387ca4e9c810c4f780765399985c">&#xB6;</a></span></p><p></p></li></ul></div><div class="section" id="change-0.9.3-postgresql"><h3><span class="yiyi-st" id="yiyi-801">&#x7684;PostgreSQL <a class="headerlink" href="#change-0.9.3-postgresql" title="Permalink to this headline">&#xB6; T0&gt;</a></span></h3><ul class="simple"><li><p id="change-0.9.3-12"><span class="yiyi-st" id="yiyi-802"><span class="target" id="change-2887ae0aba411e9eb86f31766ab46817"><strong>[postgresql] [feature] </strong></span>&#x5C06;<a class="reference internal" href="core_type_api.html#sqlalchemy.types.TypeEngine.python_type" title="sqlalchemy.types.TypeEngine.python_type"><code class="xref py py-attr docutils literal"><span class="pre">TypeEngine.python_type</span></code></a>&#x4FBF;&#x5229;&#x8BBF;&#x95EE;&#x5668;&#x6DFB;&#x52A0;&#x5230;<a class="reference internal" href="dialects_postgresql.html#sqlalchemy.dialects.postgresql.ARRAY" title="sqlalchemy.dialects.postgresql.ARRAY"><code class="xref py py-class docutils literal"><span class="pre">postgresql.ARRAY</span></code></a>&#x7C7B;&#x578B;&#x4E2D;&#x3002;</span><span class="yiyi-st" id="yiyi-803">&#x8BF7;&#x6C42;&#x793C;&#x8C8C;Alexey Terentev&#x3002;<a class="changeset-link headerlink reference internal" href="#change-2887ae0aba411e9eb86f31766ab46817">&#xB6;</a></span></p><p><span class="yiyi-st" id="yiyi-804">&#x53C2;&#x8003;&#xFF1A;<a class="reference external" href="https://github.com/zzzeek/sqlalchemy/pull/64">&#x8BF7;&#x6C42;github&#xFF1A;64</a></span></p></li><li><p id="change-0.9.3-13"><span class="yiyi-st" id="yiyi-805"><span class="target" id="change-6799209a311c3dc94eac58c106af18da"><strong>[postgresql] [bug] </strong></span>&#x589E;&#x52A0;&#x4E86;psycopg2&#x65AD;&#x5F00;&#x8FDE;&#x63A5;&#x68C0;&#x6D4B;&#x7684;&#x9644;&#x52A0;&#x4FE1;&#x606F;&#xFF0C;&#x201C;&#x65E0;&#x6CD5;&#x5C06;&#x6570;&#x636E;&#x53D1;&#x9001;&#x5230;&#x670D;&#x52A1;&#x5668;&#x201D;&#xFF0C;&#x8865;&#x5145;&#x4E86;&#x73B0;&#x6709;&#x7684;&#x201C;&#x65E0;&#x6CD5;&#x63A5;&#x6536;&#x6765;&#x81EA;&#x670D;&#x52A1;&#x5668;&#x7684;&#x6570;&#x636E;&#x201D;&#x5E76;&#x88AB;&#x7528;&#x6237;&#x89C2;&#x5BDF;&#x5230;&#x3002; <a class="changeset-link headerlink reference internal" href="#change-6799209a311c3dc94eac58c106af18da">&#xB6; T2&gt;</a></span></p><p><span class="yiyi-st" id="yiyi-806">&#x8FD9;&#x4E2A;&#x6539;&#x53D8;&#x4E5F;&#x88AB;<strong>backported</strong>&#x4FEE;&#x6539;&#x4E3A;&#xFF1A;0.8.5</span></p><p><span class="yiyi-st" id="yiyi-807">&#x53C2;&#x8003;&#x6587;&#x732E;&#xFF1A;<a class="reference external" href="http://www.sqlalchemy.org/trac/ticket/2936">&#xFF03;2936</a></span></p></li><li><p id="change-0.9.3-14"><span class="yiyi-st" id="yiyi-808"><span class="target" id="change-f41983d269d6edd9b36005f803524707"><strong>[postgresql] [bug] </strong></span></span></p><blockquote><div><span class="yiyi-st" id="yiyi-809">Postgresql&#x5728;Postgresql&#x7684;&#x65E7;&#x7248;&#x672C;&#xFF08;&#x4E4B;&#x524D;&#x7684;&#x7248;&#x672C;&#xFF09;&#x4EE5;&#x53CA;&#x5176;&#x4ED6;PG&#x5F15;&#x64CE;&#xFF08;&#x5982;Redshift&#xFF09;&#xFF08;&#x5047;&#x8BBE;Redshift&#x7684;&#x7248;&#x672C;&#x62A5;&#x544A;&#x4E3A;<8.1）时对postgresql反射行为的支持得到了改进。< span=""><span class="yiyi-st" id="yiyi-810">&#x67E5;&#x8BE2;&#x201C;&#x7D22;&#x5F15;&#x201D;&#x4EE5;&#x53CA;&#x201C;&#x4E3B;&#x952E;&#x201D;&#x4F9D;&#x8D56;&#x4E8E;&#x68C0;&#x67E5;&#x6240;&#x8C13;&#x7684;&#x201C;int2vector&#x201D;&#x6570;&#x636E;&#x7C7B;&#x578B;&#xFF0C;&#x8BE5;&#x6570;&#x636E;&#x7C7B;&#x578B;&#x5728;8.1&#x4E4B;&#x524D;&#x62D2;&#x7EDD;&#x80C1;&#x8FEB;&#x6570;&#x7EC4;&#xFF0C;&#x5BFC;&#x81F4;&#x67E5;&#x8BE2;&#x4E2D;&#x4F7F;&#x7528;&#x7684;&#x201C;ANY()&#x201D;&#x8FD0;&#x7B97;&#x7B26;&#x5931;&#x8D25;&#x3002;</span><span class="yiyi-st" id="yiyi-811">&#x5F53;PG&#x7248;&#x672C;<8.1被使用时，大量的搜索引擎已经找到了非常黑客但推荐的pg核心开发者查询，因此索引和主键约束反映现在可用于这些版本。< span=""></8.1被使用时，大量的搜索引擎已经找到了非常黑客但推荐的pg核心开发者查询，因此索引和主键约束反映现在可用于这些版本。<></span></8.1）时对postgresql反射行为的支持得到了改进。<></span></div></blockquote><span class="yiyi-st" id="yiyi-813"> <a class="changeset-link headerlink reference internal" href="#change-f41983d269d6edd9b36005f803524707">&#xB6;</a></span><p><span class="yiyi-st" id="yiyi-812">&#x8FD9;&#x4E2A;&#x6539;&#x53D8;&#x4E5F;&#x88AB;<strong>backported</strong>&#x4FEE;&#x6539;&#x4E3A;&#xFF1A;0.8.5</span></p><p></p></li><li><p id="change-0.9.3-15"><span class="yiyi-st" id="yiyi-814"><span class="target" id="change-5433997f376e8e488a886c0c8e165f57"><strong>[postgresql] [bug] </strong></span>Revised this very old issue where the Postgresql &#x201C;get primary key&#x201D; reflection query were updated to take into account primary key constraints that were renamed; the newer query fails on very old versions of Postgresql such as version 7, so the old query is restored in those cases when server_version_info &lt; (8, 0) is detected.<a class="changeset-link headerlink reference internal" href="#change-5433997f376e8e488a886c0c8e165f57">&#xB6;</a></span></p><p><span class="yiyi-st" id="yiyi-815">&#x8FD9;&#x4E2A;&#x6539;&#x53D8;&#x4E5F;&#x88AB;<strong>backported</strong>&#x4FEE;&#x6539;&#x4E3A;&#xFF1A;0.8.5</span></p><p><span class="yiyi-st" id="yiyi-816">&#x53C2;&#x8003;&#x6587;&#x732E;&#xFF1A;<a class="reference external" href="http://www.sqlalchemy.org/trac/ticket/2291">&#xFF03;2291</a></span></p></li><li><p id="change-0.9.3-16"><span class="yiyi-st" id="yiyi-817"><span class="target" id="change-4f3cfb3c174030c18a138b13afe7a215"><strong>[postgresql] [bug] </strong></span>&#x589E;&#x52A0;&#x4E86;&#x5BF9;&#x201C;show standard_conforming_strings&#x201D;&#x7684;&#x65B0;&#x589E;dialect&#x542F;&#x52A8;&#x67E5;&#x8BE2;&#x7684;&#x670D;&#x52A1;&#x5668;&#x7248;&#x672C;&#x68C0;&#x6D4B;&#xFF1B;&#x56E0;&#x4E3A;&#x8FD9;&#x4E2A;&#x53D8;&#x91CF;&#x662F;&#x4ECE;PG 8.2&#x5F00;&#x59CB;&#x6DFB;&#x52A0;&#x7684;&#xFF0C;&#x6240;&#x4EE5;&#x6211;&#x4EEC;&#x8DF3;&#x8FC7;PG&#x7248;&#x672C;&#x7684;&#x67E5;&#x8BE2;&#xFF0C;&#x5B83;&#x4EEC;&#x62A5;&#x544A;&#x65E9;&#x4E8E;&#x7248;&#x672C;&#x5B57;&#x7B26;&#x4E32;&#x7684;&#x7248;&#x672C;&#x3002;<a class="changeset-link headerlink reference internal" href="#change-4f3cfb3c174030c18a138b13afe7a215">&#xB6;</a></span></p><p><span class="yiyi-st" id="yiyi-818">&#x53C2;&#x8003;&#x6587;&#x732E;&#xFF1A;<a class="reference external" href="http://www.sqlalchemy.org/trac/ticket/2946">&#xFF03;2946</a></span></p></li></ul></div><div class="section" id="change-0.9.3-mysql"><h3><span class="yiyi-st" id="yiyi-819">MySQL&#x7684;<a class="headerlink" href="#change-0.9.3-mysql" title="Permalink to this headline">&#xB6; T0&gt;</a></span></h3><ul class="simple"><li><p id="change-0.9.3-17"><span class="yiyi-st" id="yiyi-820"><span class="target" id="change-ab9ba4668cce1a333145dd002a487a27"><strong>[mysql] [feature] </strong></span>&#x6DFB;&#x52A0;&#x4E86;&#x65B0;&#x7684;&#x7279;&#x5B9A;&#x4E8E;MySQL&#x7684;<a class="reference internal" href="dialects_mysql.html#sqlalchemy.dialects.mysql.DATETIME" title="sqlalchemy.dialects.mysql.DATETIME"><code class="xref py py-class docutils literal"><span class="pre">mysql.DATETIME</span></code></a>&#xFF0C;&#x5176;&#x4E2D;&#x5305;&#x62EC;&#x5C0F;&#x6570;&#x79D2;&#x652F;&#x6301;&#xFF1B;&#x8FD8;&#x589E;&#x52A0;&#x4E86;&#x5BF9;<a class="reference internal" href="dialects_mysql.html#sqlalchemy.dialects.mysql.TIMESTAMP" title="sqlalchemy.dialects.mysql.TIMESTAMP"><code class="xref py py-class docutils literal"><span class="pre">mysql.TIMESTAMP</span></code></a>&#x7684;&#x5C0F;&#x6570;&#x79D2;&#x652F;&#x6301;&#x3002;</span><span class="yiyi-st" id="yiyi-821">DBAPI&#x652F;&#x6301;&#x662F;&#x6709;&#x9650;&#x7684;&#xFF0C;&#x5C3D;&#x7BA1;&#x5C0F;&#x6570;&#x79D2;&#x88AB;MySQL Connector / Python&#x652F;&#x6301;&#x3002;</span><span class="yiyi-st" id="yiyi-822">&#x8865;&#x4E01;&#x7531;Geert JM Vanderkelen&#x63D0;&#x4F9B;&#x3002;<a class="changeset-link headerlink reference internal" href="#change-ab9ba4668cce1a333145dd002a487a27">&#xB6;</a></span></p><p><span class="yiyi-st" id="yiyi-823">&#x8FD9;&#x4E2A;&#x6539;&#x53D8;&#x4E5F;&#x88AB;<strong>backported</strong>&#x4FEE;&#x6539;&#x4E3A;&#xFF1A;0.8.5</span></p><p><span class="yiyi-st" id="yiyi-824">&#x53C2;&#x8003;&#x6587;&#x732E;&#xFF1A;<a class="reference external" href="http://www.sqlalchemy.org/trac/ticket/2941">&#xFF03;2941</a></span></p></li><li><p id="change-0.9.3-18"><span class="yiyi-st" id="yiyi-825"><span class="target" id="change-985ed90f90095c4b537ea36d3c1ac546"><strong>[mysql] [bug] </strong></span>&#x6DFB;&#x52A0;&#x4E86;&#x5BF9;<code class="docutils literal"><span class="pre">&#x5206;&#x533A;</span> <span class="pre">BY</span></code>&#x548C;<code class="docutils literal"><span class="pre">PARTITIONS</span></code> MySQL&#x7684;&#x652F;&#x6301;&#x5C06;&#x8868;&#x5173;&#x952E;&#x5B57;&#x6307;&#x5B9A;&#x4E3A;<code class="docutils literal"><span class="pre">mysql_partition_by=&apos;value&apos;</span></code>&#x548C;<code class="docutils literal"><span class="pre">mysql_partitions=&apos;value&apos;</span></code>&#x81F3;<a class="reference internal" href="core_metadata.html#sqlalchemy.schema.Table" title="sqlalchemy.schema.Table"><code class="xref py py-class docutils literal"><span class="pre">Table</span></code></a>&#x3002;</span><span class="yiyi-st" id="yiyi-826">&#x62C9;&#x739B;&#x8BF7;&#x6C42;&#x63D0;&#x4F9B;Marcus McCurdy&#x3002;<a class="changeset-link headerlink reference internal" href="#change-985ed90f90095c4b537ea36d3c1ac546">&#xB6;</a></span></p><p><span class="yiyi-st" id="yiyi-827">&#x8FD9;&#x4E2A;&#x6539;&#x53D8;&#x4E5F;&#x88AB;<strong>backported</strong>&#x4FEE;&#x6539;&#x4E3A;&#xFF1A;0.8.5</span></p><p><span class="yiyi-st" id="yiyi-828">References: <a class="reference external" href="http://www.sqlalchemy.org/trac/ticket/2966">#2966</a>, <a class="reference external" href="https://bitbucket.org/zzzeek/sqlalchemy/pull-request/12">pull request bitbucket:12</a></span></p></li><li><p id="change-0.9.3-19"><span class="yiyi-st" id="yiyi-829"><span class="target" id="change-73d5f7e864d7ffd3bf7060a3a52e6d34"><strong>[mysql] [bug] </strong></span>Fixed bug which prevented MySQLdb-based dialects (e.g. pymysql) from working in Py3K, where a check for &#x201C;connection charset&#x201D; would fail due to Py3K&#x2019;s more strict value comparison rules. </span><span class="yiyi-st" id="yiyi-830">&#x8FD9;&#x4E2A;&#x8C03;&#x7528;&#x5728;&#x4EFB;&#x4F55;&#x60C5;&#x51B5;&#x4E0B;&#x90FD;&#x6CA1;&#x6709;&#x8003;&#x8651;&#x5230;&#x6570;&#x636E;&#x5E93;&#x7248;&#x672C;&#xFF0C;&#x56E0;&#x4E3A;&#x670D;&#x52A1;&#x5668;&#x7248;&#x672C;&#x5728;&#x90A3;&#x65F6;&#x4ECD;&#x7136;&#x662F;None&#xFF0C;&#x6240;&#x4EE5;&#x6574;&#x4E2A;&#x65B9;&#x6CD5;&#x88AB;&#x7B80;&#x5316;&#x4E3A;&#x4F9D;&#x8D56;&#x4E8E;connection.character_set_name()&#x3002;<a class="changeset-link headerlink reference internal" href="#change-73d5f7e864d7ffd3bf7060a3a52e6d34">&#xB6; t0 &gt;</a></span></p><p><span class="yiyi-st" id="yiyi-831">&#x8FD9;&#x4E2A;&#x6539;&#x53D8;&#x4E5F;&#x88AB;<strong>backported</strong>&#x4FEE;&#x6539;&#x4E3A;&#xFF1A;0.8.5</span></p><p><span class="yiyi-st" id="yiyi-832">&#x53C2;&#x8003;&#x6587;&#x732E;&#xFF1A;<a class="reference external" href="http://www.sqlalchemy.org/trac/ticket/2933">&#xFF03;2933</a></span></p></li><li><p id="change-0.9.3-20"><span class="yiyi-st" id="yiyi-833"><span class="target" id="change-cec15bf8dc76d9d68418cad966e2a9f1"><strong>[mysql] [bug] [cymysql] </strong></span>&#x4FEE;&#x6B63;&#x4E86;cymysql&#x65B9;&#x8A00;&#x4E2D;&#x8BF8;&#x5982;<code class="docutils literal"><span class="pre">&apos;33a-MariaDB&apos;</span></code>&#x7B49;&#x7248;&#x672C;&#x5B57;&#x7B26;&#x4E32;&#x65E0;&#x6CD5;&#x6B63;&#x786E;&#x89E3;&#x6790;&#x7684;&#x9519;&#x8BEF;&#x3002;</span><span class="yiyi-st" id="yiyi-834">&#x62C9;&#x8BF7;&#x6C42;&#x9A6C;&#x7279;&#x65BD;&#x5BC6;&#x7279;&#x3002;<a class="changeset-link headerlink reference internal" href="#change-cec15bf8dc76d9d68418cad966e2a9f1">&#xB6;</a></span></p><p><span class="yiyi-st" id="yiyi-835">&#x53C2;&#x8003;&#x6587;&#x732E;&#xFF1A;<a class="reference external" href="http://www.sqlalchemy.org/trac/ticket/2934">&#xFF03;2934</a>&#xFF0C;<a class="reference external" href="https://github.com/zzzeek/sqlalchemy/pull/69">&#x8BF7;&#x6C42;github&#xFF1A;69</a></span></p></li></ul></div><div class="section" id="change-0.9.3-sqlite"><h3><span class="yiyi-st" id="yiyi-836">&#x6E90;&#x7801;<a class="headerlink" href="#change-0.9.3-sqlite" title="Permalink to this headline">&#xB6; T0&gt;</a></span></h3><ul class="simple"><li><p id="change-0.9.3-21"><span class="yiyi-st" id="yiyi-837"><span class="target" id="change-daa887aa6b3dccbb6a979e6d7ecfd2cb"><strong>[sqlite] [bug] </strong></span>The SQLite dialect will now skip unsupported arguments when reflecting types; such as if it encounters a string like <code class="docutils literal"><span class="pre">INTEGER(5)</span></code>, the <a class="reference internal" href="core_type_basics.html#sqlalchemy.types.INTEGER" title="sqlalchemy.types.INTEGER"><code class="xref py py-class docutils literal"><span class="pre">INTEGER</span></code></a> type will be instantiated without the &#x201C;5&#x201D; being included, based on detecting a <code class="docutils literal"><span class="pre">TypeError</span></code> on the first attempt.<a class="changeset-link headerlink reference internal" href="#change-daa887aa6b3dccbb6a979e6d7ecfd2cb">&#xB6;</a></span></p><p></p></li><li><p id="change-0.9.3-22"><span class="yiyi-st" id="yiyi-838"><span class="target" id="change-c8dda32a20ab1a2a6020cd0b56a025cf"><strong>[sqlite] [bug] </strong></span>&#x652F;&#x6301;&#x5DF2;&#x7ECF;&#x6DFB;&#x52A0;&#x5230;SQLite&#x7C7B;&#x578B;&#x53CD;&#x5C04;&#xFF0C;&#x4EE5;&#x5B8C;&#x5168;&#x652F;&#x6301;<a class="reference external" href="http://www.sqlite.org/datatype3.html">http://www.sqlite.org/datatype3.html&#x4E2D;&#x6307;&#x5B9A;&#x7684;&#x201C;&#x7C7B;&#x578B;&#x5173;&#x8054;&#x201D; T2&gt;&#x3002;</a></span><span class="yiyi-st" id="yiyi-839">&#x5728;&#x6B64;&#x65B9;&#x6848;&#x4E2D;&#xFF0C;&#x4F4D;&#x4E8E;&#x7C7B;&#x578B;&#x540D;&#x79F0;&#x4E2D;&#x7684;<code class="docutils literal"><span class="pre">INT</span></code>&#xFF0C;<code class="docutils literal"><span class="pre">CHAR</span></code>&#xFF0C;<code class="docutils literal"><span class="pre">BLOB</span></code>&#x6216;<code class="docutils literal"><span class="pre">REAL</span></code>&#x7B49;&#x5173;&#x952E;&#x5B57;&#x901A;&#x5E38;&#x4F1A;&#x5C06;&#x7C7B;&#x578B;&#x4E0E;&#x4E94;&#x4E2A;&#x4EB2;&#x7F18;&#x4E4B;&#x4E00;&#x3002;</span><span class="yiyi-st" id="yiyi-840">&#x8BF7;&#x6C42;&#x793C;&#x8C8C;Erich Blume&#x3002;</span></p><div class="admonition seealso"><p class="first admonition-title"><span class="yiyi-st" id="yiyi-841">&#x4E5F;&#x53EF;&#x4EE5;&#x770B;&#x770B;</span></p><p class="last"><span class="yiyi-st" id="yiyi-842"><a class="reference internal" href="dialects_sqlite.html#sqlite-type-reflection"><span>Type Reflection</span></a></span></p></div><span class="yiyi-st" id="yiyi-844"> <a class="changeset-link headerlink reference internal" href="#change-c8dda32a20ab1a2a6020cd0b56a025cf">&#xB6;</a></span><p><span class="yiyi-st" id="yiyi-843">&#x53C2;&#x8003;&#x6587;&#x732E;&#xFF1A;<a class="reference external" href="https://github.com/zzzeek/sqlalchemy/pull/65">&#x8BF7;&#x6C42;github&#xFF1A;65</a></span></p></li></ul></div><div class="section" id="change-0.9.3-misc"><h3><span class="yiyi-st" id="yiyi-845">&#x6742;&#x9879;<a class="headerlink" href="#change-0.9.3-misc" title="Permalink to this headline">&#xB6; T0&gt;</a></span></h3><ul class="simple"><li><p id="change-0.9.3-23"><span class="yiyi-st" id="yiyi-846"><span class="target" id="change-6e2fa11bc1b490afa61009b74983d414"><strong>[feature] [examples] </strong></span>&#x4E3A;&#x7248;&#x672C;&#x5316;&#x884C;&#x793A;&#x4F8B;&#x6DFB;&#x52A0;&#x4E86;&#x53EF;&#x9009;&#x7684;&#x201C;changed&#x201D;&#x5217;&#xFF0C;&#x4EE5;&#x53CA;&#x652F;&#x6301;&#x7248;&#x672C;&#x5316;&#x7684;<a class="reference internal" href="core_metadata.html#sqlalchemy.schema.Table" title="sqlalchemy.schema.Table"><code class="xref py py-class docutils literal"><span class="pre">Table</span></code></a>&#x5177;&#x6709;&#x663E;&#x5F0F;<a class="reference internal" href="core_metadata.html#sqlalchemy.schema.Table.params.schema" title="sqlalchemy.schema.Table"><code class="xref py py-paramref docutils literal"><span class="pre">schema</span></code></a></span><span class="yiyi-st" id="yiyi-847">&#x8BF7;&#x6C42;&#x793C;&#x8C8C;jplaverdure&#x3002;<a class="changeset-link headerlink reference internal" href="#change-6e2fa11bc1b490afa61009b74983d414">&#xB6;</a></span></p><p><span class="yiyi-st" id="yiyi-848">&#x53C2;&#x8003;&#x6587;&#x732E;&#xFF1A;<a class="reference external" href="https://github.com/zzzeek/sqlalchemy/pull/41">&#x8BF7;&#x6C42;github&#xFF1A;41</a></span></p></li><li><p id="change-0.9.3-24"><span class="yiyi-st" id="yiyi-849"><span class="target" id="change-30674584c851329f071d2f6c65eb6630"><strong>[bug] [ext] </strong></span>Fixed bug where the <a class="reference internal" href="orm_extensions_automap.html#sqlalchemy.ext.automap.AutomapBase" title="sqlalchemy.ext.automap.AutomapBase"><code class="xref py py-class docutils literal"><span class="pre">AutomapBase</span></code></a> class of the new automap extension would fail if classes were pre-arranged in single or potentially joined inheritance patterns. </span><span class="yiyi-st" id="yiyi-850">&#x4FEE;&#x590D;&#x540E;&#x7684;&#x5DF2;&#x8FDE;&#x63A5;&#x7EE7;&#x627F;&#x95EE;&#x9898;&#x4E5F;&#x53EF;&#x80FD;&#x5728;&#x4F7F;&#x7528;<a class="reference internal" href="orm_extensions_declarative_api.html#sqlalchemy.ext.declarative.DeferredReflection" title="sqlalchemy.ext.declarative.DeferredReflection"><code class="xref py py-class docutils literal"><span class="pre">DeferredReflection</span></code></a>&#x65F6;&#x6F5C;&#x5728;&#x5730;&#x9002;&#x7528;&#x3002;<a class="changeset-link headerlink reference internal" href="#change-30674584c851329f071d2f6c65eb6630">&#xB6;</a></span></p><p></p></li></ul></div></div><div class="section" id="change-0.9.2"><h2><span class="yiyi-st" id="yiyi-852">0.9.2 <a class="headerlink" href="#change-0.9.2" title="Permalink to this headline">&#xB6; T0&gt;</a></span></h2><span class="yiyi-st" id="yiyi-994">&#x53D1;&#x5E03;&#x65F6;&#x95F4;&#xFF1A;2014&#x5E74;2&#x6708;2&#x65E5;</span><div class="section" id="change-0.9.2-orm"><h3><span class="yiyi-st" id="yiyi-853">ORM <a class="headerlink" href="#change-0.9.2-orm" title="Permalink to this headline">&#xB6; T0&gt;</a></span></h3><ul class="simple"><li><p id="change-0.9.2-0"><span class="yiyi-st" id="yiyi-854"><span class="target" id="change-2dc2e780e8373cbbb7b3d14048f7f7dd"><strong>[orm] [feature] </strong></span>&#x6DFB;&#x52A0;&#x4E86;&#x4E00;&#x4E2A;&#x65B0;&#x53C2;&#x6570;<a class="reference internal" href="core_sqlelement.html#sqlalchemy.sql.operators.Operators.op.params.is_comparison" title="sqlalchemy.sql.operators.Operators.op"><code class="xref py py-paramref docutils literal"><span class="pre">Operators.op.is_comparison</span></code></a>&#x3002;</span><span class="yiyi-st" id="yiyi-855">&#x8BE5;&#x6807;&#x5FD7;&#x5141;&#x8BB8;&#x6765;&#x81EA;<a class="reference internal" href="core_sqlelement.html#sqlalchemy.sql.operators.Operators.op" title="sqlalchemy.sql.operators.Operators.op"><code class="xref py py-meth docutils literal"><span class="pre">Operators.op()</span></code></a>&#x7684;&#x81EA;&#x5B9A;&#x4E49;&#x64CD;&#x4F5C;&#x88AB;&#x89C6;&#x4E3A;&#x201C;&#x6BD4;&#x8F83;&#x201D;&#x64CD;&#x4F5C;&#x7B26;&#xFF0C;&#x56E0;&#x6B64;&#x53EF;&#x7528;&#x4E8E;&#x81EA;&#x5B9A;&#x4E49;<a class="reference internal" href="orm_relationship_api.html#sqlalchemy.orm.relationship.params.primaryjoin" title="sqlalchemy.orm.relationship"><code class="xref py py-paramref docutils literal"><span class="pre">relationship.primaryjoin</span></code></a>&#x6761;&#x4EF6;&#x3002;</span></p><div class="admonition seealso"><p class="first admonition-title"><span class="yiyi-st" id="yiyi-856">&#x4E5F;&#x53EF;&#x4EE5;&#x770B;&#x770B;</span></p><p class="last"><span class="yiyi-st" id="yiyi-857"><a class="reference internal" href="orm_join_conditions.html#relationship-custom-operator"><span>Using custom operators in join conditions</span></a>&#x4E2D;&#x4F7F;&#x7528;&#x81EA;&#x5B9A;&#x4E49;&#x8FD0;&#x7B97;&#x7B26;</span></p></div><span class="yiyi-st" id="yiyi-858"> <a class="changeset-link headerlink reference internal" href="#change-2dc2e780e8373cbbb7b3d14048f7f7dd">&#xB6;</a></span><p></p></li><li><p id="change-0.9.2-1"><span class="yiyi-st" id="yiyi-859"><span class="target" id="change-a8b3a5b9943f34a153c535d66ec180f9"><strong>[orm] [feature] </strong></span>&#x4E3A;&#x63D0;&#x4F9B;<a class="reference internal" href="core_selectable.html#sqlalchemy.sql.expression.join" title="sqlalchemy.sql.expression.join"><code class="xref py py-func docutils literal"><span class="pre">join()</span></code></a>&#x7ED3;&#x6784;&#x4F5C;&#x4E3A;<a class="reference internal" href="orm_relationship_api.html#sqlalchemy.orm.relationship.params.secondary" title="sqlalchemy.orm.relationship"><code class="xref py py-paramref docutils literal"><span class="pre">relationship.secondary</span></code></a>&#x7684;&#x76EE;&#x6807;&#xFF0C;&#x652F;&#x6301;&#x5F97;&#x5230;&#x4E86;&#x6539;&#x8FDB;&#x3002;&#x590D;&#x6742;&#x7684;<a class="reference internal" href="orm_relationship_api.html#sqlalchemy.orm.relationship" title="sqlalchemy.orm.relationship"><code class="xref py py-func docutils literal"><span class="pre">relationship()</span></code></a>&#x8FDE;&#x63A5;&#x6761;&#x4EF6;&#x3002;</span><span class="yiyi-st" id="yiyi-860">&#x8BE5;&#x66F4;&#x6539;&#x5305;&#x62EC;&#x5BF9;&#x67E5;&#x8BE2;&#x8FDE;&#x63A5;&#x7684;&#x8C03;&#x6574;&#xFF0C;&#x52A0;&#x5165;&#x7684;&#x9884;&#x52A0;&#x8F7D;&#x4EE5;&#x4E0D;&#x5448;&#x73B0;SELECT&#x5B50;&#x67E5;&#x8BE2;&#xFF0C;&#x66F4;&#x6539;&#x4E3A;&#x5EF6;&#x8FDF;&#x52A0;&#x8F7D;&#x4EE5;&#x4F7F;&#x201C;&#x8F85;&#x52A9;&#x201D;&#x76EE;&#x6807;&#x6B63;&#x786E;&#x5305;&#x542B;&#x5728;SELECT&#x4E2D;&#xFF0C;&#x5E76;&#x66F4;&#x6539;&#x4E3A;&#x58F0;&#x660E;&#x4EE5;&#x66F4;&#x597D;&#x5730;&#x652F;&#x6301;&#x6307;&#x5B9A;join()&#x5BF9;&#x8C61;&#x4EE5;&#x73ED;&#x7EA7;&#x4E3A;&#x76EE;&#x6807;&#x3002;</span></p><p><span class="yiyi-st" id="yiyi-861">&#x65B0;&#x7684;&#x4F7F;&#x7528;&#x6848;&#x4F8B;&#x6709;&#x70B9;&#x5B9E;&#x9A8C;&#x6027;&#xFF0C;&#x4F46;&#x589E;&#x52A0;&#x4E86;&#x65B0;&#x7684;&#x6587;&#x6863;&#x90E8;&#x5206;&#x3002;</span></p><div class="admonition seealso"><p class="first admonition-title"><span class="yiyi-st" id="yiyi-862">&#x4E5F;&#x53EF;&#x4EE5;&#x770B;&#x770B;</span></p><p class="last"><span class="yiyi-st" id="yiyi-863"><a class="reference internal" href="orm_join_conditions.html#composite-secondary-join"><span>Composite &#x201C;Secondary&#x201D; Joins</span></a></span></p></div><span class="yiyi-st" id="yiyi-864"> <a class="changeset-link headerlink reference internal" href="#change-a8b3a5b9943f34a153c535d66ec180f9">&#xB6;</a></span><p></p></li><li><p id="change-0.9.2-2"><span class="yiyi-st" id="yiyi-865">&#x5F53;&#x4E00;&#x4E2A;&#x8FED;&#x4EE3;&#x5668;&#x5BF9;&#x8C61;&#x88AB;&#x4F20;&#x9012;&#x7ED9;<a class="reference internal" href="orm_mapping_api.html#sqlalchemy.orm.class_mapper" title="sqlalchemy.orm.class_mapper"><code class="xref py py-func docutils literal"><span class="pre">class_mapper()</span></code></a>&#x6216;&#x7C7B;&#x4F3C;&#x7684;&#x9519;&#x8BEF;&#x6D88;&#x606F;&#x65F6;&#xFF0C;&#x4FEE;&#x6B63;&#x9519;&#x8BEF;&#x6D88;&#x606F;&#xFF0C;&#x5176;&#x4E2D;&#x9519;&#x8BEF;&#x5C06;&#x65E0;&#x6CD5;&#x5728;&#x5B57;&#x7B26;&#x4E32;&#x683C;&#x5F0F;&#x4E0A;&#x5448;&#x73B0;&#x3002;<span class="target" id="change-1c3f8f5feedf0bfccec2acf81dc4d612"><strong>[orm] [bug] </strong></span></span><span class="yiyi-st" id="yiyi-866">Pullleq&#x793C;&#x8C8C;Kyle Stark&#x3002;<a class="changeset-link headerlink reference internal" href="#change-1c3f8f5feedf0bfccec2acf81dc4d612">&#xB6;</a></span></p><p><span class="yiyi-st" id="yiyi-867">&#x8FD9;&#x4E2A;&#x6539;&#x53D8;&#x4E5F;&#x88AB;<strong>backported</strong>&#x4FEE;&#x6539;&#x4E3A;&#xFF1A;0.8.5</span></p><p><span class="yiyi-st" id="yiyi-868">&#x53C2;&#x8003;&#x6587;&#x732E;&#xFF1A;<a class="reference external" href="https://github.com/zzzeek/sqlalchemy/pull/58">&#x8BF7;&#x6C42;github&#xFF1A;58</a></span></p></li><li><p id="change-0.9.2-3"><span class="yiyi-st" id="yiyi-869"><span class="target" id="change-87563ee95139d715f8d0326c80758a47"><strong>[orm] [bug] </strong></span>Fixed bug in new <a class="reference internal" href="core_selectable.html#sqlalchemy.sql.expression.TextAsFrom" title="sqlalchemy.sql.expression.TextAsFrom"><code class="xref py py-class docutils literal"><span class="pre">TextAsFrom</span></code></a> construct where <a class="reference internal" href="core_metadata.html#sqlalchemy.schema.Column" title="sqlalchemy.schema.Column"><code class="xref py py-class docutils literal"><span class="pre">Column</span></code></a>- oriented row lookups were not matching up to the ad-hoc <a class="reference internal" href="core_sqlelement.html#sqlalchemy.sql.expression.ColumnClause" title="sqlalchemy.sql.expression.ColumnClause"><code class="xref py py-class docutils literal"><span class="pre">ColumnClause</span></code></a> objects that <a class="reference internal" href="core_selectable.html#sqlalchemy.sql.expression.TextAsFrom" title="sqlalchemy.sql.expression.TextAsFrom"><code class="xref py py-class docutils literal"><span class="pre">TextAsFrom</span></code></a> generates, thereby making it not usable as a target in <a class="reference internal" href="orm_query.html#sqlalchemy.orm.query.Query.from_statement" title="sqlalchemy.orm.query.Query.from_statement"><code class="xref py py-meth docutils literal"><span class="pre">Query.from_statement()</span></code></a>. </span><span class="yiyi-st" id="yiyi-870">&#x8FD8;&#x4FEE;&#x590D;&#x4E86;<a class="reference internal" href="orm_query.html#sqlalchemy.orm.query.Query.from_statement" title="sqlalchemy.orm.query.Query.from_statement"><code class="xref py py-meth docutils literal"><span class="pre">Query.from_statement()</span></code></a>&#x7ED3;&#x6784;&#xFF0C;&#x4F7F;&#x5176;&#x4E0D;&#x4F1A;&#x5C06;<a class="reference internal" href="core_selectable.html#sqlalchemy.sql.expression.TextAsFrom" title="sqlalchemy.sql.expression.TextAsFrom"><code class="xref py py-class docutils literal"><span class="pre">TextAsFrom</span></code></a>&#x8BEF;&#x8BA4;&#x4E3A;<a class="reference internal" href="core_selectable.html#sqlalchemy.sql.expression.Select" title="sqlalchemy.sql.expression.Select"><code class="xref py py-class docutils literal"><span class="pre">Select</span></code></a>&#x7ED3;&#x6784;&#x3002;</span><span class="yiyi-st" id="yiyi-871">&#x5F53;&#x8C03;&#x7528;<code class="xref py py-meth docutils literal"><span class="pre">Text.columns()</span></code>&#x65B9;&#x6CD5;&#x4EE5;&#x9002;&#x5E94;<a class="reference internal" href="core_sqlelement.html#sqlalchemy.sql.expression.text.params.typemap" title="sqlalchemy.sql.expression.text"><code class="xref py py-paramref docutils literal"><span class="pre">text.typemap</span></code></a>&#x53C2;&#x6570;&#x65F6;&#xFF0C;&#x6B64;bug&#x4E5F;&#x662F;0.9&#x56DE;&#x5F52;&#x3002;<a class="changeset-link headerlink reference internal" href="#change-87563ee95139d715f8d0326c80758a47">&#xB6;</a></span></p><p><span class="yiyi-st" id="yiyi-872">&#x53C2;&#x8003;&#x6587;&#x732E;&#xFF1A;<a class="reference external" href="http://www.sqlalchemy.org/trac/ticket/2932">&#xFF03;2932</a></span></p></li><li><p id="change-0.9.2-4"><span class="yiyi-st" id="yiyi-873"><span class="target" id="change-6dde90e6801f9bdf0bec0d5ba49cd086"><strong>[orm] [bug] </strong></span>&#x5728;&#x5C5E;&#x6027;&#x201C;set&#x201D;&#x64CD;&#x4F5C;&#x7684;&#x8303;&#x56F4;&#x5185;&#x6DFB;&#x52A0;&#x4E86;&#x4E00;&#x4E2A;&#x65B0;&#x7684;&#x6307;&#x4EE4;&#xFF0C;&#x7528;&#x4E8E;&#x5728;&#x5C5E;&#x6027;&#x9700;&#x8981;&#x5EF6;&#x8FDF;&#x52A0;&#x8F7D;&#x201C;old&#x201D;&#x503C;&#x7684;&#x60C5;&#x51B5;&#x4E0B;&#x7981;&#x7528;autoflush&#xFF0C;&#x5982;&#x5728;&#x66FF;&#x6362;&#x4E00;&#x5BF9;&#x4E00;&#x503C;&#x6216;&#x67D0;&#x79CD;&#x591A;&#x5BF9;&#x4E00;&#x65F6;&#x3002;</span><span class="yiyi-st" id="yiyi-874">&#x6B64;&#x65F6;&#x7684;&#x5237;&#x65B0;&#x5426;&#x5219;&#x4F1A;&#x53D1;&#x751F;&#x5728;&#x5C5E;&#x6027;&#x4E3A;None&#x4E14;&#x53EF;&#x80FD;&#x5BFC;&#x81F4;NULL&#x8FDD;&#x53CD;&#x7684;&#x5730;&#x65B9;&#x3002;<a class="changeset-link headerlink reference internal" href="#change-6dde90e6801f9bdf0bec0d5ba49cd086">&#xB6;</a></span></p><p><span class="yiyi-st" id="yiyi-875">&#x53C2;&#x8003;&#x6587;&#x732E;&#xFF1A;<a class="reference external" href="http://www.sqlalchemy.org/trac/ticket/2921">&#xFF03;2921</a></span></p></li><li><p id="change-0.9.2-5"><span class="yiyi-st" id="yiyi-876"><span class="target" id="change-03749d6f654c1889673b5e0c12e79baf"><strong>[orm] [bug] </strong></span>Fixed an 0.9 regression where the automatic aliasing applied by <a class="reference internal" href="orm_query.html#sqlalchemy.orm.query.Query" title="sqlalchemy.orm.query.Query"><code class="xref py py-class docutils literal"><span class="pre">Query</span></code></a> and in other situations where selects or joins were aliased (such as joined table inheritance) could fail if a user-defined <a class="reference internal" href="core_metadata.html#sqlalchemy.schema.Column" title="sqlalchemy.schema.Column"><code class="xref py py-class docutils literal"><span class="pre">Column</span></code></a> subclass were used in the expression. </span><span class="yiyi-st" id="yiyi-877">&#x5728;&#x8FD9;&#x79CD;&#x60C5;&#x51B5;&#x4E0B;&#xFF0C;&#x5B50;&#x7C7B;&#x5C06;&#x65E0;&#x6CD5;&#x4F20;&#x64AD;&#x9002;&#x5E94;&#x6240;&#x9700;&#x7684;ORM&#x7279;&#x5B9A;&#x201C;&#x6CE8;&#x91CA;&#x201D;&#x3002;</span><span class="yiyi-st" id="yiyi-878">&#x201C;&#x8868;&#x8FBE;&#x6CE8;&#x89E3;&#x201D;&#x7CFB;&#x7EDF;&#x5DF2;&#x88AB;&#x7EA0;&#x6B63;&#x4EE5;&#x89E3;&#x91CA;&#x8FD9;&#x79CD;&#x60C5;&#x51B5;&#x3002;<a class="changeset-link headerlink reference internal" href="#change-03749d6f654c1889673b5e0c12e79baf">&#xB6;</a></span></p><p><span class="yiyi-st" id="yiyi-879">&#x53C2;&#x8003;&#x6587;&#x732E;&#xFF1A;<a class="reference external" href="http://www.sqlalchemy.org/trac/ticket/2918">&#xFF03;2918</a></span></p></li><li><p id="change-0.9.2-6"><span class="yiyi-st" id="yiyi-880"><span class="target" id="change-c0f8554831a29dce282bda7f4a1fced7"><strong>[orm] [bug] </strong></span>Fixed a bug involving the new flattened JOIN structures which are used with <a class="reference internal" href="orm_loading_relationships.html#sqlalchemy.orm.joinedload" title="sqlalchemy.orm.joinedload"><code class="xref py py-func docutils literal"><span class="pre">joinedload()</span></code></a> (thereby causing a regression in joined eager loading) as well as <a class="reference internal" href="orm_query.html#sqlalchemy.orm.aliased" title="sqlalchemy.orm.aliased"><code class="xref py py-func docutils literal"><span class="pre">aliased()</span></code></a> in conjunction with the <code class="docutils literal"><span class="pre">flat=True</span></code> flag and joined-table inheritance; basically multiple joins across a &#x201C;parent JOIN sub&#x201D; entity using different paths to get to a target class wouldn&#x2019;t form the correct ON conditions. </span><span class="yiyi-st" id="yiyi-881">&#x5728;&#x4E00;&#x4E2A;&#x522B;&#x540D;&#x548C;&#x8FDE;&#x63A5;&#x7C7B;&#x7684;&#x60C5;&#x51B5;&#x4E0B;&#xFF0C;&#x5728;&#x8BA1;&#x7B97;&#x8FDE;&#x63A5;&#x7684;&#x201C;&#x5DE6;&#x4FA7;&#x201D;&#x7684;&#x673A;&#x5236;&#x4E2D;&#x505A;&#x51FA;&#x7684;&#x8C03;&#x6574;/&#x7B80;&#x5316;&#x4FEE;&#x590D;&#x4E86;&#x8FD9;&#x4E2A;&#x95EE;&#x9898;&#x3002;<a class="changeset-link headerlink reference internal" href="#change-c0f8554831a29dce282bda7f4a1fced7">&#xB6;</a></span></p><p><span class="yiyi-st" id="yiyi-882">&#x53C2;&#x8003;&#x6587;&#x732E;&#xFF1A;<a class="reference external" href="http://www.sqlalchemy.org/trac/ticket/2908">&#xFF03;2908</a></span></p></li></ul></div><div class="section" id="change-0.9.2-engine"><h3><span class="yiyi-st" id="yiyi-883">&#x53D1;&#x52A8;&#x673A;<a class="headerlink" href="#change-0.9.2-engine" title="Permalink to this headline">&#xB6; T0&gt;</a></span></h3><ul class="simple"><li><p id="change-0.9.2-7"><span class="yiyi-st" id="yiyi-884"><span class="target" id="change-8b18bdd2f4b3ca051745c279938e63c4"><strong>[engine] [feature] [pool] </strong></span>&#x6DFB;&#x52A0;&#x4E86;&#x4E00;&#x4E2A;&#x65B0;&#x7684;&#x6C60;&#x4E8B;&#x4EF6;<a class="reference internal" href="core_events.html#sqlalchemy.events.PoolEvents.invalidate" title="sqlalchemy.events.PoolEvents.invalidate"><code class="xref py py-meth docutils literal"><span class="pre">PoolEvents.invalidate()</span></code></a>&#x3002;</span><span class="yiyi-st" id="yiyi-885">&#x5F53;DBAPI&#x8FDE;&#x63A5;&#x88AB;&#x6807;&#x8BB0;&#x4E3A;&#x201C;invaldated&#x201D;&#x5E76;&#x4ECE;&#x6C60;&#x4E2D;&#x4E22;&#x5F03;&#x65F6;&#x8C03;&#x7528;&#x3002;<a class="changeset-link headerlink reference internal" href="#change-8b18bdd2f4b3ca051745c279938e63c4">&#xB6;</a></span></p><p></p></li></ul></div><div class="section" id="change-0.9.2-sql"><h3><span class="yiyi-st" id="yiyi-886">SQL <a class="headerlink" href="#change-0.9.2-sql" title="Permalink to this headline">&#xB6; T0&gt;</a></span></h3><ul class="simple"><li><p id="change-0.9.2-8"><span class="yiyi-st" id="yiyi-887"><span class="target" id="change-4f8918d438f70e33f0202a0ebf9ab58b"><strong>[sql] [feature] </strong></span>&#x589E;&#x52A0;&#x4E86;<a class="reference internal" href="core_metadata.html#sqlalchemy.schema.MetaData.reflect.params.**dialect_kwargs" title="sqlalchemy.schema.MetaData.reflect"><code class="xref py py-paramref docutils literal"><span class="pre">MetaData.reflect.**dialect_kwargs</span></code></a>&#x4EE5;&#x652F;&#x6301;&#x53CD;&#x6620;&#x7684;&#x6240;&#x6709;<a class="reference internal" href="core_metadata.html#sqlalchemy.schema.Table" title="sqlalchemy.schema.Table"><code class="xref py py-class docutils literal"><span class="pre">Table</span></code></a>&#x5BF9;&#x8C61;&#x7684;&#x65B9;&#x8A00;&#x7EA7;&#x53CD;&#x5C04;&#x9009;&#x9879;&#x3002;<a class="changeset-link headerlink reference internal" href="#change-4f8918d438f70e33f0202a0ebf9ab58b">&#xB6; T8&gt;</a></span></p><p></p></li><li><p id="change-0.9.2-9"><span class="yiyi-st" id="yiyi-888"><span class="target" id="change-7a930bef6cc4cbf8fd14845482204265"><strong>[sql] [feature] </strong></span>&#x6DFB;&#x52A0;&#x4E86;&#x4E00;&#x9879;&#x65B0;&#x529F;&#x80FD;&#xFF0C;&#x5141;&#x8BB8;&#x81EA;&#x52A8;&#x547D;&#x540D;&#x7EA6;&#x5B9A;&#x5E94;&#x7528;&#x4E8E;<a class="reference internal" href="core_constraints.html#sqlalchemy.schema.Constraint" title="sqlalchemy.schema.Constraint"><code class="xref py py-class docutils literal"><span class="pre">Constraint</span></code></a>&#x548C;<a class="reference internal" href="core_constraints.html#sqlalchemy.schema.Index" title="sqlalchemy.schema.Index"><code class="xref py py-class docutils literal"><span class="pre">Index</span></code></a>&#x5BF9;&#x8C61;&#x3002;</span><span class="yiyi-st" id="yiyi-889">&#x6839;&#x636E;Wiki&#x4E2D;&#x7684;&#x914D;&#x65B9;&#xFF0C;&#x65B0;&#x529F;&#x80FD;&#x4F7F;&#x7528;&#x67B6;&#x6784;&#x4E8B;&#x4EF6;&#x6765;&#x8BBE;&#x7F6E;&#x540D;&#x79F0;&#xFF0C;&#x56E0;&#x4E3A;&#x5404;&#x79CD;&#x67B6;&#x6784;&#x5BF9;&#x8C61;&#x90FD;&#x76F8;&#x4E92;&#x5173;&#x8054;&#x3002;</span><span class="yiyi-st" id="yiyi-890">The events then expose a configuration system through a new argument <a class="reference internal" href="core_metadata.html#sqlalchemy.schema.MetaData.params.naming_convention" title="sqlalchemy.schema.MetaData"><code class="xref py py-paramref docutils literal"><span class="pre">MetaData.naming_convention</span></code></a>. </span><span class="yiyi-st" id="yiyi-891">This system allows production of both simple and custom naming schemes for constraints and indexes on a per-<a class="reference internal" href="core_metadata.html#sqlalchemy.schema.MetaData" title="sqlalchemy.schema.MetaData"><code class="xref py py-class docutils literal"><span class="pre">MetaData</span></code></a> basis.</span></p><div class="admonition seealso"><p class="first admonition-title"><span class="yiyi-st" id="yiyi-892">&#x4E5F;&#x53EF;&#x4EE5;&#x770B;&#x770B;</span></p><p class="last"><span class="yiyi-st" id="yiyi-893"><a class="reference internal" href="core_constraints.html#constraint-naming-conventions"><span>Configuring Constraint Naming Conventions</span></a></span></p></div><span class="yiyi-st" id="yiyi-895"> <a class="changeset-link headerlink reference internal" href="#change-7a930bef6cc4cbf8fd14845482204265">&#xB6;</a></span><p><span class="yiyi-st" id="yiyi-894">&#x53C2;&#x8003;&#x6587;&#x732E;&#xFF1A;<a class="reference external" href="http://www.sqlalchemy.org/trac/ticket/2923">&#xFF03;2923</a></span></p></li><li><p id="change-0.9.2-10"><span class="yiyi-st" id="yiyi-896"><span class="target" id="change-87912ddc5217c8d309bca24da22147bb"><strong>[sql] [feature] </strong></span>&#x73B0;&#x5728;&#x53EF;&#x4EE5;&#x5728;<a class="reference internal" href="core_constraints.html#sqlalchemy.schema.PrimaryKeyConstraint" title="sqlalchemy.schema.PrimaryKeyConstraint"><code class="xref py py-class docutils literal"><span class="pre">PrimaryKeyConstraint</span></code></a>&#x5BF9;&#x8C61;&#x4E0A;&#x6307;&#x5B9A;&#x9009;&#x9879;&#xFF0C;&#x4E0E;<code class="docutils literal"><span class="pre">primary_key=True</span></code>&#x65D7;&#xFF1B;&#x4F7F;&#x7528;&#x6CA1;&#x6709;&#x5217;&#x7684;<a class="reference internal" href="core_constraints.html#sqlalchemy.schema.PrimaryKeyConstraint" title="sqlalchemy.schema.PrimaryKeyConstraint"><code class="xref py py-class docutils literal"><span class="pre">PrimaryKeyConstraint</span></code></a>&#x5BF9;&#x8C61;&#x6765;&#x5B9E;&#x73B0;&#x8FD9;&#x4E2A;&#x7ED3;&#x679C;&#x3002;</span></p><p><span class="yiyi-st" id="yiyi-897">Previously, an explicit <a class="reference internal" href="core_constraints.html#sqlalchemy.schema.PrimaryKeyConstraint" title="sqlalchemy.schema.PrimaryKeyConstraint"><code class="xref py py-class docutils literal"><span class="pre">PrimaryKeyConstraint</span></code></a> would have the effect of those columns marked as <code class="docutils literal"><span class="pre">primary_key=True</span></code> being ignored; since this is no longer the case, the <a class="reference internal" href="core_constraints.html#sqlalchemy.schema.PrimaryKeyConstraint" title="sqlalchemy.schema.PrimaryKeyConstraint"><code class="xref py py-class docutils literal"><span class="pre">PrimaryKeyConstraint</span></code></a> will now assert that either one style or the other is used to specify the columns, or if both are present, that the column lists match exactly. </span><span class="yiyi-st" id="yiyi-898">&#x5982;&#x679C;<a class="reference internal" href="core_constraints.html#sqlalchemy.schema.PrimaryKeyConstraint" title="sqlalchemy.schema.PrimaryKeyConstraint"><code class="xref py py-class docutils literal"><span class="pre">PrimaryKeyConstraint</span></code></a>&#x548C;<a class="reference internal" href="core_metadata.html#sqlalchemy.schema.Table" title="sqlalchemy.schema.Table"><code class="xref py py-class docutils literal"><span class="pre">Table</span></code></a>&#x4E2D;&#x6807;&#x8BB0;&#x4E3A;<code class="docutils literal"><span class="pre">primary_key=True</span></code>&#x7684;&#x5217;&#x4E2D;&#x5B58;&#x5728;&#x4E0D;&#x4E00;&#x81F4;&#x7684;&#x5217;&#xFF0C;&#x5219;&#x4F1A;&#x53D1;&#x51FA;&#x8B66;&#x544A;&#xFF0C;&#x5E76;&#x4E14;&#x5217;&#x8868;&#x7684;&#x5217;&#x4EC5;&#x4ECE;<a class="reference internal" href="core_constraints.html#sqlalchemy.schema.PrimaryKeyConstraint" title="sqlalchemy.schema.PrimaryKeyConstraint"><code class="xref py py-class docutils literal"><span class="pre">PrimaryKeyConstraint</span></code></a>&#x5355;&#x72EC;&#x83B7;&#x53D6;&#xFF0C;&#x5C31;&#x50CF;&#x4EE5;&#x524D;&#x7248;&#x672C;&#x4E2D;&#x7684;&#x60C5;&#x51B5;&#x4E00;&#x6837;&#x3002;</span></p><div class="admonition seealso"><p class="first admonition-title"><span class="yiyi-st" id="yiyi-899">&#x4E5F;&#x53EF;&#x4EE5;&#x770B;&#x770B;</span></p><p class="last"><span class="yiyi-st" id="yiyi-900"><a class="reference internal" href="core_constraints.html#sqlalchemy.schema.PrimaryKeyConstraint" title="sqlalchemy.schema.PrimaryKeyConstraint"><code class="xref py py-class docutils literal"><span class="pre">PrimaryKeyConstraint</span></code></a></span></p></div><span class="yiyi-st" id="yiyi-902"> <a class="changeset-link headerlink reference internal" href="#change-87912ddc5217c8d309bca24da22147bb">&#xB6;</a></span><p><span class="yiyi-st" id="yiyi-901">&#x53C2;&#x8003;&#x6587;&#x732E;&#xFF1A;<a class="reference external" href="http://www.sqlalchemy.org/trac/ticket/2910">&#xFF03;2910</a></span></p></li><li><p id="change-0.9.2-11"><span class="yiyi-st" id="yiyi-903"><span class="target" id="change-2df4f7fe29c0f5aa2f957f4a89b0d74d"><strong>[sql] [feature] </strong></span>&#x589E;&#x5F3A;&#x4E86;&#x6A21;&#x5F0F;&#x6784;&#x9020;&#x548C;&#x67D0;&#x4E9B;SQL&#x6784;&#x9020;&#x63A5;&#x53D7;&#x7279;&#x5B9A;&#x4E8E;&#x65B9;&#x8A00;&#x7684;&#x5173;&#x952E;&#x5B57;&#x53C2;&#x6570;&#x7684;&#x7CFB;&#x7EDF;&#x3002;</span><span class="yiyi-st" id="yiyi-904">This system includes commonly the <a class="reference internal" href="core_metadata.html#sqlalchemy.schema.Table" title="sqlalchemy.schema.Table"><code class="xref py py-class docutils literal"><span class="pre">Table</span></code></a> and <a class="reference internal" href="core_constraints.html#sqlalchemy.schema.Index" title="sqlalchemy.schema.Index"><code class="xref py py-class docutils literal"><span class="pre">Index</span></code></a> constructs, which accept a wide variety of dialect-specific arguments such as <code class="docutils literal"><span class="pre">mysql_engine</span></code> and <code class="docutils literal"><span class="pre">postgresql_where</span></code>, as well as the constructs <a class="reference internal" href="core_constraints.html#sqlalchemy.schema.PrimaryKeyConstraint" title="sqlalchemy.schema.PrimaryKeyConstraint"><code class="xref py py-class docutils literal"><span class="pre">PrimaryKeyConstraint</span></code></a>, <a class="reference internal" href="core_constraints.html#sqlalchemy.schema.UniqueConstraint" title="sqlalchemy.schema.UniqueConstraint"><code class="xref py py-class docutils literal"><span class="pre">UniqueConstraint</span></code></a>, <a class="reference internal" href="core_dml.html#sqlalchemy.sql.expression.Update" title="sqlalchemy.sql.expression.Update"><code class="xref py py-class docutils literal"><span class="pre">Update</span></code></a>, <a class="reference internal" href="core_dml.html#sqlalchemy.sql.expression.Insert" title="sqlalchemy.sql.expression.Insert"><code class="xref py py-class docutils literal"><span class="pre">Insert</span></code></a> and <a class="reference internal" href="core_dml.html#sqlalchemy.sql.expression.Delete" title="sqlalchemy.sql.expression.Delete"><code class="xref py py-class docutils literal"><span class="pre">Delete</span></code></a>, and also newly added kwarg capability to <a class="reference internal" href="core_constraints.html#sqlalchemy.schema.ForeignKeyConstraint" title="sqlalchemy.schema.ForeignKeyConstraint"><code class="xref py py-class docutils literal"><span class="pre">ForeignKeyConstraint</span></code></a> and <a class="reference internal" href="core_constraints.html#sqlalchemy.schema.ForeignKey" title="sqlalchemy.schema.ForeignKey"><code class="xref py py-class docutils literal"><span class="pre">ForeignKey</span></code></a>. </span><span class="yiyi-st" id="yiyi-905">&#x6539;&#x53D8;&#x4E4B;&#x5904;&#x5728;&#x4E8E;&#x53C2;&#x4E0E;&#x65B9;&#x8A00;&#x73B0;&#x5728;&#x53EF;&#x4EE5;&#x4E3A;&#x8FD9;&#x4E9B;&#x7ED3;&#x6784;&#x6307;&#x5B9A;&#x53EF;&#x63A5;&#x53D7;&#x7684;&#x53C2;&#x6570;&#x5217;&#x8868;&#xFF0C;&#x5982;&#x679C;&#x4E3A;&#x7279;&#x5B9A;&#x65B9;&#x8A00;&#x6307;&#x5B9A;&#x4E86;&#x65E0;&#x6548;&#x5173;&#x952E;&#x5B57;&#xFF0C;&#x5219;&#x5141;&#x8BB8;&#x5F15;&#x53D1;&#x53C2;&#x6570;&#x9519;&#x8BEF;&#x3002;</span><span class="yiyi-st" id="yiyi-906">&#x5982;&#x679C;&#x5173;&#x952E;&#x5B57;&#x7684;&#x65B9;&#x8A00;&#x90E8;&#x5206;&#x65E0;&#x6CD5;&#x8BC6;&#x522B;&#xFF0C;&#x5219;&#x4EC5;&#x53D1;&#x51FA;&#x8B66;&#x544A;&#xFF1B;&#x5C3D;&#x7BA1;&#x7CFB;&#x7EDF;&#x5B9E;&#x9645;&#x4E0A;&#x4F1A;&#x4F7F;&#x7528;setuptools&#x5165;&#x53E3;&#x70B9;&#x6765;&#x5B9A;&#x4F4D;&#x975E;&#x672C;&#x5730;&#x65B9;&#x8A00;&#xFF0C;&#x4F46;&#x4ECD;&#x652F;&#x6301;&#x5728;&#x5378;&#x8F7D;&#x8BE5;&#x7B2C;&#x4E09;&#x65B9;&#x65B9;&#x8A00;&#x7684;&#x73AF;&#x5883;&#x4E2D;&#x4F7F;&#x7528;&#x67D0;&#x4E9B;&#x7279;&#x5B9A;&#x65B9;&#x8A00;&#x7279;&#x5B9A;&#x53C2;&#x6570;&#x7684;&#x7528;&#x4F8B;&#x3002;</span><span class="yiyi-st" id="yiyi-907">&#x65B9;&#x8A00;&#x4E5F;&#x5FC5;&#x987B;&#x660E;&#x786E;&#x5730;&#x9009;&#x62E9;&#x52A0;&#x5165;&#x8FD9;&#x4E2A;&#x7CFB;&#x7EDF;&#xFF0C;&#x4EE5;&#x4FBF;&#x4E0D;&#x4F7F;&#x7528;&#x8FD9;&#x4E2A;&#x7CFB;&#x7EDF;&#x7684;&#x5916;&#x90E8;&#x65B9;&#x8A00;&#x4E0D;&#x4F1A;&#x53D7;&#x5230;&#x5F71;&#x54CD;&#x3002;<a class="changeset-link headerlink reference internal" href="#change-2df4f7fe29c0f5aa2f957f4a89b0d74d">&#xB6;</a></span></p><p><span class="yiyi-st" id="yiyi-908">&#x53C2;&#x8003;&#x6587;&#x732E;&#xFF1A;<a class="reference external" href="http://www.sqlalchemy.org/trac/ticket/2866">&#xFF03;2866</a></span></p></li><li><p id="change-0.9.2-12"><span class="yiyi-st" id="yiyi-909"><span class="target" id="change-d4cf4109c92f5c593c0eb29a55e23b2f"><strong>[sql] [bug] </strong></span>The behavior of <a class="reference internal" href="core_metadata.html#sqlalchemy.schema.Table.tometadata" title="sqlalchemy.schema.Table.tometadata"><code class="xref py py-meth docutils literal"><span class="pre">Table.tometadata()</span></code></a> has been adjusted such that the schema target of a <a class="reference internal" href="core_constraints.html#sqlalchemy.schema.ForeignKey" title="sqlalchemy.schema.ForeignKey"><code class="xref py py-class docutils literal"><span class="pre">ForeignKey</span></code></a> will not be changed unless that schema matches that of the parent table. </span><span class="yiyi-st" id="yiyi-910">&#x4E5F;&#x5C31;&#x662F;&#x8BF4;&#xFF0C;&#x5982;&#x679C;&#x8868;&#x201C;schema_a.user&#x201D;&#x5177;&#x6709;&#x201C;schema_b.order.id&#x201D;&#x7684;&#x5916;&#x952E;&#xFF0C;&#x5219;&#x4E0D;&#x8BBA;&#x201C;schema&#x201D;&#x53C2;&#x6570;&#x662F;&#x5426;&#x4F20;&#x9012;&#x7ED9;<a class="reference internal" href="core_metadata.html#sqlalchemy.schema.Table.tometadata" title="sqlalchemy.schema.Table.tometadata"><code class="xref py py-meth docutils literal"><span class="pre">Table.tometadata()</span></code></a></span><span class="yiyi-st" id="yiyi-911">&#x4F46;&#x662F;&#xFF0C;&#x5982;&#x679C;&#x8868;&#x201C;schema_a.user&#x201D;&#x5F15;&#x7528;&#x201C;schema_a.order.id&#x201D;&#xFF0C;&#x5219;&#x4F1A;&#x5728;&#x7236;&#x8868;&#x548C;&#x5F15;&#x7528;&#x8868;&#x4E0A;&#x66F4;&#x65B0;&#x201C;schema_a&#x201D;&#x7684;&#x5B58;&#x5728;&#x3002;</span><span class="yiyi-st" id="yiyi-912">&#x8FD9;&#x662F;&#x4E00;&#x79CD;&#x884C;&#x4E3A;&#x6539;&#x53D8;&#xFF0C;&#x56E0;&#x6B64;&#x4E0D;&#x53EF;&#x80FD;&#x56DE;&#x5230;0.8&#xFF1B;&#x5047;&#x8BBE;&#x4E4B;&#x524D;&#x7684;&#x884C;&#x4E3A;&#x662F;&#x975E;&#x5E38;&#x6709;&#x95EE;&#x9898;&#x7684;&#xFF0C;&#x5E76;&#x4E14;&#x4E0D;&#x592A;&#x53EF;&#x80FD;&#x6709;&#x4EBA;&#x4F9D;&#x8D56;&#x5B83;&#x3002;</span></p><p><span class="yiyi-st" id="yiyi-913">&#x6B64;&#x5916;&#xFF0C;&#x8FD8;&#x6DFB;&#x52A0;&#x4E86;&#x4E00;&#x4E2A;&#x65B0;&#x53C2;&#x6570;<a class="reference internal" href="core_metadata.html#sqlalchemy.schema.Table.tometadata.params.referred_schema_fn" title="sqlalchemy.schema.Table.tometadata"><code class="xref py py-paramref docutils literal"><span class="pre">Table.tometadata.referred_schema_fn</span></code></a>&#x3002;</span><span class="yiyi-st" id="yiyi-914">&#x8FD9;&#x6307;&#x7684;&#x662F;&#x4E00;&#x4E2A;&#x53EF;&#x8C03;&#x7528;&#x51FD;&#x6570;&#xFF0C;&#x5B83;&#x5C06;&#x7528;&#x4E8E;&#x786E;&#x5B9A;tometadata&#x64CD;&#x4F5C;&#x4E2D;&#x9047;&#x5230;&#x7684;&#x4EFB;&#x4F55;<a class="reference internal" href="core_constraints.html#sqlalchemy.schema.ForeignKeyConstraint" title="sqlalchemy.schema.ForeignKeyConstraint"><code class="xref py py-class docutils literal"><span class="pre">ForeignKeyConstraint</span></code></a>&#x7684;&#x65B0;&#x5F15;&#x7528;&#x6A21;&#x5F0F;&#x3002;</span><span class="yiyi-st" id="yiyi-915">&#x8FD9;&#x4E2A;&#x53EF;&#x8C03;&#x7528;&#x7684;&#x51FD;&#x6570;&#x53EF;&#x4EE5;&#x7528;&#x6765;&#x6062;&#x590D;&#x5230;&#x4E4B;&#x524D;&#x7684;&#x884C;&#x4E3A;&#x6216;&#x8005;&#x5B9A;&#x5236;&#x5982;&#x4F55;&#x5728;&#x6BCF;&#x4E2A;&#x7EA6;&#x675F;&#x7684;&#x57FA;&#x7840;&#x4E0A;&#x5904;&#x7406;&#x5F15;&#x7528;&#x7684;&#x6A21;&#x5F0F;&#x3002;</span></p><span class="yiyi-st" id="yiyi-917"> <a class="changeset-link headerlink reference internal" href="#change-d4cf4109c92f5c593c0eb29a55e23b2f">&#xB6;</a></span><p><span class="yiyi-st" id="yiyi-916">&#x53C2;&#x8003;&#x6587;&#x732E;&#xFF1A;<a class="reference external" href="http://www.sqlalchemy.org/trac/ticket/2913">&#xFF03;2913</a></span></p></li><li><p id="change-0.9.2-13"><span class="yiyi-st" id="yiyi-918"><span class="target" id="change-a2d477b9294340f7ec81a1b359bee6cc"><strong>[sql] [bug] </strong></span>Fixed bug whereby binary type would fail in some cases if used with a &#x201C;test&#x201D; dialect, such as a DefaultDialect or other dialect with no DBAPI.<a class="changeset-link headerlink reference internal" href="#change-a2d477b9294340f7ec81a1b359bee6cc">&#xB6;</a></span></p><p></p></li><li><p id="change-0.9.2-14"><span class="yiyi-st" id="yiyi-919"><span class="target" id="change-f7ed7a7bdd579cfb59afaf713ec2da5c"><strong>[sql] [bug] [py3k] </strong></span>Fixed bug where &#x201C;literal binds&#x201D; wouldn&#x2019;t work with a bound parameter that&#x2019;s a binary type. </span><span class="yiyi-st" id="yiyi-920">&#x4E00;&#x4E2A;&#x7C7B;&#x4F3C;&#x4F46;&#x4E0D;&#x540C;&#x7684;&#x95EE;&#x9898;&#x5728;0.8&#x4E2D;&#x5F97;&#x5230;&#x4E86;&#x89E3;&#x51B3;&#x3002;<a class="changeset-link headerlink reference internal" href="#change-f7ed7a7bdd579cfb59afaf713ec2da5c">&#xB6;</a></span></p><p></p></li><li><p id="change-0.9.2-15"><span class="yiyi-st" id="yiyi-921"><span class="target" id="change-182243baf075d92a029213dbd8041026"><strong>[sql] [bug] </strong></span>Fixed regression whereby the &#x201C;annotation&#x201D; system used by the ORM was leaking into the names used by standard functions in <a class="reference internal" href="core_functions.html#module-sqlalchemy.sql.functions" title="sqlalchemy.sql.functions"><code class="xref py py-mod docutils literal"><span class="pre">sqlalchemy.sql.functions</span></code></a>, such as <code class="docutils literal"><span class="pre">func.coalesce()</span></code> and <code class="docutils literal"><span class="pre">func.max()</span></code>. </span><span class="yiyi-st" id="yiyi-922">&#x5728;ORM&#x5C5E;&#x6027;&#x4E2D;&#x4F7F;&#x7528;&#x8FD9;&#x4E9B;&#x51FD;&#x6570;&#xFF0C;&#x4ECE;&#x800C;&#x751F;&#x6210;&#x5B83;&#x4EEC;&#x7684;&#x6CE8;&#x91CA;&#x7248;&#x672C;&#x53EF;&#x80FD;&#x4F1A;&#x7834;&#x574F;&#x5728;SQL&#x4E2D;&#x5448;&#x73B0;&#x7684;&#x5B9E;&#x9645;&#x51FD;&#x6570;&#x540D;&#x79F0;&#x3002;<a class="changeset-link headerlink reference internal" href="#change-182243baf075d92a029213dbd8041026">&#xB6;</a></span></p><p><span class="yiyi-st" id="yiyi-923">&#x53C2;&#x8003;&#x6587;&#x732E;&#xFF1A;<a class="reference external" href="http://www.sqlalchemy.org/trac/ticket/2927">&#xFF03;2927</a></span></p></li><li><p id="change-0.9.2-16"><span class="yiyi-st" id="yiyi-924"><span class="target" id="change-3fe73b94064bab8326605943165bdf71"><strong>[sql] [bug] </strong></span>Fixed 0.9 regression where the new sortable support for <a class="reference internal" href="core_connections.html#sqlalchemy.engine.RowProxy" title="sqlalchemy.engine.RowProxy"><code class="xref py py-class docutils literal"><span class="pre">RowProxy</span></code></a> would lead to <code class="docutils literal"><span class="pre">TypeError</span></code> when compared to non-tuple types as it attempted to apply tuple() to the &#x201C;other&#x201D; object unconditionally. </span><span class="yiyi-st" id="yiyi-925">The full range of Python comparison operators have now been implemented on <a class="reference internal" href="core_connections.html#sqlalchemy.engine.RowProxy" title="sqlalchemy.engine.RowProxy"><code class="xref py py-class docutils literal"><span class="pre">RowProxy</span></code></a>, using an approach that guarantees a comparison system that is equivalent to that of a tuple, and the &#x201C;other&#x201D; object is only coerced if it&#x2019;s an instance of RowProxy.<a class="changeset-link headerlink reference internal" href="#change-3fe73b94064bab8326605943165bdf71">&#xB6;</a></span></p><p><span class="yiyi-st" id="yiyi-926">&#x53C2;&#x8003;&#x6587;&#x732E;&#xFF1A;<a class="reference external" href="http://www.sqlalchemy.org/trac/ticket/2924">&#xFF03;2924</a>&#xFF0C;<a class="reference external" href="http://www.sqlalchemy.org/trac/ticket/2848">&#xFF03;2848</a></span></p></li><li><p id="change-0.9.2-17"><span class="yiyi-st" id="yiyi-927"><span class="target" id="change-808b13e7a37e3b773154107db0509031"><strong>[sql] [bug] </strong></span>&#x4E0E;<a class="reference internal" href="core_metadata.html#sqlalchemy.schema.Table" title="sqlalchemy.schema.Table"><code class="xref py py-class docutils literal"><span class="pre">Table</span></code></a>&#x5185;&#x8054;&#x521B;&#x5EFA;&#x7684;<a class="reference internal" href="core_constraints.html#sqlalchemy.schema.UniqueConstraint" title="sqlalchemy.schema.UniqueConstraint"><code class="xref py py-class docutils literal"><span class="pre">UniqueConstraint</span></code></a>&#x5C06;&#x88AB;&#x8DF3;&#x8FC7;&#x3002;</span><span class="yiyi-st" id="yiyi-928">Pullreq&#x793C;&#x8C8C;Derek Harland&#x3002;<a class="changeset-link headerlink reference internal" href="#change-808b13e7a37e3b773154107db0509031">&#xB6;</a></span></p><p><span class="yiyi-st" id="yiyi-929">&#x53C2;&#x8003;&#xFF1A;<a class="reference external" href="https://bitbucket.org/zzzeek/sqlalchemy/pull-request/11">&#x62C9;&#x53D6;&#x8BF7;&#x6C42;bitbucket&#xFF1A;11</a></span></p></li><li><p id="change-0.9.2-18"><span class="yiyi-st" id="yiyi-930"><span class="target" id="change-e78b46088d529294a0abdee2cd8fe000"><strong>[sql] [bug] [orm] </strong></span>Fixed the multiple-table &#x201C;UPDATE..FROM&#x201D; construct, only usable on MySQL, to correctly render the SET clause among multiple columns with the same name across tables. </span><span class="yiyi-st" id="yiyi-931">&#x8FD9;&#x4E5F;&#x5C06;&#x4EC5;&#x7528;&#x4E8E;&#x975E;&#x4E3B;&#x8868;&#x7684;SET&#x5B50;&#x53E5;&#x4E2D;&#x7528;&#x4E8E;&#x7ED1;&#x5B9A;&#x53C2;&#x6570;&#x7684;&#x540D;&#x79F0;&#x66F4;&#x6539;&#x4E3A;&#x201C;<tablename>_ <colname>&#x201D;&#xFF1B;&#x56E0;&#x4E3A;&#x901A;&#x5E38;&#x76F4;&#x63A5;&#x4F7F;&#x7528;<a class="reference internal" href="core_metadata.html#sqlalchemy.schema.Column" title="sqlalchemy.schema.Column"><code class="xref py py-class docutils literal"><span class="pre">Column</span></code></a>&#x5BF9;&#x8C61;&#x6307;&#x5B9A;&#x6B64;&#x53C2;&#x6570;&#xFF0C;&#x6240;&#x4EE5;&#x4E0D;&#x5E94;&#x8BE5;&#x5BF9;&#x5E94;&#x7528;&#x7A0B;&#x5E8F;&#x4EA7;&#x751F;&#x5F71;&#x54CD;&#x3002;  T1&gt;  T0&gt;</colname></tablename></span><span class="yiyi-st" id="yiyi-932">&#x8BE5;&#x4FEE;&#x8BA2;&#x5BF9;ORM&#x4E2D;&#x7684;<a class="reference internal" href="core_metadata.html#sqlalchemy.schema.Table.update" title="sqlalchemy.schema.Table.update"><code class="xref py py-meth docutils literal"><span class="pre">Table.update()</span></code></a>&#x4EE5;&#x53CA;<a class="reference internal" href="orm_query.html#sqlalchemy.orm.query.Query.update" title="sqlalchemy.orm.query.Query.update"><code class="xref py py-meth docutils literal"><span class="pre">Query.update()</span></code></a>&#x751F;&#x6548;&#x3002;<a class="changeset-link headerlink reference internal" href="#change-e78b46088d529294a0abdee2cd8fe000">&#xB6;</a></span></p><p><span class="yiyi-st" id="yiyi-933">&#x53C2;&#x8003;&#x6587;&#x732E;&#xFF1A;<a class="reference external" href="http://www.sqlalchemy.org/trac/ticket/2912">&#xFF03;2912</a></span></p></li></ul></div><div class="section" id="change-0.9.2-schema"><h3><span class="yiyi-st" id="yiyi-934">&#x67B6;&#x6784;<a class="headerlink" href="#change-0.9.2-schema" title="Permalink to this headline">&#xB6; T0&gt;</a></span></h3><ul class="simple"><li><p id="change-0.9.2-19"><span class="yiyi-st" id="yiyi-935"><span class="target" id="change-3a49a58c161e46ce5b9d89e2758041b3"><strong>[schema] [bug] </strong></span>&#x5C06;<code class="xref py py-class docutils literal"><span class="pre">sqlalchemy.schema.SchemaVisitor</span></code>&#x8FD8;&#x539F;&#x5230;<code class="docutils literal"><span class="pre">.schema</span></code>&#x6A21;&#x5757;&#x3002;</span><span class="yiyi-st" id="yiyi-936">Pullreq&#x793C;&#x8C8C;Sean Dague&#x3002;<a class="changeset-link headerlink reference internal" href="#change-3a49a58c161e46ce5b9d89e2758041b3">&#xB6;</a></span></p><p><span class="yiyi-st" id="yiyi-937">&#x53C2;&#x8003;&#x6587;&#x732E;&#xFF1A;<a class="reference external" href="https://github.com/zzzeek/sqlalchemy/pull/57">&#x8BF7;&#x6C42;github&#xFF1A;57</a></span></p></li></ul></div><div class="section" id="change-0.9.2-postgresql"><h3><span class="yiyi-st" id="yiyi-938">&#x7684;PostgreSQL <a class="headerlink" href="#change-0.9.2-postgresql" title="Permalink to this headline">&#xB6; T0&gt;</a></span></h3><ul class="simple"><li><p id="change-0.9.2-20"><span class="yiyi-st" id="yiyi-939"><span class="target" id="change-aff5edc2e351865134d3aecbac9ae00d"><strong>[postgresql] [feature] </strong></span>&#x6DFB;&#x52A0;&#x4E86;&#x4E00;&#x4E2A;&#x65B0;&#x7684;&#x65B9;&#x8A00;&#x7EA7;&#x53C2;&#x6570;<code class="docutils literal"><span class="pre">postgresql_ignore_search_path</span></code>&#xFF1B;&#x8FD9;&#x4E2A;&#x53C2;&#x6570;&#x88AB;<a class="reference internal" href="core_metadata.html#sqlalchemy.schema.Table" title="sqlalchemy.schema.Table"><code class="xref py py-class docutils literal"><span class="pre">Table</span></code></a>&#x6784;&#x9020;&#x51FD;&#x6570;&#x548C;<a class="reference internal" href="core_metadata.html#sqlalchemy.schema.MetaData.reflect" title="sqlalchemy.schema.MetaData.reflect"><code class="xref py py-meth docutils literal"><span class="pre">MetaData.reflect()</span></code></a>&#x65B9;&#x6CD5;&#x6240;&#x63A5;&#x53D7;&#x3002;</span><span class="yiyi-st" id="yiyi-940">&#x5F53;&#x7528;&#x4E8E;Postgresql&#x65F6;&#xFF0C;&#x5373;&#x4F7F;&#x540D;&#x79F0;&#x5B58;&#x5728;&#x4E8E;<code class="docutils literal"><span class="pre">search_path</span></code>&#x4E2D;&#xFF0C;&#x6307;&#x5B9A;&#x8FDC;&#x7A0B;&#x6A21;&#x5F0F;&#x540D;&#x79F0;&#x7684;&#x5916;&#x952E;&#x5F15;&#x7528;&#x8868;&#x4E5F;&#x5C06;&#x4FDD;&#x7559;&#x8BE5;&#x6A21;&#x5F0F;&#x540D;&#x79F0;&#xFF1B;&#x4ECE;0.7.3&#x5F00;&#x59CB;&#x7684;&#x9ED8;&#x8BA4;&#x884C;&#x4E3A;&#x5C31;&#x662F;<code class="docutils literal"><span class="pre">search_path</span></code>&#x4E2D;&#x7684;&#x6A21;&#x5F0F;&#x4E0D;&#x4F1A;&#x88AB;&#x590D;&#x5236;&#x5230;&#x53CD;&#x6620;&#x7684;<a class="reference internal" href="core_constraints.html#sqlalchemy.schema.ForeignKey" title="sqlalchemy.schema.ForeignKey"><code class="xref py py-class docutils literal"><span class="pre">ForeignKey</span></code></a>&#x5BF9;&#x8C61;&#x3002;</span><span class="yiyi-st" id="yiyi-941">&#x6587;&#x6863;&#x5DF2;&#x7ECF;&#x66F4;&#x65B0;&#xFF0C;&#x8BE6;&#x7EC6;&#x63CF;&#x8FF0;&#x4E86;<code class="docutils literal"><span class="pre">pg_get_constraintdef()</span></code>&#x51FD;&#x6570;&#x7684;&#x884C;&#x4E3A;&#xFF0C;&#x4EE5;&#x53CA;<code class="docutils literal"><span class="pre">postgresql_ignore_search_path</span></code>&#x7279;&#x6027;&#x5982;&#x4F55;&#x57FA;&#x672C;&#x786E;&#x5B9A;&#x6211;&#x4EEC;&#x662F;&#x5426;&#x4F1A;&#x9075;&#x5B88;&#x6B64;&#x51FD;&#x6570;&#x62A5;&#x544A;&#x7684;&#x6A21;&#x5F0F;&#x9650;&#x5B9A;&#x6216;&#x4E0D;&#x3002;</span></p><div class="admonition seealso"><p class="first admonition-title"><span class="yiyi-st" id="yiyi-942">&#x4E5F;&#x53EF;&#x4EE5;&#x770B;&#x770B;</span></p><p class="last"><span class="yiyi-st" id="yiyi-943"><a class="reference internal" href="dialects_postgresql.html#postgresql-schema-reflection"><span>Remote-Schema Table Introspection and Postgresql search_path</span></a></span></p></div><span class="yiyi-st" id="yiyi-945"> <a class="changeset-link headerlink reference internal" href="#change-aff5edc2e351865134d3aecbac9ae00d">&#xB6;</a></span><p><span class="yiyi-st" id="yiyi-944">&#x53C2;&#x8003;&#x6587;&#x732E;&#xFF1A;<a class="reference external" href="http://www.sqlalchemy.org/trac/ticket/2922">&#xFF03;2922</a></span></p></li></ul></div><div class="section" id="change-0.9.2-mysql"><h3><span class="yiyi-st" id="yiyi-946">MySQL&#x7684;<a class="headerlink" href="#change-0.9.2-mysql" title="Permalink to this headline">&#xB6; T0&gt;</a></span></h3><ul class="simple"><li><p id="change-0.9.2-21"><span class="yiyi-st" id="yiyi-947"><span class="target" id="change-c9d1183ac37b97cd9bba811e075e7ee1"><strong>[mysql] [bug] </strong></span>&#x6DFB;&#x52A0;&#x5230;cymysql&#x65B9;&#x8A00;&#x7684;&#x4E00;&#x4E9B;&#x7F3A;&#x5931;&#x65B9;&#x6CD5;&#xFF0C;&#x5305;&#x62EC;_get_server_version_info()&#x548C;_detect_charset()&#x3002;</span><span class="yiyi-st" id="yiyi-948">Pullreq&#x793C;&#x8C8C;Hajime Nakagami&#x3002;<a class="changeset-link headerlink reference internal" href="#change-c9d1183ac37b97cd9bba811e075e7ee1">&#xB6;</a></span></p><p><span class="yiyi-st" id="yiyi-949">&#x8FD9;&#x4E2A;&#x6539;&#x53D8;&#x4E5F;&#x88AB;<strong>backported</strong>&#x4FEE;&#x6539;&#x4E3A;&#xFF1A;0.8.5</span></p><p><span class="yiyi-st" id="yiyi-950">&#x53C2;&#x8003;&#x6587;&#x732E;&#xFF1A;<a class="reference external" href="https://github.com/zzzeek/sqlalchemy/pull/61">pull request github&#xFF1A;61</a></span></p></li><li><p id="change-0.9.2-22"><span class="yiyi-st" id="yiyi-951"><span class="target" id="change-c46c51b91fba93f95b0a32692149e285"><strong>[mysql] [bug] [sql] </strong></span>Added new test coverage for so-called &#x201C;down adaptions&#x201D; of SQL types, where a more specific type is adapted to a more generic one - this use case is needed by some third party tools such as <code class="docutils literal"><span class="pre">sqlacodegen</span></code>. </span><span class="yiyi-st" id="yiyi-952">&#x8FD9;&#x4E2A;&#x6D4B;&#x8BD5;&#x5957;&#x4EF6;&#x4E2D;&#x9700;&#x8981;&#x4FEE;&#x590D;&#x7684;&#x7279;&#x5B9A;&#x60C5;&#x51B5;&#x662F;&#x5C06;<a class="reference internal" href="dialects_mysql.html#sqlalchemy.dialects.mysql.ENUM" title="sqlalchemy.dialects.mysql.ENUM"><code class="xref py py-class docutils literal"><span class="pre">mysql.ENUM</span></code></a>&#x5411;&#x4E0B;&#x8F6C;&#x6362;&#x4E3A;<a class="reference internal" href="core_type_basics.html#sqlalchemy.types.Enum" title="sqlalchemy.types.Enum"><code class="xref py py-class docutils literal"><span class="pre">types.Enum</span></code></a>&#xFF0C;&#x5E76;&#x5C06;SQLite&#x65E5;&#x671F;&#x7C7B;&#x578B;&#x8F6C;&#x6362;&#x4E3A;&#x901A;&#x7528;&#x65E5;&#x671F;&#x7C7B;&#x578B;&#x3002;</span><span class="yiyi-st" id="yiyi-953"><code class="docutils literal"><span class="pre">adapt()</span></code>&#x65B9;&#x6CD5;&#x9700;&#x8981;&#x5728;&#x8FD9;&#x91CC;&#x53D8;&#x5F97;&#x66F4;&#x5177;&#x4F53;&#xFF0C;&#x4EE5;&#x62B5;&#x6D88;&#x5728;&#x57FA;&#x7840;<a class="reference internal" href="core_type_api.html#sqlalchemy.types.TypeEngine" title="sqlalchemy.types.TypeEngine"><code class="xref py py-class docutils literal"><span class="pre">TypeEngine</span></code></a>&#x4E2D;&#x5220;&#x9664;&#x201C;catch all&#x201D;<code class="docutils literal"><span class="pre">**kwargs</span></code>&#x5728;0.9&#x4E2D;&#x88AB;&#x5220;&#x9664;&#x7684;&#x7C7B;&#x3002;<a class="changeset-link headerlink reference internal" href="#change-c46c51b91fba93f95b0a32692149e285">&#xB6;</a></span></p><p><span class="yiyi-st" id="yiyi-954">&#x53C2;&#x8003;&#x6587;&#x732E;&#xFF1A;<a class="reference external" href="http://www.sqlalchemy.org/trac/ticket/2917">&#xFF03;2917</a></span></p></li><li><p id="change-0.9.2-23"><span class="yiyi-st" id="yiyi-955"><span class="target" id="change-5e11ddb98a45933e5e3e4cc3649b5932"><strong>[mysql] [bug] </strong></span> MySQL CAST&#x7F16;&#x8BD1;&#x73B0;&#x5728;&#x8003;&#x8651;&#x4E86;&#x8BF8;&#x5982;&#x201C;charset&#x201D;&#x548C;&#x201C;collat&#x200B;&#x200B;ion&#x201D;&#x4E4B;&#x7C7B;&#x7684;&#x5B57;&#x7B26;&#x4E32;&#x7C7B;&#x578B;&#x7684;&#x65B9;&#x9762;&#x3002;</span><span class="yiyi-st" id="yiyi-956">While MySQL wants all character- based CAST calls to use the CHAR type, we now create a real CHAR object at CAST time and copy over all the parameters it has, so that an expression like <code class="docutils literal"><span class="pre">cast(x,</span> <span class="pre">mysql.TEXT(charset=&apos;utf8&apos;))</span></code> will render <code class="docutils literal"><span class="pre">CAST(t.col</span> <span class="pre">AS</span> <span class="pre">CHAR</span> <span class="pre">CHARACTER</span> <span class="pre">SET</span> <span class="pre">utf8)</span></code>.<a class="changeset-link headerlink reference internal" href="#change-5e11ddb98a45933e5e3e4cc3649b5932">&#xB6;</a></span></p><p></p></li><li><p id="change-0.9.2-24"><span class="yiyi-st" id="yiyi-957"><span class="target" id="change-5306ccbcd637857024e7f7526badb84e"><strong>[mysql] [bug] </strong></span>Added new &#x201C;unicode returns&#x201D; detection to the MySQL dialect and to the default dialect system overall, such that any dialect can add extra &#x201C;tests&#x201D; to the on-first-connect &#x201C;does this DBAPI return unicode directly?&#x201D; detection. </span><span class="yiyi-st" id="yiyi-958">&#x5728;&#x8FD9;&#x79CD;&#x60C5;&#x51B5;&#x4E0B;&#xFF0C;&#x6211;&#x4EEC;&#x6B63;&#x5728;&#x4F7F;&#x7528;&#x660E;&#x786E;&#x7684;&#x201C;utf8_bin&#x201D;&#x6392;&#x5E8F;&#x89C4;&#x5219;&#x7C7B;&#x578B;&#xFF08;&#x5728;&#x68C0;&#x67E5;&#x6B64;&#x6392;&#x5E8F;&#x89C4;&#x5219;&#x53EF;&#x7528;&#x540E;&#xFF09;&#x4E13;&#x95E8;&#x9488;&#x5BF9;&#x201C;utf8&#x201D;&#x7F16;&#x7801;&#x6DFB;&#x52A0;&#x4E00;&#x4E2A;&#x68C0;&#x67E5;&#x4EE5;&#x68C0;&#x6D4B;MySQLdb 1.2.3&#x7248;&#x4E2D;&#x89C2;&#x5BDF;&#x5230;&#x7684;&#x4E00;&#x4E9B;&#x9519;&#x8BEF;&#x7684;unicode&#x884C;&#x4E3A;&#x3002;</span><span class="yiyi-st" id="yiyi-959">&#x867D;&#x7136;MySQLdb&#x81EA;1.2.4&#x8D77;&#x89E3;&#x51B3;&#x4E86;&#x6B64;&#x95EE;&#x9898;&#xFF0C;&#x4F46;&#x6B64;&#x5904;&#x7684;&#x68C0;&#x67E5;&#x5E94;&#x9632;&#x6B62;&#x56DE;&#x5F52;&#x3002;</span><span class="yiyi-st" id="yiyi-960">&#x8BE5;&#x66F4;&#x6539;&#x8FD8;&#x5141;&#x8BB8;&#x201C;unicode&#x201D;&#x68C0;&#x67E5;&#x767B;&#x5F55;&#x5F15;&#x64CE;&#x65E5;&#x5FD7;&#xFF0C;&#x8FD9;&#x5728;&#x4EE5;&#x524D;&#x5E76;&#x975E;&#x5982;&#x6B64;&#x3002;<a class="changeset-link headerlink reference internal" href="#change-5306ccbcd637857024e7f7526badb84e">&#xB6;</a></span></p><p><span class="yiyi-st" id="yiyi-961">&#x53C2;&#x8003;&#x6587;&#x732E;&#xFF1A;<a class="reference external" href="http://www.sqlalchemy.org/trac/ticket/2906">&#xFF03;2906</a></span></p></li><li><p id="change-0.9.2-25"><span class="yiyi-st" id="yiyi-962"><span class="target" id="change-f9af1f23fa7c0156a51404d81df8f88c"><strong>[mysql] [bug] [engine] [pool] </strong></span><a class="reference internal" href="core_connections.html#sqlalchemy.engine.Connection" title="sqlalchemy.engine.Connection"><code class="xref py py-class docutils literal"><span class="pre">Connection</span></code></a> now associates a new <code class="xref py py-class docutils literal"><span class="pre">RootTransaction</span></code> or <a class="reference internal" href="core_connections.html#sqlalchemy.engine.TwoPhaseTransaction" title="sqlalchemy.engine.TwoPhaseTransaction"><code class="xref py py-class docutils literal"><span class="pre">TwoPhaseTransaction</span></code></a> with its immediate <a class="reference internal" href="core_pooling.html#sqlalchemy.pool._ConnectionFairy" title="sqlalchemy.pool._ConnectionFairy"><code class="xref py py-class docutils literal"><span class="pre">_ConnectionFairy</span></code></a> as a &#x201C;reset handler&#x201D; for the span of that transaction, which takes over the task of calling commit() or rollback() for the &#x201C;reset on return&#x201D; behavior of <a class="reference internal" href="core_pooling.html#sqlalchemy.pool.Pool" title="sqlalchemy.pool.Pool"><code class="xref py py-class docutils literal"><span class="pre">Pool</span></code></a> if the transaction was not otherwise completed. </span><span class="yiyi-st" id="yiyi-963">&#x8FD9;&#x89E3;&#x51B3;&#x4E86;&#x5F53;&#x6CA1;&#x6709;&#x663E;&#x5F0F;&#x56DE;&#x6EDA;&#x6216;&#x63D0;&#x4EA4;&#x65F6;&#x8FDE;&#x63A5;&#x5173;&#x95ED;&#x65F6;&#xFF0C;&#x50CF;MySQL&#x4E24;&#x9636;&#x6BB5;&#x90A3;&#x6837;&#x7684;&#x6311;&#x5254;&#x4E8B;&#x52A1;&#x5C06;&#x88AB;&#x6B63;&#x786E;&#x5173;&#x95ED;&#x7684;&#x95EE;&#x9898;&#xFF08;&#x4F8B;&#x5982;&#xFF0C;&#x5728;&#x8FD9;&#x79CD;&#x60C5;&#x51B5;&#x4E0B;&#xFF0C;&#x4E0D;&#x518D;&#x63D0;&#x51FA;&#x201C;XAER_RMFAIL&#x201D; - &#x6CE8;&#x610F;&#x8FD9;&#x4EC5;&#x5728;&#x65E5;&#x5FD7;&#x8BB0;&#x5F55;&#x4E2D;&#x663E;&#x793A;&#x56E0;&#x4E3A;&#x5F02;&#x5E38;&#x4E0D;&#x4F1A;&#x5728;&#x6C60;&#x91CD;&#x7F6E;&#x5185;&#x4F20;&#x64AD;&#xFF09;&#x3002;</span><span class="yiyi-st" id="yiyi-964">This issue would arise e.g. when using an orm <a class="reference internal" href="orm_session_api.html#sqlalchemy.orm.session.Session" title="sqlalchemy.orm.session.Session"><code class="xref py py-class docutils literal"><span class="pre">Session</span></code></a> with <code class="docutils literal"><span class="pre">twophase</span></code> set, and then <a class="reference internal" href="orm_session_api.html#sqlalchemy.orm.session.Session.close" title="sqlalchemy.orm.session.Session.close"><code class="xref py py-meth docutils literal"><span class="pre">Session.close()</span></code></a> is called without an explicit rollback or commit. </span><span class="yiyi-st" id="yiyi-965">&#x6B64;&#x66F4;&#x6539;&#x8FD8;&#x5177;&#x6709;&#x4EE5;&#x4E0B;&#x6548;&#x679C;&#xFF0C;&#x5373;&#x5728;&#x975E;&#x81EA;&#x52A8;&#x63D0;&#x4EA4;&#x6A21;&#x5F0F;&#x4E0B;&#x4F7F;&#x7528;<a class="reference internal" href="orm_session_api.html#sqlalchemy.orm.session.Session" title="sqlalchemy.orm.session.Session"><code class="xref py py-class docutils literal"><span class="pre">Session</span></code></a>&#x5BF9;&#x8C61;&#x65F6;&#xFF0C;&#x60A8;&#x73B0;&#x5728;&#x5C06;&#x5728;&#x65E5;&#x5FD7;&#x4E2D;&#x770B;&#x5230;&#x660E;&#x786E;&#x7684;&#x201C;ROLLBACK&#x201D;&#xFF0C;&#x65E0;&#x8BBA;&#x4F1A;&#x8BDD;&#x88AB;&#x4E22;&#x5F03;&#x7684;&#x65B9;&#x5F0F;&#x5982;&#x4F55;&#x3002;</span><span class="yiyi-st" id="yiyi-966">&#x611F;&#x8C22;Jeff Dairiki&#x548C;Laurence Rowe&#x5C06;&#x6B64;&#x95EE;&#x9898;&#x9694;&#x79BB;&#x5F00;&#x6765;&#x3002;<a class="changeset-link headerlink reference internal" href="#change-f9af1f23fa7c0156a51404d81df8f88c">&#xB6;</a></span></p><p><span class="yiyi-st" id="yiyi-967">&#x53C2;&#x8003;&#x6587;&#x732E;&#xFF1A;<a class="reference external" href="http://www.sqlalchemy.org/trac/ticket/2907">&#xFF03;2907</a></span></p></li></ul></div><div class="section" id="change-0.9.2-sqlite"><h3><span class="yiyi-st" id="yiyi-968">&#x6E90;&#x7801;<a class="headerlink" href="#change-0.9.2-sqlite" title="Permalink to this headline">&#xB6; T0&gt;</a></span></h3><ul class="simple"><li><p id="change-0.9.2-26"><span class="yiyi-st" id="yiyi-969"><span class="target" id="change-f340e82cab2db7a33792c8734bd3dd2c"><strong>[sqlite] [bug] </strong></span>Fixed bug whereby SQLite compiler failed to propagate compiler arguments such as &#x201C;literal binds&#x201D; into a CAST expression.<a class="changeset-link headerlink reference internal" href="#change-f340e82cab2db7a33792c8734bd3dd2c">&#xB6;</a></span></p><p></p></li></ul></div><div class="section" id="change-0.9.2-mssql"><h3><span class="yiyi-st" id="yiyi-970">MSSQL <a class="headerlink" href="#change-0.9.2-mssql" title="Permalink to this headline">&#xB6; T0&gt;</a></span></h3><ul class="simple"><li><p id="change-0.9.2-27"><span class="yiyi-st" id="yiyi-971"><span class="target" id="change-2f279749d1dbc19d2dcab58b0a56c870"><strong>[mssql] [feature] </strong></span>&#x4E3A;<a class="reference internal" href="core_constraints.html#sqlalchemy.schema.UniqueConstraint" title="sqlalchemy.schema.UniqueConstraint"><code class="xref py py-class docutils literal"><span class="pre">UniqueConstraint</span></code></a>&#x548C;<a class="reference internal" href="core_constraints.html#sqlalchemy.schema.PrimaryKeyConstraint" title="sqlalchemy.schema.PrimaryKeyConstraint"><code class="xref py py-class docutils literal"><span class="pre">PrimaryKeyConstraint</span></code></a>&#x7ED3;&#x6784;&#x6DFB;&#x52A0;&#x4E86;&#x4E00;&#x4E2A;&#x9009;&#x9879;<code class="docutils literal"><span class="pre">mssql_clustered</span></code>&#x5728;SQL Server&#x4E0A;&#xFF0C;&#x8FD9;&#x5C06;<code class="docutils literal"><span class="pre">CLUSTERED</span></code>&#x5173;&#x952E;&#x5B57;&#x6DFB;&#x52A0;&#x5230;DDL&#x4E2D;&#x7684;&#x7EA6;&#x675F;&#x7ED3;&#x6784;&#x4E2D;&#x3002;</span><span class="yiyi-st" id="yiyi-972">Pullreq&#x793C;&#x8C8C;Derek Harland&#x3002;<a class="changeset-link headerlink reference internal" href="#change-2f279749d1dbc19d2dcab58b0a56c870">&#xB6;</a></span></p><p><span class="yiyi-st" id="yiyi-973">&#x53C2;&#x8003;&#xFF1A;<a class="reference external" href="https://bitbucket.org/zzzeek/sqlalchemy/pull-request/11">&#x62C9;&#x53D6;&#x8BF7;&#x6C42;bitbucket&#xFF1A;11</a></span></p></li></ul></div><div class="section" id="change-0.9.2-oracle"><h3><span class="yiyi-st" id="yiyi-974">&#x9884;&#x8A00;<a class="headerlink" href="#change-0.9.2-oracle" title="Permalink to this headline">&#xB6; T0&gt;</a></span></h3><ul class="simple"><li><p id="change-0.9.2-28"><span class="yiyi-st" id="yiyi-975"><span class="target" id="change-2cd0a6583e825c62477ab7a3d4770de9"><strong>[oracle] [bug] </strong></span>It&#x2019;s been observed that the usage of a cx_Oracle &#x201C;outputtypehandler&#x201D; in Python 2.xx in order to coerce string values to Unicode is inordinately expensive; even though cx_Oracle is written in C, when you pass the Python <code class="docutils literal"><span class="pre">unicode</span></code> primitive to cursor.var() and associate with an output handler, the library counts every conversion as a Python function call with all the requisite overhead being recorded; this <em>despite</em> the fact when running in Python 3, all strings are also unconditionally coerced to unicode but it does <em>not</em> incur this overhead, meaning that cx_Oracle is failing to use performant techniques in Py2K. </span><span class="yiyi-st" id="yiyi-976">&#x7531;&#x4E8E;SQLAlchemy&#x65E0;&#x6CD5;&#x8F7B;&#x677E;&#x5730;&#x4EE5;&#x6BCF;&#x5217;&#x4E3A;&#x57FA;&#x7840;&#x9009;&#x62E9;&#x6B64;&#x7C7B;&#x578B;&#x7684;&#x5904;&#x7406;&#x7A0B;&#x5E8F;&#x7C7B;&#x578B;&#xFF0C;&#x56E0;&#x6B64;&#x65E0;&#x6761;&#x4EF6;&#x5730;&#x7EC4;&#x88C5;&#x5904;&#x7406;&#x7A0B;&#x5E8F;&#xFF0C;&#x4ECE;&#x800C;&#x5C06;&#x5F00;&#x9500;&#x6DFB;&#x52A0;&#x5230;&#x6240;&#x6709;&#x5B57;&#x7B26;&#x4E32;&#x8BBF;&#x95EE;&#x3002;</span></p><p><span class="yiyi-st" id="yiyi-977">&#x6240;&#x4EE5;&#x8FD9;&#x4E2A;&#x903B;&#x8F91;&#x5DF2;&#x7ECF;&#x88AB;SQLAlchemy&#x81EA;&#x5DF1;&#x7684;unicode&#x8F6C;&#x6362;&#x7CFB;&#x7EDF;&#x6240;&#x66FF;&#x4EE3;&#xFF0C;&#x73B0;&#x5728;&#x5B83;&#x53EA;&#x5728;Py2K&#x4E2D;&#x5BF9;&#x9700;&#x8981;unicode&#x7684;&#x5217;&#x8D77;&#x4F5C;&#x7528;&#x3002;</span><span class="yiyi-st" id="yiyi-978">&#x5F53;&#x4F7F;&#x7528;C&#x6269;&#x5C55;&#x65F6;&#xFF0C;SQLAlchemy&#x7684;&#x7CFB;&#x7EDF;&#x4F3C;&#x4E4E;&#x6BD4;cx_Oracle&#x5FEB;2-3&#x500D;&#x3002;</span><span class="yiyi-st" id="yiyi-979">&#x6B64;&#x5916;&#xFF0C;SQLAlchemy&#x7684;unicode&#x8F6C;&#x6362;&#x529F;&#x80FD;&#x5F97;&#x5230;&#x4E86;&#x589E;&#x5F3A;&#xFF0C;&#x56E0;&#x6B64;&#x5F53;&#x9700;&#x8981;&#x201C;&#x6761;&#x4EF6;&#x201D;&#x8F6C;&#x6362;&#x5668;&#xFF08;&#x73B0;&#x5728;&#x9700;&#x8981;&#x7528;&#x4E8E;Oracle&#x540E;&#x7AEF;&#xFF09;&#x65F6;&#xFF0C;&#x201C;&#x5DF2;&#x7ECF;&#x662F;unicode&#x201D;&#x7684;&#x68C0;&#x67E5;&#x73B0;&#x5728;&#x5728;C&#x4E2D;&#x6267;&#x884C;&#xFF0C;&#x4E0D;&#x518D;&#x5F15;&#x5165;&#x5927;&#x91CF;&#x5F00;&#x9500;&#x3002;</span></p><p><span class="yiyi-st" id="yiyi-980">&#x6B64;&#x66F4;&#x6539;&#x5BF9;cx_Oracle&#x540E;&#x7AEF;&#x6709;&#x4E24;&#x4E2A;&#x5F71;&#x54CD;&#x3002;</span><span class="yiyi-st" id="yiyi-981">&#x4E00;&#x4E2A;&#x662F;Py2K&#x4E2D;&#x6CA1;&#x6709;&#x88AB;Unicode&#x7C7B;&#x578B;&#x6216;convert_unicode = True&#x660E;&#x786E;&#x8BF7;&#x6C42;&#x7684;&#x5B57;&#x7B26;&#x4E32;&#x503C;&#x73B0;&#x5728;&#x5C06;&#x8FD4;&#x56DE;&#x4E3A;<code class="docutils literal"><span class="pre">str</span></code>&#xFF0C;&#x800C;&#x4E0D;&#x662F;<code class="docutils literal"><span class="pre">unicode</span></code>  - &#x6B64;&#x884C;&#x4E3A;&#x4E0E;&#x540E;&#x7AEF;&#x5982;MySQL&#x3002;</span><span class="yiyi-st" id="yiyi-982">&#x53E6;&#x5916;&#xFF0C;&#x5F53;&#x4F7F;&#x7528;cx_Oracle&#x540E;&#x7AEF;&#x8BF7;&#x6C42;unicode&#x503C;&#x65F6;&#xFF0C;&#x5982;&#x679C;C&#x6269;&#x5C55;&#x540D;<em>not</em>&#x88AB;&#x4F7F;&#x7528;&#xFF0C;&#x73B0;&#x5728;&#x6BCF;&#x5217;&#x6709;&#x4E00;&#x4E2A;&#x989D;&#x5916;&#x7684;isinstance()&#x68C0;&#x67E5;&#x5F00;&#x9500;&#x3002;</span><span class="yiyi-st" id="yiyi-983">&#x8FD9;&#x79CD;&#x6743;&#x8861;&#x5DF2;&#x7ECF;&#x88AB;&#x5236;&#x5B9A;&#x51FA;&#x6765;&#xFF0C;&#x56E0;&#x4E3A;&#x5B83;&#x53EF;&#x4EE5;&#x88AB;&#x89E3;&#x51B3;&#xFF0C;&#x5E76;&#x4E14;&#x4E0D;&#x4F1A;&#x7ED9;&#x53EF;&#x80FD;&#x7684;&#x5927;&#x90E8;&#x5206;&#x975E;Unicode&#x5B57;&#x7B26;&#x4E32;&#x7684;Oracle&#x7ED3;&#x679C;&#x5217;&#x5E26;&#x6765;&#x6027;&#x80FD;&#x8D1F;&#x62C5;&#x3002;</span></p><span class="yiyi-st" id="yiyi-985"> <a class="changeset-link headerlink reference internal" href="#change-2cd0a6583e825c62477ab7a3d4770de9">&#xB6;</a></span><p><span class="yiyi-st" id="yiyi-984">&#x53C2;&#x8003;&#x6587;&#x732E;&#xFF1A;<a class="reference external" href="http://www.sqlalchemy.org/trac/ticket/2911">&#xFF03;2911</a></span></p></li></ul></div><div class="section" id="change-0.9.2-misc"><h3><span class="yiyi-st" id="yiyi-986">&#x6742;&#x9879;<a class="headerlink" href="#change-0.9.2-misc" title="Permalink to this headline">&#xB6; T0&gt;</a></span></h3><ul class="simple"><li><p id="change-0.9.2-29"><span class="yiyi-st" id="yiyi-987"><span class="target" id="change-b3122f01ed7d8d120a8035233320d558"><strong>[bug] [examples] </strong></span>Added a tweak to the &#x201C;history_meta&#x201D; example where the check for &#x201C;history&#x201D; on a relationship-bound attribute will now no longer emit any SQL if the relationship is unloaded.<a class="changeset-link headerlink reference internal" href="#change-b3122f01ed7d8d120a8035233320d558">&#xB6;</a></span></p><p></p></li><li><p id="change-0.9.2-30"><span class="yiyi-st" id="yiyi-988"><span class="target" id="change-34c66a5b820b990e8ccde1cb2eee76c2"><strong>[bug] [pool] </strong></span> <a class="reference internal" href="core_events.html#sqlalchemy.events.PoolEvents.reset" title="sqlalchemy.events.PoolEvents.reset"><code class="xref py py-meth docutils literal"><span class="pre">PoolEvents.reset()</span></code></a>&#x4E8B;&#x4EF6;&#x7684;&#x53C2;&#x6570;&#x540D;&#x79F0;&#x5DF2;&#x91CD;&#x547D;&#x540D;&#x4E3A;<code class="docutils literal"><span class="pre">dbapi_connection</span></code>&#x548C;<code class="docutils literal"><span class="pre">connection_record</span></code></span><span class="yiyi-st" id="yiyi-989">&#x9884;&#x8BA1;&#x8FD9;&#x4E2A;&#x76F8;&#x5BF9;&#x8F83;&#x65B0;&#x4E14;&#x5F88;&#x5C11;&#x4F7F;&#x7528;&#x7684;&#x4E8B;&#x4EF6;&#x7684;&#x73B0;&#x6709;&#x4FA6;&#x542C;&#x5668;&#x5728;&#x4EFB;&#x4F55;&#x60C5;&#x51B5;&#x4E0B;&#x90FD;&#x4F1A;&#x4F7F;&#x7528;&#x4F4D;&#x7F6E;&#x98CE;&#x683C;&#x6765;&#x63A5;&#x6536;&#x53C2;&#x6570;&#x3002;<a class="changeset-link headerlink reference internal" href="#change-34c66a5b820b990e8ccde1cb2eee76c2">&#xB6;</a></span></p><p></p></li><li><p id="change-0.9.2-31"><span class="yiyi-st" id="yiyi-990"><span class="target" id="change-98b1a028c00831d12344a81c2928019c"><strong>[bug] [cextensions] [py3k] </strong></span>Fixed an issue where the C extensions in Py3K are using the wrong API to specify the top-level module function, which breaks in Python 3.4b2. </span><span class="yiyi-st" id="yiyi-991">Py3.4b2&#x5C06;PyMODINIT_FUNC&#x6539;&#x4E3A;&#x8FD4;&#x56DE;&#x201C;void&#x201D;&#x800C;&#x4E0D;&#x662F;<code class="docutils literal"><span class="pre">PyObject</span> <span class="pre">*</span></code>&#xFF0C;&#x6240;&#x4EE5;&#x6211;&#x4EEC;&#x73B0;&#x5728;&#x786E;&#x4FDD;&#x4F7F;&#x7528;&#x201C;PyMODINIT_FUNC&#x201D;&#x800C;&#x4E0D;&#x662F;<code class="docutils literal"> <span class="pre">PyObject</span> <span class="pre">*</span></code>&#x3002;</span><span class="yiyi-st" id="yiyi-992">&#x62C9;&#x8BF7;&#x6C42;&#x793C;&#x8C8C;cgohlke&#x3002;<a class="changeset-link headerlink reference internal" href="#change-98b1a028c00831d12344a81c2928019c">&#xB6;</a></span></p><p><span class="yiyi-st" id="yiyi-993">&#x53C2;&#x8003;&#x6587;&#x732E;&#xFF1A;<a class="reference external" href="https://github.com/zzzeek/sqlalchemy/pull/55">&#x8BF7;&#x6C42;github&#xFF1A;55</a></span></p></li></ul></div></div><div class="section" id="change-0.9.1"><h2><span class="yiyi-st" id="yiyi-995">0.9.1 <a class="headerlink" href="#change-0.9.1" title="Permalink to this headline">&#xB6; T0&gt;</a></span></h2><span class="yiyi-st" id="yiyi-1028">&#x53D1;&#x5E03;&#x65F6;&#x95F4;&#xFF1A;2014&#x5E74;1&#x6708;5&#x65E5;</span><div class="section" id="change-0.9.1-orm"><h3><span class="yiyi-st" id="yiyi-996">ORM <a class="headerlink" href="#change-0.9.1-orm" title="Permalink to this headline">&#xB6; T0&gt;</a></span></h3><ul class="simple"><li><p id="change-0.9.1-0"><span class="yiyi-st" id="yiyi-997"><span class="target" id="change-03a1682f97f04e9969b1eedfea573837"><strong>[orm] [feature] [extensions] </strong></span>&#x6DFB;&#x52A0;&#x4E86;&#x4E00;&#x4E2A;&#x65B0;&#x7684;<strong>&#x5B9E;&#x9A8C;&#x6027;</strong>&#x6269;&#x5C55;<a class="reference internal" href="orm_extensions_automap.html#module-sqlalchemy.ext.automap" title="sqlalchemy.ext.automap"><code class="xref py py-mod docutils literal"><span class="pre">sqlalchemy.ext.automap</span></code></a>&#x3002;</span><span class="yiyi-st" id="yiyi-998">This extension expands upon the functionality of Declarative as well as the <a class="reference internal" href="orm_extensions_declarative_api.html#sqlalchemy.ext.declarative.DeferredReflection" title="sqlalchemy.ext.declarative.DeferredReflection"><code class="xref py py-class docutils literal"><span class="pre">DeferredReflection</span></code></a> class to produce a base class which automatically generates mapped classes <em>and relationships</em> based on table metadata.</span></p><div class="admonition seealso"><p class="first admonition-title"><span class="yiyi-st" id="yiyi-999">&#x4E5F;&#x53EF;&#x4EE5;&#x770B;&#x770B;</span></p><p><span class="yiyi-st" id="yiyi-1000"><a class="reference internal" href="migration_09.html#feature-automap"><span>Automap Extension</span></a></span></p><p class="last"><span class="yiyi-st" id="yiyi-1001"><a class="reference internal" href="orm_extensions_automap.html"><span>Automap</span></a></span></p></div><span class="yiyi-st" id="yiyi-1002"> <a class="changeset-link headerlink reference internal" href="#change-03a1682f97f04e9969b1eedfea573837">&#xB6;</a></span><p></p></li><li><p id="change-0.9.1-1"><span class="yiyi-st" id="yiyi-1003"><span class="target" id="change-8aeefcaaa4a378dba8faa4278d991e73"><strong>[orm] [bug] [events] </strong></span>Fixed regression where using a <code class="docutils literal"><span class="pre">functools.partial()</span></code> with the event system would cause a recursion overflow due to usage of inspect.getargspec() on it in order to detect a legacy calling signature for certain events, and apparently there&#x2019;s no way to do this with a partial object. </span><span class="yiyi-st" id="yiyi-1004">&#x76F8;&#x53CD;&#xFF0C;&#x6211;&#x4EEC;&#x8DF3;&#x8FC7;&#x4E86;&#x4F20;&#x7EDF;&#x652F;&#x7968;&#x5E76;&#x91C7;&#x7528;&#x73B0;&#x4EE3;&#x98CE;&#x683C;&#xFF1B;&#x68C0;&#x67E5;&#x672C;&#x8EAB;&#x73B0;&#x5728;&#x53EA;&#x53D1;&#x751F;&#x5728;SessionEvents.after_bulk_update&#x548C;SessionEvents.after_bulk_delete&#x4E8B;&#x4EF6;&#x4E2D;&#x3002;</span><span class="yiyi-st" id="yiyi-1005">&#x5982;&#x679C;&#x5206;&#x914D;&#x7ED9;&#x201C;&#x90E8;&#x5206;&#x201D;&#x4E8B;&#x4EF6;&#x4FA6;&#x542C;&#x5668;&#xFF0C;&#x90A3;&#x4E48;&#x8FD9;&#x4E24;&#x4E2A;&#x4E8B;&#x4EF6;&#x5C06;&#x9700;&#x8981;&#x65B0;&#x7684;&#x7B7E;&#x540D;&#x6837;&#x5F0F;&#x3002;<a class="changeset-link headerlink reference internal" href="#change-8aeefcaaa4a378dba8faa4278d991e73">&#xB6;</a></span></p><p><span class="yiyi-st" id="yiyi-1006">&#x53C2;&#x8003;&#x6587;&#x732E;&#xFF1A;<a class="reference external" href="http://www.sqlalchemy.org/trac/ticket/2905">&#xFF03;2905</a></span></p></li><li><p id="change-0.9.1-2"><span class="yiyi-st" id="yiyi-1007"><span class="target" id="change-590902684e2acb993441b174c1ab59a3"><strong>[orm] [bug] </strong></span>Fixed bug where using new <a class="reference internal" href="orm_session_api.html#sqlalchemy.orm.session.Session.info" title="sqlalchemy.orm.session.Session.info"><code class="xref py py-attr docutils literal"><span class="pre">Session.info</span></code></a> attribute would fail if the <code class="docutils literal"><span class="pre">.info</span></code> argument were only passed to the <a class="reference internal" href="orm_session_api.html#sqlalchemy.orm.session.sessionmaker" title="sqlalchemy.orm.session.sessionmaker"><code class="xref py py-class docutils literal"><span class="pre">sessionmaker</span></code></a> creation call but not to the object itself. </span><span class="yiyi-st" id="yiyi-1008">Courtesy Robin Schoonover&#x3002;<a class="changeset-link headerlink reference internal" href="#change-590902684e2acb993441b174c1ab59a3">&#xB6;</a></span></p><p><span class="yiyi-st" id="yiyi-1009">&#x53C2;&#x8003;&#x6587;&#x732E;&#xFF1A;<a class="reference external" href="https://bitbucket.org/zzzeek/sqlalchemy/pull-request/9">pull request bitbucket&#xFF1A;9</a></span></p></li><li><p id="change-0.9.1-3"><span class="yiyi-st" id="yiyi-1010"><span class="target" id="change-53e42d12ab61af327a7559207a6211b4"><strong>[orm] [bug] </strong></span>Fixed regression where we don&#x2019;t check the given name against the correct string class when setting up a backref based on a name, therefore causing the error &#x201C;too many values to unpack&#x201D;. </span><span class="yiyi-st" id="yiyi-1011">&#x8FD9;&#x4E0E;Py3k&#x8F6C;&#x6362;&#x6709;&#x5173;&#x3002;<a class="changeset-link headerlink reference internal" href="#change-53e42d12ab61af327a7559207a6211b4">&#xB6;</a></span></p><p><span class="yiyi-st" id="yiyi-1012">&#x53C2;&#x8003;&#x6587;&#x732E;&#xFF1A;<a class="reference external" href="http://www.sqlalchemy.org/trac/ticket/2901">&#xFF03;2901</a></span></p></li><li><p id="change-0.9.1-4"><span class="yiyi-st" id="yiyi-1013"><span class="target" id="change-48eab507305f1712468f94e36bc07cfb"><strong>[orm] [bug] </strong></span>Fixed regression where we apparently still create an implicit alias when saying query(B).join(B.cs), where &#x201C;C&#x201D; is a joined inh class; however, this implicit alias was created only considering the immediate left side, and not a longer chain of joins along different joined-inh subclasses of the same base. </span><span class="yiyi-st" id="yiyi-1014">&#x53EA;&#x8981;&#x6211;&#x4EEC;&#x5728;&#x8FD9;&#x79CD;&#x60C5;&#x51B5;&#x4E0B;&#x4ECD;&#x7136;&#x9690;&#x542B;&#x522B;&#x540D;&#xFF0C;&#x884C;&#x4E3A;&#x5C31;&#x4F1A;&#x88AB;&#x62E8;&#x56DE;&#x4E00;&#x70B9;&#xFF0C;&#x8FD9;&#x6837;&#x5B83;&#x5C31;&#x4F1A;&#x5728;&#x5404;&#x79CD;&#x5404;&#x6837;&#x7684;&#x60C5;&#x51B5;&#x4E0B;&#x6DF7;&#x6DC6;&#x53F3;&#x4FA7;&#x3002;<a class="changeset-link headerlink reference internal" href="#change-48eab507305f1712468f94e36bc07cfb">&#xB6;</a></span></p><p><span class="yiyi-st" id="yiyi-1015">&#x53C2;&#x8003;&#x6587;&#x732E;&#xFF1A;<a class="reference external" href="http://www.sqlalchemy.org/trac/ticket/2903">&#xFF03;2903</a></span></p></li></ul></div><div class="section" id="change-0.9.1-orm-declarative"><h3><span class="yiyi-st" id="yiyi-1016">orm declarative <a class="headerlink" href="#change-0.9.1-orm-declarative" title="Permalink to this headline">&#xB6;</a></span></h3><ul class="simple"><li><p id="change-0.9.1-5"><span class="yiyi-st" id="yiyi-1017"><span class="target" id="change-0f3dd659714e45e0f577963d43d7d5aa"><strong>[bug] [orm] [declarative] </strong></span>Fixed an extremely unlikely memory issue where when using <a class="reference internal" href="orm_extensions_declarative_api.html#sqlalchemy.ext.declarative.DeferredReflection" title="sqlalchemy.ext.declarative.DeferredReflection"><code class="xref py py-class docutils literal"><span class="pre">DeferredReflection</span></code></a> to define classes pending for reflection, if some subset of those classes were discarded before the <a class="reference internal" href="orm_extensions_declarative_api.html#sqlalchemy.ext.declarative.DeferredReflection.prepare" title="sqlalchemy.ext.declarative.DeferredReflection.prepare"><code class="xref py py-meth docutils literal"><span class="pre">DeferredReflection.prepare()</span></code></a> method were called to reflect and map the class, a strong reference to the class would remain held within the declarative internals. </span><span class="yiyi-st" id="yiyi-1018">&#x8FD9;&#x4E2A;&#x201C;&#x6620;&#x5C04;&#x7C7B;&#x7684;&#x5185;&#x90E8;&#x96C6;&#x5408;&#x201D;&#x73B0;&#x5728;&#x4F7F;&#x7528;&#x5BF9;&#x8FD9;&#x4E9B;&#x7C7B;&#x672C;&#x8EAB;&#x7684;&#x5F31;&#x5F15;&#x7528;&#x3002;<a class="changeset-link headerlink reference internal" href="#change-0f3dd659714e45e0f577963d43d7d5aa">&#xB6;</a></span></p><p></p></li><li><p id="change-0.9.1-6"><span class="yiyi-st" id="yiyi-1019"><span class="target" id="change-4bf7b34989a71c9289696d84c85cc213"><strong>[bug] [orm] [declarative] </strong></span>&#x4E00;&#x4E2A;&#x51C6;&#x56DE;&#x5F52;&#xFF0C;&#x663E;&#x7136;&#x5728;0.8&#x4E2D;&#xFF0C;&#x60A8;&#x53EF;&#x4EE5;&#x5728;&#x58F0;&#x660E;&#x5F0F;&#x4E2D;&#x8BBE;&#x7F6E;&#x4E00;&#x4E2A;&#x7C7B;&#x7EA7;&#x5C5E;&#x6027;&#xFF0C;&#x4EE5;&#x76F4;&#x63A5;&#x5F15;&#x7528;&#x4E00;&#x4E2A;<a class="reference internal" href="orm_internals.html#sqlalchemy.orm.attributes.InstrumentedAttribute" title="sqlalchemy.orm.attributes.InstrumentedAttribute"><code class="xref py py-class docutils literal"><span class="pre">InstrumentedAttribute</span></code></a>&#x8D85;&#x7C7B;&#x6216;&#x7C7B;&#x672C;&#x8EAB;&#xFF0C;&#x5B83;&#x6216;&#x591A;&#x6216;&#x5C11;&#x5730;&#x50CF;&#x4E00;&#x4E2A;&#x540C;&#x4E49;&#x8BCD;&#xFF1B;&#x5728;0.9&#x4E2D;&#xFF0C;&#x8FD9;&#x6CA1;&#x6709;&#x8BBE;&#x7F6E;&#x8DB3;&#x591F;&#x7684;&#x7C3F;&#x8BB0;&#x6765;&#x8DDF;&#x4E0A;&#x6765;&#x81EA;<a class="reference external" href="http://www.sqlalchemy.org/trac/ticket/2789">&#xFF03;2789</a>&#x7684;&#x66F4;&#x81EA;&#x7531;&#x5316;&#x7684;&#x540E;&#x9000;&#x903B;&#x8F91;&#x3002;</span><span class="yiyi-st" id="yiyi-1020">&#x5C3D;&#x7BA1;&#x8FD9;&#x4E2A;&#x7528;&#x4F8B;&#x4ECE;&#x6765;&#x6CA1;&#x6709;&#x88AB;&#x76F4;&#x63A5;&#x8003;&#x8651;&#x8FC7;&#xFF0C;&#x4F46;&#x662F;&#x73B0;&#x5728;&#x901A;&#x8FC7;&#x58F0;&#x660E;&#x5728;&#x201C;setattr()&#x201D;&#x7EA7;&#x522B;&#x4EE5;&#x53CA;&#x8BBE;&#x7F6E;&#x5B50;&#x7C7B;&#x65F6;&#x68C0;&#x6D4B;&#x5230;&#xFF0C;&#x5E76;&#x4E14;&#x955C;&#x50CF;/&#x91CD;&#x547D;&#x540D;&#x5C5E;&#x6027;&#x73B0;&#x5728;&#x8BBE;&#x7F6E;&#x4E3A;<a class="reference internal" href="orm_mapped_attributes.html#sqlalchemy.orm.synonym" title="sqlalchemy.orm.synonym"><code class="xref py py-func docutils literal"><span class="pre">synonym()</span></code></a>&#x3002;<a class="changeset-link headerlink reference internal" href="#change-4bf7b34989a71c9289696d84c85cc213">&#xB6;</a></span></p><p><span class="yiyi-st" id="yiyi-1021">&#x53C2;&#x8003;&#x6587;&#x732E;&#xFF1A;<a class="reference external" href="http://www.sqlalchemy.org/trac/ticket/2900">&#xFF03;2900</a></span></p></li></ul></div><div class="section" id="change-0.9.1-sql"><h3><span class="yiyi-st" id="yiyi-1022">SQL <a class="headerlink" href="#change-0.9.1-sql" title="Permalink to this headline">&#xB6; T0&gt;</a></span></h3><ul class="simple"><li><p id="change-0.9.1-7"><span class="yiyi-st" id="yiyi-1023"><span class="target" id="change-e56929f2d249d5a65bd72271366f4ad3"><strong>[sql] [feature] </strong></span>Conjunctions like <a class="reference internal" href="core_sqlelement.html#sqlalchemy.sql.expression.and_" title="sqlalchemy.sql.expression.and_"><code class="xref py py-func docutils literal"><span class="pre">and_()</span></code></a> and <a class="reference internal" href="core_sqlelement.html#sqlalchemy.sql.expression.or_" title="sqlalchemy.sql.expression.or_"><code class="xref py py-func docutils literal"><span class="pre">or_()</span></code></a> can now accept Python generators as a single argument, e.g.:</span></p><div class="highlight-python"><div class="highlight"><pre><span></span><span class="n">and_</span><span class="p">(</span><span class="n">x</span> <span class="o">==</span> <span class="n">y</span> <span class="k">for</span> <span class="n">x</span><span class="p">,</span> <span class="n">y</span> <span class="ow">in</span> <span class="n">tuples</span><span class="p">)</span></pre></div></div><p><span class="yiyi-st" id="yiyi-1024">&#x8FD9;&#x91CC;&#x7684;&#x903B;&#x8F91;&#x67E5;&#x627E;&#x5355;&#x4E2A;&#x53C2;&#x6570;<code class="docutils literal"><span class="pre">*args</span></code>&#xFF0C;&#x5176;&#x4E2D;&#x7B2C;&#x4E00;&#x4E2A;&#x5143;&#x7D20;&#x662F;<code class="docutils literal"><span class="pre">types.GeneratorType</span></code>&#x7684;&#x5B9E;&#x4F8B;&#x3002;</span></p><span class="yiyi-st" id="yiyi-1025"> <a class="changeset-link headerlink reference internal" href="#change-e56929f2d249d5a65bd72271366f4ad3">&#xB6;</a></span><p></p></li></ul></div><div class="section" id="change-0.9.1-schema"><h3><span class="yiyi-st" id="yiyi-1026">&#x67B6;&#x6784;<a class="headerlink" href="#change-0.9.1-schema" title="Permalink to this headline">&#xB6; T0&gt;</a></span></h3><ul class="simple"><li><p id="change-0.9.1-8"><span class="yiyi-st" id="yiyi-1027"><span class="target" id="change-08112f9e5e2d64a1f0236743dbd072a4"><strong>[schema] [feature] </strong></span>The <a class="reference internal" href="core_metadata.html#sqlalchemy.schema.Table.params.extend_existing" title="sqlalchemy.schema.Table"><code class="xref py py-paramref docutils literal"><span class="pre">Table.extend_existing</span></code></a> and <a class="reference internal" href="core_metadata.html#sqlalchemy.schema.Table.params.autoload_replace" title="sqlalchemy.schema.Table"><code class="xref py py-paramref docutils literal"><span class="pre">Table.autoload_replace</span></code></a> parameters are now available on the <a class="reference internal" href="core_metadata.html#sqlalchemy.schema.MetaData.reflect" title="sqlalchemy.schema.MetaData.reflect"><code class="xref py py-meth docutils literal"><span class="pre">MetaData.reflect()</span></code></a> method.<a class="changeset-link headerlink reference internal" href="#change-08112f9e5e2d64a1f0236743dbd072a4">&#xB6;</a></span></p><p></p></li></ul></div></div><div class="section" id="change-0.9.0"><h2><span class="yiyi-st" id="yiyi-1029">0.9.0 <a class="headerlink" href="#change-0.9.0" title="Permalink to this headline">&#xB6; T0&gt;</a></span></h2><span class="yiyi-st" id="yiyi-1225">&#x53D1;&#x5E03;&#x65E5;&#x671F;&#xFF1A;2013&#x5E74;12&#x6708;30&#x65E5;</span><div class="section" id="change-0.9.0-orm"><h3><span class="yiyi-st" id="yiyi-1030">ORM <a class="headerlink" href="#change-0.9.0-orm" title="Permalink to this headline">&#xB6; T0&gt;</a></span></h3><ul class="simple"><li><p id="change-0.9.0-0"><span class="yiyi-st" id="yiyi-1031"><span class="target" id="change-6f14ee03b908f78d8d174e7ef588746d"><strong>[orm] [feature] </strong></span>The <a class="reference internal" href="core_exceptions.html#sqlalchemy.exc.StatementError" title="sqlalchemy.exc.StatementError"><code class="xref py py-class docutils literal"><span class="pre">exc.StatementError</span></code></a> or DBAPI-related subclass now can accommodate additional information about the &#x201C;reason&#x201D; for the exception; the <a class="reference internal" href="orm_session_api.html#sqlalchemy.orm.session.Session" title="sqlalchemy.orm.session.Session"><code class="xref py py-class docutils literal"><span class="pre">Session</span></code></a> now adds some detail to it when the exception occurs within an autoflush. </span><span class="yiyi-st" id="yiyi-1032">This approach is taken as opposed to combining <a class="reference internal" href="orm_exceptions.html#sqlalchemy.orm.exc.FlushError" title="sqlalchemy.orm.exc.FlushError"><code class="xref py py-class docutils literal"><span class="pre">FlushError</span></code></a> with a Python 3 style &#x201C;chained exception&#x201D; approach so as to maintain compatibility both with Py2K code as well as code that already catches <code class="docutils literal"><span class="pre">IntegrityError</span></code> or similar.<a class="changeset-link headerlink reference internal" href="#change-6f14ee03b908f78d8d174e7ef588746d">&#xB6;</a></span></p><p></p></li><li><p id="change-0.9.0-1"><span class="yiyi-st" id="yiyi-1033"><span class="target" id="change-45720dc1b5014ca04cc355970a4a77ae"><strong>[orm] [feature] [backrefs] </strong></span>Added new argument <code class="docutils literal"><span class="pre">include_backrefs=True</span></code> to the <a class="reference internal" href="orm_mapped_attributes.html#sqlalchemy.orm.validates" title="sqlalchemy.orm.validates"><code class="xref py py-func docutils literal"><span class="pre">validates()</span></code></a> function; when set to False, a validation event will not be triggered if the event was initated as a backref to an attribute operation from the other side.</span></p><div class="admonition seealso"><p class="first admonition-title"><span class="yiyi-st" id="yiyi-1034">&#x4E5F;&#x53EF;&#x4EE5;&#x770B;&#x770B;</span></p><p class="last"><span class="yiyi-st" id="yiyi-1035"><a class="reference internal" href="migration_09.html#feature-1535"><span>include_backrefs=False option for @validates</span></a>&#x7684;include_backrefs = False&#x9009;&#x9879;</span></p></div><span class="yiyi-st" id="yiyi-1037"> <a class="changeset-link headerlink reference internal" href="#change-45720dc1b5014ca04cc355970a4a77ae">&#xB6;</a></span><p><span class="yiyi-st" id="yiyi-1036">&#x53C2;&#x8003;&#x6587;&#x732E;&#xFF1A;<a class="reference external" href="http://www.sqlalchemy.org/trac/ticket/1535">&#xFF03;1535</a></span></p></li><li><p id="change-0.9.0-2"><span class="yiyi-st" id="yiyi-1038"><span class="target" id="change-1144ec1f7338720f8b1ea74ccda5f49b"><strong>[orm] [feature] </strong></span>A new API for specifying the <code class="docutils literal"><span class="pre">FOR</span> <span class="pre">UPDATE</span></code> clause of a <code class="docutils literal"><span class="pre">SELECT</span></code> is added with the new <a class="reference internal" href="orm_query.html#sqlalchemy.orm.query.Query.with_for_update" title="sqlalchemy.orm.query.Query.with_for_update"><code class="xref py py-meth docutils literal"><span class="pre">Query.with_for_update()</span></code></a> method, to complement the new <a class="reference internal" href="core_selectable.html#sqlalchemy.sql.expression.GenerativeSelect.with_for_update" title="sqlalchemy.sql.expression.GenerativeSelect.with_for_update"><code class="xref py py-meth docutils literal"><span class="pre">GenerativeSelect.with_for_update()</span></code></a> method. </span><span class="yiyi-st" id="yiyi-1039">&#x8BF7;&#x6C42;&#x63D0;&#x4F9B;Mario Lassnig&#x63D0;&#x4F9B;&#x7684;&#x8BF7;&#x6C42;&#x3002;</span></p><div class="admonition seealso"><p class="first admonition-title"><span class="yiyi-st" id="yiyi-1040">&#x4E5F;&#x53EF;&#x4EE5;&#x770B;&#x770B;</span></p><p class="last"><span class="yiyi-st" id="yiyi-1041"><a class="reference internal" href="migration_09.html#feature-github-42"><span>New FOR UPDATE support on select(), Query()</span></a>&#x4E0A;&#x7684;&#x65B0;FOR UPDATE&#x652F;&#x6301;</span></p></div><span class="yiyi-st" id="yiyi-1043"> <a class="changeset-link headerlink reference internal" href="#change-1144ec1f7338720f8b1ea74ccda5f49b">&#xB6;</a></span><p><span class="yiyi-st" id="yiyi-1042">&#x53C2;&#x8003;&#x6587;&#x732E;&#xFF1A;<a class="reference external" href="https://github.com/zzzeek/sqlalchemy/pull/42">&#x8BF7;&#x6C42;github&#xFF1A;42</a></span></p></li><li><p id="change-0.9.0-3"><span class="yiyi-st" id="yiyi-1044"><span class="target" id="change-596ed6934e304cb10692a3ddea823f90"><strong>[orm] [bug] </strong></span>&#x8C03;&#x6574;<a class="reference internal" href="orm_loading_relationships.html#sqlalchemy.orm.subqueryload" title="sqlalchemy.orm.subqueryload"><code class="xref py py-func docutils literal"><span class="pre">subqueryload()</span></code></a>&#x7B56;&#x7565;&#xFF0C;&#x786E;&#x4FDD;&#x67E5;&#x8BE2;&#x5728;&#x52A0;&#x8F7D;&#x8FC7;&#x7A0B;&#x5F00;&#x59CB;&#x540E;&#x8FD0;&#x884C;&#xFF1B;&#x8FD9;&#x662F;&#x4E3A;&#x4E86;&#x4F7F;&#x5F97;&#x5B50;&#x67E5;&#x8BE2;&#x4F18;&#x5148;&#x4E8E;&#x5176;&#x4ED6;&#x88C5;&#x8F7D;&#x8005;&#xFF0C;&#x56E0;&#x4E3A;&#x5176;&#x4ED6;&#x7684;&#x52A0;&#x8F7D;&#x8005;&#x53EF;&#x80FD;&#x5728;&#x9519;&#x8BEF;&#x7684;&#x65F6;&#x95F4;&#x56E0;&#x4E3A;&#x5176;&#x4ED6;&#x7684;&#x9884;&#x5148;/&#x975E;&#x52A0;&#x8F7D;&#x60C5;&#x51B5;&#x800C;&#x89E6;&#x53CA;&#x76F8;&#x540C;&#x7684;&#x5C5E;&#x6027;&#x3002;<a class="changeset-link headerlink reference internal" href="#change-596ed6934e304cb10692a3ddea823f90"></a></span></p><p><span class="yiyi-st" id="yiyi-1045">&#x8FD9;&#x4E2A;&#x6539;&#x53D8;&#x4E5F;&#x88AB;<strong>backported</strong>&#x4FEE;&#x6539;&#x4E3A;&#xFF1A;0.8.5</span></p><p><span class="yiyi-st" id="yiyi-1046">&#x53C2;&#x8003;&#x6587;&#x732E;&#xFF1A;<a class="reference external" href="http://www.sqlalchemy.org/trac/ticket/2887">&#xFF03;2887</a></span></p></li><li><p id="change-0.9.0-4"><span class="yiyi-st" id="yiyi-1047"><span class="target" id="change-73f5c9c3d26dc55718454012b0f6cbd7"><strong>[orm] [bug] </strong></span>Fixed bug when using joined table inheritance from a table to a select/alias on the base, where the PK columns were also not same named; the persistence system would fail to copy primary key values from the base table to the inherited table upon INSERT.<a class="changeset-link headerlink reference internal" href="#change-73f5c9c3d26dc55718454012b0f6cbd7">&#xB6;</a></span></p><p><span class="yiyi-st" id="yiyi-1048">&#x8FD9;&#x4E2A;&#x6539;&#x53D8;&#x4E5F;&#x88AB;<strong>backported</strong>&#x4FEE;&#x6539;&#x4E3A;&#xFF1A;0.8.5</span></p><p><span class="yiyi-st" id="yiyi-1049">&#x53C2;&#x8003;&#x6587;&#x732E;&#xFF1A;<a class="reference external" href="http://www.sqlalchemy.org/trac/ticket/2885">&#xFF03;2885</a></span></p></li><li><p id="change-0.9.0-5"><span class="yiyi-st" id="yiyi-1050"><span class="target" id="change-87f8c9385495cffe875cfa574f7a3063"><strong>[orm] [bug] </strong></span><a class="reference internal" href="orm_composites.html#sqlalchemy.orm.composite" title="sqlalchemy.orm.composite"><code class="xref py py-func docutils literal"><span class="pre">composite()</span></code></a> will raise an informative error message when the columns/attribute (names) passed don&#x2019;t resolve to a Column or mapped attribute (such as an erroneous tuple); previously raised an unbound local.<a class="changeset-link headerlink reference internal" href="#change-87f8c9385495cffe875cfa574f7a3063">&#xB6;</a></span></p><p><span class="yiyi-st" id="yiyi-1051">&#x8FD9;&#x4E2A;&#x6539;&#x53D8;&#x4E5F;&#x88AB;<strong>backported</strong>&#x4FEE;&#x6539;&#x4E3A;&#xFF1A;0.8.5</span></p><p><span class="yiyi-st" id="yiyi-1052">&#x53C2;&#x8003;&#x6587;&#x732E;&#xFF1A;<a class="reference external" href="http://www.sqlalchemy.org/trac/ticket/2889">&#xFF03;2889</a></span></p></li><li><p id="change-0.9.0-6"><span class="yiyi-st" id="yiyi-1053"><span class="target" id="change-a97169e0a5e5a559f46bd8e3f7e58fc4"><strong>[orm] [bug] </strong></span>Fixed a regression introduced by <a class="reference external" href="http://www.sqlalchemy.org/trac/ticket/2818">#2818</a> where the EXISTS query being generated would produce a &#x201C;columns being replaced&#x201D; warning for a statement with two same-named columns, as the internal SELECT wouldn&#x2019;t have use_labels set.<a class="changeset-link headerlink reference internal" href="#change-a97169e0a5e5a559f46bd8e3f7e58fc4">&#xB6;</a></span></p><p><span class="yiyi-st" id="yiyi-1054">&#x8FD9;&#x4E2A;&#x6539;&#x53D8;&#x4E5F;&#x88AB;<strong>backported</strong>&#x4FEE;&#x6539;&#x4E3A;&#xFF1A;0.8.4</span></p><p><span class="yiyi-st" id="yiyi-1055">&#x53C2;&#x8003;&#x6587;&#x732E;&#xFF1A;<a class="reference external" href="http://www.sqlalchemy.org/trac/ticket/2818">&#xFF03;2818</a></span></p></li><li><p id="change-0.9.0-7"><span class="yiyi-st" id="yiyi-1056"><span class="target" id="change-c178432e123c26d95767915cfd94145b"><strong>[orm] [bug] [collections] [py3k] </strong></span>Added support for the Python 3 method <code class="docutils literal"><span class="pre">list.clear()</span></code> within the ORM collection instrumentation system; pull request courtesy Eduardo Schettino.<a class="changeset-link headerlink reference internal" href="#change-c178432e123c26d95767915cfd94145b">&#xB6;</a></span></p><p><span class="yiyi-st" id="yiyi-1057">&#x53C2;&#x8003;&#x6587;&#x732E;&#xFF1A;<a class="reference external" href="https://github.com/zzzeek/sqlalchemy/pull/40">&#x8BF7;&#x6C42;github&#xFF1A;40</a></span></p></li><li><p id="change-0.9.0-8"><span class="yiyi-st" id="yiyi-1058"><span class="target" id="change-524c3fc2a92c716633ad362ee5de0c41"><strong>[orm] [bug] </strong></span>&#x5173;&#x4E8E;&#x63CF;&#x8FF0;&#x7B26;&#x7684;&#x4E00;&#x4E9B;&#x6539;&#x8FDB;&#xFF0C;&#x5982;&#x6DF7;&#x5408;&#xFF0C;&#x540C;&#x4E49;&#x8BCD;&#xFF0C;&#x5408;&#x6210;&#xFF0C;&#x7528;&#x6237;&#x5B9A;&#x4E49;&#x7684;&#x63CF;&#x8FF0;&#x7B26;&#x7B49;&#x3002;<a class="reference internal" href="orm_query.html#sqlalchemy.orm.util.AliasedClass" title="sqlalchemy.orm.util.AliasedClass"><code class="xref py py-class docutils literal"><span class="pre">AliasedClass</span></code></a></span><span class="yiyi-st" id="yiyi-1059">&#x7EE7;&#x7EED;&#x8FDB;&#x884C;&#x7684;&#x5C5E;&#x6027;&#x9002;&#x914D;&#x53D8;&#x5F97;&#x66F4;&#x52A0;&#x5065;&#x58EE;&#xFF0C;&#x4F8B;&#x5982;&#xFF0C;&#x5982;&#x679C;&#x63CF;&#x8FF0;&#x7B26;&#x8FD4;&#x56DE;&#x53E6;&#x4E00;&#x4E2A;&#x63D2;&#x88C5;&#x5C5E;&#x6027;&#xFF0C;&#x800C;&#x4E0D;&#x662F;&#x590D;&#x5408;SQL&#x8868;&#x8FBE;&#x5F0F;&#x5143;&#x7D20;&#xFF0C;&#x5219;&#x64CD;&#x4F5C;&#x4ECD;&#x5C06;&#x7EE7;&#x7EED;&#x3002;</span><span class="yiyi-st" id="yiyi-1060">Addtionally, the &#x201C;adapted&#x201D; operator will retain its class; previously, a change in class from <code class="docutils literal"><span class="pre">InstrumentedAttribute</span></code> to <code class="docutils literal"><span class="pre">QueryableAttribute</span></code> (a superclass) would interact with Python&#x2019;s operator system such that an expression like <code class="docutils literal"><span class="pre">aliased(MyClass.x)</span> <span class="pre">&gt;</span> <span class="pre">MyClass.x</span></code> would reverse itself to read <code class="docutils literal"><span class="pre">myclass.x</span> <span class="pre">&lt;</span> <span class="pre">myclass_1.x</span></code>. </span><span class="yiyi-st" id="yiyi-1061">&#x4FEE;&#x6539;&#x540E;&#x7684;&#x5C5E;&#x6027;&#x4E5F;&#x4F1A;&#x5C06;&#x65B0;&#x7684;<a class="reference internal" href="orm_query.html#sqlalchemy.orm.util.AliasedClass" title="sqlalchemy.orm.util.AliasedClass"><code class="xref py py-class docutils literal"><span class="pre">AliasedClass</span></code></a>&#x4F5C;&#x4E3A;&#x5B83;&#x7684;&#x7236;&#x9879;&#xFF0C;&#x8FD9;&#x5728;&#x4EE5;&#x524D;&#x5E76;&#x4E0D;&#x603B;&#x662F;&#x8FD9;&#x6837;&#x3002;<a class="changeset-link headerlink reference internal" href="#change-524c3fc2a92c716633ad362ee5de0c41">&#xB6;</a></span></p><p><span class="yiyi-st" id="yiyi-1062">&#x53C2;&#x8003;&#x6587;&#x732E;&#xFF1A;<a class="reference external" href="http://www.sqlalchemy.org/trac/ticket/2872">&#xFF03;2872</a></span></p></li><li><p id="change-0.9.0-9"><span class="yiyi-st" id="yiyi-1063"><span class="target" id="change-cd9ee851b4fed4be44aa3357d3ea656e"><strong>[orm] [bug] </strong></span>The <code class="docutils literal"><span class="pre">viewonly</span></code> flag on <a class="reference internal" href="orm_relationship_api.html#sqlalchemy.orm.relationship" title="sqlalchemy.orm.relationship"><code class="xref py py-func docutils literal"><span class="pre">relationship()</span></code></a> will now prevent attribute history from being written on behalf of the target attribute. </span><span class="yiyi-st" id="yiyi-1064">&#x5982;&#x679C;&#x5BF9;&#x8C61;&#x6CA1;&#x6709;&#x88AB;&#x5199;&#x5165;Session.dirty&#x5217;&#x8868;&#xFF0C;&#x5982;&#x679C;&#x5B83;&#x53D1;&#x751F;&#x4E86;&#x53D8;&#x5316;&#xFF0C;&#x8FD9;&#x4F1A;&#x4EA7;&#x751F;&#x5F71;&#x54CD;&#x3002;</span><span class="yiyi-st" id="yiyi-1065">&#x4EE5;&#x524D;&#xFF0C;&#x8BE5;&#x5BF9;&#x8C61;&#x5C06;&#x51FA;&#x73B0;&#x5728;Session.dirty&#x4E2D;&#xFF0C;&#x4F46;&#x5728;&#x5237;&#x65B0;&#x671F;&#x95F4;&#x4E0D;&#x4F1A;&#x53D1;&#x751F;&#x4EE3;&#x8868;&#x4FEE;&#x6539;&#x540E;&#x7684;&#x5C5E;&#x6027;&#x7684;&#x66F4;&#x6539;&#x3002;</span><span class="yiyi-st" id="yiyi-1066">&#x8BE5;&#x5C5E;&#x6027;&#x4ECD;&#x7136;&#x4F1A;&#x53D1;&#x51FA;&#x8BF8;&#x5982;backref&#x4E8B;&#x4EF6;&#x548C;&#x7528;&#x6237;&#x5B9A;&#x4E49;&#x7684;&#x4E8B;&#x4EF6;&#x4E4B;&#x7C7B;&#x7684;&#x4E8B;&#x4EF6;&#xFF0C;&#x5E76;&#x4E14;&#x4ECD;&#x7136;&#x4F1A;&#x4ECE;backrefs&#x4E2D;&#x63A5;&#x6536;&#x5230;&#x7A81;&#x53D8;&#x3002;</span></p><div class="admonition seealso"><p class="first admonition-title"><span class="yiyi-st" id="yiyi-1067">&#x4E5F;&#x53EF;&#x4EE5;&#x770B;&#x770B;</span></p><p class="last"><span class="yiyi-st" id="yiyi-1068"><a class="reference internal" href="migration_09.html#migration-2833"><span>viewonly=True on relationship() prevents history from taking effect</span></a></span></p></div><span class="yiyi-st" id="yiyi-1070"> <a class="changeset-link headerlink reference internal" href="#change-cd9ee851b4fed4be44aa3357d3ea656e">&#xB6;</a></span><p><span class="yiyi-st" id="yiyi-1069">&#x53C2;&#x8003;&#x6587;&#x732E;&#xFF1A;<a class="reference external" href="http://www.sqlalchemy.org/trac/ticket/2833">&#xFF03;2833</a></span></p></li><li><p id="change-0.9.0-10"><span class="yiyi-st" id="yiyi-1071"><span class="target" id="change-57380df483eb4573627dd0c4cc6285b2"><strong>[orm] [bug] </strong></span>&#x6DFB;&#x52A0;&#x4E86;&#x5BF9;&#x65B0;&#x7684;<a class="reference internal" href="orm_session_api.html#sqlalchemy.orm.session.Session.info" title="sqlalchemy.orm.session.Session.info"><code class="xref py py-attr docutils literal"><span class="pre">Session.info</span></code></a>&#x5C5E;&#x6027;&#x5BF9;<a class="reference internal" href="orm_contextual.html#sqlalchemy.orm.scoping.scoped_session" title="sqlalchemy.orm.scoping.scoped_session"><code class="xref py py-class docutils literal"><span class="pre">scoped_session</span></code></a>&#x7684;&#x652F;&#x6301;&#x3002;<a class="changeset-link headerlink reference internal" href="#change-57380df483eb4573627dd0c4cc6285b2">&#xB6;</a></span></p><p></p></li><li><p id="change-0.9.0-11"><span class="yiyi-st" id="yiyi-1072"><span class="target" id="change-74dca08530e2aa7327444a66c6c6d823"><strong>[orm] [bug] </strong></span>Fixed bug where usage of new <a class="reference internal" href="orm_query.html#sqlalchemy.orm.query.Bundle" title="sqlalchemy.orm.query.Bundle"><code class="xref py py-class docutils literal"><span class="pre">Bundle</span></code></a> object would cause the <a class="reference internal" href="orm_query.html#sqlalchemy.orm.query.Query.column_descriptions" title="sqlalchemy.orm.query.Query.column_descriptions"><code class="xref py py-attr docutils literal"><span class="pre">Query.column_descriptions</span></code></a> attribute to fail.<a class="changeset-link headerlink reference internal" href="#change-74dca08530e2aa7327444a66c6c6d823">&#xB6;</a></span></p><p></p></li><li><p id="change-0.9.0-12"><span class="yiyi-st" id="yiyi-1073"><span class="target" id="change-17f42ee3eb7206b1653e3a04460ff2a5"><strong>[orm] [bug] [sqlite] [sql] </strong></span>Fixed a regression introduced by the join rewriting feature of <a class="reference external" href="http://www.sqlalchemy.org/trac/ticket/2369">#2369</a> and <a class="reference external" href="http://www.sqlalchemy.org/trac/ticket/2587">#2587</a> where a nested join with one side already an aliased select would fail to translate the ON clause on the outside correctly; in the ORM this could be seen when using a SELECT statement as a &#x201C;secondary&#x201D; table.<a class="changeset-link headerlink reference internal" href="#change-17f42ee3eb7206b1653e3a04460ff2a5">&#xB6;</a></span></p><p><span class="yiyi-st" id="yiyi-1074">&#x53C2;&#x8003;&#x6587;&#x732E;&#xFF1A;<a class="reference external" href="http://www.sqlalchemy.org/trac/ticket/2858">&#xFF03;2858</a></span></p></li></ul></div><div class="section" id="change-0.9.0-orm-declarative"><h3><span class="yiyi-st" id="yiyi-1075">orm declarative <a class="headerlink" href="#change-0.9.0-orm-declarative" title="Permalink to this headline">&#xB6;</a></span></h3><ul class="simple"><li><p id="change-0.9.0-13"><span class="yiyi-st" id="yiyi-1076"><span class="target" id="change-2160db7c02e08d3477c32ebfe806bf14"><strong>[bug] [orm] [declarative] </strong></span>Declarative does an extra check to detect if the same <a class="reference internal" href="core_metadata.html#sqlalchemy.schema.Column" title="sqlalchemy.schema.Column"><code class="xref py py-class docutils literal"><span class="pre">Column</span></code></a> is mapped multiple times under different properties (which typically should be a <a class="reference internal" href="orm_mapped_attributes.html#sqlalchemy.orm.synonym" title="sqlalchemy.orm.synonym"><code class="xref py py-func docutils literal"><span class="pre">synonym()</span></code></a> instead) or if two or more <a class="reference internal" href="core_metadata.html#sqlalchemy.schema.Column" title="sqlalchemy.schema.Column"><code class="xref py py-class docutils literal"><span class="pre">Column</span></code></a> objects are given the same name, raising a warning if this condition is detected.<a class="changeset-link headerlink reference internal" href="#change-2160db7c02e08d3477c32ebfe806bf14">&#xB6;</a></span></p><p><span class="yiyi-st" id="yiyi-1077">&#x53C2;&#x8003;&#x6587;&#x732E;&#xFF1A;<a class="reference external" href="http://www.sqlalchemy.org/trac/ticket/2828">&#xFF03;2828</a></span></p></li><li><p id="change-0.9.0-14"><span class="yiyi-st" id="yiyi-1078"><span class="target" id="change-93a22c24dfcd871c8f872616c98d3b23"><strong>[bug] [orm] [declarative] </strong></span>&#x5DF2;&#x7ECF;&#x589E;&#x5F3A;&#x4E86;<a class="reference internal" href="orm_extensions_declarative_api.html#sqlalchemy.ext.declarative.DeferredReflection" title="sqlalchemy.ext.declarative.DeferredReflection"><code class="xref py py-class docutils literal"><span class="pre">DeferredReflection</span></code></a>&#x7C7B;&#xFF0C;&#x4EE5;&#x4FBF;&#x4E3A;<a class="reference internal" href="orm_relationship_api.html#sqlalchemy.orm.relationship" title="sqlalchemy.orm.relationship"><code class="xref py py-func docutils literal"><span class="pre">relationship()</span></code></a></span><span class="yiyi-st" id="yiyi-1079">&#x201C;secondary&#x201D;, when specified either as a string table name, or as a <a class="reference internal" href="core_metadata.html#sqlalchemy.schema.Table" title="sqlalchemy.schema.Table"><code class="xref py py-class docutils literal"><span class="pre">Table</span></code></a> object with only a name and <a class="reference internal" href="core_metadata.html#sqlalchemy.schema.MetaData" title="sqlalchemy.schema.MetaData"><code class="xref py py-class docutils literal"><span class="pre">MetaData</span></code></a> object will also be included in the reflection process when <a class="reference internal" href="orm_extensions_declarative_api.html#sqlalchemy.ext.declarative.DeferredReflection.prepare" title="sqlalchemy.ext.declarative.DeferredReflection.prepare"><code class="xref py py-meth docutils literal"><span class="pre">DeferredReflection.prepare()</span></code></a> is called.<a class="changeset-link headerlink reference internal" href="#change-93a22c24dfcd871c8f872616c98d3b23">&#xB6;</a></span></p><p><span class="yiyi-st" id="yiyi-1080">&#x53C2;&#x8003;&#x6587;&#x732E;&#xFF1A;<a class="reference external" href="http://www.sqlalchemy.org/trac/ticket/2865">&#xFF03;2865</a></span></p></li><li><p id="change-0.9.0-15"><span class="yiyi-st" id="yiyi-1081">&#x4FEE;&#x6B63;&#x4E86;&#x5728;Py2K&#x4E2D;&#x4F7F;&#x7528;<a class="reference internal" href="orm_relationship_api.html#sqlalchemy.orm.relationship" title="sqlalchemy.orm.relationship"><code class="xref py py-func docutils literal"><span class="pre">relationship()</span></code></a>&#x65F6;&#xFF0C;unicode&#x6587;&#x5B57;&#x4E0D;&#x4F1A;&#x88AB;&#x63A5;&#x53D7;&#x4E3A;&#x58F0;&#x660E;&#x5F0F;&#x4E2D;&#x7C7B;&#x6216;&#x5176;&#x4ED6;&#x53C2;&#x6570;&#x7684;&#x5B57;&#x7B26;&#x4E32;&#x540D;&#x79F0;&#x7684;&#x9519;&#x8BEF;&#x3002;<span class="target" id="change-abd40b717be4a66e010edbce0f8dacb6"><strong>[bug] [orm] [declarative] </strong></span> &gt; <a class="changeset-link headerlink reference internal" href="#change-abd40b717be4a66e010edbce0f8dacb6">&#xB6; T5&gt;</a></span></p><p></p></li></ul></div><div class="section" id="change-0.9.0-engine"><h3><span class="yiyi-st" id="yiyi-1082">&#x53D1;&#x52A8;&#x673A;<a class="headerlink" href="#change-0.9.0-engine" title="Permalink to this headline">&#xB6; T0&gt;</a></span></h3><ul class="simple"><li><p id="change-0.9.0-16"><span class="yiyi-st" id="yiyi-1083"><span class="target" id="change-9e964e2f4332755c2be06fb8dfad0052"><strong>[engine] [feature] </strong></span>The <a class="reference internal" href="core_engines.html#sqlalchemy.engine_from_config" title="sqlalchemy.engine_from_config"><code class="xref py py-func docutils literal"><span class="pre">engine_from_config()</span></code></a> function has been improved so that we will be able to parse dialect-specific arguments from string configuration dictionaries. </span><span class="yiyi-st" id="yiyi-1084">&#x65B9;&#x8A00;&#x7C7B;&#x73B0;&#x5728;&#x53EF;&#x4EE5;&#x63D0;&#x4F9B;&#x81EA;&#x5DF1;&#x7684;&#x53C2;&#x6570;&#x7C7B;&#x578B;&#x548C;&#x5B57;&#x7B26;&#x4E32;&#x8F6C;&#x6362;&#x4F8B;&#x7A0B;&#x5217;&#x8868;&#x3002;</span><span class="yiyi-st" id="yiyi-1085">&#x4F46;&#x662F;&#xFF0C;&#x5185;&#x7F6E;&#x65B9;&#x8A00;&#x5C1A;&#x672A;&#x4F7F;&#x7528;&#x8BE5;&#x529F;&#x80FD;&#x3002;<a class="changeset-link headerlink reference internal" href="#change-9e964e2f4332755c2be06fb8dfad0052">&#xB6;</a></span></p><p><span class="yiyi-st" id="yiyi-1086">&#x53C2;&#x8003;&#x6587;&#x732E;&#xFF1A;<a class="reference external" href="http://www.sqlalchemy.org/trac/ticket/2875">&#xFF03;2875</a></span></p></li><li><p id="change-0.9.0-17"><span class="yiyi-st" id="yiyi-1087"><span class="target" id="change-b41267634efb6a5162eca78021998f59"><strong>[engine] [bug] </strong></span>A DBAPI that raises an error on <code class="docutils literal"><span class="pre">connect()</span></code> which is not a subclass of dbapi.Error (such as <code class="docutils literal"><span class="pre">TypeError</span></code>, <code class="docutils literal"><span class="pre">NotImplementedError</span></code>, etc.) </span><span class="yiyi-st" id="yiyi-1088">&#x5C06;&#x4E0D;&#x4F1A;&#x4F20;&#x64AD;&#x5F02;&#x5E38;&#x3002;</span><span class="yiyi-st" id="yiyi-1089">&#x4EE5;&#x524D;&#xFF0C;&#x7279;&#x5B9A;&#x4E8E;<code class="docutils literal"><span class="pre">connect()</span></code>&#x4F8B;&#x7A0B;&#x7684;&#x9519;&#x8BEF;&#x5904;&#x7406;&#x5C06;&#x901A;&#x8FC7;&#x65B9;&#x8A00;&#x7684;<a class="reference internal" href="core_internals.html#sqlalchemy.engine.interfaces.Dialect.is_disconnect" title="sqlalchemy.engine.interfaces.Dialect.is_disconnect"><code class="xref py py-meth docutils literal"><span class="pre">Dialect.is_disconnect()</span></code></a>&#x4F8B;&#x7A0B;&#x9519;&#x8BEF;&#x5730;&#x8FD0;&#x884C;&#x5F02;&#x5E38;&#xFF0C;&#x5E76;&#x5C06;&#x5176;&#x5305;&#x88C5;&#x5728;<a class="reference internal" href="core_exceptions.html#sqlalchemy.exc.DBAPIError" title="sqlalchemy.exc.DBAPIError"><code class="xref py py-class docutils literal"><span class="pre">sqlalchemy.exc.DBAPIError</span></code></a></span><span class="yiyi-st" id="yiyi-1090">&#x5B83;&#x73B0;&#x5728;&#x4EE5;&#x4E0E;&#x6267;&#x884C;&#x8FC7;&#x7A0B;&#x4E2D;&#x53D1;&#x751F;&#x7684;&#x76F8;&#x540C;&#x7684;&#x65B9;&#x5F0F;&#x4F20;&#x64AD;&#x3002;<a class="changeset-link headerlink reference internal" href="#change-b41267634efb6a5162eca78021998f59">&#xB6;</a></span></p><p><span class="yiyi-st" id="yiyi-1091">&#x8FD9;&#x4E2A;&#x6539;&#x53D8;&#x4E5F;&#x88AB;<strong>backported</strong>&#x4FEE;&#x6539;&#x4E3A;&#xFF1A;0.8.4</span></p><p><span class="yiyi-st" id="yiyi-1092">&#x53C2;&#x8003;&#x6587;&#x732E;&#xFF1A;<a class="reference external" href="http://www.sqlalchemy.org/trac/ticket/2881">&#xFF03;2881</a></span></p></li><li><p id="change-0.9.0-18"><span class="yiyi-st" id="yiyi-1093"><span class="target" id="change-af2f363b02c9b82d6729e8e1c808d636"><strong>[engine] [bug] [pool] </strong></span>The <a class="reference internal" href="core_pooling.html#sqlalchemy.pool.QueuePool" title="sqlalchemy.pool.QueuePool"><code class="xref py py-class docutils literal"><span class="pre">QueuePool</span></code></a> has been enhanced to not block new connection attempts when an existing connection attempt is blocking. </span><span class="yiyi-st" id="yiyi-1094">&#x4EE5;&#x524D;&#xFF0C;&#x5728;&#x76D1;&#x63A7;&#x6EA2;&#x51FA;&#x7684;&#x5757;&#x4E2D;&#xFF0C;&#x65B0;&#x8FDE;&#x63A5;&#x7684;&#x4EA7;&#x751F;&#x88AB;&#x4E32;&#x884C;&#x5316;&#xFF1B;&#x6EA2;&#x51FA;&#x8BA1;&#x6570;&#x5668;&#x73B0;&#x5728;&#x5728;&#x8FDE;&#x63A5;&#x8FC7;&#x7A0B;&#x672C;&#x8EAB;&#x4E4B;&#x5916;&#x7684;&#x5176;&#x81EA;&#x5DF1;&#x7684;&#x4E34;&#x754C;&#x533A;&#x5185;&#x88AB;&#x6539;&#x53D8;&#x3002;<a class="changeset-link headerlink reference internal" href="#change-af2f363b02c9b82d6729e8e1c808d636">&#xB6;</a></span></p><p><span class="yiyi-st" id="yiyi-1095">&#x8FD9;&#x4E2A;&#x6539;&#x53D8;&#x4E5F;&#x88AB;<strong>backported</strong>&#x4FEE;&#x6539;&#x4E3A;&#xFF1A;0.8.4</span></p><p><span class="yiyi-st" id="yiyi-1096">&#x53C2;&#x8003;&#x6587;&#x732E;&#xFF1A;<a class="reference external" href="http://www.sqlalchemy.org/trac/ticket/2880">&#xFF03;2880</a></span></p></li><li><p id="change-0.9.0-19"><span class="yiyi-st" id="yiyi-1097"><span class="target" id="change-33f71100778b84fb526ebd50c7e9468d"><strong>[engine] [bug] [pool] </strong></span>Made a slight adjustment to the logic which waits for a pooled connection to be available, such that for a connection pool with no timeout specified, it will every half a second break out of the wait to check for the so-called &#x201C;abort&#x201D; flag, which allows the waiter to break out in case the whole connection pool was dumped; normally the waiter should break out due to a notify_all() but it&#x2019;s possible this notify_all() is missed in very slim cases. </span><span class="yiyi-st" id="yiyi-1098">&#x8FD9;&#x662F;&#x5728;0.8.0&#x4E2D;&#x9996;&#x6B21;&#x5F15;&#x5165;&#x7684;&#x903B;&#x8F91;&#x7684;&#x6269;&#x5C55;&#xFF0C;&#x8FD9;&#x4E2A;&#x95EE;&#x9898;&#x5076;&#x5C14;&#x4F1A;&#x5728;&#x538B;&#x529B;&#x6D4B;&#x8BD5;&#x4E2D;&#x88AB;&#x89C2;&#x5BDF;&#x5230;&#x3002;<a class="changeset-link headerlink reference internal" href="#change-33f71100778b84fb526ebd50c7e9468d">&#xB6;</a></span></p><p><span class="yiyi-st" id="yiyi-1099">&#x8FD9;&#x4E2A;&#x6539;&#x53D8;&#x4E5F;&#x88AB;<strong>backported</strong>&#x4FEE;&#x6539;&#x4E3A;&#xFF1A;0.8.4</span></p><p><span class="yiyi-st" id="yiyi-1100">&#x53C2;&#x8003;&#x6587;&#x732E;&#xFF1A;<a class="reference external" href="http://www.sqlalchemy.org/trac/ticket/2522">&#xFF03;2522</a></span></p></li><li><p id="change-0.9.0-20"><span class="yiyi-st" id="yiyi-1101"><span class="target" id="change-d789c97206bbfdf6d74064846660d3db"><strong>[engine] [bug] </strong></span>Fixed bug where SQL statement would be improperly ASCII-encoded when a pre-DBAPI <a class="reference internal" href="core_exceptions.html#sqlalchemy.exc.StatementError" title="sqlalchemy.exc.StatementError"><code class="xref py py-class docutils literal"><span class="pre">StatementError</span></code></a> were raised within <a class="reference internal" href="core_connections.html#sqlalchemy.engine.Connection.execute" title="sqlalchemy.engine.Connection.execute"><code class="xref py py-meth docutils literal"><span class="pre">Connection.execute()</span></code></a>, causing encoding errors for non-ASCII statements. </span><span class="yiyi-st" id="yiyi-1102">&#x5B57;&#x7B26;&#x4E32;&#x5316;&#x73B0;&#x5728;&#x4FDD;&#x7559;&#x5728;Python unicode&#x4E2D;&#xFF0C;&#x4ECE;&#x800C;&#x907F;&#x514D;&#x7F16;&#x7801;&#x9519;&#x8BEF;&#x3002;<a class="changeset-link headerlink reference internal" href="#change-d789c97206bbfdf6d74064846660d3db">&#xB6;</a></span></p><p><span class="yiyi-st" id="yiyi-1103">&#x8FD9;&#x4E2A;&#x6539;&#x53D8;&#x4E5F;&#x88AB;<strong>backported</strong>&#x4FEE;&#x6539;&#x4E3A;&#xFF1A;0.8.4</span></p><p><span class="yiyi-st" id="yiyi-1104">&#x53C2;&#x8003;&#x6587;&#x732E;&#xFF1A;<a class="reference external" href="http://www.sqlalchemy.org/trac/ticket/2871">&#xFF03;2871</a></span></p></li><li><p id="change-0.9.0-21"><span class="yiyi-st" id="yiyi-1105"><span class="target" id="change-54ee80068e58a88b092a47a6ddd0353d"><strong>[engine] [bug] </strong></span>The <a class="reference internal" href="core_engines.html#sqlalchemy.create_engine" title="sqlalchemy.create_engine"><code class="xref py py-func docutils literal"><span class="pre">create_engine()</span></code></a> routine and the related <a class="reference internal" href="core_engines.html#sqlalchemy.engine.url.make_url" title="sqlalchemy.engine.url.make_url"><code class="xref py py-func docutils literal"><span class="pre">make_url()</span></code></a> function no longer considers the <code class="docutils literal"><span class="pre">+</span></code> sign to be a space within the password field. </span><span class="yiyi-st" id="yiyi-1106">&#x89E3;&#x6790;&#x5DF2;&#x7ECF;&#x4E0E;RFC 1738&#x5B8C;&#x5168;&#x5339;&#x914D;&#xFF0C;&#x56E0;&#x4E3A;<code class="docutils literal"><span class="pre">username</span></code>&#x548C;<code class="docutils literal"><span class="pre">password</span></code>&#x53EA;&#x6709;<code class="docutils literal"><span class="pre">:</span></code>&#xFF0C;<code class="docutils literal"><span class="pre">@</span></code> &#xFF0C;&#x548C;<code class="docutils literal"><span class="pre">/</span></code>&#x8FDB;&#x884C;&#x7F16;&#x7801;&#x3002;</span></p><div class="admonition seealso"><p class="first admonition-title"><span class="yiyi-st" id="yiyi-1107">&#x4E5F;&#x53EF;&#x4EE5;&#x770B;&#x770B;</span></p><p class="last"><span class="yiyi-st" id="yiyi-1108"><a class="reference internal" href="migration_09.html#migration-2873"><span>The &#x201C;password&#x201D; portion of a create_engine() no longer considers the + sign as an encoded space</span></a></span></p></div><span class="yiyi-st" id="yiyi-1110"> <a class="changeset-link headerlink reference internal" href="#change-54ee80068e58a88b092a47a6ddd0353d">&#xB6;</a></span><p><span class="yiyi-st" id="yiyi-1109">&#x53C2;&#x8003;&#x6587;&#x732E;&#xFF1A;<a class="reference external" href="http://www.sqlalchemy.org/trac/ticket/2873">&#xFF03;2873</a></span></p></li><li><p id="change-0.9.0-22"><span class="yiyi-st" id="yiyi-1111"><span class="target" id="change-cc0ce586ee4b6d177eb5504dadba1feb"><strong>[engine] [bug] </strong></span>The <a class="reference internal" href="core_connections.html#sqlalchemy.engine.RowProxy" title="sqlalchemy.engine.RowProxy"><code class="xref py py-class docutils literal"><span class="pre">RowProxy</span></code></a> object is now sortable in Python as a regular tuple is; this is accomplished via ensuring tuple() conversion on both sides within the <code class="docutils literal"><span class="pre">__eq__()</span></code> method as well as the addition of a <code class="docutils literal"><span class="pre">__lt__()</span></code> method.</span></p><div class="admonition seealso"><p class="first admonition-title"><span class="yiyi-st" id="yiyi-1112">&#x4E5F;&#x53EF;&#x4EE5;&#x770B;&#x770B;</span></p><p class="last"><span class="yiyi-st" id="yiyi-1113"><a class="reference internal" href="migration_09.html#migration-2848"><span>RowProxy now has tuple-sorting behavior</span></a></span></p></div><span class="yiyi-st" id="yiyi-1115"> <a class="changeset-link headerlink reference internal" href="#change-cc0ce586ee4b6d177eb5504dadba1feb">&#xB6;</a></span><p><span class="yiyi-st" id="yiyi-1114">&#x53C2;&#x8003;&#x6587;&#x732E;&#xFF1A;<a class="reference external" href="http://www.sqlalchemy.org/trac/ticket/2848">&#xFF03;2848</a></span></p></li></ul></div><div class="section" id="change-0.9.0-sql"><h3><span class="yiyi-st" id="yiyi-1116">SQL <a class="headerlink" href="#change-0.9.0-sql" title="Permalink to this headline">&#xB6; T0&gt;</a></span></h3><ul class="simple"><li><p id="change-0.9.0-23"><span class="yiyi-st" id="yiyi-1117"><span class="target" id="change-434eede0d7c5ab434a2634bb1c477426"><strong>[sql] [feature] </strong></span>New improvements to the <a class="reference internal" href="core_sqlelement.html#sqlalchemy.sql.expression.text" title="sqlalchemy.sql.expression.text"><code class="xref py py-func docutils literal"><span class="pre">text()</span></code></a> construct, including more flexible ways to set up bound parameters and return types; in particular, a <a class="reference internal" href="core_sqlelement.html#sqlalchemy.sql.expression.text" title="sqlalchemy.sql.expression.text"><code class="xref py py-func docutils literal"><span class="pre">text()</span></code></a> can now be turned into a full FROM-object, embeddable in other statements as an alias or CTE using the new method <a class="reference internal" href="core_sqlelement.html#sqlalchemy.sql.expression.TextClause.columns" title="sqlalchemy.sql.expression.TextClause.columns"><code class="xref py py-meth docutils literal"><span class="pre">TextClause.columns()</span></code></a>. </span><span class="yiyi-st" id="yiyi-1118">&#x5F53;&#x6784;&#x9020;&#x4F53;&#x5728;&#x201C;&#x6587;&#x5B57;&#x8FB9;&#x754C;&#x201D;&#x4E0A;&#x4E0B;&#x6587;&#x4E2D;&#x7F16;&#x8BD1;&#x65F6;&#xFF0C;<a class="reference internal" href="core_sqlelement.html#sqlalchemy.sql.expression.text" title="sqlalchemy.sql.expression.text"><code class="xref py py-func docutils literal"><span class="pre">text()</span></code></a>&#x7ED3;&#x6784;&#x4E5F;&#x53EF;&#x4EE5;&#x5448;&#x73B0;&#x201C;&#x5185;&#x8054;&#x201D;&#x8FB9;&#x754C;&#x53C2;&#x6570;&#x3002;</span></p><div class="admonition seealso"><p class="first admonition-title"><span class="yiyi-st" id="yiyi-1119">&#x4E5F;&#x53EF;&#x4EE5;&#x770B;&#x770B;</span></p><p class="last"><span class="yiyi-st" id="yiyi-1120"><a class="reference internal" href="migration_09.html#feature-2877"><span>New text() Capabilities</span></a></span></p></div><span class="yiyi-st" id="yiyi-1122"> <a class="changeset-link headerlink reference internal" href="#change-434eede0d7c5ab434a2634bb1c477426">&#xB6;</a></span><p><span class="yiyi-st" id="yiyi-1121">&#x53C2;&#x8003;&#x6587;&#x732E;&#xFF1A;<a class="reference external" href="http://www.sqlalchemy.org/trac/ticket/2882">&#xFF03;2882</a>&#xFF0C;<a class="reference external" href="http://www.sqlalchemy.org/trac/ticket/2877">&#xFF03;2877</a></span></p></li><li><p id="change-0.9.0-24"><span class="yiyi-st" id="yiyi-1123"><span class="target" id="change-80575a82c6ca1e11cdf9bba117d2a012"><strong>[sql] [feature] </strong></span>A new API for specifying the <code class="docutils literal"><span class="pre">FOR</span> <span class="pre">UPDATE</span></code> clause of a <code class="docutils literal"><span class="pre">SELECT</span></code> is added with the new <a class="reference internal" href="core_selectable.html#sqlalchemy.sql.expression.GenerativeSelect.with_for_update" title="sqlalchemy.sql.expression.GenerativeSelect.with_for_update"><code class="xref py py-meth docutils literal"><span class="pre">GenerativeSelect.with_for_update()</span></code></a> method. </span><span class="yiyi-st" id="yiyi-1124">This method supports a more straightforward system of setting dialect-specific options compared to the <code class="docutils literal"><span class="pre">for_update</span></code> keyword argument of <a class="reference internal" href="core_selectable.html#sqlalchemy.sql.expression.select" title="sqlalchemy.sql.expression.select"><code class="xref py py-func docutils literal"><span class="pre">select()</span></code></a>, and also includes support for the SQL standard <code class="docutils literal"><span class="pre">FOR</span> <span class="pre">UPDATE</span> <span class="pre">OF</span></code> clause. </span><span class="yiyi-st" id="yiyi-1125">ORM&#x8FD8;&#x5305;&#x542B;&#x4E00;&#x4E2A;&#x65B0;&#x7684;&#x76F8;&#x5E94;&#x65B9;&#x6CD5;<a class="reference internal" href="orm_query.html#sqlalchemy.orm.query.Query.with_for_update" title="sqlalchemy.orm.query.Query.with_for_update"><code class="xref py py-meth docutils literal"><span class="pre">Query.with_for_update()</span></code></a>&#x3002;</span><span class="yiyi-st" id="yiyi-1126">&#x8BF7;&#x6C42;&#x63D0;&#x4F9B;Mario Lassnig&#x63D0;&#x4F9B;&#x7684;&#x8BF7;&#x6C42;&#x3002;</span></p><div class="admonition seealso"><p class="first admonition-title"><span class="yiyi-st" id="yiyi-1127">&#x4E5F;&#x53EF;&#x4EE5;&#x770B;&#x770B;</span></p><p class="last"><span class="yiyi-st" id="yiyi-1128"><a class="reference internal" href="migration_09.html#feature-github-42"><span>New FOR UPDATE support on select(), Query()</span></a>&#x4E0A;&#x7684;&#x65B0;FOR UPDATE&#x652F;&#x6301;</span></p></div><span class="yiyi-st" id="yiyi-1130"> <a class="changeset-link headerlink reference internal" href="#change-80575a82c6ca1e11cdf9bba117d2a012">&#xB6;</a></span><p><span class="yiyi-st" id="yiyi-1129">&#x53C2;&#x8003;&#x6587;&#x732E;&#xFF1A;<a class="reference external" href="https://github.com/zzzeek/sqlalchemy/pull/42">&#x8BF7;&#x6C42;github&#xFF1A;42</a></span></p></li><li><p id="change-0.9.0-25"><span class="yiyi-st" id="yiyi-1131"><span class="target" id="change-b05ab8cbc93a69cb1072bcae721b4ec6"><strong>[sql] [feature] </strong></span>&#x901A;&#x8FC7;&#x5B57;&#x7B26;&#x4E32;&#x5C06;&#x8FD4;&#x56DE;&#x7684;&#x6D6E;&#x70B9;&#x503C;&#x5F3A;&#x5236;&#x8F6C;&#x6362;&#x4E3A;Python <code class="docutils literal"><span class="pre">Decimal</span></code>&#x65F6;&#x4F7F;&#x7528;&#x7684;&#x7CBE;&#x5EA6;&#x73B0;&#x5728;&#x53EF;&#x914D;&#x7F6E;&#x3002;</span><span class="yiyi-st" id="yiyi-1132">The flag <code class="docutils literal"><span class="pre">decimal_return_scale</span></code> is now supported by all <a class="reference internal" href="core_type_basics.html#sqlalchemy.types.Numeric" title="sqlalchemy.types.Numeric"><code class="xref py py-class docutils literal"><span class="pre">Numeric</span></code></a> and <a class="reference internal" href="core_type_basics.html#sqlalchemy.types.Float" title="sqlalchemy.types.Float"><code class="xref py py-class docutils literal"><span class="pre">Float</span></code></a> types, which will ensure this many digits are taken from the native floating point value when it is converted to string. </span><span class="yiyi-st" id="yiyi-1133">&#x5982;&#x679C;&#x4E0D;&#x5B58;&#x5728;&#xFF0C;&#x5219;&#x8BE5;&#x7C7B;&#x578B;&#x5C06;&#x4F7F;&#x7528;<code class="docutils literal"><span class="pre">.scale</span></code>&#x7684;&#x503C;&#xFF0C;&#x5982;&#x679C;&#x7C7B;&#x578B;&#x652F;&#x6301;&#x6B64;&#x8BBE;&#x7F6E;&#x5E76;&#x4E14;&#x5B83;&#x4E0D;&#x662F;None&#x3002;</span><span class="yiyi-st" id="yiyi-1134">&#x5426;&#x5219;&#xFF0C;&#x4F7F;&#x7528;&#x539F;&#x59CB;&#x7684;&#x9ED8;&#x8BA4;&#x957F;&#x5EA6;10&#x3002;</span></p><div class="admonition seealso"><p class="first admonition-title"><span class="yiyi-st" id="yiyi-1135">&#x4E5F;&#x53EF;&#x4EE5;&#x770B;&#x770B;</span></p><p class="last"><span class="yiyi-st" id="yiyi-1136"><a class="reference internal" href="migration_09.html#feature-2867"><span>Floating Point String-Conversion Precision Configurable for Native Floating Point Types</span></a></span></p></div><span class="yiyi-st" id="yiyi-1138"> <a class="changeset-link headerlink reference internal" href="#change-b05ab8cbc93a69cb1072bcae721b4ec6">&#xB6;</a></span><p><span class="yiyi-st" id="yiyi-1137">&#x53C2;&#x8003;&#x6587;&#x732E;&#xFF1A;<a class="reference external" href="http://www.sqlalchemy.org/trac/ticket/2867">&#xFF03;2867</a></span></p></li><li><p id="change-0.9.0-26"><span class="yiyi-st" id="yiyi-1139"><span class="target" id="change-17f346ee6ecd1268fbc24fa52ca6fbb7"><strong>[sql] [bug] </strong></span>Fixed issue where a primary key column that has a Sequence on it, yet the column is not the &#x201C;auto increment&#x201D; column, either because it has a foreign key constraint or <code class="docutils literal"><span class="pre">autoincrement=False</span></code> set, would attempt to fire the Sequence on INSERT for backends that don&#x2019;t support sequences, when presented with an INSERT missing the primary key value. </span><span class="yiyi-st" id="yiyi-1140">&#x8FD9;&#x5C06;&#x53D1;&#x751F;&#x5728;&#x50CF;SQLite&#xFF0C;MySQL&#x8FD9;&#x6837;&#x7684;&#x975E;&#x5E8F;&#x5217;&#x540E;&#x7AEF;&#x4E0A;&#x3002;<a class="changeset-link headerlink reference internal" href="#change-17f346ee6ecd1268fbc24fa52ca6fbb7">&#xB6;</a></span></p><p><span class="yiyi-st" id="yiyi-1141">&#x8FD9;&#x4E2A;&#x6539;&#x53D8;&#x4E5F;&#x88AB;<strong>backported</strong>&#x4FEE;&#x6539;&#x4E3A;&#xFF1A;0.8.5</span></p><p><span class="yiyi-st" id="yiyi-1142">&#x53C2;&#x8003;&#x6587;&#x732E;&#xFF1A;<a class="reference external" href="http://www.sqlalchemy.org/trac/ticket/2896">&#xFF03;2896</a></span></p></li><li><p id="change-0.9.0-27"><span class="yiyi-st" id="yiyi-1143"><span class="target" id="change-8201a57e8a671eba9a5e14fb1d129e71"><strong>[sql] [bug] </strong></span>Fixed bug with <a class="reference internal" href="core_dml.html#sqlalchemy.sql.expression.Insert.from_select" title="sqlalchemy.sql.expression.Insert.from_select"><code class="xref py py-meth docutils literal"><span class="pre">Insert.from_select()</span></code></a> method where the order of the given names would not be taken into account when generating the INSERT statement, thus producing a mismatch versus the column names in the given SELECT statement. </span><span class="yiyi-st" id="yiyi-1144">&#x8FD8;&#x6CE8;&#x610F;&#x5230;<a class="reference internal" href="core_dml.html#sqlalchemy.sql.expression.Insert.from_select" title="sqlalchemy.sql.expression.Insert.from_select"><code class="xref py py-meth docutils literal"><span class="pre">Insert.from_select()</span></code></a>&#x610F;&#x5473;&#x7740;&#x4E0D;&#x80FD;&#x4F7F;&#x7528;Python&#x7AEF;&#x63D2;&#x5165;&#x9ED8;&#x8BA4;&#x503C;&#xFF0C;&#x56E0;&#x4E3A;&#x8BE5;&#x8BED;&#x53E5;&#x6CA1;&#x6709;VALUES&#x5B50;&#x53E5;&#x3002;<a class="changeset-link headerlink reference internal" href="#change-8201a57e8a671eba9a5e14fb1d129e71">&#xB6;</a></span></p><p><span class="yiyi-st" id="yiyi-1145">&#x8FD9;&#x4E2A;&#x6539;&#x53D8;&#x4E5F;&#x88AB;<strong>backported</strong>&#x4FEE;&#x6539;&#x4E3A;&#xFF1A;0.8.5</span></p><p><span class="yiyi-st" id="yiyi-1146">&#x53C2;&#x8003;&#x6587;&#x732E;&#xFF1A;<a class="reference external" href="http://www.sqlalchemy.org/trac/ticket/2895">&#xFF03;2895</a></span></p></li><li><p id="change-0.9.0-28"><span class="yiyi-st" id="yiyi-1147"><span class="target" id="change-dd267693c4318fbd71e8ff2f00c3839c"><strong>[sql] [bug] </strong></span>The <a class="reference internal" href="core_sqlelement.html#sqlalchemy.sql.expression.cast" title="sqlalchemy.sql.expression.cast"><code class="xref py py-func docutils literal"><span class="pre">cast()</span></code></a> function, when given a plain literal value, will now apply the given type to the given literal value on the bind parameter side according to the type given to the cast, in the same manner as that of the <a class="reference internal" href="core_sqlelement.html#sqlalchemy.sql.expression.type_coerce" title="sqlalchemy.sql.expression.type_coerce"><code class="xref py py-func docutils literal"><span class="pre">type_coerce()</span></code></a> function. </span><span class="yiyi-st" id="yiyi-1148">&#x7136;&#x800C;&#xFF0C;&#x4E0E;<a class="reference internal" href="core_sqlelement.html#sqlalchemy.sql.expression.type_coerce" title="sqlalchemy.sql.expression.type_coerce"><code class="xref py py-func docutils literal"><span class="pre">type_coerce()</span></code></a>&#x4E0D;&#x540C;&#xFF0C;&#x53EA;&#x6709;&#x5F53;&#x975E;&#x5B50;&#x53E5;&#x5143;&#x7D20;&#x503C;&#x4F20;&#x9012;&#x7ED9;<a class="reference internal" href="core_sqlelement.html#sqlalchemy.sql.expression.cast" title="sqlalchemy.sql.expression.cast"><code class="xref py py-func docutils literal"><span class="pre">cast()</span></code></a>&#x65F6;&#x624D;&#x4F1A;&#x751F;&#x6548;&#x3002;&#x4E00;&#x4E2A;&#x73B0;&#x6709;&#x7684;&#x7C7B;&#x578B;&#x5316;&#x6784;&#x9020;&#x5C06;&#x4FDD;&#x7559;&#x5176;&#x7C7B;&#x578B;&#x3002;<a class="changeset-link headerlink reference internal" href="#change-dd267693c4318fbd71e8ff2f00c3839c">&#xB6;</a></span></p><p></p></li><li><p id="change-0.9.0-29"><span class="yiyi-st" id="yiyi-1149"><a class="reference internal" href="core_constraints.html#sqlalchemy.schema.ForeignKey" title="sqlalchemy.schema.ForeignKey"><code class="xref py py-class docutils literal"><span class="pre">ForeignKey</span></code></a>&#x7C7B;&#x66F4;&#x79EF;&#x6781;&#x5730;&#x68C0;&#x67E5;&#x7ED9;&#x5B9A;&#x7684;&#x5217;&#x53C2;&#x6570;&#x3002;<span class="target" id="change-8089bd064566ab520c8d752d8f44b7ea"><strong>[sql] [bug] </strong></span></span><span class="yiyi-st" id="yiyi-1150">&#x5982;&#x679C;&#x4E0D;&#x662F;&#x5B57;&#x7B26;&#x4E32;&#xFF0C;&#x5B83;&#x4F1A;&#x68C0;&#x67E5;&#x8BE5;&#x5BF9;&#x8C61;&#x662F;&#x5426;&#x81F3;&#x5C11;&#x662F;&#x4E00;&#x4E2A;<a class="reference internal" href="core_sqlelement.html#sqlalchemy.sql.expression.ColumnClause" title="sqlalchemy.sql.expression.ColumnClause"><code class="xref py py-class docutils literal"><span class="pre">ColumnClause</span></code></a>&#x6216;&#x89E3;&#x6790;&#x4E3A;1&#x7684;&#x5BF9;&#x8C61;&#xFF0C;&#x5E76;&#x4E14;<code class="docutils literal"><span class="pre">.table</span></code>&#x5C5E;&#x6027;&#xFF08;&#x5982;&#x679C;&#x5B58;&#x5728;&#xFF09;&#x6307;&#x7684;&#x662F;&#x4E00;&#x4E2A;<a class="reference internal" href="core_selectable.html#sqlalchemy.sql.expression.TableClause" title="sqlalchemy.sql.expression.TableClause"><code class="xref py py-class docutils literal"><span class="pre">TableClause</span></code></a>&#x6216;&#x5B50;&#x7C7B;&#xFF0C;&#x800C;&#x4E0D;&#x50CF;<a class="reference internal" href="core_selectable.html#sqlalchemy.sql.expression.Alias" title="sqlalchemy.sql.expression.Alias"><code class="xref py py-class docutils literal"><span class="pre">Alias</span></code></a>&#x3002;</span><span class="yiyi-st" id="yiyi-1151">&#x5426;&#x5219;&#xFF0C;&#x4F1A;&#x5F15;&#x53D1;<a class="reference internal" href="core_exceptions.html#sqlalchemy.exc.ArgumentError" title="sqlalchemy.exc.ArgumentError"><code class="xref py py-class docutils literal"><span class="pre">ArgumentError</span></code></a>&#x3002;<a class="changeset-link headerlink reference internal" href="#change-8089bd064566ab520c8d752d8f44b7ea">&#xB6;</a></span></p><p><span class="yiyi-st" id="yiyi-1152">&#x53C2;&#x8003;&#x6587;&#x732E;&#xFF1A;<a class="reference external" href="http://www.sqlalchemy.org/trac/ticket/2883">&#xFF03;2883</a></span></p></li><li><p id="change-0.9.0-30"><span class="yiyi-st" id="yiyi-1153"><span class="target" id="change-fb4da0d066ca932a5f91af14f8541994"><strong>[sql] [bug] </strong></span> <a class="reference internal" href="core_sqlelement.html#sqlalchemy.sql.operators.ColumnOperators.collate" title="sqlalchemy.sql.operators.ColumnOperators.collate"><code class="xref py py-meth docutils literal"><span class="pre">ColumnOperators.collate()</span></code></a>&#x8FD0;&#x7B97;&#x7B26;&#x7684;&#x4F18;&#x5148;&#x89C4;&#x5219;&#x5DF2;&#x88AB;&#x4FEE;&#x6539;&#xFF0C;&#x56E0;&#x6B64;COLLATE&#x8FD0;&#x7B97;&#x7B26;&#x7684;&#x4F18;&#x5148;&#x7EA7;&#x4F4E;&#x4E8E;&#x6BD4;&#x8F83;&#x8FD0;&#x7B97;&#x7B26;&#x3002;</span><span class="yiyi-st" id="yiyi-1154">&#x8FD9;&#x6837;&#x505A;&#x7684;&#x7ED3;&#x679C;&#x662F;&#x5E94;&#x7528;&#x4E8E;&#x6BD4;&#x8F83;&#x7684;COLLATE&#x4E0D;&#x4F1A;&#x5728;&#x6BD4;&#x8F83;&#x5468;&#x56F4;&#x4EA7;&#x751F;&#x62EC;&#x53F7;&#xFF0C;&#x800C;&#x540E;&#x8005;&#x4E0D;&#x4F1A;&#x88AB;MSSQL&#x7B49;&#x540E;&#x7AEF;&#x89E3;&#x6790;&#x3002;</span><span class="yiyi-st" id="yiyi-1155">&#x5BF9;&#x4E8E;&#x901A;&#x8FC7;&#x5C06;<code class="xref py py-meth docutils literal"><span class="pre">Operators.collate()</span></code>&#x5E94;&#x7528;&#x4E8E;&#x6BD4;&#x8F83;&#x8868;&#x8FBE;&#x5F0F;&#x7684;&#x5355;&#x4E2A;&#x5143;&#x7D20;&#x800C;&#x4E0D;&#x662F;&#x6574;&#x4E2A;&#x6BD4;&#x8F83;&#x8868;&#x8FBE;&#x5F0F;&#x6765;&#x89E3;&#x51B3;&#x6B64;&#x95EE;&#x9898;&#x7684;&#x8BBE;&#x7F6E;&#xFF0C;&#x6B64;&#x66F4;&#x6539;&#x662F;&#x5411;&#x540E;&#x517C;&#x5BB9;&#x7684;&#x3002;</span></p><div class="admonition seealso"><p class="first admonition-title"><span class="yiyi-st" id="yiyi-1156">&#x4E5F;&#x53EF;&#x4EE5;&#x770B;&#x770B;</span></p><p class="last"><span class="yiyi-st" id="yiyi-1157"><a class="reference internal" href="migration_09.html#migration-2879"><span>The precedence rules for COLLATE have been changed</span></a></span></p></div><span class="yiyi-st" id="yiyi-1159"> <a class="changeset-link headerlink reference internal" href="#change-fb4da0d066ca932a5f91af14f8541994">&#xB6;</a></span><p><span class="yiyi-st" id="yiyi-1158">&#x53C2;&#x8003;&#x6587;&#x732E;&#xFF1A;<a class="reference external" href="http://www.sqlalchemy.org/trac/ticket/2879">&#xFF03;2879</a></span></p></li><li><p id="change-0.9.0-31"><span class="yiyi-st" id="yiyi-1160"><span class="target" id="change-55d6c5d7c76b54deb2d68f5e6ee4e501"><strong>[sql] [enhancement] </strong></span>The exception raised when a <a class="reference internal" href="core_sqlelement.html#sqlalchemy.sql.expression.BindParameter" title="sqlalchemy.sql.expression.BindParameter"><code class="xref py py-class docutils literal"><span class="pre">BindParameter</span></code></a> is present in a compiled statement without a value now includes the key name of the bound parameter in the error message.<a class="changeset-link headerlink reference internal" href="#change-55d6c5d7c76b54deb2d68f5e6ee4e501">&#xB6;</a></span></p><p><span class="yiyi-st" id="yiyi-1161">&#x8FD9;&#x4E2A;&#x6539;&#x53D8;&#x4E5F;&#x88AB;<strong>backported</strong>&#x4FEE;&#x6539;&#x4E3A;&#xFF1A;0.8.5</span></p><p></p></li></ul></div><div class="section" id="change-0.9.0-schema"><h3><span class="yiyi-st" id="yiyi-1162">&#x67B6;&#x6784;<a class="headerlink" href="#change-0.9.0-schema" title="Permalink to this headline">&#xB6; T0&gt;</a></span></h3><ul class="simple"><li><p id="change-0.9.0-32"><span class="yiyi-st" id="yiyi-1163"><span class="target" id="change-eb0f69af2f52edcebc270889846a3f7d"><strong>[schema] [bug] </strong></span>Fixed a regression caused by <a class="reference external" href="http://www.sqlalchemy.org/trac/ticket/2812">#2812</a> where the repr() for table and column names would fail if the name contained non-ascii characters.<a class="changeset-link headerlink reference internal" href="#change-eb0f69af2f52edcebc270889846a3f7d">&#xB6;</a></span></p><p><span class="yiyi-st" id="yiyi-1164">&#x53C2;&#x8003;&#x6587;&#x732E;&#xFF1A;<a class="reference external" href="http://www.sqlalchemy.org/trac/ticket/2868">&#xFF03;2868</a></span></p></li></ul></div><div class="section" id="change-0.9.0-postgresql"><h3><span class="yiyi-st" id="yiyi-1165">&#x7684;PostgreSQL <a class="headerlink" href="#change-0.9.0-postgresql" title="Permalink to this headline">&#xB6; T0&gt;</a></span></h3><ul class="simple"><li><p id="change-0.9.0-33"><span class="yiyi-st" id="yiyi-1166"><span class="target" id="change-7b58abc6472e6a9756729e397c6ee060"><strong>[postgresql] [feature] </strong></span>&#x4F7F;&#x7528;&#x65B0;&#x7684;<a class="reference internal" href="dialects_mysql.html#sqlalchemy.dialects.mysql.JSON" title="sqlalchemy.dialects.mysql.JSON"><code class="xref py py-class docutils literal"><span class="pre">JSON</span></code></a>&#x7C7B;&#x578B;&#x6DFB;&#x52A0;&#x4E86;&#x5BF9;Postgresql JSON&#x7684;&#x652F;&#x6301;&#x3002;</span><span class="yiyi-st" id="yiyi-1167">&#x975E;&#x5E38;&#x611F;&#x8C22;Nathan Rice&#x5B9E;&#x65BD;&#x548C;&#x6D4B;&#x8BD5;&#x8FD9;&#x4E2A;&#x3002;<a class="changeset-link headerlink reference internal" href="#change-7b58abc6472e6a9756729e397c6ee060">&#xB6;</a></span></p><p><span class="yiyi-st" id="yiyi-1168">&#x53C2;&#x8003;&#x6587;&#x732E;&#xFF1A;<a class="reference external" href="http://www.sqlalchemy.org/trac/ticket/2581">&#xFF03;2581</a>&#xFF0C;<a class="reference external" href="https://github.com/zzzeek/sqlalchemy/pull/50">&#x8BF7;&#x6C42;github&#xFF1A;50</a></span></p></li><li><p id="change-0.9.0-34"><span class="yiyi-st" id="yiyi-1169"><span class="target" id="change-77977fae5177b45781690c834e63d13f"><strong>[postgresql] [feature] </strong></span>&#x901A;&#x8FC7;<a class="reference internal" href="dialects_postgresql.html#sqlalchemy.dialects.postgresql.TSVECTOR" title="sqlalchemy.dialects.postgresql.TSVECTOR"><code class="xref py py-class docutils literal"><span class="pre">postgresql.TSVECTOR</span></code></a>&#x7C7B;&#x578B;&#x589E;&#x52A0;&#x4E86;&#x5BF9;Postgresql TSVECTOR&#x7684;&#x652F;&#x6301;&#x3002;</span><span class="yiyi-st" id="yiyi-1170">&#x8BF7;&#x6C42;&#x793C;&#x8C8C;Noufal Ibrahim&#x3002;<a class="changeset-link headerlink reference internal" href="#change-77977fae5177b45781690c834e63d13f">&#xB6;</a></span></p><p><span class="yiyi-st" id="yiyi-1171">&#x53C2;&#x8003;&#xFF1A;<a class="reference external" href="https://bitbucket.org/zzzeek/sqlalchemy/pull-request/8">&#x62C9;&#x53D6;&#x8BF7;&#x6C42;bitbucket&#xFF1A;8</a></span></p></li><li><p id="change-0.9.0-35"><span class="yiyi-st" id="yiyi-1172"><span class="target" id="change-6c4b7c62d0cebe9f8e7fa158a55c506e"><strong>[postgresql] [bug] </strong></span>Fixed bug where index reflection would mis-interpret indkey values when using the pypostgresql adapter, which returns these values as lists vs. psycopg2&#x2019;s return type of string.<a class="changeset-link headerlink reference internal" href="#change-6c4b7c62d0cebe9f8e7fa158a55c506e">&#xB6;</a></span></p><p><span class="yiyi-st" id="yiyi-1173">&#x8FD9;&#x4E2A;&#x6539;&#x53D8;&#x4E5F;&#x88AB;<strong>backported</strong>&#x4FEE;&#x6539;&#x4E3A;&#xFF1A;0.8.4</span></p><p><span class="yiyi-st" id="yiyi-1174">&#x53C2;&#x8003;&#x6587;&#x732E;&#xFF1A;<a class="reference external" href="http://www.sqlalchemy.org/trac/ticket/2855">&#xFF03;2855</a></span></p></li><li><p id="change-0.9.0-36"><span class="yiyi-st" id="yiyi-1175"><span class="target" id="change-0d74908c0a46fa09168e385eecb4f0a1"><strong>[postgresql] [bug] </strong></span>&#x73B0;&#x5728;&#x4F7F;&#x7528;psycopg2 UNICODEARRAY&#x6269;&#x5C55;&#x6765;&#x5904;&#x7406;&#x5E26;&#x6709;psycopg2 +&#x666E;&#x901A;&#x201C;native unicode&#x201D;&#x6A21;&#x5F0F;&#x7684;unicode&#x6570;&#x7EC4;&#xFF0C;&#x8FD9;&#x4E0E;UNICODE&#x6269;&#x5C55;&#x7684;&#x4F7F;&#x7528;&#x65B9;&#x5F0F;&#x4E00;&#x6837;<a class="changeset-link headerlink reference internal" href="#change-0d74908c0a46fa09168e385eecb4f0a1">&#xB6;</a></span></p><p></p></li><li><p id="change-0.9.0-37"><span class="yiyi-st" id="yiyi-1176"><span class="target" id="change-278c2212115d7604aa6ba7694c5c5965"><strong>[postgresql] [bug] </strong></span>&#x4FEE;&#x6B63;&#x4E86;ENUM&#x4E2D;&#x7684;&#x503C;&#x6CA1;&#x6709;&#x9488;&#x5BF9;&#x5355;&#x5F15;&#x53F7;&#x8F6C;&#x4E49;&#x7684;&#x9519;&#x8BEF;&#x3002;</span><span class="yiyi-st" id="yiyi-1177">&#x8BF7;&#x6CE8;&#x610F;&#xFF0C;&#x8FD9;&#x5BF9;&#x4E8E;&#x624B;&#x52A8;&#x8F6C;&#x4E49;&#x5355;&#x5F15;&#x53F7;&#x7684;&#x73B0;&#x6709;&#x89E3;&#x51B3;&#x65B9;&#x6CD5;&#x662F;&#x5411;&#x540E;&#x4E0D;&#x517C;&#x5BB9;&#x7684;&#x3002;</span></p><div class="admonition seealso"><p class="first admonition-title"><span class="yiyi-st" id="yiyi-1178">&#x4E5F;&#x53EF;&#x4EE5;&#x770B;&#x770B;</span></p><p class="last"><span class="yiyi-st" id="yiyi-1179"><a class="reference internal" href="migration_09.html#migration-2878"><span>Postgresql CREATE TYPE &lt;x&gt; AS ENUM now applies quoting to values</span></a></span></p></div><span class="yiyi-st" id="yiyi-1181"> <a class="changeset-link headerlink reference internal" href="#change-278c2212115d7604aa6ba7694c5c5965">&#xB6;</a></span><p><span class="yiyi-st" id="yiyi-1180">&#x53C2;&#x8003;&#x6587;&#x732E;&#xFF1A;<a class="reference external" href="http://www.sqlalchemy.org/trac/ticket/2878">&#xFF03;2878</a></span></p></li></ul></div><div class="section" id="change-0.9.0-mysql"><h3><span class="yiyi-st" id="yiyi-1182">MySQL&#x7684;<a class="headerlink" href="#change-0.9.0-mysql" title="Permalink to this headline">&#xB6; T0&gt;</a></span></h3><ul class="simple"><li><p id="change-0.9.0-38"><span class="yiyi-st" id="yiyi-1183"><span class="target" id="change-aff523a757357ad13ae691047b8183cd"><strong>[mysql] [bug] </strong></span>&#x6539;&#x8FDB;&#x4E86;SQL&#x7C7B;&#x578B;&#x5728;<code class="docutils literal"><span class="pre">__repr__()</span></code>&#x4E2D;&#x751F;&#x6210;&#x7684;&#x7CFB;&#x7EDF;&#xFF0C;&#x7279;&#x522B;&#x662F;&#x5173;&#x4E8E;&#x5BBD;&#x6574;&#x578B;/&#x6570;&#x5B57;/&#x5B57;&#x7B26;&#x7C7B;&#x578B;&#x5404;&#x79CD;&#x5173;&#x952E;&#x5B57;&#x53C2;&#x6570;&#x3002;</span><span class="yiyi-st" id="yiyi-1184">The <code class="docutils literal"><span class="pre">__repr__()</span></code> is important for use with Alembic autogenerate for when Python code is rendered in a migration script.<a class="changeset-link headerlink reference internal" href="#change-aff523a757357ad13ae691047b8183cd">&#xB6;</a></span></p><p><span class="yiyi-st" id="yiyi-1185">&#x53C2;&#x8003;&#x6587;&#x732E;&#xFF1A;<a class="reference external" href="http://www.sqlalchemy.org/trac/ticket/2893">&#xFF03;2893</a></span></p></li></ul></div><div class="section" id="change-0.9.0-mssql"><h3><span class="yiyi-st" id="yiyi-1186">MSSQL <a class="headerlink" href="#change-0.9.0-mssql" title="Permalink to this headline">&#xB6; T0&gt;</a></span></h3><ul class="simple"><li><p id="change-0.9.0-39"><span class="yiyi-st" id="yiyi-1187"><span class="target" id="change-9aad279410ec35f73c2ed835b9775263"><strong>[mssql] [bug] [firebird] </strong></span>The &#x201C;asdecimal&#x201D; flag used with the <a class="reference internal" href="core_type_basics.html#sqlalchemy.types.Float" title="sqlalchemy.types.Float"><code class="xref py py-class docutils literal"><span class="pre">Float</span></code></a> type will now work with Firebird as well as the mssql+pyodbc dialects; previously the decimal conversion was not occurring.<a class="changeset-link headerlink reference internal" href="#change-9aad279410ec35f73c2ed835b9775263">&#xB6;</a></span></p><p><span class="yiyi-st" id="yiyi-1188">&#x8FD9;&#x4E2A;&#x6539;&#x53D8;&#x4E5F;&#x88AB;<strong>backported</strong>&#x4FEE;&#x6539;&#x4E3A;&#xFF1A;0.8.5</span></p><p></p></li><li><p id="change-0.9.0-40"><span class="yiyi-st" id="yiyi-1189"><span class="target" id="change-f1ee7d7ea1eb2a0cb21a50ae1dea3fe9"><strong>[mssql] [bug] [pymssql] </strong></span>Added &#x201C;Net-Lib error during Connection reset by peer&#x201D; message to the list of messages checked for &#x201C;disconnect&#x201D; within the pymssql dialect. </span><span class="yiyi-st" id="yiyi-1190">&#x793C;&#x8C8C;John Anderson&#x3002;<a class="changeset-link headerlink reference internal" href="#change-f1ee7d7ea1eb2a0cb21a50ae1dea3fe9">&#xB6;</a></span></p><p><span class="yiyi-st" id="yiyi-1191">&#x8FD9;&#x4E2A;&#x6539;&#x53D8;&#x4E5F;&#x88AB;<strong>backported</strong>&#x4FEE;&#x6539;&#x4E3A;&#xFF1A;0.8.5</span></p><p><span class="yiyi-st" id="yiyi-1192">&#x53C2;&#x8003;&#x6587;&#x732E;&#xFF1A;<a class="reference external" href="https://github.com/zzzeek/sqlalchemy/pull/51">&#x8BF7;&#x6C42;github&#xFF1A;51</a></span></p></li><li><p id="change-0.9.0-41"><span class="yiyi-st" id="yiyi-1193"><span class="target" id="change-b65b88da0221c3f0bb0c2443185a5221"><strong>[mssql] [bug] </strong></span>&#x4FEE;&#x6B63;&#x4E86;&#x5728;0.8.0&#x7248;&#x672C;&#x4E2D;&#x5F15;&#x5165;&#x7D22;&#x5F15;&#x7684;<code class="docutils literal"><span class="pre">DROP</span> <span class="pre">INDEX</span></code>&#x5982;&#x679C;&#x7D22;&#x5F15;&#x5904;&#x4E8E;&#x5907;&#x7528;&#x6A21;&#x5F0F;&#x4E2D;&#xFF0C;MSSQL&#x5C06;&#x4E0D;&#x6B63;&#x786E;&#x5730;&#x6E32;&#x67D3;&#xFF1B; schemaname / tablename&#x5C06;&#x88AB;&#x98A0;&#x5012;&#x3002;</span><span class="yiyi-st" id="yiyi-1194">&#x8BE5;&#x683C;&#x5F0F;&#x4E5F;&#x8FDB;&#x884C;&#x4E86;&#x4FEE;&#x6539;&#x4EE5;&#x7B26;&#x5408;&#x5F53;&#x524D;&#x7684;MSSQL&#x6587;&#x6863;&#x3002;</span><span class="yiyi-st" id="yiyi-1195">Courtesy Derek Harland&#x3002;<a class="changeset-link headerlink reference internal" href="#change-b65b88da0221c3f0bb0c2443185a5221">&#xB6;</a></span></p><p><span class="yiyi-st" id="yiyi-1196">&#x8FD9;&#x4E2A;&#x6539;&#x53D8;&#x4E5F;&#x88AB;<strong>backported</strong>&#x4FEE;&#x6539;&#x4E3A;&#xFF1A;0.8.4</span></p><p><span class="yiyi-st" id="yiyi-1197">&#x53C2;&#x8003;&#x6587;&#x732E;&#xFF1A;<a class="reference external" href="https://bitbucket.org/zzzeek/sqlalchemy/pull-request/7">pull request bitbucket&#xFF1A;7</a></span></p></li></ul></div><div class="section" id="change-0.9.0-oracle"><h3><span class="yiyi-st" id="yiyi-1198">&#x9884;&#x8A00;<a class="headerlink" href="#change-0.9.0-oracle" title="Permalink to this headline">&#xB6; T0&gt;</a></span></h3><ul class="simple"><li><p id="change-0.9.0-42"><span class="yiyi-st" id="yiyi-1199"><span class="target" id="change-9be5ac15b91d5ec132c4a6b689d5d15e"><strong>[oracle] [bug] </strong></span>&#x589E;&#x52A0;&#x4E86;ORA-02396&#x201C;&#x6700;&#x5927;&#x7A7A;&#x95F2;&#x65F6;&#x95F4;&#x201D;&#x7684;&#x9519;&#x8BEF;&#x4EE3;&#x7801;&#x5230;cx_oracle&#x7684;&#x201C;is disconnect&#x201D;&#x4EE3;&#x7801;&#x5217;&#x8868;&#x3002;<a class="changeset-link headerlink reference internal" href="#change-9be5ac15b91d5ec132c4a6b689d5d15e">&#xB6;</a></span></p><p><span class="yiyi-st" id="yiyi-1200">&#x8FD9;&#x4E2A;&#x6539;&#x53D8;&#x4E5F;&#x88AB;<strong>backported</strong>&#x4FEE;&#x6539;&#x4E3A;&#xFF1A;0.8.4</span></p><p><span class="yiyi-st" id="yiyi-1201">&#x53C2;&#x8003;&#x6587;&#x732E;&#xFF1A;<a class="reference external" href="http://www.sqlalchemy.org/trac/ticket/2864">&#xFF03;2864</a></span></p></li><li><p id="change-0.9.0-43"><span class="yiyi-st" id="yiyi-1202"><span class="target" id="change-495a336b8096587d32bf1959ae9c2509"><strong>[oracle] [bug] </strong></span>Fixed bug where Oracle <code class="docutils literal"><span class="pre">VARCHAR</span></code> types given with no length (e.g. for a <code class="docutils literal"><span class="pre">CAST</span></code> or similar) would incorrectly render <code class="docutils literal"><span class="pre">None</span> <span class="pre">CHAR</span></code> or similar.<a class="changeset-link headerlink reference internal" href="#change-495a336b8096587d32bf1959ae9c2509">&#xB6;</a></span></p><p><span class="yiyi-st" id="yiyi-1203">&#x8FD9;&#x4E2A;&#x6539;&#x53D8;&#x4E5F;&#x88AB;<strong>backported</strong>&#x4FEE;&#x6539;&#x4E3A;&#xFF1A;0.8.4</span></p><p><span class="yiyi-st" id="yiyi-1204">&#x53C2;&#x8003;&#x6587;&#x732E;&#xFF1A;<a class="reference external" href="http://www.sqlalchemy.org/trac/ticket/2870">&#xFF03;2870</a></span></p></li></ul></div><div class="section" id="change-0.9.0-firebird"><h3><span class="yiyi-st" id="yiyi-1205">&#x706B;&#x9E1F;<a class="headerlink" href="#change-0.9.0-firebird" title="Permalink to this headline">&#xB6; T0&gt;</a></span></h3><ul class="simple"><li><p id="change-0.9.0-44"><span class="yiyi-st" id="yiyi-1206"><span class="target" id="change-0e80ff1217d1159ae0303de5c0ed4ec5"><strong>[firebird] [bug] </strong></span>&#x706B;&#x9E1F;&#x65B9;&#x8A00;&#x4F1A;&#x5F15;&#x7528;&#x4EE5;&#x4E0B;&#x5212;&#x7EBF;&#x5F00;&#x5934;&#x7684;&#x6807;&#x8BC6;&#x7B26;&#x3002;</span><span class="yiyi-st" id="yiyi-1207">Courtesy Treeve Jelbert&#x3002;<a class="changeset-link headerlink reference internal" href="#change-0e80ff1217d1159ae0303de5c0ed4ec5">&#xB6;</a></span></p><p><span class="yiyi-st" id="yiyi-1208">&#x8FD9;&#x4E2A;&#x6539;&#x53D8;&#x4E5F;&#x88AB;<strong>backported</strong>&#x4FEE;&#x6539;&#x4E3A;&#xFF1A;0.8.5</span></p><p><span class="yiyi-st" id="yiyi-1209">&#x53C2;&#x8003;&#x6587;&#x732E;&#xFF1A;<a class="reference external" href="http://www.sqlalchemy.org/trac/ticket/2897">&#xFF03;2897</a></span></p></li><li><p id="change-0.9.0-45"><span class="yiyi-st" id="yiyi-1210"><span class="target" id="change-eea51d8b16bb72d519c6f5a9cb105561"><strong>[firebird] [bug] </strong></span>&#x4FEE;&#x6B63;&#x4E86;Firebird&#x7D22;&#x5F15;&#x53CD;&#x5C04;&#x4E2D;&#x7D22;&#x5F15;&#x5185;&#x7684;&#x5217;&#x672A;&#x6B63;&#x786E;&#x6392;&#x5E8F;&#x7684;&#x9519;&#x8BEF;&#xFF1B;&#x73B0;&#x5728;&#x5B83;&#x4EEC;&#x6309;&#x7167;RDB $ FIELD_POSITION&#x7684;&#x987A;&#x5E8F;&#x6392;&#x5E8F;&#x3002;<a class="changeset-link headerlink reference internal" href="#change-eea51d8b16bb72d519c6f5a9cb105561">&#xB6;</a></span></p><p><span class="yiyi-st" id="yiyi-1211">&#x8FD9;&#x4E2A;&#x6539;&#x53D8;&#x4E5F;&#x88AB;<strong>backported</strong>&#x4FEE;&#x6539;&#x4E3A;&#xFF1A;0.8.5</span></p><p></p></li><li><p id="change-0.9.0-46"><span class="yiyi-st" id="yiyi-1212"><span class="target" id="change-70bdabe000861535a7e228956add9020"><strong>[firebird] [bug] </strong></span>Changed the queries used by Firebird to list table and view names to query from the <code class="docutils literal"><span class="pre">rdb$relations</span></code> view instead of the <code class="docutils literal"><span class="pre">rdb$relation_fields</span></code> and <code class="docutils literal"><span class="pre">rdb$view_relations</span></code> views. </span><span class="yiyi-st" id="yiyi-1213">&#x65B0;&#x65E7;&#x67E5;&#x8BE2;&#x7684;&#x53D8;&#x4F53;&#x5728;&#x8BB8;&#x591A;&#x5E38;&#x89C1;&#x95EE;&#x9898;&#x548C;&#x535A;&#x5BA2;&#x4E2D;&#x90FD;&#x6709;&#x63D0;&#x53CA;&#xFF0C;&#x4F46;&#x65B0;&#x7684;&#x67E5;&#x8BE2;&#x76F4;&#x63A5;&#x6765;&#x81EA;&#x201C;Firebird&#x5E38;&#x89C1;&#x95EE;&#x9898;&#x89E3;&#x7B54;&#x201D;&#xFF0C;&#x5B83;&#x4F3C;&#x4E4E;&#x662F;&#x6700;&#x6B63;&#x5F0F;&#x7684;&#x4FE1;&#x606F;&#x6765;&#x6E90;&#x3002;<a class="changeset-link headerlink reference internal" href="#change-70bdabe000861535a7e228956add9020">&#xB6;</a></span></p><p><span class="yiyi-st" id="yiyi-1214">&#x53C2;&#x8003;&#x6587;&#x732E;&#xFF1A;<a class="reference external" href="http://www.sqlalchemy.org/trac/ticket/2898">&#xFF03;2898</a></span></p></li></ul></div><div class="section" id="change-0.9.0-misc"><h3><span class="yiyi-st" id="yiyi-1215">&#x6742;&#x9879;<a class="headerlink" href="#change-0.9.0-misc" title="Permalink to this headline">&#xB6; T0&gt;</a></span></h3><ul class="simple"><li><p id="change-0.9.0-47"><span class="yiyi-st" id="yiyi-1216"><span class="target" id="change-577e7805c86d301deafe2f47a2840148"><strong>[removed] </strong></span>&#x201C;informix&#x201D;&#x548C;&#x201C;informixdb&#x201D;&#x65B9;&#x8A00;&#x5DF2;&#x88AB;&#x5220;&#x9664;&#xFF1B;&#x8BE5;&#x4EE3;&#x7801;&#x73B0;&#x5728;&#x53EF;&#x4F5C;&#x4E3A;Bitbucket&#x4E0A;&#x7684;&#x5355;&#x72EC;&#x5B58;&#x50A8;&#x5E93;&#x63D0;&#x4F9B;&#x3002;</span><span class="yiyi-st" id="yiyi-1217">&#x81EA;&#x4ECE;&#x9996;&#x6B21;&#x6DFB;&#x52A0;informixdb&#x65B9;&#x8A00;&#x4EE5;&#x6765;&#xFF0C;IBM-DB&#x9879;&#x76EE;&#x5DF2;&#x7ECF;&#x63D0;&#x4F9B;&#x4E86;&#x751F;&#x4EA7;&#x7EA7;&#x522B;&#x7684;Informix&#x652F;&#x6301;&#x3002;<a class="changeset-link headerlink reference internal" href="#change-577e7805c86d301deafe2f47a2840148">&#xB6;</a></span></p><p></p></li><li><p id="change-0.9.0-48"><span class="yiyi-st" id="yiyi-1218"><span class="target" id="change-b9609d3e6665e3b2e9cbc73bb84adebc"><strong>[bug] [declarative] </strong></span>&#x9519;&#x8BEF;&#x6D88;&#x606F;&#xFF0C;&#x5F53;&#x4E00;&#x4E2A;&#x5B57;&#x7B26;&#x4E32;arg&#x53D1;&#x9001;&#x5230;<a class="reference internal" href="orm_relationship_api.html#sqlalchemy.orm.relationship" title="sqlalchemy.orm.relationship"><code class="xref py py-func docutils literal"><span class="pre">relationship()</span></code></a>&#xFF0C;&#x5B83;&#x6CA1;&#x6709;&#x89E3;&#x6790;&#x4E3A;&#x7C7B;&#x6216;&#x6620;&#x5C04;&#x5668;&#x65F6;&#xFF0C;&#x5B83;&#x7684;&#x5DE5;&#x4F5C;&#x65B9;&#x5F0F;&#x4E0E;&#x5F53;&#x6536;&#x5230;&#x4E00;&#x4E2A;&#x975E;&#x5B57;&#x7B26;&#x4E32;arg&#x65F6;&#xFF0C;&#x5B83;&#x8868;&#x660E;&#x6709;&#x914D;&#x7F6E;&#x9519;&#x8BEF;&#x7684;&#x5173;&#x7CFB;&#x7684;&#x540D;&#x5B57;&#x3002;<a class="changeset-link headerlink reference internal" href="#change-b9609d3e6665e3b2e9cbc73bb84adebc">&#xB6;</a></span></p><p><span class="yiyi-st" id="yiyi-1219">&#x8FD9;&#x4E2A;&#x6539;&#x53D8;&#x4E5F;&#x88AB;<strong>backported</strong>&#x4FEE;&#x6539;&#x4E3A;&#xFF1A;0.8.5</span></p><p><span class="yiyi-st" id="yiyi-1220">&#x53C2;&#x8003;&#x6587;&#x732E;&#xFF1A;<a class="reference external" href="http://www.sqlalchemy.org/trac/ticket/2888">&#xFF03;2888</a></span></p></li><li><p id="change-0.9.0-49"><span class="yiyi-st" id="yiyi-1221"><span class="target" id="change-7b23b02498aded0119f08fe8df17cb20"><strong>[bug] [ext] </strong></span>Fixed bug which prevented the <code class="docutils literal"><span class="pre">serializer</span></code> extension from working correctly with table or column names that contain non-ASCII characters.<a class="changeset-link headerlink reference internal" href="#change-7b23b02498aded0119f08fe8df17cb20">&#xB6;</a></span></p><p><span class="yiyi-st" id="yiyi-1222">&#x8FD9;&#x4E2A;&#x6539;&#x53D8;&#x4E5F;&#x88AB;<strong>backported</strong>&#x4FEE;&#x6539;&#x4E3A;&#xFF1A;0.8.4</span></p><p><span class="yiyi-st" id="yiyi-1223">&#x53C2;&#x8003;&#x6587;&#x732E;&#xFF1A;<a class="reference external" href="http://www.sqlalchemy.org/trac/ticket/2869">&#xFF03;2869</a></span></p></li><li><p id="change-0.9.0-50"><span class="yiyi-st" id="yiyi-1224"><span class="target" id="change-51a37bd7516f5c6879964cfd09f1be56"><strong>[bug] [examples] </strong></span>&#x4FEE;&#x6B63;&#x4E86;&#x963B;&#x6B62;history_meta recipe&#x4F7F;&#x7528;&#x8D85;&#x8FC7;&#x4E00;&#x5C42;&#x6DF1;&#x5EA6;&#x7684;&#x8FDE;&#x63A5;&#x7EE7;&#x627F;&#x65B9;&#x6848;&#x7684;&#x9519;&#x8BEF;&#x3002;<a class="changeset-link headerlink reference internal" href="#change-51a37bd7516f5c6879964cfd09f1be56">&#xB6;</a></span></p><p></p></li></ul></div></div><div class="section" id="change-0.9.0b1"><h2><span class="yiyi-st" id="yiyi-1226">0.9.0b1 <a class="headerlink" href="#change-0.9.0b1" title="Permalink to this headline">&#xB6; T0&gt;</a></span></h2><span class="yiyi-st" id="yiyi-1676">&#x53D1;&#x5E03;&#x65E5;&#x671F;&#xFF1A;2013&#x5E74;10&#x6708;26&#x65E5;</span><div class="section" id="change-0.9.0b1-general"><h3><span class="yiyi-st" id="yiyi-1227">&#x4E00;&#x822C;<a class="headerlink" href="#change-0.9.0b1-general" title="Permalink to this headline">&#xB6; T0&gt;</a></span></h3><ul class="simple"><li><p id="change-0.9.0b1-0"><span class="yiyi-st" id="yiyi-1228"><span class="target" id="change-63557d61147791e2c67e8fe819f1b2b2"><strong>[general] [feature] [py3k] </strong></span>&#x5C06;C&#x6269;&#x5C55;&#x79FB;&#x690D;&#x5230;Python 3&#xFF0C;&#x5E76;&#x5C06;&#x5728;&#x4EFB;&#x4F55;&#x53D7;&#x652F;&#x6301;&#x7684;CPython 2&#x6216;3&#x73AF;&#x5883;&#x4E0B;&#x6784;&#x5EFA;&#x3002;<a class="changeset-link headerlink reference internal" href="#change-63557d61147791e2c67e8fe819f1b2b2">&#xB6;</a></span></p><p><span class="yiyi-st" id="yiyi-1229">&#x53C2;&#x8003;&#x6587;&#x732E;&#xFF1A;<a class="reference external" href="http://www.sqlalchemy.org/trac/ticket/2161">&#xFF03;2161</a></span></p></li><li><p id="change-0.9.0b1-1"><span class="yiyi-st" id="yiyi-1230"><span class="target" id="change-e1f88f4751daaf8c4bf39213780dfc1f"><strong>[general] [feature] [py3k] </strong></span>&#x73B0;&#x5728;&#xFF0C;Python 2&#x548C;3&#x7684;&#x4EE3;&#x7801;&#x5E93;&#x5DF2;&#x7ECF;&#x201C;&#x5C31;&#x5730;&#x201D;&#x4E86;&#xFF0C;&#x8FD0;&#x884C;2to3&#x7684;&#x9700;&#x6C42;&#x5DF2;&#x88AB;&#x5220;&#x9664;&#x3002;</span><span class="yiyi-st" id="yiyi-1231">&#x517C;&#x5BB9;&#x6027;&#x73B0;&#x5728;&#x5728;Python 2.6&#x4E0A;&#x6B63;&#x5411;&#x8FD0;&#x884C;&#x3002;<a class="changeset-link headerlink reference internal" href="#change-e1f88f4751daaf8c4bf39213780dfc1f">&#xB6;</a></span></p><p><span class="yiyi-st" id="yiyi-1232">&#x53C2;&#x8003;&#x6587;&#x732E;&#xFF1A;<a class="reference external" href="http://www.sqlalchemy.org/trac/ticket/2671">&#xFF03;2671</a></span></p></li><li><p id="change-0.9.0b1-2"><span class="yiyi-st" id="yiyi-1233"><span class="target" id="change-0858791080deb02ea2ef1c8aec366f29"><strong>[general] </strong></span>&#x5BF9;&#x7A0B;&#x5E8F;&#x5305;&#x7684;&#x5927;&#x91CF;&#x91CD;&#x6784;&#x5DF2;&#x91CD;&#x65B0;&#x7EC4;&#x7EC7;&#x4E86;&#x8BB8;&#x591A;Core&#x6A21;&#x5757;&#x7684;&#x5BFC;&#x5165;&#x7ED3;&#x6784;&#x4EE5;&#x53CA;ORM&#x6A21;&#x5757;&#x7684;&#x67D0;&#x4E9B;&#x65B9;&#x9762;&#x3002;</span><span class="yiyi-st" id="yiyi-1234">In particular <code class="docutils literal"><span class="pre">sqlalchemy.sql</span></code> has been broken out into several more modules than before so that the very large size of <code class="docutils literal"><span class="pre">sqlalchemy.sql.expression</span></code> is now pared down. </span><span class="yiyi-st" id="yiyi-1235">&#x8FD9;&#x9879;&#x52AA;&#x529B;&#x7684;&#x91CD;&#x70B9;&#x662F;&#x5927;&#x91CF;&#x51CF;&#x5C11;&#x8FDB;&#x53E3;&#x5468;&#x671F;&#x3002;</span><span class="yiyi-st" id="yiyi-1236">Additionally, the system of API functions in <code class="docutils literal"><span class="pre">sqlalchemy.sql.expression</span></code> and <code class="docutils literal"><span class="pre">sqlalchemy.orm</span></code> has been reorganized to eliminate redundancy in documentation between the functions vs. the objects they produce.<a class="changeset-link headerlink reference internal" href="#change-0858791080deb02ea2ef1c8aec366f29">&#xB6;</a></span></p><p></p></li></ul></div><div class="section" id="change-0.9.0b1-orm"><h3><span class="yiyi-st" id="yiyi-1237">ORM <a class="headerlink" href="#change-0.9.0b1-orm" title="Permalink to this headline">&#xB6; T0&gt;</a></span></h3><ul class="simple"><li><p id="change-0.9.0b1-3"><span class="yiyi-st" id="yiyi-1238"><span class="target" id="change-9262d71ee52f650e127ee71427812930"><strong>[orm] [feature] </strong></span>&#x6DFB;&#x52A0;&#x4E86;<a class="reference internal" href="orm_relationship_api.html#sqlalchemy.orm.relationship" title="sqlalchemy.orm.relationship"><code class="xref py py-func docutils literal"><span class="pre">relationship()</span></code></a> <code class="docutils literal"><span class="pre">distinct_target_key</span></code>&#x7684;&#x65B0;&#x9009;&#x9879;&#x3002;</span><span class="yiyi-st" id="yiyi-1239">&#x8FD9;&#x4F7F;&#x5F97;&#x5B50;&#x67E5;&#x8BE2;&#x9884;&#x70ED;&#x52A0;&#x8F7D;&#x5668;&#x7B56;&#x7565;&#x80FD;&#x591F;&#x5C06;DISTINCT&#x5E94;&#x7528;&#x5230;&#x6700;&#x5185;&#x5C42;&#x7684;SELECT&#x5B50;&#x67E5;&#x8BE2;&#x4E2D;&#xFF0C;&#x4EE5;&#x534F;&#x52A9;&#x5904;&#x7406;&#x4E0E;&#x8BE5;&#x5173;&#x7CFB;&#x76F8;&#x5BF9;&#x5E94;&#x7684;&#x6700;&#x5185;&#x5C42;&#x67E5;&#x8BE2;&#x751F;&#x6210;&#x91CD;&#x590D;&#x884C;&#x7684;&#x60C5;&#x51B5;&#xFF08;&#x76EE;&#x524D;&#x8FD8;&#x6CA1;&#x6709;&#x89E3;&#x51B3;&#x5185;&#x90E8;dupe&#x884C;&#x95EE;&#x9898;&#x7684;&#x4E00;&#x822C;&#x89E3;&#x51B3;&#x65B9;&#x6848;&#x4F46;&#x662F;&#xFF0C;&#x5F53;&#x52A0;&#x5165;&#x6700;&#x5185;&#x5C42;&#x5B50;&#x67E5;&#x8BE2;&#x4E4B;&#x5916;&#x7684;&#x5B50;&#x67E5;&#x8BE2;&#x4F1A;&#x4EA7;&#x751F;&#x6B3A;&#x9A97;&#xFF09;&#x3002;</span><span class="yiyi-st" id="yiyi-1240">&#x5F53;&#x6807;&#x5FD7;&#x88AB;&#x8BBE;&#x7F6E;&#x4E3A;<code class="docutils literal"><span class="pre">True</span></code>&#x65F6;&#xFF0C;DISTINCT&#x88AB;&#x65E0;&#x6761;&#x4EF6;&#x6E32;&#x67D3;&#xFF0C;&#x5F53;&#x5B83;&#x88AB;&#x8BBE;&#x7F6E;&#x4E3A;<code class="docutils literal"><span class="pre">None</span></code>&#x65F6;&#xFF0C;&#x5982;&#x679C;&#x6700;&#x5185;&#x5C42;&#x5173;&#x7CFB;&#x9488;&#x5BF9;&#x4E0D;&#x5305;&#x542B;&#x5B8C;&#x6574;&#x7684;&#x4E3B;&#x952E;&#x3002;</span><span class="yiyi-st" id="yiyi-1241">&#x8BE5;&#x9009;&#x9879;&#x5728;0.8&#x4E2D;&#x9ED8;&#x8BA4;&#x4E3A;False&#xFF08;&#x4F8B;&#x5982;&#xFF0C;&#x5728;&#x6240;&#x6709;&#x60C5;&#x51B5;&#x4E0B;&#x9ED8;&#x8BA4;&#x5173;&#x95ED;&#xFF09;&#xFF0C;0.9&#x4E2D;&#x7684;None&#xFF08;&#x4F8B;&#x5982;&#x9ED8;&#x8BA4;&#x4E3A;&#x81EA;&#x52A8;&#xFF09;&#x3002;</span><span class="yiyi-st" id="yiyi-1242">&#x611F;&#x8C22;Alexander Koval&#x4E3A;&#x6B64;&#x63D0;&#x4F9B;&#x5E2E;&#x52A9;&#x3002;</span></p><div class="admonition seealso"><p class="first admonition-title"><span class="yiyi-st" id="yiyi-1243">&#x4E5F;&#x53EF;&#x4EE5;&#x770B;&#x770B;</span></p><p class="last"><span class="yiyi-st" id="yiyi-1244"><a class="reference internal" href="migration_09.html#change-2836"><span>Subquery Eager Loading will apply DISTINCT to the innermost SELECT for some queries</span></a></span></p></div><span class="yiyi-st" id="yiyi-1247"> <a class="changeset-link headerlink reference internal" href="#change-9262d71ee52f650e127ee71427812930">&#xB6;</a></span><p><span class="yiyi-st" id="yiyi-1245">This change is also <strong>backported</strong> to: 0.8.3</span></p><p><span class="yiyi-st" id="yiyi-1246">&#x53C2;&#x8003;&#x6587;&#x732E;&#xFF1A;<a class="reference external" href="http://www.sqlalchemy.org/trac/ticket/2836">&#xFF03;2836</a></span></p></li><li><p id="change-0.9.0b1-4"><span class="yiyi-st" id="yiyi-1248"><span class="target" id="change-7df1b4e6150537b72c4b758277a44288"><strong>[orm] [feature] </strong></span>The association proxy now returns <code class="docutils literal"><span class="pre">None</span></code> when fetching a scalar attribute off of a scalar relationship, where the scalar relationship itself points to <code class="docutils literal"><span class="pre">None</span></code>, instead of raising an <code class="docutils literal"><span class="pre">AttributeError</span></code>.</span></p><div class="admonition seealso"><p class="first admonition-title"><span class="yiyi-st" id="yiyi-1249">&#x4E5F;&#x53EF;&#x4EE5;&#x770B;&#x770B;</span></p><p class="last"><span class="yiyi-st" id="yiyi-1250"><a class="reference internal" href="migration_09.html#migration-2810"><span>Association Proxy Missing Scalar returns None</span></a></span></p></div><span class="yiyi-st" id="yiyi-1252"> <a class="changeset-link headerlink reference internal" href="#change-7df1b4e6150537b72c4b758277a44288">&#xB6;</a></span><p><span class="yiyi-st" id="yiyi-1251">&#x53C2;&#x8003;&#x6587;&#x732E;&#xFF1A;<a class="reference external" href="http://www.sqlalchemy.org/trac/ticket/2810">&#xFF03;2810</a></span></p></li><li><p id="change-0.9.0b1-5"><span class="yiyi-st" id="yiyi-1253"><span class="target" id="change-17ada80ccb89c1e1109f3190e75092b5"><strong>[orm] [feature] </strong></span>&#x589E;&#x52A0;&#x4E86;&#x65B0;&#x7684;&#x65B9;&#x6CD5;<a class="reference internal" href="orm_internals.html#sqlalchemy.orm.state.AttributeState.load_history" title="sqlalchemy.orm.state.AttributeState.load_history"><code class="xref py py-meth docutils literal"><span class="pre">AttributeState.load_history()</span></code></a>&#xFF0C;&#x50CF;<a class="reference internal" href="orm_internals.html#sqlalchemy.orm.state.AttributeState.history" title="sqlalchemy.orm.state.AttributeState.history"><code class="xref py py-attr docutils literal"><span class="pre">AttributeState.history</span></code></a>&#x4E00;&#x6837;&#x5DE5;&#x4F5C;&#xFF0C;&#x4F46;&#x4E5F;&#x89E6;&#x53D1;&#x52A0;&#x8F7D;&#x5668;&#x53EF;&#x8C03;&#x7528;&#x3002;</span></p><div class="admonition seealso"><p class="first admonition-title"><span class="yiyi-st" id="yiyi-1254">&#x4E5F;&#x53EF;&#x4EE5;&#x770B;&#x770B;</span></p><p class="last"><span class="yiyi-st" id="yiyi-1255"><a class="reference internal" href="migration_09.html#change-2787"><span>attributes.get_history() will query from the DB by default if value not present</span></a></span></p></div><span class="yiyi-st" id="yiyi-1257"> <a class="changeset-link headerlink reference internal" href="#change-17ada80ccb89c1e1109f3190e75092b5">&#xB6;</a></span><p><span class="yiyi-st" id="yiyi-1256">&#x53C2;&#x8003;&#x6587;&#x732E;&#xFF1A;<a class="reference external" href="http://www.sqlalchemy.org/trac/ticket/2787">&#xFF03;2787</a></span></p></li><li><p id="change-0.9.0b1-6"><span class="yiyi-st" id="yiyi-1258"><span class="target" id="change-3108052346d72a5b370a5dd64588efa8"><strong>[orm] [feature] </strong></span>&#x65B0;&#x589E;&#x52A0;&#x8F7D;&#x9009;&#x9879;<a class="reference internal" href="orm_loading_columns.html#sqlalchemy.orm.load_only" title="sqlalchemy.orm.load_only"><code class="xref py py-func docutils literal"><span class="pre">orm.load_only()</span></code></a>&#x3002;</span><span class="yiyi-st" id="yiyi-1259">&#x8FD9;&#x5141;&#x8BB8;&#x5C06;&#x4E00;&#x7CFB;&#x5217;&#x5217;&#x540D;&#x6307;&#x5B9A;&#x4E3A;&#x4EC5;&#x201C;&#x52A0;&#x8F7D;&#x201D;&#x90A3;&#x4E9B;&#x5C5E;&#x6027;&#xFF0C;&#x63A8;&#x8FDF;&#x5176;&#x4F59;&#x7684;&#x5C5E;&#x6027;&#x3002;<a class="changeset-link headerlink reference internal" href="#change-3108052346d72a5b370a5dd64588efa8">&#xB6;</a></span></p><p><span class="yiyi-st" id="yiyi-1260">&#x53C2;&#x8003;&#x6587;&#x732E;&#xFF1A;<a class="reference external" href="http://www.sqlalchemy.org/trac/ticket/1418">&#xFF03;1418</a></span></p></li><li><p id="change-0.9.0b1-7"><span class="yiyi-st" id="yiyi-1261"><span class="target" id="change-44e23631c9a2cd3d7341ba488a0ec775"><strong>[orm] [feature] </strong></span>&#x52A0;&#x8F7D;&#x5668;&#x9009;&#x9879;&#x7684;&#x7CFB;&#x7EDF;&#x5DF2;&#x7ECF;&#x5B8C;&#x5168;&#x91CD;&#x65B0;&#x67B6;&#x6784;&#xFF0C;&#x4EE5;&#x6784;&#x5EFA;&#x66F4;&#x52A0;&#x5168;&#x9762;&#x7684;&#x57FA;&#x7840;&#xFF0C;&#x5373;<a class="reference internal" href="orm_query.html#sqlalchemy.orm.strategy_options.Load" title="sqlalchemy.orm.strategy_options.Load"><code class="xref py py-class docutils literal"><span class="pre">Load</span></code></a>&#x5BF9;&#x8C61;&#x3002;</span><span class="yiyi-st" id="yiyi-1262">&#x8FD9;&#x4E2A;&#x57FA;&#x7840;&#x5141;&#x8BB8;&#x4EFB;&#x4F55;&#x5E38;&#x89C1;&#x7684;&#x52A0;&#x8F7D;&#x5668;&#x9009;&#x9879;&#xFF0C;&#x5982;<a class="reference internal" href="orm_loading_relationships.html#sqlalchemy.orm.joinedload" title="sqlalchemy.orm.joinedload"><code class="xref py py-func docutils literal"><span class="pre">joinedload()</span></code></a>&#xFF0C;<a class="reference internal" href="orm_loading_columns.html#sqlalchemy.orm.defer" title="sqlalchemy.orm.defer"><code class="xref py py-func docutils literal"><span class="pre">defer()</span></code></a>&#x7B49;&#x3002;</span><span class="yiyi-st" id="yiyi-1263">&#x4EE5;&#x201C;&#x94FE;&#x5F0F;&#x201D;&#x6837;&#x5F0F;&#x7528;&#x4E8E;&#x6307;&#x5B9A;&#x8DEF;&#x5F84;&#x4E0B;&#x7684;&#x9009;&#x9879;&#xFF0C;&#x5982;<code class="docutils literal"><span class="pre">joinedload(&quot;foo&quot;).subqueryload(&quot;bar&quot;)</span></code>&#x3002;</span><span class="yiyi-st" id="yiyi-1264">&#x65B0;&#x7CFB;&#x7EDF;&#x53D6;&#x4EE3;&#x4E86;&#x70B9;&#x5206;&#x9694;&#x8DEF;&#x5F84;&#x540D;&#x7684;&#x4F7F;&#x7528;&#xFF0C;&#x9009;&#x9879;&#x4E2D;&#x7684;&#x591A;&#x4E2A;&#x5C5E;&#x6027;&#x4EE5;&#x53CA;<code class="docutils literal"><span class="pre">_all()</span></code>&#x9009;&#x9879;&#x7684;&#x7528;&#x6CD5;&#x3002;</span></p><div class="admonition seealso"><p class="first admonition-title"><span class="yiyi-st" id="yiyi-1265">&#x4E5F;&#x53EF;&#x4EE5;&#x770B;&#x770B;</span></p><p class="last"><span class="yiyi-st" id="yiyi-1266"><a class="reference internal" href="migration_09.html#feature-1418"><span>New Query Options API; load_only() option</span></a></span></p></div><span class="yiyi-st" id="yiyi-1268"> <a class="changeset-link headerlink reference internal" href="#change-44e23631c9a2cd3d7341ba488a0ec775">&#xB6;</a></span><p><span class="yiyi-st" id="yiyi-1267">&#x53C2;&#x8003;&#x6587;&#x732E;&#xFF1A;<a class="reference external" href="http://www.sqlalchemy.org/trac/ticket/1418">&#xFF03;1418</a></span></p></li><li><p id="change-0.9.0b1-8"><span class="yiyi-st" id="yiyi-1269"><span class="target" id="change-a1bb82ee5cb482c0985d71e1e82e3b50"><strong>[orm] [feature] </strong></span>The <a class="reference internal" href="orm_composites.html#sqlalchemy.orm.composite" title="sqlalchemy.orm.composite"><code class="xref py py-func docutils literal"><span class="pre">composite()</span></code></a> construct now maintains the return object when used in a column-oriented <a class="reference internal" href="orm_query.html#sqlalchemy.orm.query.Query" title="sqlalchemy.orm.query.Query"><code class="xref py py-class docutils literal"><span class="pre">Query</span></code></a>, rather than expanding out into individual columns. </span><span class="yiyi-st" id="yiyi-1270">&#x8FD9;&#x4F7F;&#x5F97;&#x5185;&#x90E8;&#x4F7F;&#x7528;&#x65B0;&#x7684;<a class="reference internal" href="orm_query.html#sqlalchemy.orm.query.Bundle" title="sqlalchemy.orm.query.Bundle"><code class="xref py py-class docutils literal"><span class="pre">Bundle</span></code></a>&#x529F;&#x80FD;&#x3002;</span><span class="yiyi-st" id="yiyi-1271">&#x8FD9;&#x79CD;&#x884C;&#x4E3A;&#x662F;&#x5411;&#x540E;&#x4E0D;&#x76F8;&#x5BB9;&#x7684;&#xFF1B;&#x8981;&#x4ECE;&#x5C06;&#x5C55;&#x5F00;&#x7684;&#x7EC4;&#x5408;&#x5217;&#x4E2D;&#x8FDB;&#x884C;&#x9009;&#x62E9;&#xFF0C;&#x8BF7;&#x4F7F;&#x7528;<code class="docutils literal"><span class="pre">MyClass.some_composite.clauses</span></code>&#x3002;</span></p><div class="admonition seealso"><p class="first admonition-title"><span class="yiyi-st" id="yiyi-1272">&#x4E5F;&#x53EF;&#x4EE5;&#x770B;&#x770B;</span></p><p class="last"><span class="yiyi-st" id="yiyi-1273"><a class="reference internal" href="migration_09.html#migration-2824"><span>Composite attributes are now returned as their object form when queried on a per-attribute basis</span></a>&#x67E5;&#x8BE2;&#x65F6;&#xFF0C;&#x590D;&#x5408;&#x5C5E;&#x6027;&#x73B0;&#x5728;&#x4EE5;&#x5176;&#x5BF9;&#x8C61;&#x5F62;&#x5F0F;&#x8FD4;&#x56DE;</span></p></div><span class="yiyi-st" id="yiyi-1275"> <a class="changeset-link headerlink reference internal" href="#change-a1bb82ee5cb482c0985d71e1e82e3b50">&#xB6;</a></span><p><span class="yiyi-st" id="yiyi-1274">&#x53C2;&#x8003;&#x6587;&#x732E;&#xFF1A;<a class="reference external" href="http://www.sqlalchemy.org/trac/ticket/2824">&#xFF03;2824</a></span></p></li><li><p id="change-0.9.0b1-9"><span class="yiyi-st" id="yiyi-1276"><span class="target" id="change-e3d4b8c06aa3216a8f10452f097a17ae"><strong>[orm] [feature] </strong></span>&#x6DFB;&#x52A0;&#x4E86;&#x4E00;&#x4E2A;&#x65B0;&#x7684;&#x6784;&#x9020;<a class="reference internal" href="orm_query.html#sqlalchemy.orm.query.Bundle" title="sqlalchemy.orm.query.Bundle"><code class="xref py py-class docutils literal"><span class="pre">Bundle</span></code></a>&#xFF0C;&#x5B83;&#x5141;&#x8BB8;&#x5C06;&#x5217;&#x8868;&#x8FBE;&#x5F0F;&#x7EC4;&#x6307;&#x5B9A;&#x4E3A;&#x4E00;&#x4E2A;<a class="reference internal" href="orm_query.html#sqlalchemy.orm.query.Query" title="sqlalchemy.orm.query.Query"><code class="xref py py-class docutils literal"><span class="pre">Query</span></code></a>&#x6784;&#x9020;&#x3002;</span><span class="yiyi-st" id="yiyi-1277">&#x8BE5;&#x5217;&#x7EC4;&#x9ED8;&#x8BA4;&#x60C5;&#x51B5;&#x4E0B;&#x4F5C;&#x4E3A;&#x5355;&#x4E2A;&#x5143;&#x7EC4;&#x8FD4;&#x56DE;&#x3002;</span><span class="yiyi-st" id="yiyi-1278">&#x53EF;&#x4EE5;&#x91CD;&#x5199;<a class="reference internal" href="orm_query.html#sqlalchemy.orm.query.Bundle" title="sqlalchemy.orm.query.Bundle"><code class="xref py py-class docutils literal"><span class="pre">Bundle</span></code></a>&#x7684;&#x884C;&#x4E3A;&#xFF0C;&#x4EE5;&#x5411;&#x8FD4;&#x56DE;&#x7684;&#x884C;&#x63D0;&#x4F9B;&#x4EFB;&#x4F55;&#x7C7B;&#x578B;&#x7684;&#x7ED3;&#x679C;&#x5904;&#x7406;&#x3002;</span><span class="yiyi-st" id="yiyi-1279">&#x5F53;&#x5728;&#x9762;&#x5411;&#x5217;&#x7684;<a class="reference internal" href="orm_query.html#sqlalchemy.orm.query.Query" title="sqlalchemy.orm.query.Query"><code class="xref py py-class docutils literal"><span class="pre">Query</span></code></a>&#x4E2D;&#x4F7F;&#x7528;&#x65F6;&#xFF0C;<a class="reference internal" href="orm_query.html#sqlalchemy.orm.query.Bundle" title="sqlalchemy.orm.query.Bundle"><code class="xref py py-class docutils literal"><span class="pre">Bundle</span></code></a>&#x7684;&#x884C;&#x4E3A;&#x73B0;&#x5728;&#x4E5F;&#x5D4C;&#x5165;&#x5230;&#x590D;&#x5408;&#x5C5E;&#x6027;&#x4E2D;&#x3002;</span></p><div class="admonition seealso"><p class="first admonition-title"><span class="yiyi-st" id="yiyi-1280">&#x4E5F;&#x53EF;&#x4EE5;&#x770B;&#x770B;</span></p><p><span class="yiyi-st" id="yiyi-1281"><a class="reference internal" href="migration_09.html#change-2824"><span>Column Bundles for ORM queries</span></a></span></p><p class="last"><span class="yiyi-st" id="yiyi-1282"><a class="reference internal" href="migration_09.html#migration-2824"><span>Composite attributes are now returned as their object form when queried on a per-attribute basis</span></a>&#x67E5;&#x8BE2;&#x65F6;&#xFF0C;&#x590D;&#x5408;&#x5C5E;&#x6027;&#x73B0;&#x5728;&#x4EE5;&#x5176;&#x5BF9;&#x8C61;&#x5F62;&#x5F0F;&#x8FD4;&#x56DE;</span></p></div><span class="yiyi-st" id="yiyi-1284"> <a class="changeset-link headerlink reference internal" href="#change-e3d4b8c06aa3216a8f10452f097a17ae">&#xB6;</a></span><p><span class="yiyi-st" id="yiyi-1283">&#x53C2;&#x8003;&#x6587;&#x732E;&#xFF1A;<a class="reference external" href="http://www.sqlalchemy.org/trac/ticket/2824">&#xFF03;2824</a></span></p></li><li><p id="change-0.9.0b1-10"><span class="yiyi-st" id="yiyi-1285"><span class="target" id="change-ebb167a81b388b8ac090fa33246c48a2"><strong>[orm] [feature] </strong></span>The <code class="docutils literal"><span class="pre">version_id_generator</span></code> parameter of <code class="docutils literal"><span class="pre">Mapper</span></code> can now be specified to rely upon server generated version identifiers, using triggers or other database-provided versioning features, or via an optional programmatic value, by setting <code class="docutils literal"><span class="pre">version_id_generator=False</span></code>. </span><span class="yiyi-st" id="yiyi-1286">&#x5F53;&#x4F7F;&#x7528;&#x670D;&#x52A1;&#x5668;&#x751F;&#x6210;&#x7684;&#x7248;&#x672C;&#x6807;&#x8BC6;&#x7B26;&#x65F6;&#xFF0C;ORM&#x5C06;&#x5728;&#x53EF;&#x7528;&#x65F6;&#x4F7F;&#x7528;RETURNING&#x7ACB;&#x5373;&#x52A0;&#x8F7D;&#x65B0;&#x7248;&#x672C;&#x503C;&#xFF0C;&#x5426;&#x5219;&#x5B83;&#x5C06;&#x53D1;&#x51FA;&#x7B2C;&#x4E8C;&#x4E2A;SELECT&#x3002;<a class="changeset-link headerlink reference internal" href="#change-ebb167a81b388b8ac090fa33246c48a2">&#xB6;</a></span></p><p><span class="yiyi-st" id="yiyi-1287">&#x53C2;&#x8003;&#x6587;&#x732E;&#xFF1A;<a class="reference external" href="http://www.sqlalchemy.org/trac/ticket/2793">&#xFF03;2793</a></span></p></li><li><p id="change-0.9.0b1-11"><span class="yiyi-st" id="yiyi-1288"><span class="target" id="change-8ee7cac9783d870a07c279041dd11bc9"><strong>[orm] [feature] </strong></span>The <code class="docutils literal"><span class="pre">eager_defaults</span></code> flag of <a class="reference internal" href="orm_mapping_api.html#sqlalchemy.orm.mapper.Mapper" title="sqlalchemy.orm.mapper.Mapper"><code class="xref py py-class docutils literal"><span class="pre">Mapper</span></code></a> will now allow the newly generated default values to be fetched using an inline RETURNING clause, rather than a second SELECT statement, for backends that support RETURNING.<a class="changeset-link headerlink reference internal" href="#change-8ee7cac9783d870a07c279041dd11bc9">&#xB6;</a></span></p><p><span class="yiyi-st" id="yiyi-1289">&#x53C2;&#x8003;&#x6587;&#x732E;&#xFF1A;<a class="reference external" href="http://www.sqlalchemy.org/trac/ticket/2793">&#xFF03;2793</a></span></p></li><li><p id="change-0.9.0b1-12"><span class="yiyi-st" id="yiyi-1290"><span class="target" id="change-03c6ce5802904e9ebc488ea78ab24b78"><strong>[orm] [feature] </strong></span>&#x4E3A;<a class="reference internal" href="orm_session_api.html#sqlalchemy.orm.session.Session" title="sqlalchemy.orm.session.Session"><code class="xref py py-class docutils literal"><span class="pre">Session</span></code></a>&#x6DFB;&#x52A0;&#x4E86;&#x4E00;&#x4E2A;&#x65B0;&#x5C5E;&#x6027;<a class="reference internal" href="orm_session_api.html#sqlalchemy.orm.session.Session.info" title="sqlalchemy.orm.session.Session.info"><code class="xref py py-attr docutils literal"><span class="pre">Session.info</span></code></a>&#xFF1B;&#x8FD9;&#x662F;&#x4E00;&#x4E2A;&#x5B57;&#x5178;&#xFF0C;&#x5E94;&#x7528;&#x7A0B;&#x5E8F;&#x53EF;&#x4EE5;&#x5B58;&#x50A8;&#x672C;&#x5730;&#x5230;<a class="reference internal" href="orm_session_api.html#sqlalchemy.orm.session.Session" title="sqlalchemy.orm.session.Session"><code class="xref py py-class docutils literal"><span class="pre">Session</span></code></a>&#x7684;&#x4EFB;&#x610F;&#x6570;&#x636E;&#x3002;</span><span class="yiyi-st" id="yiyi-1291">The contents of <a class="reference internal" href="orm_session_api.html#sqlalchemy.orm.session.Session.info" title="sqlalchemy.orm.session.Session.info"><code class="xref py py-attr docutils literal"><span class="pre">Session.info</span></code></a> can be also be initialized using the <code class="docutils literal"><span class="pre">info</span></code> argument of <a class="reference internal" href="orm_session_api.html#sqlalchemy.orm.session.Session" title="sqlalchemy.orm.session.Session"><code class="xref py py-class docutils literal"><span class="pre">Session</span></code></a> or <a class="reference internal" href="orm_session_api.html#sqlalchemy.orm.session.sessionmaker" title="sqlalchemy.orm.session.sessionmaker"><code class="xref py py-class docutils literal"><span class="pre">sessionmaker</span></code></a>.<a class="changeset-link headerlink reference internal" href="#change-03c6ce5802904e9ebc488ea78ab24b78">&#xB6;</a></span></p><p></p></li><li><p id="change-0.9.0b1-13"><span class="yiyi-st" id="yiyi-1292"><span class="target" id="change-3fab266a28f41e49452166ecc367921d"><strong>[orm] [feature] </strong></span>&#x73B0;&#x5728;&#x5B9E;&#x73B0;&#x4E86;&#x5220;&#x9664;&#x4E8B;&#x4EF6;&#x4FA6;&#x542C;&#x5668;&#x3002;</span><span class="yiyi-st" id="yiyi-1293">&#x8BE5;&#x529F;&#x80FD;&#x901A;&#x8FC7;<a class="reference internal" href="core_event.html#sqlalchemy.event.remove" title="sqlalchemy.event.remove"><code class="xref py py-func docutils literal"><span class="pre">event.remove()</span></code></a>&#x51FD;&#x6570;&#x63D0;&#x4F9B;&#x3002;</span></p><div class="admonition seealso"><p class="first admonition-title"><span class="yiyi-st" id="yiyi-1294">&#x4E5F;&#x53EF;&#x4EE5;&#x770B;&#x770B;</span></p><p class="last"><span class="yiyi-st" id="yiyi-1295"><a class="reference internal" href="migration_09.html#feature-2268"><span>Event Removal API</span></a></span></p></div><span class="yiyi-st" id="yiyi-1297"> <a class="changeset-link headerlink reference internal" href="#change-3fab266a28f41e49452166ecc367921d">&#xB6;</a></span><p><span class="yiyi-st" id="yiyi-1296">&#x53C2;&#x8003;&#x6587;&#x732E;&#xFF1A;<a class="reference external" href="http://www.sqlalchemy.org/trac/ticket/2268">&#xFF03;2268</a></span></p></li><li><p id="change-0.9.0b1-14"><span class="yiyi-st" id="yiyi-1298"><span class="target" id="change-0dc7109a8a2359edd8e21d7ed70a1462"><strong>[orm] [feature] </strong></span>&#x5C5E;&#x6027;&#x4E8B;&#x4EF6;&#x901A;&#x8FC7;<code class="xref py py-class docutils literal"><span class="pre">AttributeImpl</span></code>&#x4F5C;&#x4E3A;&#x201C;&#x542F;&#x52A8;&#x5668;&#x201D;&#x6807;&#x8BB0;&#x4F20;&#x9012;&#x7684;&#x673A;&#x5236;&#x5DF2;&#x66F4;&#x6539;&#xFF1B;&#x8BE5;&#x5BF9;&#x8C61;&#x73B0;&#x5728;&#x662F;&#x4E00;&#x4E2A;&#x540D;&#x4E3A;<a class="reference internal" href="orm_internals.html#sqlalchemy.orm.attributes.Event" title="sqlalchemy.orm.attributes.Event"><code class="xref py py-class docutils literal"><span class="pre">attributes.Event</span></code></a>&#x7684;&#x7279;&#x5B9A;&#x4E8E;&#x4E8B;&#x4EF6;&#x7684;&#x5BF9;&#x8C61;&#x3002;</span><span class="yiyi-st" id="yiyi-1299">&#x6B64;&#x5916;&#xFF0C;&#x5C5E;&#x6027;&#x7CFB;&#x7EDF;&#x4E0D;&#x518D;&#x57FA;&#x4E8E;&#x5339;&#x914D;&#x7684;&#x201C;&#x542F;&#x52A8;&#x5668;&#x201D;&#x4EE4;&#x724C;&#x505C;&#x6B62;&#x4E8B;&#x4EF6;&#xFF1B;&#x8FD9;&#x4E2A;&#x903B;&#x8F91;&#x5DF2;&#x7ECF;&#x88AB;&#x79FB;&#x52A8;&#x5230;&#x7279;&#x5B9A;&#x4E8E;ORM backref&#x4E8B;&#x4EF6;&#x5904;&#x7406;&#x7A0B;&#x5E8F;&#xFF0C;&#x8FD9;&#x662F;&#x4E00;&#x4E2A;&#x5C5E;&#x6027;&#x4E8B;&#x4EF6;&#x91CD;&#x65B0;&#x4F20;&#x64AD;&#x5230;&#x968F;&#x540E;&#x7684;append / set / remove&#x64CD;&#x4F5C;&#x7684;&#x5178;&#x578B;&#x6E90;&#x3002;</span><span class="yiyi-st" id="yiyi-1300">&#x5982;&#x679C;&#x65B9;&#x6848;&#x4E0D;&#x4F7F;&#x7528;backref&#x5904;&#x7406;&#x7A0B;&#x5E8F;&#xFF0C;&#x90A3;&#x4E48;&#x6A21;&#x62DF;backrefs&#x884C;&#x4E3A;&#x7684;&#x6700;&#x7EC8;&#x7528;&#x6237;&#x4EE3;&#x7801;&#x73B0;&#x5728;&#x5FC5;&#x987B;&#x786E;&#x4FDD;&#x9012;&#x5F52;&#x4E8B;&#x4EF6;&#x4F20;&#x64AD;&#x65B9;&#x6848;&#x88AB;&#x6682;&#x505C;&#x3002;</span><span class="yiyi-st" id="yiyi-1301">&#x4F7F;&#x7528;&#x8FD9;&#x4E2A;&#x65B0;&#x7CFB;&#x7EDF;&#xFF0C;&#x5F53;&#x4E00;&#x4E2A;&#x5BF9;&#x8C61;&#x88AB;&#x8FFD;&#x52A0;&#x5230;&#x4E00;&#x4E2A;&#x96C6;&#x5408;&#x4E0A;&#x65F6;&#xFF0C;backref&#x5904;&#x7406;&#x7A0B;&#x5E8F;&#x73B0;&#x5728;&#x53EF;&#x4EE5;&#x6267;&#x884C;&#x201C;&#x53CC;&#x8DF3;&#x201D;&#x64CD;&#x4F5C;&#xFF0C;&#x4E0E;&#x4E00;&#x4E2A;&#x65B0;&#x7684;&#x591A;&#x5BF9;&#x4E00;&#x5173;&#x8054;&#xFF0C;&#x4E0E;&#x4E4B;&#x524D;&#x7684;&#x591A;&#x5BF9;&#x4E00;&#x5173;&#x8054;&#xFF0C;&#x7136;&#x540E;&#x4ECE;&#x4EE5;&#x524D;&#x7684;&#x96C6;&#x5408;&#x4E2D;&#x5220;&#x9664;&#x3002;</span><span class="yiyi-st" id="yiyi-1302">&#x5728;&#x6B64;&#x66F4;&#x6539;&#x4E4B;&#x524D;&#xFF0C;&#x4E0D;&#x4F1A;&#x53D1;&#x751F;&#x4ECE;&#x4E0A;&#x4E00;&#x4E2A;&#x96C6;&#x5408;&#x4E2D;&#x5220;&#x9664;&#x7684;&#x6700;&#x540E;&#x4E00;&#x6B65;&#x3002;</span></p><div class="admonition seealso"><p class="first admonition-title"><span class="yiyi-st" id="yiyi-1303">&#x4E5F;&#x53EF;&#x4EE5;&#x770B;&#x770B;</span></p><p class="last"><span class="yiyi-st" id="yiyi-1304"><a class="reference internal" href="migration_09.html#migration-2789"><span>Backref handlers can now propagate more than one level deep</span></a></span></p></div><span class="yiyi-st" id="yiyi-1306"> <a class="changeset-link headerlink reference internal" href="#change-0dc7109a8a2359edd8e21d7ed70a1462">&#xB6;</a></span><p><span class="yiyi-st" id="yiyi-1305">&#x53C2;&#x8003;&#x6587;&#x732E;&#xFF1A;<a class="reference external" href="http://www.sqlalchemy.org/trac/ticket/2789">&#xFF03;2789</a></span></p></li><li><p id="change-0.9.0b1-15"><span class="yiyi-st" id="yiyi-1307"><span class="target" id="change-0a9cba0c775121ff87389c9d5a411292"><strong>[orm] [feature] </strong></span>A major change regarding how the ORM constructs joins where the right side is itself a join or left outer join. </span><span class="yiyi-st" id="yiyi-1308">The ORM is now configured to allow simple nesting of joins of the form <code class="docutils literal"><span class="pre">a</span> <span class="pre">JOIN</span> <span class="pre">(b</span> <span class="pre">JOIN</span> <span class="pre">c</span> <span class="pre">ON</span> <span class="pre">b.id=c.id)</span> <span class="pre">ON</span> <span class="pre">a.id=b.id</span></code>, rather than forcing the right side into a <code class="docutils literal"><span class="pre">SELECT</span></code> subquery. </span><span class="yiyi-st" id="yiyi-1309">&#x8FD9;&#x5E94;&#x8BE5;&#x5141;&#x8BB8;&#x5927;&#x591A;&#x6570;&#x540E;&#x7AEF;&#x663E;&#x7740;&#x63D0;&#x9AD8;&#x6027;&#x80FD;&#xFF0C;&#x7279;&#x522B;&#x662F;MySQL&#x3002;</span><span class="yiyi-st" id="yiyi-1310">&#x591A;&#x5E74;&#x6765;&#x4E00;&#x76F4;&#x5B58;&#x5728;&#x8FD9;&#x79CD;&#x53D8;&#x5316;&#x7684;&#x6570;&#x636E;&#x5E93;&#x540E;&#x7AEF;SQLite&#x73B0;&#x5728;&#x901A;&#x8FC7;&#x5C06;<code class="docutils literal"><span class="pre">SELECT</span></code>&#x5B50;&#x67E5;&#x8BE2;&#x7684;&#x751F;&#x6210;&#x4ECE;ORM&#x79FB;&#x52A8;&#x5230;SQL&#x7F16;&#x8BD1;&#x5668;&#x6765;&#x89E3;&#x51B3;&#xFF1B;&#x6240;&#x4EE5;SQLite&#x4E0A;&#x7684;&#x53F3;&#x5D4C;&#x5957;&#x8FDE;&#x63A5;&#x6700;&#x7EC8;&#x4ECD;&#x7136;&#x4F1A;&#x4EE5;<code class="docutils literal"><span class="pre">SELECT</span></code>&#x5448;&#x73B0;&#xFF0C;&#x800C;&#x6240;&#x6709;&#x5176;&#x4ED6;&#x540E;&#x7AEF;&#x4E0D;&#x518D;&#x53D7;&#x6B64;&#x66FF;&#x4EE3;&#x65B9;&#x6CD5;&#x7684;&#x5F71;&#x54CD;&#x3002;</span></p><p><span class="yiyi-st" id="yiyi-1311">&#x4F5C;&#x4E3A;&#x8FD9;&#x79CD;&#x6539;&#x53D8;&#x7684;&#x4E00;&#x90E8;&#x5206;&#xFF0C;&#x5DF2;&#x7ECF;&#x5728;<a class="reference internal" href="orm_query.html#sqlalchemy.orm.aliased" title="sqlalchemy.orm.aliased"><code class="xref py py-func docutils literal"><span class="pre">orm.aliased()</span></code></a>&#xFF0C;<a class="reference internal" href="core_selectable.html#sqlalchemy.sql.expression.Join.alias" title="sqlalchemy.sql.expression.Join.alias"><code class="xref py py-meth docutils literal"><span class="pre">Join.alias()</span></code></a>&#x4E2D;&#x6DFB;&#x52A0;&#x4E86;&#x4E00;&#x4E2A;&#x65B0;&#x7684;&#x53C2;&#x6570;<code class="docutils literal"><span class="pre">flat=True</span></code>&#x548C;<a class="reference internal" href="orm_inheritance.html#sqlalchemy.orm.with_polymorphic" title="sqlalchemy.orm.with_polymorphic"><code class="xref py py-func docutils literal"><span class="pre">orm.with_polymorphic()</span></code></a>&#x51FD;&#x6570;&#xFF0C;&#x8BE5;&#x51FD;&#x6570;&#x5141;&#x8BB8;&#x751F;&#x6210;&#x4E00;&#x4E2A;JOIN&#x7684;&#x201C;&#x522B;&#x540D;&#x201D;&#xFF0C;&#x5B83;&#x5C06;&#x533F;&#x540D;&#x522B;&#x540D;&#x5E94;&#x7528;&#x4E8E;&#x8FDE;&#x63A5;&#x4E2D;&#x7684;&#x6BCF;&#x4E2A;&#x7EC4;&#x4EF6;&#x8868;&#xFF0C;&#x800C;&#x4E0D;&#x662F;&#x751F;&#x6210;&#x5B50;&#x67E5;&#x8BE2;&#x3002;</span></p><div class="admonition seealso"><p class="first admonition-title"><span class="yiyi-st" id="yiyi-1312">&#x4E5F;&#x53EF;&#x4EE5;&#x770B;&#x770B;</span></p><p class="last"><span class="yiyi-st" id="yiyi-1313"><a class="reference internal" href="migration_09.html#feature-joins-09"><span>Many JOIN and LEFT OUTER JOIN expressions will no longer be wrapped in (SELECT * FROM ..) AS ANON_1</span></a>&#x4E2D;</span></p></div><span class="yiyi-st" id="yiyi-1315"> <a class="changeset-link headerlink reference internal" href="#change-0a9cba0c775121ff87389c9d5a411292">&#xB6;</a></span><p><span class="yiyi-st" id="yiyi-1314">&#x53C2;&#x8003;&#x6587;&#x732E;&#xFF1A;<a class="reference external" href="http://www.sqlalchemy.org/trac/ticket/2587">&#xFF03;2587</a></span></p></li><li><p id="change-0.9.0b1-16"><span class="yiyi-st" id="yiyi-1316"><span class="target" id="change-a0c2b843b3a7a6f41d90792cf10e7e3d"><strong>[orm] [bug] </strong></span>Fixed bug where using an annotation such as <a class="reference internal" href="orm_relationship_api.html#sqlalchemy.orm.remote" title="sqlalchemy.orm.remote"><code class="xref py py-func docutils literal"><span class="pre">remote()</span></code></a> or <a class="reference internal" href="orm_relationship_api.html#sqlalchemy.orm.foreign" title="sqlalchemy.orm.foreign"><code class="xref py py-func docutils literal"><span class="pre">foreign()</span></code></a> on a <a class="reference internal" href="core_metadata.html#sqlalchemy.schema.Column" title="sqlalchemy.schema.Column"><code class="xref py py-class docutils literal"><span class="pre">Column</span></code></a> before association with a parent <a class="reference internal" href="core_metadata.html#sqlalchemy.schema.Table" title="sqlalchemy.schema.Table"><code class="xref py py-class docutils literal"><span class="pre">Table</span></code></a> could produce issues related to the parent table not rendering within joins, due to the inherent copy operation performed by an annotation.<a class="changeset-link headerlink reference internal" href="#change-a0c2b843b3a7a6f41d90792cf10e7e3d">&#xB6;</a></span></p><p><span class="yiyi-st" id="yiyi-1317">This change is also <strong>backported</strong> to: 0.8.3</span></p><p><span class="yiyi-st" id="yiyi-1318">&#x53C2;&#x8003;&#x6587;&#x732E;&#xFF1A;<a class="reference external" href="http://www.sqlalchemy.org/trac/ticket/2813">&#xFF03;2813</a></span></p></li><li><p id="change-0.9.0b1-17"><span class="yiyi-st" id="yiyi-1319"><span class="target" id="change-ef9f61eaff6e736d97c7a7096da10f37"><strong>[orm] [bug] </strong></span>Fixed bug where <a class="reference internal" href="orm_query.html#sqlalchemy.orm.query.Query.exists" title="sqlalchemy.orm.query.Query.exists"><code class="xref py py-meth docutils literal"><span class="pre">Query.exists()</span></code></a> failed to work correctly without any WHERE criterion. </span><span class="yiyi-st" id="yiyi-1320">&#x793C;&#x8C8C;&#x5F17;&#x62C9;&#x57FA;&#x7C73;&#x5C14;Magamedov&#x3002;<a class="changeset-link headerlink reference internal" href="#change-ef9f61eaff6e736d97c7a7096da10f37">&#xB6;</a></span></p><p><span class="yiyi-st" id="yiyi-1321">This change is also <strong>backported</strong> to: 0.8.3</span></p><p><span class="yiyi-st" id="yiyi-1322">&#x53C2;&#x8003;&#x6587;&#x732E;&#xFF1A;<a class="reference external" href="http://www.sqlalchemy.org/trac/ticket/2818">&#xFF03;2818</a></span></p></li><li><p id="change-0.9.0b1-18"><span class="yiyi-st" id="yiyi-1323"><span class="target" id="change-4315e5745177d007461f7bc0247cbb12"><strong>[orm] [bug] </strong></span>Fixed a potential issue in an ordered sequence implementation used by the ORM to iterate mapper hierarchies; under the Jython interpreter this implementation wasn&#x2019;t ordered, even though cPython and Pypy maintained ordering.<a class="changeset-link headerlink reference internal" href="#change-4315e5745177d007461f7bc0247cbb12">&#xB6;</a></span></p><p><span class="yiyi-st" id="yiyi-1324">This change is also <strong>backported</strong> to: 0.8.3</span></p><p><span class="yiyi-st" id="yiyi-1325">&#x53C2;&#x8003;&#x6587;&#x732E;&#xFF1A;<a class="reference external" href="http://www.sqlalchemy.org/trac/ticket/2794">&#xFF03;2794</a></span></p></li><li><p id="change-0.9.0b1-19"><span class="yiyi-st" id="yiyi-1326"><span class="target" id="change-e0cad55b3c8cd8dfb6d0ee70f9dfe7d0"><strong>[orm] [bug] </strong></span>Fixed bug in ORM-level event registration where the &#x201C;raw&#x201D; or &#x201C;propagate&#x201D; flags could potentially be mis-configured in some &#x201C;unmapped base class&#x201D; configurations.<a class="changeset-link headerlink reference internal" href="#change-e0cad55b3c8cd8dfb6d0ee70f9dfe7d0">&#xB6;</a></span></p><p><span class="yiyi-st" id="yiyi-1327">This change is also <strong>backported</strong> to: 0.8.3</span></p><p><span class="yiyi-st" id="yiyi-1328">&#x53C2;&#x8003;&#x6587;&#x732E;&#xFF1A;<a class="reference external" href="http://www.sqlalchemy.org/trac/ticket/2786">&#xFF03;2786</a></span></p></li><li><p id="change-0.9.0b1-20"><span class="yiyi-st" id="yiyi-1329"><span class="target" id="change-e1a708dde5288510230755ac690de45b"><strong>[orm] [bug] </strong></span>&#x6027;&#x80FD;&#x4FEE;&#x6B63;&#x4E0E;&#x52A0;&#x8F7D;&#x6620;&#x5C04;&#x5B9E;&#x4F53;&#x65F6;&#x4F7F;&#x7528;<a class="reference internal" href="orm_loading_columns.html#sqlalchemy.orm.defer" title="sqlalchemy.orm.defer"><code class="xref py py-func docutils literal"><span class="pre">defer()</span></code></a>&#x9009;&#x9879;&#x6709;&#x5173;&#x3002;</span><span class="yiyi-st" id="yiyi-1330">&#x5728;&#x52A0;&#x8F7D;&#x65F6;&#x5C06;&#x6BCF;&#x4E2A;&#x5BF9;&#x8C61;&#x7684;&#x5EF6;&#x8FDF;&#x53EF;&#x8C03;&#x7528;&#x5E94;&#x7528;&#x4E8E;&#x5B9E;&#x4F8B;&#x7684;&#x51FD;&#x6570;&#x5F00;&#x9500;&#x663E;&#x7740;&#x9AD8;&#x4E8E;&#x4EC5;&#x4ECE;&#x8BE5;&#x884C;&#x52A0;&#x8F7D;&#x6570;&#x636E;&#x7684;&#x5F00;&#x9500;&#xFF08;&#x8BF7;&#x6CE8;&#x610F;&#xFF0C;<code class="docutils literal"><span class="pre">defer()</span></code>&#x65E8;&#x5728;&#x51CF;&#x5C11;DB /&#x7F51;&#x7EDC;&#x5F00;&#x9500;&#xFF0C;&#x4E0D;&#x4E00;&#x5B9A;&#x51FD;&#x6570;&#x8C03;&#x7528;&#x8BA1;&#x6570;&#xFF09;&#xFF1B;&#x5728;&#x6240;&#x6709;&#x60C5;&#x51B5;&#x4E0B;&#xFF0C;&#x51FD;&#x6570;&#x8C03;&#x7528;&#x5F00;&#x9500;&#x90FD;&#x5C0F;&#x4E8E;&#x4ECE;&#x5217;&#x4E2D;&#x52A0;&#x8F7D;&#x6570;&#x636E;&#x7684;&#x5F00;&#x9500;&#x3002;</span><span class="yiyi-st" id="yiyi-1331">&#x6BCF;&#x4E2A;&#x8D1F;&#x8F7D;&#x521B;&#x5EFA;&#x7684;&#x201C;&#x60F0;&#x6027;&#x53EF;&#x8C03;&#x7528;&#x201D;&#x5BF9;&#x8C61;&#x7684;&#x6570;&#x91CF;&#x4E5F;&#x4ECE;N&#xFF08;&#x7ED3;&#x679C;&#x4E2D;&#x7684;&#x603B;&#x5EF6;&#x8FDF;&#x503C;&#xFF09;&#x51CF;&#x5C11;&#x5230;1&#xFF08;&#x5EF6;&#x8FDF;&#x5217;&#x7684;&#x603B;&#x6570;&#xFF09;&#x3002;<a class="changeset-link headerlink reference internal" href="#change-e1a708dde5288510230755ac690de45b">&#xB6;</a></span></p><p><span class="yiyi-st" id="yiyi-1332">This change is also <strong>backported</strong> to: 0.8.3</span></p><p><span class="yiyi-st" id="yiyi-1333">&#x53C2;&#x8003;&#x6587;&#x732E;&#xFF1A;<a class="reference external" href="http://www.sqlalchemy.org/trac/ticket/2778">&#xFF03;2778</a></span></p></li><li><p id="change-0.9.0b1-21"><span class="yiyi-st" id="yiyi-1334"><span class="target" id="change-8a5cddc8cb97dec46f5e9e5bf4c4d922"><strong>[orm] [bug] </strong></span>Fixed bug whereby attribute history functions would fail when an object we moved from &#x201C;persistent&#x201D; to &#x201C;pending&#x201D; using the <a class="reference internal" href="orm_session_api.html#sqlalchemy.orm.session.make_transient" title="sqlalchemy.orm.session.make_transient"><code class="xref py py-func docutils literal"><span class="pre">make_transient()</span></code></a> function, for operations involving collection-based backrefs.<a class="changeset-link headerlink reference internal" href="#change-8a5cddc8cb97dec46f5e9e5bf4c4d922">&#xB6;</a></span></p><p><span class="yiyi-st" id="yiyi-1335">This change is also <strong>backported</strong> to: 0.8.3</span></p><p><span class="yiyi-st" id="yiyi-1336">&#x53C2;&#x8003;&#x6587;&#x732E;&#xFF1A;<a class="reference external" href="http://www.sqlalchemy.org/trac/ticket/2773">&#xFF03;2773</a></span></p></li><li><p id="change-0.9.0b1-22"><span class="yiyi-st" id="yiyi-1337"><span class="target" id="change-dd4b79b5d51e7c3f475fb2adec886c01"><strong>[orm] [bug] </strong></span>&#x5C1D;&#x8BD5;&#x5237;&#x65B0;&#x7EE7;&#x627F;&#x7C7B;&#x7684;&#x5BF9;&#x8C61;&#x65F6;&#x53D1;&#x51FA;&#x4E00;&#x4E2A;&#x8B66;&#x544A;&#xFF0C;&#x5176;&#x4E2D;&#x591A;&#x6001;&#x9274;&#x522B;&#x7B26;&#x5DF2;&#x88AB;&#x5206;&#x914D;&#x7ED9;&#x8BE5;&#x7C7B;&#x65E0;&#x6548;&#x7684;&#x503C;<a class="changeset-link headerlink reference internal" href="#change-dd4b79b5d51e7c3f475fb2adec886c01">&#xB6; T2&gt;</a></span></p><p><span class="yiyi-st" id="yiyi-1338">&#x8FD9;&#x4E2A;&#x6539;&#x53D8;&#x4E5F;&#x88AB;<strong>backported</strong>&#x4FEE;&#x6539;&#x4E3A;&#xFF1A;0.8.2</span></p><p><span class="yiyi-st" id="yiyi-1339">&#x53C2;&#x8003;&#x6587;&#x732E;&#xFF1A;<a class="reference external" href="http://www.sqlalchemy.org/trac/ticket/2750">&#xFF03;2750</a></span></p></li><li><p id="change-0.9.0b1-23"><span class="yiyi-st" id="yiyi-1340"><span class="target" id="change-d8b5c05c64292219e59d34a4d1d9edfe"><strong>[orm] [bug] </strong></span>Fixed bug in polymorphic SQL generation where multiple joined-inheritance entities against the same base class joined to each other as well would not track columns on the base table independently of each other if the string of joins were more than two entities long.<a class="changeset-link headerlink reference internal" href="#change-d8b5c05c64292219e59d34a4d1d9edfe">&#xB6;</a></span></p><p><span class="yiyi-st" id="yiyi-1341">&#x8FD9;&#x4E2A;&#x6539;&#x53D8;&#x4E5F;&#x88AB;<strong>backported</strong>&#x4FEE;&#x6539;&#x4E3A;&#xFF1A;0.8.2</span></p><p><span class="yiyi-st" id="yiyi-1342">&#x53C2;&#x8003;&#x6587;&#x732E;&#xFF1A;<a class="reference external" href="http://www.sqlalchemy.org/trac/ticket/2759">&#xFF03;2759</a></span></p></li><li><p id="change-0.9.0b1-24"><span class="yiyi-st" id="yiyi-1343"><span class="target" id="change-0df6c969856f2e6e6ddbed5c093b58f7"><strong>[orm] [bug] </strong></span>Fixed bug where sending a composite attribute into <a class="reference internal" href="orm_query.html#sqlalchemy.orm.query.Query.order_by" title="sqlalchemy.orm.query.Query.order_by"><code class="xref py py-meth docutils literal"><span class="pre">Query.order_by()</span></code></a> would produce a parenthesized expression not accepted by some databases.<a class="changeset-link headerlink reference internal" href="#change-0df6c969856f2e6e6ddbed5c093b58f7">&#xB6;</a></span></p><p><span class="yiyi-st" id="yiyi-1344">&#x8FD9;&#x4E2A;&#x6539;&#x53D8;&#x4E5F;&#x88AB;<strong>backported</strong>&#x4FEE;&#x6539;&#x4E3A;&#xFF1A;0.8.2</span></p><p><span class="yiyi-st" id="yiyi-1345">&#x53C2;&#x8003;&#x6587;&#x732E;&#xFF1A;<a class="reference external" href="http://www.sqlalchemy.org/trac/ticket/2754">&#xFF03;2754</a></span></p></li><li><p id="change-0.9.0b1-25"><span class="yiyi-st" id="yiyi-1346"><span class="target" id="change-62648da125cd1e7e856bccba57c1c4b9"><strong>[orm] [bug] </strong></span>&#x4FEE;&#x590D;&#x4E86;&#x590D;&#x5408;&#x5C5E;&#x6027;&#x4E0E;<a class="reference internal" href="orm_query.html#sqlalchemy.orm.aliased" title="sqlalchemy.orm.aliased"><code class="xref py py-func docutils literal"><span class="pre">aliased()</span></code></a>&#x51FD;&#x6570;&#x4E4B;&#x95F4;&#x7684;&#x4EA4;&#x4E92;&#x3002;</span><span class="yiyi-st" id="yiyi-1347">&#x4EE5;&#x524D;&#xFF0C;&#x5F53;&#x5E94;&#x7528;&#x522B;&#x540D;&#x65F6;&#xFF0C;&#x7EC4;&#x5408;&#x5C5E;&#x6027;&#x5728;&#x6BD4;&#x8F83;&#x64CD;&#x4F5C;&#x4E2D;&#x65E0;&#x6CD5;&#x6B63;&#x786E;&#x5DE5;&#x4F5C;&#x3002;<a class="changeset-link headerlink reference internal" href="#change-62648da125cd1e7e856bccba57c1c4b9">&#xB6;</a></span></p><p><span class="yiyi-st" id="yiyi-1348">&#x8FD9;&#x4E2A;&#x6539;&#x53D8;&#x4E5F;&#x88AB;<strong>backported</strong>&#x4FEE;&#x6539;&#x4E3A;&#xFF1A;0.8.2</span></p><p><span class="yiyi-st" id="yiyi-1349">&#x53C2;&#x8003;&#x6587;&#x732E;&#xFF1A;<a class="reference external" href="http://www.sqlalchemy.org/trac/ticket/2755">&#xFF03;2755</a></span></p></li><li><p id="change-0.9.0b1-26"><span class="yiyi-st" id="yiyi-1350"><span class="target" id="change-c6ec101b2fa17b87ed51b2bcc64f1785"><strong>[orm] [bug] [ext] </strong></span>Fixed bug where <a class="reference internal" href="orm_extensions_mutable.html#sqlalchemy.ext.mutable.MutableDict" title="sqlalchemy.ext.mutable.MutableDict"><code class="xref py py-class docutils literal"><span class="pre">MutableDict</span></code></a> didn&#x2019;t report a change event when <code class="docutils literal"><span class="pre">clear()</span></code> was called.<a class="changeset-link headerlink reference internal" href="#change-c6ec101b2fa17b87ed51b2bcc64f1785">&#xB6;</a></span></p><p><span class="yiyi-st" id="yiyi-1351">&#x8FD9;&#x4E2A;&#x6539;&#x53D8;&#x4E5F;&#x88AB;<strong>backported</strong>&#x4FEE;&#x6539;&#x4E3A;&#xFF1A;0.8.2</span></p><p><span class="yiyi-st" id="yiyi-1352">&#x53C2;&#x8003;&#x6587;&#x732E;&#xFF1A;<a class="reference external" href="http://www.sqlalchemy.org/trac/ticket/2730">&#xFF03;2730</a></span></p></li><li><p id="change-0.9.0b1-27"><span class="yiyi-st" id="yiyi-1353"><span class="target" id="change-e7e01f7d15796a940fa6608c2a24096c"><strong>[orm] [bug] </strong></span>Fixed bug where list instrumentation would fail to represent a setslice of <code class="docutils literal"><span class="pre">[0:0]</span></code> correctly, which in particular could occur when using <code class="docutils literal"><span class="pre">insert(0,</span> <span class="pre">item)</span></code> with the association proxy. </span><span class="yiyi-st" id="yiyi-1354">&#x7531;&#x4E8E;Python&#x96C6;&#x5408;&#x4E2D;&#x7684;&#x4E00;&#x4E9B;&#x602A;&#x7656;&#xFF0C;&#x4F7F;&#x7528;Python 3&#x800C;&#x4E0D;&#x662F;2&#x7684;&#x53EF;&#x80FD;&#x6027;&#x66F4;&#x5927;&#x3002;<a class="changeset-link headerlink reference internal" href="#change-e7e01f7d15796a940fa6608c2a24096c">&#xB6;</a></span></p><p><span class="yiyi-st" id="yiyi-1355">This change is also <strong>backported</strong> to: 0.8.3, 0.7.11</span></p><p><span class="yiyi-st" id="yiyi-1356">&#x53C2;&#x8003;&#x6587;&#x732E;&#xFF1A;<a class="reference external" href="http://www.sqlalchemy.org/trac/ticket/2807">&#xFF03;2807</a></span></p></li><li><p id="change-0.9.0b1-28"><span class="yiyi-st" id="yiyi-1357"><span class="target" id="change-57cba062cac3ea3d4b9c20737f356339"><strong>[orm] [bug] </strong></span><a class="reference internal" href="orm_session_api.html#sqlalchemy.orm.attributes.get_history" title="sqlalchemy.orm.attributes.get_history"><code class="xref py py-func docutils literal"><span class="pre">attributes.get_history()</span></code></a> when used with a scalar column-mapped attribute will now honor the &#x201C;passive&#x201D; flag passed to it; as this defaults to <code class="docutils literal"><span class="pre">PASSIVE_OFF</span></code>, the function will by default query the database if the value is not present. </span><span class="yiyi-st" id="yiyi-1358">&#x8FD9;&#x662F;&#x4E00;&#x4E2A;&#x884C;&#x4E3A;&#x53D8;&#x5316;&#x4E0E;0.8&#x3002;</span></p><div class="admonition seealso"><p class="first admonition-title"><span class="yiyi-st" id="yiyi-1359">&#x4E5F;&#x53EF;&#x4EE5;&#x770B;&#x770B;</span></p><p class="last"><span class="yiyi-st" id="yiyi-1360"><a class="reference internal" href="migration_09.html#change-2787"><span>attributes.get_history() will query from the DB by default if value not present</span></a></span></p></div><span class="yiyi-st" id="yiyi-1362"> <a class="changeset-link headerlink reference internal" href="#change-57cba062cac3ea3d4b9c20737f356339">&#xB6;</a></span><p><span class="yiyi-st" id="yiyi-1361">&#x53C2;&#x8003;&#x6587;&#x732E;&#xFF1A;<a class="reference external" href="http://www.sqlalchemy.org/trac/ticket/2787">&#xFF03;2787</a></span></p></li><li><p id="change-0.9.0b1-29"><span class="yiyi-st" id="yiyi-1363"><span class="target" id="change-077302a77471edd431eee122414f0ff1"><strong>[orm] [bug] [associationproxy] </strong></span>Added additional criterion to the ==, != comparators, used with scalar values, for comparisons to None to also take into account the association record itself being non-present, in addition to the existing test for the scalar endpoint on the association record being NULL. </span><span class="yiyi-st" id="yiyi-1364">Previously, comparing <code class="docutils literal"><span class="pre">Cls.scalar</span> <span class="pre">==</span> <span class="pre">None</span></code> would return records for which <code class="docutils literal"><span class="pre">Cls.associated</span></code> were present and <code class="docutils literal"><span class="pre">Cls.associated.scalar</span></code> is None, but not rows for which <code class="docutils literal"><span class="pre">Cls.associated</span></code> is non-present. </span><span class="yiyi-st" id="yiyi-1365">More significantly, the inverse operation <code class="docutils literal"><span class="pre">Cls.scalar</span> <span class="pre">!=</span> <span class="pre">None</span></code> <em>would</em> return <code class="docutils literal"><span class="pre">Cls</span></code> rows for which <code class="docutils literal"><span class="pre">Cls.associated</span></code> was non-present.</span></p><p><span class="yiyi-st" id="yiyi-1366">&#x5BF9;<code class="docutils literal"><span class="pre">Cls.scalar</span> <span class="pre">&#xFF01;=</span> <span class="pre">&apos;somevalue&apos;</span></code>&#x7684;&#x60C5;&#x51B5;&#x4E5F;&#x8FDB;&#x884C;&#x4E86;&#x4FEE;&#x6539;&#xFF0C;&#x4F7F;&#x5176;&#x66F4;&#x50CF;&#x662F;&#x76F4;&#x63A5;&#x7684;SQL&#x6BD4;&#x8F83;&#xFF1B;&#x53EA;&#x6709;&#x5B58;&#x5728;<code class="docutils literal"><span class="pre">Cls.associated</span></code>&#x7684;&#x884C;&#x4EE5;&#x53CA;<code class="docutils literal"><span class="pre">Associated.scalar</span></code>&#x4E0D;&#x4E3A;NULL&#xFF0C;&#x5E76;&#x4E14;&#x4E0D;&#x7B49;&#x4E8E;<code class="docutils literal"><span class="pre">&apos;somevalue&apos;</span></code>&#x3002;</span><span class="yiyi-st" id="yiyi-1367">&#x4EE5;&#x524D;&#xFF0C;&#x8FD9;&#x5C06;&#x662F;&#x4E00;&#x4E2A;&#x7B80;&#x5355;&#x7684;<code class="docutils literal"><span class="pre">NOT</span> <span class="pre">EXISTS</span></code>&#x3002;</span></p><p><span class="yiyi-st" id="yiyi-1368">Also added a special use case where you can call <code class="docutils literal"><span class="pre">Cls.scalar.has()</span></code> with no arguments, when <code class="docutils literal"><span class="pre">Cls.scalar</span></code> is a column-based value - this returns whether or not <code class="docutils literal"><span class="pre">Cls.associated</span></code> has any rows present, regardless of whether or not <code class="docutils literal"><span class="pre">Cls.associated.scalar</span></code> is NULL or not.</span></p><div class="admonition seealso"><p class="first admonition-title"><span class="yiyi-st" id="yiyi-1369">&#x4E5F;&#x53EF;&#x4EE5;&#x770B;&#x770B;</span></p><p class="last"><span class="yiyi-st" id="yiyi-1370"><a class="reference internal" href="migration_09.html#migration-2751"><span>Association Proxy SQL Expression Improvements and Fixes</span></a></span></p></div><span class="yiyi-st" id="yiyi-1372"> <a class="changeset-link headerlink reference internal" href="#change-077302a77471edd431eee122414f0ff1">&#xB6;</a></span><p><span class="yiyi-st" id="yiyi-1371">&#x53C2;&#x8003;&#x6587;&#x732E;&#xFF1A;<a class="reference external" href="http://www.sqlalchemy.org/trac/ticket/2751">&#xFF03;2751</a></span></p></li><li><p id="change-0.9.0b1-30"><span class="yiyi-st" id="yiyi-1373"><span class="target" id="change-04b284e1a49effb2ce153e574641dfb0"><strong>[orm] [bug] </strong></span>Fixed an obscure bug where the wrong results would be fetched when joining/joinedloading across a many-to-many relationship to a single-table-inheriting subclass with a specific discriminator value, due to &#x201C;secondary&#x201D; rows that would come back. </span><span class="yiyi-st" id="yiyi-1374">&#x73B0;&#x5728;&#xFF0C;&#x201C;&#x8F85;&#x52A9;&#x201D;&#x8868;&#x548C;&#x53F3;&#x4FA7;&#x8868;&#x5728;&#x5185;&#x90E8;&#x52A0;&#x5165;&#x4E86;&#x591A;&#x5BF9;&#x591A;&#x5173;&#x7CFB;&#x7684;&#x6240;&#x6709;ORM&#x8FDE;&#x63A5;&#x7684;&#x62EC;&#x53F7;&#x5185;&#xFF0C;&#x4EE5;&#x4FBF;&#x53EF;&#x4EE5;&#x7CBE;&#x786E;&#x5730;&#x8FC7;&#x6EE4;&#x5DE6;&#x53F3;&#x8FDE;&#x63A5;&#x3002;</span><span class="yiyi-st" id="yiyi-1375">&#x6700;&#x7EC8;&#x901A;&#x8FC7;<a class="reference external" href="http://www.sqlalchemy.org/trac/ticket/2587">&#xFF03;2587</a>&#x4E2D;&#x6982;&#x8FF0;&#x7684;&#x53F3;&#x5D4C;&#x5957;&#x8FDE;&#x63A5;&#x89E3;&#x51B3;&#x4E86;&#x8FD9;&#x4E2A;&#x95EE;&#x9898;&#xFF0C;&#x4ECE;&#x800C;&#x5B9E;&#x73B0;&#x4E86;&#x8FD9;&#x4E00;&#x6539;&#x53D8;&#x3002;</span></p><div class="admonition seealso"><p class="first admonition-title"><span class="yiyi-st" id="yiyi-1376">&#x4E5F;&#x53EF;&#x4EE5;&#x770B;&#x770B;</span></p><p class="last"><span class="yiyi-st" id="yiyi-1377"><a class="reference internal" href="migration_09.html#feature-joins-09"><span>Many JOIN and LEFT OUTER JOIN expressions will no longer be wrapped in (SELECT * FROM ..) AS ANON_1</span></a>&#x4E2D;</span></p></div><span class="yiyi-st" id="yiyi-1379"> <a class="changeset-link headerlink reference internal" href="#change-04b284e1a49effb2ce153e574641dfb0">&#xB6;</a></span><p><span class="yiyi-st" id="yiyi-1378">&#x53C2;&#x8003;&#x6587;&#x732E;&#xFF1A;<a class="reference external" href="http://www.sqlalchemy.org/trac/ticket/2369">&#xFF03;2369</a></span></p></li><li><p id="change-0.9.0b1-31"><span class="yiyi-st" id="yiyi-1380"><span class="target" id="change-6856f4c9574c2e7f8cae541a3af37c17"><strong>[orm] [bug] </strong></span> <a class="reference internal" href="orm_query.html#sqlalchemy.orm.query.Query.select_from" title="sqlalchemy.orm.query.Query.select_from"><code class="xref py py-meth docutils literal"><span class="pre">Query.select_from()</span></code></a>&#x65B9;&#x6CD5;&#x7684;&#x201C;&#x81EA;&#x52A8;&#x522B;&#x540D;&#x201D;&#x884C;&#x4E3A;&#x5DF2;&#x88AB;&#x5173;&#x95ED;&#x3002;</span><span class="yiyi-st" id="yiyi-1381">&#x5177;&#x4F53;&#x884C;&#x4E3A;&#x73B0;&#x5728;&#x53EF;&#x4EE5;&#x901A;&#x8FC7;&#x4E00;&#x4E2A;&#x65B0;&#x65B9;&#x6CD5;<a class="reference internal" href="orm_query.html#sqlalchemy.orm.query.Query.select_entity_from" title="sqlalchemy.orm.query.Query.select_entity_from"><code class="xref py py-meth docutils literal"><span class="pre">Query.select_entity_from()</span></code></a>&#x83B7;&#x5F97;&#x3002;</span><span class="yiyi-st" id="yiyi-1382">&#x8FD9;&#x91CC;&#x7684;&#x81EA;&#x52A8;&#x522B;&#x540D;&#x884C;&#x4E3A;&#x4ECE;&#x6765;&#x6CA1;&#x6709;&#x5F88;&#x597D;&#x7684;&#x6587;&#x6863;&#x8BB0;&#x5F55;&#xFF0C;&#x5E76;&#x4E14;&#x901A;&#x5E38;&#x4E0D;&#x662F;&#x6211;&#x4EEC;&#x6240;&#x671F;&#x671B;&#x7684;&#xFF0C;&#x56E0;&#x4E3A;<a class="reference internal" href="orm_query.html#sqlalchemy.orm.query.Query.select_from" title="sqlalchemy.orm.query.Query.select_from"><code class="xref py py-meth docutils literal"><span class="pre">Query.select_from()</span></code></a>&#x5DF2;&#x7ECF;&#x53D8;&#x5F97;&#x66F4;&#x52A0;&#x503E;&#x5411;&#x4E8E;&#x63A7;&#x5236;JOIN&#x7684;&#x5448;&#x73B0;&#x65B9;&#x5F0F;&#x3002;</span><span class="yiyi-st" id="yiyi-1383"><a class="reference internal" href="orm_query.html#sqlalchemy.orm.query.Query.select_entity_from" title="sqlalchemy.orm.query.Query.select_entity_from"><code class="xref py py-meth docutils literal"><span class="pre">Query.select_entity_from()</span></code></a>&#x4E5F;&#x5C06;&#x5728;0.8&#x4E2D;&#x53EF;&#x7528;&#xFF0C;&#x4EE5;&#x4FBF;&#x4F9D;&#x8D56;&#x4E8E;&#x81EA;&#x52A8;&#x522B;&#x540D;&#x7684;&#x5E94;&#x7528;&#x7A0B;&#x5E8F;&#x53EF;&#x4EE5;&#x5C06;&#x5176;&#x5E94;&#x7528;&#x7A0B;&#x5E8F;&#x79FB;&#x81F3;&#x4F7F;&#x7528;&#x6B64;&#x65B9;&#x6CD5;&#x3002;</span></p><div class="admonition seealso"><p class="first admonition-title"><span class="yiyi-st" id="yiyi-1384">&#x4E5F;&#x53EF;&#x4EE5;&#x770B;&#x770B;</span></p><p class="last"><span class="yiyi-st" id="yiyi-1385"><a class="reference internal" href="migration_09.html#migration-2736"><span>Query.select_from() no longer applies the clause to corresponding entities</span></a></span></p></div><span class="yiyi-st" id="yiyi-1387"> <a class="changeset-link headerlink reference internal" href="#change-6856f4c9574c2e7f8cae541a3af37c17">&#xB6;</a></span><p><span class="yiyi-st" id="yiyi-1386">&#x53C2;&#x8003;&#x6587;&#x732E;&#xFF1A;<a class="reference external" href="http://www.sqlalchemy.org/trac/ticket/2736">&#xFF03;2736</a></span></p></li></ul></div><div class="section" id="change-0.9.0b1-orm-declarative"><h3><span class="yiyi-st" id="yiyi-1388">orm declarative <a class="headerlink" href="#change-0.9.0b1-orm-declarative" title="Permalink to this headline">&#xB6;</a></span></h3><ul class="simple"><li><p id="change-0.9.0b1-32"><span class="yiyi-st" id="yiyi-1389"><span class="target" id="change-928ad6a6f0e7bf2d61add68c58d2693a"><strong>[feature] [orm] [declarative] </strong></span>&#x6DFB;&#x52A0;&#x4E86;&#x4E00;&#x4E2A;&#x4FBF;&#x6377;&#x7C7B;&#x88C5;&#x9970;&#x5668;<a class="reference internal" href="orm_extensions_declarative_api.html#sqlalchemy.ext.declarative.as_declarative" title="sqlalchemy.ext.declarative.as_declarative"><code class="xref py py-func docutils literal"><span class="pre">as_declarative()</span></code></a>&#xFF0C;&#x662F;<a class="reference internal" href="orm_extensions_declarative_api.html#sqlalchemy.ext.declarative.declarative_base" title="sqlalchemy.ext.declarative.declarative_base"><code class="xref py py-func docutils literal"><span class="pre">declarative_base()</span></code></a>&#x57FA;&#x7C7B;&#x7528;&#x4E8E;&#x4F7F;&#x7528;&#x6F02;&#x4EAE;&#x7684;&#x7C7B;&#x88C5;&#x9970;&#x65B9;&#x6CD5;&#x6765;&#x5E94;&#x7528;&#x3002;<a class="changeset-link headerlink reference internal" href="#change-928ad6a6f0e7bf2d61add68c58d2693a">&#xB6;</a></span></p><p><span class="yiyi-st" id="yiyi-1390">This change is also <strong>backported</strong> to: 0.8.3</span></p><p></p></li><li><p id="change-0.9.0b1-33"><span class="yiyi-st" id="yiyi-1391"><span class="target" id="change-fa2beb10ebb49a0f8c15349cf5a7ca72"><strong>[feature] [orm] [declarative] </strong></span>ORM descriptors such as hybrid properties can now be referenced by name in a string argument used with <code class="docutils literal"><span class="pre">order_by</span></code>, <code class="docutils literal"><span class="pre">primaryjoin</span></code>, or similar in <a class="reference internal" href="orm_relationship_api.html#sqlalchemy.orm.relationship" title="sqlalchemy.orm.relationship"><code class="xref py py-func docutils literal"><span class="pre">relationship()</span></code></a>, in addition to column-bound attributes.<a class="changeset-link headerlink reference internal" href="#change-fa2beb10ebb49a0f8c15349cf5a7ca72">&#xB6;</a></span></p><p><span class="yiyi-st" id="yiyi-1392">&#x8FD9;&#x4E2A;&#x6539;&#x53D8;&#x4E5F;&#x88AB;<strong>backported</strong>&#x4FEE;&#x6539;&#x4E3A;&#xFF1A;0.8.2</span></p><p><span class="yiyi-st" id="yiyi-1393">&#x53C2;&#x8003;&#x6587;&#x732E;&#xFF1A;<a class="reference external" href="http://www.sqlalchemy.org/trac/ticket/2761">&#xFF03;2761</a></span></p></li></ul></div><div class="section" id="change-0.9.0b1-engine"><h3><span class="yiyi-st" id="yiyi-1394">&#x53D1;&#x52A8;&#x673A;<a class="headerlink" href="#change-0.9.0b1-engine" title="Permalink to this headline">&#xB6; T0&gt;</a></span></h3><ul class="simple"><li><p id="change-0.9.0b1-34"><span class="yiyi-st" id="yiyi-1395"><span class="target" id="change-e265af1f13013b87ee5cfd3dc4348c0f"><strong>[engine] [feature] </strong></span><code class="docutils literal"><span class="pre">repr()</span></code> for the <a class="reference internal" href="core_engines.html#sqlalchemy.engine.url.URL" title="sqlalchemy.engine.url.URL"><code class="xref py py-class docutils literal"><span class="pre">URL</span></code></a> of an <a class="reference internal" href="core_connections.html#sqlalchemy.engine.Engine" title="sqlalchemy.engine.Engine"><code class="xref py py-class docutils literal"><span class="pre">Engine</span></code></a> will now conceal the password using asterisks. </span><span class="yiyi-st" id="yiyi-1396">Courtesy Gunnlaugur&#xDE;&#xF3;rBriem&#x3002;<a class="changeset-link headerlink reference internal" href="#change-e265af1f13013b87ee5cfd3dc4348c0f">&#xB6;</a></span></p><p><span class="yiyi-st" id="yiyi-1397">This change is also <strong>backported</strong> to: 0.8.3</span></p><p><span class="yiyi-st" id="yiyi-1398">&#x53C2;&#x8003;&#x6587;&#x732E;&#xFF1A;<a class="reference external" href="http://www.sqlalchemy.org/trac/ticket/2821">&#xFF03;2821</a></span></p></li><li><p id="change-0.9.0b1-35"><span class="yiyi-st" id="yiyi-1399"><span class="target" id="change-d27b9f0357f06e9cf95fd1246c8052ae"><strong>[engine] [feature] </strong></span>&#x6DFB;&#x52A0;&#x5230;<a class="reference internal" href="core_events.html#sqlalchemy.events.ConnectionEvents" title="sqlalchemy.events.ConnectionEvents"><code class="xref py py-class docutils literal"><span class="pre">ConnectionEvents</span></code></a>&#x7684;&#x65B0;&#x4E8B;&#x4EF6;&#xFF1A;</span></p><ul><li><span class="yiyi-st" id="yiyi-1400"><a class="reference internal" href="core_events.html#sqlalchemy.events.ConnectionEvents.engine_connect" title="sqlalchemy.events.ConnectionEvents.engine_connect"><code class="xref py py-meth docutils literal"><span class="pre">ConnectionEvents.engine_connect()</span></code></a></span></li><li><span class="yiyi-st" id="yiyi-1401"><a class="reference internal" href="core_events.html#sqlalchemy.events.ConnectionEvents.set_connection_execution_options" title="sqlalchemy.events.ConnectionEvents.set_connection_execution_options"><code class="xref py py-meth docutils literal"><span class="pre">ConnectionEvents.set_connection_execution_options()</span></code></a></span></li><li><span class="yiyi-st" id="yiyi-1402"><a class="reference internal" href="core_events.html#sqlalchemy.events.ConnectionEvents.set_engine_execution_options" title="sqlalchemy.events.ConnectionEvents.set_engine_execution_options"><code class="xref py py-meth docutils literal"><span class="pre">ConnectionEvents.set_engine_execution_options()</span></code></a></span></li></ul><span class="yiyi-st" id="yiyi-1404"> <a class="changeset-link headerlink reference internal" href="#change-d27b9f0357f06e9cf95fd1246c8052ae">&#xB6;</a></span><p><span class="yiyi-st" id="yiyi-1403">&#x53C2;&#x8003;&#x6587;&#x732E;&#xFF1A;<a class="reference external" href="http://www.sqlalchemy.org/trac/ticket/2770">&#xFF03;2770</a></span></p></li><li><p id="change-0.9.0b1-36"><span class="yiyi-st" id="yiyi-1405"><span class="target" id="change-3d8267e6caa813efc145b77d062c77ad"><strong>[engine] [bug] [oracle] </strong></span>Dialect.initialize() is not called a second time if an <a class="reference internal" href="core_connections.html#sqlalchemy.engine.Engine" title="sqlalchemy.engine.Engine"><code class="xref py py-class docutils literal"><span class="pre">Engine</span></code></a> is recreated, due to a disconnect error. </span><span class="yiyi-st" id="yiyi-1406">&#x8FD9;&#x89E3;&#x51B3;&#x4E86;Oracle 8&#x65B9;&#x8A00;&#x4E2D;&#x7684;&#x4E00;&#x4E2A;&#x7279;&#x5B9A;&#x95EE;&#x9898;&#xFF0C;&#x4F46;&#x901A;&#x5E38;dialect.initialize()&#x9636;&#x6BB5;&#x5E94;&#x8BE5;&#x53EA;&#x80FD;&#x7528;&#x4E8E;&#x6BCF;&#x79CD;&#x65B9;&#x8A00;&#x4E00;&#x6B21;&#x3002;<a class="changeset-link headerlink reference internal" href="#change-3d8267e6caa813efc145b77d062c77ad">&#xB6;</a></span></p><p><span class="yiyi-st" id="yiyi-1407">This change is also <strong>backported</strong> to: 0.8.3</span></p><p><span class="yiyi-st" id="yiyi-1408">&#x53C2;&#x8003;&#x6587;&#x732E;&#xFF1A;<a class="reference external" href="http://www.sqlalchemy.org/trac/ticket/2776">&#xFF03;2776</a></span></p></li><li><p id="change-0.9.0b1-37"><span class="yiyi-st" id="yiyi-1409"><span class="target" id="change-155adccbc41937b6cb1bc83c19fd47ef"><strong>[engine] [bug] [pool] </strong></span>Fixed bug where <a class="reference internal" href="core_pooling.html#sqlalchemy.pool.QueuePool" title="sqlalchemy.pool.QueuePool"><code class="xref py py-class docutils literal"><span class="pre">QueuePool</span></code></a> would lose the correct checked out count if an existing pooled connection failed to reconnect after an invalidate or recycle event.<a class="changeset-link headerlink reference internal" href="#change-155adccbc41937b6cb1bc83c19fd47ef">&#xB6;</a></span></p><p><span class="yiyi-st" id="yiyi-1410">This change is also <strong>backported</strong> to: 0.8.3</span></p><p><span class="yiyi-st" id="yiyi-1411">&#x53C2;&#x8003;&#x6587;&#x732E;&#xFF1A;<a class="reference external" href="http://www.sqlalchemy.org/trac/ticket/2772">&#xFF03;2772</a></span></p></li><li><p id="change-0.9.0b1-38"><span class="yiyi-st" id="yiyi-1412"><span class="target" id="change-e8091dd32fb1ad01f0003ca4b9687bf5"><strong>[engine] [bug] </strong></span>Fixed bug where the <code class="docutils literal"><span class="pre">reset_on_return</span></code> argument to various <a class="reference internal" href="core_pooling.html#sqlalchemy.pool.Pool" title="sqlalchemy.pool.Pool"><code class="xref py py-class docutils literal"><span class="pre">Pool</span></code></a> implementations would not be propagated when the pool was regenerated. </span><span class="yiyi-st" id="yiyi-1413">Courtesy Eevee&#x3002;<a class="changeset-link headerlink reference internal" href="#change-e8091dd32fb1ad01f0003ca4b9687bf5">&#xB6;</a></span></p><p><span class="yiyi-st" id="yiyi-1414">&#x8FD9;&#x4E2A;&#x6539;&#x53D8;&#x4E5F;&#x88AB;<strong>backported</strong>&#x4FEE;&#x6539;&#x4E3A;&#xFF1A;0.8.2</span></p><p><span class="yiyi-st" id="yiyi-1415">&#x53C2;&#x8003;&#x6587;&#x732E;&#xFF1A;<a class="reference external" href="https://github.com/zzzeek/sqlalchemy/pull/6">&#x8BF7;&#x6C42;github&#xFF1A;6</a></span></p></li><li><p id="change-0.9.0b1-39"><span class="yiyi-st" id="yiyi-1416"><span class="target" id="change-eb0b93a1244b5f1389a13544c801b4cf"><strong>[engine] [bug] </strong></span>The regexp used by the <a class="reference internal" href="core_engines.html#sqlalchemy.engine.url.make_url" title="sqlalchemy.engine.url.make_url"><code class="xref py py-func docutils literal"><span class="pre">make_url()</span></code></a> function now parses ipv6 addresses, e.g. surrounded by brackets.<a class="changeset-link headerlink reference internal" href="#change-eb0b93a1244b5f1389a13544c801b4cf">&#xB6;</a></span></p><p><span class="yiyi-st" id="yiyi-1417">This change is also <strong>backported</strong> to: 0.8.3, 0.7.11</span></p><p><span class="yiyi-st" id="yiyi-1418">&#x53C2;&#x8003;&#x6587;&#x732E;&#xFF1A;<a class="reference external" href="http://www.sqlalchemy.org/trac/ticket/2851">&#xFF03;2851</a></span></p></li><li><p id="change-0.9.0b1-40"><span class="yiyi-st" id="yiyi-1419"><span class="target" id="change-8fe08fa349b1117af24feae4b1a76bc5"><strong>[engine] [bug] </strong></span>The method signature of <a class="reference internal" href="core_internals.html#sqlalchemy.engine.interfaces.Dialect.reflecttable" title="sqlalchemy.engine.interfaces.Dialect.reflecttable"><code class="xref py py-meth docutils literal"><span class="pre">Dialect.reflecttable()</span></code></a>, which in all known cases is provided by <a class="reference internal" href="core_internals.html#sqlalchemy.engine.default.DefaultDialect" title="sqlalchemy.engine.default.DefaultDialect"><code class="xref py py-class docutils literal"><span class="pre">DefaultDialect</span></code></a>, has been tightened to expect <code class="docutils literal"><span class="pre">include_columns</span></code> and <code class="docutils literal"><span class="pre">exclude_columns</span></code> arguments without any kw option, reducing ambiguity - previously <code class="docutils literal"><span class="pre">exclude_columns</span></code> was missing.<a class="changeset-link headerlink reference internal" href="#change-8fe08fa349b1117af24feae4b1a76bc5">&#xB6;</a></span></p><p><span class="yiyi-st" id="yiyi-1420">&#x53C2;&#x8003;&#x6587;&#x732E;&#xFF1A;<a class="reference external" href="http://www.sqlalchemy.org/trac/ticket/2748">&#xFF03;2748</a></span></p></li></ul></div><div class="section" id="change-0.9.0b1-sql"><h3><span class="yiyi-st" id="yiyi-1421">SQL <a class="headerlink" href="#change-0.9.0b1-sql" title="Permalink to this headline">&#xB6; T0&gt;</a></span></h3><ul class="simple"><li><p id="change-0.9.0b1-41"><span class="yiyi-st" id="yiyi-1422"><span class="target" id="change-e911a8b7deaa9ca6726dfc5d21dfd76d"><strong>[sql] [feature] </strong></span>&#x901A;&#x8FC7;<a class="reference internal" href="core_reflection.html#sqlalchemy.engine.reflection.Inspector.get_unique_constraints" title="sqlalchemy.engine.reflection.Inspector.get_unique_constraints"><code class="xref py py-meth docutils literal"><span class="pre">Inspector.get_unique_constraints()</span></code></a>&#x65B9;&#x6CD5;&#x589E;&#x52A0;&#x4E86;&#x5BF9;&#x201C;&#x552F;&#x4E00;&#x7EA6;&#x675F;&#x201D;&#x53CD;&#x5C04;&#x7684;&#x652F;&#x6301;&#x3002;</span><span class="yiyi-st" id="yiyi-1423">&#x611F;&#x8C22;Roman Podolyaka&#x7684;&#x8865;&#x4E01;&#x3002;<a class="changeset-link headerlink reference internal" href="#change-e911a8b7deaa9ca6726dfc5d21dfd76d">&#xB6;</a></span></p><p><span class="yiyi-st" id="yiyi-1424">&#x8FD9;&#x4E2A;&#x6539;&#x53D8;&#x4E5F;&#x88AB;<strong>backported</strong>&#x4FEE;&#x6539;&#x4E3A;&#xFF1A;0.8.4</span></p><p><span class="yiyi-st" id="yiyi-1425">&#x53C2;&#x8003;&#x6587;&#x732E;&#xFF1A;<a class="reference external" href="http://www.sqlalchemy.org/trac/ticket/1443">&#xFF03;1443</a></span></p></li><li><p id="change-0.9.0b1-42"><span class="yiyi-st" id="yiyi-1426"><span class="target" id="change-93cc634b6be87be3a5f50c6295f3ece2"><strong>[sql] [feature] </strong></span>The <a class="reference internal" href="core_dml.html#sqlalchemy.sql.expression.update" title="sqlalchemy.sql.expression.update"><code class="xref py py-func docutils literal"><span class="pre">update()</span></code></a>, <a class="reference internal" href="dialects_postgresql.html#sqlalchemy.dialects.postgresql.dml.insert" title="sqlalchemy.dialects.postgresql.dml.insert"><code class="xref py py-func docutils literal"><span class="pre">insert()</span></code></a>, and <a class="reference internal" href="core_dml.html#sqlalchemy.sql.expression.delete" title="sqlalchemy.sql.expression.delete"><code class="xref py py-func docutils literal"><span class="pre">delete()</span></code></a> constructs will now interpret ORM entities as target tables to be operated upon, e.g.:</span></p><div class="highlight-python"><div class="highlight"><pre><span></span><span class="kn">from</span> <span class="nn">sqlalchemy</span> <span class="kn">import</span> <span class="n">insert</span><span class="p">,</span> <span class="n">update</span><span class="p">,</span> <span class="n">delete</span>

<span class="n">ins</span> <span class="o">=</span> <span class="n">insert</span><span class="p">(</span><span class="n">SomeMappedClass</span><span class="p">)</span><span class="o">.</span><span class="n">values</span><span class="p">(</span><span class="n">x</span><span class="o">=</span><span class="mi">5</span><span class="p">)</span>

<span class="n">del_</span> <span class="o">=</span> <span class="n">delete</span><span class="p">(</span><span class="n">SomeMappedClass</span><span class="p">)</span><span class="o">.</span><span class="n">where</span><span class="p">(</span><span class="n">SomeMappedClass</span><span class="o">.</span><span class="n">id</span> <span class="o">==</span> <span class="mi">5</span><span class="p">)</span>

<span class="n">upd</span> <span class="o">=</span> <span class="n">update</span><span class="p">(</span><span class="n">SomeMappedClass</span><span class="p">)</span><span class="o">.</span><span class="n">where</span><span class="p">(</span><span class="n">SomeMappedClass</span><span class="o">.</span><span class="n">id</span> <span class="o">==</span> <span class="mi">5</span><span class="p">)</span><span class="o">.</span><span class="n">values</span><span class="p">(</span><span class="n">name</span><span class="o">=</span><span class="s1">&apos;ed&apos;</span><span class="p">)</span></pre></div></div><span class="yiyi-st" id="yiyi-1428"> <a class="changeset-link headerlink reference internal" href="#change-93cc634b6be87be3a5f50c6295f3ece2">&#xB6;</a></span><p><span class="yiyi-st" id="yiyi-1427">This change is also <strong>backported</strong> to: 0.8.3</span></p><p></p></li><li><p id="change-0.9.0b1-43"><span class="yiyi-st" id="yiyi-1429"><span class="target" id="change-8eb029cbdea1c892a1ad62622f54cdba"><strong>[sql] [feature] [postgresql] [mysql] </strong></span>The Postgresql and MySQL dialects now support reflection/inspection of foreign key options, including ON UPDATE, ON DELETE. </span><span class="yiyi-st" id="yiyi-1430">Postgresql&#x4E5F;&#x53CD;&#x6620;&#x4E86;MATCH&#xFF0C;DEFERRABLE&#x548C;INITIALLY&#x3002;</span><span class="yiyi-st" id="yiyi-1431">Coutesy ijl&#x3002;<a class="changeset-link headerlink reference internal" href="#change-8eb029cbdea1c892a1ad62622f54cdba">&#xB6;</a></span></p><p><span class="yiyi-st" id="yiyi-1432">&#x53C2;&#x8003;&#x6587;&#x732E;&#xFF1A;<a class="reference external" href="http://www.sqlalchemy.org/trac/ticket/2183">&#xFF03;2183</a></span></p></li><li><p id="change-0.9.0b1-44"><span class="yiyi-st" id="yiyi-1433"><span class="target" id="change-d24a04a8befc766ba1bf79f8656487a5"><strong>[sql] [feature] </strong></span>&#x73B0;&#x5728;&#xFF0C;&#x5728;&#x7C7B;&#x578B;&#x5316;&#x8868;&#x8FBE;&#x5F0F;&#x4E2D;&#x4F7F;&#x7528;&#x5E26;&#x6709;&#x201C;null&#x201D;&#x7C7B;&#x578B;&#xFF08;&#x4F8B;&#x5982;&#xFF0C;&#x6CA1;&#x6709;&#x6307;&#x5B9A;&#x7C7B;&#x578B;&#xFF09;&#x7684;<a class="reference internal" href="core_sqlelement.html#sqlalchemy.sql.expression.bindparam" title="sqlalchemy.sql.expression.bindparam"><code class="xref py py-func docutils literal"><span class="pre">bindparam()</span></code></a>&#x526F;&#x672C;&#x5206;&#x914D;&#x4E86;&#x6BD4;&#x8F83;&#x5217;&#x7684;&#x5B9E;&#x9645;&#x7C7B;&#x578B;&#x3002;</span><span class="yiyi-st" id="yiyi-1434">&#x4EE5;&#x524D;&#xFF0C;&#x8FD9;&#x4E2A;&#x903B;&#x8F91;&#x4F1A;&#x5728;&#x7ED9;&#x5B9A;&#x7684;<a class="reference internal" href="core_sqlelement.html#sqlalchemy.sql.expression.bindparam" title="sqlalchemy.sql.expression.bindparam"><code class="xref py py-func docutils literal"><span class="pre">bindparam()</span></code></a>&#x4E0A;&#x53D1;&#x751F;&#x3002;</span><span class="yiyi-st" id="yiyi-1435">Additionally, a similar process now occurs for <a class="reference internal" href="core_sqlelement.html#sqlalchemy.sql.expression.bindparam" title="sqlalchemy.sql.expression.bindparam"><code class="xref py py-func docutils literal"><span class="pre">bindparam()</span></code></a> constructs passed to <a class="reference internal" href="core_dml.html#sqlalchemy.sql.expression.ValuesBase.values" title="sqlalchemy.sql.expression.ValuesBase.values"><code class="xref py py-meth docutils literal"><span class="pre">ValuesBase.values()</span></code></a> for an <a class="reference internal" href="core_dml.html#sqlalchemy.sql.expression.Insert" title="sqlalchemy.sql.expression.Insert"><code class="xref py py-class docutils literal"><span class="pre">Insert</span></code></a> or <a class="reference internal" href="core_dml.html#sqlalchemy.sql.expression.Update" title="sqlalchemy.sql.expression.Update"><code class="xref py py-class docutils literal"><span class="pre">Update</span></code></a> construct, within the compilation phase of the construct.</span></p><p><span class="yiyi-st" id="yiyi-1436">&#x8FD9;&#x4E9B;&#x90FD;&#x662F;&#x5FAE;&#x5999;&#x7684;&#x884C;&#x4E3A;&#x53D8;&#x5316;&#xFF0C;&#x53EF;&#x80FD;&#x4F1A;&#x5F71;&#x54CD;&#x67D0;&#x4E9B;&#x7528;&#x9014;&#x3002;</span></p><div class="admonition seealso"><p class="first admonition-title"><span class="yiyi-st" id="yiyi-1437">&#x4E5F;&#x53EF;&#x4EE5;&#x770B;&#x770B;</span></p><p class="last"><span class="yiyi-st" id="yiyi-1438"><a class="reference internal" href="migration_09.html#migration-2850"><span>A bindparam() construct with no type gets upgraded via copy when a type is available</span></a></span></p></div><span class="yiyi-st" id="yiyi-1440"> <a class="changeset-link headerlink reference internal" href="#change-d24a04a8befc766ba1bf79f8656487a5">&#xB6;</a></span><p><span class="yiyi-st" id="yiyi-1439">&#x53C2;&#x8003;&#x6587;&#x732E;&#xFF1A;<a class="reference external" href="http://www.sqlalchemy.org/trac/ticket/2850">&#xFF03;2850</a></span></p></li><li><p id="change-0.9.0b1-45"><span class="yiyi-st" id="yiyi-1441"><span class="target" id="change-39321a75ce7fa62c42a70b5096452d0e"><strong>[sql] [feature] </strong></span>An overhaul of expression handling for special symbols particularly with conjunctions, e.g. <code class="docutils literal"><span class="pre">None</span></code> <a class="reference internal" href="core_sqlelement.html#sqlalchemy.sql.expression.null" title="sqlalchemy.sql.expression.null"><code class="xref py py-func docutils literal"><span class="pre">expression.null()</span></code></a> <a class="reference internal" href="core_sqlelement.html#sqlalchemy.sql.expression.true" title="sqlalchemy.sql.expression.true"><code class="xref py py-func docutils literal"><span class="pre">expression.true()</span></code></a> <a class="reference internal" href="core_sqlelement.html#sqlalchemy.sql.expression.false" title="sqlalchemy.sql.expression.false"><code class="xref py py-func docutils literal"><span class="pre">expression.false()</span></code></a>, including consistency in rendering NULL in conjunctions, &#x201C;short-circuiting&#x201D; of <a class="reference internal" href="core_sqlelement.html#sqlalchemy.sql.expression.and_" title="sqlalchemy.sql.expression.and_"><code class="xref py py-func docutils literal"><span class="pre">and_()</span></code></a> and <a class="reference internal" href="core_sqlelement.html#sqlalchemy.sql.expression.or_" title="sqlalchemy.sql.expression.or_"><code class="xref py py-func docutils literal"><span class="pre">or_()</span></code></a> expressions which contain boolean constants, and rendering of boolean constants and expressions as compared to &#x201C;1&#x201D; or &#x201C;0&#x201D; for backends that don&#x2019;t feature <code class="docutils literal"><span class="pre">true</span></code>/<code class="docutils literal"><span class="pre">false</span></code> constants.</span></p><div class="admonition seealso"><p class="first admonition-title"><span class="yiyi-st" id="yiyi-1442">&#x4E5F;&#x53EF;&#x4EE5;&#x770B;&#x770B;</span></p><p class="last"><span class="yiyi-st" id="yiyi-1443"><a class="reference internal" href="migration_09.html#migration-2804"><span>Improved rendering of Boolean constants, NULL constants, conjunctions</span></a>&#x7684;&#x6E32;&#x67D3;</span></p></div><span class="yiyi-st" id="yiyi-1445"> <a class="changeset-link headerlink reference internal" href="#change-39321a75ce7fa62c42a70b5096452d0e">&#xB6;</a></span><p><span class="yiyi-st" id="yiyi-1444">References: <a class="reference external" href="http://www.sqlalchemy.org/trac/ticket/2734">#2734</a>, <a class="reference external" href="http://www.sqlalchemy.org/trac/ticket/2804">#2804</a>, <a class="reference external" href="http://www.sqlalchemy.org/trac/ticket/2823">#2823</a></span></p></li><li><p id="change-0.9.0b1-46"><span class="yiyi-st" id="yiyi-1446"><span class="target" id="change-272e70220cd05bb94293b58f14259825"><strong>[sql] [feature] </strong></span>&#x6253;&#x5B57;&#x7CFB;&#x7EDF;&#x73B0;&#x5728;&#x5904;&#x7406;&#x6E32;&#x67D3;&#x201C;&#x6587;&#x5B57;&#x675F;&#x7F1A;&#x201D;&#x503C;&#x7684;&#x4EFB;&#x52A1;&#xFF0C;&#x4F8B;&#x5982;&#xFF0C;&#x503C;&#x901A;&#x5E38;&#x662F;&#x7ED1;&#x5B9A;&#x53C2;&#x6570;&#xFF0C;&#x4F46;&#x7531;&#x4E8E;&#x4E0A;&#x4E0B;&#x6587;&#x5FC5;&#x987B;&#x5448;&#x73B0;&#x4E3A;&#x5B57;&#x7B26;&#x4E32;&#xFF0C;&#x901A;&#x5E38;&#x4F4D;&#x4E8E;DDL&#x7ED3;&#x6784;&#x4E2D;&#xFF0C;&#x4F8B;&#x5982;CHECK&#x7EA6;&#x675F;&#x548C;&#x7D22;&#x5F15;&#xFF08;&#x8BF7;&#x6CE8;&#x610F;&#xFF0C;DDL&#x4ECE;<a class="reference external" href="http://www.sqlalchemy.org/trac/ticket/2742">&#xFF03;2742</a>&#x4F7F;&#x7528;&#x201C;&#x6587;&#x5B57;&#x7ED1;&#x5B9A;&#x201D;&#x503C;&#xFF09; &#x3002;</span><span class="yiyi-st" id="yiyi-1447">&#x4E00;&#x4E2A;&#x65B0;&#x7684;&#x65B9;&#x6CD5;<a class="reference internal" href="core_type_api.html#sqlalchemy.types.TypeEngine.literal_processor" title="sqlalchemy.types.TypeEngine.literal_processor"><code class="xref py py-meth docutils literal"><span class="pre">TypeEngine.literal_processor()</span></code></a>&#x4F5C;&#x4E3A;&#x57FA;&#x7840;&#xFF0C;&#x5E76;&#x4E14;&#x6DFB;&#x52A0;<a class="reference internal" href="core_custom_types.html#sqlalchemy.types.TypeDecorator.process_literal_param" title="sqlalchemy.types.TypeDecorator.process_literal_param"><code class="xref py py-meth docutils literal"><span class="pre">TypeDecorator.process_literal_param()</span></code></a>&#x4EE5;&#x5141;&#x8BB8;&#x5305;&#x88C5;&#x672C;&#x5730;&#x6587;&#x5B57;&#x6E32;&#x67D3;&#x65B9;&#x6CD5;&#x3002;</span></p><div class="admonition seealso"><p class="first admonition-title"><span class="yiyi-st" id="yiyi-1448">&#x4E5F;&#x53EF;&#x4EE5;&#x770B;&#x770B;</span></p><p class="last"><span class="yiyi-st" id="yiyi-1449"><a class="reference internal" href="migration_09.html#change-2838"><span>The typing system now handles the task of rendering &#x201C;literal bind&#x201D; values</span></a></span></p></div><span class="yiyi-st" id="yiyi-1451"> <a class="changeset-link headerlink reference internal" href="#change-272e70220cd05bb94293b58f14259825">&#xB6;</a></span><p><span class="yiyi-st" id="yiyi-1450">&#x53C2;&#x8003;&#x6587;&#x732E;&#xFF1A;<a class="reference external" href="http://www.sqlalchemy.org/trac/ticket/2838">&#xFF03;2838</a></span></p></li><li><p id="change-0.9.0b1-47"><span class="yiyi-st" id="yiyi-1452"><span class="target" id="change-98eded5d80636b193ea09e3c9865f4a1"><strong>[sql] [feature] </strong></span>The <a class="reference internal" href="core_metadata.html#sqlalchemy.schema.Table.tometadata" title="sqlalchemy.schema.Table.tometadata"><code class="xref py py-meth docutils literal"><span class="pre">Table.tometadata()</span></code></a> method now produces copies of all <a class="reference internal" href="core_metadata.html#sqlalchemy.schema.SchemaItem.info" title="sqlalchemy.schema.SchemaItem.info"><code class="xref py py-attr docutils literal"><span class="pre">SchemaItem.info</span></code></a> dictionaries from all <a class="reference internal" href="core_metadata.html#sqlalchemy.schema.SchemaItem" title="sqlalchemy.schema.SchemaItem"><code class="xref py py-class docutils literal"><span class="pre">SchemaItem</span></code></a> objects within the structure including columns, constraints, foreign keys, etc. </span><span class="yiyi-st" id="yiyi-1453">&#x7531;&#x4E8E;&#x8FD9;&#x4E9B;&#x5B57;&#x5178;&#x662F;&#x526F;&#x672C;&#xFF0C;&#x56E0;&#x6B64;&#x5B83;&#x4EEC;&#x4E0E;&#x539F;&#x59CB;&#x5B57;&#x5178;&#x65E0;&#x5173;&#x3002;</span><span class="yiyi-st" id="yiyi-1454">&#x5728;&#x6B64;&#x4E4B;&#x524D;&#xFF0C;&#x53EA;&#x6709;<a class="reference internal" href="core_metadata.html#sqlalchemy.schema.Column" title="sqlalchemy.schema.Column"><code class="xref py py-class docutils literal"><span class="pre">Column</span></code></a>&#x7684;<code class="docutils literal"><span class="pre">.info</span></code>&#x5B57;&#x5178;&#x5728;&#x6B64;&#x64CD;&#x4F5C;&#x4E2D;&#x4F20;&#x8F93;&#xFF0C;&#x5E76;&#x4E14;&#x4EC5;&#x5728;&#x9002;&#x5F53;&#x7684;&#x4F4D;&#x7F6E;&#x8FDE;&#x63A5;&#xFF0C;&#x800C;&#x4E0D;&#x662F;&#x590D;&#x5236;&#x3002;<a class="changeset-link headerlink reference internal" href="#change-98eded5d80636b193ea09e3c9865f4a1">&#xB6;</a></span></p><p><span class="yiyi-st" id="yiyi-1455">&#x53C2;&#x8003;&#x6587;&#x732E;&#xFF1A;<a class="reference external" href="http://www.sqlalchemy.org/trac/ticket/2716">&#xFF03;2716</a></span></p></li><li><p id="change-0.9.0b1-48"><span class="yiyi-st" id="yiyi-1456"><span class="target" id="change-2f3ab8473c252112e2ebb16aa940261f"><strong>[sql] [feature] </strong></span>The <code class="docutils literal"><span class="pre">default</span></code> argument of <a class="reference internal" href="core_metadata.html#sqlalchemy.schema.Column" title="sqlalchemy.schema.Column"><code class="xref py py-class docutils literal"><span class="pre">Column</span></code></a> now accepts a class or object method as an argument, in addition to a standalone function; will properly detect if the &#x201C;context&#x201D; argument is accepted or not.<a class="changeset-link headerlink reference internal" href="#change-2f3ab8473c252112e2ebb16aa940261f">&#xB6;</a></span></p><p></p></li><li><p id="change-0.9.0b1-49"><span class="yiyi-st" id="yiyi-1457"><span class="target" id="change-13e79ff2064616ed83c6e394ab472ee5"><strong>[sql] [feature] </strong></span>&#x4E3A;<a class="reference internal" href="dialects_postgresql.html#sqlalchemy.dialects.postgresql.dml.insert" title="sqlalchemy.dialects.postgresql.dml.insert"><code class="xref py py-func docutils literal"><span class="pre">insert()</span></code></a>&#x7ED3;&#x6784;<a class="reference internal" href="core_dml.html#sqlalchemy.sql.expression.Insert.from_select" title="sqlalchemy.sql.expression.Insert.from_select"><code class="xref py py-meth docutils literal"><span class="pre">Insert.from_select()</span></code></a>&#x6DFB;&#x52A0;&#x4E86;&#x65B0;&#x65B9;&#x6CD5;&#x3002;</span><span class="yiyi-st" id="yiyi-1458">Given a list of columns and a selectable, renders <code class="docutils literal"><span class="pre">INSERT</span> <span class="pre">INTO</span> <span class="pre">(table)</span> <span class="pre">(columns)</span> <span class="pre">SELECT</span> <span class="pre">..</span></code>. </span><span class="yiyi-st" id="yiyi-1459">&#x867D;&#x7136;&#x6B64;&#x529F;&#x80FD;&#x5728;0.9&#x4E2D;&#x7A81;&#x51FA;&#x663E;&#x793A;&#xFF0C;&#x4F46;&#x5B83;&#x4E5F;&#x88AB;&#x53CD;&#x5411;&#x79FB;&#x690D;&#x5230;&#x4E86;0.8.3&#x3002;</span></p><div class="admonition seealso"><p class="first admonition-title"><span class="yiyi-st" id="yiyi-1460">&#x4E5F;&#x53EF;&#x4EE5;&#x770B;&#x770B;</span></p><p class="last"><span class="yiyi-st" id="yiyi-1461"><a class="reference internal" href="migration_09.html#feature-722"><span>INSERT from SELECT</span></a></span></p></div><span class="yiyi-st" id="yiyi-1463"> <a class="changeset-link headerlink reference internal" href="#change-13e79ff2064616ed83c6e394ab472ee5">&#xB6;</a></span><p><span class="yiyi-st" id="yiyi-1462">&#x53C2;&#x8003;&#x6587;&#x732E;&#xFF1A;<a class="reference external" href="http://www.sqlalchemy.org/trac/ticket/722">&#xFF03;722</a></span></p></li><li><p id="change-0.9.0b1-50"><span class="yiyi-st" id="yiyi-1464"><span class="target" id="change-3300a90d71384cf7c366f03b14fa1351"><strong>[sql] [feature] </strong></span>&#x4E3A;<a class="reference internal" href="core_custom_types.html#sqlalchemy.types.TypeDecorator" title="sqlalchemy.types.TypeDecorator"><code class="xref py py-class docutils literal"><span class="pre">TypeDecorator</span></code></a>&#x63D0;&#x4F9B;&#x4E86;&#x4E00;&#x4E2A;&#x540D;&#x4E3A;<a class="reference internal" href="core_custom_types.html#sqlalchemy.types.TypeDecorator.coerce_to_is_types" title="sqlalchemy.types.TypeDecorator.coerce_to_is_types"><code class="xref py py-attr docutils literal"><span class="pre">TypeDecorator.coerce_to_is_types</span></code></a>&#x7684;&#x65B0;&#x5C5E;&#x6027;&#xFF0C;&#x4EE5;&#x4FBF;&#x66F4;&#x5BB9;&#x6613;&#x63A7;&#x5236;&#x5982;&#x4F55;&#x4F7F;&#x7528;<code class="docutils literal"><span class="pre">==</span></code>&#x6216;<code class="docutils literal"><span class="pre">!=</span></code> to <code class="docutils literal"><span class="pre">None</span></code>&#x548C;&#x5E03;&#x5C14;&#x7C7B;&#x578B;&#x7528;&#x4E8E;&#x751F;&#x6210;<code class="docutils literal"><span class="pre">IS</span></code>&#x8868;&#x8FBE;&#x5F0F;&#xFF0C;&#x53C2;&#x6570;&#x3002;<a class="changeset-link headerlink reference internal" href="#change-3300a90d71384cf7c366f03b14fa1351">&#xB6; T16&gt;</a></span></p><p><span class="yiyi-st" id="yiyi-1465">&#x53C2;&#x8003;&#x6587;&#x732E;&#xFF1A;<a class="reference external" href="http://www.sqlalchemy.org/trac/ticket/2734">&#xFF03;2734</a>&#xFF0C;<a class="reference external" href="http://www.sqlalchemy.org/trac/ticket/2744">&#xFF03;2744</a></span></p></li><li><p id="change-0.9.0b1-51"><span class="yiyi-st" id="yiyi-1466"><span class="target" id="change-e50ad7b22d3a616aeb47cf832c27097a"><strong>[sql] [feature] </strong></span>A <a class="reference internal" href="core_sqlelement.html#sqlalchemy.sql.expression.label" title="sqlalchemy.sql.expression.label"><code class="xref py py-func docutils literal"><span class="pre">label()</span></code></a> construct will now render as its name alone in an <code class="docutils literal"><span class="pre">ORDER</span> <span class="pre">BY</span></code> clause, if that label is also referred to in the columns clause of the select, instead of rewriting the full expression. </span><span class="yiyi-st" id="yiyi-1467">&#x8FD9;&#x4F7F;&#x6570;&#x636E;&#x5E93;&#x6709;&#x66F4;&#x597D;&#x7684;&#x673A;&#x4F1A;&#x5728;&#x4E24;&#x79CD;&#x4E0D;&#x540C;&#x7684;&#x60C5;&#x51B5;&#x4E0B;&#x4F18;&#x5316;&#x76F8;&#x540C;&#x8868;&#x8FBE;&#x5F0F;&#x7684;&#x8BC4;&#x4F30;&#x3002;</span></p><div class="admonition seealso"><p class="first admonition-title"><span class="yiyi-st" id="yiyi-1468">&#x4E5F;&#x53EF;&#x4EE5;&#x770B;&#x770B;</span></p><p class="last"><span class="yiyi-st" id="yiyi-1469"><a class="reference internal" href="migration_09.html#migration-1068"><span>Label constructs can now render as their name alone in an ORDER BY</span></a>&#x4E2D;&#x5355;&#x72EC;&#x5448;&#x73B0;&#x5176;&#x540D;&#x79F0;</span></p></div><span class="yiyi-st" id="yiyi-1471"> <a class="changeset-link headerlink reference internal" href="#change-e50ad7b22d3a616aeb47cf832c27097a">&#xB6;</a></span><p><span class="yiyi-st" id="yiyi-1470">&#x53C2;&#x8003;&#x6587;&#x732E;&#xFF1A;<a class="reference external" href="http://www.sqlalchemy.org/trac/ticket/1068">&#xFF03;1068</a></span></p></li><li><p id="change-0.9.0b1-52"><span class="yiyi-st" id="yiyi-1472"><span class="target" id="change-4a3641b48480cf313538449a8e5b1c5f"><strong>[sql] [bug] </strong></span>Fixed bug where <a class="reference internal" href="core_sqlelement.html#sqlalchemy.sql.expression.type_coerce" title="sqlalchemy.sql.expression.type_coerce"><code class="xref py py-func docutils literal"><span class="pre">type_coerce()</span></code></a> would not interpret ORM elements with a <code class="docutils literal"><span class="pre">__clause_element__()</span></code> method properly.<a class="changeset-link headerlink reference internal" href="#change-4a3641b48480cf313538449a8e5b1c5f">&#xB6;</a></span></p><p><span class="yiyi-st" id="yiyi-1473">This change is also <strong>backported</strong> to: 0.8.3</span></p><p><span class="yiyi-st" id="yiyi-1474">&#x53C2;&#x8003;&#x6587;&#x732E;&#xFF1A;<a class="reference external" href="http://www.sqlalchemy.org/trac/ticket/2849">&#xFF03;2849</a></span></p></li><li><p id="change-0.9.0b1-53"><span class="yiyi-st" id="yiyi-1475"><span class="target" id="change-a5059e2a0d6f7ae306b16d71a6884f3f"><strong>[sql] [bug] </strong></span>The <a class="reference internal" href="core_type_basics.html#sqlalchemy.types.Enum" title="sqlalchemy.types.Enum"><code class="xref py py-class docutils literal"><span class="pre">Enum</span></code></a> and <a class="reference internal" href="core_type_basics.html#sqlalchemy.types.Boolean" title="sqlalchemy.types.Boolean"><code class="xref py py-class docutils literal"><span class="pre">Boolean</span></code></a> types now bypass any custom (e.g. TypeDecorator) type in use when producing the CHECK constraint for the &#x201C;non native&#x201D; type. </span><span class="yiyi-st" id="yiyi-1476">&#x8FD9;&#x6837;&#x81EA;&#x5B9A;&#x4E49;&#x7C7B;&#x578B;&#x4E0D;&#x4F1A;&#x88AB;&#x5305;&#x542B;&#x5728;CHECK&#x4E2D;&#x7684;&#x8868;&#x8FBE;&#x5F0F;&#x4E2D;&#xFF0C;&#x56E0;&#x4E3A;&#x8FD9;&#x4E2A;&#x8868;&#x8FBE;&#x5F0F;&#x8FDD;&#x80CC;&#x4E86;&#x201C;impl&#x201D;&#x503C;&#x800C;&#x4E0D;&#x662F;&#x201C;&#x88C5;&#x9970;&#x201D;&#x503C;&#x3002;<a class="changeset-link headerlink reference internal" href="#change-a5059e2a0d6f7ae306b16d71a6884f3f">&#xB6;</a></span></p><p><span class="yiyi-st" id="yiyi-1477">This change is also <strong>backported</strong> to: 0.8.3</span></p><p><span class="yiyi-st" id="yiyi-1478">&#x53C2;&#x8003;&#x6587;&#x732E;&#xFF1A;<a class="reference external" href="http://www.sqlalchemy.org/trac/ticket/2842">&#xFF03;2842</a></span></p></li><li><p id="change-0.9.0b1-54"><span class="yiyi-st" id="yiyi-1479"><span class="target" id="change-2d486e59e387ed6c8d50bf5d99627cdf"><strong>[sql] [bug] </strong></span>The <code class="docutils literal"><span class="pre">.unique</span></code> flag on <a class="reference internal" href="core_constraints.html#sqlalchemy.schema.Index" title="sqlalchemy.schema.Index"><code class="xref py py-class docutils literal"><span class="pre">Index</span></code></a> could be produced as <code class="docutils literal"><span class="pre">None</span></code> if it was generated from a <a class="reference internal" href="core_metadata.html#sqlalchemy.schema.Column" title="sqlalchemy.schema.Column"><code class="xref py py-class docutils literal"><span class="pre">Column</span></code></a> that didn&#x2019;t specify <code class="docutils literal"><span class="pre">unique</span></code> (where it defaults to <code class="docutils literal"><span class="pre">None</span></code>). </span><span class="yiyi-st" id="yiyi-1480">&#x8BE5;&#x6807;&#x5FD7;&#x73B0;&#x5728;&#x603B;&#x662F;<code class="docutils literal"><span class="pre">True</span></code>&#x6216;<code class="docutils literal"><span class="pre">False</span></code>&#x3002;<a class="changeset-link headerlink reference internal" href="#change-2d486e59e387ed6c8d50bf5d99627cdf">&#xB6;</a></span></p><p><span class="yiyi-st" id="yiyi-1481">This change is also <strong>backported</strong> to: 0.8.3</span></p><p><span class="yiyi-st" id="yiyi-1482">&#x53C2;&#x8003;&#x6587;&#x732E;&#xFF1A;<a class="reference external" href="http://www.sqlalchemy.org/trac/ticket/2825">&#xFF03;2825</a></span></p></li><li><p id="change-0.9.0b1-55"><span class="yiyi-st" id="yiyi-1483"><span class="target" id="change-6f6cd0ca9e6e5050ad6d52b884122ea9"><strong>[sql] [bug] </strong></span>Fixed bug in default compiler plus those of postgresql, mysql, and mssql to ensure that any literal SQL expression values are rendered directly as literals, instead of as bound parameters, within a CREATE INDEX statement. </span><span class="yiyi-st" id="yiyi-1484">&#x8FD9;&#x4E5F;&#x6539;&#x53D8;&#x4E86;&#x5176;&#x4ED6;DDL&#x7684;&#x6E32;&#x67D3;&#x65B9;&#x6848;&#xFF0C;&#x5982;&#x7EA6;&#x675F;&#x3002;<a class="changeset-link headerlink reference internal" href="#change-6f6cd0ca9e6e5050ad6d52b884122ea9">&#xB6;</a></span></p><p><span class="yiyi-st" id="yiyi-1485">This change is also <strong>backported</strong> to: 0.8.3</span></p><p><span class="yiyi-st" id="yiyi-1486">&#x53C2;&#x8003;&#x6587;&#x732E;&#xFF1A;<a class="reference external" href="http://www.sqlalchemy.org/trac/ticket/2742">&#xFF03;2742</a></span></p></li><li><p id="change-0.9.0b1-56"><span class="yiyi-st" id="yiyi-1487"><span class="target" id="change-0e498b684ea9cbcfc3f277d61204d65b"><strong>[sql] [bug] </strong></span>A <a class="reference internal" href="core_selectable.html#sqlalchemy.sql.expression.select" title="sqlalchemy.sql.expression.select"><code class="xref py py-func docutils literal"><span class="pre">select()</span></code></a> that is made to refer to itself in its FROM clause, typically via in-place mutation, will raise an informative error message rather than causing a recursion overflow.<a class="changeset-link headerlink reference internal" href="#change-0e498b684ea9cbcfc3f277d61204d65b">&#xB6;</a></span></p><p><span class="yiyi-st" id="yiyi-1488">This change is also <strong>backported</strong> to: 0.8.3</span></p><p><span class="yiyi-st" id="yiyi-1489">&#x53C2;&#x8003;&#x6587;&#x732E;&#xFF1A;<a class="reference external" href="http://www.sqlalchemy.org/trac/ticket/2815">&#xFF03;2815</a></span></p></li><li><p id="change-0.9.0b1-57"><span class="yiyi-st" id="yiyi-1490"><span class="target" id="change-6e1a5094981c35f027081bae82ca704a"><strong>[sql] [bug] </strong></span>Fixed bug where using the <code class="docutils literal"><span class="pre">column_reflect</span></code> event to change the <code class="docutils literal"><span class="pre">.key</span></code> of the incoming <a class="reference internal" href="core_metadata.html#sqlalchemy.schema.Column" title="sqlalchemy.schema.Column"><code class="xref py py-class docutils literal"><span class="pre">Column</span></code></a> would prevent primary key constraints, indexes, and foreign key constraints from being correctly reflected.<a class="changeset-link headerlink reference internal" href="#change-6e1a5094981c35f027081bae82ca704a">&#xB6;</a></span></p><p><span class="yiyi-st" id="yiyi-1491">This change is also <strong>backported</strong> to: 0.8.3</span></p><p><span class="yiyi-st" id="yiyi-1492">&#x53C2;&#x8003;&#x6587;&#x732E;&#xFF1A;<a class="reference external" href="http://www.sqlalchemy.org/trac/ticket/2811">&#xFF03;2811</a></span></p></li><li><p id="change-0.9.0b1-58"><span class="yiyi-st" id="yiyi-1493"><span class="target" id="change-d12e927d520f09485a8678152c280b4e"><strong>[sql] [bug] </strong></span>The <a class="reference internal" href="core_sqlelement.html#sqlalchemy.sql.operators.ColumnOperators.notin_" title="sqlalchemy.sql.operators.ColumnOperators.notin_"><code class="xref py py-meth docutils literal"><span class="pre">ColumnOperators.notin_()</span></code></a> operator added in 0.8 now properly produces the negation of the expression &#x201C;IN&#x201D; returns when used against an empty collection.<a class="changeset-link headerlink reference internal" href="#change-d12e927d520f09485a8678152c280b4e">&#xB6;</a></span></p><p><span class="yiyi-st" id="yiyi-1494">This change is also <strong>backported</strong> to: 0.8.3</span></p><p></p></li><li><p id="change-0.9.0b1-59"><span class="yiyi-st" id="yiyi-1495"><span class="target" id="change-2c8dbe177a3c8cba08249e3cdeca2362"><strong>[sql] [bug] [postgresql] </strong></span>Fixed bug where the expression system relied upon the <code class="docutils literal"><span class="pre">str()</span></code> form of a some expressions when referring to the <code class="docutils literal"><span class="pre">.c</span></code> collection on a <code class="docutils literal"><span class="pre">select()</span></code> construct, but the <code class="docutils literal"><span class="pre">str()</span></code> form isn&#x2019;t available since the element relies on dialect-specific compilation constructs, notably the <code class="docutils literal"><span class="pre">__getitem__()</span></code> operator as used with a Postgresql <code class="docutils literal"><span class="pre">ARRAY</span></code> element. </span><span class="yiyi-st" id="yiyi-1496">&#x8BE5;&#x4FEE;&#x8865;&#x7A0B;&#x5E8F;&#x8FD8;&#x6DFB;&#x52A0;&#x4E86;&#x4E00;&#x4E2A;&#x65B0;&#x7684;&#x5F02;&#x5E38;&#x7C7B;<a class="reference internal" href="core_exceptions.html#sqlalchemy.exc.UnsupportedCompilationError" title="sqlalchemy.exc.UnsupportedCompilationError"><code class="xref py py-exc docutils literal"><span class="pre">UnsupportedCompilationError</span></code></a>&#xFF0C;&#x8FD9;&#x662F;&#x5728;&#x7F16;&#x8BD1;&#x5668;&#x88AB;&#x8981;&#x6C42;&#x7F16;&#x8BD1;&#x4E00;&#x4E9B;&#x4E0D;&#x77E5;&#x9053;&#x5982;&#x4F55;&#x53BB;&#x505A;&#x7684;&#x60C5;&#x51B5;&#x4E0B;&#x5F15;&#x53D1;&#x7684;&#x3002;<a class="changeset-link headerlink reference internal" href="#change-2c8dbe177a3c8cba08249e3cdeca2362">&#xB6;</a></span></p><p><span class="yiyi-st" id="yiyi-1497">This change is also <strong>backported</strong> to: 0.8.3</span></p><p><span class="yiyi-st" id="yiyi-1498">&#x53C2;&#x8003;&#x6587;&#x732E;&#xFF1A;<a class="reference external" href="http://www.sqlalchemy.org/trac/ticket/2780">&#xFF03;2780</a></span></p></li><li><p id="change-0.9.0b1-60"><span class="yiyi-st" id="yiyi-1499"><span class="target" id="change-ec66deaad21dd8b26baa4f0b315154b4"><strong>[sql] [bug] </strong></span>&#x5BF9;&#x4E8E;<a class="reference internal" href="core_selectable.html#sqlalchemy.sql.expression.Select" title="sqlalchemy.sql.expression.Select"><code class="xref py py-class docutils literal"><span class="pre">Select</span></code></a>&#x7ED3;&#x6784;&#x7684;&#x76F8;&#x5173;&#x884C;&#x4E3A;&#x7684;&#x591A;&#x4E2A;&#x4FEE;&#x590D;&#xFF0C;&#x5728;0.8.0&#x4E2D;&#x9996;&#x6B21;&#x5F15;&#x5165;&#xFF1A;</span></p><ul><li><span class="yiyi-st" id="yiyi-1500">&#x4E3A;&#x4E86;&#x6EE1;&#x8DB3;&#x8FD9;&#x6837;&#x7684;&#x7528;&#x4F8B;&#xFF0C;&#x5176;&#x4E2D;FROM&#x6761;&#x76EE;&#x5E94;&#x8BE5;&#x5411;&#x5916;&#x5173;&#x8054;&#x5230;&#x4E00;&#x4E2A;&#x5305;&#x542B;&#x53E6;&#x4E00;&#x4E2A;&#x7684;SELECT&#xFF0C;&#x7136;&#x540E;&#x5305;&#x542B;&#x8FD9;&#x4E2A;SELECT&#xFF0C;&#x5F53;&#x901A;&#x8FC7;<a class="reference internal" href="core_selectable.html#sqlalchemy.sql.expression.Select.correlate" title="sqlalchemy.sql.expression.Select.correlate"><code class="xref py py-meth docutils literal"><span class="pre">Select.correlate()</span></code></a>&#x5EFA;&#x7ACB;&#x663E;&#x5F0F;&#x76F8;&#x5173;&#x6027;&#x65F6;&#xFF0C;&#x524D;&#x63D0;&#x662F;&#x76EE;&#x6807;&#x9009;&#x62E9;&#x4F4D;&#x4E8E;WHERE / ORDER BY / columns&#x5B50;&#x53E5;&#x6240;&#x5305;&#x542B;&#x7684;&#x94FE;&#x4E2D;&#xFF0C;&#x800C;&#x4E0D;&#x4EC5;&#x4EC5;&#x662F;&#x5D4C;&#x5957;&#x7684;FROM&#x5B50;&#x53E5;&#x3002;</span><span class="yiyi-st" id="yiyi-1501">This makes <a class="reference internal" href="core_selectable.html#sqlalchemy.sql.expression.Select.correlate" title="sqlalchemy.sql.expression.Select.correlate"><code class="xref py py-meth docutils literal"><span class="pre">Select.correlate()</span></code></a> act more compatibly to that of 0.7 again while still maintaining the new &#x201C;smart&#x201D; correlation.</span></li><li><span class="yiyi-st" id="yiyi-1502">&#x5F53;&#x4E0D;&#x4F7F;&#x7528;&#x663E;&#x5F0F;&#x5173;&#x8054;&#x65F6;&#xFF0C;&#x901A;&#x5E38;&#x7684;&#x201C;&#x9690;&#x5F0F;&#x201D;&#x5173;&#x8054;&#x5C06;&#x5176;&#x884C;&#x4E3A;&#x9650;&#x5236;&#x4E3A;&#x7ACB;&#x5373;&#x5C01;&#x95ED;&#x7684;SELECT&#xFF0C;&#x4EE5;&#x6700;&#x5927;&#x5316;&#x4E0E;0.7&#x5E94;&#x7528;&#x7A0B;&#x5E8F;&#x7684;&#x517C;&#x5BB9;&#x6027;&#xFF0C;&#x5E76;&#x4E14;&#x8FD8;&#x9632;&#x6B62;&#x5728;&#x8FD9;&#x79CD;&#x60C5;&#x51B5;&#x4E0B;&#x5D4C;&#x5957;FROM&#x4E4B;&#x95F4;&#x7684;&#x76F8;&#x5173;&#x6027;&#xFF0C;&#x4FDD;&#x6301;&#x4E0E;0.8.0 / 0.8&#x7684;&#x517C;&#x5BB9;&#x6027;&#x3002; 1&#x3002;</span></li><li><span class="yiyi-st" id="yiyi-1503"><a class="reference internal" href="core_selectable.html#sqlalchemy.sql.expression.Select.correlate_except" title="sqlalchemy.sql.expression.Select.correlate_except"><code class="xref py py-meth docutils literal"><span class="pre">Select.correlate_except()</span></code></a>&#x65B9;&#x6CD5;&#x5728;&#x6240;&#x6709;&#x60C5;&#x51B5;&#x4E0B;&#x90FD;&#x4E0D;&#x4F1A;&#x963B;&#x6B62;&#x7ED9;&#x5B9A;&#x7684;FROM&#x5B50;&#x53E5;&#x76F8;&#x5173;&#xFF0C;&#x5E76;&#x4E14;&#x4E5F;&#x4F1A;&#x5BFC;&#x81F4;FROM&#x5B50;&#x53E5;&#x5B8C;&#x5168;&#x88AB;&#x9519;&#x8BEF;&#x5730;&#x7701;&#x7565;&#xFF08;&#x66F4;&#x50CF;0.7&#x4F1A;&#x505A;&#x7684;&#xFF09;&#xFF0C;&#x8FD9;&#x5DF2;&#x7ECF;&#x56FA;&#x5B9A;&#x3002;</span></li><li><span class="yiyi-st" id="yiyi-1504">&#x8C03;&#x7528;<cite>select.correlate_except&#xFF08;None&#xFF09;</cite>&#x5C06;&#x6309;&#x7167;&#x9884;&#x671F;&#x5C06;&#x6240;&#x6709;FROM&#x5B50;&#x53E5;&#x8F93;&#x5165;&#x5230;&#x76F8;&#x5173;&#x4E2D;&#x3002;</span></li></ul><span class="yiyi-st" id="yiyi-1507"> <a class="changeset-link headerlink reference internal" href="#change-ec66deaad21dd8b26baa4f0b315154b4">&#xB6;</a></span><p><span class="yiyi-st" id="yiyi-1505">&#x8FD9;&#x4E2A;&#x6539;&#x53D8;&#x4E5F;&#x88AB;<strong>backported</strong>&#x4FEE;&#x6539;&#x4E3A;&#xFF1A;0.8.2</span></p><p><span class="yiyi-st" id="yiyi-1506">&#x53C2;&#x8003;&#x6587;&#x732E;&#xFF1A;<a class="reference external" href="http://www.sqlalchemy.org/trac/ticket/2668">&#xFF03;2668</a>&#xFF0C;<a class="reference external" href="http://www.sqlalchemy.org/trac/ticket/2746">&#xFF03;2746</a></span></p></li><li><p id="change-0.9.0b1-61"><span class="yiyi-st" id="yiyi-1508"><span class="target" id="change-69bb8fab2a49ae9f49bba3d45913e256"><strong>[sql] [bug] </strong></span>Fixed bug whereby joining a select() of a table &#x201C;A&#x201D; with multiple foreign key paths to a table &#x201C;B&#x201D;, to that table &#x201C;B&#x201D;, would fail to produce the &#x201C;ambiguous join condition&#x201D; error that would be reported if you join table &#x201C;A&#x201D; directly to &#x201C;B&#x201D;; it would instead produce a join condition with multiple criteria.<a class="changeset-link headerlink reference internal" href="#change-69bb8fab2a49ae9f49bba3d45913e256">&#xB6;</a></span></p><p><span class="yiyi-st" id="yiyi-1509">&#x8FD9;&#x4E2A;&#x6539;&#x53D8;&#x4E5F;&#x88AB;<strong>backported</strong>&#x4FEE;&#x6539;&#x4E3A;&#xFF1A;0.8.2</span></p><p><span class="yiyi-st" id="yiyi-1510">&#x53C2;&#x8003;&#x6587;&#x732E;&#xFF1A;<a class="reference external" href="http://www.sqlalchemy.org/trac/ticket/2738">&#xFF03;2738</a></span></p></li><li><p id="change-0.9.0b1-62"><span class="yiyi-st" id="yiyi-1511"><span class="target" id="change-875b41219bbc43340ccf3d1e7d1f5fbf"><strong>[sql] [bug] [reflection] </strong></span>Fixed bug whereby using <a class="reference internal" href="core_metadata.html#sqlalchemy.schema.MetaData.reflect" title="sqlalchemy.schema.MetaData.reflect"><code class="xref py py-meth docutils literal"><span class="pre">MetaData.reflect()</span></code></a> across a remote schema as well as a local schema could produce wrong results in the case where both schemas had a table of the same name.<a class="changeset-link headerlink reference internal" href="#change-875b41219bbc43340ccf3d1e7d1f5fbf">&#xB6;</a></span></p><p><span class="yiyi-st" id="yiyi-1512">&#x8FD9;&#x4E2A;&#x6539;&#x53D8;&#x4E5F;&#x88AB;<strong>backported</strong>&#x4FEE;&#x6539;&#x4E3A;&#xFF1A;0.8.2</span></p><p><span class="yiyi-st" id="yiyi-1513">&#x53C2;&#x8003;&#x6587;&#x732E;&#xFF1A;<a class="reference external" href="http://www.sqlalchemy.org/trac/ticket/2728">&#xFF03;2728</a></span></p></li><li><p id="change-0.9.0b1-63"><span class="yiyi-st" id="yiyi-1514"><span class="target" id="change-413cb4c102d2705b115721cf5917ed43"><strong>[sql] [bug] </strong></span>&#x5220;&#x9664;&#x4E86;&#x6765;&#x81EA;&#x57FA;&#x7C7B;<a class="reference internal" href="core_sqlelement.html#sqlalchemy.sql.operators.ColumnOperators" title="sqlalchemy.sql.operators.ColumnOperators"><code class="xref py py-class docutils literal"><span class="pre">ColumnOperators</span></code></a>&#x7C7B;&#x7684;&#x201C;&#x672A;&#x5B9E;&#x73B0;&#x201D;<code class="docutils literal"><span class="pre">__iter__()</span></code>&#x8C03;&#x7528;&#xFF0C;&#x800C;&#x8FD9;&#x662F;&#x5728;0.8&#x4E2D;&#x5F15;&#x5165;&#x7684;&#x3002; 0&#xFF0C;&#x4EE5;&#x9632;&#x6B62;&#x5728;&#x81EA;&#x5B9A;&#x4E49;&#x8FD0;&#x7B97;&#x7B26;&#x4E0A;&#x5B9E;&#x73B0;<code class="docutils literal"><span class="pre">__getitem__()</span></code>&#x65B9;&#x6CD5;&#xFF0C;&#x7136;&#x540E;&#x5728;&#x8BE5;&#x5BF9;&#x8C61;&#x4E0A;&#x9519;&#x8BEF;&#x5730;&#x8C03;&#x7528;<code class="docutils literal"><span class="pre">list()</span></code>&#x65F6;&#x51FA;&#x73B0;&#x65E0;&#x9650;&#x7684;&#x5185;&#x5B58;&#x589E;&#x957F;&#x5FAA;&#x73AF;&#xFF0C;&#x5BFC;&#x81F4;&#x5217;&#x5143;&#x7D20;&#x62A5;&#x544A;&#x5B83;&#x4EEC;&#x5B9E;&#x9645;&#x4E0A;&#x662F;&#x53EF;&#x8FED;&#x4EE3;&#x7C7B;&#x578B;&#xFF0C;&#x5F53;&#x60A8;&#x5C1D;&#x8BD5;&#x8FED;&#x4EE3;&#x65F6;&#x4F1A;&#x629B;&#x51FA;&#x9519;&#x8BEF;&#x3002;</span><span class="yiyi-st" id="yiyi-1515">&#x6CA1;&#x6709;&#x771F;&#x6B63;&#x7684;&#x65B9;&#x5F0F;&#x8BA9;&#x53CC;&#x65B9;&#x90FD;&#x5728;&#x8FD9;&#x91CC;&#xFF0C;&#x6240;&#x4EE5;&#x6211;&#x4EEC;&#x575A;&#x6301;&#x4F7F;&#x7528;Python&#x7684;&#x6700;&#x4F73;&#x5B9E;&#x8DF5;&#x3002;</span><span class="yiyi-st" id="yiyi-1516">&#x4ED4;&#x7EC6;&#x5728;&#x81EA;&#x5B9A;&#x4E49;&#x8FD0;&#x7B97;&#x7B26;&#x4E0A;&#x5B9E;&#x73B0;<code class="docutils literal"><span class="pre">__getitem__()</span></code>&#xFF01;<a class="changeset-link headerlink reference internal" href="#change-413cb4c102d2705b115721cf5917ed43">&#xB6;</a></span></p><p><span class="yiyi-st" id="yiyi-1517">&#x8FD9;&#x4E2A;&#x6539;&#x53D8;&#x4E5F;&#x88AB;<strong>backported</strong>&#x4FEE;&#x6539;&#x4E3A;&#xFF1A;0.8.2</span></p><p><span class="yiyi-st" id="yiyi-1518">&#x53C2;&#x8003;&#x6587;&#x732E;&#xFF1A;<a class="reference external" href="http://www.sqlalchemy.org/trac/ticket/2726">&#xFF03;2726</a></span></p></li><li><p id="change-0.9.0b1-64"><span class="yiyi-st" id="yiyi-1519"><span class="target" id="change-97b9ec01528f6ce1a103f8b8800d8b35"><strong>[sql] [bug] </strong></span>&#x56FA;&#x5B9A;&#x56DE;&#x5F52;&#x5230;0.7.9&#xFF0C;&#x5982;&#x679C;CTE&#x7684;&#x540D;&#x79F0;&#x5728;&#x591A;&#x4E2A;FROM&#x5B50;&#x53E5;&#x4E2D;&#x88AB;&#x5F15;&#x7528;&#xFF0C;&#x90A3;&#x4E48;&#x5B83;&#x7684;&#x540D;&#x79F0;&#x53EF;&#x80FD;&#x4E0D;&#x4F1A;&#x88AB;&#x6B63;&#x786E;&#x5F15;&#x7528;&#x3002;<a class="changeset-link headerlink reference internal" href="#change-97b9ec01528f6ce1a103f8b8800d8b35">&#xB6;</a></span></p><p><span class="yiyi-st" id="yiyi-1520">This change is also <strong>backported</strong> to: 0.8.3, 0.7.11</span></p><p><span class="yiyi-st" id="yiyi-1521">&#x53C2;&#x8003;&#x6587;&#x732E;&#xFF1A;<a class="reference external" href="http://www.sqlalchemy.org/trac/ticket/2801">&#xFF03;2801</a></span></p></li><li><p id="change-0.9.0b1-65"><span class="yiyi-st" id="yiyi-1522"><span class="target" id="change-0b6b7933cd03daaa51c88661f6a18a77"><strong>[sql] [bug] [cte] </strong></span>Fixed bug in common table expression system where if the CTE were used only as an <code class="docutils literal"><span class="pre">alias()</span></code> construct, it would not render using the WITH keyword.<a class="changeset-link headerlink reference internal" href="#change-0b6b7933cd03daaa51c88661f6a18a77">&#xB6;</a></span></p><p><span class="yiyi-st" id="yiyi-1523">This change is also <strong>backported</strong> to: 0.8.3, 0.7.11</span></p><p><span class="yiyi-st" id="yiyi-1524">&#x53C2;&#x8003;&#x6587;&#x732E;&#xFF1A;<a class="reference external" href="http://www.sqlalchemy.org/trac/ticket/2783">&#xFF03;2783</a></span></p></li><li><p id="change-0.9.0b1-66"><span class="yiyi-st" id="yiyi-1525"><span class="target" id="change-ee864489da68afbc90051f4bb9d0f94c"><strong>[sql] [bug] </strong></span>Fixed bug in <a class="reference internal" href="core_constraints.html#sqlalchemy.schema.CheckConstraint" title="sqlalchemy.schema.CheckConstraint"><code class="xref py py-class docutils literal"><span class="pre">CheckConstraint</span></code></a> DDL where the &#x201C;quote&#x201D; flag from a <a class="reference internal" href="core_metadata.html#sqlalchemy.schema.Column" title="sqlalchemy.schema.Column"><code class="xref py py-class docutils literal"><span class="pre">Column</span></code></a> object would not be propagated.<a class="changeset-link headerlink reference internal" href="#change-ee864489da68afbc90051f4bb9d0f94c">&#xB6;</a></span></p><p><span class="yiyi-st" id="yiyi-1526">This change is also <strong>backported</strong> to: 0.8.3, 0.7.11</span></p><p><span class="yiyi-st" id="yiyi-1527">&#x53C2;&#x8003;&#x6587;&#x732E;&#xFF1A;<a class="reference external" href="http://www.sqlalchemy.org/trac/ticket/2784">&#xFF03;2784</a></span></p></li><li><p id="change-0.9.0b1-67"><span class="yiyi-st" id="yiyi-1528"><span class="target" id="change-68ca19e2d66effbff44cb5a9c9633d5f"><strong>[sql] [bug] </strong></span>&#x5728;&#x8C03;&#x7528;&#x201C;attach&#x201D;&#x4E8B;&#x4EF6;&#x4E4B;&#x524D;&#xFF0C;&#x201C;name&#x201D;&#x5C5E;&#x6027;&#x5728;<a class="reference internal" href="core_constraints.html#sqlalchemy.schema.Index" title="sqlalchemy.schema.Index"><code class="xref py py-class docutils literal"><span class="pre">Index</span></code></a>&#x4E0A;&#x8BBE;&#x7F6E;&#xFF0C;&#x4EE5;&#x4FBF;&#x53EF;&#x4EE5;&#x4F7F;&#x7528;&#x9644;&#x4EF6;&#x4E8B;&#x4EF6;&#x52A8;&#x6001;&#x751F;&#x6210;&#x540D;&#x79F0;&#x7528;&#x4E8E;&#x57FA;&#x4E8E;&#x7236;&#x8868;&#x548C;/&#x6216;&#x5217;&#x7684;&#x7D22;&#x5F15;&#x3002;<a class="changeset-link headerlink reference internal" href="#change-68ca19e2d66effbff44cb5a9c9633d5f">&#xB6;</a></span></p><p><span class="yiyi-st" id="yiyi-1529">&#x53C2;&#x8003;&#x6587;&#x732E;&#xFF1A;<a class="reference external" href="http://www.sqlalchemy.org/trac/ticket/2835">&#xFF03;2835</a></span></p></li><li><p id="change-0.9.0b1-68"><span class="yiyi-st" id="yiyi-1530"><span class="target" id="change-f9093cc2030bb467e2b99b6844eee451"><strong>[sql] [bug] </strong></span>&#x9519;&#x8BEF;&#x7684;kw arg&#x201C;schema&#x201D;&#x5DF2;&#x4ECE;<a class="reference internal" href="core_constraints.html#sqlalchemy.schema.ForeignKey" title="sqlalchemy.schema.ForeignKey"><code class="xref py py-class docutils literal"><span class="pre">ForeignKey</span></code></a>&#x5BF9;&#x8C61;&#x4E2D;&#x5220;&#x9664;&#x3002;</span><span class="yiyi-st" id="yiyi-1531">&#x8FD9;&#x662F;&#x4E00;&#x4E2A;&#x65E0;&#x6240;&#x4F5C;&#x4E3A;&#x7684;&#x5076;&#x7136;&#x72AF;&#x7F6A;&#xFF1B;&#x5F53;&#x4F7F;&#x7528;&#x8FD9;&#x4E2A;kw arg&#x65F6;&#xFF0C;&#x5728;0.8.3&#x4E2D;&#x53D1;&#x51FA;&#x8B66;&#x544A;&#x3002;<a class="changeset-link headerlink reference internal" href="#change-f9093cc2030bb467e2b99b6844eee451">&#xB6;</a></span></p><p><span class="yiyi-st" id="yiyi-1532">&#x53C2;&#x8003;&#x6587;&#x732E;&#xFF1A;<a class="reference external" href="http://www.sqlalchemy.org/trac/ticket/2831">&#xFF03;2831</a></span></p></li><li><p id="change-0.9.0b1-69"><span class="yiyi-st" id="yiyi-1533"><span class="target" id="change-80f90191c40a63606c13f48bd62758c9"><strong>[sql] [bug] </strong></span>&#x5BF9;&#x201C;&#x5F15;&#x7528;&#x201D;&#x6807;&#x8BC6;&#x7B26;&#x7684;&#x5904;&#x7406;&#x65B9;&#x5F0F;&#x8FDB;&#x884C;&#x4E86;&#x91CD;&#x65B0;&#x4FEE;&#x6539;&#xFF0C;&#x800C;&#x4E0D;&#x662F;&#x4F9D;&#x8D56;&#x4F20;&#x9012;&#x7684;&#x5404;&#x79CD;<code class="docutils literal"><span class="pre">quote=True</span></code>&#x6807;&#x5FD7;&#xFF0C;&#x8FD9;&#x4E9B;&#x6807;&#x5FD7;&#x88AB;&#x8F6C;&#x6362;&#x4E3A;&#x4E30;&#x5BCC;&#x7684;&#x5B57;&#x7B26;&#x4E32;&#x5BF9;&#x8C61;&#xFF0C;&#x5176;&#x4E2D;&#x5305;&#x542B;&#x5F15;&#x7528;&#x4FE1;&#x606F;&#xFF0C;&#x8FD9;&#x4E9B;&#x4FE1;&#x606F;&#x88AB;&#x4F20;&#x9012;&#x5230;&#x901A;&#x7528;&#x6A21;&#x5F0F;&#x7ED3;&#x6784;&#xFF08;&#x5982;<a class="reference internal" href="core_metadata.html#sqlalchemy.schema.Table" title="sqlalchemy.schema.Table"><code class="xref py py-class docutils literal"><span class="pre">Table</span></code></a>&#xFF0C;<a class="reference internal" href="core_metadata.html#sqlalchemy.schema.Column" title="sqlalchemy.schema.Column"><code class="xref py py-class docutils literal"><span class="pre">Column</span></code></a>&#x7B49;&#xFF09;&#x3002;</span><span class="yiyi-st" id="yiyi-1534">&#x8FD9;&#x89E3;&#x51B3;&#x4E86;&#x5404;&#x79CD;&#x65B9;&#x6CD5;&#x7684;&#x95EE;&#x9898;&#xFF0C;&#x8FD9;&#x4E9B;&#x65B9;&#x6CD5;&#x6CA1;&#x6709;&#x6B63;&#x786E;&#x5730;&#x9075;&#x5B88;&#x201C;quote&#x201D;&#x6807;&#x5FD7;&#xFF0C;&#x4F8B;&#x5982;<a class="reference internal" href="core_connections.html#sqlalchemy.engine.Engine.has_table" title="sqlalchemy.engine.Engine.has_table"><code class="xref py py-meth docutils literal"><span class="pre">Engine.has_table()</span></code></a>&#x548C;&#x76F8;&#x5173;&#x65B9;&#x6CD5;&#x3002;</span><span class="yiyi-st" id="yiyi-1535"><a class="reference internal" href="core_sqlelement.html#sqlalchemy.sql.elements.quoted_name" title="sqlalchemy.sql.elements.quoted_name"><code class="xref py py-class docutils literal"><span class="pre">quoted_name</span></code></a>&#x5BF9;&#x8C61;&#x662F;&#x4E00;&#x4E2A;&#x5B57;&#x7B26;&#x4E32;&#x5B50;&#x7C7B;&#xFF0C;&#x5982;&#x679C;&#x9700;&#x8981;&#x4E5F;&#x53EF;&#x4EE5;&#x660E;&#x786E;&#x4F7F;&#x7528;&#xFF1B;&#x8BE5;&#x5BF9;&#x8C61;&#x5C06;&#x4FDD;&#x6301;&#x4F20;&#x9012;&#x7684;&#x5F15;&#x7528;&#x504F;&#x597D;&#xFF0C;&#x5E76;&#x4E14;&#x8FD8;&#x5C06;&#x7ED5;&#x8FC7;&#x7531;&#x5927;&#x5199;&#x7B26;&#x53F7;&#x6807;&#x51C6;&#x5316;&#x7684;&#x65B9;&#x8A00;&#xFF08;&#x5982;Oracle&#xFF0C;Firebird&#x548C;DB2&#xFF09;&#x6267;&#x884C;&#x7684;&#x201C;&#x540D;&#x79F0;&#x89C4;&#x8303;&#x5316;&#x201D;&#x3002;</span><span class="yiyi-st" id="yiyi-1536">&#x7ED3;&#x679C;&#x662F;&#xFF0C;&#x201C;&#x5927;&#x5199;&#x201D;&#x540E;&#x7AEF;&#x73B0;&#x5728;&#x53EF;&#x4EE5;&#x4F7F;&#x7528;&#x5F3A;&#x5236;&#x5F15;&#x7528;&#x7684;&#x540D;&#x79F0;&#xFF0C;&#x5982;&#x5C0F;&#x5199;&#x5F15;&#x7528;&#x7684;&#x540D;&#x79F0;&#x548C;&#x65B0;&#x7684;&#x4FDD;&#x7559;&#x5B57;&#x3002;</span></p><div class="admonition seealso"><p class="first admonition-title"><span class="yiyi-st" id="yiyi-1537">&#x4E5F;&#x53EF;&#x4EE5;&#x770B;&#x770B;</span></p><p class="last"><span class="yiyi-st" id="yiyi-1538"><a class="reference internal" href="migration_09.html#change-2812"><span>Schema identifiers now carry along their own quoting information</span></a></span></p></div><span class="yiyi-st" id="yiyi-1540"> <a class="changeset-link headerlink reference internal" href="#change-80f90191c40a63606c13f48bd62758c9">&#xB6;</a></span><p><span class="yiyi-st" id="yiyi-1539">&#x53C2;&#x8003;&#x6587;&#x732E;&#xFF1A;<a class="reference external" href="http://www.sqlalchemy.org/trac/ticket/2812">&#xFF03;2812</a></span></p></li><li><p id="change-0.9.0b1-70"><span class="yiyi-st" id="yiyi-1541"><span class="target" id="change-6116437230b6aca55206409a957f932e"><strong>[sql] [bug] </strong></span>&#x6839;&#x636E;&#x65F6;&#x523B;&#xFF0C;&#x5C06;<a class="reference internal" href="core_constraints.html#sqlalchemy.schema.ForeignKey" title="sqlalchemy.schema.ForeignKey"><code class="xref py py-class docutils literal"><span class="pre">ForeignKey</span></code></a>&#x5BF9;&#x8C61;&#x89E3;&#x6790;&#x4E3A;&#x5176;&#x76EE;&#x6807;<a class="reference internal" href="core_metadata.html#sqlalchemy.schema.Column" title="sqlalchemy.schema.Column"><code class="xref py py-class docutils literal"><span class="pre">Column</span></code></a>&#x5373;&#x76EE;&#x6807;<a class="reference internal" href="core_metadata.html#sqlalchemy.schema.Column" title="sqlalchemy.schema.Column"><code class="xref py py-class docutils literal"><span class="pre">Column</span></code></a>&#x4E0E;<a class="reference internal" href="core_constraints.html#sqlalchemy.schema.ForeignKey" title="sqlalchemy.schema.ForeignKey"><code class="xref py py-class docutils literal"><span class="pre">ForeignKey</span></code></a>&#x76F8;&#x540C;&#x7684;<a class="reference internal" href="core_metadata.html#sqlalchemy.schema.MetaData" title="sqlalchemy.schema.MetaData"><code class="xref py py-class docutils literal"><span class="pre">MetaData</span></code></a>&#x5173;&#x8054;&#xFF0C;&#x800C;&#x4E0D;&#x662F;&#x7B49;&#x5F85;&#x7B2C;&#x4E00;&#x6B21;&#x6784;&#x5EFA;&#x8FDE;&#x63A5;&#x6216;&#x7C7B;&#x4F3C;&#x3002;</span><span class="yiyi-st" id="yiyi-1542">&#x8FD9;&#x4E0E;&#x5176;&#x4ED6;&#x6539;&#x8FDB;&#x4E00;&#x8D77;&#x5141;&#x8BB8;&#x66F4;&#x65E9;&#x5730;&#x68C0;&#x6D4B;&#x4E00;&#x4E9B;&#x5916;&#x952E;&#x914D;&#x7F6E;&#x95EE;&#x9898;&#x3002;</span><span class="yiyi-st" id="yiyi-1543">&#x6B64;&#x5904;&#x8FD8;&#x5305;&#x62EC;&#x7C7B;&#x578B;&#x4F20;&#x64AD;&#x7CFB;&#x7EDF;&#x7684;&#x8FD4;&#x5DE5;&#xFF0C;&#x56E0;&#x6B64;&#x73B0;&#x5728;&#x5E94;&#x8BE5;&#x53EF;&#x9760;&#x5730;&#x5C06;&#x7C7B;&#x578B;&#x8BBE;&#x7F6E;&#x4E3A;<code class="docutils literal"><span class="pre">None</span></code>&#x5728;&#x4EFB;&#x4F55;<a class="reference internal" href="core_metadata.html#sqlalchemy.schema.Column" title="sqlalchemy.schema.Column"><code class="xref py py-class docutils literal"><span class="pre">Column</span></code></a>&#x4E0A;&#x5F15;&#x7528;&#x53E6;&#x4E00;&#x4E2A;<a class="reference internal" href="core_constraints.html#sqlalchemy.schema.ForeignKey" title="sqlalchemy.schema.ForeignKey"><code class="xref py py-class docutils literal"><span class="pre">ForeignKey</span></code></a>  - &#x4E00;&#x65E6;&#x4E0E;&#x5176;&#x4ED6;&#x5217;&#x5173;&#x8054;&#xFF0C;&#x8BE5;&#x7C7B;&#x578B;&#x5C06;&#x4ECE;&#x76EE;&#x6807;&#x5217;&#x4E2D;&#x590D;&#x5236;&#xFF0C;&#x73B0;&#x5728;&#x4E5F;&#x9002;&#x7528;&#x4E8E;&#x7EC4;&#x5408;&#x5916;&#x952E;&#x3002;</span></p><div class="admonition seealso"><p class="first admonition-title"><span class="yiyi-st" id="yiyi-1544">&#x4E5F;&#x53EF;&#x4EE5;&#x770B;&#x770B;</span></p><p class="last"><span class="yiyi-st" id="yiyi-1545"><a class="reference internal" href="migration_09.html#migration-1765"><span>Columns can reliably get their type from a column referred to via ForeignKey</span></a>&#x5F15;&#x7528;&#x7684;&#x5217;&#x4E2D;&#x83B7;&#x53D6;&#x5B83;&#x4EEC;&#x7684;&#x7C7B;&#x578B;</span></p></div><span class="yiyi-st" id="yiyi-1547"> <a class="changeset-link headerlink reference internal" href="#change-6116437230b6aca55206409a957f932e">&#xB6;</a></span><p><span class="yiyi-st" id="yiyi-1546">&#x53C2;&#x8003;&#x6587;&#x732E;&#xFF1A;<a class="reference external" href="http://www.sqlalchemy.org/trac/ticket/1765">&#xFF03;1765</a></span></p></li></ul></div><div class="section" id="change-0.9.0b1-postgresql"><h3><span class="yiyi-st" id="yiyi-1548">&#x7684;PostgreSQL <a class="headerlink" href="#change-0.9.0b1-postgresql" title="Permalink to this headline">&#xB6; T0&gt;</a></span></h3><ul class="simple"><li><p id="change-0.9.0b1-71"><span class="yiyi-st" id="yiyi-1549"><span class="target" id="change-d1e23a832aab5d9d980590ac352028c9"><strong>[postgresql] [feature] </strong></span>&#x5DF2;&#x6DFB;&#x52A0;&#x5BF9;Postgresql 9.2&#x8303;&#x56F4;&#x7C7B;&#x578B;&#x7684;&#x652F;&#x6301;&#x3002;</span><span class="yiyi-st" id="yiyi-1550">&#x76EE;&#x524D;&#xFF0C;&#x6CA1;&#x6709;&#x63D0;&#x4F9B;&#x7C7B;&#x578B;&#x8F6C;&#x6362;&#xFF0C;&#x56E0;&#x6B64;&#x76EE;&#x524D;&#x53EF;&#x4EE5;&#x76F4;&#x63A5;&#x4F7F;&#x7528;&#x5B57;&#x7B26;&#x4E32;&#x6216;psycopg2 2.5&#x8303;&#x56F4;&#x6269;&#x5C55;&#x7C7B;&#x578B;&#x3002;</span><span class="yiyi-st" id="yiyi-1551">&#x8865;&#x4E01;&#x793C;&#x8C8C;Chris Withers&#x3002;<a class="changeset-link headerlink reference internal" href="#change-d1e23a832aab5d9d980590ac352028c9">&#xB6;</a></span></p><p><span class="yiyi-st" id="yiyi-1552">&#x8FD9;&#x4E2A;&#x6539;&#x53D8;&#x4E5F;&#x88AB;<strong>backported</strong>&#x4FEE;&#x6539;&#x4E3A;&#xFF1A;0.8.2</span></p><p></p></li><li><p id="change-0.9.0b1-72"><span class="yiyi-st" id="yiyi-1553"><span class="target" id="change-0c25a8156ec52fca32278f7939a5ec93"><strong>[postgresql] [feature] </strong></span>&#x5728;&#x4F7F;&#x7528;psycopg2 DBAPI&#x65F6;&#x589E;&#x52A0;&#x4E86;&#x5BF9;&#x201C;AUTOCOMMIT&#x201D;&#x9694;&#x79BB;&#x7684;&#x652F;&#x6301;&#x3002;</span><span class="yiyi-st" id="yiyi-1554">&#x8BE5;&#x5173;&#x952E;&#x5B57;&#x53EF;&#x901A;&#x8FC7;<code class="docutils literal"><span class="pre">isolation_level</span></code>&#x6267;&#x884C;&#x9009;&#x9879;&#x4F7F;&#x7528;&#x3002;</span><span class="yiyi-st" id="yiyi-1555">Pope&#x793C;&#x8C8C;Roman Podolyaka&#x3002;<a class="changeset-link headerlink reference internal" href="#change-0c25a8156ec52fca32278f7939a5ec93">&#xB6;</a></span></p><p><span class="yiyi-st" id="yiyi-1556">&#x8FD9;&#x4E2A;&#x6539;&#x53D8;&#x4E5F;&#x88AB;<strong>backported</strong>&#x4FEE;&#x6539;&#x4E3A;&#xFF1A;0.8.2</span></p><p><span class="yiyi-st" id="yiyi-1557">&#x53C2;&#x8003;&#x6587;&#x732E;&#xFF1A;<a class="reference external" href="http://www.sqlalchemy.org/trac/ticket/2072">&#xFF03;2072</a></span></p></li><li><p id="change-0.9.0b1-73"><span class="yiyi-st" id="yiyi-1558"><span class="target" id="change-e0e1515141ca0c31a3932b72465f0701"><strong>[postgresql] [feature] </strong></span>Added support for rendering <code class="docutils literal"><span class="pre">SMALLSERIAL</span></code> when a <a class="reference internal" href="core_type_basics.html#sqlalchemy.types.SmallInteger" title="sqlalchemy.types.SmallInteger"><code class="xref py py-class docutils literal"><span class="pre">SmallInteger</span></code></a> type is used on a primary key autoincrement column, based on server version detection of Postgresql version 9.2 or greater.<a class="changeset-link headerlink reference internal" href="#change-e0e1515141ca0c31a3932b72465f0701">&#xB6;</a></span></p><p><span class="yiyi-st" id="yiyi-1559">&#x53C2;&#x8003;&#x6587;&#x732E;&#xFF1A;<a class="reference external" href="http://www.sqlalchemy.org/trac/ticket/2840">&#xFF03;2840</a></span></p></li><li><p id="change-0.9.0b1-74"><span class="yiyi-st" id="yiyi-1560"><span class="target" id="change-c7b42a13889c2700394a72cd53fdf578"><strong>[postgresql] [bug] </strong></span>&#x4ECE;&#x5217;&#x7684;&#x670D;&#x52A1;&#x5668;&#x9ED8;&#x8BA4;&#x503C;&#x7684;&#x53CD;&#x5C04;&#x4E2D;&#x5220;&#x9664;&#x4E86;128&#x4E2A;&#x5B57;&#x7B26;&#x7684;&#x622A;&#x65AD;&#xFF1B;&#x6B64;&#x4EE3;&#x7801;&#x539F;&#x59CB;&#x6765;&#x81EA;PG&#x7CFB;&#x7EDF;&#x89C6;&#x56FE;&#xFF0C;&#x5B83;&#x4E3A;&#x4E86;&#x53EF;&#x8BFB;&#x6027;&#x800C;&#x622A;&#x65AD;&#x4E86;&#x5B57;&#x7B26;&#x4E32;&#x3002;<a class="changeset-link headerlink reference internal" href="#change-c7b42a13889c2700394a72cd53fdf578">&#xB6;</a></span></p><p><span class="yiyi-st" id="yiyi-1561">This change is also <strong>backported</strong> to: 0.8.3</span></p><p><span class="yiyi-st" id="yiyi-1562">&#x53C2;&#x8003;&#x6587;&#x732E;&#xFF1A;<a class="reference external" href="http://www.sqlalchemy.org/trac/ticket/2844">&#xFF03;2844</a></span></p></li><li><p id="change-0.9.0b1-75"><span class="yiyi-st" id="yiyi-1563"><span class="target" id="change-90c077a62f3393fc602fa4e68ef713bd"><strong>[postgresql] [bug] </strong></span>&#x62EC;&#x53F7;&#x5C06;&#x5E94;&#x7528;&#x4E8E;&#x590D;&#x5408;SQL&#x8868;&#x8FBE;&#x5F0F;&#xFF0C;&#x5E76;&#x5728;CREATE INDEX&#x8BED;&#x53E5;&#x7684;&#x5217;&#x8868;&#x4E2D;&#x5448;&#x73B0;&#x3002;<a class="changeset-link headerlink reference internal" href="#change-90c077a62f3393fc602fa4e68ef713bd">&#xB6;</a></span></p><p><span class="yiyi-st" id="yiyi-1564">This change is also <strong>backported</strong> to: 0.8.3</span></p><p><span class="yiyi-st" id="yiyi-1565">&#x53C2;&#x8003;&#x6587;&#x732E;&#xFF1A;<a class="reference external" href="http://www.sqlalchemy.org/trac/ticket/2742">&#xFF03;2742</a></span></p></li><li><p id="change-0.9.0b1-76"><span class="yiyi-st" id="yiyi-1566"><span class="target" id="change-7a2ed752121c34c9b56e49bf4745e646"><strong>[postgresql] [bug] </strong></span>&#x4FEE;&#x590D;&#x4E86;Postgresql&#x7248;&#x672C;&#x5B57;&#x7B26;&#x4E32;&#x5728;&#x524D;&#x7F00;&#x201C;Postgresql&#x201D;&#x6216;&#x201C;EnterpriseDB&#x201D;&#x4E4B;&#x524D;&#x7684;&#x524D;&#x7F00;&#x4E0D;&#x4F1A;&#x88AB;&#x89E3;&#x6790;&#x7684;&#x9519;&#x8BEF;&#x3002;</span><span class="yiyi-st" id="yiyi-1567">Courtesy Scott Schaefer&#x3002;<a class="changeset-link headerlink reference internal" href="#change-7a2ed752121c34c9b56e49bf4745e646">&#xB6;</a></span></p><p><span class="yiyi-st" id="yiyi-1568">This change is also <strong>backported</strong> to: 0.8.3</span></p><p><span class="yiyi-st" id="yiyi-1569">&#x53C2;&#x8003;&#x6587;&#x732E;&#xFF1A;<a class="reference external" href="http://www.sqlalchemy.org/trac/ticket/2819">&#xFF03;2819</a></span></p></li><li><p id="change-0.9.0b1-77"><span class="yiyi-st" id="yiyi-1570"><span class="target" id="change-bf3ab2871c03846506f101f9e3b03dca"><strong>[postgresql] [bug] </strong></span>The behavior of <a class="reference internal" href="core_sqlelement.html#sqlalchemy.sql.expression.extract" title="sqlalchemy.sql.expression.extract"><code class="xref py py-func docutils literal"><span class="pre">extract()</span></code></a> has been simplified on the Postgresql dialect to no longer inject a hardcoded <code class="docutils literal"><span class="pre">::timestamp</span></code> or similar cast into the given expression, as this interfered with types such as timezone-aware datetimes, but also does not appear to be at all necessary with modern versions of psycopg2.<a class="changeset-link headerlink reference internal" href="#change-bf3ab2871c03846506f101f9e3b03dca">&#xB6;</a></span></p><p><span class="yiyi-st" id="yiyi-1571">&#x8FD9;&#x4E2A;&#x6539;&#x53D8;&#x4E5F;&#x88AB;<strong>backported</strong>&#x4FEE;&#x6539;&#x4E3A;&#xFF1A;0.8.2</span></p><p><span class="yiyi-st" id="yiyi-1572">&#x53C2;&#x8003;&#x6587;&#x732E;&#xFF1A;<a class="reference external" href="http://www.sqlalchemy.org/trac/ticket/2740">&#xFF03;2740</a></span></p></li><li><p id="change-0.9.0b1-78"><span class="yiyi-st" id="yiyi-1573"><span class="target" id="change-a284671030fa2fb228bace39dcecba09"><strong>[postgresql] [bug] </strong></span>Fixed bug in HSTORE type where keys/values that contained backslashed quotes would not be escaped correctly when using the &#x201C;non native&#x201D; (i.e. non-psycopg2) means of translating HSTORE data. </span><span class="yiyi-st" id="yiyi-1574">&#x8865;&#x4E01;&#x7531;Ryan Kelly&#x63D0;&#x4F9B;&#x3002;<a class="changeset-link headerlink reference internal" href="#change-a284671030fa2fb228bace39dcecba09">&#xB6;</a></span></p><p><span class="yiyi-st" id="yiyi-1575">&#x8FD9;&#x4E2A;&#x6539;&#x53D8;&#x4E5F;&#x88AB;<strong>backported</strong>&#x4FEE;&#x6539;&#x4E3A;&#xFF1A;0.8.2</span></p><p><span class="yiyi-st" id="yiyi-1576">&#x53C2;&#x8003;&#x6587;&#x732E;&#xFF1A;<a class="reference external" href="http://www.sqlalchemy.org/trac/ticket/2766">&#xFF03;2766</a></span></p></li><li><p id="change-0.9.0b1-79"><span class="yiyi-st" id="yiyi-1577"><span class="target" id="change-fd3a75fa26f5e1303ec1daf1ede035e9"><strong>[postgresql] [bug] </strong></span>&#x4FEE;&#x590D;&#x4E86;&#x591A;&#x5217;Postgresql&#x7D22;&#x5F15;&#x4E2D;&#x7684;&#x5217;&#x987A;&#x5E8F;&#x5C06;&#x4EE5;&#x9519;&#x8BEF;&#x987A;&#x5E8F;&#x53CD;&#x6620;&#x7684;&#x9519;&#x8BEF;&#x3002;</span><span class="yiyi-st" id="yiyi-1578">Courtesy Roman Podolyaka&#x3002;<a class="changeset-link headerlink reference internal" href="#change-fd3a75fa26f5e1303ec1daf1ede035e9">&#xB6;</a></span></p><p><span class="yiyi-st" id="yiyi-1579">&#x8FD9;&#x4E2A;&#x6539;&#x53D8;&#x4E5F;&#x88AB;<strong>backported</strong>&#x4FEE;&#x6539;&#x4E3A;&#xFF1A;0.8.2</span></p><p><span class="yiyi-st" id="yiyi-1580">&#x53C2;&#x8003;&#x6587;&#x732E;&#xFF1A;<a class="reference external" href="http://www.sqlalchemy.org/trac/ticket/2767">&#xFF03;2767</a></span></p></li></ul></div><div class="section" id="change-0.9.0b1-mysql"><h3><span class="yiyi-st" id="yiyi-1581">MySQL&#x7684;<a class="headerlink" href="#change-0.9.0b1-mysql" title="Permalink to this headline">&#xB6; T0&gt;</a></span></h3><ul class="simple"><li><p id="change-0.9.0b1-80"><span class="yiyi-st" id="yiyi-1582"><span class="target" id="change-d0a8eb2d08437d50b589f473fab54468"><strong>[mysql] [feature] </strong></span>The <code class="docutils literal"><span class="pre">mysql_length</span></code> parameter used with <a class="reference internal" href="core_constraints.html#sqlalchemy.schema.Index" title="sqlalchemy.schema.Index"><code class="xref py py-class docutils literal"><span class="pre">Index</span></code></a> can now be passed as a dictionary of column names/lengths, for use with composite indexes. </span><span class="yiyi-st" id="yiyi-1583">&#x975E;&#x5E38;&#x611F;&#x8C22;Roman Podolyaka&#x63D0;&#x4F9B;&#x7684;&#x8865;&#x4E01;&#x3002;<a class="changeset-link headerlink reference internal" href="#change-d0a8eb2d08437d50b589f473fab54468">&#xB6;</a></span></p><p><span class="yiyi-st" id="yiyi-1584">&#x8FD9;&#x4E2A;&#x6539;&#x53D8;&#x4E5F;&#x88AB;<strong>backported</strong>&#x4FEE;&#x6539;&#x4E3A;&#xFF1A;0.8.2</span></p><p><span class="yiyi-st" id="yiyi-1585">&#x53C2;&#x8003;&#x6587;&#x732E;&#xFF1A;<a class="reference external" href="http://www.sqlalchemy.org/trac/ticket/2704">&#xFF03;2704</a></span></p></li><li><p id="change-0.9.0b1-81"><span class="yiyi-st" id="yiyi-1586"><span class="target" id="change-8d6f26937d8905e155c0deb811a65b8c"><strong>[mysql] [feature] </strong></span>&#x73B0;&#x5728;&#xFF0C;MySQL <a class="reference internal" href="dialects_mysql.html#sqlalchemy.dialects.mysql.SET" title="sqlalchemy.dialects.mysql.SET"><code class="xref py py-class docutils literal"><span class="pre">mysql.SET</span></code></a>&#x7C7B;&#x578B;&#x5177;&#x6709;&#x4E0E;<a class="reference internal" href="dialects_mysql.html#sqlalchemy.dialects.mysql.ENUM" title="sqlalchemy.dialects.mysql.ENUM"><code class="xref py py-class docutils literal"><span class="pre">mysql.ENUM</span></code></a>&#x76F8;&#x540C;&#x7684;&#x81EA;&#x52A8;&#x5F15;&#x7528;&#x884C;&#x4E3A;&#x3002;</span><span class="yiyi-st" id="yiyi-1587">&#x8BBE;&#x7F6E;&#x503C;&#x65F6;&#x4E0D;&#x9700;&#x8981;&#x5F15;&#x53F7;&#xFF0C;&#x4F46;&#x662F;&#x5B58;&#x5728;&#x7684;&#x5F15;&#x53F7;&#x5C06;&#x4F1A;&#x968F;&#x8B66;&#x544A;&#x4E00;&#x8D77;&#x81EA;&#x52A8;&#x68C0;&#x6D4B;&#x3002;</span><span class="yiyi-st" id="yiyi-1588">&#x8FD9;&#x4E5F;&#x6709;&#x52A9;&#x4E8E;Alembic&#xFF0C;&#x5176;&#x4E2D;SET&#x7C7B;&#x578B;&#x4E0D;&#x4F1A;&#x7528;&#x5F15;&#x53F7;&#x6E32;&#x67D3;&#x3002;<a class="changeset-link headerlink reference internal" href="#change-8d6f26937d8905e155c0deb811a65b8c">&#xB6;</a></span></p><p><span class="yiyi-st" id="yiyi-1589">&#x53C2;&#x8003;&#x6587;&#x732E;&#xFF1A;<a class="reference external" href="http://www.sqlalchemy.org/trac/ticket/2817">&#xFF03;2817</a></span></p></li><li><p id="change-0.9.0b1-82"><span class="yiyi-st" id="yiyi-1590"><span class="target" id="change-e43926dc67636d3ba7e0744c194355b2"><strong>[mysql] [bug] </strong></span>The change in <a class="reference external" href="http://www.sqlalchemy.org/trac/ticket/2721">#2721</a>, which is that the <code class="docutils literal"><span class="pre">deferrable</span></code> keyword of <a class="reference internal" href="core_constraints.html#sqlalchemy.schema.ForeignKeyConstraint" title="sqlalchemy.schema.ForeignKeyConstraint"><code class="xref py py-class docutils literal"><span class="pre">ForeignKeyConstraint</span></code></a> is silently ignored on the MySQL backend, will be reverted as of 0.9; this keyword will now render again, raising errors on MySQL as it is not understood - the same behavior will also apply to the <code class="docutils literal"><span class="pre">initially</span></code> keyword. </span><span class="yiyi-st" id="yiyi-1591">&#x5728;0.8&#x4E2D;&#xFF0C;&#x5173;&#x952E;&#x5B57;&#x5C06;&#x4FDD;&#x6301;&#x5FFD;&#x7565;&#xFF0C;&#x4F46;&#x4F1A;&#x53D1;&#x51FA;&#x8B66;&#x544A;&#x3002;</span><span class="yiyi-st" id="yiyi-1592">&#x6B64;&#x5916;&#xFF0C;<code class="docutils literal"><span class="pre">match</span></code>&#x5173;&#x952E;&#x5B57;&#x73B0;&#x5728;&#x4F1A;&#x5728;0.9&#x4E0A;&#x4EA7;&#x751F;&#x4E00;&#x4E2A;<a class="reference internal" href="core_exceptions.html#sqlalchemy.exc.CompileError" title="sqlalchemy.exc.CompileError"><code class="xref py py-exc docutils literal"><span class="pre">CompileError</span></code></a>&#xFF0C;&#x5E76;&#x5728;0.8&#x4E0A;&#x53D1;&#x51FA;&#x8B66;&#x544A;&#xFF1B;&#x8FD9;&#x4E2A;&#x5173;&#x952E;&#x5B57;&#x4E0D;&#x4EC5;&#x88AB;MySQL&#x9ED8;&#x9ED8;&#x5730;&#x5FFD;&#x7565;&#xFF0C;&#x800C;&#x4E14;&#x6253;&#x7834;&#x4E86;ON UPDATE / ON DELETE&#x9009;&#x9879;&#x3002;</span></p><p><span class="yiyi-st" id="yiyi-1593">&#x8981;&#x4F7F;&#x7528;&#x5728;MySQL&#x4E0A;&#x4E0D;&#x5448;&#x73B0;&#x6216;&#x5448;&#x73B0;&#x4E0D;&#x540C;&#x7684;<a class="reference internal" href="core_constraints.html#sqlalchemy.schema.ForeignKeyConstraint" title="sqlalchemy.schema.ForeignKeyConstraint"><code class="xref py py-class docutils literal"><span class="pre">ForeignKeyConstraint</span></code></a>&#xFF0C;&#x8BF7;&#x4F7F;&#x7528;&#x81EA;&#x5B9A;&#x4E49;&#x7F16;&#x8BD1;&#x9009;&#x9879;&#x3002;</span><span class="yiyi-st" id="yiyi-1594">&#x8FD9;&#x4E2A;&#x7528;&#x6CD5;&#x7684;&#x4E00;&#x4E2A;&#x4F8B;&#x5B50;&#x5DF2;&#x7ECF;&#x6DFB;&#x52A0;&#x5230;&#x6587;&#x6863;&#x4E2D;&#xFF0C;&#x8BF7;&#x53C2;&#x9605;<a class="reference internal" href="dialects_mysql.html#mysql-foreign-keys"><span>MySQL Foreign Keys</span></a>&#x3002;</span></p><span class="yiyi-st" id="yiyi-1597"> <a class="changeset-link headerlink reference internal" href="#change-e43926dc67636d3ba7e0744c194355b2">&#xB6;</a></span><p><span class="yiyi-st" id="yiyi-1595">This change is also <strong>backported</strong> to: 0.8.3</span></p><p><span class="yiyi-st" id="yiyi-1596">&#x53C2;&#x8003;&#x6587;&#x732E;&#xFF1A;<a class="reference external" href="http://www.sqlalchemy.org/trac/ticket/2721">&#xFF03;2721</a>&#xFF0C;<a class="reference external" href="http://www.sqlalchemy.org/trac/ticket/2839">&#xFF03;2839</a></span></p></li><li><p id="change-0.9.0b1-83"><span class="yiyi-st" id="yiyi-1598"><span class="target" id="change-2a6ed47e91f911c2105ce955afc32748"><strong>[mysql] [bug] </strong></span>MySQL-connector dialect now allows options in the create_engine query string to override those defaults set up in the connect, including &#x201C;buffered&#x201D; and &#x201C;raise_on_warnings&#x201D;.<a class="changeset-link headerlink reference internal" href="#change-2a6ed47e91f911c2105ce955afc32748">&#xB6;</a></span></p><p><span class="yiyi-st" id="yiyi-1599">This change is also <strong>backported</strong> to: 0.8.3</span></p><p><span class="yiyi-st" id="yiyi-1600">&#x53C2;&#x8003;&#x6587;&#x732E;&#xFF1A;<a class="reference external" href="http://www.sqlalchemy.org/trac/ticket/2515">&#xFF03;2515</a></span></p></li><li><p id="change-0.9.0b1-84"><span class="yiyi-st" id="yiyi-1601"><span class="target" id="change-132183eb674d003b5472f2173789f67e"><strong>[mysql] [bug] </strong></span>Fixed bug when using multi-table UPDATE where a supplemental table is a SELECT with its own bound parameters, where the positioning of the bound parameters would be reversed versus the statement itself when using MySQL&#x2019;s special syntax.<a class="changeset-link headerlink reference internal" href="#change-132183eb674d003b5472f2173789f67e">&#xB6;</a></span></p><p><span class="yiyi-st" id="yiyi-1602">&#x8FD9;&#x4E2A;&#x6539;&#x53D8;&#x4E5F;&#x88AB;<strong>backported</strong>&#x4FEE;&#x6539;&#x4E3A;&#xFF1A;0.8.2</span></p><p><span class="yiyi-st" id="yiyi-1603">&#x53C2;&#x8003;&#x6587;&#x732E;&#xFF1A;<a class="reference external" href="http://www.sqlalchemy.org/trac/ticket/2768">&#xFF03;2768</a></span></p></li><li><p id="change-0.9.0b1-85"><span class="yiyi-st" id="yiyi-1604"><span class="target" id="change-b93865e4329f3662cd5b2933bf555218"><strong>[mysql] [bug] </strong></span>&#x4E3A;<code class="docutils literal"><span class="pre">mysql+gaerdbms</span></code>&#x65B9;&#x8A00;&#x6DFB;&#x52A0;&#x4E86;&#x53E6;&#x4E00;&#x4E2A;&#x6761;&#x4EF6;&#xFF0C;&#x7528;&#x4E8E;&#x68C0;&#x6D4B;&#x6240;&#x8C13;&#x7684;&#x201C;&#x5F00;&#x53D1;&#x201D;&#x6A21;&#x5F0F;&#xFF0C;&#x6211;&#x4EEC;&#x5E94;&#x8BE5;&#x4F7F;&#x7528;<code class="docutils literal"><span class="pre">rdbms_mysqldb</span></code></span><span class="yiyi-st" id="yiyi-1605">&#x8865;&#x4E01;&#x793C;&#x8C8C;Brett Slatkin&#x3002;<a class="changeset-link headerlink reference internal" href="#change-b93865e4329f3662cd5b2933bf555218">&#xB6;</a></span></p><p><span class="yiyi-st" id="yiyi-1606">&#x8FD9;&#x4E2A;&#x6539;&#x53D8;&#x4E5F;&#x88AB;<strong>backported</strong>&#x4FEE;&#x6539;&#x4E3A;&#xFF1A;0.8.2</span></p><p><span class="yiyi-st" id="yiyi-1607">&#x53C2;&#x8003;&#x6587;&#x732E;&#xFF1A;<a class="reference external" href="http://www.sqlalchemy.org/trac/ticket/2715">&#xFF03;2715</a></span></p></li><li><p id="change-0.9.0b1-86"><span class="yiyi-st" id="yiyi-1608"><span class="target" id="change-43e1dfe4d4c7f5082a4ca7f2271b21b0"><strong>[mysql] [bug] </strong></span>The <code class="docutils literal"><span class="pre">deferrable</span></code> keyword argument on <a class="reference internal" href="core_constraints.html#sqlalchemy.schema.ForeignKey" title="sqlalchemy.schema.ForeignKey"><code class="xref py py-class docutils literal"><span class="pre">ForeignKey</span></code></a> and <a class="reference internal" href="core_constraints.html#sqlalchemy.schema.ForeignKeyConstraint" title="sqlalchemy.schema.ForeignKeyConstraint"><code class="xref py py-class docutils literal"><span class="pre">ForeignKeyConstraint</span></code></a> will not render the <code class="docutils literal"><span class="pre">DEFERRABLE</span></code> keyword on the MySQL dialect. </span><span class="yiyi-st" id="yiyi-1609">&#x5F88;&#x957F;&#x4E00;&#x6BB5;&#x65F6;&#x95F4;&#xFF0C;&#x6211;&#x4EEC;&#x653E;&#x5F03;&#x4E86;&#x8FD9;&#x4E00;&#x70B9;&#xFF0C;&#x56E0;&#x4E3A;&#x4E0D;&#x53EF;&#x5EF6;&#x8FDF;&#x7684;&#x5916;&#x952E;&#x4E0E;&#x5EF6;&#x8FDF;&#x7684;&#x5916;&#x952E;&#x7684;&#x884C;&#x4E3A;&#x4E0D;&#x540C;&#xFF0C;&#x4F46;&#x6709;&#x4E9B;&#x73AF;&#x5883;&#x53EA;&#x662F;&#x7981;&#x7528;MySQL&#x4E0A;&#x7684;FK&#xFF0C;&#x6240;&#x4EE5;&#x6211;&#x4EEC;&#x5728;&#x8FD9;&#x91CC;&#x4E0D;&#x4F1A;&#x5F15;&#x8D77;&#x6CE8;&#x610F;&#x3002;<a class="changeset-link headerlink reference internal" href="#change-43e1dfe4d4c7f5082a4ca7f2271b21b0"> t0 &gt;</a></span></p><p><span class="yiyi-st" id="yiyi-1610">&#x8FD9;&#x4E2A;&#x6539;&#x53D8;&#x4E5F;&#x88AB;<strong>backported</strong>&#x4FEE;&#x6539;&#x4E3A;&#xFF1A;0.8.2</span></p><p><span class="yiyi-st" id="yiyi-1611">&#x53C2;&#x8003;&#x6587;&#x732E;&#xFF1A;<a class="reference external" href="http://www.sqlalchemy.org/trac/ticket/2721">&#xFF03;2721</a></span></p></li><li><p id="change-0.9.0b1-87"><span class="yiyi-st" id="yiyi-1612"><span class="target" id="change-8770e442e32764b20ee2132358bc9d6d"><strong>[mysql] [bug] </strong></span>&#x7248;&#x672C;5.5,5.6&#x7684;MySQL&#x4FDD;&#x7559;&#x5B57;&#x66F4;&#x65B0;&#xFF0C;Hanno Schlichting&#x63D0;&#x4F9B;&#x3002;<a class="changeset-link headerlink reference internal" href="#change-8770e442e32764b20ee2132358bc9d6d">&#xB6;</a></span></p><p><span class="yiyi-st" id="yiyi-1613">This change is also <strong>backported</strong> to: 0.8.3, 0.7.11</span></p><p><span class="yiyi-st" id="yiyi-1614">&#x53C2;&#x8003;&#x6587;&#x732E;&#xFF1A;<a class="reference external" href="http://www.sqlalchemy.org/trac/ticket/2791">&#xFF03;2791</a></span></p></li><li><p id="change-0.9.0b1-88"><span class="yiyi-st" id="yiyi-1615"><span class="target" id="change-1fad8db7eac7a5daf1d143084dbc55af"><strong>[mysql] [bug] </strong></span>&#x4FEE;&#x590D;&#x5E76;&#x6D4B;&#x8BD5;&#x53CD;&#x5C04;&#x4E2D;&#x7684;MySQL&#x5916;&#x952E;&#x9009;&#x9879;&#x7684;&#x89E3;&#x6790;&#xFF1B;&#x8FD9;&#x8865;&#x5145;&#x4E86;<a class="reference external" href="http://www.sqlalchemy.org/trac/ticket/2183">&#xFF03;2183</a>&#x4E2D;&#x7684;&#x5DE5;&#x4F5C;&#xFF0C;&#x6211;&#x4EEC;&#x5F00;&#x59CB;&#x652F;&#x6301;&#x5916;&#x952E;&#x9009;&#x9879;&#x7684;&#x53CD;&#x6620;&#xFF0C;&#x4F8B;&#x5982;ON UPDATE / ON DELETE cascade&#x3002;<a class="changeset-link headerlink reference internal" href="#change-1fad8db7eac7a5daf1d143084dbc55af">&#xB6;</a></span></p><p><span class="yiyi-st" id="yiyi-1616">&#x53C2;&#x8003;&#x6587;&#x732E;&#xFF1A;<a class="reference external" href="http://www.sqlalchemy.org/trac/ticket/2839">&#xFF03;2839</a></span></p></li><li><p id="change-0.9.0b1-89"><span class="yiyi-st" id="yiyi-1617"><span class="target" id="change-e98fa083392ee258da3be2f4cc463340"><strong>[mysql] [bug] </strong></span>&#x6539;&#x8FDB;&#x4E86;&#x5BF9;cymysql&#x9A71;&#x52A8;&#x7A0B;&#x5E8F;&#x7684;&#x652F;&#x6301;&#xFF0C;&#x652F;&#x6301;&#x7248;&#x672C;0.6.5&#xFF0C;&#x793C;&#x8C8C;Hajime Nakagami&#x3002;<a class="changeset-link headerlink reference internal" href="#change-e98fa083392ee258da3be2f4cc463340">&#xB6;</a></span></p><p></p></li></ul></div><div class="section" id="change-0.9.0b1-sqlite"><h3><span class="yiyi-st" id="yiyi-1618">&#x6E90;&#x7801;<a class="headerlink" href="#change-0.9.0b1-sqlite" title="Permalink to this headline">&#xB6; T0&gt;</a></span></h3><ul class="simple"><li><p id="change-0.9.0b1-90"><span class="yiyi-st" id="yiyi-1619"><span class="target" id="change-e196956853a1c770ffc96aa3ebdb0027"><strong>[sqlite] [bug] </strong></span>&#x65B0;&#x6DFB;&#x52A0;&#x7684;SQLite DATETIME&#x53C2;&#x6570;storage_format&#x548C;regexp&#x663E;&#x7136;&#x6CA1;&#x6709;&#x5B8C;&#x5168;&#x6B63;&#x786E;&#x5730;&#x5B9E;&#x73B0;&#xFF1B;&#x5F53;&#x8BBA;&#x636E;&#x88AB;&#x63A5;&#x53D7;&#x65F6;&#xFF0C;&#x5B9E;&#x9645;&#x4E0A;&#x5B83;&#x4EEC;&#x5C06;&#x4E0D;&#x8D77;&#x4F5C;&#x7528;&#xFF1B;&#x8FD9;&#x5DF2;&#x88AB;&#x4FEE;&#x590D;&#x3002;<a class="changeset-link headerlink reference internal" href="#change-e196956853a1c770ffc96aa3ebdb0027">&#xB6;</a></span></p><p><span class="yiyi-st" id="yiyi-1620">This change is also <strong>backported</strong> to: 0.8.3</span></p><p><span class="yiyi-st" id="yiyi-1621">&#x53C2;&#x8003;&#x6587;&#x732E;&#xFF1A;<a class="reference external" href="http://www.sqlalchemy.org/trac/ticket/2781">&#xFF03;2781</a></span></p></li><li><p id="change-0.9.0b1-91"><span class="yiyi-st" id="yiyi-1622"><span class="target" id="change-ed8a730c977ad5352148eb228c2b3a31"><strong>[sqlite] [bug] </strong></span>&#x5C06;<a class="reference internal" href="core_type_basics.html#sqlalchemy.types.BIGINT" title="sqlalchemy.types.BIGINT"><code class="xref py py-class docutils literal"><span class="pre">sqlalchemy.types.BIGINT</span></code></a>&#x6DFB;&#x52A0;&#x5230;&#x53EF;&#x4EE5;&#x901A;&#x8FC7;SQLite&#x65B9;&#x8A00;&#x53CD;&#x6620;&#x7684;&#x7C7B;&#x578B;&#x540D;&#x79F0;&#x5217;&#x8868;&#xFF1B;&#x793C;&#x8C8C;&#x7F57;&#x7D20;&#x65AF;&#x56FE;&#x5C14;&#x7279;&#x3002;<a class="changeset-link headerlink reference internal" href="#change-ed8a730c977ad5352148eb228c2b3a31">&#xB6;</a></span></p><p><span class="yiyi-st" id="yiyi-1623">&#x8FD9;&#x4E2A;&#x6539;&#x53D8;&#x4E5F;&#x88AB;<strong>backported</strong>&#x4FEE;&#x6539;&#x4E3A;&#xFF1A;0.8.2</span></p><p><span class="yiyi-st" id="yiyi-1624">&#x53C2;&#x8003;&#x6587;&#x732E;&#xFF1A;<a class="reference external" href="http://www.sqlalchemy.org/trac/ticket/2764">&#xFF03;2764</a></span></p></li></ul></div><div class="section" id="change-0.9.0b1-mssql"><h3><span class="yiyi-st" id="yiyi-1625">MSSQL <a class="headerlink" href="#change-0.9.0b1-mssql" title="Permalink to this headline">&#xB6; T0&gt;</a></span></h3><ul class="simple"><li><p id="change-0.9.0b1-92"><span class="yiyi-st" id="yiyi-1626">&#x5F53;&#x5728;SQL Server 2000&#x4E0A;&#x67E5;&#x8BE2;&#x4FE1;&#x606F;&#x6A21;&#x5F0F;&#x65F6;&#xFF0C;&#x5220;&#x9664;&#x4E86;&#x5728;0.8.1&#x4E2D;&#x6DFB;&#x52A0;&#x7684;CAST&#x8C03;&#x7528;&#xFF0C;&#x4EE5;&#x5E2E;&#x52A9;&#x89E3;&#x51B3;&#x9A71;&#x52A8;&#x7A0B;&#x5E8F;&#x95EE;&#x9898;&#xFF0C;&#x8FD9;&#x5728;2000&#x5E74;&#x663E;&#x7136;&#x4E0D;&#x517C;&#x5BB9;&#x3002;<span class="target" id="change-02967c3908e9232b5bde5a7b76c9cd7b"><strong>[mssql] [bug] </strong></span></span><span class="yiyi-st" id="yiyi-1627">CAST&#x4FDD;&#x6301;&#x9002;&#x7528;&#x4E8E;SQL Server 2005&#x53CA;&#x66F4;&#x9AD8;&#x7248;&#x672C;&#x3002;<a class="changeset-link headerlink reference internal" href="#change-02967c3908e9232b5bde5a7b76c9cd7b">&#xB6;</a></span></p><p><span class="yiyi-st" id="yiyi-1628">&#x8FD9;&#x4E2A;&#x6539;&#x53D8;&#x4E5F;&#x88AB;<strong>backported</strong>&#x4FEE;&#x6539;&#x4E3A;&#xFF1A;0.8.2</span></p><p><span class="yiyi-st" id="yiyi-1629">&#x53C2;&#x8003;&#x6587;&#x732E;&#xFF1A;<a class="reference external" href="http://www.sqlalchemy.org/trac/ticket/2747">&#xFF03;2747</a></span></p></li><li><p id="change-0.9.0b1-93"><span class="yiyi-st" id="yiyi-1630"><span class="target" id="change-bea87c5d2f97257ad289ce3893861719"><strong>[mssql] [bug] [pyodbc] </strong></span>&#x4F7F;&#x7528;Python 3 + pyodbc&#x4FEE;&#x590D;MSSQL&#xFF0C;&#x5305;&#x62EC;&#x6B63;&#x786E;&#x4F20;&#x9012;&#x8BED;&#x53E5;<a class="changeset-link headerlink reference internal" href="#change-bea87c5d2f97257ad289ce3893861719">&#xB6;</a></span></p><p><span class="yiyi-st" id="yiyi-1631">&#x53C2;&#x8003;&#x6587;&#x732E;&#xFF1A;<a class="reference external" href="http://www.sqlalchemy.org/trac/ticket/2355">&#xFF03;2355</a></span></p></li></ul></div><div class="section" id="change-0.9.0b1-oracle"><h3><span class="yiyi-st" id="yiyi-1632">&#x9884;&#x8A00;<a class="headerlink" href="#change-0.9.0b1-oracle" title="Permalink to this headline">&#xB6; T0&gt;</a></span></h3><ul class="simple"><li><p id="change-0.9.0b1-94"><span class="yiyi-st" id="yiyi-1633"><span class="target" id="change-d164453835dc47719c20c02f5a49d116"><strong>[oracle] [feature] [py3k] </strong></span>&#x4F7F;&#x7528;cx_oracle&#x7684;Oracle&#x5355;&#x5143;&#x6D4B;&#x8BD5;&#x73B0;&#x5728;&#x53EF;&#x4EE5;&#x5728;Python 3&#x4E0B;&#x5B8C;&#x5168;&#x4F20;&#x9012;&#x3002;<a class="changeset-link headerlink reference internal" href="#change-d164453835dc47719c20c02f5a49d116">&#xB6;</a></span></p><p></p></li><li><p id="change-0.9.0b1-95"><span class="yiyi-st" id="yiyi-1634"><span class="target" id="change-7db6754b84c59e26d48cb6796899ee20"><strong>[oracle] [bug] </strong></span>Fixed bug where Oracle table reflection using synonyms would fail if the synonym and the table were in different remote schemas. </span><span class="yiyi-st" id="yiyi-1635">&#x8865;&#x4E01;&#x4FEE;&#x590D;Kyle Derr&#x793C;&#x8C8C;&#x3002;<a class="changeset-link headerlink reference internal" href="#change-7db6754b84c59e26d48cb6796899ee20">&#xB6;</a></span></p><p><span class="yiyi-st" id="yiyi-1636">This change is also <strong>backported</strong> to: 0.8.3</span></p><p><span class="yiyi-st" id="yiyi-1637">&#x53C2;&#x8003;&#x6587;&#x732E;&#xFF1A;<a class="reference external" href="http://www.sqlalchemy.org/trac/ticket/2853">&#xFF03;2853</a></span></p></li></ul></div><div class="section" id="change-0.9.0b1-firebird"><h3><span class="yiyi-st" id="yiyi-1638">&#x706B;&#x9E1F;<a class="headerlink" href="#change-0.9.0b1-firebird" title="Permalink to this headline">&#xB6; T0&gt;</a></span></h3><ul class="simple"><li><p id="change-0.9.0b1-96"><span class="yiyi-st" id="yiyi-1639"><span class="target" id="change-9175f0322dec423ed80f93115ad65aae"><strong>[firebird] [feature] </strong></span>&#x4E3A;kinterbasdb&#x548C;fdb&#x65B9;&#x8A00;&#x6DFB;&#x52A0;&#x4E86;&#x65B0;&#x7684;&#x6807;&#x5FD7;<code class="docutils literal"><span class="pre">retaining=True</span></code>&#x3002;</span><span class="yiyi-st" id="yiyi-1640">&#x8FD9;&#x5C06;&#x63A7;&#x5236;&#x53D1;&#x9001;&#x5230;DBAPI&#x8FDE;&#x63A5;&#x7684;<code class="docutils literal"><span class="pre">commit()</span></code>&#x548C;<code class="docutils literal"><span class="pre">rollback()</span></code>&#x65B9;&#x6CD5;&#x7684;<code class="docutils literal"><span class="pre">retaining</span></code>&#x6807;&#x5FD7;&#x7684;&#x503C;&#x3002;</span><span class="yiyi-st" id="yiyi-1641">&#x7531;&#x4E8E;&#x5386;&#x53F2;&#x539F;&#x56E0;&#xFF0C;&#x8BE5;&#x6807;&#x5FD7;&#x5728;0.8.2&#x4E2D;&#x9ED8;&#x8BA4;&#x4E3A;<code class="docutils literal"><span class="pre">True</span></code>&#xFF0C;&#x4F46;&#x5728;0.9.0b1&#x4E2D;&#xFF0C;&#x8BE5;&#x6807;&#x5FD7;&#x9ED8;&#x8BA4;&#x4E3A;<code class="docutils literal"><span class="pre">False</span></code>&#x3002;<a class="changeset-link headerlink reference internal" href="#change-9175f0322dec423ed80f93115ad65aae">&#xB6;</a></span></p><p><span class="yiyi-st" id="yiyi-1642">&#x8FD9;&#x4E2A;&#x6539;&#x53D8;&#x4E5F;&#x88AB;<strong>backported</strong>&#x4FEE;&#x6539;&#x4E3A;&#xFF1A;0.8.2</span></p><p><span class="yiyi-st" id="yiyi-1643">&#x53C2;&#x8003;&#x6587;&#x732E;&#xFF1A;<a class="reference external" href="http://www.sqlalchemy.org/trac/ticket/2763">&#xFF03;2763</a></span></p></li><li><p id="change-0.9.0b1-97"><span class="yiyi-st" id="yiyi-1644"><span class="target" id="change-76539a1da5603da953dbce6672c8e461"><strong>[firebird] [feature] </strong></span>The <code class="docutils literal"><span class="pre">fdb</span></code> dialect is now the default dialect when specified without a dialect qualifier, i.e. <code class="docutils literal"><span class="pre">firebird://</span></code>, per the Firebird project publishing <code class="docutils literal"><span class="pre">fdb</span></code> as their official Python driver.<a class="changeset-link headerlink reference internal" href="#change-76539a1da5603da953dbce6672c8e461">&#xB6;</a></span></p><p><span class="yiyi-st" id="yiyi-1645">&#x53C2;&#x8003;&#x6587;&#x732E;&#xFF1A;<a class="reference external" href="http://www.sqlalchemy.org/trac/ticket/2504">&#xFF03;2504</a></span></p></li><li><p id="change-0.9.0b1-98"><span class="yiyi-st" id="yiyi-1646"><span class="target" id="change-11863f3c419f255126f23bd31f39c054"><strong>[firebird] [bug] </strong></span>Type lookup when reflecting the Firebird types LONG and INT64 has been fixed so that LONG is treated as INTEGER, INT64 treated as BIGINT, unless the type has a &#x201C;precision&#x201D; in which case it&#x2019;s treated as NUMERIC. </span><span class="yiyi-st" id="yiyi-1647">Patch courtesy Russell Stuart&#x3002;<a class="changeset-link headerlink reference internal" href="#change-11863f3c419f255126f23bd31f39c054">&#xB6;</a></span></p><p><span class="yiyi-st" id="yiyi-1648">&#x8FD9;&#x4E2A;&#x6539;&#x53D8;&#x4E5F;&#x88AB;<strong>backported</strong>&#x4FEE;&#x6539;&#x4E3A;&#xFF1A;0.8.2</span></p><p><span class="yiyi-st" id="yiyi-1649">&#x53C2;&#x8003;&#x6587;&#x732E;&#xFF1A;<a class="reference external" href="http://www.sqlalchemy.org/trac/ticket/2757">&#xFF03;2757</a></span></p></li></ul></div><div class="section" id="change-0.9.0b1-misc"><h3><span class="yiyi-st" id="yiyi-1650">&#x6742;&#x9879;<a class="headerlink" href="#change-0.9.0b1-misc" title="Permalink to this headline">&#xB6; T0&gt;</a></span></h3><ul class="simple"><li><p id="change-0.9.0b1-99"><span class="yiyi-st" id="yiyi-1651"><span class="target" id="change-4376b4db83754e008ed7559a50c2b16c"><strong>[feature] </strong></span>&#x5C06;<code class="docutils literal"><span class="pre">system=True</span></code>&#x6DFB;&#x52A0;&#x5230;<a class="reference internal" href="core_metadata.html#sqlalchemy.schema.Column" title="sqlalchemy.schema.Column"><code class="xref py py-class docutils literal"><span class="pre">Column</span></code></a>&#x4E2D;&#xFF0C;&#x5C06;&#x5217;&#x6807;&#x8BB0;&#x4E3A;&#x7CFB;&#x7EDF;&#x81EA;&#x52A8;&#x521B;&#x5EFA;&#x7684;&#x5217;&#x6570;&#x636E;&#x5E93;&#xFF08;&#x4F8B;&#x5982;Postgresql <code class="docutils literal"><span class="pre">oid</span></code>&#x6216;<code class="docutils literal"><span class="pre">xmin</span></code>&#xFF09;&#x3002;</span><span class="yiyi-st" id="yiyi-1652">&#x8BE5;&#x5217;&#x5C06;&#x4ECE;<code class="docutils literal"><span class="pre">CREATE</span> <span class="pre">TABLE</span></code>&#x8BED;&#x53E5;&#x4E2D;&#x7701;&#x7565;&#xFF0C;&#x4F46;&#x5426;&#x5219;&#x53EF;&#x7528;&#x4E8E;&#x67E5;&#x8BE2;&#x3002;</span><span class="yiyi-st" id="yiyi-1653">&#x53E6;&#x5916;&#xFF0C;&#x901A;&#x8FC7;&#x751F;&#x6210;&#x8FD4;&#x56DE;<code class="docutils literal"><span class="pre">None</span></code>&#x7684;&#x89C4;&#x5219;&#xFF0C;&#x53EF;&#x4EE5;&#x5C06;<a class="reference internal" href="core_ddl.html#sqlalchemy.schema.CreateColumn" title="sqlalchemy.schema.CreateColumn"><code class="xref py py-class docutils literal"><span class="pre">CreateColumn</span></code></a>&#x7ED3;&#x6784;&#x5E94;&#x7528;&#x4E8E;&#x5141;&#x8BB8;&#x8DF3;&#x8FC7;&#x5217;&#x7684;&#x81EA;&#x5B9A;&#x4E49;&#x7F16;&#x8BD1;&#x89C4;&#x5219;&#x3002;<a class="changeset-link headerlink reference internal" href="#change-4376b4db83754e008ed7559a50c2b16c">&#xB6;</a></span></p><p><span class="yiyi-st" id="yiyi-1654">This change is also <strong>backported</strong> to: 0.8.3</span></p><p></p></li><li><p id="change-0.9.0b1-100"><span class="yiyi-st" id="yiyi-1655"><span class="target" id="change-d810542c0eef5129e99e0dea72af3bb9"><strong>[feature] [examples] </strong></span>&#x6539;&#x8FDB;&#x4E86;<code class="docutils literal"><span class="pre">examples/generic_associations</span></code>&#x4E2D;&#x7684;&#x793A;&#x4F8B;&#xFF0C;&#x5305;&#x62EC;<code class="docutils literal"><span class="pre">discriminator_on_association.py</span></code>&#x5229;&#x7528;&#x5355;&#x4E2A;&#x8868;&#x7EE7;&#x627F;&#x8FDB;&#x884C;&#x5DE5;&#x4F5C;&#x201C;&#x9274;&#x522B;&#x8005;&#x201D;&#x3002;</span><span class="yiyi-st" id="yiyi-1656">&#x8FD8;&#x6DFB;&#x52A0;&#x4E86;&#x4E00;&#x4E2A;&#x771F;&#x6B63;&#x7684;&#x201C;&#x901A;&#x7528;&#x5916;&#x952E;&#x201D;&#x793A;&#x4F8B;&#xFF0C;&#x8BE5;&#x793A;&#x4F8B;&#x4E0E;&#x5176;&#x4ED6;&#x6D41;&#x884C;&#x6846;&#x67B6;&#x7684;&#x5DE5;&#x4F5C;&#x65B9;&#x5F0F;&#x7C7B;&#x4F3C;&#xFF0C;&#x56E0;&#x4E3A;&#x5B83;&#x4F7F;&#x7528;&#x5F00;&#x653E;&#x5F0F;&#x6574;&#x6570;&#x6307;&#x5411;&#x4EFB;&#x4F55;&#x5176;&#x4ED6;&#x8868;&#xFF0C;&#x524D;&#x9762;&#x63D0;&#x5230;&#x4E86;&#x4F20;&#x7EDF;&#x7684;&#x53C2;&#x7167;&#x5B8C;&#x6574;&#x6027;&#x3002;</span><span class="yiyi-st" id="yiyi-1657">&#x867D;&#x7136;&#x6211;&#x4EEC;&#x4E0D;&#x63A8;&#x8350;&#x8FD9;&#x79CD;&#x6A21;&#x5F0F;&#xFF0C;&#x4F46;&#x4FE1;&#x606F;&#x8981;&#x514D;&#x8D39;&#x3002;<a class="changeset-link headerlink reference internal" href="#change-d810542c0eef5129e99e0dea72af3bb9">&#xB6;</a></span></p><p><span class="yiyi-st" id="yiyi-1658">This change is also <strong>backported</strong> to: 0.8.3</span></p><p></p></li><li><p id="change-0.9.0b1-101"><span class="yiyi-st" id="yiyi-1659"><span class="target" id="change-c6ae54dff0bc9fddf9cbe1f7a37fcd59"><strong>[feature] [core] </strong></span>&#x4E3A;<a class="reference internal" href="core_dml.html#sqlalchemy.sql.expression.UpdateBase.returning" title="sqlalchemy.sql.expression.UpdateBase.returning"><code class="xref py py-meth docutils literal"><span class="pre">UpdateBase.returning()</span></code></a>&#x6DFB;&#x52A0;&#x4E86;&#x4E00;&#x4E2A;&#x540D;&#x4E3A;<a class="reference internal" href="core_dml.html#sqlalchemy.sql.expression.ValuesBase.return_defaults" title="sqlalchemy.sql.expression.ValuesBase.return_defaults"><code class="xref py py-meth docutils literal"><span class="pre">ValuesBase.return_defaults()</span></code></a>&#x7684;&#x65B0;&#x53D8;&#x4F53;&#x3002;&#x8FD9;&#x5141;&#x8BB8;&#x5C06;&#x4EFB;&#x610F;&#x5217;&#x6DFB;&#x52A0;&#x5230;&#x8BED;&#x53E5;&#x7684;RETURNING&#x5B50;&#x53E5;&#x4E2D;&#xFF0C;&#x800C;&#x4E0D;&#x4F1A;&#x5E72;&#x6270;&#x7F16;&#x8BD1;&#x5668;&#x901A;&#x5E38;&#x7684;&#x201C;&#x9690;&#x5F0F;&#x8FD4;&#x56DE;&#x201D;&#x529F;&#x80FD;&#xFF0C;&#x8BE5;&#x529F;&#x80FD;&#x7528;&#x4E8E;&#x6709;&#x6548;&#x63D0;&#x53D6;&#x65B0;&#x751F;&#x6210;&#x7684;&#x4E3B;&#x952E;&#x503C;&#x3002;</span><span class="yiyi-st" id="yiyi-1660">&#x4E3A;&#x652F;&#x6301;&#x540E;&#x7AEF;&#xFF0C;&#x6240;&#x6709;&#x83B7;&#x53D6;&#x503C;&#x7684;&#x5B57;&#x5178;&#x5B58;&#x5728;&#x4E8E;<a class="reference internal" href="core_connections.html#sqlalchemy.engine.ResultProxy.returned_defaults" title="sqlalchemy.engine.ResultProxy.returned_defaults"><code class="xref py py-attr docutils literal"><span class="pre">ResultProxy.returned_defaults</span></code></a>&#x3002;<a class="changeset-link headerlink reference internal" href="#change-c6ae54dff0bc9fddf9cbe1f7a37fcd59">&#xB6;</a></span></p><p><span class="yiyi-st" id="yiyi-1661">&#x53C2;&#x8003;&#x6587;&#x732E;&#xFF1A;<a class="reference external" href="http://www.sqlalchemy.org/trac/ticket/2793">&#xFF03;2793</a></span></p></li><li><p id="change-0.9.0b1-102"><span class="yiyi-st" id="yiyi-1662"><span class="target" id="change-026a7898970464580f20e377c6428616"><strong>[feature] [pool] </strong></span>&#x6DFB;&#x52A0;&#x4E86;&#x201C;rollback-on-return&#x201D;&#x7684;&#x6C60;&#x65E5;&#x5FD7;&#x8BB0;&#x5F55;&#x548C;&#x8F83;&#x5C11;&#x4F7F;&#x7528;&#x7684;&#x201C;commit-on-return&#x201D;&#x3002;</span><span class="yiyi-st" id="yiyi-1663">&#x8FD9;&#x662F;&#x4F7F;&#x7528;&#x5176;&#x4F59;&#x6C60;&#x201C;&#x8C03;&#x8BD5;&#x201D;&#x65E5;&#x5FD7;&#x8BB0;&#x5F55;&#x542F;&#x7528;&#x7684;&#x3002;<a class="changeset-link headerlink reference internal" href="#change-026a7898970464580f20e377c6428616">&#xB6;</a></span></p><p><span class="yiyi-st" id="yiyi-1664">&#x53C2;&#x8003;&#x6587;&#x732E;&#xFF1A;<a class="reference external" href="http://www.sqlalchemy.org/trac/ticket/2752">&#xFF03;2752</a></span></p></li><li><p id="change-0.9.0b1-103"><span class="yiyi-st" id="yiyi-1665"><span class="target" id="change-95b0a27ef450ed818ac940e3ded22313"><strong>[bug] [examples] </strong></span>&#x5728;&#x7248;&#x672C;&#x63A7;&#x5236;&#x793A;&#x4F8B;&#x4E2D;&#x521B;&#x5EFA;&#x7684;&#x5386;&#x53F2;&#x8BB0;&#x5F55;&#x8868;&#x4E2D;&#x6DFB;&#x52A0;&#x4E86;&#x201C;autoincrement = False&#x201D;&#xFF0C;&#x56E0;&#x4E3A;&#x8BE5;&#x8868;&#x5728;&#x4EFB;&#x4F55;&#x60C5;&#x51B5;&#x4E0B;&#x90FD;&#x4E0D;&#x5E94;&#x8BE5;&#x6709;autoinc&#xFF0C;Patrick Schmid&#x63D0;&#x4F9B;<a class="changeset-link headerlink reference internal" href="#change-95b0a27ef450ed818ac940e3ded22313">&#xB6; T2&gt;</a></span></p><p><span class="yiyi-st" id="yiyi-1666">This change is also <strong>backported</strong> to: 0.8.3</span></p><p></p></li><li><p id="change-0.9.0b1-104"><span class="yiyi-st" id="yiyi-1667"><span class="target" id="change-de133057736a5ba4eb2f13b2226d6189"><strong>[bug] [ext] </strong></span>Fixed bug whereby if a composite type were set up with a function instead of a class, the mutable extension would trip up when it tried to check that column for being a <a class="reference internal" href="orm_extensions_mutable.html#sqlalchemy.ext.mutable.MutableComposite" title="sqlalchemy.ext.mutable.MutableComposite"><code class="xref py py-class docutils literal"><span class="pre">MutableComposite</span></code></a> (which it isn&#x2019;t). </span><span class="yiyi-st" id="yiyi-1668">&#x793C;&#x8C8C;asldevi&#x3002;<a class="changeset-link headerlink reference internal" href="#change-de133057736a5ba4eb2f13b2226d6189">&#xB6;</a></span></p><p><span class="yiyi-st" id="yiyi-1669">&#x8FD9;&#x4E2A;&#x6539;&#x53D8;&#x4E5F;&#x88AB;<strong>backported</strong>&#x4FEE;&#x6539;&#x4E3A;&#xFF1A;0.8.2</span></p><p></p></li><li><p id="change-0.9.0b1-105"><span class="yiyi-st" id="yiyi-1670"><span class="target" id="change-b0dcd18db52ac8a72250f771c09f4c4f"><strong>[bug] [examples] </strong></span>Fixed an issue with the &#x201C;versioning&#x201D; recipe whereby a many-to-one reference could produce a meaningless version for the target, even though it was not changed, when backrefs were present. </span><span class="yiyi-st" id="yiyi-1671">&#x8865;&#x4E01;&#x7531;Matt Chisholm&#x63D0;&#x4F9B;&#x3002;<a class="changeset-link headerlink reference internal" href="#change-b0dcd18db52ac8a72250f771c09f4c4f">&#xB6;</a></span></p><p><span class="yiyi-st" id="yiyi-1672">&#x8FD9;&#x4E2A;&#x6539;&#x53D8;&#x4E5F;&#x88AB;<strong>backported</strong>&#x4FEE;&#x6539;&#x4E3A;&#xFF1A;0.8.2</span></p><p></p></li><li><p id="change-0.9.0b1-106"><span class="yiyi-st" id="yiyi-1673"><span class="target" id="change-47f2cda56e1d7a6b9dffa4b1b316855a"><strong>[requirements] </strong></span>&#x73B0;&#x5728;&#x9700;&#x8981;Python <a class="reference external" href="https://pypi.python.org/pypi/mock">mock</a>&#x5E93;&#x6765;&#x8FD0;&#x884C;&#x5355;&#x5143;&#x6D4B;&#x8BD5;&#x5957;&#x4EF6;&#x3002;</span><span class="yiyi-st" id="yiyi-1674">&#x4F5C;&#x4E3A;Python 3.3&#x7684;&#x6807;&#x51C6;&#x5E93;&#x7684;&#x4E00;&#x90E8;&#x5206;&#xFF0C;&#x4EE5;&#x524D;&#x7684;Python&#x5B89;&#x88C5;&#x5C06;&#x9700;&#x8981;&#x5B89;&#x88C5;&#x5B83;&#xFF0C;&#x4EE5;&#x4FBF;&#x8FD0;&#x884C;&#x5355;&#x5143;&#x6D4B;&#x8BD5;&#x6216;&#x4F7F;&#x7528;&#x5916;&#x90E8;&#x65B9;&#x8A00;&#x7684;<code class="docutils literal"><span class="pre">sqlalchemy.testing</span></code>&#x5305;&#x3002;<a class="changeset-link headerlink reference internal" href="#change-47f2cda56e1d7a6b9dffa4b1b316855a"> T2&gt;</a></span></p><p><span class="yiyi-st" id="yiyi-1675">&#x8FD9;&#x4E2A;&#x6539;&#x53D8;&#x4E5F;&#x88AB;<strong>backported</strong>&#x4FEE;&#x6539;&#x4E3A;&#xFF1A;0.8.2</span></p><p></p></li></ul></div></div>