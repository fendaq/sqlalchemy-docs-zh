<h1><span class="yiyi-st" id="yiyi-161">1.0&#x66F4;&#x65B0;&#x65E5;&#x5FD7;<a class="headerlink" href="#changelog" title="Permalink to this headline">&#xB6;</a></span></h1><div class="section" id="change-1.0.14"><h2><span class="yiyi-st" id="yiyi-162">1.0.14 <a class="headerlink" href="#change-1.0.14" title="Permalink to this headline">&#xB6; T0&gt;</a></span></h2><span class="yiyi-st" id="yiyi-186">&#x6CA1;&#x6709;&#x53D1;&#x5E03;&#x65E5;&#x671F;</span><div class="section" id="change-1.0.14-engine"><h3><span class="yiyi-st" id="yiyi-163">&#x53D1;&#x52A8;&#x673A;<a class="headerlink" href="#change-1.0.14-engine" title="Permalink to this headline">&#xB6; T0&gt;</a></span></h3><ul class="simple"><li><p id="change-1.0.14-0"><span class="yiyi-st" id="yiyi-164"><span class="target" id="change-4d7092660a51f02cf6ae2adb3e0a7fb6"><strong>[engine] [bug] [postgresql] </strong></span>&#x4FEE;&#x590D;&#x4E86;&#x8DE8;&#x6A21;&#x5F0F;&#x5916;&#x952E;&#x53CD;&#x5C04;&#x548C;<a class="reference internal" href="core_metadata.html#sqlalchemy.schema.MetaData.params.schema" title="sqlalchemy.schema.MetaData"><code class="xref py py-paramref docutils literal"><span class="pre">MetaData.schema</span></code></a>&#x53C2;&#x6570;&#x7684;&#x9519;&#x8BEF;&#xFF0C;&#x5176;&#x4E2D;&#x5B58;&#x5728;&#x201C;&#x9ED8;&#x8BA4;&#x201D;&#x6A21;&#x5F0F;&#x5C06;&#x5931;&#x8D25;&#xFF0C;&#x56E0;&#x4E3A;&#x65E0;&#x6CD5;&#x6307;&#x793A;&#x6A21;&#x5F0F;&#x5177;&#x6709;&#x201C;&#x7A7A;&#x767D;&#x201D;&#x7684;<a class="reference internal" href="core_metadata.html#sqlalchemy.schema.Table" title="sqlalchemy.schema.Table"><code class="xref py py-class docutils literal"><span class="pre">Table</span></code></a>&#x3002;</span><span class="yiyi-st" id="yiyi-165">&#x7279;&#x6B8A;&#x7B26;&#x53F7;<a class="reference internal" href="core_metadata.html#sqlalchemy.schema.sqlalchemy.schema.BLANK_SCHEMA" title="sqlalchemy.schema.sqlalchemy.schema.BLANK_SCHEMA"><code class="xref py py-attr docutils literal"><span class="pre">schema.BLANK_SCHEMA</span></code></a>&#x5DF2;&#x6DFB;&#x52A0;&#x4E3A;<a class="reference internal" href="core_metadata.html#sqlalchemy.schema.Table.params.schema" title="sqlalchemy.schema.Table"><code class="xref py py-paramref docutils literal"><span class="pre">Table.schema</span></code></a>&#x548C;<a class="reference internal" href="core_defaults.html#sqlalchemy.schema.Sequence.params.schema" title="sqlalchemy.schema.Sequence"><code class="xref py py-paramref docutils literal"><span class="pre">Sequence.schema</span></code></a>&#x7684;&#x53EF;&#x7528;&#x503C;&#xFF0C;&#x8868;&#x660E;&#x6A21;&#x5F0F;&#x540D;&#x79F0;&#x5E94;&#x8BE5;&#x662F;&#x5373;&#x4F7F;&#x6307;&#x5B9A;&#x4E86;<a class="reference internal" href="core_metadata.html#sqlalchemy.schema.MetaData.params.schema" title="sqlalchemy.schema.MetaData"><code class="xref py py-paramref docutils literal"><span class="pre">MetaData.schema</span></code></a>&#xFF0C;&#x4E5F;&#x5FC5;&#x987B;&#x88AB;&#x5F3A;&#x5236;&#x4E3A;<code class="docutils literal"><span class="pre">None</span></code> <a class="changeset-link headerlink reference internal" href="#change-4d7092660a51f02cf6ae2adb3e0a7fb6">&#xB6;</a></span></p><p><span class="yiyi-st" id="yiyi-166">&#x53C2;&#x8003;&#x6587;&#x732E;&#xFF1A;<a class="reference external" href="http://www.sqlalchemy.org/trac/ticket/3716">&#xFF03;3716</a></span></p></li></ul></div><div class="section" id="change-1.0.14-sql"><h3><span class="yiyi-st" id="yiyi-167">SQL <a class="headerlink" href="#change-1.0.14-sql" title="Permalink to this headline">&#xB6; T0&gt;</a></span></h3><ul class="simple"><li><p id="change-1.0.14-1"><span class="yiyi-st" id="yiyi-168"><span class="target" id="change-2758e73b99ac7bb6a36bd8651bd1e56c"><strong>[sql] [bug] </strong></span>Fixed issue in SQL math negation operator where the type of the expression would no longer be the numeric type of the original. </span><span class="yiyi-st" id="yiyi-169">&#x8FD9;&#x4F1A;&#x5BFC;&#x81F4;&#x7C7B;&#x578B;&#x786E;&#x5B9A;&#x7ED3;&#x679C;&#x96C6;&#x884C;&#x4E3A;&#x7684;&#x95EE;&#x9898;&#x3002;<a class="changeset-link headerlink reference internal" href="#change-2758e73b99ac7bb6a36bd8651bd1e56c">&#xB6;</a></span></p><p><span class="yiyi-st" id="yiyi-170">&#x53C2;&#x8003;&#x6587;&#x732E;&#xFF1A;<a class="reference external" href="http://www.sqlalchemy.org/trac/ticket/3735">&#xFF03;3735</a></span></p></li><li><p id="change-1.0.14-2"><span class="yiyi-st" id="yiyi-171"><span class="target" id="change-c7059eb3012401b413610d88be5d7bb5"><strong>[sql] [bug] </strong></span>Fixed bug whereby the <code class="docutils literal"><span class="pre">__getstate__</span></code> / <code class="docutils literal"><span class="pre">__setstate__</span></code> methods for sqlalchemy.util.Properties were non-working due to the transition in the 1.0 series to <code class="docutils literal"><span class="pre">__slots__</span></code>. </span><span class="yiyi-st" id="yiyi-172">&#x8BE5;&#x95EE;&#x9898;&#x53EF;&#x80FD;&#x4F1A;&#x5F71;&#x54CD;&#x67D0;&#x4E9B;&#x7B2C;&#x4E09;&#x65B9;&#x5E94;&#x7528;&#x7A0B;&#x5E8F;&#x3002;</span><span class="yiyi-st" id="yiyi-173">Pull&#x8BF7;&#x6C42;Pieter Mulder&#x63D0;&#x4F9B;&#x3002;<a class="changeset-link headerlink reference internal" href="#change-c7059eb3012401b413610d88be5d7bb5">&#xB6;</a></span></p><p><span class="yiyi-st" id="yiyi-174">&#x53C2;&#x8003;&#x6587;&#x732E;&#xFF1A;<a class="reference external" href="http://www.sqlalchemy.org/trac/ticket/3728">&#xFF03;3728</a></span></p></li><li><p id="change-1.0.14-3"><span class="yiyi-st" id="yiyi-175"><span class="target" id="change-a725e879b7b24fb36799bb76f3075d43"><strong>[sql] [bug] </strong></span> <a class="reference internal" href="core_selectable.html#sqlalchemy.sql.expression.FromClause.count" title="sqlalchemy.sql.expression.FromClause.count"><code class="xref py py-meth docutils literal"><span class="pre">FromClause.count()</span></code></a>&#x6B63;&#x5728;&#x7B49;&#x5F85;1.1&#x5F03;&#x7528;&#x3002;</span><span class="yiyi-st" id="yiyi-176">&#x8BE5;&#x51FD;&#x6570;&#x4F7F;&#x7528;&#x8868;&#x4E2D;&#x7684;&#x4EFB;&#x610F;&#x5217;&#x5E76;&#x4E14;&#x4E0D;&#x53EF;&#x9760;&#xFF1B;&#x5BF9;&#x4E8E;&#x6838;&#x5FC3;&#x7528;&#x9014;&#xFF0C;&#x5E94;&#x8BE5;&#x9996;&#x9009;<code class="docutils literal"><span class="pre">func.count()</span></code>&#x3002;<a class="changeset-link headerlink reference internal" href="#change-a725e879b7b24fb36799bb76f3075d43">&#xB6;</a></span></p><p><span class="yiyi-st" id="yiyi-177">&#x53C2;&#x8003;&#x6587;&#x732E;&#xFF1A;<a class="reference external" href="http://www.sqlalchemy.org/trac/ticket/3724">&#xFF03;3724</a></span></p></li><li><p id="change-1.0.14-4"><span class="yiyi-st" id="yiyi-178"><span class="target" id="change-677e6c0535709018e57bdb8c064e546b"><strong>[sql] [bug] </strong></span>Fixed bug in <a class="reference internal" href="core_selectable.html#sqlalchemy.sql.expression.CTE" title="sqlalchemy.sql.expression.CTE"><code class="xref py py-class docutils literal"><span class="pre">CTE</span></code></a> structure which would cause it to not clone properly when a union was used, as is common in a recursive CTE. </span><span class="yiyi-st" id="yiyi-179">&#x5F53;CTE&#x7528;&#x4E8E;&#x5404;&#x79CD;ORM&#x73AF;&#x5883;&#xFF08;&#x5982;<a class="reference internal" href="orm_mapping_columns.html#sqlalchemy.orm.column_property" title="sqlalchemy.orm.column_property"><code class="xref py py-func docutils literal"><span class="pre">column_property()</span></code></a>&#xFF09;&#x65F6;&#xFF0C;&#x9519;&#x8BEF;&#x7684;&#x514B;&#x9686;&#x4F1A;&#x5BFC;&#x81F4;&#x9519;&#x8BEF;&#x3002;<a class="changeset-link headerlink reference internal" href="#change-677e6c0535709018e57bdb8c064e546b">&#xB6;</a></span></p><p><span class="yiyi-st" id="yiyi-180">&#x53C2;&#x8003;&#x6587;&#x732E;&#xFF1A;<a class="reference external" href="http://www.sqlalchemy.org/trac/ticket/3722">&#xFF03;3722</a></span></p></li><li><p id="change-1.0.14-5"><span class="yiyi-st" id="yiyi-181"><span class="target" id="change-4bb322d1beae4370564be99c7589c055"><strong>[sql] [bug] </strong></span>Fixed bug whereby <a class="reference internal" href="core_metadata.html#sqlalchemy.schema.Table.tometadata" title="sqlalchemy.schema.Table.tometadata"><code class="xref py py-meth docutils literal"><span class="pre">Table.tometadata()</span></code></a> would make a duplicate <a class="reference internal" href="core_constraints.html#sqlalchemy.schema.UniqueConstraint" title="sqlalchemy.schema.UniqueConstraint"><code class="xref py py-class docutils literal"><span class="pre">UniqueConstraint</span></code></a> for each <a class="reference internal" href="core_metadata.html#sqlalchemy.schema.Column" title="sqlalchemy.schema.Column"><code class="xref py py-class docutils literal"><span class="pre">Column</span></code></a> object that featured the <code class="docutils literal"><span class="pre">unique=True</span></code> parameter.<a class="changeset-link headerlink reference internal" href="#change-4bb322d1beae4370564be99c7589c055">&#xB6;</a></span></p><p><span class="yiyi-st" id="yiyi-182">&#x53C2;&#x8003;&#x6587;&#x732E;&#xFF1A;<a class="reference external" href="http://www.sqlalchemy.org/trac/ticket/3721">&#xFF03;3721</a></span></p></li></ul></div><div class="section" id="change-1.0.14-misc"><h3><span class="yiyi-st" id="yiyi-183">&#x6742;&#x9879;<a class="headerlink" href="#change-1.0.14-misc" title="Permalink to this headline">&#xB6; T0&gt;</a></span></h3><ul class="simple"><li><p id="change-1.0.14-6"><span class="yiyi-st" id="yiyi-184"><span class="target" id="change-9c468f38b3c1e3c6dad918aec4386076"><strong>[bug] [examples] </strong></span>&#x4FEE;&#x590D;&#x4E86;examples / vertical / dictlike-polymorphic.py&#x793A;&#x4F8B;&#x4E2D;&#x53D1;&#x751F;&#x7684;&#x56DE;&#x9000;&#xFF0C;&#x8BE5;&#x793A;&#x4F8B;&#x963B;&#x6B62;&#x5176;&#x8FD0;&#x884C;&#x3002;<a class="changeset-link headerlink reference internal" href="#change-9c468f38b3c1e3c6dad918aec4386076">&#xB6;</a></span></p><p><span class="yiyi-st" id="yiyi-185">&#x53C2;&#x8003;&#x6587;&#x732E;&#xFF1A;<a class="reference external" href="http://www.sqlalchemy.org/trac/ticket/3704">&#xFF03;3704</a></span></p></li></ul></div></div><div class="section" id="change-1.0.13"><h2><span class="yiyi-st" id="yiyi-187">1.0.13 <a class="headerlink" href="#change-1.0.13" title="Permalink to this headline">&#xB6; T0&gt;</a></span></h2><span class="yiyi-st" id="yiyi-231">&#x53D1;&#x5E03;&#x65E5;&#x671F;&#xFF1A;2016&#x5E74;5&#x6708;16&#x65E5;</span><div class="section" id="change-1.0.13-orm"><h3><span class="yiyi-st" id="yiyi-188">ORM <a class="headerlink" href="#change-1.0.13-orm" title="Permalink to this headline">&#xB6; T0&gt;</a></span></h3><ul class="simple"><li><p id="change-1.0.13-0"><span class="yiyi-st" id="yiyi-189"><span class="target" id="change-2047da33c78a202b1bd91983d30b7f8d"><strong>[orm] [bug] </strong></span>Fixed bug in &#x201C;evaluate&#x201D; strategy of <a class="reference internal" href="orm_query.html#sqlalchemy.orm.query.Query.update" title="sqlalchemy.orm.query.Query.update"><code class="xref py py-meth docutils literal"><span class="pre">Query.update()</span></code></a> and <a class="reference internal" href="orm_query.html#sqlalchemy.orm.query.Query.delete" title="sqlalchemy.orm.query.Query.delete"><code class="xref py py-meth docutils literal"><span class="pre">Query.delete()</span></code></a> which would fail to accommodate a bound parameter with a &#x201C;callable&#x201D; value, as which occurs when filtering by a many-to-one equality expression along a relationship.<a class="changeset-link headerlink reference internal" href="#change-2047da33c78a202b1bd91983d30b7f8d">&#xB6;</a></span></p><p><span class="yiyi-st" id="yiyi-190">&#x53C2;&#x8003;&#x6587;&#x732E;&#xFF1A;<a class="reference external" href="http://www.sqlalchemy.org/trac/ticket/3700">&#xFF03;3700</a></span></p></li><li><p id="change-1.0.13-1"><span class="yiyi-st" id="yiyi-191"><span class="target" id="change-5ac1c8a6e97310c3cea38f3a2cb45f13"><strong>[orm] [bug] </strong></span>Fixed bug whereby the event listeners used for backrefs could be inadvertently applied multiple times, when using a deep class inheritance hierarchy in conjunction with mutiple mapper configuration steps.<a class="changeset-link headerlink reference internal" href="#change-5ac1c8a6e97310c3cea38f3a2cb45f13">&#xB6;</a></span></p><p><span class="yiyi-st" id="yiyi-192">&#x53C2;&#x8003;&#x6587;&#x732E;&#xFF1A;<a class="reference external" href="http://www.sqlalchemy.org/trac/ticket/3710">&#xFF03;3710</a></span></p></li><li><p id="change-1.0.13-2"><span class="yiyi-st" id="yiyi-193"><span class="target" id="change-9b9c7cae32bb4c15ebd406b980edc2ba"><strong>[orm] [bug] </strong></span>Fixed bug whereby passing a <a class="reference internal" href="core_sqlelement.html#sqlalchemy.sql.expression.text" title="sqlalchemy.sql.expression.text"><code class="xref py py-func docutils literal"><span class="pre">text()</span></code></a> construct to the <a class="reference internal" href="orm_query.html#sqlalchemy.orm.query.Query.group_by" title="sqlalchemy.orm.query.Query.group_by"><code class="xref py py-meth docutils literal"><span class="pre">Query.group_by()</span></code></a> method would raise an error, instead of intepreting the object as a SQL fragment.<a class="changeset-link headerlink reference internal" href="#change-9b9c7cae32bb4c15ebd406b980edc2ba">&#xB6;</a></span></p><p><span class="yiyi-st" id="yiyi-194">&#x53C2;&#x8003;&#x6587;&#x732E;&#xFF1A;<a class="reference external" href="http://www.sqlalchemy.org/trac/ticket/3706">&#xFF03;3706</a></span></p></li><li><p id="change-1.0.13-3"><span class="yiyi-st" id="yiyi-195"><span class="target" id="change-e6ed5fa4fecae4a5036905ffce1a3264"><strong>[orm] [bug] </strong></span>Anonymous labeling is applied to a <a class="reference internal" href="core_sqlelement.html#sqlalchemy.sql.expression.Over.func" title="sqlalchemy.sql.expression.Over.func"><code class="xref py py-attr docutils literal"><span class="pre">func</span></code></a> construct that is passed to <a class="reference internal" href="orm_mapping_columns.html#sqlalchemy.orm.column_property" title="sqlalchemy.orm.column_property"><code class="xref py py-func docutils literal"><span class="pre">column_property()</span></code></a>, so that if the same attribute is referred to as a column expression twice the names are de-duped, thus avoiding &#x201C;ambiguous column&#x201D; errors. </span><span class="yiyi-st" id="yiyi-196">&#x4EE5;&#x524D;&#xFF0C;&#x9700;&#x8981;&#x5E94;&#x7528;<code class="docutils literal"><span class="pre">.label(None)</span></code>&#x624D;&#x80FD;&#x4F7F;&#x540D;&#x79F0;&#x533F;&#x540D;&#x5316;&#x3002;<a class="changeset-link headerlink reference internal" href="#change-e6ed5fa4fecae4a5036905ffce1a3264">&#xB6;</a></span></p><p><span class="yiyi-st" id="yiyi-197">&#x53C2;&#x8003;&#x6587;&#x732E;&#xFF1A;<a class="reference external" href="http://www.sqlalchemy.org/trac/ticket/3663">&#xFF03;3663</a></span></p></li><li><p id="change-1.0.13-4"><span class="yiyi-st" id="yiyi-198"><span class="target" id="change-e3c6db557cf0e220505ebe362aaa2c9a"><strong>[orm] [bug] </strong></span>Fixed regression appearing in the 1.0 series in ORM loading where the exception raised for an expected column missing would incorrectly be a <code class="docutils literal"><span class="pre">NoneType</span></code> error, rather than the expected <a class="reference internal" href="core_exceptions.html#sqlalchemy.exc.NoSuchColumnError" title="sqlalchemy.exc.NoSuchColumnError"><code class="xref py py-class docutils literal"><span class="pre">NoSuchColumnError</span></code></a>.<a class="changeset-link headerlink reference internal" href="#change-e3c6db557cf0e220505ebe362aaa2c9a">&#xB6;</a></span></p><p><span class="yiyi-st" id="yiyi-199">&#x53C2;&#x8003;&#x6587;&#x732E;&#xFF1A;<a class="reference external" href="http://www.sqlalchemy.org/trac/ticket/3658">&#xFF03;3658</a></span></p></li></ul></div><div class="section" id="change-1.0.13-sql"><h3><span class="yiyi-st" id="yiyi-200">SQL <a class="headerlink" href="#change-1.0.13-sql" title="Permalink to this headline">&#xB6; T0&gt;</a></span></h3><ul class="simple"><li><p id="change-1.0.13-5"><span class="yiyi-st" id="yiyi-201"><span class="target" id="change-e022b554a55b57090216a01e442216d2"><strong>[sql] [bug] </strong></span>Fixed bug where when using <code class="docutils literal"><span class="pre">case_sensitive=False</span></code> with an <a class="reference internal" href="core_connections.html#sqlalchemy.engine.Engine" title="sqlalchemy.engine.Engine"><code class="xref py py-class docutils literal"><span class="pre">Engine</span></code></a>, the result set would fail to correctly accomodate for duplicate column names in the result set, causing an error when the statement is executed in 1.0, and preventing the &#x201C;ambiguous column&#x201D; exception from functioning in 1.1.<a class="changeset-link headerlink reference internal" href="#change-e022b554a55b57090216a01e442216d2">&#xB6;</a></span></p><p><span class="yiyi-st" id="yiyi-202">&#x53C2;&#x8003;&#x6587;&#x732E;&#xFF1A;<a class="reference external" href="http://www.sqlalchemy.org/trac/ticket/3690">&#xFF03;3690</a></span></p></li><li><p id="change-1.0.13-6"><span class="yiyi-st" id="yiyi-203"><span class="target" id="change-1bce768d6b81f3ad8d7eba8903728cfd"><strong>[sql] [bug] </strong></span>Fixed bug where the negation of an EXISTS expression would not be properly typed as boolean in the result, and also would fail to be anonymously aliased in a SELECT list as is the case with a non-negated EXISTS construct.<a class="changeset-link headerlink reference internal" href="#change-1bce768d6b81f3ad8d7eba8903728cfd">&#xB6;</a></span></p><p><span class="yiyi-st" id="yiyi-204">&#x53C2;&#x8003;&#x6587;&#x732E;&#xFF1A;<a class="reference external" href="http://www.sqlalchemy.org/trac/ticket/3682">&#xFF03;3682</a></span></p></li><li><p id="change-1.0.13-7"><span class="yiyi-st" id="yiyi-205"><span class="target" id="change-2e70457f8ab9bf40e7fc276889b3238c"><strong>[sql] [bug] </strong></span>Fixed bug where &#x201C;unconsumed column names&#x201D; exception would fail to be raised in the case where <a class="reference internal" href="core_dml.html#sqlalchemy.sql.expression.Insert.values" title="sqlalchemy.sql.expression.Insert.values"><code class="xref py py-meth docutils literal"><span class="pre">Insert.values()</span></code></a> were called with a list of parameter mappings, instead of a single mapping of parameters. </span><span class="yiyi-st" id="yiyi-206">&#x62C9;&#x8BF7;&#x6C42;Athena Yao&#x63D0;&#x4F9B;&#x3002;<a class="changeset-link headerlink reference internal" href="#change-2e70457f8ab9bf40e7fc276889b3238c">&#xB6;</a></span></p><p><span class="yiyi-st" id="yiyi-207">&#x53C2;&#x8003;&#x6587;&#x732E;&#xFF1A;<a class="reference external" href="http://www.sqlalchemy.org/trac/ticket/3666">&#xFF03;3666</a></span></p></li></ul></div><div class="section" id="change-1.0.13-postgresql"><h3><span class="yiyi-st" id="yiyi-208">&#x7684;PostgreSQL <a class="headerlink" href="#change-1.0.13-postgresql" title="Permalink to this headline">&#xB6; T0&gt;</a></span></h3><ul class="simple"><li><p id="change-1.0.13-8"><span class="yiyi-st" id="yiyi-209"><span class="target" id="change-4a61289d79705f08bb15de8e6321af41"><strong>[postgresql] [bug] </strong></span>&#x4E3A;&#x9519;&#x8BEF;&#x5B57;&#x7B26;&#x4E32;&#x201C;SSL&#x9519;&#x8BEF;&#xFF1A;&#x89E3;&#x5BC6;&#x5931;&#x8D25;&#x6216;&#x9519;&#x8BEF;&#x7684;&#x8BB0;&#x5F55;mac&#x201D;&#x6DFB;&#x52A0;&#x4E86;&#x65AD;&#x5F00;&#x8FDE;&#x63A5;&#x68C0;&#x6D4B;&#x652F;&#x6301;&#x3002;</span><span class="yiyi-st" id="yiyi-210">&#x8BF7;&#x6C42;&#x793C;&#x7269;Iuri de Silvio&#x3002;<a class="changeset-link headerlink reference internal" href="#change-4a61289d79705f08bb15de8e6321af41">&#xB6;</a></span></p><p><span class="yiyi-st" id="yiyi-211">&#x53C2;&#x8003;&#x6587;&#x732E;&#xFF1A;<a class="reference external" href="http://www.sqlalchemy.org/trac/ticket/3715">&#xFF03;3715</a></span></p></li></ul></div><div class="section" id="change-1.0.13-mssql"><h3><span class="yiyi-st" id="yiyi-212">MSSQL <a class="headerlink" href="#change-1.0.13-mssql" title="Permalink to this headline">&#xB6; T0&gt;</a></span></h3><ul class="simple"><li><p id="change-1.0.13-9"><span class="yiyi-st" id="yiyi-213"><span class="target" id="change-e40583c1813139df7c799fc9928d38ae"><strong>[mssql] [bug] </strong></span>Fixed bug where by ROW_NUMBER OVER clause applied for OFFSET selects in SQL Server would inappropriately substitute a plain column from the local statement that overlaps with a label name used by the ORDER BY criteria of the statement.<a class="changeset-link headerlink reference internal" href="#change-e40583c1813139df7c799fc9928d38ae">&#xB6;</a></span></p><p><span class="yiyi-st" id="yiyi-214">&#x53C2;&#x8003;&#x6587;&#x732E;&#xFF1A;<a class="reference external" href="http://www.sqlalchemy.org/trac/ticket/3711">&#xFF03;3711</a></span></p></li><li><p id="change-1.0.13-10"><span class="yiyi-st" id="yiyi-215"><span class="target" id="change-7b9781fe3242062ab2446367b4733bad"><strong>[mssql] [bug] [oracle] </strong></span>Fixed regression appearing in the 1.0 series which would cause the Oracle and SQL Server dialects to incorrectly account for result set columns when these dialects would wrap a SELECT in a subquery in order to provide LIMIT/OFFSET behavior, and the original SELECT statement referred to the same column multiple times, such as a column and a label of that same column. </span><span class="yiyi-st" id="yiyi-216">This issue is related to <a class="reference external" href="http://www.sqlalchemy.org/trac/ticket/3658">#3658</a> in that when the error occurred, it would also cause a <code class="docutils literal"><span class="pre">NoneType</span></code> error, rather than reporting that it couldn&#x2019;t locate a column.<a class="changeset-link headerlink reference internal" href="#change-7b9781fe3242062ab2446367b4733bad">&#xB6;</a></span></p><p><span class="yiyi-st" id="yiyi-217">&#x53C2;&#x8003;&#x6587;&#x732E;&#xFF1A;<a class="reference external" href="http://www.sqlalchemy.org/trac/ticket/3657">&#xFF03;3657</a></span></p></li></ul></div><div class="section" id="change-1.0.13-oracle"><h3><span class="yiyi-st" id="yiyi-218">&#x9884;&#x8A00;<a class="headerlink" href="#change-1.0.13-oracle" title="Permalink to this headline">&#xB6; T0&gt;</a></span></h3><ul class="simple"><li><p id="change-1.0.13-11"><span class="yiyi-st" id="yiyi-219"><span class="target" id="change-3d8ee495a3a4567137de79dfb9d0f81e"><strong>[oracle] [bug] </strong></span>&#x4FEE;&#x590D;&#x4E86;cx_Oracle&#x8FDE;&#x63A5;&#x8FC7;&#x7A0B;&#x4E2D;&#x7684;&#x9519;&#x8BEF;&#xFF0C;&#x5F53;&#x7528;&#x6237;&#xFF0C;&#x5BC6;&#x7801;&#x6216;dsn&#x4E3A;&#x7A7A;&#x65F6;&#x5BFC;&#x81F4;TypeError&#x3002;</span><span class="yiyi-st" id="yiyi-220">&#x8FD9;&#x963B;&#x6B62;&#x4E86;&#x5BF9;Oracle&#x6570;&#x636E;&#x5E93;&#x7684;&#x5916;&#x90E8;&#x8BA4;&#x8BC1;&#xFF0C;&#x5E76;&#x963B;&#x6B62;&#x4E86;&#x8FDE;&#x63A5;&#x5230;&#x9ED8;&#x8BA4;&#x7684;dsn&#x3002;</span><span class="yiyi-st" id="yiyi-221">&#x8FDE;&#x63A5;&#x5B57;&#x7B26;&#x4E32;oracle&#xFF1A;//&#x73B0;&#x5728;&#x4F7F;&#x7528;&#x64CD;&#x4F5C;&#x7CFB;&#x7EDF;&#x7528;&#x6237;&#x540D;&#x767B;&#x5F55;&#x5230;&#x9ED8;&#x8BA4;dsn&#xFF0C;&#x76F8;&#x5F53;&#x4E8E;&#x4F7F;&#x7528;&apos;/&apos;&#x8FDE;&#x63A5;sqlplus&#x3002;<a class="changeset-link headerlink reference internal" href="#change-3d8ee495a3a4567137de79dfb9d0f81e">&#xB6;</a></span></p><p><span class="yiyi-st" id="yiyi-222">&#x53C2;&#x8003;&#x6587;&#x732E;&#xFF1A;<a class="reference external" href="http://www.sqlalchemy.org/trac/ticket/3705">&#xFF03;3705</a></span></p></li><li><p id="change-1.0.13-12"><span class="yiyi-st" id="yiyi-223"><span class="target" id="change-bada3dbba27a01629133de2f2f598b63"><strong>[oracle] [bug] </strong></span>Fixed a bug in the result proxy used mainly by Oracle when binary and other LOB types are in play, such that when query / statement caching were used, the type-level result processors, notably that required by the binary type itself but also any other processor, would become lost after the first run of the statement due to it being removed from the cached result metadata.<a class="changeset-link headerlink reference internal" href="#change-bada3dbba27a01629133de2f2f598b63">&#xB6;</a></span></p><p><span class="yiyi-st" id="yiyi-224">&#x53C2;&#x8003;&#x6587;&#x732E;&#xFF1A;<a class="reference external" href="http://www.sqlalchemy.org/trac/ticket/3699">&#xFF03;3699</a></span></p></li></ul></div><div class="section" id="change-1.0.13-misc"><h3><span class="yiyi-st" id="yiyi-225">&#x6742;&#x9879;<a class="headerlink" href="#change-1.0.13-misc" title="Permalink to this headline">&#xB6; T0&gt;</a></span></h3><ul class="simple"><li><p id="change-1.0.13-13"><span class="yiyi-st" id="yiyi-226"><span class="target" id="change-1a55117321e17e5d36db13e1b974446e"><strong>[bug] [examples] </strong></span>&#x5C06;&#x201C;&#x6709;&#x5411;&#x56FE;&#x201D;&#x793A;&#x4F8B;&#x66F4;&#x6539;&#x4E3A;&#x4E0D;&#x518D;&#x5C06;&#x8282;&#x70B9;&#x7684;&#x6574;&#x6570;&#x6807;&#x8BC6;&#x7B26;&#x89C6;&#x4E3A;&#x91CD;&#x8981;&#xFF1B; &#x201C;&#x8F83;&#x9AD8;&#x201D;/&#x201C;&#x8F83;&#x4F4E;&#x201D;&#x53C2;&#x8003;&#x73B0;&#x5728;&#x5141;&#x8BB8;&#x4E24;&#x4E2A;&#x65B9;&#x5411;&#x4E0A;&#x7684;&#x76F8;&#x4E92;&#x8FB9;&#x7F18;&#x3002;<a class="changeset-link headerlink reference internal" href="#change-1a55117321e17e5d36db13e1b974446e">&#xB6;</a></span></p><p><span class="yiyi-st" id="yiyi-227">&#x53C2;&#x8003;&#x6587;&#x732E;&#xFF1A;<a class="reference external" href="http://www.sqlalchemy.org/trac/ticket/3698">&#xFF03;3698</a></span></p></li><li><p id="change-1.0.13-14"><span class="yiyi-st" id="yiyi-228"><span class="target" id="change-a14dd2e73d889d065acc07a77b1ee7cb"><strong>[bug] [py3k] </strong></span>&#x4FEE;&#x6B63;&#x4E86;&#x201C;to_list&#x201D;&#x8F6C;&#x6362;&#x4E2D;&#x7684;&#x9519;&#x8BEF;&#xFF0C;&#x5176;&#x4E2D;&#x5355;&#x4E2A;&#x5B57;&#x8282;&#x5BF9;&#x8C61;&#x5C06;&#x53D8;&#x6210;&#x5355;&#x4E2A;&#x5B57;&#x7B26;&#x5217;&#x8868;&#x3002;</span><span class="yiyi-st" id="yiyi-229">&#x8FD9;&#x5C06;&#x5BF9;&#x4F7F;&#x7528;&#x5B57;&#x8282;&#x5BF9;&#x8C61;&#x7684;&#x4E3B;&#x952E;&#x4E0A;&#x7684;<a class="reference internal" href="orm_query.html#sqlalchemy.orm.query.Query.get" title="sqlalchemy.orm.query.Query.get"><code class="xref py py-meth docutils literal"><span class="pre">Query.get()</span></code></a>&#x65B9;&#x6CD5;&#x4EA7;&#x751F;&#x5F71;&#x54CD;&#x3002;<a class="changeset-link headerlink reference internal" href="#change-a14dd2e73d889d065acc07a77b1ee7cb">&#xB6;</a></span></p><p><span class="yiyi-st" id="yiyi-230">&#x53C2;&#x8003;&#x6587;&#x732E;&#xFF1A;<a class="reference external" href="http://www.sqlalchemy.org/trac/ticket/3660">&#xFF03;3660</a></span></p></li></ul></div></div><div class="section" id="change-1.0.12"><h2><span class="yiyi-st" id="yiyi-232">1.0.12 <a class="headerlink" href="#change-1.0.12" title="Permalink to this headline">&#xB6; T0&gt;</a></span></h2><span class="yiyi-st" id="yiyi-271">&#x53D1;&#x5E03;&#x65E5;&#x671F;&#xFF1A;2016&#x5E74;2&#x6708;15&#x65E5;</span><div class="section" id="change-1.0.12-orm"><h3><span class="yiyi-st" id="yiyi-233">ORM <a class="headerlink" href="#change-1.0.12-orm" title="Permalink to this headline">&#xB6; T0&gt;</a></span></h3><ul class="simple"><li><p id="change-1.0.12-0"><span class="yiyi-st" id="yiyi-234"><span class="target" id="change-39c398de2662e9f45aae57c76c6444c9"><strong>[orm] [bug] </strong></span>Fixed bug in <a class="reference internal" href="orm_session_api.html#sqlalchemy.orm.session.Session.merge" title="sqlalchemy.orm.session.Session.merge"><code class="xref py py-meth docutils literal"><span class="pre">Session.merge()</span></code></a> where an object with a composite primary key that has values for some but not all of the PK fields would emit a SELECT statement leaking the internal NEVER_SET symbol into the query, rather than detecting that this object does not have a searchable primary key and no SELECT should be emitted.<a class="changeset-link headerlink reference internal" href="#change-39c398de2662e9f45aae57c76c6444c9">&#xB6;</a></span></p><p><span class="yiyi-st" id="yiyi-235">&#x53C2;&#x8003;&#x6587;&#x732E;&#xFF1A;<a class="reference external" href="http://www.sqlalchemy.org/trac/ticket/3647">&#xFF03;3647</a></span></p></li><li><p id="change-1.0.12-1"><span class="yiyi-st" id="yiyi-236"><span class="target" id="change-57d791a5552fab41d8a0e788f4324f65"><strong>[orm] [bug] </strong></span>&#x4ECE;0.9&#x7248;&#x672C;&#x5F00;&#x59CB;&#x4FEE;&#x6B63;&#x4E86;&#x56DE;&#x5F52;&#xFF0C;0.9&#x6837;&#x5F0F;&#x52A0;&#x8F7D;&#x5668;&#x9009;&#x9879;&#x7CFB;&#x7EDF;&#x5728;&#x5355;&#x4E2A;&#x67E5;&#x8BE2;&#x4E2D;&#x65E0;&#x6CD5;&#x9002;&#x5E94;&#x591A;&#x4E2A;<a class="reference internal" href="orm_loading_columns.html#sqlalchemy.orm.undefer_group" title="sqlalchemy.orm.undefer_group"><code class="xref py py-func docutils literal"><span class="pre">undefer_group()</span></code></a>&#x52A0;&#x8F7D;&#x5668;&#x9009;&#x9879;&#x3002;</span><span class="yiyi-st" id="yiyi-237">&#x73B0;&#x5728;&#x5373;&#x4F7F;&#x5BF9;&#x540C;&#x4E00;&#x5B9E;&#x4F53;&#x4E5F;&#x4F1A;&#x8003;&#x8651;&#x591A;&#x4E2A;<a class="reference internal" href="orm_loading_columns.html#sqlalchemy.orm.undefer_group" title="sqlalchemy.orm.undefer_group"><code class="xref py py-func docutils literal"><span class="pre">undefer_group()</span></code></a>&#x9009;&#x9879;&#x3002;<a class="changeset-link headerlink reference internal" href="#change-57d791a5552fab41d8a0e788f4324f65">&#xB6;</a></span></p><p><span class="yiyi-st" id="yiyi-238">&#x53C2;&#x8003;&#x6587;&#x732E;&#xFF1A;<a class="reference external" href="http://www.sqlalchemy.org/trac/ticket/3623">&#xFF03;3623</a></span></p></li></ul></div><div class="section" id="change-1.0.12-engine"><h3><span class="yiyi-st" id="yiyi-239">&#x53D1;&#x52A8;&#x673A;<a class="headerlink" href="#change-1.0.12-engine" title="Permalink to this headline">&#xB6; T0&gt;</a></span></h3><ul class="simple"><li><p id="change-1.0.12-2"><span class="yiyi-st" id="yiyi-240"><span class="target" id="change-7706b7fbecdb21a5157da093a88b9134"><strong>[engine] [bug] [mysql] </strong></span>Revisiting <a class="reference external" href="http://www.sqlalchemy.org/trac/ticket/2696">#2696</a>, first released in 1.0.10, which attempts to work around Python 2&#x2019;s lack of exception context reporting by emitting a warning for an exception that was interrupted by a second exception when attempting to roll back the already-failed transaction; this issue continues to occur for MySQL backends in conjunction with a savepoint that gets unexpectedly lost, which then causes a &#x201C;no such savepoint&#x201D; error when the rollback is attempted, obscuring what the original condition was.</span></p><p><span class="yiyi-st" id="yiyi-241">&#x8FD9;&#x79CD;&#x65B9;&#x6CD5;&#x5DF2;&#x88AB;&#x63A8;&#x5E7F;&#x5230;&#x6838;&#x5FC3;&#x201C;&#x5B89;&#x5168;&#x91CD;&#x65B0;&#x8BC4;&#x4F30;&#x201D;&#x529F;&#x80FD;&#xFF0C;&#x8BE5;&#x529F;&#x80FD;&#x901A;&#x8FC7;ORM&#x548C;Core&#x5728;&#x4EFB;&#x4F55;&#x53D1;&#x751F;&#x5C1D;&#x8BD5;&#x63D0;&#x4EA4;&#x7684;&#x9519;&#x8BEF;&#x65F6;&#x56DE;&#x6EDA;&#x4E8B;&#x52A1;&#x7684;&#x5730;&#x65B9;&#x53D1;&#x751F;&#xFF0C;&#x5305;&#x62EC;&#x7531;<a class="reference internal" href="orm_session_api.html#sqlalchemy.orm.session.Session" title="sqlalchemy.orm.session.Session"><code class="xref py py-class docutils literal"><span class="pre">Session</span></code></a>&#x548C;<a class="reference internal" href="core_connections.html#sqlalchemy.engine.Connection" title="sqlalchemy.engine.Connection"><code class="xref py py-class docutils literal"><span class="pre">Connection</span></code></a>&#xFF0C;&#x5E76;&#x53D1;&#x751F;&#x8BF8;&#x5982;&#x201C;RELEASE SAVEPOINT&#x201D;&#x53D1;&#x751F;&#x6545;&#x969C;&#x7B49;&#x64CD;&#x4F5C;&#x3002;</span><span class="yiyi-st" id="yiyi-242">&#x4EE5;&#x524D;&#xFF0C;&#x4FEE;&#x590D;&#x53EA;&#x9002;&#x7528;&#x4E8E;ORM&#x5237;&#x65B0;/&#x63D0;&#x4EA4;&#x8FC7;&#x7A0B;&#x4E2D;&#x7684;&#x7279;&#x5B9A;&#x8DEF;&#x5F84;&#xFF1B;&#x5B83;&#x73B0;&#x5728;&#x4E5F;&#x9002;&#x7528;&#x4E8E;&#x6240;&#x6709;&#x8DE8;&#x56FD;&#x4E0A;&#x4E0B;&#x6587;&#x7BA1;&#x7406;&#x8005;&#x3002;</span></p><span class="yiyi-st" id="yiyi-244"> <a class="changeset-link headerlink reference internal" href="#change-7706b7fbecdb21a5157da093a88b9134">&#xB6;</a></span><p><span class="yiyi-st" id="yiyi-243">&#x53C2;&#x8003;&#x6587;&#x732E;&#xFF1A;<a class="reference external" href="http://www.sqlalchemy.org/trac/ticket/2696">&#xFF03;2696</a></span></p></li></ul></div><div class="section" id="change-1.0.12-sql"><h3><span class="yiyi-st" id="yiyi-245">SQL <a class="headerlink" href="#change-1.0.12-sql" title="Permalink to this headline">&#xB6; T0&gt;</a></span></h3><ul class="simple"><li><p id="change-1.0.12-3"><span class="yiyi-st" id="yiyi-246"><span class="target" id="change-fa04be1b3106d6859abbc1ade87df175"><strong>[sql] [bug] </strong></span>Fixed issue where the &#x201C;literal_binds&#x201D; flag was not propagated for <a class="reference internal" href="core_dml.html#sqlalchemy.sql.expression.insert" title="sqlalchemy.sql.expression.insert"><code class="xref py py-func docutils literal"><span class="pre">expression.insert()</span></code></a>, <a class="reference internal" href="core_dml.html#sqlalchemy.sql.expression.update" title="sqlalchemy.sql.expression.update"><code class="xref py py-func docutils literal"><span class="pre">expression.update()</span></code></a> or <a class="reference internal" href="core_dml.html#sqlalchemy.sql.expression.delete" title="sqlalchemy.sql.expression.delete"><code class="xref py py-func docutils literal"><span class="pre">expression.delete()</span></code></a> constructs when compiled to string SQL. </span><span class="yiyi-st" id="yiyi-247">&#x8BF7;&#x6C42;&#x63D0;&#x4F9B;Tim Tate&#x3002;<a class="changeset-link headerlink reference internal" href="#change-fa04be1b3106d6859abbc1ade87df175">&#xB6;</a></span></p><p><span class="yiyi-st" id="yiyi-248">&#x53C2;&#x8003;&#x6587;&#x732E;&#xFF1A;<a class="reference external" href="http://www.sqlalchemy.org/trac/ticket/3643">&#xFF03;3643</a>&#xFF0C;<a class="reference external" href="https://github.com/zzzeek/sqlalchemy/pull/232">&#x8BF7;&#x6C42;github&#xFF1A;232</a></span></p></li><li><p id="change-1.0.12-4"><span class="yiyi-st" id="yiyi-249"><span class="target" id="change-6893173c723cb93efd613ae892e07abf"><strong>[sql] [bug] </strong></span>Fixed issue where inadvertent use of the Python <code class="docutils literal"><span class="pre">__contains__</span></code> override with a column expression (e.g. by using <code class="docutils literal"><span class="pre">&apos;x&apos;</span> <span class="pre">in</span> <span class="pre">col</span></code>) would cause an endless loop in the case of an ARRAY type, as Python defers this to <code class="docutils literal"><span class="pre">__getitem__</span></code> access which never raises for this type. </span><span class="yiyi-st" id="yiyi-250">&#x603B;&#x7684;&#x6765;&#x8BF4;&#xFF0C;&#x6240;&#x6709;&#x4F7F;&#x7528;<code class="docutils literal"><span class="pre">__contains__</span></code>&#x73B0;&#x5728;&#x5F15;&#x53D1;NotImplementedError&#x3002;<a class="changeset-link headerlink reference internal" href="#change-6893173c723cb93efd613ae892e07abf">&#xB6;</a></span></p><p><span class="yiyi-st" id="yiyi-251">&#x53C2;&#x8003;&#x6587;&#x732E;&#xFF1A;<a class="reference external" href="http://www.sqlalchemy.org/trac/ticket/3642">&#xFF03;3642</a></span></p></li><li><p id="change-1.0.12-5"><span class="yiyi-st" id="yiyi-252"><span class="target" id="change-5c11bdb4bef5dc9140eedb095bb42a18"><strong>[sql] [bug] </strong></span>Fixed bug in <a class="reference internal" href="core_metadata.html#sqlalchemy.schema.Table" title="sqlalchemy.schema.Table"><code class="xref py py-class docutils literal"><span class="pre">Table</span></code></a> metadata construct which appeared around the 0.9 series where adding columns to a <a class="reference internal" href="core_metadata.html#sqlalchemy.schema.Table" title="sqlalchemy.schema.Table"><code class="xref py py-class docutils literal"><span class="pre">Table</span></code></a> that was unpickled would fail to correctly establish the <a class="reference internal" href="core_metadata.html#sqlalchemy.schema.Column" title="sqlalchemy.schema.Column"><code class="xref py py-class docutils literal"><span class="pre">Column</span></code></a> within the &#x2018;c&#x2019; collection, leading to issues in areas such as ORM configuration. </span><span class="yiyi-st" id="yiyi-253">&#x8FD9;&#x53EF;&#x80FD;&#x4F1A;&#x5F71;&#x54CD;<code class="docutils literal"><span class="pre">extend_existing</span></code>&#x7B49;&#x7528;&#x4F8B;&#x3002;<a class="changeset-link headerlink reference internal" href="#change-5c11bdb4bef5dc9140eedb095bb42a18">&#xB6;</a></span></p><p><span class="yiyi-st" id="yiyi-254">&#x53C2;&#x8003;&#x6587;&#x732E;&#xFF1A;<a class="reference external" href="http://www.sqlalchemy.org/trac/ticket/3632">&#xFF03;3632</a></span></p></li></ul></div><div class="section" id="change-1.0.12-postgresql"><h3><span class="yiyi-st" id="yiyi-255">&#x7684;PostgreSQL <a class="headerlink" href="#change-1.0.12-postgresql" title="Permalink to this headline">&#xB6; T0&gt;</a></span></h3><ul class="simple"><li><p id="change-1.0.12-6"><span class="yiyi-st" id="yiyi-256"><span class="target" id="change-5b66b429f55459d303aa6d7335f13701"><strong>[postgresql] [bug] </strong></span>&#x4FEE;&#x6B63;&#x4E86;<a class="reference internal" href="core_sqlelement.html#sqlalchemy.sql.expression.text" title="sqlalchemy.sql.expression.text"><code class="xref py py-func docutils literal"><span class="pre">expression.text()</span></code></a>&#x7ED3;&#x6784;&#x4E2D;&#x53CC;&#x5192;&#x53F7;&#x8868;&#x8FBE;&#x5F0F;&#x65E0;&#x6CD5;&#x6B63;&#x786E;&#x8F6C;&#x4E49;&#x7684;&#x95EE;&#x9898;&#x3002; <code class="docutils literal"><span class="pre">some\:\:expr</span></code>&#xFF0C;&#x8FD9;&#x662F;&#x5728;&#x5448;&#x73B0;Postgresql&#x6837;&#x5F0F;&#x7684;CAST&#x8868;&#x8FBE;&#x5F0F;&#x65F6;&#x6700;&#x5E38;&#x7528;&#x7684;&#x3002;<a class="changeset-link headerlink reference internal" href="#change-5b66b429f55459d303aa6d7335f13701">&#xB6;</a></span></p><p><span class="yiyi-st" id="yiyi-257">&#x53C2;&#x8003;&#x6587;&#x732E;&#xFF1A;<a class="reference external" href="http://www.sqlalchemy.org/trac/ticket/3644">&#xFF03;3644</a></span></p></li></ul></div><div class="section" id="change-1.0.12-mssql"><h3><span class="yiyi-st" id="yiyi-258">MSSQL <a class="headerlink" href="#change-1.0.12-mssql" title="Permalink to this headline">&#xB6; T0&gt;</a></span></h3><ul class="simple"><li><p id="change-1.0.12-7"><span class="yiyi-st" id="yiyi-259"><span class="target" id="change-d6c62d538d019244e6eb27d263e868e8"><strong>[mssql] [bug] </strong></span>Fixed the syntax of the <a class="reference internal" href="core_sqlelement.html#sqlalchemy.sql.expression.extract" title="sqlalchemy.sql.expression.extract"><code class="xref py py-func docutils literal"><span class="pre">extract()</span></code></a> function when used on MSSQL against a datetime value; the quotes around the keyword are removed. </span><span class="yiyi-st" id="yiyi-260">&#x62C9;&#x8BF7;&#x6C42;&#x793C;&#x8C8C;Guillaume Doumenc&#x3002;<a class="changeset-link headerlink reference internal" href="#change-d6c62d538d019244e6eb27d263e868e8">&#xB6;</a></span></p><p><span class="yiyi-st" id="yiyi-261">&#x53C2;&#x8003;&#x6587;&#x732E;&#xFF1A;<a class="reference external" href="http://www.sqlalchemy.org/trac/ticket/3624">&#xFF03;3624</a>&#xFF0C;<a class="reference external" href="https://bitbucket.org/zzzeek/sqlalchemy/pull-request/70">&#x62C9;&#x53D6;&#x8BF7;&#x6C42;bitbucket&#xFF1A;70</a></span></p></li><li><p id="change-1.0.12-8"><span class="yiyi-st" id="yiyi-262"><span class="target" id="change-b44f1e43ef8e623b9de9ddc5c66d716a"><strong>[mssql] [bug] [firebird] </strong></span>Fixed 1.0 regression where the eager fetch of cursor.rowcount was no longer called for an UPDATE or DELETE statement emitted via plain text or via the <a class="reference internal" href="core_sqlelement.html#sqlalchemy.sql.expression.text" title="sqlalchemy.sql.expression.text"><code class="xref py py-func docutils literal"><span class="pre">text()</span></code></a> construct, affecting those drivers that erase cursor.rowcount once the cursor is closed such as SQL Server ODBC and Firebird drivers.<a class="changeset-link headerlink reference internal" href="#change-b44f1e43ef8e623b9de9ddc5c66d716a">&#xB6;</a></span></p><p><span class="yiyi-st" id="yiyi-263">&#x53C2;&#x8003;&#x6587;&#x732E;&#xFF1A;<a class="reference external" href="http://www.sqlalchemy.org/trac/ticket/3622">&#xFF03;3622</a></span></p></li></ul></div><div class="section" id="change-1.0.12-oracle"><h3><span class="yiyi-st" id="yiyi-264">&#x9884;&#x8A00;<a class="headerlink" href="#change-1.0.12-oracle" title="Permalink to this headline">&#xB6; T0&gt;</a></span></h3><ul class="simple"><li><p id="change-1.0.12-9"><span class="yiyi-st" id="yiyi-265"><span class="target" id="change-43abedf27e93fb6c494d01efb423d1af"><strong>[oracle] [bug] [jython] </strong></span>Fixed a small issue in the Jython Oracle compiler involving the rendering of &#x201C;RETURNING&#x201D; which allows this currently unsupported/untested dialect to work rudimentally with the 1.0 series. </span><span class="yiyi-st" id="yiyi-266">&#x8BF7;&#x6C42;&#x5361;&#x6D1B;&#x65AF;&#x91CC;&#x74E6;&#x65AF;&#x8BF7;&#x6C42;&#x3002;<a class="changeset-link headerlink reference internal" href="#change-43abedf27e93fb6c494d01efb423d1af">&#xB6;</a></span></p><p><span class="yiyi-st" id="yiyi-267">&#x53C2;&#x8003;&#x6587;&#x732E;&#xFF1A;<a class="reference external" href="http://www.sqlalchemy.org/trac/ticket/3621">&#xFF03;3621</a></span></p></li></ul></div><div class="section" id="change-1.0.12-misc"><h3><span class="yiyi-st" id="yiyi-268">&#x6742;&#x9879;<a class="headerlink" href="#change-1.0.12-misc" title="Permalink to this headline">&#xB6; T0&gt;</a></span></h3><ul class="simple"><li><p id="change-1.0.12-10"><span class="yiyi-st" id="yiyi-269"><span class="target" id="change-8aa9c8209b565aaa4251a73d5815aa70"><strong>[bug] [py3k] </strong></span>Fixed bug where some exception re-raise scenarios would attach the exception to itself as the &#x201C;cause&#x201D;; while the Python 3 interpreter is OK with this, it could cause endless loops in iPython.<a class="changeset-link headerlink reference internal" href="#change-8aa9c8209b565aaa4251a73d5815aa70">&#xB6;</a></span></p><p><span class="yiyi-st" id="yiyi-270">&#x53C2;&#x8003;&#x6587;&#x732E;&#xFF1A;<a class="reference external" href="http://www.sqlalchemy.org/trac/ticket/3625">&#xFF03;3625</a></span></p></li></ul></div></div><div class="section" id="change-1.0.11"><h2><span class="yiyi-st" id="yiyi-272">1.0.11 <a class="headerlink" href="#change-1.0.11" title="Permalink to this headline">&#xB6; T0&gt;</a></span></h2><span class="yiyi-st" id="yiyi-298">&#x53D1;&#x5E03;&#x65E5;&#x671F;&#xFF1A;2015&#x5E74;12&#x6708;22&#x65E5;</span><div class="section" id="change-1.0.11-orm"><h3><span class="yiyi-st" id="yiyi-273">ORM <a class="headerlink" href="#change-1.0.11-orm" title="Permalink to this headline">&#xB6; T0&gt;</a></span></h3><ul class="simple"><li><p id="change-1.0.11-0"><span class="yiyi-st" id="yiyi-274"><span class="target" id="change-14de383393c0c9af155b092fdecf8101"><strong>[orm] [bug] </strong></span>&#x4FEE;&#x6B63;&#x4E86;1.0.10&#x4E2D;&#x7531;<a class="reference external" href="http://www.sqlalchemy.org/trac/ticket/3593">&#xFF03;3593</a>&#x4FEE;&#x590D;&#x5F15;&#x8D77;&#x7684;&#x56DE;&#x5F52;&#xFF0C;&#x5176;&#x4E2D;&#x4E3A;&#x6765;&#x81EA;poly_subclass-&gt; class-&gt; poly_baseclass&#x7684;&#x591A;&#x6001;&#x8FDE;&#x63A5;&#x52A0;&#x8F7D;&#x6DFB;&#x52A0;&#x4E86;&#x68C0;&#x67E5;&#x8FDE;&#x63A5;&#x5C06;&#x5931;&#x8D25;&#x7684;&#x7C7B; - &gt; poly_subclass-&gt;&#x7C7B;&#x7684;&#x60C5;&#x51B5;&#x3002;<a class="changeset-link headerlink reference internal" href="#change-14de383393c0c9af155b092fdecf8101">&#xB6;</a></span></p><p><span class="yiyi-st" id="yiyi-275">&#x53C2;&#x8003;&#x6587;&#x732E;&#xFF1A;<a class="reference external" href="http://www.sqlalchemy.org/trac/ticket/3611">&#xFF03;3611</a></span></p></li><li><p id="change-1.0.11-1"><span class="yiyi-st" id="yiyi-276"><span class="target" id="change-02da59abe1c57d8646747495298a98c5"><strong>[orm] [bug] </strong></span>Fixed bug where <a class="reference internal" href="orm_session_api.html#sqlalchemy.orm.session.Session.bulk_update_mappings" title="sqlalchemy.orm.session.Session.bulk_update_mappings"><code class="xref py py-meth docutils literal"><span class="pre">Session.bulk_update_mappings()</span></code></a> and related would not bump a version id counter when in use. </span><span class="yiyi-st" id="yiyi-277">&#x8FD9;&#x91CC;&#x7684;&#x7ECF;&#x9A8C;&#x4ECD;&#x7136;&#x6709;&#x70B9;&#x7C97;&#x7CD9;&#xFF0C;&#x56E0;&#x4E3A;&#x5728;&#x7ED9;&#x5B9A;&#x5B57;&#x5178;&#x4E2D;&#x9700;&#x8981;&#x539F;&#x59CB;&#x7248;&#x672C;ID&#xFF0C;&#x5E76;&#x4E14;&#x8FD8;&#x6CA1;&#x6709;&#x5E72;&#x51C0;&#x7684;&#x9519;&#x8BEF;&#x62A5;&#x544A;&#x3002;<a class="changeset-link headerlink reference internal" href="#change-02da59abe1c57d8646747495298a98c5">&#xB6;</a></span></p><p><span class="yiyi-st" id="yiyi-278">&#x53C2;&#x8003;&#x6587;&#x732E;&#xFF1A;<a class="reference external" href="http://www.sqlalchemy.org/trac/ticket/3610">&#xFF03;3610</a></span></p></li><li><p id="change-1.0.11-2"><span class="yiyi-st" id="yiyi-279"><span class="target" id="change-b0b97f1c028f72f272a01f842b36d622"><strong>[orm] [bug] </strong></span>Major fixes to the <a class="reference internal" href="orm_mapping_api.html#sqlalchemy.orm.mapper.Mapper.params.eager_defaults" title="sqlalchemy.orm.mapper.Mapper"><code class="xref py py-paramref docutils literal"><span class="pre">Mapper.eager_defaults</span></code></a> flag, this flag would not be honored correctly in the case that multiple UPDATE statements were to be emitted, either as part of a flush or a bulk update operation. </span><span class="yiyi-st" id="yiyi-280">&#x6B64;&#x5916;&#xFF0C;RETURNING&#x5C06;&#x5728;&#x66F4;&#x65B0;&#x8BED;&#x53E5;&#x4E2D;&#x4E0D;&#x5FC5;&#x8981;&#x5730;&#x53D1;&#x51FA;&#x3002;<a class="changeset-link headerlink reference internal" href="#change-b0b97f1c028f72f272a01f842b36d622">&#xB6;</a></span></p><p><span class="yiyi-st" id="yiyi-281">&#x53C2;&#x8003;&#x6587;&#x732E;&#xFF1A;<a class="reference external" href="http://www.sqlalchemy.org/trac/ticket/3609">&#xFF03;3609</a></span></p></li><li><p id="change-1.0.11-3"><span class="yiyi-st" id="yiyi-282"><span class="target" id="change-b1030568ebfc6b93a82a5eba2ed64e72"><strong>[orm] [bug] </strong></span>Fixed bug where use of the <a class="reference internal" href="orm_query.html#sqlalchemy.orm.query.Query.select_from" title="sqlalchemy.orm.query.Query.select_from"><code class="xref py py-meth docutils literal"><span class="pre">Query.select_from()</span></code></a> method would cause a subsequent call to the <a class="reference internal" href="orm_query.html#sqlalchemy.orm.query.Query.with_parent" title="sqlalchemy.orm.query.Query.with_parent"><code class="xref py py-meth docutils literal"><span class="pre">Query.with_parent()</span></code></a> method to fail.<a class="changeset-link headerlink reference internal" href="#change-b1030568ebfc6b93a82a5eba2ed64e72">&#xB6;</a></span></p><p><span class="yiyi-st" id="yiyi-283">&#x53C2;&#x8003;&#x6587;&#x732E;&#xFF1A;<a class="reference external" href="http://www.sqlalchemy.org/trac/ticket/3606">&#xFF03;3606</a></span></p></li></ul></div><div class="section" id="change-1.0.11-sql"><h3><span class="yiyi-st" id="yiyi-284">SQL <a class="headerlink" href="#change-1.0.11-sql" title="Permalink to this headline">&#xB6; T0&gt;</a></span></h3><ul class="simple"><li><p id="change-1.0.11-4"><span class="yiyi-st" id="yiyi-285"><span class="target" id="change-e8ae984d3fe8f909f4e67567acda10e1"><strong>[sql] [bug] </strong></span>Fixed bug in <a class="reference internal" href="core_dml.html#sqlalchemy.sql.expression.Update.return_defaults" title="sqlalchemy.sql.expression.Update.return_defaults"><code class="xref py py-meth docutils literal"><span class="pre">Update.return_defaults()</span></code></a> which would cause all insert-default holding columns not otherwise included in the SET clause (such as primary key cols) to get rendered into the RETURNING even though this is an UPDATE.<a class="changeset-link headerlink reference internal" href="#change-e8ae984d3fe8f909f4e67567acda10e1">&#xB6;</a></span></p><p><span class="yiyi-st" id="yiyi-286">&#x53C2;&#x8003;&#x6587;&#x732E;&#xFF1A;<a class="reference external" href="http://www.sqlalchemy.org/trac/ticket/3609">&#xFF03;3609</a></span></p></li></ul></div><div class="section" id="change-1.0.11-mysql"><h3><span class="yiyi-st" id="yiyi-287">MySQL&#x7684;<a class="headerlink" href="#change-1.0.11-mysql" title="Permalink to this headline">&#xB6; T0&gt;</a></span></h3><ul class="simple"><li><p id="change-1.0.11-5"><span class="yiyi-st" id="yiyi-288"><span class="target" id="change-c1b3ad084945fc5a7f4d711d989ebdf2"><strong>[mysql] [bug] </strong></span>&#x8C03;&#x6574;&#x7528;&#x4E8E;&#x89E3;&#x6790;MySQL&#x89C6;&#x56FE;&#x7684;&#x6B63;&#x5219;&#x8868;&#x8FBE;&#x5F0F;&#xFF0C;&#x4EE5;&#x4FBF;&#x6211;&#x4EEC;&#x4E0D;&#x518D;&#x5047;&#x8BBE;&#x53CD;&#x5C04;&#x89C6;&#x56FE;&#x6E90;&#x4E2D;&#x5B58;&#x5728;&#x201C;ALGORITHM&#x201D;&#x5173;&#x952E;&#x5B57;&#xFF0C;&#x56E0;&#x4E3A;&#x6709;&#x4E9B;&#x7528;&#x6237;&#x5DF2;&#x7ECF;&#x62A5;&#x544A;&#x8FC7;&#x5728;&#x67D0;&#x4E9B;Amazon RDS&#x73AF;&#x5883;&#x4E2D;&#x4E0D;&#x5B58;&#x5728;&#x3002;<a class="changeset-link headerlink reference internal" href="#change-c1b3ad084945fc5a7f4d711d989ebdf2">&#xB6;</a></span></p><p><span class="yiyi-st" id="yiyi-289">&#x53C2;&#x8003;&#x6587;&#x732E;&#xFF1A;<a class="reference external" href="http://www.sqlalchemy.org/trac/ticket/3613">&#xFF03;3613</a></span></p></li><li><p id="change-1.0.11-6"><span class="yiyi-st" id="yiyi-290"><span class="target" id="change-62b28bb5936942f4483f018dacdaac57"><strong>[mysql] [bug] </strong></span>&#x4E3A;MySQL 5.7&#x589E;&#x52A0;&#x4E86;MySQL&#x4FDD;&#x7559;&#x5B57;&#xFF0C;&#x5305;&#x62EC;&apos;generated&apos;&#xFF0C;&apos;optimizer_costs&apos;&#xFF0C;&apos;stored&apos;&#xFF0C;&apos;virtual&apos;&#x3002;</span><span class="yiyi-st" id="yiyi-291">&#x8BF7;&#x6C42;&#x793C;&#x8C8C;Hanno Schlichting&#x3002;<a class="changeset-link headerlink reference internal" href="#change-62b28bb5936942f4483f018dacdaac57">&#xB6;</a></span></p><p><span class="yiyi-st" id="yiyi-292">&#x53C2;&#x8003;&#x6587;&#x732E;&#xFF1A;<a class="reference external" href="https://github.com/zzzeek/sqlalchemy/pull/222">&#x8BF7;&#x6C42;github&#xFF1A;222</a></span></p></li></ul></div><div class="section" id="change-1.0.11-misc"><h3><span class="yiyi-st" id="yiyi-293">&#x6742;&#x9879;<a class="headerlink" href="#change-1.0.11-misc" title="Permalink to this headline">&#xB6; T0&gt;</a></span></h3><ul class="simple"><li><p id="change-1.0.11-7"><span class="yiyi-st" id="yiyi-294"><span class="target" id="change-134a03f81d13c85951a47bd2a9b7b9a1"><strong>[bug] [ext] </strong></span>&#x8FDB;&#x4E00;&#x6B65;&#x4FEE;&#x6B63;<a class="reference external" href="http://www.sqlalchemy.org/trac/ticket/3605">&#xFF03;3605</a>&#xFF0C;<a class="reference internal" href="orm_extensions_mutable.html#sqlalchemy.ext.mutable.MutableDict" title="sqlalchemy.ext.mutable.MutableDict"><code class="xref py py-class docutils literal"><span class="pre">MutableDict</span></code></a>&#x4E0A;&#x7684;&#x5F39;&#x51FA;&#x65B9;&#x6CD5;&#xFF0C;&#x5176;&#x4E2D;&#x672A;&#x5305;&#x542B;&#x201C;default&#x201D;&#x53C2;&#x6570;<a class="changeset-link headerlink reference internal" href="#change-134a03f81d13c85951a47bd2a9b7b9a1">&#xB6; T6&gt;</a></span></p><p><span class="yiyi-st" id="yiyi-295">&#x53C2;&#x8003;&#x6587;&#x732E;&#xFF1A;<a class="reference external" href="http://www.sqlalchemy.org/trac/ticket/3605">&#xFF03;3605</a></span></p></li><li><p id="change-1.0.11-8"><span class="yiyi-st" id="yiyi-296"><span class="target" id="change-9e6966523927542f8808ecf8005c6737"><strong>[bug] [ext] </strong></span>Fixed bug in baked loader system where the systemwide monkeypatch for setting up baked lazy loaders would interfere with other loader strategies that rely on lazy loading as a fallback, e.g. joined and subquery eager loaders, leading to <code class="docutils literal"><span class="pre">IndexError</span></code> exceptions at mapper configuration time.<a class="changeset-link headerlink reference internal" href="#change-9e6966523927542f8808ecf8005c6737">&#xB6;</a></span></p><p><span class="yiyi-st" id="yiyi-297">&#x53C2;&#x8003;&#x6587;&#x732E;&#xFF1A;<a class="reference external" href="http://www.sqlalchemy.org/trac/ticket/3612">&#xFF03;3612</a></span></p></li></ul></div></div><div class="section" id="change-1.0.10"><h2><span class="yiyi-st" id="yiyi-299">1.0.10 <a class="headerlink" href="#change-1.0.10" title="Permalink to this headline">&#xB6; T0&gt;</a></span></h2><span class="yiyi-st" id="yiyi-358">&#x53D1;&#x5E03;&#x65E5;&#x671F;&#xFF1A;2015&#x5E74;12&#x6708;11&#x65E5;</span><div class="section" id="change-1.0.10-orm"><h3><span class="yiyi-st" id="yiyi-300">ORM <a class="headerlink" href="#change-1.0.10-orm" title="Permalink to this headline">&#xB6; T0&gt;</a></span></h3><ul class="simple"><li><p id="change-1.0.10-0"><span class="yiyi-st" id="yiyi-301"><span class="target" id="change-0fc136fefdb6fd903b2e0036636f6328"><strong>[orm] [bug] </strong></span>Fixed issue where post_update on a many-to-one relationship would fail to emit an UPDATE in the case where the attribute were set to None and not previously loaded.<a class="changeset-link headerlink reference internal" href="#change-0fc136fefdb6fd903b2e0036636f6328">&#xB6;</a></span></p><p><span class="yiyi-st" id="yiyi-302">&#x53C2;&#x8003;&#x6587;&#x732E;&#xFF1A;<a class="reference external" href="http://www.sqlalchemy.org/trac/ticket/3599">&#xFF03;3599</a></span></p></li><li><p id="change-1.0.10-1"><span class="yiyi-st" id="yiyi-303"><span class="target" id="change-d64c29536ad61c8d456ffd6b38359a9f"><strong>[orm] [bug] </strong></span>&#x4FEE;&#x6B63;&#x4E86;&#x9519;&#x8BEF;&#xFF0C;&#x8FD9;&#x5B9E;&#x9645;&#x4E0A;&#x662F;&#x7531;&#x4E8E;<a class="reference external" href="http://www.sqlalchemy.org/trac/ticket/2714">&#xFF03;2714</a>&#x800C;&#x5728;&#x7248;&#x672C;0.8.0&#x548C;0.8.1&#x4E4B;&#x95F4;&#x53D1;&#x751F;&#x7684;&#x56DE;&#x5F52;&#x3002;</span><span class="yiyi-st" id="yiyi-304">&#x5F53;&#x201C;with_polymorphic&#x201D;&#x4E5F;&#x88AB;&#x4F7F;&#x7528;&#x65F6;&#xFF0C;&#x52A0;&#x5165;&#x7684;&#x6E34;&#x671B;&#x52A0;&#x8F7D;&#x9700;&#x8981;&#x8FDE;&#x63A5;&#x5230;&#x5B50;&#x7C7B;&#x7ED1;&#x5B9A;&#x5173;&#x7CFB;&#x7684;&#x60C5;&#x51B5;&#x5C06;&#x65E0;&#x6CD5;&#x4ECE;&#x6B63;&#x786E;&#x7684;&#x5B9E;&#x4F53;&#x4E2D;&#x52A0;&#x5165;&#x3002;<a class="changeset-link headerlink reference internal" href="#change-d64c29536ad61c8d456ffd6b38359a9f">&#xB6;</a></span></p><p><span class="yiyi-st" id="yiyi-305">&#x53C2;&#x8003;&#x6587;&#x732E;&#xFF1A;<a class="reference external" href="http://www.sqlalchemy.org/trac/ticket/3593">&#xFF03;3593</a></span></p></li><li><p id="change-1.0.10-2"><span class="yiyi-st" id="yiyi-306"><span class="target" id="change-8804e40dd20d4c09ef022fe4e8881288"><strong>[orm] [bug] </strong></span>&#x4FEE;&#x6B63;&#x4E86;&#x5F53;a&#x3002;&#x8BE5;&#x67E5;&#x8BE2;&#x5305;&#x542B;&#x5F3A;&#x5236;&#x5B50;&#x67E5;&#x8BE2;b&#x7684;&#x9650;&#x5236;/&#x504F;&#x79FB;&#x91CF;&#x6807;&#x51C6;&#x3002;&#x8BE5;&#x5173;&#x7CFB;&#x4F7F;&#x7528;&#x201C;&#x6B21;&#x8981;&#x201D;c&#x3002;&#x5173;&#x7CFB;&#x7684;&#x4E3B;&#x8FDE;&#x63A5;&#x662F;&#x6307;&#x4E0D;&#x662F;&#x4E3B;&#x952E;&#x7684;&#x4E00;&#x90E8;&#x5206;&#x7684;&#x5217;&#xFF0C;&#x6216;&#x8005;&#x662F;&#x5728;&#x4E0E;&#x7236;&#x8868;&#x7684;&#x4E3B;&#x952E;&#x5217;d&#x4E0D;&#x540C;&#x7684;&#x5C5E;&#x6027;&#x540D;&#x4E0B;&#x7684;&#x8FDE;&#x63A5;&#x7EE7;&#x627F;&#x5B50;&#x7C7B;&#x8868;&#x4E2D;&#x7684;PK&#x5217;&#x3002;&#x67E5;&#x8BE2;&#x5C06;&#x5EF6;&#x8FDF;primaryjoin&#x4E2D;&#x5B58;&#x5728;&#x7684;&#x5217;&#xFF0C;&#x901A;&#x5E38;&#x4E0D;&#x4F1A;&#x5305;&#x542B;&#x5728;load_only()&#x4E2D;&#xFF1B;&#x5B50;&#x67E5;&#x8BE2;&#x4E2D;&#x4E0D;&#x4F1A;&#x51FA;&#x73B0;&#x5FC5;&#x8981;&#x7684;&#x5217;&#x5E76;&#x4EA7;&#x751F;&#x65E0;&#x6548;&#x7684;SQL&#x3002;<a class="changeset-link headerlink reference internal" href="#change-8804e40dd20d4c09ef022fe4e8881288">&#xB6;</a></span></p><p><span class="yiyi-st" id="yiyi-307">&#x53C2;&#x8003;&#x6587;&#x732E;&#xFF1A;<a class="reference external" href="http://www.sqlalchemy.org/trac/ticket/3592">&#xFF03;3592</a></span></p></li><li><p id="change-1.0.10-3"><span class="yiyi-st" id="yiyi-308"><span class="target" id="change-b70e428b82707f753989ef9820a13e0d"><strong>[orm] [bug] </strong></span>A rare case which occurs when a <a class="reference internal" href="orm_session_api.html#sqlalchemy.orm.session.Session.rollback" title="sqlalchemy.orm.session.Session.rollback"><code class="xref py py-meth docutils literal"><span class="pre">Session.rollback()</span></code></a> fails in the scope of a <a class="reference internal" href="orm_session_api.html#sqlalchemy.orm.session.Session.flush" title="sqlalchemy.orm.session.Session.flush"><code class="xref py py-meth docutils literal"><span class="pre">Session.flush()</span></code></a> operation that&#x2019;s raising an exception, as has been observed in some MySQL SAVEPOINT cases, prevents the original database exception from being observed when it was emitted during flush, but only on Py2K because Py2K does not support exception chaining; on Py3K the originating exception is chained. </span><span class="yiyi-st" id="yiyi-309">&#x4F5C;&#x4E3A;&#x4E00;&#x79CD;&#x89E3;&#x51B3;&#x65B9;&#x6CD5;&#xFF0C;&#x5728;&#x6211;&#x4EEC;&#x7EE7;&#x7EED;&#x5F15;&#x53D1;&#x56DE;&#x6EDA;&#x8D77;&#x59CB;&#x5F02;&#x5E38;&#x4E4B;&#x524D;&#xFF0C;&#x5728;&#x8FD9;&#x4E2A;&#x7279;&#x5B9A;&#x60C5;&#x51B5;&#x4E0B;&#x4F1A;&#x53D1;&#x51FA;&#x8B66;&#x544A;&#xFF0C;&#x81F3;&#x5C11;&#x663E;&#x793A;&#x539F;&#x59CB;&#x6570;&#x636E;&#x5E93;&#x9519;&#x8BEF;&#x7684;&#x5B57;&#x7B26;&#x4E32;&#x6D88;&#x606F;&#x3002;<a class="changeset-link headerlink reference internal" href="#change-b70e428b82707f753989ef9820a13e0d">&#xB6;</a></span></p><p><span class="yiyi-st" id="yiyi-310">&#x53C2;&#x8003;&#x6587;&#x732E;&#xFF1A;<a class="reference external" href="http://www.sqlalchemy.org/trac/ticket/2696">&#xFF03;2696</a></span></p></li></ul></div><div class="section" id="change-1.0.10-orm-declarative"><h3><span class="yiyi-st" id="yiyi-311">orm declarative <a class="headerlink" href="#change-1.0.10-orm-declarative" title="Permalink to this headline">&#xB6;</a></span></h3><ul class="simple"><li><p id="change-1.0.10-4"><span class="yiyi-st" id="yiyi-312"><span class="target" id="change-9794c3c81c4b53dbb39703dcad6555dc"><strong>[bug] [orm] [declarative] </strong></span>Fixed bug where in Py2K a unicode literal would not be accepted as the string name of a class or other argument within declarative using <a class="reference internal" href="orm_relationship_api.html#sqlalchemy.orm.backref" title="sqlalchemy.orm.backref"><code class="xref py py-func docutils literal"><span class="pre">backref()</span></code></a> on <a class="reference internal" href="orm_relationship_api.html#sqlalchemy.orm.relationship" title="sqlalchemy.orm.relationship"><code class="xref py py-func docutils literal"><span class="pre">relationship()</span></code></a>. </span><span class="yiyi-st" id="yiyi-313">&#x62C9;&#x5C14;&#x8BF7;&#x6C42;&#x793C;&#x8C8C;Nils Philippsen&#x3002;<a class="changeset-link headerlink reference internal" href="#change-9794c3c81c4b53dbb39703dcad6555dc">&#xB6;</a></span></p><p><span class="yiyi-st" id="yiyi-314">&#x53C2;&#x8003;&#x6587;&#x732E;&#xFF1A;<a class="reference external" href="https://github.com/zzzeek/sqlalchemy/pull/212">&#x8BF7;&#x6C42;github&#xFF1A;212</a></span></p></li></ul></div><div class="section" id="change-1.0.10-sql"><h3><span class="yiyi-st" id="yiyi-315">SQL <a class="headerlink" href="#change-1.0.10-sql" title="Permalink to this headline">&#xB6; T0&gt;</a></span></h3><ul class="simple"><li><p id="change-1.0.10-5"><span class="yiyi-st" id="yiyi-316"><span class="target" id="change-4f37b666e375903193eb70016d8146b6"><strong>[sql] [feature] </strong></span>&#x589E;&#x52A0;&#x4E86;&#x5BF9;UPDATE&#x8BED;&#x53E5;&#x4E2D;&#x53C2;&#x6570;&#x6392;&#x5E8F;&#x7684;SET&#x5B50;&#x53E5;&#x7684;&#x652F;&#x6301;&#x3002;</span><span class="yiyi-st" id="yiyi-317">&#x901A;&#x8FC7;&#x5C06;<a class="reference internal" href="core_dml.html#sqlalchemy.sql.expression.update.params.preserve_parameter_order" title="sqlalchemy.sql.expression.update"><code class="xref py py-paramref docutils literal"><span class="pre">preserve_parameter_order</span></code></a>&#x6807;&#x5FD7;&#x4F20;&#x9012;&#x7ED9;&#x6838;&#x5FC3;<a class="reference internal" href="core_dml.html#sqlalchemy.sql.expression.Update" title="sqlalchemy.sql.expression.Update"><code class="xref py py-class docutils literal"><span class="pre">Update</span></code></a>&#x7ED3;&#x6784;&#x6216;&#x8005;&#x5C06;&#x5176;&#x6DFB;&#x52A0;&#x5230;<a class="reference internal" href="orm_query.html#sqlalchemy.orm.query.Query.update.params.update_args" title="sqlalchemy.orm.query.Query.update"><code class="xref py py-paramref docutils literal"><span class="pre">Query.update.update_args</span></code></a>&#x5B57;&#x5178;ORM&#x7EA7;&#x522B;&#xFF0C;&#x8FD8;&#x5C06;&#x53C2;&#x6570;&#x672C;&#x8EAB;&#x4F5C;&#x4E3A;2&#x5143;&#x7EC4;&#x5217;&#x8868;&#x4F20;&#x9012;&#x3002;</span><span class="yiyi-st" id="yiyi-318">&#x611F;&#x8C22;Gorka Eguileor&#x8FDB;&#x884C;&#x5B9E;&#x65BD;&#x548C;&#x6D4B;&#x8BD5;&#x3002;</span></p><div class="admonition seealso"><p class="first admonition-title"><span class="yiyi-st" id="yiyi-319">&#x4E5F;&#x53EF;&#x4EE5;&#x770B;&#x770B;</span></p><p class="last"><span class="yiyi-st" id="yiyi-320"><a class="reference internal" href="core_tutorial.html#updates-order-parameters"><span>Parameter-Ordered Updates</span></a></span></p></div><span class="yiyi-st" id="yiyi-322"> <a class="changeset-link headerlink reference internal" href="#change-4f37b666e375903193eb70016d8146b6">&#xB6;</a></span><p><span class="yiyi-st" id="yiyi-321">&#x53C2;&#x8003;&#x6587;&#x732E;&#xFF1A;<a class="reference external" href="https://github.com/zzzeek/sqlalchemy/pull/200">&#x8BF7;&#x6C42;github&#xFF1A;200</a></span></p></li><li><p id="change-1.0.10-6"><span class="yiyi-st" id="yiyi-323"><span class="target" id="change-88ed0853e830fdd4b502a42c53f9834a"><strong>[sql] [bug] </strong></span>Fixed issue within the <a class="reference internal" href="core_dml.html#sqlalchemy.sql.expression.Insert.from_select" title="sqlalchemy.sql.expression.Insert.from_select"><code class="xref py py-meth docutils literal"><span class="pre">Insert.from_select()</span></code></a> construct whereby the <a class="reference internal" href="core_selectable.html#sqlalchemy.sql.expression.Select" title="sqlalchemy.sql.expression.Select"><code class="xref py py-class docutils literal"><span class="pre">Select</span></code></a> construct would have its <code class="docutils literal"><span class="pre">._raw_columns</span></code> collection mutated in-place when compiling the <a class="reference internal" href="core_dml.html#sqlalchemy.sql.expression.Insert" title="sqlalchemy.sql.expression.Insert"><code class="xref py py-class docutils literal"><span class="pre">Insert</span></code></a> construct, when the target <a class="reference internal" href="core_metadata.html#sqlalchemy.schema.Table" title="sqlalchemy.schema.Table"><code class="xref py py-class docutils literal"><span class="pre">Table</span></code></a> has Python-side defaults. </span><span class="yiyi-st" id="yiyi-324">&#x5728;&#x7F16;&#x8BD1;<a class="reference internal" href="core_dml.html#sqlalchemy.sql.expression.Insert" title="sqlalchemy.sql.expression.Insert"><code class="xref py py-class docutils literal"><span class="pre">Insert</span></code></a>&#x4E4B;&#x540E;&#xFF0C;<a class="reference internal" href="core_selectable.html#sqlalchemy.sql.expression.Select" title="sqlalchemy.sql.expression.Select"><code class="xref py py-class docutils literal"><span class="pre">Select</span></code></a>&#x7ED3;&#x6784;&#x5C06;&#x72EC;&#x7ACB;&#x7F16;&#x8BD1;&#x51FA;&#x73B0;&#x9519;&#x8BEF;&#x7684;&#x5217;&#xFF0C;&#x5E76;&#x4E14;<a class="reference internal" href="core_dml.html#sqlalchemy.sql.expression.Insert" title="sqlalchemy.sql.expression.Insert"><code class="xref py py-class docutils literal"><span class="pre">Insert</span></code></a>&#x8BED;&#x53E5;&#x672C;&#x8EAB;&#x4F1A;&#x5728;&#x4E00;&#x79D2;&#x949F;&#x540E;&#x5931;&#x8D25;&#x7531;&#x4E8E;&#x91CD;&#x590D;&#x7684;&#x7ED1;&#x5B9A;&#x53C2;&#x6570;&#x800C;&#x5BFC;&#x81F4;&#x7684;&#x7F16;&#x8BD1;&#x5C1D;&#x8BD5;&#x3002;<a class="changeset-link headerlink reference internal" href="#change-88ed0853e830fdd4b502a42c53f9834a">&#xB6;</a></span></p><p><span class="yiyi-st" id="yiyi-325">&#x53C2;&#x8003;&#x6587;&#x732E;&#xFF1A;<a class="reference external" href="http://www.sqlalchemy.org/trac/ticket/3603">&#xFF03;3603</a></span></p></li><li><p id="change-1.0.10-7"><span class="yiyi-st" id="yiyi-326"><span class="target" id="change-cbe154666f524c9aa07e3106e8574c65"><strong>[sql] [bug] [postgresql] </strong></span>Fixed bug where CREATE TABLE with a no-column table, but a constraint such as a CHECK constraint would render an erroneous comma in the definition; this scenario can occur such as with a Postgresql INHERITS table that has no columns of its own.<a class="changeset-link headerlink reference internal" href="#change-cbe154666f524c9aa07e3106e8574c65">&#xB6;</a></span></p><p><span class="yiyi-st" id="yiyi-327">&#x53C2;&#x8003;&#x6587;&#x732E;&#xFF1A;<a class="reference external" href="http://www.sqlalchemy.org/trac/ticket/3598">&#xFF03;3598</a></span></p></li></ul></div><div class="section" id="change-1.0.10-postgresql"><h3><span class="yiyi-st" id="yiyi-328">&#x7684;PostgreSQL <a class="headerlink" href="#change-1.0.10-postgresql" title="Permalink to this headline">&#xB6; T0&gt;</a></span></h3><ul class="simple"><li><p id="change-1.0.10-8"><span class="yiyi-st" id="yiyi-329"><span class="target" id="change-fdd814f30b8ba213274656c1948795cb"><strong>[postgresql] [bug] </strong></span>Fixed issue where the &#x201C;FOR UPDATE OF&#x201D; Postgresql-specific SELECT modifier would fail if the referred table had a schema qualifier; PG needs the schema name to be omitted. </span><span class="yiyi-st" id="yiyi-330">&#x62C9;&#x8BF7;&#x6C42;&#x793C;&#x8C8C;&#x6234;&#x5B89;&#x5A1C;&#x514B;&#x62C9;&#x514B;&#x3002;<a class="changeset-link headerlink reference internal" href="#change-fdd814f30b8ba213274656c1948795cb">&#xB6;</a></span></p><p><span class="yiyi-st" id="yiyi-331">&#x53C2;&#x8003;&#x6587;&#x732E;&#xFF1A;<a class="reference external" href="http://www.sqlalchemy.org/trac/ticket/3573">&#xFF03;3573</a>&#xFF0C;<a class="reference external" href="https://github.com/zzzeek/sqlalchemy/pull/216">&#x8BF7;&#x6C42;github&#xFF1A;216</a></span></p></li><li><p id="change-1.0.10-9"><span class="yiyi-st" id="yiyi-332"><span class="target" id="change-ae0c216328001852e3c068b6bef5438b"><strong>[postgresql] [bug] </strong></span>Fixed bug where some varieties of SQL expression passed to the &#x201C;where&#x201D; clause of <a class="reference internal" href="dialects_postgresql.html#sqlalchemy.dialects.postgresql.ExcludeConstraint" title="sqlalchemy.dialects.postgresql.ExcludeConstraint"><code class="xref py py-class docutils literal"><span class="pre">postgresql.ExcludeConstraint</span></code></a> would fail to be accepted correctly. </span><span class="yiyi-st" id="yiyi-333">&#x62C9;&#x8BF7;&#x6C42;&#x793C;&#x8C8C;aisch&#x3002;<a class="changeset-link headerlink reference internal" href="#change-ae0c216328001852e3c068b6bef5438b">&#xB6;</a></span></p><p><span class="yiyi-st" id="yiyi-334">&#x53C2;&#x8003;&#x6587;&#x732E;&#xFF1A;<a class="reference external" href="https://github.com/zzzeek/sqlalchemy/pull/215">&#x8BF7;&#x6C42;github&#xFF1A;215</a></span></p></li><li><p id="change-1.0.10-10"><span class="yiyi-st" id="yiyi-335"><span class="target" id="change-d0267c6d6507bf37598b0250b57cd5f7"><strong>[postgresql] [bug] </strong></span>&#x4FEE;&#x590D;&#x4E86;<a class="reference internal" href="dialects_postgresql.html#sqlalchemy.dialects.postgresql.INTERVAL" title="sqlalchemy.dialects.postgresql.INTERVAL"><code class="xref py py-class docutils literal"><span class="pre">postgresql.INTERVAL</span></code></a>&#x7684;<code class="docutils literal"><span class="pre">.python_type</span></code>&#x5C5E;&#x6027;&#x4EE5;&#x8FD4;&#x56DE;<code class="docutils literal"><span class="pre">datetime.timedelta</span></code>&#x4E0E;<code class="xref py py-obj docutils literal"><span class="pre">types.Interval.python_type</span></code>&#x76F8;&#x540C;&#xFF0C;&#x800C;&#x4E0D;&#x662F;&#x5F15;&#x53D1;<code class="docutils literal"><span class="pre">NotImplementedError</span></code>&#x3002;<a class="changeset-link headerlink reference internal" href="#change-d0267c6d6507bf37598b0250b57cd5f7">&#xB6;</a></span></p><p><span class="yiyi-st" id="yiyi-336">&#x53C2;&#x8003;&#x6587;&#x732E;&#xFF1A;<a class="reference external" href="http://www.sqlalchemy.org/trac/ticket/3571">&#xFF03;3571</a></span></p></li></ul></div><div class="section" id="change-1.0.10-mysql"><h3><span class="yiyi-st" id="yiyi-337">MySQL&#x7684;<a class="headerlink" href="#change-1.0.10-mysql" title="Permalink to this headline">&#xB6; T0&gt;</a></span></h3><ul class="simple"><li><p id="change-1.0.10-11"><span class="yiyi-st" id="yiyi-338"><span class="target" id="change-6974522ee331218a2318e6b0dc52bebd"><strong>[mysql] [bug] </strong></span>Fixed bug in MySQL reflection where the &#x201C;fractional sections portion&#x201D; of the <a class="reference internal" href="dialects_mysql.html#sqlalchemy.dialects.mysql.DATETIME" title="sqlalchemy.dialects.mysql.DATETIME"><code class="xref py py-class docutils literal"><span class="pre">mysql.DATETIME</span></code></a>, <a class="reference internal" href="dialects_mysql.html#sqlalchemy.dialects.mysql.TIMESTAMP" title="sqlalchemy.dialects.mysql.TIMESTAMP"><code class="xref py py-class docutils literal"><span class="pre">mysql.TIMESTAMP</span></code></a> and <a class="reference internal" href="dialects_mysql.html#sqlalchemy.dialects.mysql.TIME" title="sqlalchemy.dialects.mysql.TIME"><code class="xref py py-class docutils literal"><span class="pre">mysql.TIME</span></code></a> types would be incorrectly placed into the <code class="docutils literal"><span class="pre">timezone</span></code> attribute, which is unused by MySQL, instead of the <code class="docutils literal"><span class="pre">fsp</span></code> attribute.<a class="changeset-link headerlink reference internal" href="#change-6974522ee331218a2318e6b0dc52bebd">&#xB6;</a></span></p><p><span class="yiyi-st" id="yiyi-339">&#x53C2;&#x8003;&#x6587;&#x732E;&#xFF1A;<a class="reference external" href="http://www.sqlalchemy.org/trac/ticket/3602">&#xFF03;3602</a></span></p></li></ul></div><div class="section" id="change-1.0.10-mssql"><h3><span class="yiyi-st" id="yiyi-340">MSSQL <a class="headerlink" href="#change-1.0.10-mssql" title="Permalink to this headline">&#xB6; T0&gt;</a></span></h3><ul class="simple"><li><p id="change-1.0.10-12"><span class="yiyi-st" id="yiyi-341"><span class="target" id="change-be7c80f619f565c72db723a14bcbeba8"><strong>[mssql] [bug] </strong></span>&#x5C06;&#x9519;&#x8BEF;&#x201C;20006&#xFF1A;&#x5199;&#x5165;&#x670D;&#x52A1;&#x5668;&#x5931;&#x8D25;&#x201D;&#x6DFB;&#x52A0;&#x5230;pymssql&#x9A71;&#x52A8;&#x7A0B;&#x5E8F;&#x7684;&#x65AD;&#x5F00;&#x8FDE;&#x63A5;&#x9519;&#x8BEF;&#x5217;&#x8868;&#x4E2D;&#xFF0C;&#x56E0;&#x4E3A;&#x5DF2;&#x7ECF;&#x53D1;&#x73B0;&#x8FD9;&#x4F1A;&#x5BFC;&#x81F4;&#x8FDE;&#x63A5;&#x4E0D;&#x53EF;&#x7528;&#x3002;<a class="changeset-link headerlink reference internal" href="#change-be7c80f619f565c72db723a14bcbeba8">&#xB6; T2&gt;</a></span></p><p><span class="yiyi-st" id="yiyi-342">&#x53C2;&#x8003;&#x6587;&#x732E;&#xFF1A;<a class="reference external" href="http://www.sqlalchemy.org/trac/ticket/3585">&#xFF03;3585</a></span></p></li><li><p id="change-1.0.10-13"><span class="yiyi-st" id="yiyi-343"><span class="target" id="change-ee5c541eb9c67a758fa50b2406d4ff75"><strong>[mssql] [bug] </strong></span>&#x5982;&#x679C;SQL&#x670D;&#x52A1;&#x5668;&#x4ECE;DATE&#x6216;TIME&#x5217;&#x4E2D;&#x8FD4;&#x56DE;&#x65E0;&#x6548;&#x7684;&#x65E5;&#x671F;&#x6216;&#x65F6;&#x95F4;&#x683C;&#x5F0F;&#xFF0C;&#x800C;&#x4E0D;&#x662F;&#x5931;&#x8D25;&#x5E76;&#x8FD4;&#x56DE;&#x4E00;&#x4E2A;NoneType&#x9519;&#x8BEF;&#xFF0C;&#x5219;&#x4F1A;&#x5F15;&#x53D1;&#x4E00;&#x4E2A;&#x63CF;&#x8FF0;&#x6027;&#x7684;ValueError&#x3002;</span><span class="yiyi-st" id="yiyi-344">&#x8BF7;&#x6C42;&#x793C;&#x8C8C;Ed Avis&#x3002;<a class="changeset-link headerlink reference internal" href="#change-ee5c541eb9c67a758fa50b2406d4ff75">&#xB6;</a></span></p><p><span class="yiyi-st" id="yiyi-345">&#x53C2;&#x8003;&#x6587;&#x732E;&#xFF1A;<a class="reference external" href="https://github.com/zzzeek/sqlalchemy/pull/206">&#x8BF7;&#x6C42;github&#xFF1A;206</a></span></p></li><li><p id="change-1.0.10-14"><span class="yiyi-st" id="yiyi-346"><span class="target" id="change-da04d72c61e38ea860c327ffdd4d41e2"><strong>[mssql] [bug] </strong></span>Fixed issue where DDL generated for the MSSQL types DATETIME2, TIME and DATETIMEOFFSET with a precision of &#x201C;zero&#x201D; would not generate the precision field. </span><span class="yiyi-st" id="yiyi-347">&#x8BF7;&#x6C42;&#x793C;&#x8C8C;Jacobo de Vera&#x3002;<a class="changeset-link headerlink reference internal" href="#change-da04d72c61e38ea860c327ffdd4d41e2">&#xB6;</a></span></p><p><span class="yiyi-st" id="yiyi-348">&#x53C2;&#x8003;&#x6587;&#x732E;&#xFF1A;<a class="reference external" href="https://github.com/zzzeek/sqlalchemy/pull/213">&#x8BF7;&#x6C42;github&#xFF1A;213</a></span></p></li></ul></div><div class="section" id="change-1.0.10-misc"><h3><span class="yiyi-st" id="yiyi-349">&#x6742;&#x9879;<a class="headerlink" href="#change-1.0.10-misc" title="Permalink to this headline">&#xB6; T0&gt;</a></span></h3><ul class="simple"><li><p id="change-1.0.10-15"><span class="yiyi-st" id="yiyi-350"><span class="target" id="change-1fe7359b44816908ec7c979731f2d99f"><strong>[bug] [ext] </strong></span>Added support for the <code class="docutils literal"><span class="pre">dict.pop()</span></code> and <code class="docutils literal"><span class="pre">dict.popitem()</span></code> methods to the <a class="reference internal" href="orm_extensions_mutable.html#sqlalchemy.ext.mutable.MutableDict" title="sqlalchemy.ext.mutable.MutableDict"><code class="xref py py-class docutils literal"><span class="pre">mutable.MutableDict</span></code></a> class.<a class="changeset-link headerlink reference internal" href="#change-1fe7359b44816908ec7c979731f2d99f">&#xB6;</a></span></p><p><span class="yiyi-st" id="yiyi-351">&#x53C2;&#x8003;&#x6587;&#x732E;&#xFF1A;<a class="reference external" href="http://www.sqlalchemy.org/trac/ticket/3605">&#xFF03;3605</a></span></p></li><li><p id="change-1.0.10-16"><span class="yiyi-st" id="yiyi-352"><span class="target" id="change-19c50f7c3ae4d9fc7e580152f196f68d"><strong>[bug] [py3k] </strong></span>Updates to internal getargspec() calls, some py36-related fixture updates, and alterations to two iterators to &#x201C;return&#x201D; instead of raising StopIteration, to allow tests to pass without errors or warnings on Py3.5, Py3.6, pull requests courtesy Jacob MacDonald, Luri de Silvio, and Phil Jones.<a class="changeset-link headerlink reference internal" href="#change-19c50f7c3ae4d9fc7e580152f196f68d">&#xB6;</a></span></p><p><span class="yiyi-st" id="yiyi-353">&#x5F15;&#x7528;&#xFF1A;<a class="reference external" href="https://github.com/zzzeek/sqlalchemy/pull/210">&#x8BF7;&#x6C42;github&#xFF1A;210</a>&#xFF0C;<a class="reference external" href="https://github.com/zzzeek/sqlalchemy/pull/218">&#x8BF7;&#x6C42;github&#xFF1A;218</a>&#xFF0C;<a class="reference external" href="https://github.com/zzzeek/sqlalchemy/pull/211">&#x8BF7;&#x6C42;github&#xFF1A;211</a></span></p></li><li><p id="change-1.0.10-17"><span class="yiyi-st" id="yiyi-354"><span class="target" id="change-8403645e6ecab28e501dbfb4d00224fd"><strong>[bug] [ext] </strong></span>Fixed an issue in baked queries where the .get() method, used either directly or within lazy loads, didn&#x2019;t consider the mapper&#x2019;s &#x201C;get clause&#x201D; as part of the cache key, causing bound parameter mismatches if the clause got re-generated. </span><span class="yiyi-st" id="yiyi-355">&#x8BE5;&#x5B50;&#x53E5;&#x7531;mappers&#x5B9E;&#x65F6;&#x7F13;&#x5B58;&#xFF0C;&#x4F46;&#x5728;&#x9AD8;&#x5EA6;&#x5E76;&#x53D1;&#x7684;&#x60C5;&#x51B5;&#x4E0B;&#xFF0C;&#x7B2C;&#x4E00;&#x6B21;&#x8BBF;&#x95EE;&#x65F6;&#x53EF;&#x80FD;&#x4F1A;&#x591A;&#x6B21;&#x751F;&#x6210;&#x3002;<a class="changeset-link headerlink reference internal" href="#change-8403645e6ecab28e501dbfb4d00224fd">&#xB6;</a></span></p><p><span class="yiyi-st" id="yiyi-356">&#x53C2;&#x8003;&#x6587;&#x732E;&#xFF1A;<a class="reference external" href="http://www.sqlalchemy.org/trac/ticket/3597">&#xFF03;3597</a></span></p></li><li><p id="change-1.0.10-18"><span class="yiyi-st" id="yiyi-357"><span class="target" id="change-679c9f0f8241f2d807a6d969b04062ac"><strong>[tests] [change] </strong></span> ORM&#x548C;Core&#x6559;&#x7A0B;&#x59CB;&#x7EC8;&#x5904;&#x4E8E;doctest&#x683C;&#x5F0F;&#xFF0C;&#x73B0;&#x5728;&#x5728;Python 2&#x548C;Python 3&#x7684;&#x666E;&#x901A;&#x5355;&#x5143;&#x6D4B;&#x8BD5;&#x5957;&#x4EF6;&#x4E2D;&#x8FD0;&#x884C;&#x3002;<a class="changeset-link headerlink reference internal" href="#change-679c9f0f8241f2d807a6d969b04062ac"> T2&gt;</a></span></p><p></p></li></ul></div></div><div class="section" id="change-1.0.9"><h2><span class="yiyi-st" id="yiyi-359">1.0.9 <a class="headerlink" href="#change-1.0.9" title="Permalink to this headline">&#xB6; T0&gt;</a></span></h2><span class="yiyi-st" id="yiyi-397">&#x53D1;&#x5E03;&#x65E5;&#x671F;&#xFF1A;2015&#x5E74;10&#x6708;20&#x65E5;</span><div class="section" id="change-1.0.9-orm"><h3><span class="yiyi-st" id="yiyi-360">ORM <a class="headerlink" href="#change-1.0.9-orm" title="Permalink to this headline">&#xB6; T0&gt;</a></span></h3><ul class="simple"><li><p id="change-1.0.9-0"><span class="yiyi-st" id="yiyi-361"><span class="target" id="change-036a3c5dc5a79efaf54c986efe1de824"><strong>[orm] [feature] </strong></span>&#x589E;&#x52A0;&#x4E86;&#x65B0;&#x7684;&#x65B9;&#x6CD5;<a class="reference internal" href="orm_query.html#sqlalchemy.orm.query.Query.one_or_none" title="sqlalchemy.orm.query.Query.one_or_none"><code class="xref py py-meth docutils literal"><span class="pre">Query.one_or_none()</span></code></a>&#xFF1B;&#x4E0E;<a class="reference internal" href="orm_query.html#sqlalchemy.orm.query.Query.one" title="sqlalchemy.orm.query.Query.one"><code class="xref py py-meth docutils literal"><span class="pre">Query.one()</span></code></a>&#x76F8;&#x540C;&#xFF0C;&#x4F46;&#x5982;&#x679C;&#x672A;&#x627E;&#x5230;&#x4EFB;&#x4F55;&#x884C;&#xFF0C;&#x5219;&#x8FD4;&#x56DE;None&#x3002;</span><span class="yiyi-st" id="yiyi-362">&#x8BF7;&#x6C42;&#x793C;&#x8C8C;esiegerman&#x3002;<a class="changeset-link headerlink reference internal" href="#change-036a3c5dc5a79efaf54c986efe1de824">&#xB6;</a></span></p><p><span class="yiyi-st" id="yiyi-363">&#x53C2;&#x8003;&#x6587;&#x732E;&#xFF1A;<a class="reference external" href="https://github.com/zzzeek/sqlalchemy/pull/201">&#x8BF7;&#x6C42;github&#xFF1A;201</a></span></p></li><li><p id="change-1.0.9-1"><span class="yiyi-st" id="yiyi-364"><span class="target" id="change-60963a199ad3f0a534b9a82b4b2fae67"><strong>[orm] [bug] [postgresql] </strong></span>Fixed regression in 1.0 where new feature of using &#x201C;executemany&#x201D; for UPDATE statements in the ORM (e.g. <a class="reference internal" href="migration_10.html#feature-updatemany"><span>UPDATE statements are now batched with executemany() in a flush</span></a>) would break on Postgresql and other RETURNING backends when using server-side version generation schemes, as the server side value is retrieved via RETURNING which is not supported with executemany.<a class="changeset-link headerlink reference internal" href="#change-60963a199ad3f0a534b9a82b4b2fae67">&#xB6;</a></span></p><p><span class="yiyi-st" id="yiyi-365">&#x53C2;&#x8003;&#x6587;&#x732E;&#xFF1A;<a class="reference external" href="http://www.sqlalchemy.org/trac/ticket/3556">&#xFF03;3556</a></span></p></li><li><p id="change-1.0.9-2"><span class="yiyi-st" id="yiyi-366"><span class="target" id="change-8afb9b23354a19cca287e476b397cd10"><strong>[orm] [bug] </strong></span>Fixed rare TypeError which could occur when stringifying certain kinds of internal column loader options within internal logging.<a class="changeset-link headerlink reference internal" href="#change-8afb9b23354a19cca287e476b397cd10">&#xB6;</a></span></p><p><span class="yiyi-st" id="yiyi-367">&#x53C2;&#x8003;&#x6587;&#x732E;&#xFF1A;<a class="reference external" href="http://www.sqlalchemy.org/trac/ticket/3539">&#xFF03;3539</a></span></p></li><li><p id="change-1.0.9-3"><span class="yiyi-st" id="yiyi-368"><span class="target" id="change-28c1d20d00a8faa94ad7c40b4b239a48"><strong>[orm] [bug] </strong></span>Fixed bug in <a class="reference internal" href="orm_session_api.html#sqlalchemy.orm.session.Session.bulk_save_objects" title="sqlalchemy.orm.session.Session.bulk_save_objects"><code class="xref py py-meth docutils literal"><span class="pre">Session.bulk_save_objects()</span></code></a> where a mapped column that had some kind of &#x201C;fetch on update&#x201D; value and was not locally present in the given object would cause an AttributeError within the operation.<a class="changeset-link headerlink reference internal" href="#change-28c1d20d00a8faa94ad7c40b4b239a48">&#xB6;</a></span></p><p><span class="yiyi-st" id="yiyi-369">&#x53C2;&#x8003;&#x6587;&#x732E;&#xFF1A;<a class="reference external" href="http://www.sqlalchemy.org/trac/ticket/3525">&#xFF03;3525</a></span></p></li><li><p id="change-1.0.9-4"><span class="yiyi-st" id="yiyi-370"><span class="target" id="change-05874c2cf9d4c41757ed8ac0c488bdec"><strong>[orm] [bug] </strong></span>Fixed 1.0 regression where the &#x201C;noload&#x201D; loader strategy would fail to function for a many-to-one relationship. </span><span class="yiyi-st" id="yiyi-371">&#x52A0;&#x8F7D;&#x5668;&#x4F7F;&#x7528;API&#x200B;&#x200B;&#x5C06;&#x201C;&#x65E0;&#x201D;&#x653E;&#x5165;&#x4E0D;&#x518D;&#x5B9E;&#x9645;&#x5199;&#x5165;&#x503C;&#x7684;&#x5B57;&#x5178;&#x4E2D;&#xFF1B;&#x8FD9;&#x662F;<a class="reference external" href="http://www.sqlalchemy.org/trac/ticket/3061">&#xFF03;3061</a>&#x3002;<a class="changeset-link headerlink reference internal" href="#change-05874c2cf9d4c41757ed8ac0c488bdec">&#xB6;</a>&#x7684;&#x526F;&#x4F5C;&#x7528;</span></p><p><span class="yiyi-st" id="yiyi-372">&#x53C2;&#x8003;&#x6587;&#x732E;&#xFF1A;<a class="reference external" href="http://www.sqlalchemy.org/trac/ticket/3510">&#xFF03;3510</a></span></p></li></ul></div><div class="section" id="change-1.0.9-sql"><h3><span class="yiyi-st" id="yiyi-373">SQL <a class="headerlink" href="#change-1.0.9-sql" title="Permalink to this headline">&#xB6; T0&gt;</a></span></h3><ul class="simple"><li><p id="change-1.0.9-5"><span class="yiyi-st" id="yiyi-374"><span class="target" id="change-eb651eba6b167e1485192d8bd8f43bd6"><strong>[sql] [bug] </strong></span>Fixed regression in 1.0-released default-processor for multi-VALUES insert statement, <a class="reference external" href="http://www.sqlalchemy.org/trac/ticket/3288">#3288</a>, where the column type for the default-holding column would not be propagated to the compiled statement in the case where the default was being used, leading to bind-level type handlers not being invoked.<a class="changeset-link headerlink reference internal" href="#change-eb651eba6b167e1485192d8bd8f43bd6">&#xB6;</a></span></p><p><span class="yiyi-st" id="yiyi-375">&#x53C2;&#x8003;&#x6587;&#x732E;&#xFF1A;<a class="reference external" href="http://www.sqlalchemy.org/trac/ticket/3520">&#xFF03;3520</a></span></p></li></ul></div><div class="section" id="change-1.0.9-postgresql"><h3><span class="yiyi-st" id="yiyi-376">&#x7684;PostgreSQL <a class="headerlink" href="#change-1.0.9-postgresql" title="Permalink to this headline">&#xB6; T0&gt;</a></span></h3><ul class="simple"><li><p id="change-1.0.9-6"><span class="yiyi-st" id="yiyi-377"><span class="target" id="change-6bf7a5266dbb0b3f26b74d2cd173cd4d"><strong>[postgresql] [bug] </strong></span>&#x5BF9;1.0.6&#x4E2D;&#x53D1;&#x5E03;&#x7684;&#x53CD;&#x6620;&#x5B58;&#x50A8;&#x9009;&#x9879;&#x548C;&#x4F7F;&#x7528;<a class="reference external" href="http://www.sqlalchemy.org/trac/ticket/3455">&#xFF03;3455</a>&#x7684;&#x65B0;Postgresql&#x529F;&#x80FD;&#x8FDB;&#x884C;&#x8C03;&#x6574;&#xFF0C;&#x4EE5;&#x7981;&#x7528;Postgresql&#x7248;&#x672C;&#x7684;&#x529F;&#x80FD;&lt; 8.2&#x672A;&#x63D0;&#x4F9B;<code class="docutils literal"><span class="pre">reloptions</span></code>&#x680F;&#x7684;&#x5730;&#x65B9;&#xFF1B;&#x8FD9;&#x5141;&#x8BB8;Amazon Redshift&#x518D;&#x6B21;&#x8FD0;&#x884C;&#xFF0C;&#x56E0;&#x4E3A;&#x5B83;&#x57FA;&#x4E8E;PostgreSQL&#x7684;8.0.x&#x7248;&#x672C;&#x3002;</span><span class="yiyi-st" id="yiyi-378">&#x4FEE;&#x6B63;Pete Hollobon&#x63D0;&#x4F9B;&#x7684;&#x793C;&#x8C8C;&#x3002;<a class="changeset-link headerlink reference internal" href="#change-6bf7a5266dbb0b3f26b74d2cd173cd4d">&#xB6;</a></span></p><p><span class="yiyi-st" id="yiyi-379">&#x53C2;&#x8003;&#x6587;&#x732E;&#xFF1A;<a class="reference external" href="https://github.com/zzzeek/sqlalchemy/pull/190">&#x8BF7;&#x6C42;github&#xFF1A;190</a></span></p></li></ul></div><div class="section" id="change-1.0.9-oracle"><h3><span class="yiyi-st" id="yiyi-380">&#x9884;&#x8A00;<a class="headerlink" href="#change-1.0.9-oracle" title="Permalink to this headline">&#xB6; T0&gt;</a></span></h3><ul class="simple"><li><p id="change-1.0.9-7"><span class="yiyi-st" id="yiyi-381"><span class="target" id="change-e892caf5c83c911133f4fe685a6b90c9"><strong>[oracle] [bug] [py3k] </strong></span>Fixed support for cx_Oracle version 5.2, which was tripping up SQLAlchemy&#x2019;s version detection under Python 3 and inadvertently not using the correct unicode mode for Python 3. </span><span class="yiyi-st" id="yiyi-382">&#x8FD9;&#x4F1A;&#x5BFC;&#x81F4;&#x7ED1;&#x5B9A;&#x53D8;&#x91CF;&#x88AB;&#x9519;&#x8BEF;&#x5730;&#x89E3;&#x91CA;&#x4E3A;NULL&#xFF0C;&#x5E76;&#x4E14;&#x884C;&#x65E0;&#x58F0;&#x65E0;&#x606F;&#x5730;&#x8FD4;&#x56DE;&#x3002;<a class="changeset-link headerlink reference internal" href="#change-e892caf5c83c911133f4fe685a6b90c9">&#xB6;</a></span></p><p><span class="yiyi-st" id="yiyi-383">&#x8FD9;&#x4E2A;&#x6539;&#x53D8;&#x4E5F;&#x88AB;<strong>backported</strong>&#x6539;&#x4E3A;&#xFF1A;0.9.11</span></p><p><span class="yiyi-st" id="yiyi-384">&#x53C2;&#x8003;&#x6587;&#x732E;&#xFF1A;<a class="reference external" href="http://www.sqlalchemy.org/trac/ticket/3491">&#xFF03;3491</a></span></p></li><li><p id="change-1.0.9-8"><span class="yiyi-st" id="yiyi-385"><span class="target" id="change-f35d719e83c23631bc4bce923fa7c168"><strong>[oracle] [bug] </strong></span>Fixed bug in Oracle dialect where reflection of tables and other symbols with names quoted to force all-lower-case would not be identified properly in reflection queries. </span><span class="yiyi-st" id="yiyi-386"><a class="reference internal" href="core_sqlelement.html#sqlalchemy.sql.elements.quoted_name" title="sqlalchemy.sql.elements.quoted_name"><code class="xref py py-class docutils literal"><span class="pre">quoted_name</span></code></a>&#x7ED3;&#x6784;&#x73B0;&#x5728;&#x5E94;&#x7528;&#x4E8E;&#x4F20;&#x5165;&#x7684;&#x7B26;&#x53F7;&#x540D;&#x79F0;&#xFF0C;&#x8BE5;&#x540D;&#x79F0;&#x5728;&#x201C;name normalize&#x201D;&#x8FC7;&#x7A0B;&#x4E2D;&#x68C0;&#x6D4B;&#x4E3A;&#x5F3A;&#x5236;&#x5168;&#x90E8;&#x5C0F;&#x5199;&#x3002;<a class="changeset-link headerlink reference internal" href="#change-f35d719e83c23631bc4bce923fa7c168">&#xB6;</a></span></p><p><span class="yiyi-st" id="yiyi-387">&#x53C2;&#x8003;&#x6587;&#x732E;&#xFF1A;<a class="reference external" href="http://www.sqlalchemy.org/trac/ticket/3548">&#xFF03;3548</a></span></p></li></ul></div><div class="section" id="change-1.0.9-misc"><h3><span class="yiyi-st" id="yiyi-388">&#x6742;&#x9879;<a class="headerlink" href="#change-1.0.9-misc" title="Permalink to this headline">&#xB6; T0&gt;</a></span></h3><ul class="simple"><li><p id="change-1.0.9-9"><span class="yiyi-st" id="yiyi-389"><span class="target" id="change-0e6786c673e336a819a7d69ab3e4e94f"><strong>[feature] [ext] </strong></span>Added the <a class="reference internal" href="orm_extensions_associationproxy.html#sqlalchemy.ext.associationproxy.AssociationProxy.params.info" title="sqlalchemy.ext.associationproxy.AssociationProxy"><code class="xref py py-paramref docutils literal"><span class="pre">AssociationProxy.info</span></code></a> parameter to the <a class="reference internal" href="orm_extensions_associationproxy.html#sqlalchemy.ext.associationproxy.AssociationProxy" title="sqlalchemy.ext.associationproxy.AssociationProxy"><code class="xref py py-class docutils literal"><span class="pre">AssociationProxy</span></code></a> constructor, to suit the <a class="reference internal" href="orm_extensions_associationproxy.html#sqlalchemy.ext.associationproxy.AssociationProxy.info" title="sqlalchemy.ext.associationproxy.AssociationProxy.info"><code class="xref py py-attr docutils literal"><span class="pre">AssociationProxy.info</span></code></a> accessor that was added in <a class="reference external" href="http://www.sqlalchemy.org/trac/ticket/2971">#2971</a>. </span><span class="yiyi-st" id="yiyi-390">&#x8FD9;&#x662F;&#x53EF;&#x80FD;&#x7684;&#xFF0C;&#x56E0;&#x4E3A;<a class="reference internal" href="orm_extensions_associationproxy.html#sqlalchemy.ext.associationproxy.AssociationProxy" title="sqlalchemy.ext.associationproxy.AssociationProxy"><code class="xref py py-class docutils literal"><span class="pre">AssociationProxy</span></code></a>&#x662F;&#x663E;&#x5F0F;&#x6784;&#x9020;&#x7684;&#xFF0C;&#x4E0E;&#x901A;&#x8FC7;&#x88C5;&#x9970;&#x5668;&#x8BED;&#x6CD5;&#x9690;&#x5F0F;&#x6784;&#x9020;&#x7684;&#x6DF7;&#x5408;&#x4E0D;&#x540C;&#x3002;<a class="changeset-link headerlink reference internal" href="#change-0e6786c673e336a819a7d69ab3e4e94f">&#xB6;</a></span></p><p><span class="yiyi-st" id="yiyi-391">&#x53C2;&#x8003;&#x6587;&#x732E;&#xFF1A;<a class="reference external" href="http://www.sqlalchemy.org/trac/ticket/3551">&#xFF03;3551</a></span></p></li><li><p id="change-1.0.9-10"><span class="yiyi-st" id="yiyi-392"><span class="target" id="change-4d194a4a74cbfbf7fe6e942c90398724"><strong>[bug] [examples] </strong></span>Fixed two issues in the &#x201C;history_meta&#x201D; example where history tracking could encounter empty history, and where a column keyed to an alternate attribute name would fail to track properly. </span><span class="yiyi-st" id="yiyi-393">&#x4FEE;&#x6B63;Alex Fraser&#x7684;&#x793C;&#x8C8C;&#x3002;<a class="changeset-link headerlink reference internal" href="#change-4d194a4a74cbfbf7fe6e942c90398724">&#xB6;</a></span></p><p></p></li><li><p id="change-1.0.9-11"><span class="yiyi-st" id="yiyi-394"><span class="target" id="change-75effcc51432ea1848ea2d5f00fd9e30"><strong>[bug] [sybase] </strong></span>Fixed two issues regarding Sybase reflection, allowing tables without primary keys to be reflected as well as ensured that a SQL statement involved in foreign key detection is pre-fetched up front to avoid driver issues upon nested queries. </span><span class="yiyi-st" id="yiyi-395">&#x5728;&#x8FD9;&#x91CC;&#x4FEE;&#x590D;Eugene Zapolsky&#xFF1B;&#x8BF7;&#x6CE8;&#x610F;&#xFF0C;&#x6211;&#x4EEC;&#x76EE;&#x524D;&#x65E0;&#x6CD5;&#x6D4B;&#x8BD5;Sybase&#x4EE5;&#x5728;&#x672C;&#x5730;&#x9A8C;&#x8BC1;&#x8FD9;&#x4E9B;&#x66F4;&#x6539;&#x3002;<a class="changeset-link headerlink reference internal" href="#change-75effcc51432ea1848ea2d5f00fd9e30">&#xB6;</a></span></p><p><span class="yiyi-st" id="yiyi-396">&#x53C2;&#x8003;&#x6587;&#x732E;&#xFF1A;<a class="reference external" href="http://www.sqlalchemy.org/trac/ticket/3508">&#xFF03;3508</a>&#xFF0C;<a class="reference external" href="http://www.sqlalchemy.org/trac/ticket/3509">&#xFF03;3509</a></span></p></li></ul></div></div><div class="section" id="change-1.0.8"><h2><span class="yiyi-st" id="yiyi-398">1.0.8 <a class="headerlink" href="#change-1.0.8" title="Permalink to this headline">&#xB6; T0&gt;</a></span></h2><span class="yiyi-st" id="yiyi-412">&#x53D1;&#x5E03;&#x65E5;&#x671F;&#xFF1A;2015&#x5E74;7&#x6708;22&#x65E5;</span><div class="section" id="change-1.0.8-engine"><h3><span class="yiyi-st" id="yiyi-399">&#x53D1;&#x52A8;&#x673A;<a class="headerlink" href="#change-1.0.8-engine" title="Permalink to this headline">&#xB6; T0&gt;</a></span></h3><ul class="simple"><li><p id="change-1.0.8-0"><span class="yiyi-st" id="yiyi-400"><span class="target" id="change-05bc0d20cc8959cd096fe1065ee72b6d"><strong>[engine] [bug] </strong></span>Fixed critical issue whereby the pool &#x201C;checkout&#x201D; event handler may be called against a stale connection without the &#x201C;connect&#x201D; event handler having been called, in the case where the pool attempted to reconnect after being invalidated and failed; the stale connection would remain present and would be used on a subsequent attempt. </span><span class="yiyi-st" id="yiyi-401">&#x8FD9;&#x4E2A;&#x95EE;&#x9898;&#x5728;1.0.2&#x4E4B;&#x540E;&#x7684;1.0&#x7CFB;&#x5217;&#x4E2D;&#x6709;&#x66F4;&#x5927;&#x7684;&#x5F71;&#x54CD;&#xFF0C;&#x56E0;&#x4E3A;&#x5B83;&#x8FD8;&#x5411;&#x4E8B;&#x4EF6;&#x5904;&#x7406;&#x7A0B;&#x5E8F;&#x63D0;&#x4F9B;&#x4E86;&#x4E00;&#x4E2A;&#x7A7A;&#x767D;&#x7684;<code class="docutils literal"><span class="pre">.info</span></code>&#x5B57;&#x5178;&#xFF1B;&#x5728;1.0.2&#x4E4B;&#x524D;&#xFF0C;<code class="docutils literal"><span class="pre">.info</span></code>&#x5B57;&#x5178;&#x4ECD;&#x7136;&#x662F;&#x524D;&#x4E00;&#x4E2A;&#x3002;<a class="changeset-link headerlink reference internal" href="#change-05bc0d20cc8959cd096fe1065ee72b6d">&#xB6;</a></span></p><p><span class="yiyi-st" id="yiyi-402">&#x8FD9;&#x4E2A;&#x6539;&#x53D8;&#x4E5F;&#x88AB;<strong>backported</strong>&#x6539;&#x4E3A;&#xFF1A;0.9.11</span></p><p><span class="yiyi-st" id="yiyi-403">&#x53C2;&#x8003;&#x6587;&#x732E;&#xFF1A;<a class="reference external" href="http://www.sqlalchemy.org/trac/ticket/3497">&#xFF03;3497</a></span></p></li></ul></div><div class="section" id="change-1.0.8-sqlite"><h3><span class="yiyi-st" id="yiyi-404">&#x6E90;&#x7801;<a class="headerlink" href="#change-1.0.8-sqlite" title="Permalink to this headline">&#xB6; T0&gt;</a></span></h3><ul class="simple"><li><p id="change-1.0.8-1"><span class="yiyi-st" id="yiyi-405"><span class="target" id="change-6134cd2764da1ab4c4d3248e1286a1ea"><strong>[sqlite] [bug] </strong></span>Fixed bug in SQLite dialect where reflection of UNIQUE constraints that included non-alphabetic characters in the names, like dots or spaces, would not be reflected with their name.<a class="changeset-link headerlink reference internal" href="#change-6134cd2764da1ab4c4d3248e1286a1ea">&#xB6;</a></span></p><p><span class="yiyi-st" id="yiyi-406">&#x8FD9;&#x4E2A;&#x6539;&#x53D8;&#x4E5F;&#x88AB;<strong>backported</strong>&#x6539;&#x4E3A;&#xFF1A;0.9.10</span></p><p><span class="yiyi-st" id="yiyi-407">&#x53C2;&#x8003;&#x6587;&#x732E;&#xFF1A;<a class="reference external" href="http://www.sqlalchemy.org/trac/ticket/3495">&#xFF03;3495</a></span></p></li></ul></div><div class="section" id="change-1.0.8-misc"><h3><span class="yiyi-st" id="yiyi-408">&#x6742;&#x9879;<a class="headerlink" href="#change-1.0.8-misc" title="Permalink to this headline">&#xB6; T0&gt;</a></span></h3><ul class="simple"><li><p id="change-1.0.8-2"><span class="yiyi-st" id="yiyi-409"><span class="target" id="change-24c5326bfca21e965dae7fe158cafd8e"><strong>[misc] [bug] </strong></span>&#x4FEE;&#x590D;&#x4E86;utils&#x4E2D;&#x7684;&#x7279;&#x5B9A;&#x57FA;&#x7C7B;&#x6CA1;&#x6709;&#x5B9E;&#x73B0;<code class="docutils literal"><span class="pre">__slots__</span></code>&#x7684;&#x95EE;&#x9898;&#xFF0C;&#x56E0;&#x6B64;&#x610F;&#x5473;&#x7740;&#x8BE5;&#x7C7B;&#x7684;&#x6240;&#x6709;&#x5B50;&#x7C7B;&#x90FD;&#x6CA1;&#x6709;&#xFF0C;&#x5426;&#x5B9A;<code class="docutils literal"><span class="pre">__slots__</span></code>&#x7684;&#x57FA;&#x672C;&#x539F;&#x7406;&#x5C06;&#x88AB;&#x4F7F;&#x7528;&#x3002;</span><span class="yiyi-st" id="yiyi-410">&#x9664;&#x4E86;IronPython&#x4E4B;&#x5916;&#x6CA1;&#x6709;&#x4EFB;&#x4F55;&#x95EE;&#x9898;&#xFF0C;&#x5B83;&#x663E;&#x7136;&#x6CA1;&#x6709;&#x5B9E;&#x73B0;&#x517C;&#x5BB9;cPython&#x7684;<code class="docutils literal"><span class="pre">__slots__</span></code>&#x884C;&#x4E3A;&#x3002;<a class="changeset-link headerlink reference internal" href="#change-24c5326bfca21e965dae7fe158cafd8e">&#xB6;</a></span></p><p><span class="yiyi-st" id="yiyi-411">&#x53C2;&#x8003;&#x6587;&#x732E;&#xFF1A;<a class="reference external" href="http://www.sqlalchemy.org/trac/ticket/3494">&#xFF03;3494</a></span></p></li></ul></div></div><div class="section" id="change-1.0.7"><h2><span class="yiyi-st" id="yiyi-413">1.0.7 <a class="headerlink" href="#change-1.0.7" title="Permalink to this headline">&#xB6; T0&gt;</a></span></h2><span class="yiyi-st" id="yiyi-447">&#x53D1;&#x5E03;&#x65E5;&#x671F;&#xFF1A;2015&#x5E74;7&#x6708;20&#x65E5;</span><div class="section" id="change-1.0.7-orm"><h3><span class="yiyi-st" id="yiyi-414">ORM <a class="headerlink" href="#change-1.0.7-orm" title="Permalink to this headline">&#xB6; T0&gt;</a></span></h3><ul class="simple"><li><p id="change-1.0.7-0"><span class="yiyi-st" id="yiyi-415"><span class="target" id="change-d8257a12a5e639cc3b2c05a3479592cd"><strong>[orm] [bug] </strong></span>Fixed 1.0 regression where value objects that override <code class="docutils literal"><span class="pre">__eq__()</span></code> to return a non-boolean-capable object, such as some geoalchemy types as well as numpy types, were being tested for <code class="docutils literal"><span class="pre">bool()</span></code> during a unit of work update operation, where in 0.9 the return value of <code class="docutils literal"><span class="pre">__eq__()</span></code> was tested against &#x201C;is True&#x201D; to guard against this.<a class="changeset-link headerlink reference internal" href="#change-d8257a12a5e639cc3b2c05a3479592cd">&#xB6;</a></span></p><p><span class="yiyi-st" id="yiyi-416">&#x53C2;&#x8003;&#x6587;&#x732E;&#xFF1A;<a class="reference external" href="http://www.sqlalchemy.org/trac/ticket/3469">&#xFF03;3469</a></span></p></li><li><p id="change-1.0.7-1"><span class="yiyi-st" id="yiyi-417"><span class="target" id="change-e746b68ee9723f9830729a8b48705cc0"><strong>[orm] [bug] </strong></span>Fixed 1.0 regression where a &#x201C;deferred&#x201D; attribute would not populate correctly if it were loaded within the &#x201C;optimized inheritance load&#x201D;, which is a special SELECT emitted in the case of joined table inheritance used to populate expired or unloaded attributes against a joined table without loading the base table. </span><span class="yiyi-st" id="yiyi-418">&#x8FD9;&#x4E0E;SQLA 1.0&#x4E0D;&#x518D;&#x731C;&#x6D4B;&#x52A0;&#x8F7D;&#x5EF6;&#x8FDF;&#x5217;&#x7684;&#x4E8B;&#x5B9E;&#x6709;&#x5173;&#xFF0C;&#x5FC5;&#x987B;&#x660E;&#x786E;&#x6307;&#x793A;&#x3002;<a class="changeset-link headerlink reference internal" href="#change-e746b68ee9723f9830729a8b48705cc0">&#xB6;</a></span></p><p><span class="yiyi-st" id="yiyi-419">&#x53C2;&#x8003;&#x6587;&#x732E;&#xFF1A;<a class="reference external" href="http://www.sqlalchemy.org/trac/ticket/3468">&#xFF03;3468</a></span></p></li><li><p id="change-1.0.7-2"><span class="yiyi-st" id="yiyi-420"><span class="target" id="change-5fde27efe6d3b70810bf2221b87e06b2"><strong>[orm] [bug] </strong></span>Fixed 1.0 regression where the &#x201C;parent entity&#x201D; of a synonym- mapped attribute on top of an <a class="reference internal" href="orm_query.html#sqlalchemy.orm.aliased" title="sqlalchemy.orm.aliased"><code class="xref py py-func docutils literal"><span class="pre">aliased()</span></code></a> object would resolve to the original mapper, not the <a class="reference internal" href="orm_query.html#sqlalchemy.orm.aliased" title="sqlalchemy.orm.aliased"><code class="xref py py-func docutils literal"><span class="pre">aliased()</span></code></a> version of it, thereby causing problems for a <a class="reference internal" href="orm_query.html#sqlalchemy.orm.query.Query" title="sqlalchemy.orm.query.Query"><code class="xref py py-class docutils literal"><span class="pre">Query</span></code></a> that relies on this attribute (e.g. it&#x2019;s the only representative attribute given in the constructor) to figure out the correct FROM clause for the query.<a class="changeset-link headerlink reference internal" href="#change-5fde27efe6d3b70810bf2221b87e06b2">&#xB6;</a></span></p><p><span class="yiyi-st" id="yiyi-421">&#x53C2;&#x8003;&#x6587;&#x732E;&#xFF1A;<a class="reference external" href="http://www.sqlalchemy.org/trac/ticket/3466">&#xFF03;3466</a></span></p></li></ul></div><div class="section" id="change-1.0.7-orm-declarative"><h3><span class="yiyi-st" id="yiyi-422">orm declarative <a class="headerlink" href="#change-1.0.7-orm-declarative" title="Permalink to this headline">&#xB6;</a></span></h3><ul class="simple"><li><p id="change-1.0.7-3"><span class="yiyi-st" id="yiyi-423"><span class="target" id="change-14091d56b0a4b381f6ca76bf3b1c27e1"><strong>[bug] [orm] [declarative] </strong></span>&#x4FEE;&#x6B63;&#x4E86;<a class="reference internal" href="orm_extensions_declarative_api.html#sqlalchemy.ext.declarative.AbstractConcreteBase" title="sqlalchemy.ext.declarative.AbstractConcreteBase"><code class="xref py py-class docutils literal"><span class="pre">AbstractConcreteBase</span></code></a>&#x6269;&#x5C55;&#x4E2D;&#x7684;&#x9519;&#x8BEF;&#xFF0C;&#x5176;&#x4E2D;ABC&#x57FA;&#x7840;&#x4E0A;&#x5177;&#x6709;&#x4E0D;&#x540C;&#x5C5E;&#x6027;&#x540D;&#x79F0;&#x4E0E;&#x5217;&#x540D;&#x79F0;&#x7684;&#x5217;&#x8BBE;&#x7F6E;&#x4E0D;&#x6B63;&#x786E;&#x6620;&#x5C04;&#x5230;&#x6700;&#x7EC8;&#x7684;&#x57FA;&#x7C7B;&#x3002;</span><span class="yiyi-st" id="yiyi-424">0.9&#x4E0A;&#x7684;&#x5931;&#x8D25;&#x5C06;&#x662F;&#x65E0;&#x58F0;&#x7684;&#xFF0C;&#x800C;&#x5728;1.0&#x4E0A;&#x5B83;&#x4F1A;&#x5F15;&#x53D1;&#x4E00;&#x4E2A;ArgumentError&#xFF0C;&#x6240;&#x4EE5;&#x5728;1.0&#x4E4B;&#x524D;&#x53EF;&#x80FD;&#x6CA1;&#x6709;&#x88AB;&#x6CE8;&#x610F;&#x5230;&#x3002;<a class="changeset-link headerlink reference internal" href="#change-14091d56b0a4b381f6ca76bf3b1c27e1">&#xB6;</a></span></p><p><span class="yiyi-st" id="yiyi-425">&#x53C2;&#x8003;&#x6587;&#x732E;&#xFF1A;<a class="reference external" href="http://www.sqlalchemy.org/trac/ticket/3480">&#xFF03;3480</a></span></p></li></ul></div><div class="section" id="change-1.0.7-engine"><h3><span class="yiyi-st" id="yiyi-426">&#x53D1;&#x52A8;&#x673A;<a class="headerlink" href="#change-1.0.7-engine" title="Permalink to this headline">&#xB6; T0&gt;</a></span></h3><ul class="simple"><li><p id="change-1.0.7-4"><span class="yiyi-st" id="yiyi-427"><span class="target" id="change-a8f444887b4e02dd0ebb799cd316449e"><strong>[engine] [bug] </strong></span>Fixed regression where new methods on <a class="reference internal" href="core_connections.html#sqlalchemy.engine.ResultProxy" title="sqlalchemy.engine.ResultProxy"><code class="xref py py-class docutils literal"><span class="pre">ResultProxy</span></code></a> used by the ORM <a class="reference internal" href="orm_query.html#sqlalchemy.orm.query.Query" title="sqlalchemy.orm.query.Query"><code class="xref py py-class docutils literal"><span class="pre">Query</span></code></a> object (part of the performance enhancements of <a class="reference external" href="http://www.sqlalchemy.org/trac/ticket/3175">#3175</a>) would not raise the &#x201C;this result does not return rows&#x201D; exception in the case where the driver (typically MySQL) fails to generate cursor.description correctly; an AttributeError against NoneType would be raised instead.<a class="changeset-link headerlink reference internal" href="#change-a8f444887b4e02dd0ebb799cd316449e">&#xB6;</a></span></p><p><span class="yiyi-st" id="yiyi-428">&#x53C2;&#x8003;&#x6587;&#x732E;&#xFF1A;<a class="reference external" href="http://www.sqlalchemy.org/trac/ticket/3481">&#xFF03;3481</a></span></p></li><li><p id="change-1.0.7-5"><span class="yiyi-st" id="yiyi-429"><span class="target" id="change-cec9d3d58a6ea531cc16fc2bfe7cc705"><strong>[engine] [bug] </strong></span>Fixed regression where <a class="reference internal" href="core_connections.html#sqlalchemy.engine.ResultProxy.keys" title="sqlalchemy.engine.ResultProxy.keys"><code class="xref py py-meth docutils literal"><span class="pre">ResultProxy.keys()</span></code></a> would return un-adjusted internal symbol names for &#x201C;anonymous&#x201D; labels, which are the &#x201C;foo_1&#x201D; types of labels we see generated for SQL functions without labels and similar. </span><span class="yiyi-st" id="yiyi-430">&#x8FD9;&#x662F;&#x4F5C;&#x4E3A;&#xFF03;918&#x7684;&#x4E00;&#x90E8;&#x5206;&#x5B9E;&#x73B0;&#x7684;&#x6027;&#x80FD;&#x589E;&#x5F3A;&#x7684;&#x526F;&#x4F5C;&#x7528;&#x3002;<a class="changeset-link headerlink reference internal" href="#change-cec9d3d58a6ea531cc16fc2bfe7cc705">&#xB6;</a></span></p><p><span class="yiyi-st" id="yiyi-431">&#x53C2;&#x8003;&#x6587;&#x732E;&#xFF1A;<a class="reference external" href="http://www.sqlalchemy.org/trac/ticket/3483">&#xFF03;3483</a></span></p></li></ul></div><div class="section" id="change-1.0.7-sql"><h3><span class="yiyi-st" id="yiyi-432">SQL <a class="headerlink" href="#change-1.0.7-sql" title="Permalink to this headline">&#xB6; T0&gt;</a></span></h3><ul class="simple"><li><p id="change-1.0.7-6"><span class="yiyi-st" id="yiyi-433"><span class="target" id="change-43b6d3363b92faa5bbb53e4513946b06"><strong>[sql] [feature] </strong></span>&#x6DFB;&#x52A0;&#x4E86;&#x4E00;&#x4E2A;<a class="reference internal" href="core_sqlelement.html#sqlalchemy.sql.expression.ColumnElement.cast" title="sqlalchemy.sql.expression.ColumnElement.cast"><code class="xref py py-meth docutils literal"><span class="pre">ColumnElement.cast()</span></code></a>&#x65B9;&#x6CD5;&#xFF0C;&#x5B83;&#x4E0E;&#x72EC;&#x7ACB;&#x7684;<a class="reference internal" href="core_sqlelement.html#sqlalchemy.sql.expression.cast" title="sqlalchemy.sql.expression.cast"><code class="xref py py-func docutils literal"><span class="pre">cast()</span></code></a>&#x51FD;&#x6570;&#x5177;&#x6709;&#x76F8;&#x540C;&#x7684;&#x7528;&#x9014;&#x3002;</span><span class="yiyi-st" id="yiyi-434">&#x8BF7;&#x6C42;Sebastian Bank&#x63D0;&#x4F9B;&#x3002;<a class="changeset-link headerlink reference internal" href="#change-43b6d3363b92faa5bbb53e4513946b06">&#xB6;</a></span></p><p><span class="yiyi-st" id="yiyi-435">&#x53C2;&#x8003;&#x6587;&#x732E;&#xFF1A;<a class="reference external" href="http://www.sqlalchemy.org/trac/ticket/3459">&#xFF03;3459</a>&#xFF0C;<a class="reference external" href="https://bitbucket.org/zzzeek/sqlalchemy/pull-request/56">&#x62C9;&#x53D6;&#x8BF7;&#x6C42;bitbucket&#xFF1A;56</a></span></p></li><li><p id="change-1.0.7-7"><span class="yiyi-st" id="yiyi-436"><span class="target" id="change-bf5b877405938832cc764301281c8eaa"><strong>[sql] [bug] </strong></span>Fixed bug where coersion of literal <code class="docutils literal"><span class="pre">True</span></code> or <code class="docutils literal"><span class="pre">False</span></code> constant in conjunction with <a class="reference internal" href="core_sqlelement.html#sqlalchemy.sql.expression.and_" title="sqlalchemy.sql.expression.and_"><code class="xref py py-func docutils literal"><span class="pre">and_()</span></code></a> or <a class="reference internal" href="core_sqlelement.html#sqlalchemy.sql.expression.or_" title="sqlalchemy.sql.expression.or_"><code class="xref py py-func docutils literal"><span class="pre">or_()</span></code></a> would fail with an AttributeError.<a class="changeset-link headerlink reference internal" href="#change-bf5b877405938832cc764301281c8eaa">&#xB6;</a></span></p><p><span class="yiyi-st" id="yiyi-437">&#x53C2;&#x8003;&#x6587;&#x732E;&#xFF1A;<a class="reference external" href="http://www.sqlalchemy.org/trac/ticket/3490">&#xFF03;3490</a></span></p></li><li><p id="change-1.0.7-8"><span class="yiyi-st" id="yiyi-438"><span class="target" id="change-b370520554bd5df73fbe6c051d269d8d"><strong>[sql] [bug] </strong></span>Fixed potential issue where a custom subclass of <a class="reference internal" href="core_functions.html#sqlalchemy.sql.functions.FunctionElement" title="sqlalchemy.sql.functions.FunctionElement"><code class="xref py py-class docutils literal"><span class="pre">FunctionElement</span></code></a> or other column element that incorrectly states &#x2018;None&#x2019; or any other invalid object as the <code class="docutils literal"><span class="pre">.type</span></code> attribute will report this exception instead of recursion overflow.<a class="changeset-link headerlink reference internal" href="#change-b370520554bd5df73fbe6c051d269d8d">&#xB6;</a></span></p><p><span class="yiyi-st" id="yiyi-439">&#x53C2;&#x8003;&#x6587;&#x732E;&#xFF1A;<a class="reference external" href="http://www.sqlalchemy.org/trac/ticket/3485">&#xFF03;3485</a></span></p></li><li><p id="change-1.0.7-9"><span class="yiyi-st" id="yiyi-440"><span class="target" id="change-0987e97a44de7599027c6110b0dc7d3e"><strong>[sql] [bug] </strong></span>Fixed bug where the modulus SQL operator wouldn&#x2019;t work in reverse due to a missing <code class="docutils literal"><span class="pre">__rmod__</span></code> method. </span><span class="yiyi-st" id="yiyi-441">&#x62C9;&#x8BF7;&#x6C42;&#x793C;&#x8C8C;dan-gittik&#x3002;<a class="changeset-link headerlink reference internal" href="#change-0987e97a44de7599027c6110b0dc7d3e">&#xB6;</a></span></p><p><span class="yiyi-st" id="yiyi-442">&#x53C2;&#x8003;&#x6587;&#x732E;&#xFF1A;<a class="reference external" href="https://github.com/zzzeek/sqlalchemy/pull/188">&#x8BF7;&#x6C42;github&#xFF1A;188</a></span></p></li></ul></div><div class="section" id="change-1.0.7-schema"><h3><span class="yiyi-st" id="yiyi-443">&#x67B6;&#x6784;<a class="headerlink" href="#change-1.0.7-schema" title="Permalink to this headline">&#xB6; T0&gt;</a></span></h3><ul class="simple"><li><p id="change-1.0.7-10"><span class="yiyi-st" id="yiyi-444"><span class="target" id="change-8f1453e149271dd9f8aef4a28b9fe43b"><strong>[schema] [feature] </strong></span>&#x589E;&#x52A0;&#x4E86;Postgresql&#x548C;Oracle&#x652F;&#x6301;&#x7684;&#x5BF9;CREATE SEQUENCE&#x7684;MINVALUE&#xFF0C;MAXVALUE&#xFF0C;NO MINVALUE&#xFF0C;NO MAXVALUE&#x548C;CYCLE&#x53C2;&#x6570;&#x7684;&#x652F;&#x6301;&#x3002;</span><span class="yiyi-st" id="yiyi-445">&#x8BF7;&#x6C42;&#x793C;&#x8C8C;jakeogh&#x3002;<a class="changeset-link headerlink reference internal" href="#change-8f1453e149271dd9f8aef4a28b9fe43b">&#xB6;</a></span></p><p><span class="yiyi-st" id="yiyi-446">&#x53C2;&#x8003;&#x6587;&#x732E;&#xFF1A;<a class="reference external" href="https://github.com/zzzeek/sqlalchemy/pull/186">&#x8BF7;&#x6C42;github&#xFF1A;186</a></span></p></li></ul></div></div><div class="section" id="change-1.0.6"><h2><span class="yiyi-st" id="yiyi-448">1.0.6 <a class="headerlink" href="#change-1.0.6" title="Permalink to this headline">&#xB6; T0&gt;</a></span></h2><span class="yiyi-st" id="yiyi-490">&#x53D1;&#x5E03;&#x65E5;&#x671F;&#xFF1A;2015&#x5E74;6&#x6708;25&#x65E5;</span><div class="section" id="change-1.0.6-orm"><h3><span class="yiyi-st" id="yiyi-449">ORM <a class="headerlink" href="#change-1.0.6-orm" title="Permalink to this headline">&#xB6; T0&gt;</a></span></h3><ul class="simple"><li><p id="change-1.0.6-0"><span class="yiyi-st" id="yiyi-450"><span class="target" id="change-04e09fd9acaa6bca943798ba105b4b25"><strong>[orm] [bug] </strong></span>Fixed a major regression in the 1.0 series where the version_id_counter feature would cause an object&#x2019;s version counter to be incremented when there was no net change to the object&#x2019;s row, but instead an object related to it via relationship (e.g. typically many-to-one) were associated or de-associated with it, resulting in an UPDATE statement that updates the object&#x2019;s version counter and nothing else. </span><span class="yiyi-st" id="yiyi-451">&#x5728;&#x4F7F;&#x7528;&#x76F8;&#x5BF9;&#x8F83;&#x65B0;&#x7684;&#x201C;&#x670D;&#x52A1;&#x5668;&#x7AEF;&#x201D;&#x548C;/&#x6216;&#x201C;&#x7F16;&#x7A0B;/&#x6761;&#x4EF6;&#x201D;&#x7248;&#x672C;&#x8BA1;&#x6570;&#x5668;&#x529F;&#x80FD;&#x7684;&#x60C5;&#x51B5;&#x4E0B;&#xFF08;&#x4F8B;&#x5982;&#xFF0C;&#x5C06;version_id_generator&#x8BBE;&#x7F6E;&#x4E3A;False&#xFF09;&#xFF0C;&#x8BE5;&#x9519;&#x8BEF;&#x53EF;&#x80FD;&#x4F1A;&#x5BFC;&#x81F4;&#x53D1;&#x751F;&#x65E0;&#x9700;&#x53D1;&#x51FA;&#x6709;&#x6548;SET&#x5B50;&#x53E5;&#x7684;UPDATE <a class="changeset-link headerlink reference internal" href="#change-04e09fd9acaa6bca943798ba105b4b25">&#xB6; T0&gt;</a></span></p><p><span class="yiyi-st" id="yiyi-452">&#x53C2;&#x8003;&#x6587;&#x732E;&#xFF1A;<a class="reference external" href="http://www.sqlalchemy.org/trac/ticket/3465">&#xFF03;3465</a></span></p></li><li><p id="change-1.0.6-1"><span class="yiyi-st" id="yiyi-453"><span class="target" id="change-a89cda0a0765a524834f1d22bae66a2c"><strong>[orm] [bug] </strong></span>Fixed 1.0 regression where the enhanced behavior of single-inheritance joins of <a class="reference external" href="http://www.sqlalchemy.org/trac/ticket/3222">#3222</a> takes place inappropriately for a JOIN along explicit join criteria with a single-inheritance subclass that does not make use of any discriminator, resulting in an additional &#x201C;AND NULL&#x201D; clause.<a class="changeset-link headerlink reference internal" href="#change-a89cda0a0765a524834f1d22bae66a2c">&#xB6;</a></span></p><p><span class="yiyi-st" id="yiyi-454">&#x53C2;&#x8003;&#x6587;&#x732E;&#xFF1A;<a class="reference external" href="http://www.sqlalchemy.org/trac/ticket/3462">&#xFF03;3462</a></span></p></li><li><p id="change-1.0.6-2"><span class="yiyi-st" id="yiyi-455"><span class="target" id="change-82e3d4362a36c994cf4680b0b62dbd96"><strong>[orm] [bug] </strong></span>Fixed bug in new <a class="reference internal" href="orm_session_api.html#sqlalchemy.orm.session.Session.bulk_update_mappings" title="sqlalchemy.orm.session.Session.bulk_update_mappings"><code class="xref py py-meth docutils literal"><span class="pre">Session.bulk_update_mappings()</span></code></a> feature where the primary key columns used in the WHERE clause to locate the row would also be included in the SET clause, setting their value to themselves unnecessarily. </span><span class="yiyi-st" id="yiyi-456">&#x8BF7;&#x6C42;&#x5E15;&#x7279;&#x91CC;&#x514B;&#xB7;&#x6D77;&#x65AF;&#x63D0;&#x51FA;&#x3002;<a class="changeset-link headerlink reference internal" href="#change-82e3d4362a36c994cf4680b0b62dbd96">&#xB6;</a></span></p><p><span class="yiyi-st" id="yiyi-457">&#x53C2;&#x8003;&#x6587;&#x732E;&#xFF1A;<a class="reference external" href="http://www.sqlalchemy.org/trac/ticket/3451">&#xFF03;3451</a>&#xFF0C;<a class="reference external" href="https://github.com/zzzeek/sqlalchemy/pull/181">&#x8BF7;&#x6C42;github&#xFF1A;181</a></span></p></li><li><p id="change-1.0.6-3"><span class="yiyi-st" id="yiyi-458"><span class="target" id="change-1b5aa56f5daacaf0d6b72f2a3660367b"><strong>[orm] [bug] </strong></span>Fixed an unexpected-use regression whereby custom <a class="reference internal" href="core_type_basics.html#sqlalchemy.types.JSON.Comparator" title="sqlalchemy.types.JSON.Comparator"><code class="xref py py-class docutils literal"><span class="pre">Comparator</span></code></a> objects that made use of the <code class="docutils literal"><span class="pre">__clause_element__()</span></code> method and returned an object that was an ORM-mapped <a class="reference internal" href="orm_internals.html#sqlalchemy.orm.attributes.InstrumentedAttribute" title="sqlalchemy.orm.attributes.InstrumentedAttribute"><code class="xref py py-class docutils literal"><span class="pre">InstrumentedAttribute</span></code></a> and not explicitly a <a class="reference internal" href="core_sqlelement.html#sqlalchemy.sql.expression.ColumnElement" title="sqlalchemy.sql.expression.ColumnElement"><code class="xref py py-class docutils literal"><span class="pre">ColumnElement</span></code></a> would fail to be correctly handled when passed as an expression to <a class="reference internal" href="orm_session_api.html#sqlalchemy.orm.session.Session.query" title="sqlalchemy.orm.session.Session.query"><code class="xref py py-meth docutils literal"><span class="pre">Session.query()</span></code></a>. </span><span class="yiyi-st" id="yiyi-459">0.9&#x4E2D;&#x7684;&#x903B;&#x8F91;&#x78B0;&#x5DE7;&#x6210;&#x529F;&#x4E86;&#xFF0C;&#x6240;&#x4EE5;&#x73B0;&#x5728;&#x652F;&#x6301;&#x8FD9;&#x4E2A;&#x7528;&#x4F8B;&#x3002;<a class="changeset-link headerlink reference internal" href="#change-1b5aa56f5daacaf0d6b72f2a3660367b">&#xB6;</a></span></p><p><span class="yiyi-st" id="yiyi-460">&#x53C2;&#x8003;&#x6587;&#x732E;&#xFF1A;<a class="reference external" href="http://www.sqlalchemy.org/trac/ticket/3448">&#xFF03;3448</a></span></p></li></ul></div><div class="section" id="change-1.0.6-sql"><h3><span class="yiyi-st" id="yiyi-461">SQL <a class="headerlink" href="#change-1.0.6-sql" title="Permalink to this headline">&#xB6; T0&gt;</a></span></h3><ul class="simple"><li><p id="change-1.0.6-4"><span class="yiyi-st" id="yiyi-462"><span class="target" id="change-13ad1c4b46b46eef73ee80da9b69b7c7"><strong>[sql] [bug] </strong></span>Fixed a bug where clause adaption as applied to a <a class="reference internal" href="core_sqlelement.html#sqlalchemy.sql.expression.Label" title="sqlalchemy.sql.expression.Label"><code class="xref py py-class docutils literal"><span class="pre">Label</span></code></a> object would fail to accommodate the labeled SQL expression in all cases, such that any SQL operation that made use of <code class="xref py py-meth docutils literal"><span class="pre">Label.self_group()</span></code> would use the original unadapted expression. </span><span class="yiyi-st" id="yiyi-463">&#x8FD9;&#x6837;&#x505A;&#x7684;&#x4E00;&#x4E2A;&#x5F71;&#x54CD;&#x662F;ORM <a class="reference internal" href="orm_query.html#sqlalchemy.orm.aliased" title="sqlalchemy.orm.aliased"><code class="xref py py-func docutils literal"><span class="pre">aliased()</span></code></a>&#x7ED3;&#x6784;&#x4E0D;&#x80FD;&#x5B8C;&#x5168;&#x5BB9;&#x7EB3;&#x7531;<a class="reference internal" href="orm_mapping_columns.html#sqlalchemy.orm.column_property" title="sqlalchemy.orm.column_property"><code class="xref py py-obj docutils literal"><span class="pre">column_property</span></code></a>&#x6620;&#x5C04;&#x7684;&#x5C5E;&#x6027;&#xFF0C;&#x8FD9;&#x6837;&#x5F53;&#x5C5E;&#x6027;&#x51FA;&#x73B0;&#x65F6;&#xFF0C;&#x65E0;&#x952F;&#x9F7F;&#x8868;&#x53EF;&#x80FD;&#x4F1A;&#x6CC4;&#x6F0F;&#x7528;&#x4E8E;&#x67D0;&#x4E9B;&#x7C7B;&#x578B;&#x7684;SQL&#x6BD4;&#x8F83;&#x3002;<a class="changeset-link headerlink reference internal" href="#change-13ad1c4b46b46eef73ee80da9b69b7c7">&#xB6;</a></span></p><p><span class="yiyi-st" id="yiyi-464">&#x53C2;&#x8003;&#x6587;&#x732E;&#xFF1A;<a class="reference external" href="http://www.sqlalchemy.org/trac/ticket/3445">&#xFF03;3445</a></span></p></li></ul></div><div class="section" id="change-1.0.6-postgresql"><h3><span class="yiyi-st" id="yiyi-465">&#x7684;PostgreSQL <a class="headerlink" href="#change-1.0.6-postgresql" title="Permalink to this headline">&#xB6; T0&gt;</a></span></h3><ul class="simple"><li><p id="change-1.0.6-5"><span class="yiyi-st" id="yiyi-466"><span class="target" id="change-a1da751254775f355493a4ce8c269b31"><strong>[postgresql] [feature] </strong></span>&#x4F7F;&#x7528;&#x65B0;&#x7684;&#x5173;&#x952E;&#x5B57;&#x53C2;&#x6570;<code class="docutils literal"><span class="pre">postgresql_with</span></code>&#x589E;&#x52A0;&#x4E86;&#x5BF9;CREATE INDEX&#x4E0B;&#x5B58;&#x50A8;&#x53C2;&#x6570;&#x7684;&#x652F;&#x6301;&#x3002;</span><span class="yiyi-st" id="yiyi-467">&#x8FD8;&#x589E;&#x52A0;&#x4E86;&#x5BF9;&#x53CD;&#x5C04;&#x7684;&#x652F;&#x6301;&#xFF0C;&#x4EE5;&#x652F;&#x6301;<code class="docutils literal"><span class="pre">postgresql_with</span></code>&#x6807;&#x5FD7;&#x4EE5;&#x53CA;<code class="docutils literal"><span class="pre">postgresql_using</span></code>&#x6807;&#x5FD7;&#xFF0C;&#x8BE5;&#x6807;&#x5FD7;&#x73B0;&#x5728;&#x5C06;&#x8BBE;&#x7F6E;&#x5728;&#x53CD;&#x6620;&#x7684;<a class="reference internal" href="core_constraints.html#sqlalchemy.schema.Index" title="sqlalchemy.schema.Index"><code class="xref py py-class docutils literal"><span class="pre">Index</span></code></a>&#x5BF9;&#x8C61;&#x4E0A;&#xFF0C;&#x5E76;&#x5728;<a class="reference internal" href="core_reflection.html#sqlalchemy.engine.reflection.Inspector.get_indexes" title="sqlalchemy.engine.reflection.Inspector.get_indexes"><code class="xref py py-meth docutils literal"><span class="pre">Inspector.get_indexes()</span></code></a>&#x7684;&#x7ED3;&#x679C;&#x4E2D;&#x51FA;&#x73B0;&#x5728;&#x65B0;&#x7684;&#x201C;dialect_options&#x201D;&#x5B57;&#x5178;&#x4E2D;&#x3002;</span><span class="yiyi-st" id="yiyi-468">&#x62C9;&#x8BF7;&#x6C42;Pete Hollobon&#x63D0;&#x4F9B;&#x3002;</span></p><div class="admonition seealso"><p class="first admonition-title"><span class="yiyi-st" id="yiyi-469">&#x4E5F;&#x53EF;&#x4EE5;&#x770B;&#x770B;</span></p><p class="last"><span class="yiyi-st" id="yiyi-470"><a class="reference internal" href="dialects_postgresql.html#postgresql-index-storage"><span>Index Storage Parameters</span></a></span></p></div><span class="yiyi-st" id="yiyi-472"> <a class="changeset-link headerlink reference internal" href="#change-a1da751254775f355493a4ce8c269b31">&#xB6;</a></span><p><span class="yiyi-st" id="yiyi-471">&#x53C2;&#x8003;&#x6587;&#x732E;&#xFF1A;<a class="reference external" href="http://www.sqlalchemy.org/trac/ticket/3455">&#xFF03;3455</a>&#xFF0C;<a class="reference external" href="https://github.com/zzzeek/sqlalchemy/pull/179">&#x8BF7;&#x6C42;github&#xFF1A;179</a></span></p></li><li><p id="change-1.0.6-6"><span class="yiyi-st" id="yiyi-473"><span class="target" id="change-dbf0b8a22c79871cbf0aa7090384697a"><strong>[postgresql] [feature] </strong></span>&#x589E;&#x52A0;&#x4E86;&#x65B0;&#x7684;&#x6267;&#x884C;&#x9009;&#x9879;<code class="docutils literal"><span class="pre">max_row_buffer</span></code>&#xFF0C;&#x5F53;&#x4F7F;&#x7528;<code class="docutils literal"><span class="pre">stream_results</span></code>&#x9009;&#x9879;&#x65F6;&#xFF0C;psycopg2&#x65B9;&#x8A00;&#x89E3;&#x91CA;&#x8BE5;&#x9009;&#x9879;&#xFF0C;&#x5173;&#x4E8E;&#x53EF;&#x80FD;&#x5206;&#x914D;&#x7684;&#x884C;&#x7F13;&#x51B2;&#x533A;&#x7684;&#x5927;&#x5C0F;&#x3002;</span><span class="yiyi-st" id="yiyi-474">&#x8BE5;&#x503C;&#x4E5F;&#x662F;&#x57FA;&#x4E8E;&#x53D1;&#x9001;&#x7ED9;<a class="reference internal" href="orm_query.html#sqlalchemy.orm.query.Query.yield_per" title="sqlalchemy.orm.query.Query.yield_per"><code class="xref py py-meth docutils literal"><span class="pre">Query.yield_per()</span></code></a>&#x7684;&#x6574;&#x6570;&#x503C;&#x63D0;&#x4F9B;&#x7684;&#x3002;</span><span class="yiyi-st" id="yiyi-475">&#x62C9;&#x8BF7;&#x6C42;&#x793C;&#x8C8C;mcclurem&#x3002;<a class="changeset-link headerlink reference internal" href="#change-dbf0b8a22c79871cbf0aa7090384697a">&#xB6;</a></span></p><p><span class="yiyi-st" id="yiyi-476">&#x53C2;&#x8003;&#x6587;&#x732E;&#xFF1A;<a class="reference external" href="https://github.com/zzzeek/sqlalchemy/pull/182">&#x8BF7;&#x6C42;github&#xFF1A;182</a></span></p></li><li><p id="change-1.0.6-7"><span class="yiyi-st" id="yiyi-477"><span class="target" id="change-b6f3e6dc6d48ee3c97373314cbf5a1d2"><strong>[postgresql] [bug] [pypy] </strong></span>Re-fixed this issue first released in 1.0.5 to fix psycopg2cffi JSONB support once again, as they suddenly switched on unconditional decoding of JSONB types in version 2.7.1. </span><span class="yiyi-st" id="yiyi-478">&#x7248;&#x672C;&#x68C0;&#x6D4B;&#x73B0;&#x5728;&#x6307;&#x5B9A;2.7.1&#x4F5C;&#x4E3A;&#x6211;&#x4EEC;&#x5E94;&#x8BE5;&#x671F;&#x671B;DBAPI&#x4E3A;&#x6211;&#x4EEC;&#x6267;&#x884C;json&#x7F16;&#x7801;&#x7684;&#x5730;&#x65B9;&#x3002;<a class="changeset-link headerlink reference internal" href="#change-b6f3e6dc6d48ee3c97373314cbf5a1d2">&#xB6;</a></span></p><p><span class="yiyi-st" id="yiyi-479">&#x53C2;&#x8003;&#x6587;&#x732E;&#xFF1A;<a class="reference external" href="http://www.sqlalchemy.org/trac/ticket/3439">&#xFF03;3439</a></span></p></li><li><p id="change-1.0.6-8"><span class="yiyi-st" id="yiyi-480"><span class="target" id="change-be2b184e44dd8cb506c1edf0abb96861"><strong>[postgresql] [bug] </strong></span>&#x4FEE;&#x590D;&#x4E86;<a class="reference internal" href="dialects_postgresql.html#sqlalchemy.dialects.postgresql.ExcludeConstraint" title="sqlalchemy.dialects.postgresql.ExcludeConstraint"><code class="xref py py-class docutils literal"><span class="pre">ExcludeConstraint</span></code></a>&#x7ED3;&#x6784;&#xFF0C;&#x4EE5;&#x652F;&#x6301;&#x50CF;<a class="reference internal" href="core_constraints.html#sqlalchemy.schema.Index" title="sqlalchemy.schema.Index"><code class="xref py py-class docutils literal"><span class="pre">Index</span></code></a>&#x7B49;&#x5176;&#x4ED6;&#x5BF9;&#x8C61;&#x73B0;&#x5728;&#x53EF;&#x4EE5;&#x4F7F;&#x7528;&#x7684;&#x5E38;&#x7528;&#x529F;&#x80FD;&#xFF0C;&#x53EF;&#x4EE5;&#x6307;&#x5B9A;&#x5217;&#x8868;&#x8FBE;&#x5F0F;&#x4F5C;&#x4E3A;&#x4EFB;&#x610F;&#x7684;SQL&#x8868;&#x8FBE;&#x5F0F;&#xFF0C;&#x5982;<a class="reference internal" href="core_metadata.html#sqlalchemy.schema.Column.cast" title="sqlalchemy.schema.Column.cast"><code class="xref py py-obj docutils literal"><span class="pre">cast</span></code></a>&#x6216;<a class="reference internal" href="core_sqlelement.html#sqlalchemy.sql.expression.text" title="sqlalchemy.sql.expression.text"><code class="xref py py-obj docutils literal"><span class="pre">text</span></code></a>&#x3002;<a class="changeset-link headerlink reference internal" href="#change-be2b184e44dd8cb506c1edf0abb96861">&#xB6;</a></span></p><p><span class="yiyi-st" id="yiyi-481">&#x53C2;&#x8003;&#x6587;&#x732E;&#xFF1A;<a class="reference external" href="http://www.sqlalchemy.org/trac/ticket/3454">&#xFF03;3454</a></span></p></li></ul></div><div class="section" id="change-1.0.6-mssql"><h3><span class="yiyi-st" id="yiyi-482">MSSQL <a class="headerlink" href="#change-1.0.6-mssql" title="Permalink to this headline">&#xB6; T0&gt;</a></span></h3><ul class="simple"><li><p id="change-1.0.6-9"><span class="yiyi-st" id="yiyi-483"><span class="target" id="change-c172051273efb1de12dcb17d2c004ef7"><strong>[mssql] [bug] </strong></span>&#x4FEE;&#x6B63;&#x4E86;&#x5C06;<a class="reference internal" href="dialects_mysql.html#sqlalchemy.dialects.mysql.VARBINARY" title="sqlalchemy.dialects.mysql.VARBINARY"><code class="xref py py-class docutils literal"><span class="pre">VARBINARY</span></code></a>&#x7C7B;&#x578B;&#x4E0E;INSERT&#x7684;NULL + pyodbc&#x7ED3;&#x5408;&#x4F7F;&#x7528;&#x7684;&#x95EE;&#x9898;&#xFF1B; pyodbc&#x9700;&#x8981;&#x4F20;&#x9012;&#x4E00;&#x4E2A;&#x7279;&#x6B8A;&#x5BF9;&#x8C61;&#x624D;&#x80FD;&#x4FDD;&#x6301;NULL&#x3002;</span><span class="yiyi-st" id="yiyi-484">As the <a class="reference internal" href="dialects_mysql.html#sqlalchemy.dialects.mysql.VARBINARY" title="sqlalchemy.dialects.mysql.VARBINARY"><code class="xref py py-class docutils literal"><span class="pre">VARBINARY</span></code></a> type is now usually the default for <a class="reference internal" href="core_type_basics.html#sqlalchemy.types.LargeBinary" title="sqlalchemy.types.LargeBinary"><code class="xref py py-class docutils literal"><span class="pre">LargeBinary</span></code></a> due to <a class="reference external" href="http://www.sqlalchemy.org/trac/ticket/3039">#3039</a>, this issue is partially a regression in 1.0. </span><span class="yiyi-st" id="yiyi-485">pymssql&#x9A71;&#x52A8;&#x7A0B;&#x5E8F;&#x4F3C;&#x4E4E;&#x4E0D;&#x53D7;&#x5F71;&#x54CD;&#x3002;<a class="changeset-link headerlink reference internal" href="#change-c172051273efb1de12dcb17d2c004ef7">&#xB6;</a></span></p><p><span class="yiyi-st" id="yiyi-486">&#x53C2;&#x8003;&#x6587;&#x732E;&#xFF1A;<a class="reference external" href="http://www.sqlalchemy.org/trac/ticket/3464">&#xFF03;3464</a></span></p></li></ul></div><div class="section" id="change-1.0.6-misc"><h3><span class="yiyi-st" id="yiyi-487">&#x6742;&#x9879;<a class="headerlink" href="#change-1.0.6-misc" title="Permalink to this headline">&#xB6; T0&gt;</a></span></h3><ul class="simple"><li><p id="change-1.0.6-10"><span class="yiyi-st" id="yiyi-488"><span class="target" id="change-b866346f95d8f41069d193ae0433445a"><strong>[bug] [documentation] </strong></span>Fixed an internal &#x201C;memoization&#x201D; routine for method types such that a Python descriptor is no longer used; repairs inspectability of these methods including support for Sphinx documentation.<a class="changeset-link headerlink reference internal" href="#change-b866346f95d8f41069d193ae0433445a">&#xB6;</a></span></p><p><span class="yiyi-st" id="yiyi-489">&#x53C2;&#x8003;&#x6587;&#x732E;&#xFF1A;<a class="reference external" href="http://www.sqlalchemy.org/trac/ticket/2077">&#xFF03;2077</a></span></p></li></ul></div></div><div class="section" id="change-1.0.5"><h2><span class="yiyi-st" id="yiyi-491">1.0.5 <a class="headerlink" href="#change-1.0.5" title="Permalink to this headline">&#xB6; T0&gt;</a></span></h2><span class="yiyi-st" id="yiyi-549">&#x53D1;&#x5E03;&#x65E5;&#x671F;&#xFF1A;2015&#x5E74;6&#x6708;7&#x65E5;</span><div class="section" id="change-1.0.5-orm"><h3><span class="yiyi-st" id="yiyi-492">ORM <a class="headerlink" href="#change-1.0.5-orm" title="Permalink to this headline">&#xB6; T0&gt;</a></span></h3><ul class="simple"><li><p id="change-1.0.5-0"><span class="yiyi-st" id="yiyi-493"><span class="target" id="change-6f39fdde16df0990bd8ef09baff4f315"><strong>[orm] [feature] </strong></span>Added new event <a class="reference internal" href="orm_events.html#sqlalchemy.orm.events.InstanceEvents.refresh_flush" title="sqlalchemy.orm.events.InstanceEvents.refresh_flush"><code class="xref py py-meth docutils literal"><span class="pre">InstanceEvents.refresh_flush()</span></code></a>, invoked when an INSERT or UPDATE level default value fetched via RETURNING or Python-side default is invoked within the flush process. </span><span class="yiyi-st" id="yiyi-494">&#x8FD9;&#x662F;&#x4E3A;&#x4E86;&#x63D0;&#x4F9B;&#x4E00;&#x4E2A;&#x4E0D;&#x518D;&#x4F5C;&#x4E3A;<a class="reference external" href="http://www.sqlalchemy.org/trac/ticket/3167">&#xFF03;3167</a>&#x7684;&#x7ED3;&#x679C;&#x5B58;&#x5728;&#x7684;&#x94A9;&#x5B50;&#xFF0C;&#x5176;&#x4E2D;&#x5728;flush&#x8FC7;&#x7A0B;&#x4E2D;&#x4E0D;&#x518D;&#x8C03;&#x7528;&#x5C5E;&#x6027;&#x548C;&#x9A8C;&#x8BC1;&#x4E8B;&#x4EF6;&#x3002;<a class="changeset-link headerlink reference internal" href="#change-6f39fdde16df0990bd8ef09baff4f315">&#xB6;</a></span></p><p><span class="yiyi-st" id="yiyi-495">&#x53C2;&#x8003;&#x6587;&#x732E;&#xFF1A;<a class="reference external" href="http://www.sqlalchemy.org/trac/ticket/3427">&#xFF03;3427</a></span></p></li><li><p id="change-1.0.5-1"><span class="yiyi-st" id="yiyi-496"><span class="target" id="change-8dff32ea855329842148a57ea75d4663"><strong>[orm] [bug] </strong></span>The &#x201C;lightweight named tuple&#x201D; used when a <a class="reference internal" href="orm_query.html#sqlalchemy.orm.query.Query" title="sqlalchemy.orm.query.Query"><code class="xref py py-class docutils literal"><span class="pre">Query</span></code></a> returns rows failed to implement <code class="docutils literal"><span class="pre">__slots__</span></code> correctly such that it still had a <code class="docutils literal"><span class="pre">__dict__</span></code>. </span><span class="yiyi-st" id="yiyi-497">&#x8FD9;&#x5DF2;&#x7ECF;&#x89E3;&#x51B3;&#x4E86;&#xFF0C;&#x4F46;&#x662F;&#x5728;&#x6781;&#x4E0D;&#x53EF;&#x80FD;&#x7684;&#x60C5;&#x51B5;&#x4E0B;&#xFF0C;&#x6709;&#x4EBA;&#x6B63;&#x5728;&#x4E3A;&#x8FD4;&#x56DE;&#x7684;&#x5143;&#x7EC4;&#x8D4B;&#x503C;&#xFF0C;&#x8FD9;&#x5C06;&#x4E0D;&#x518D;&#x6709;&#x6548;&#x3002;<a class="changeset-link headerlink reference internal" href="#change-8dff32ea855329842148a57ea75d4663">&#xB6;</a></span></p><p><span class="yiyi-st" id="yiyi-498">&#x53C2;&#x8003;&#x6587;&#x732E;&#xFF1A;<a class="reference external" href="http://www.sqlalchemy.org/trac/ticket/3420">&#xFF03;3420</a></span></p></li></ul></div><div class="section" id="change-1.0.5-engine"><h3><span class="yiyi-st" id="yiyi-499">&#x53D1;&#x52A8;&#x673A;<a class="headerlink" href="#change-1.0.5-engine" title="Permalink to this headline">&#xB6; T0&gt;</a></span></h3><ul class="simple"><li><p id="change-1.0.5-2"><span class="yiyi-st" id="yiyi-500"><span class="target" id="change-8fa73745239a3c7507b7d191c9f3578e"><strong>[engine] [feature] </strong></span>&#x6DFB;&#x52A0;&#x4E86;&#x65B0;&#x7684;&#x5F15;&#x64CE;&#x4E8B;&#x4EF6;<a class="reference internal" href="core_events.html#sqlalchemy.events.ConnectionEvents.engine_disposed" title="sqlalchemy.events.ConnectionEvents.engine_disposed"><code class="xref py py-meth docutils literal"><span class="pre">ConnectionEvents.engine_disposed()</span></code></a>&#x3002;</span><span class="yiyi-st" id="yiyi-501">&#x5728;<a class="reference internal" href="core_connections.html#sqlalchemy.engine.Engine.dispose" title="sqlalchemy.engine.Engine.dispose"><code class="xref py py-meth docutils literal"><span class="pre">Engine.dispose()</span></code></a>&#x65B9;&#x6CD5;&#x88AB;&#x8C03;&#x7528;&#x540E;&#x8C03;&#x7528;&#x3002;<a class="changeset-link headerlink reference internal" href="#change-8fa73745239a3c7507b7d191c9f3578e">&#xB6;</a></span></p><p></p></li><li><p id="change-1.0.5-3"><span class="yiyi-st" id="yiyi-502"><span class="target" id="change-7cad7183efd71f8b53336f756c01bd4d"><strong>[engine] [feature] </strong></span>Adjustments to the engine plugin hook, such that the <a class="reference internal" href="core_engines.html#sqlalchemy.engine.url.URL.get_dialect" title="sqlalchemy.engine.url.URL.get_dialect"><code class="xref py py-meth docutils literal"><span class="pre">URL.get_dialect()</span></code></a> method will continue to return the ultimate <a class="reference internal" href="core_internals.html#sqlalchemy.engine.interfaces.Dialect" title="sqlalchemy.engine.interfaces.Dialect"><code class="xref py py-class docutils literal"><span class="pre">Dialect</span></code></a> object when a dialect plugin is used, without the need for the caller to be aware of the <a class="reference internal" href="core_internals.html#sqlalchemy.engine.interfaces.Dialect.get_dialect_cls" title="sqlalchemy.engine.interfaces.Dialect.get_dialect_cls"><code class="xref py py-meth docutils literal"><span class="pre">Dialect.get_dialect_cls()</span></code></a> method.<a class="changeset-link headerlink reference internal" href="#change-7cad7183efd71f8b53336f756c01bd4d">&#xB6;</a></span></p><p><span class="yiyi-st" id="yiyi-503">&#x53C2;&#x8003;&#x6587;&#x732E;&#xFF1A;<a class="reference external" href="http://www.sqlalchemy.org/trac/ticket/3379">&#xFF03;3379</a></span></p></li><li><p id="change-1.0.5-4"><span class="yiyi-st" id="yiyi-504"><span class="target" id="change-5aaf85c9f6df16c1044c4ad2c76bb2c2"><strong>[engine] [bug] </strong></span>Fixed bug where known boolean values used by <a class="reference internal" href="core_engines.html#sqlalchemy.engine_from_config" title="sqlalchemy.engine_from_config"><code class="xref py py-func docutils literal"><span class="pre">engine_from_config()</span></code></a> were not being parsed correctly; these included <code class="docutils literal"><span class="pre">pool_threadlocal</span></code> and the psycopg2 argument <code class="docutils literal"><span class="pre">use_native_unicode</span></code>.<a class="changeset-link headerlink reference internal" href="#change-5aaf85c9f6df16c1044c4ad2c76bb2c2">&#xB6;</a></span></p><p><span class="yiyi-st" id="yiyi-505">&#x53C2;&#x8003;&#x6587;&#x732E;&#xFF1A;<a class="reference external" href="http://www.sqlalchemy.org/trac/ticket/3435">&#xFF03;3435</a></span></p></li><li><p id="change-1.0.5-5"><span class="yiyi-st" id="yiyi-506"><span class="target" id="change-cb20239967e5596291f1b8c8d0932231"><strong>[engine] [bug] </strong></span>Added support for the case of the misbehaving DBAPI that has pep-249 exception names linked to exception classes of an entirely different name, preventing SQLAlchemy&#x2019;s own exception wrapping from wrapping the error appropriately. </span><span class="yiyi-st" id="yiyi-507">The SQLAlchemy dialect in use needs to implement a new accessor <a class="reference internal" href="core_internals.html#sqlalchemy.engine.default.DefaultDialect.dbapi_exception_translation_map" title="sqlalchemy.engine.default.DefaultDialect.dbapi_exception_translation_map"><code class="xref py py-attr docutils literal"><span class="pre">DefaultDialect.dbapi_exception_translation_map</span></code></a> to support this feature; this is implemented now for the py-postgresql dialect.<a class="changeset-link headerlink reference internal" href="#change-cb20239967e5596291f1b8c8d0932231">&#xB6;</a></span></p><p><span class="yiyi-st" id="yiyi-508">&#x53C2;&#x8003;&#x6587;&#x732E;&#xFF1A;<a class="reference external" href="http://www.sqlalchemy.org/trac/ticket/3421">&#xFF03;3421</a></span></p></li><li><p id="change-1.0.5-6"><span class="yiyi-st" id="yiyi-509"><span class="target" id="change-82a9e2855bd62701c659a0acd3b49568"><strong>[engine] [bug] </strong></span>Fixed bug involving the case when pool checkout event handlers are used and connection attempts are made in the handler itself which fail, the owning connection record would not be freed until the stack trace of the connect error itself were freed. </span><span class="yiyi-st" id="yiyi-510">&#x5BF9;&#x4E8E;&#x4EC5;&#x4F7F;&#x7528;&#x5355;&#x4E2A;&#x8FDE;&#x63A5;&#x7684;&#x6D4B;&#x8BD5;&#x6C60;&#x7684;&#x60C5;&#x51B5;&#xFF0C;&#x8FD9;&#x610F;&#x5473;&#x7740;&#x8BE5;&#x6C60;&#x5C06;&#x88AB;&#x5B8C;&#x5168;&#x68C0;&#x51FA;&#xFF0C;&#x76F4;&#x5230;&#x8BE5;&#x5806;&#x6808;&#x8DDF;&#x8E2A;&#x88AB;&#x91CA;&#x653E;&#x3002;</span><span class="yiyi-st" id="yiyi-511">&#x8FD9;&#x4E3B;&#x8981;&#x5F71;&#x54CD;&#x975E;&#x5E38;&#x5177;&#x4F53;&#x7684;&#x8C03;&#x8BD5;&#x573A;&#x666F;&#xFF0C;&#x5E76;&#x4E14;&#x4E0D;&#x53EF;&#x80FD;&#x5728;&#x4EFB;&#x4F55;&#x751F;&#x4EA7;&#x5E94;&#x7528;&#x7A0B;&#x5E8F;&#x4E2D;&#x663E;&#x793A;&#x51FA;&#x6765;&#x3002;</span><span class="yiyi-st" id="yiyi-512">&#x8BE5;&#x4FEE;&#x8865;&#x7A0B;&#x5E8F;&#x5728;&#x91CD;&#x65B0;&#x5F15;&#x53D1;&#x6355;&#x83B7;&#x7684;&#x5F02;&#x5E38;&#x4E4B;&#x524D;&#x5E94;&#x7528;&#x663E;&#x5F0F;&#x7B7E;&#x5165;&#x8BB0;&#x5F55;&#x3002;<a class="changeset-link headerlink reference internal" href="#change-82a9e2855bd62701c659a0acd3b49568">&#xB6;</a></span></p><p><span class="yiyi-st" id="yiyi-513">&#x53C2;&#x8003;&#x6587;&#x732E;&#xFF1A;<a class="reference external" href="http://www.sqlalchemy.org/trac/ticket/3419">&#xFF03;3419</a></span></p></li></ul></div><div class="section" id="change-1.0.5-sql"><h3><span class="yiyi-st" id="yiyi-514">SQL <a class="headerlink" href="#change-1.0.5-sql" title="Permalink to this headline">&#xB6; T0&gt;</a></span></h3><ul class="simple"><li><p id="change-1.0.5-7"><span class="yiyi-st" id="yiyi-515"><span class="target" id="change-6a7bcfa66a36b1ded7b8cf68cab71db2"><strong>[sql] [feature] </strong></span>&#x589E;&#x52A0;&#x4E86;&#x5BF9;<a class="reference internal" href="core_dml.html#sqlalchemy.sql.expression.Insert.from_select" title="sqlalchemy.sql.expression.Insert.from_select"><code class="xref py py-meth docutils literal"><span class="pre">Insert.from_select()</span></code></a>&#x4E2D;&#x5B58;&#x5728;&#x7684;SELECT&#x6240;&#x4F7F;&#x7528;&#x7684;CTE&#x7684;&#x5B98;&#x65B9;&#x652F;&#x6301;&#x3002;</span><span class="yiyi-st" id="yiyi-516">&#x8FD9;&#x79CD;&#x884C;&#x4E3A;&#x610F;&#x5916;&#x5730;&#x4E00;&#x76F4;&#x8FD0;&#x884C;&#x5230;0.9.9&#xFF0C;&#x5F53;&#x5B83;&#x7531;&#x4E8E;&#x4F5C;&#x4E3A;<a class="reference external" href="http://www.sqlalchemy.org/trac/ticket/3248">&#xFF03;3248</a>&#x7684;&#x4E00;&#x90E8;&#x5206;&#x7684;&#x4E0D;&#x76F8;&#x5173;&#x66F4;&#x6539;&#x800C;&#x4E0D;&#x518D;&#x8D77;&#x4F5C;&#x7528;&#x65F6;&#x3002;</span><span class="yiyi-st" id="yiyi-517">&#x8BF7;&#x6CE8;&#x610F;&#xFF0C;&#x8FD9;&#x662F;&#x5728;SELECT&#x4E4B;&#x524D;&#x7684;INSERT&#x4E4B;&#x540E;&#x7684;WITH&#x5B50;&#x53E5;&#x7684;&#x5448;&#x73B0;&#xFF1B;&#x5728;INSERT&#xFF0C;UPDATE&#xFF0C;DELETE&#x9876;&#x5C42;&#x5448;&#x73B0;&#x7684;CTE&#x7684;&#x5168;&#x90E8;&#x529F;&#x80FD;&#x662F;&#x9488;&#x5BF9;&#x4EE5;&#x540E;&#x7248;&#x672C;&#x7684;&#x4E00;&#x9879;&#x65B0;&#x529F;&#x80FD;&#x3002;<a class="changeset-link headerlink reference internal" href="#change-6a7bcfa66a36b1ded7b8cf68cab71db2">&#xB6;</a></span></p><p><span class="yiyi-st" id="yiyi-518">&#x8FD9;&#x4E2A;&#x6539;&#x53D8;&#x4E5F;&#x88AB;<strong>backported</strong>&#x6539;&#x4E3A;&#xFF1A;0.9.10</span></p><p><span class="yiyi-st" id="yiyi-519">&#x53C2;&#x8003;&#x6587;&#x732E;&#xFF1A;<a class="reference external" href="http://www.sqlalchemy.org/trac/ticket/3418">&#xFF03;3418</a></span></p></li></ul></div><div class="section" id="change-1.0.5-postgresql"><h3><span class="yiyi-st" id="yiyi-520">&#x7684;PostgreSQL <a class="headerlink" href="#change-1.0.5-postgresql" title="Permalink to this headline">&#xB6; T0&gt;</a></span></h3><ul class="simple"><li><p id="change-1.0.5-8"><span class="yiyi-st" id="yiyi-521"><span class="target" id="change-5e1e9b8242becfeda0232f1306c98782"><strong>[postgresql] [bug] [pypy] </strong></span>Repaired some typing and test issues related to the pypy psycopg2cffi dialect, in particular that the current 2.7.0 version does not have native support for the JSONB type. </span><span class="yiyi-st" id="yiyi-522">psycopg2&#x529F;&#x80FD;&#x7684;&#x7248;&#x672C;&#x68C0;&#x6D4B;&#x5DF2;&#x88AB;&#x8C03;&#x6574;&#x4E3A;psycopg2cffi&#x7684;&#x7279;&#x5B9A;&#x5B50;&#x7248;&#x672C;&#x3002;</span><span class="yiyi-st" id="yiyi-523">&#x6B64;&#x5916;&#xFF0C;psycopg2cffi&#x4E0B;&#x7684;&#x5168;&#x7CFB;&#x5217;psycopg2&#x529F;&#x80FD;&#x5DF2;&#x542F;&#x7528;&#x6D4B;&#x8BD5;&#x8986;&#x76D6;&#x3002;<a class="changeset-link headerlink reference internal" href="#change-5e1e9b8242becfeda0232f1306c98782">&#xB6;</a></span></p><p><span class="yiyi-st" id="yiyi-524">&#x53C2;&#x8003;&#x6587;&#x732E;&#xFF1A;<a class="reference external" href="http://www.sqlalchemy.org/trac/ticket/3439">&#xFF03;3439</a></span></p></li></ul></div><div class="section" id="change-1.0.5-mssql"><h3><span class="yiyi-st" id="yiyi-525">MSSQL <a class="headerlink" href="#change-1.0.5-mssql" title="Permalink to this headline">&#xB6; T0&gt;</a></span></h3><ul class="simple"><li><p id="change-1.0.5-9"><span class="yiyi-st" id="yiyi-526"><span class="target" id="change-2f1eef92d4aa9867a4dd243e49dee047"><strong>[mssql] [bug] </strong></span>&#x4E3A;MSSQL&#x65B9;&#x8A00;<code class="docutils literal"><span class="pre">legacy_schema_aliasing</span></code>&#x6DFB;&#x52A0;&#x4E86;&#x4E00;&#x4E2A;&#x65B0;&#x7684;&#x65B9;&#x8A00;&#x6807;&#x5FD7;&#xFF0C;&#x5F53;&#x8BBE;&#x7F6E;&#x4E3A;False&#x65F6;&#xFF0C;&#x5C06;&#x7981;&#x7528;&#x4E00;&#x4E2A;&#x975E;&#x5E38;&#x9648;&#x65E7;&#x548C;&#x8FC7;&#x65F6;&#x7684;&#x884C;&#x4E3A;&#xFF0C;&#x5C06;&#x6240;&#x6709;&#x6A21;&#x5F0F;&#x9650;&#x5B9A;&#x7684;&#x8868;&#x540D;&#x79F0;&#x8F6C;&#x6362;&#x4E3A;&#x522B;&#x540D;&#xFF0C;&#x4EE5;&#x89E3;&#x51B3;SQL Server&#x65E0;&#x6CD5;&#x5728;&#x6240;&#x6709;&#x60C5;&#x51B5;&#x4E0B;&#x89E3;&#x6790;&#x591A;&#x90E8;&#x5206;&#x6807;&#x8BC6;&#x7B26;&#x540D;&#x79F0;&#x7684;&#x65E7;&#x4E14;&#x4E0D;&#x518D;&#x53EF;&#x5B9A;&#x4F4D;&#x7684;&#x95EE;&#x9898;&#x3002;</span><span class="yiyi-st" id="yiyi-527">&#x8BE5;&#x884C;&#x4E3A;&#x963B;&#x6B62;&#x66F4;&#x590D;&#x6742;&#x7684;&#x8BED;&#x53E5;&#x6B63;&#x5E38;&#x5DE5;&#x4F5C;&#xFF0C;&#x5305;&#x62EC;&#x4F7F;&#x7528;&#x63D0;&#x793A;&#x7684;&#x8BED;&#x53E5;&#x4EE5;&#x53CA;&#x5D4C;&#x5165;&#x76F8;&#x5173;SELECT&#x8BED;&#x53E5;&#x7684;CRUD&#x8BED;&#x53E5;&#x3002;</span><span class="yiyi-st" id="yiyi-528">&#x800C;&#x4E0D;&#x662F;&#x7EE7;&#x7EED;&#x4FEE;&#x590D;&#x8BE5;&#x529F;&#x80FD;&#x4EE5;&#x4F7F;&#x7528;&#x66F4;&#x590D;&#x6742;&#x7684;&#x8BED;&#x53E5;&#xFF0C;&#x6700;&#x597D;&#x7981;&#x7528;&#x5B83;&#xFF0C;&#x56E0;&#x4E3A;&#x4EFB;&#x4F55;&#x73B0;&#x4EE3;SQL&#x670D;&#x52A1;&#x5668;&#x7248;&#x672C;&#x90FD;&#x4E0D;&#x518D;&#x9700;&#x8981;&#x5B83;&#x3002;</span><span class="yiyi-st" id="yiyi-529">&#x5BF9;&#x4E8E;1.0.x&#x7CFB;&#x5217;&#xFF0C;&#x8BE5;&#x6807;&#x5FD7;&#x9ED8;&#x8BA4;&#x4E3A;True&#xFF0C;&#x6B64;&#x7248;&#x672C;&#x7CFB;&#x5217;&#x7684;&#x5F53;&#x524D;&#x884C;&#x4E3A;&#x4E0D;&#x53D8;&#x3002;</span><span class="yiyi-st" id="yiyi-530">&#x5728;1.1&#x7CFB;&#x5217;&#x4E2D;&#xFF0C;&#x5B83;&#x5C06;&#x9ED8;&#x8BA4;&#x4E3A;False&#x3002;</span><span class="yiyi-st" id="yiyi-531">&#x5BF9;&#x4E8E;1.0&#x7CFB;&#x5217;&#xFF0C;&#x5982;&#x679C;&#x672A;&#x660E;&#x786E;&#x8BBE;&#x7F6E;&#x4EFB;&#x4F55;&#x503C;&#xFF0C;&#x5219;&#x5728;&#x8BED;&#x53E5;&#x4E2D;&#x7B2C;&#x4E00;&#x6B21;&#x4F7F;&#x7528;&#x6A21;&#x5F0F;&#x9650;&#x5B9A;&#x8868;&#x65F6;&#x4F1A;&#x53D1;&#x51FA;&#x8B66;&#x544A;&#xFF0C;&#x8FD9;&#x8868;&#x660E;&#x8BE5;&#x6807;&#x5FD7;&#x5BF9;&#x4E8E;&#x6240;&#x6709;&#x73B0;&#x4EE3;SQL Server&#x7248;&#x672C;&#x90FD;&#x8BBE;&#x7F6E;&#x4E3A;False&#x3002;</span></p><div class="admonition seealso"><p class="first admonition-title"><span class="yiyi-st" id="yiyi-532">&#x4E5F;&#x53EF;&#x4EE5;&#x770B;&#x770B;</span></p><p class="last"><span class="yiyi-st" id="yiyi-533"><a class="reference internal" href="dialects_mssql.html#legacy-schema-rendering"><span>Legacy Schema Mode</span></a></span></p></div><span class="yiyi-st" id="yiyi-535"> <a class="changeset-link headerlink reference internal" href="#change-2f1eef92d4aa9867a4dd243e49dee047">&#xB6;</a></span><p><span class="yiyi-st" id="yiyi-534">&#x53C2;&#x8003;&#x6587;&#x732E;&#xFF1A;<a class="reference external" href="http://www.sqlalchemy.org/trac/ticket/3430">&#xFF03;3430</a>&#xFF0C;<a class="reference external" href="http://www.sqlalchemy.org/trac/ticket/3424">&#xFF03;3424</a></span></p></li></ul></div><div class="section" id="change-1.0.5-misc"><h3><span class="yiyi-st" id="yiyi-536">&#x6742;&#x9879;<a class="headerlink" href="#change-1.0.5-misc" title="Permalink to this headline">&#xB6; T0&gt;</a></span></h3><ul class="simple"><li><p id="change-1.0.5-10"><span class="yiyi-st" id="yiyi-537"><span class="target" id="change-86d91bf49f3ad357db03bf080fc3f56a"><strong>[feature] [ext] </strong></span>Added support for <code class="docutils literal"><span class="pre">*args</span></code> to be passed to the baked query initial callable, in the same way that <code class="docutils literal"><span class="pre">*args</span></code> are supported for the <a class="reference internal" href="orm_extensions_baked.html#sqlalchemy.ext.baked.BakedQuery.add_criteria" title="sqlalchemy.ext.baked.BakedQuery.add_criteria"><code class="xref py py-meth docutils literal"><span class="pre">BakedQuery.add_criteria()</span></code></a> and <a class="reference internal" href="orm_extensions_baked.html#sqlalchemy.ext.baked.BakedQuery.with_criteria" title="sqlalchemy.ext.baked.BakedQuery.with_criteria"><code class="xref py py-meth docutils literal"><span class="pre">BakedQuery.with_criteria()</span></code></a> methods. </span><span class="yiyi-st" id="yiyi-538">&#x6700;&#x521D;&#x7684;PR&#x793C;&#x8282;&#x76F4;&#x63A5;&#x7531;&#x7530;&#x4E2D;&#x76F4;&#x5F66;&#x63D0;&#x4F9B;&#x3002;<a class="changeset-link headerlink reference internal" href="#change-86d91bf49f3ad357db03bf080fc3f56a">&#xB6;</a></span></p><p><span class="yiyi-st" id="yiyi-539">&#x53C2;&#x8003;&#xFF1A;<a class="reference external" href="https://bitbucket.org/zzzeek/sqlalchemy/pull-request/54">&#x62C9;&#x8BF7;&#x6C42;bitbucket&#xFF1A;54</a></span></p></li><li><p id="change-1.0.5-11"><span class="yiyi-st" id="yiyi-540"><span class="target" id="change-45b215195b147f63665e4cc884206096"><strong>[feature] [ext] </strong></span>&#x4E3A;<a class="reference internal" href="orm_extensions_mutable.html#sqlalchemy.ext.mutable.MutableBase" title="sqlalchemy.ext.mutable.MutableBase"><code class="xref py py-class docutils literal"><span class="pre">MutableBase</span></code></a> <code class="xref py py-meth docutils literal"><span class="pre">MutableBase._get_listen_keys()</span></code>&#x6DFB;&#x52A0;&#x4E86;&#x4E00;&#x4E2A;&#x65B0;&#x7684;&#x534A;&#x516C;&#x5F00;&#x65B9;&#x6CD5;&#x3002;</span><span class="yiyi-st" id="yiyi-541">Overriding this method is needed in the case where a <a class="reference internal" href="orm_extensions_mutable.html#sqlalchemy.ext.mutable.MutableBase" title="sqlalchemy.ext.mutable.MutableBase"><code class="xref py py-class docutils literal"><span class="pre">MutableBase</span></code></a> subclass needs events to propagate for attribute keys other than the key to which the mutable type is associated with, when intercepting the <a class="reference internal" href="orm_events.html#sqlalchemy.orm.events.InstanceEvents.refresh" title="sqlalchemy.orm.events.InstanceEvents.refresh"><code class="xref py py-meth docutils literal"><span class="pre">InstanceEvents.refresh()</span></code></a> or <a class="reference internal" href="orm_events.html#sqlalchemy.orm.events.InstanceEvents.refresh_flush" title="sqlalchemy.orm.events.InstanceEvents.refresh_flush"><code class="xref py py-meth docutils literal"><span class="pre">InstanceEvents.refresh_flush()</span></code></a> events. </span><span class="yiyi-st" id="yiyi-542">&#x5F53;&#x524D;&#x7684;&#x4F8B;&#x5B50;&#x662F;&#x4F7F;&#x7528;<a class="reference internal" href="orm_extensions_mutable.html#sqlalchemy.ext.mutable.MutableComposite" title="sqlalchemy.ext.mutable.MutableComposite"><code class="xref py py-class docutils literal"><span class="pre">MutableComposite</span></code></a>&#x7684;&#x5408;&#x6210;&#x3002;<a class="changeset-link headerlink reference internal" href="#change-45b215195b147f63665e4cc884206096">&#xB6;</a></span></p><p><span class="yiyi-st" id="yiyi-543">&#x53C2;&#x8003;&#x6587;&#x732E;&#xFF1A;<a class="reference external" href="http://www.sqlalchemy.org/trac/ticket/3427">&#xFF03;3427</a></span></p></li><li><p id="change-1.0.5-12"><span class="yiyi-st" id="yiyi-544"><span class="target" id="change-f20e8c1e79cd741af716e380224f1b6b"><strong>[bug] [ext] </strong></span>Fixed regression in the <a class="reference internal" href="orm_extensions_mutable.html#module-sqlalchemy.ext.mutable" title="sqlalchemy.ext.mutable"><code class="xref py py-mod docutils literal"><span class="pre">sqlalchemy.ext.mutable</span></code></a> extension as a result of the bugfix for <a class="reference external" href="http://www.sqlalchemy.org/trac/ticket/3167">#3167</a>, where attribute and validation events are no longer called within the flush process. </span><span class="yiyi-st" id="yiyi-545">&#x5982;&#x679C;&#x5217;&#x7EA7;&#x522B;&#x7684;Python&#x7AEF;&#x9ED8;&#x8BA4;&#x8D1F;&#x8D23;&#x5728;INSERT&#x6216;UPDATE&#x4E0A;&#x751F;&#x6210;&#x65B0;&#x503C;&#xFF0C;&#x6216;&#x8005;&#x5728;RETURNING&#x5B50;&#x53E5;&#x4E2D;&#x4E3A;&#x201C;&#x9884;&#x8BBE;&#x9ED8;&#x8BA4;&#x503C;&#x201D;&#x6A21;&#x5F0F;&#x63D0;&#x53D6;&#x503C;&#xFF0C;&#x5219;&#x53EF;&#x53D8;&#x6269;&#x5C55;&#x4F9D;&#x8D56;&#x4E8E;&#x6B64;&#x884C;&#x4E3A;&#x3002;</span><span class="yiyi-st" id="yiyi-546">&#x65B0;&#x503C;&#x5728;&#x4EBA;&#x53E3;&#x7A20;&#x5BC6;&#x65F6;&#x4E0D;&#x4F1A;&#x53D7;&#x5230;&#x4EFB;&#x4F55;&#x4E8B;&#x4EF6;&#x7684;&#x5F71;&#x54CD;&#xFF0C;&#x5E76;&#x4E14;&#x53EF;&#x53D8;&#x5EF6;&#x4F38;&#x65E0;&#x6CD5;&#x5EFA;&#x7ACB;&#x9002;&#x5F53;&#x7684;&#x5F3A;&#x5236;&#x6216;&#x5386;&#x53F2;&#x8046;&#x542C;&#x3002;</span><span class="yiyi-st" id="yiyi-547">&#x6DFB;&#x52A0;&#x4E86;&#x4E00;&#x4E2A;&#x65B0;&#x4E8B;&#x4EF6;<a class="reference internal" href="orm_events.html#sqlalchemy.orm.events.InstanceEvents.refresh_flush" title="sqlalchemy.orm.events.InstanceEvents.refresh_flush"><code class="xref py py-meth docutils literal"><span class="pre">InstanceEvents.refresh_flush()</span></code></a>&#xFF0C;&#x8FD9;&#x4E2A;&#x53EF;&#x53D8;&#x6269;&#x5C55;&#x73B0;&#x5728;&#x7528;&#x4E8E;&#x8FD9;&#x4E2A;&#x7528;&#x4F8B;&#x3002;<a class="changeset-link headerlink reference internal" href="#change-f20e8c1e79cd741af716e380224f1b6b">&#xB6;</a></span></p><p><span class="yiyi-st" id="yiyi-548">&#x53C2;&#x8003;&#x6587;&#x732E;&#xFF1A;<a class="reference external" href="http://www.sqlalchemy.org/trac/ticket/3427">&#xFF03;3427</a></span></p></li></ul></div></div><div class="section" id="change-1.0.4"><h2><span class="yiyi-st" id="yiyi-550">1.0.4 <a class="headerlink" href="#change-1.0.4" title="Permalink to this headline">&#xB6; T0&gt;</a></span></h2><span class="yiyi-st" id="yiyi-573">&#x53D1;&#x5E03;&#x65E5;&#x671F;&#xFF1A;2015&#x5E74;5&#x6708;7&#x65E5;</span><div class="section" id="change-1.0.4-orm"><h3><span class="yiyi-st" id="yiyi-551">ORM <a class="headerlink" href="#change-1.0.4-orm" title="Permalink to this headline">&#xB6; T0&gt;</a></span></h3><ul class="simple"><li><p id="change-1.0.4-0"><span class="yiyi-st" id="yiyi-552"><span class="target" id="change-66020c540100c79f6234033e002fbaeb"><strong>[orm] [bug] </strong></span>Fixed unexpected-use regression where in the odd case that the primaryjoin of a relationship involved comparison to an unhashable type such as an HSTORE, lazy loads would fail due to a hash-oriented check on the statement parameters, modified in 1.0 as a result of <a class="reference external" href="http://www.sqlalchemy.org/trac/ticket/3061">#3061</a> to use hashing and modified in <a class="reference external" href="http://www.sqlalchemy.org/trac/ticket/3368">#3368</a> to occur in cases more common than &#x201C;load on pending&#x201D;. </span><span class="yiyi-st" id="yiyi-553">&#x73B0;&#x5728;&#x5148;&#x68C0;&#x67E5;<code class="docutils literal"><span class="pre">__hash__</span></code>&#x5C5E;&#x6027;&#x7684;&#x503C;&#x3002;<a class="changeset-link headerlink reference internal" href="#change-66020c540100c79f6234033e002fbaeb">&#xB6;</a></span></p><p><span class="yiyi-st" id="yiyi-554">&#x53C2;&#x8003;&#x6587;&#x732E;&#xFF1A;<a class="reference external" href="http://www.sqlalchemy.org/trac/ticket/3416">&#xFF03;3416</a></span></p></li><li><p id="change-1.0.4-1"><span class="yiyi-st" id="yiyi-555"><span class="target" id="change-ea65721f797c6d148bc5fc07146b2cb4"><strong>[orm] [bug] </strong></span>Liberalized an assertion that was added as part of <a class="reference external" href="http://www.sqlalchemy.org/trac/ticket/3347">#3347</a> to protect against unknown conditions when splicing inner joins together within joined eager loads with <code class="docutils literal"><span class="pre">innerjoin=True</span></code>; if some of the joins use a &#x201C;secondary&#x201D; table, the assertion needs to unwrap further joins in order to pass.<a class="changeset-link headerlink reference internal" href="#change-ea65721f797c6d148bc5fc07146b2cb4">&#xB6;</a></span></p><p><span class="yiyi-st" id="yiyi-556">&#x53C2;&#x8003;&#x6587;&#x732E;&#xFF1A;<a class="reference external" href="http://www.sqlalchemy.org/trac/ticket/3412">&#xFF03;3412</a>&#xFF0C;<a class="reference external" href="http://www.sqlalchemy.org/trac/ticket/3347">&#xFF03;3347</a></span></p></li><li><p id="change-1.0.4-2"><span class="yiyi-st" id="yiyi-557"><span class="target" id="change-20137d7b96aff19d996aa7342e06ff37"><strong>[orm] [bug] </strong></span>&#x4FEE;&#x590D;/&#x6DFB;&#x52A0;&#x5230;&#x6D4B;&#x8BD5;&#x4E2D;&#x7684;&#x66F4;&#x591A;&#x8868;&#x8FBE;&#x5F0F;&#x88AB;&#x62A5;&#x544A;&#x4E3A;&#x5931;&#x8D25;&#xFF0C;&#x65B0;&#x7684;&apos;&#x5B9E;&#x4F53;&apos;&#x952E;&#x503C;&#x6DFB;&#x52A0;&#x5230;<a class="reference internal" href="orm_query.html#sqlalchemy.orm.query.Query.column_descriptions" title="sqlalchemy.orm.query.Query.column_descriptions"><code class="xref py py-attr docutils literal"><span class="pre">Query.column_descriptions</span></code></a>&#x53D1;&#x73B0;&#x201C;from&#x201D;&#x5B50;&#x53E5;&#x518D;&#x6B21;&#x88AB;&#x4FEE;&#x6539;&#x4EE5;&#x5BB9;&#x7EB3;&#x6765;&#x81EA;&#x522B;&#x540D;&#x7C7B;&#x7684;&#x5217;&#xFF0C;&#x5E76;&#x4E14;&#x5728;&#x8FD9;&#x4E9B;&#x60C5;&#x51B5;&#x4E0B;&#x62A5;&#x544A;&#x201C;&#x522B;&#x540D;&#x201D;&#x6807;&#x5FD7;&#x7684;&#x6B63;&#x786E;&#x503C;&#x3002;<a class="changeset-link headerlink reference internal" href="#change-20137d7b96aff19d996aa7342e06ff37"></a></span></p><p><span class="yiyi-st" id="yiyi-558">&#x53C2;&#x8003;&#x6587;&#x732E;&#xFF1A;<a class="reference external" href="http://www.sqlalchemy.org/trac/ticket/3409">&#xFF03;3409</a>&#xFF0C;<a class="reference external" href="http://www.sqlalchemy.org/trac/ticket/3320">&#xFF03;3320</a></span></p></li></ul></div><div class="section" id="change-1.0.4-schema"><h3><span class="yiyi-st" id="yiyi-559">&#x67B6;&#x6784;<a class="headerlink" href="#change-1.0.4-schema" title="Permalink to this headline">&#xB6; T0&gt;</a></span></h3><ul class="simple"><li><p id="change-1.0.4-3"><span class="yiyi-st" id="yiyi-560"><span class="target" id="change-b46fad3ee45e73a10c8ae452bcd560ff"><strong>[schema] [bug] </strong></span>Fixed bug in enhanced constraint-attachment logic introduced in <a class="reference external" href="http://www.sqlalchemy.org/trac/ticket/3341">#3341</a> where in the unusual case of a constraint that refers to a mixture of <a class="reference internal" href="core_metadata.html#sqlalchemy.schema.Column" title="sqlalchemy.schema.Column"><code class="xref py py-class docutils literal"><span class="pre">Column</span></code></a> objects and string column names at the same time, the auto-attach-on-column-attach logic will be skipped; for the constraint to be auto-attached in this case, all columns must be assembled on the target table up front. </span><span class="yiyi-st" id="yiyi-561">&#x4E3A;&#x8FC1;&#x79FB;&#x6587;&#x6863;&#x6DFB;&#x52A0;&#x4E86;&#x5173;&#x4E8E;&#x539F;&#x59CB;&#x529F;&#x80FD;&#x4EE5;&#x53CA;&#x6B64;&#x66F4;&#x6539;&#x7684;&#x65B0;&#x90E8;&#x5206;&#x3002;</span></p><div class="admonition seealso"><p class="first admonition-title"><span class="yiyi-st" id="yiyi-562">&#x4E5F;&#x53EF;&#x4EE5;&#x770B;&#x770B;</span></p><p class="last"><span class="yiyi-st" id="yiyi-563"><a class="reference internal" href="migration_10.html#change-3341"><span>Constraints referring to unattached Columns can auto-attach to the Table when their referred columns are attached</span></a></span></p></div><span class="yiyi-st" id="yiyi-565"> <a class="changeset-link headerlink reference internal" href="#change-b46fad3ee45e73a10c8ae452bcd560ff">&#xB6;</a></span><p><span class="yiyi-st" id="yiyi-564">&#x53C2;&#x8003;&#x6587;&#x732E;&#xFF1A;<a class="reference external" href="http://www.sqlalchemy.org/trac/ticket/3411">&#xFF03;3411</a></span></p></li></ul></div><div class="section" id="change-1.0.4-misc"><h3><span class="yiyi-st" id="yiyi-566">&#x6742;&#x9879;<a class="headerlink" href="#change-1.0.4-misc" title="Permalink to this headline">&#xB6; T0&gt;</a></span></h3><ul class="simple"><li><p id="change-1.0.4-4"><span class="yiyi-st" id="yiyi-567"><span class="target" id="change-241707a9f4ceecb1f1f621bdd850aee5"><strong>[bug] [ext] </strong></span>Fixed bug where when using extended attribute instrumentation system, the correct exception would not be raised when <a class="reference internal" href="orm_mapping_api.html#sqlalchemy.orm.class_mapper" title="sqlalchemy.orm.class_mapper"><code class="xref py py-func docutils literal"><span class="pre">class_mapper()</span></code></a> were called with an invalid input that also happened to not be weak referencable, such as an integer.<a class="changeset-link headerlink reference internal" href="#change-241707a9f4ceecb1f1f621bdd850aee5">&#xB6;</a></span></p><p><span class="yiyi-st" id="yiyi-568">&#x8FD9;&#x4E2A;&#x6539;&#x53D8;&#x4E5F;&#x88AB;<strong>backported</strong>&#x6539;&#x4E3A;&#xFF1A;0.9.10</span></p><p><span class="yiyi-st" id="yiyi-569">&#x53C2;&#x8003;&#x6587;&#x732E;&#xFF1A;<a class="reference external" href="http://www.sqlalchemy.org/trac/ticket/3408">&#xFF03;3408</a></span></p></li><li><p id="change-1.0.4-5"><span class="yiyi-st" id="yiyi-570"><span class="target" id="change-059d5e52209320ca09099434293d4ddd"><strong>[bug] [tests] [pypy] </strong></span>&#x4FEE;&#x6B63;&#x4E86;&#x963B;&#x6B62;&#x201C;pypy setup.py test&#x201D;&#x6B63;&#x5E38;&#x5DE5;&#x4F5C;&#x7684;&#x5BFC;&#x5165;&#x3002;<a class="changeset-link headerlink reference internal" href="#change-059d5e52209320ca09099434293d4ddd">&#xB6;</a></span></p><p><span class="yiyi-st" id="yiyi-571">&#x8FD9;&#x4E2A;&#x6539;&#x53D8;&#x4E5F;&#x88AB;<strong>backported</strong>&#x6539;&#x4E3A;&#xFF1A;0.9.10</span></p><p><span class="yiyi-st" id="yiyi-572">&#x53C2;&#x8003;&#x6587;&#x732E;&#xFF1A;<a class="reference external" href="http://www.sqlalchemy.org/trac/ticket/3406">&#xFF03;3406</a></span></p></li></ul></div></div><div class="section" id="change-1.0.3"><h2><span class="yiyi-st" id="yiyi-574">1.0.3 <a class="headerlink" href="#change-1.0.3" title="Permalink to this headline">&#xB6; T0&gt;</a></span></h2><span class="yiyi-st" id="yiyi-624">&#x53D1;&#x5E03;&#x65E5;&#x671F;&#xFF1A;2015&#x5E74;4&#x6708;30&#x65E5;</span><div class="section" id="change-1.0.3-orm"><h3><span class="yiyi-st" id="yiyi-575">ORM <a class="headerlink" href="#change-1.0.3-orm" title="Permalink to this headline">&#xB6; T0&gt;</a></span></h3><ul class="simple"><li><p id="change-1.0.3-0"><span class="yiyi-st" id="yiyi-576"><span class="target" id="change-2bd0d3b1393f8f24f850225969757976"><strong>[orm] [bug] [pypy] </strong></span>Fixed regression from 0.9.10 prior to release due to <a class="reference external" href="http://www.sqlalchemy.org/trac/ticket/3349">#3349</a> where the check for query state on <a class="reference internal" href="orm_query.html#sqlalchemy.orm.query.Query.update" title="sqlalchemy.orm.query.Query.update"><code class="xref py py-meth docutils literal"><span class="pre">Query.update()</span></code></a> or <a class="reference internal" href="orm_query.html#sqlalchemy.orm.query.Query.delete" title="sqlalchemy.orm.query.Query.delete"><code class="xref py py-meth docutils literal"><span class="pre">Query.delete()</span></code></a> compared the empty tuple to itself using <code class="docutils literal"><span class="pre">is</span></code>, which fails on Pypy to produce <code class="docutils literal"><span class="pre">True</span></code> in this case; this would erronously emit a warning in 0.9 and raise an exception in 1.0.<a class="changeset-link headerlink reference internal" href="#change-2bd0d3b1393f8f24f850225969757976">&#xB6;</a></span></p><p><span class="yiyi-st" id="yiyi-577">&#x53C2;&#x8003;&#x6587;&#x732E;&#xFF1A;<a class="reference external" href="http://www.sqlalchemy.org/trac/ticket/3405">&#xFF03;3405</a></span></p></li><li><p id="change-1.0.3-1"><span class="yiyi-st" id="yiyi-578"><span class="target" id="change-8fc631d0b34377b720c0895b56608e6a"><strong>[orm] [bug] </strong></span>&#x4ECE;&#x53D1;&#x5E03;&#x4E4B;&#x524D;0.9.10&#x5F00;&#x59CB;&#x4FEE;&#x6B63;&#x56DE;&#x5F52;&#xFF0C;&#x5176;&#x4E2D;<code class="docutils literal"><span class="pre">entity</span></code>&#x65B0;&#x6DFB;&#x52A0;&#x5230;<a class="reference internal" href="orm_query.html#sqlalchemy.orm.query.Query.column_descriptions" title="sqlalchemy.orm.query.Query.column_descriptions"><code class="xref py py-attr docutils literal"><span class="pre">Query.column_descriptions</span></code></a>&#x8BBF;&#x95EE;&#x5668;&#x5C06;&#x5931;&#x8D25;&#x5982;&#x679C;&#x76EE;&#x6807;&#x5B9E;&#x4F53;&#x662F;&#x4ECE;&#x6838;&#x5FC3;&#x53EF;&#x9009;&#x62E9;&#x7684;&#x5982;<a class="reference internal" href="core_metadata.html#sqlalchemy.schema.Table" title="sqlalchemy.schema.Table"><code class="xref py py-class docutils literal"><span class="pre">Table</span></code></a>&#x6216;<a class="reference internal" href="core_selectable.html#sqlalchemy.sql.expression.CTE" title="sqlalchemy.sql.expression.CTE"><code class="xref py py-class docutils literal"><span class="pre">CTE</span></code></a>&#x5BF9;&#x8C61;&#x751F;&#x6210;&#x7684;&#x3002;<a class="changeset-link headerlink reference internal" href="#change-8fc631d0b34377b720c0895b56608e6a">&#xB6;</a></span></p><p><span class="yiyi-st" id="yiyi-579">&#x53C2;&#x8003;&#x6587;&#x732E;&#xFF1A;<a class="reference external" href="http://www.sqlalchemy.org/trac/ticket/3320">&#xFF03;3320</a>&#xFF0C;<a class="reference external" href="http://www.sqlalchemy.org/trac/ticket/3403">&#xFF03;3403</a></span></p></li><li><p id="change-1.0.3-2"><span class="yiyi-st" id="yiyi-580"><span class="target" id="change-734ee8c88ef7db37b98e8e9bfc172c15"><strong>[orm] [bug] </strong></span>Fixed regression within the flush process when an attribute were set to a SQL expression for an UPDATE, and the SQL expression when compared to the previous value of the attribute would produce a SQL comparison other than <code class="docutils literal"><span class="pre">==</span></code> or <code class="docutils literal"><span class="pre">!=</span></code>, the exception &#x201C;Boolean value of this clause is not defined&#x201D; would raise. </span><span class="yiyi-st" id="yiyi-581">&#x8BE5;&#x4FEE;&#x590D;&#x786E;&#x4FDD;&#x5DE5;&#x4F5C;&#x5355;&#x5143;&#x4E0D;&#x4F1A;&#x4EE5;&#x8FD9;&#x79CD;&#x65B9;&#x5F0F;&#x89E3;&#x91CA;SQL&#x8868;&#x8FBE;&#x5F0F;&#x3002;<a class="changeset-link headerlink reference internal" href="#change-734ee8c88ef7db37b98e8e9bfc172c15">&#xB6;</a></span></p><p><span class="yiyi-st" id="yiyi-582">&#x53C2;&#x8003;&#x6587;&#x732E;&#xFF1A;<a class="reference external" href="http://www.sqlalchemy.org/trac/ticket/3402">&#xFF03;3402</a></span></p></li><li><p id="change-1.0.3-3"><span class="yiyi-st" id="yiyi-583"><span class="target" id="change-3edda67f000658f898770488bd7887ae"><strong>[orm] [bug] </strong></span>Fixed unexpected use regression due to <a class="reference external" href="http://www.sqlalchemy.org/trac/ticket/2992">#2992</a> where textual elements placed into the <a class="reference internal" href="orm_query.html#sqlalchemy.orm.query.Query.order_by" title="sqlalchemy.orm.query.Query.order_by"><code class="xref py py-meth docutils literal"><span class="pre">Query.order_by()</span></code></a> clause in conjunction with joined eager loading would be added to the columns clause of the inner query in such a way that they were assumed to be table-bound column names, in the case where the joined eager load needs to wrap the query in a subquery to accommodate for a limit/offset.</span></p><p><span class="yiyi-st" id="yiyi-584">&#x6700;&#x521D;&#xFF0C;&#x8FD9;&#x91CC;&#x7684;&#x884C;&#x4E3A;&#x662F;&#x6709;&#x610F;&#x7684;&#xFF0C;&#x56E0;&#x4E3A;&#x8BF8;&#x5982;<code class="docutils literal"><span class="pre">query(User).order_by(&apos;name&apos;).limit(1)</span></code>&#x7684;&#x67E5;&#x8BE2;&#x5C06;&#x6309;&#x7167;<code class="docutils literal"><span class="pre">user.name</span></code>&#x5373;&#x4F7F;&#x67E5;&#x8BE2;&#x662F;&#x901A;&#x8FC7;&#x5C06;&#x52A0;&#x8F7D;&#x7684;&#x52A0;&#x8F7D;&#x4FEE;&#x6539;&#x4E3A;&#x5B50;&#x67E5;&#x8BE2;&#x6765;&#x4FEE;&#x6539;&#x7684;&#xFF0C;&#x56E0;&#x4E3A;<code class="docutils literal"><span class="pre">&apos;name&apos;</span></code>&#x5C06;&#x88AB;&#x89E3;&#x91CA;&#x4E3A;&#x4F4D;&#x4E8E;FROM&#x5B50;&#x53E5;&#x4E2D;&#x7684;&#x7B26;&#x53F7;&#xFF0C;&#x5728;&#x8FD9;&#x79CD;&#x60C5;&#x51B5;&#x4E0B;<code class="docutils literal"><span class="pre">User.name</span></code>&#xFF0C;&#x7136;&#x540E;&#x5C06;&#x5176;&#x590D;&#x5236;&#x5230;columns&#x5B50;&#x53E5;&#x4E2D;&#x4EE5;&#x786E;&#x4FDD;&#x5B83;&#x5B58;&#x5728;&#x4E8E;ORDER BY&#x4E2D;&#x3002;</span><span class="yiyi-st" id="yiyi-585">&#x4F46;&#x662F;&#xFF0C;&#x8BE5;&#x529F;&#x80FD;&#x65E0;&#x6CD5;&#x9884;&#x6D4B;<code class="docutils literal"><span class="pre">order_by(&quot;name&quot;)</span></code>&#x5F15;&#x7528;&#x672C;&#x5730;&#x5217;&#x5B50;&#x53E5;&#x4E2D;&#x5B58;&#x5728;&#x7684;&#x7279;&#x5B9A;&#x6807;&#x7B7E;&#x540D;&#x79F0;&#x7684;&#x60C5;&#x51B5;&#xFF0C;&#x800C;&#x4E0D;&#x662F;&#x4E0E;FROM&#x5B50;&#x53E5;&#x4E2D;&#x7684;&#x53EF;&#x9009;&#x62E9;&#x540D;&#x79F0;&#x7ED1;&#x5B9A;&#x7684;&#x540D;&#x79F0;&#x3002;</span></p><p><span class="yiyi-st" id="yiyi-586">Beyond that, the feature also fails for deprecated cases such as <code class="docutils literal"><span class="pre">order_by(&quot;name</span> <span class="pre">desc&quot;)</span></code>, which, while it emits a warning that <a class="reference internal" href="core_sqlelement.html#sqlalchemy.sql.expression.text" title="sqlalchemy.sql.expression.text"><code class="xref py py-func docutils literal"><span class="pre">text()</span></code></a> should be used here (note that the issue does not impact cases where <a class="reference internal" href="core_sqlelement.html#sqlalchemy.sql.expression.text" title="sqlalchemy.sql.expression.text"><code class="xref py py-func docutils literal"><span class="pre">text()</span></code></a> is used explicitly), still produces a different query than previously where the &#x201C;name desc&#x201D; expression is copied into the columns clause inappropriately. </span><span class="yiyi-st" id="yiyi-587">&#x5206;&#x8FA8;&#x7387;&#x662F;&#x8FD9;&#x6837;&#x7684;&#xFF0C;&#x5F53;&#x589E;&#x52A0;&#x5185;&#x90E8;&#x5217;&#x5B50;&#x53E5;&#x65F6;&#xFF0C;&#x7279;&#x5F81;&#x7684;&#x201C;&#x52A0;&#x5165;&#x7684;&#x52A0;&#x8F7D;&#x52A0;&#x8F7D;&#x201D;&#x65B9;&#x9762;&#x5C06;&#x8DF3;&#x8FC7;&#x8FD9;&#x4E9B;&#x6240;&#x8C13;&#x7684;&#x201C;&#x6807;&#x7B7E;&#x5F15;&#x7528;&#x201D;&#x8868;&#x8FBE;&#x5F0F;&#xFF0C;&#x5C31;&#x597D;&#x50CF;&#x5B83;&#x4EEC;&#x5DF2;&#x7ECF;&#x662F;<a class="reference internal" href="core_sqlelement.html#sqlalchemy.sql.expression.text" title="sqlalchemy.sql.expression.text"><code class="xref py py-func docutils literal"><span class="pre">text()</span></code></a>&#x7ED3;&#x6784;&#x3002;</span></p><span class="yiyi-st" id="yiyi-589"> <a class="changeset-link headerlink reference internal" href="#change-3edda67f000658f898770488bd7887ae">&#xB6;</a></span><p><span class="yiyi-st" id="yiyi-588">&#x53C2;&#x8003;&#x6587;&#x732E;&#xFF1A;<a class="reference external" href="http://www.sqlalchemy.org/trac/ticket/3392">&#xFF03;3392</a></span></p></li><li><p id="change-1.0.3-4"><span class="yiyi-st" id="yiyi-590"><span class="target" id="change-57ac0f1083635c3e249664704f5f8681"><strong>[orm] [bug] </strong></span>Fixed a regression regarding the <a class="reference internal" href="orm_events.html#sqlalchemy.orm.events.MapperEvents.instrument_class" title="sqlalchemy.orm.events.MapperEvents.instrument_class"><code class="xref py py-meth docutils literal"><span class="pre">MapperEvents.instrument_class()</span></code></a> event where its invocation was moved to be after the class manager&#x2019;s instrumentation of the class, which is the opposite of what the documentation for the event explicitly states. </span><span class="yiyi-st" id="yiyi-591">The rationale for the switch was due to Declarative taking the step of setting up the full &#x201C;instrumentation manager&#x201D; for a class before it was mapped for the purpose of the new <code class="docutils literal"><span class="pre">@declared_attr</span></code> features described in <a class="reference internal" href="migration_10.html#feature-3150"><span>Improvements to declarative mixins, @declared_attr and related features</span></a>, but the change was also made against the classical use of <a class="reference internal" href="orm_mapping_api.html#sqlalchemy.orm.mapper" title="sqlalchemy.orm.mapper"><code class="xref py py-func docutils literal"><span class="pre">mapper()</span></code></a> for consistency. </span><span class="yiyi-st" id="yiyi-592">&#x4F46;&#x662F;&#xFF0C;SQLSoup&#x4F9D;&#x8D56;&#x4E8E;&#x7ECF;&#x5178;&#x6620;&#x5C04;&#x4E0B;&#x7684;&#x4EFB;&#x4F55;&#x68C0;&#x6D4B;&#x4E4B;&#x524D;&#x53D1;&#x751F;&#x7684;&#x68C0;&#x6D4B;&#x4E8B;&#x4EF6;&#x3002;</span><span class="yiyi-st" id="yiyi-593">&#x8BE5;&#x884C;&#x4E3A;&#x5728;&#x7ECF;&#x5178;&#x548C;&#x58F0;&#x660E;&#x5F0F;&#x6620;&#x5C04;&#x7684;&#x60C5;&#x51B5;&#x4E0B;&#x88AB;&#x6062;&#x590D;&#xFF0C;&#x540E;&#x8005;&#x901A;&#x8FC7;&#x4F7F;&#x7528;&#x7B80;&#x5355;&#x7684;&#x8BB0;&#x5FC6;&#x800C;&#x4E0D;&#x4F7F;&#x7528;&#x7C7B;&#x7BA1;&#x7406;&#x5668;&#x6765;&#x5B9E;&#x73B0;&#x3002;<a class="changeset-link headerlink reference internal" href="#change-57ac0f1083635c3e249664704f5f8681">&#xB6;</a></span></p><p><span class="yiyi-st" id="yiyi-594">&#x53C2;&#x8003;&#x6587;&#x732E;&#xFF1A;<a class="reference external" href="http://www.sqlalchemy.org/trac/ticket/3388">&#xFF03;3388</a></span></p></li><li><p id="change-1.0.3-5"><span class="yiyi-st" id="yiyi-595"><span class="target" id="change-f030dd13b152b403de3872b0d7fc16be"><strong>[orm] [bug] </strong></span>Fixed issue in new <a class="reference internal" href="orm_events.html#sqlalchemy.orm.events.QueryEvents.before_compile" title="sqlalchemy.orm.events.QueryEvents.before_compile"><code class="xref py py-meth docutils literal"><span class="pre">QueryEvents.before_compile()</span></code></a> event where changes made to the <a class="reference internal" href="orm_query.html#sqlalchemy.orm.query.Query" title="sqlalchemy.orm.query.Query"><code class="xref py py-class docutils literal"><span class="pre">Query</span></code></a> object&#x2019;s collection of entities to load within the event would render in the SQL, but would not be reflected during the loading process.<a class="changeset-link headerlink reference internal" href="#change-f030dd13b152b403de3872b0d7fc16be">&#xB6;</a></span></p><p><span class="yiyi-st" id="yiyi-596">&#x53C2;&#x8003;&#x6587;&#x732E;&#xFF1A;<a class="reference external" href="http://www.sqlalchemy.org/trac/ticket/3387">&#xFF03;3387</a></span></p></li></ul></div><div class="section" id="change-1.0.3-engine"><h3><span class="yiyi-st" id="yiyi-597">&#x53D1;&#x52A8;&#x673A;<a class="headerlink" href="#change-1.0.3-engine" title="Permalink to this headline">&#xB6; T0&gt;</a></span></h3><ul class="simple"><li><p id="change-1.0.3-6"><span class="yiyi-st" id="yiyi-598"><span class="target" id="change-76cdcabbfea8e248bd78644174c5517b"><strong>[engine] [feature] </strong></span>&#x6DFB;&#x52A0;&#x4E86;&#x65B0;&#x529F;&#x80FD;&#x4EE5;&#x652F;&#x6301;&#x5177;&#x6709;&#x9AD8;&#x7EA7;&#x529F;&#x80FD;&#x7684;&#x5F15;&#x64CE;/&#x6C60;&#x63D2;&#x4EF6;&#x3002;</span><span class="yiyi-st" id="yiyi-599">&#x5728;&#x68C0;&#x51FA;&#x7684;&#x8FDE;&#x63A5;&#x5305;&#x88C5;&#x4EE5;&#x53CA;<a class="reference internal" href="core_pooling.html#sqlalchemy.pool._ConnectionRecord" title="sqlalchemy.pool._ConnectionRecord"><code class="xref py py-class docutils literal"><span class="pre">_ConnectionRecord</span></code></a>&#x7EA7;&#x522B;&#x5411;&#x8FDE;&#x63A5;&#x6C60;&#x6DFB;&#x52A0;&#x4E86;&#x4E00;&#x4E2A;&#x65B0;&#x7684;&#x201C;&#x8F6F;&#x65E0;&#x6548;&#x201D;&#x7279;&#x6027;&#x3002;</span><span class="yiyi-st" id="yiyi-600">&#x8FD9;&#x4E0E;&#x73B0;&#x4EE3;&#x6E38;&#x6CF3;&#x6C60;&#x5931;&#x6548;&#x7C7B;&#x4F3C;&#xFF0C;&#x56E0;&#x4E3A;&#x8FDE;&#x63A5;&#x6CA1;&#x6709;&#x88AB;&#x4E3B;&#x52A8;&#x5173;&#x95ED;&#xFF0C;&#x4F46;&#x4EC5;&#x5728;&#x4E0B;&#x6B21;&#x7ED3;&#x8D26;&#x65F6;&#x624D;&#x88AB;&#x56DE;&#x6536;&#xFF1B;&#x8FD9;&#x5B9E;&#x8D28;&#x4E0A;&#x662F;&#x8BE5;&#x529F;&#x80FD;&#x7684;&#x6BCF;&#x4E2A;&#x8FDE;&#x63A5;&#x7248;&#x672C;&#x3002;</span><span class="yiyi-st" id="yiyi-601">&#x6DFB;&#x52A0;&#x4E00;&#x4E2A;&#x65B0;&#x4E8B;&#x4EF6;<code class="xref py py-class docutils literal"><span class="pre">PoolEvents.soft_invalidate</span></code>&#x4EE5;&#x8865;&#x5145;&#x5B83;&#x3002;</span></p><p><span class="yiyi-st" id="yiyi-602">&#x8FD8;&#x6DFB;&#x52A0;&#x4E86;&#x65B0;&#x6807;&#x5FD7;<a class="reference internal" href="core_connections.html#sqlalchemy.engine.ExceptionContext.invalidate_pool_on_disconnect" title="sqlalchemy.engine.ExceptionContext.invalidate_pool_on_disconnect"><code class="xref py py-attr docutils literal"><span class="pre">ExceptionContext.invalidate_pool_on_disconnect</span></code></a>&#x3002;</span><span class="yiyi-st" id="yiyi-603">&#x5141;&#x8BB8;<a class="reference internal" href="core_events.html#sqlalchemy.events.ConnectionEvents.handle_error" title="sqlalchemy.events.ConnectionEvents.handle_error"><code class="xref py py-meth docutils literal"><span class="pre">ConnectionEvents.handle_error()</span></code></a>&#x4E2D;&#x7684;&#x9519;&#x8BEF;&#x5904;&#x7406;&#x7A0B;&#x5E8F;&#x7EF4;&#x62A4;&#x201C;&#x65AD;&#x5F00;&#x8FDE;&#x63A5;&#x201D;&#x6761;&#x4EF6;&#xFF0C;&#x4F46;&#x5728;&#x4E8B;&#x4EF6;&#x4E2D;&#x4EE5;&#x7279;&#x5B9A;&#x65B9;&#x5F0F;&#x5904;&#x7406;&#x5BF9;&#x5355;&#x4E2A;&#x8FDE;&#x63A5;&#x7684;&#x65E0;&#x6548;&#x8C03;&#x7528;&#x3002;</span></p><span class="yiyi-st" id="yiyi-605"> <a class="changeset-link headerlink reference internal" href="#change-76cdcabbfea8e248bd78644174c5517b">&#xB6;</a></span><p><span class="yiyi-st" id="yiyi-604">&#x53C2;&#x8003;&#x6587;&#x732E;&#xFF1A;<a class="reference external" href="http://www.sqlalchemy.org/trac/ticket/3379">&#xFF03;3379</a></span></p></li><li><p id="change-1.0.3-7"><span class="yiyi-st" id="yiyi-606"><span class="target" id="change-817fff0e7254e8e5723cbbeea9baa552"><strong>[engine] [feature] </strong></span>Added new event <code class="xref py py-class docutils literal"><span class="pre">DialectEvents.do_connect</span></code>, which allows interception / replacement of when the <a class="reference internal" href="core_internals.html#sqlalchemy.engine.interfaces.Dialect.connect" title="sqlalchemy.engine.interfaces.Dialect.connect"><code class="xref py py-meth docutils literal"><span class="pre">Dialect.connect()</span></code></a> hook is called to create a DBAPI connection. </span><span class="yiyi-st" id="yiyi-607">&#x8FD8;&#x6DFB;&#x52A0;&#x4E86;&#x65B9;&#x8A00;&#x63D2;&#x4EF6;&#x94A9;&#x5B50;<a class="reference internal" href="core_internals.html#sqlalchemy.engine.interfaces.Dialect.get_dialect_cls" title="sqlalchemy.engine.interfaces.Dialect.get_dialect_cls"><code class="xref py py-meth docutils literal"><span class="pre">Dialect.get_dialect_cls()</span></code></a>&#x548C;<a class="reference internal" href="core_internals.html#sqlalchemy.engine.interfaces.Dialect.engine_created" title="sqlalchemy.engine.interfaces.Dialect.engine_created"><code class="xref py py-meth docutils literal"><span class="pre">Dialect.engine_created()</span></code></a>&#xFF0C;&#x5141;&#x8BB8;&#x5916;&#x90E8;&#x63D2;&#x4EF6;&#x4F7F;&#x7528;&#x5165;&#x53E3;&#x70B9;&#x5C06;&#x4E8B;&#x4EF6;&#x6DFB;&#x52A0;&#x5230;&#x73B0;&#x6709;&#x65B9;&#x8A00;&#x3002;<a class="changeset-link headerlink reference internal" href="#change-817fff0e7254e8e5723cbbeea9baa552"> T6&gt;</a></span></p><p><span class="yiyi-st" id="yiyi-608">&#x53C2;&#x8003;&#x6587;&#x732E;&#xFF1A;<a class="reference external" href="http://www.sqlalchemy.org/trac/ticket/3355">&#xFF03;3355</a></span></p></li></ul></div><div class="section" id="change-1.0.3-sql"><h3><span class="yiyi-st" id="yiyi-609">SQL <a class="headerlink" href="#change-1.0.3-sql" title="Permalink to this headline">&#xB6; T0&gt;</a></span></h3><ul class="simple"><li><p id="change-1.0.3-8"><span class="yiyi-st" id="yiyi-610"><span class="target" id="change-6bec4ab076ee2fa285da1e7c5209da3b"><strong>[sql] [feature] </strong></span>&#x6DFB;&#x52A0;&#x4E86;&#x4E00;&#x4E2A;&#x5360;&#x4F4D;&#x7B26;&#x65B9;&#x6CD5;<a class="reference internal" href="core_type_api.html#sqlalchemy.types.TypeEngine.compare_against_backend" title="sqlalchemy.types.TypeEngine.compare_against_backend"><code class="xref py py-meth docutils literal"><span class="pre">TypeEngine.compare_against_backend()</span></code></a>&#xFF0C;&#x8BE5;&#x65B9;&#x6CD5;&#x73B0;&#x5728;&#x7531;Alembic migrations&#x4ECE;0.7.6&#x5F00;&#x59CB;&#x4F7F;&#x7528;&#x3002;</span><span class="yiyi-st" id="yiyi-611">&#x7528;&#x6237;&#x5B9A;&#x4E49;&#x7684;&#x7C7B;&#x578B;&#x53EF;&#x4EE5;&#x5B9E;&#x73B0;&#x6B64;&#x65B9;&#x6CD5;&#xFF0C;&#x4EE5;&#x5E2E;&#x52A9;&#x6BD4;&#x8F83;&#x6570;&#x636E;&#x5E93;&#x4E2D;&#x53CD;&#x6620;&#x7684;&#x7C7B;&#x578B;&#x4E0E;&#x7C7B;&#x578B;&#x3002;<a class="changeset-link headerlink reference internal" href="#change-6bec4ab076ee2fa285da1e7c5209da3b">&#xB6;</a></span></p><p></p></li><li><p id="change-1.0.3-9"><span class="yiyi-st" id="yiyi-612"><span class="target" id="change-c5574f4752ab5cec2695a9af0c8f84b2"><strong>[sql] [bug] </strong></span>Fixed bug where the truncation of long labels in SQL could produce a label that overlapped another label that is not truncated; this because the length threshhold for truncation was greater than the portion of the label that remains after truncation. </span><span class="yiyi-st" id="yiyi-613">&#x73B0;&#x5728;&#x8FD9;&#x4E24;&#x4E2A;&#x6570;&#x503C;&#x5DF2;&#x7ECF;&#x76F8;&#x540C;&#xFF1B; label_length  -  6&#x3002;</span><span class="yiyi-st" id="yiyi-614">&#x8FD9;&#x91CC;&#x7684;&#x6548;&#x679C;&#x662F;&#xFF0C;&#x8F83;&#x77ED;&#x7684;&#x5217;&#x6807;&#x7B7E;&#x5C06;&#x88AB;&#x201C;&#x622A;&#x65AD;&#x201D;&#xFF0C;&#x4E4B;&#x524D;&#x5B83;&#x4EEC;&#x4E0D;&#x4F1A;&#x88AB;&#x622A;&#x65AD;&#x3002;<a class="changeset-link headerlink reference internal" href="#change-c5574f4752ab5cec2695a9af0c8f84b2">&#xB6;</a></span></p><p><span class="yiyi-st" id="yiyi-615">&#x53C2;&#x8003;&#x6587;&#x732E;&#xFF1A;<a class="reference external" href="http://www.sqlalchemy.org/trac/ticket/3396">&#xFF03;3396</a></span></p></li><li><p id="change-1.0.3-10"><span class="yiyi-st" id="yiyi-616"><span class="target" id="change-556a9afc8de654667f5ab9b749086dff"><strong>[sql] [bug] </strong></span>Fixed regression due to <a class="reference external" href="http://www.sqlalchemy.org/trac/ticket/3282">#3282</a> where the <code class="docutils literal"><span class="pre">tables</span></code> collection passed as a keyword argument to the <a class="reference internal" href="core_events.html#sqlalchemy.events.DDLEvents.before_create" title="sqlalchemy.events.DDLEvents.before_create"><code class="xref py py-meth docutils literal"><span class="pre">DDLEvents.before_create()</span></code></a>, <a class="reference internal" href="core_events.html#sqlalchemy.events.DDLEvents.after_create" title="sqlalchemy.events.DDLEvents.after_create"><code class="xref py py-meth docutils literal"><span class="pre">DDLEvents.after_create()</span></code></a>, <a class="reference internal" href="core_events.html#sqlalchemy.events.DDLEvents.before_drop" title="sqlalchemy.events.DDLEvents.before_drop"><code class="xref py py-meth docutils literal"><span class="pre">DDLEvents.before_drop()</span></code></a>, and <a class="reference internal" href="core_events.html#sqlalchemy.events.DDLEvents.after_drop" title="sqlalchemy.events.DDLEvents.after_drop"><code class="xref py py-meth docutils literal"><span class="pre">DDLEvents.after_drop()</span></code></a> events would no longer be a list of tables, but instead a list of tuples which contained a second entry with foreign keys to be added or dropped. </span><span class="yiyi-st" id="yiyi-617">&#x7531;&#x4E8E;<code class="docutils literal"><span class="pre">tables</span></code>&#x96C6;&#x5408;&#x867D;&#x7136;&#x88AB;&#x8BB0;&#x5F55;&#x4E3A;&#x4E0D;&#x4E00;&#x5B9A;&#x7A33;&#x5B9A;&#xFF0C;&#x4F46;&#x4F9D;&#x8D56;&#x4E8E;&#x6B64;&#xFF0C;&#x8FD9;&#x79CD;&#x53D8;&#x5316;&#x88AB;&#x8BA4;&#x4E3A;&#x662F;&#x4E00;&#x79CD;&#x56DE;&#x5F52;&#x3002;</span><span class="yiyi-st" id="yiyi-618">&#x6B64;&#x5916;&#xFF0C;&#x5728;&#x67D0;&#x4E9B;&#x60C5;&#x51B5;&#x4E0B;&#xFF0C;&#x201C;&#x6536;&#x96C6;&#x201D;&#x5C06;&#x4F1A;&#x662F;&#x4E00;&#x4E2A;&#x8FED;&#x4EE3;&#x5668;&#xFF0C;&#x5982;&#x679C;&#x8FC7;&#x65E9;&#x8FED;&#x4EE3;&#xFF0C;&#x4F1A;&#x5BFC;&#x81F4;&#x64CD;&#x4F5C;&#x5931;&#x8D25;&#x3002;</span><span class="yiyi-st" id="yiyi-619">&#x8BE5;&#x96C6;&#x5408;&#x73B0;&#x5728;&#x662F;&#x6240;&#x6709;&#x60C5;&#x51B5;&#x4E0B;&#x7684;&#x8868;&#x5BF9;&#x8C61;&#x5217;&#x8868;&#xFF0C;&#x5E76;&#x4E14;&#x73B0;&#x5728;&#x6DFB;&#x52A0;&#x4E86;&#x7528;&#x4E8E;&#x6B64;&#x96C6;&#x5408;&#x683C;&#x5F0F;&#x7684;&#x6D4B;&#x8BD5;&#x8986;&#x76D6;&#x3002;<a class="changeset-link headerlink reference internal" href="#change-556a9afc8de654667f5ab9b749086dff">&#xB6;</a></span></p><p><span class="yiyi-st" id="yiyi-620">&#x53C2;&#x8003;&#x6587;&#x732E;&#xFF1A;<a class="reference external" href="http://www.sqlalchemy.org/trac/ticket/3391">&#xFF03;3391</a></span></p></li></ul></div><div class="section" id="change-1.0.3-misc"><h3><span class="yiyi-st" id="yiyi-621">&#x6742;&#x9879;<a class="headerlink" href="#change-1.0.3-misc" title="Permalink to this headline">&#xB6; T0&gt;</a></span></h3><ul class="simple"><li><p id="change-1.0.3-11"><span class="yiyi-st" id="yiyi-622"><span class="target" id="change-deb397d6ec2ff20a860f9f9d05ea50bf"><strong>[bug] [ext] </strong></span>Fixed bug in association proxy where an any()/has() on an relationship-&gt;scalar non-object attribute comparison would fail, e.g. <code class="docutils literal"><span class="pre">filter(Parent.some_collection_to_attribute.any(Child.attr</span> <span class="pre">==</span> <span class="pre">&apos;foo&apos;))</span></code><a class="changeset-link headerlink reference internal" href="#change-deb397d6ec2ff20a860f9f9d05ea50bf">&#xB6;</a></span></p><p><span class="yiyi-st" id="yiyi-623">&#x53C2;&#x8003;&#x6587;&#x732E;&#xFF1A;<a class="reference external" href="http://www.sqlalchemy.org/trac/ticket/3397">&#xFF03;3397</a></span></p></li></ul></div></div><div class="section" id="change-1.0.2"><h2><span class="yiyi-st" id="yiyi-625">1.0.2 <a class="headerlink" href="#change-1.0.2" title="Permalink to this headline">&#xB6; T0&gt;</a></span></h2><span class="yiyi-st" id="yiyi-636">&#x53D1;&#x5E03;&#x65E5;&#x671F;&#xFF1A;2015&#x5E74;4&#x6708;24&#x65E5;</span><div class="section" id="change-1.0.2-orm-declarative"><h3><span class="yiyi-st" id="yiyi-626">orm declarative <a class="headerlink" href="#change-1.0.2-orm-declarative" title="Permalink to this headline">&#xB6;</a></span></h3><ul class="simple"><li><p id="change-1.0.2-0"><span class="yiyi-st" id="yiyi-627"><span class="target" id="change-fb796750b45072da56370dc233b06603"><strong>[bug] [orm] [declarative] </strong></span>&#x4FEE;&#x590D;&#x4E86;&#x5173;&#x4E8E;&#x58F0;&#x660E;&#x5F0F;<code class="docutils literal"><span class="pre">__declare_first__</span></code>&#x548C;<code class="docutils literal"><span class="pre">__declare_last__</span></code>&#x8BBF;&#x95EE;&#x5668;&#x7684;&#x610F;&#x5916;&#x4F7F;&#x7528;&#x56DE;&#x5F52;&#xFF0C;&#x58F0;&#x660E;&#x6027;&#x57FA;&#x7C7B;&#x7684;&#x8D85;&#x7C7B;&#x3002;<a class="changeset-link headerlink reference internal" href="#change-fb796750b45072da56370dc233b06603">&#xB6;</a></span></p><p><span class="yiyi-st" id="yiyi-628">&#x53C2;&#x8003;&#x6587;&#x732E;&#xFF1A;<a class="reference external" href="http://www.sqlalchemy.org/trac/ticket/3383">&#xFF03;3383</a></span></p></li></ul></div><div class="section" id="change-1.0.2-sql"><h3><span class="yiyi-st" id="yiyi-629">SQL <a class="headerlink" href="#change-1.0.2-sql" title="Permalink to this headline">&#xB6; T0&gt;</a></span></h3><ul class="simple"><li><p id="change-1.0.2-1"><span class="yiyi-st" id="yiyi-630"><span class="target" id="change-728ce9fb29e31d643429b92816fa188c"><strong>[sql] [bug] </strong></span>Fixed a regression that was incorrectly fixed in 1.0.0b4 (hence becoming two regressions); reports that SELECT statements would GROUP BY a label name and fail was misconstrued that certain backends such as SQL Server should not be emitting ORDER BY or GROUP BY on a simple label name at all; when in fact, we had forgotten that 0.9 was already emitting ORDER BY on a simple label name for all backends, as described in <a class="reference internal" href="migration_09.html#migration-1068"><span>Label constructs can now render as their name alone in an ORDER BY</span></a>, even though 1.0 includes a rewrite of this logic as part of <a class="reference external" href="http://www.sqlalchemy.org/trac/ticket/2992">#2992</a>. </span><span class="yiyi-st" id="yiyi-631">&#x5C31;&#x9488;&#x5BF9;&#x7B80;&#x5355;&#x6807;&#x7B7E;&#x53D1;&#x5E03;GROUP BY&#x800C;&#x8A00;&#xFF0C;&#x5373;&#x4F7F;Postgresql&#x4E5F;&#x4F1A;&#x5F15;&#x53D1;&#x9519;&#x8BEF;&#xFF0C;&#x5373;&#x4F7F;&#x8981;&#x6807;&#x8BB0;&#x7684;&#x6807;&#x7B7E;&#x5E94;&#x8BE5;&#x662F;&#x663E;&#x800C;&#x6613;&#x89C1;&#x7684;&#xFF0C;&#x6240;&#x4EE5;&#x663E;&#x7136;GROUP BY&#x4E0D;&#x5E94;&#x8BE5;&#x4EE5;&#x8FD9;&#x79CD;&#x65B9;&#x5F0F;&#x81EA;&#x52A8;&#x5448;&#x73B0;&#x3002;</span></p><p><span class="yiyi-st" id="yiyi-632">&#x5728;1.0.2&#x4E2D;&#xFF0C;SQL Server&#xFF0C;Firebird&#x548C;&#x5176;&#x4ED6;&#x4EBA;&#x5728;&#x4F20;&#x9012;&#x4E5F;&#x5B58;&#x5728;&#x4E8E;columns&#x5B50;&#x53E5;&#x4E2D;&#x7684;<a class="reference internal" href="core_sqlelement.html#sqlalchemy.sql.expression.Label" title="sqlalchemy.sql.expression.Label"><code class="xref py py-class docutils literal"><span class="pre">Label</span></code></a>&#x7ED3;&#x6784;&#x65F6;&#xFF0C;&#x4F1A;&#x518D;&#x6B21;&#x5728;&#x7B80;&#x5355;&#x6807;&#x7B7E;&#x540D;&#x79F0;&#x4E0A;&#x53D1;&#x51FA;ORDER BY&#x3002;</span><span class="yiyi-st" id="yiyi-633">&#x6B64;&#x5916;&#xFF0C;&#x4EC5;&#x5F53;&#x4F20;&#x9012;<a class="reference internal" href="core_sqlelement.html#sqlalchemy.sql.expression.Label" title="sqlalchemy.sql.expression.Label"><code class="xref py py-class docutils literal"><span class="pre">Label</span></code></a>&#x7ED3;&#x6784;&#x65F6;&#xFF0C;&#x540E;&#x7AEF;&#x624D;&#x4F1A;&#x9488;&#x5BF9;&#x7B80;&#x5355;&#x6807;&#x7B7E;&#x540D;&#x79F0;&#x53D1;&#x51FA;GROUP BY&#x3002;</span></p><span class="yiyi-st" id="yiyi-635"> <a class="changeset-link headerlink reference internal" href="#change-728ce9fb29e31d643429b92816fa188c">&#xB6;</a></span><p><span class="yiyi-st" id="yiyi-634">&#x53C2;&#x8003;&#x6587;&#x732E;&#xFF1A;<a class="reference external" href="http://www.sqlalchemy.org/trac/ticket/3338">&#xFF03;3338</a>&#xFF0C;<a class="reference external" href="http://www.sqlalchemy.org/trac/ticket/3385">&#xFF03;3385</a></span></p></li></ul></div></div><div class="section" id="change-1.0.1"><h2><span class="yiyi-st" id="yiyi-637">1.0.1 <a class="headerlink" href="#change-1.0.1" title="Permalink to this headline">&#xB6; T0&gt;</a></span></h2><span class="yiyi-st" id="yiyi-688">&#x53D1;&#x5E03;&#x65E5;&#x671F;&#xFF1A;2015&#x5E74;4&#x6708;23&#x65E5;</span><div class="section" id="change-1.0.1-orm"><h3><span class="yiyi-st" id="yiyi-638">ORM <a class="headerlink" href="#change-1.0.1-orm" title="Permalink to this headline">&#xB6; T0&gt;</a></span></h3><ul class="simple"><li><p id="change-1.0.1-0"><span class="yiyi-st" id="yiyi-639"><span class="target" id="change-c3046cef1c62baa499a720ee4f37dc00"><strong>[orm] [bug] </strong></span>Fixed issue where a query of the form <code class="docutils literal"><span class="pre">query(B).filter(B.a</span> <span class="pre">!=</span> <span class="pre">A(id=7))</span></code> would render the <code class="docutils literal"><span class="pre">NEVER_SET</span></code> symbol, when given a transient object. </span><span class="yiyi-st" id="yiyi-640">&#x5BF9;&#x4E8E;&#x6301;&#x4E45;&#x5BF9;&#x8C61;&#xFF0C;&#x5B83;&#x603B;&#x662F;&#x4F7F;&#x7528;&#x6301;&#x4E45;&#x6570;&#x636E;&#x5E93;&#x503C;&#x800C;&#x4E0D;&#x662F;&#x5F53;&#x524D;&#x8BBE;&#x7F6E;&#x7684;&#x503C;&#x3002;</span><span class="yiyi-st" id="yiyi-641">&#x5047;&#x8BBE;autoflush&#x5DF2;&#x6253;&#x5F00;&#xFF0C;&#x901A;&#x5E38;&#x8FD9;&#x5BF9;&#x4E8E;&#x6301;&#x4E45;&#x6027;&#x503C;&#x6765;&#x8BF4;&#x5E76;&#x4E0D;&#x660E;&#x663E;&#xFF0C;&#x56E0;&#x4E3A;&#x5728;&#x4EFB;&#x4F55;&#x60C5;&#x51B5;&#x4E0B;&#x90FD;&#x4F1A;&#x9996;&#x5148;&#x5237;&#x65B0;&#x4EFB;&#x4F55;&#x6302;&#x8D77;&#x7684;&#x66F4;&#x6539;&#x3002;</span><span class="yiyi-st" id="yiyi-642">&#x7136;&#x800C;&#xFF0C;&#x8FD9;&#x4E0E;&#x7528;&#x4E8E;&#x975E;&#x5426;&#x5B9A;&#x6BD4;&#x8F83;&#x7684;&#x903B;&#x8F91;&#x4E0D;&#x4E00;&#x81F4;&#xFF0C;<code class="docutils literal"><span class="pre">query&#xFF08;B&#xFF09;.filter&#xFF08;Ba</span> <span class="pre">==</span> <span class="pre">A = 7&#xFF09;&#xFF09;</span></code>&#xFF0C;&#x5B83;&#x53EF;&#x4EE5;&#x4F7F;&#x7528;&#x5F53;&#x524D;&#x503C;&#xFF0C;&#x5E76;&#x4E14;&#x8FD8;&#x53EF;&#x4EE5;&#x4E0E;&#x77AC;&#x6001;&#x5BF9;&#x8C61;&#x8FDB;&#x884C;&#x6BD4;&#x8F83;&#x3002;</span><span class="yiyi-st" id="yiyi-643">&#x73B0;&#x5728;&#x6BD4;&#x8F83;&#x4F7F;&#x7528;&#x5F53;&#x524D;&#x503C;&#x800C;&#x4E0D;&#x662F;&#x6570;&#x636E;&#x5E93;&#x6301;&#x4E45;&#x503C;&#x3002;</span></p><p><span class="yiyi-st" id="yiyi-644">&#x4E0E;&#x672C;&#x7248;&#x672C;&#x4E2D;&#x7531;<a class="reference external" href="http://www.sqlalchemy.org/trac/ticket/3061">&#xFF03;3061</a>&#x5F15;&#x8D77;&#x7684;&#x56DE;&#x5F52;&#x4FEE;&#x590D;&#x7684;&#x5176;&#x4ED6;<code class="docutils literal"><span class="pre">NEVER_SET</span></code>&#x95EE;&#x9898;&#x4E0D;&#x540C;&#xFF0C;&#x8FD9;&#x4E2A;&#x7279;&#x5B9A;&#x95EE;&#x9898;&#x7684;&#x5B58;&#x5728;&#x65F6;&#x95F4;&#x81F3;&#x5C11;&#x65E9;&#x4E8E;0.8&#x4E14;&#x53EF;&#x80FD;&#x66F4;&#x65E9;&#xFF0C;&#x4F46;&#x5B83;&#x88AB;&#x53D1;&#x73B0;&#x662F;&#x56E0;&#x4E3A;&#x4FEE;&#x590D;&#x4E86;&#x76F8;&#x5173;&#x7684;<code class="docutils literal"><span class="pre">NEVER_SET</span></code>&#x95EE;&#x9898;&#x3002;</span></p><div class="admonition seealso"><p class="first admonition-title"><span class="yiyi-st" id="yiyi-645">&#x4E5F;&#x53EF;&#x4EE5;&#x770B;&#x770B;</span></p><p class="last"><span class="yiyi-st" id="yiyi-646"><a class="reference internal" href="migration_10.html#bug-3374"><span>A &#x201C;negated contains or equals&#x201D; relationship comparison will use the current value of attributes, not the database value</span></a></span></p></div><span class="yiyi-st" id="yiyi-648"> <a class="changeset-link headerlink reference internal" href="#change-c3046cef1c62baa499a720ee4f37dc00">&#xB6;</a></span><p><span class="yiyi-st" id="yiyi-647">&#x53C2;&#x8003;&#x6587;&#x732E;&#xFF1A;<a class="reference external" href="http://www.sqlalchemy.org/trac/ticket/3374">&#xFF03;3374</a></span></p></li><li><p id="change-1.0.1-1"><span class="yiyi-st" id="yiyi-649"><span class="target" id="change-367bfbbb798543fcd661f5a7f129f5d6"><strong>[orm] [bug] </strong></span>Fixed unexpected use regression cause by <a class="reference external" href="http://www.sqlalchemy.org/trac/ticket/3061">#3061</a> where the NEVER_SET symbol could leak into relationship-oriented queries, including <code class="docutils literal"><span class="pre">filter()</span></code> and <code class="docutils literal"><span class="pre">with_parent()</span></code> queries. </span><span class="yiyi-st" id="yiyi-650">&#x6240;&#x6709;&#x60C5;&#x51B5;&#x4E0B;&#x90FD;&#x4F1A;&#x8FD4;&#x56DE;<code class="docutils literal"><span class="pre">None</span></code>&#x7B26;&#x53F7;&#xFF0C;&#x4F46;&#x662F;&#xFF0C;&#x5728;&#x4EFB;&#x4F55;&#x60C5;&#x51B5;&#x4E0B;&#xFF0C;&#x8FD9;&#x4E9B;&#x67E5;&#x8BE2;&#x4E2D;&#x7684;&#x8BB8;&#x591A;&#x90FD;&#x4ECE;&#x672A;&#x5F97;&#x5230;&#x6B63;&#x786E;&#x652F;&#x6301;&#xFF0C;&#x5E76;&#x4E14;&#x5728;&#x4E0D;&#x4F7F;&#x7528;IS&#x8FD0;&#x7B97;&#x7B26;&#x7684;&#x60C5;&#x51B5;&#x4E0B;&#x5C06;&#x5176;&#x4E0E;NULL&#x8FDB;&#x884C;&#x6BD4;&#x8F83;&#x3002;</span><span class="yiyi-st" id="yiyi-651">&#x56E0;&#x6B64;&#xFF0C;&#x8B66;&#x544A;&#x8FD8;&#x4F1A;&#x6DFB;&#x52A0;&#x5230;&#x5F53;&#x524D;&#x4E0D;&#x63D0;&#x4F9B;<code class="docutils literal"><span class="pre">IS</span> <span class="pre">NULL</span></code>&#x7684;&#x5173;&#x7CFB;&#x67E5;&#x8BE2;&#x7684;&#x5B50;&#x96C6;&#x4E2D;&#x3002;</span></p><div class="admonition seealso"><p class="first admonition-title"><span class="yiyi-st" id="yiyi-652">&#x4E5F;&#x53EF;&#x4EE5;&#x770B;&#x770B;</span></p><p class="last"><span class="yiyi-st" id="yiyi-653"><a class="reference internal" href="migration_10.html#bug-3371"><span>Warnings emitted when comparing objects with None values to relationships</span></a>&#x8FDB;&#x884C;&#x6BD4;&#x8F83;&#x65F6;&#x53D1;&#x51FA;&#x8B66;&#x544A;</span></p></div><span class="yiyi-st" id="yiyi-655"> <a class="changeset-link headerlink reference internal" href="#change-367bfbbb798543fcd661f5a7f129f5d6">&#xB6;</a></span><p><span class="yiyi-st" id="yiyi-654">&#x53C2;&#x8003;&#x6587;&#x732E;&#xFF1A;<a class="reference external" href="http://www.sqlalchemy.org/trac/ticket/3371">&#xFF03;3371</a></span></p></li><li><p id="change-1.0.1-2"><span class="yiyi-st" id="yiyi-656"><span class="target" id="change-16c7878b69c66a7b45e984cf7ddea43b"><strong>[orm] [bug] </strong></span>Fixed a regression caused by <a class="reference external" href="http://www.sqlalchemy.org/trac/ticket/3061">#3061</a> where the NEVER_SET symbol could leak into a lazyload query, subsequent to the flush of a pending object. </span><span class="yiyi-st" id="yiyi-657">&#x8FD9;&#x901A;&#x5E38;&#x4F1A;&#x53D1;&#x751F;&#x5728;&#x4E0D;&#x4F7F;&#x7528;&#x7B80;&#x5355;&#x7684;&#x201C;&#x83B7;&#x53D6;&#x201D;&#x7B56;&#x7565;&#x7684;&#x591A;&#x5BF9;&#x4E00;&#x5173;&#x7CFB;&#x4E2D;&#x3002;</span><span class="yiyi-st" id="yiyi-658">&#x597D;&#x6D88;&#x606F;&#x662F;&#x4FEE;&#x590D;&#x7A0B;&#x5E8F;&#x7684;&#x6548;&#x7387;&#x63D0;&#x9AD8;&#x4E86;0.9&#xFF0C;&#x56E0;&#x4E3A;&#x6211;&#x4EEC;&#x73B0;&#x5728;&#x53EF;&#x4EE5;&#x5728;&#x68C0;&#x6D4B;&#x53C2;&#x6570;&#x4E2D;&#x5B58;&#x5728;&#x7684;NEVER_SET&#x7B26;&#x53F7;&#x65F6;&#x5B8C;&#x5168;&#x8DF3;&#x8FC7;SELECT&#x8BED;&#x53E5;&#xFF1B;&#x5728;<a class="reference external" href="http://www.sqlalchemy.org/trac/ticket/3061">&#xFF03;3061</a>&#x4E4B;&#x524D;&#xFF0C;&#x6211;&#x4EEC;&#x65E0;&#x6CD5;&#x8FA8;&#x522B;&#x8FD9;&#x91CC;&#x662F;&#x5426;&#x8BBE;&#x7F6E;&#x4E86;None&#x3002;<a class="changeset-link headerlink reference internal" href="#change-16c7878b69c66a7b45e984cf7ddea43b">&#xB6;</a></span></p><p><span class="yiyi-st" id="yiyi-659">&#x53C2;&#x8003;&#x6587;&#x732E;&#xFF1A;<a class="reference external" href="http://www.sqlalchemy.org/trac/ticket/3368">&#xFF03;3368</a></span></p></li></ul></div><div class="section" id="change-1.0.1-engine"><h3><span class="yiyi-st" id="yiyi-660">&#x53D1;&#x52A8;&#x673A;<a class="headerlink" href="#change-1.0.1-engine" title="Permalink to this headline">&#xB6; T0&gt;</a></span></h3><ul class="simple"><li><p id="change-1.0.1-3"><span class="yiyi-st" id="yiyi-661"><span class="target" id="change-64a5444055f49209fa585e76ac99afdf"><strong>[engine] [bug] </strong></span>Added the string value <code class="docutils literal"><span class="pre">&quot;none&quot;</span></code> to those accepted by the <a class="reference internal" href="core_pooling.html#sqlalchemy.pool.Pool.params.reset_on_return" title="sqlalchemy.pool.Pool"><code class="xref py py-paramref docutils literal"><span class="pre">Pool.reset_on_return</span></code></a> parameter as a synonym for <code class="docutils literal"><span class="pre">None</span></code>, so that string values can be used for all settings, allowing utilities like <a class="reference internal" href="core_engines.html#sqlalchemy.engine_from_config" title="sqlalchemy.engine_from_config"><code class="xref py py-func docutils literal"><span class="pre">engine_from_config()</span></code></a> to be usable without issue.<a class="changeset-link headerlink reference internal" href="#change-64a5444055f49209fa585e76ac99afdf">&#xB6;</a></span></p><p><span class="yiyi-st" id="yiyi-662">&#x8FD9;&#x4E2A;&#x6539;&#x53D8;&#x4E5F;&#x88AB;<strong>backported</strong>&#x6539;&#x4E3A;&#xFF1A;0.9.10</span></p><p><span class="yiyi-st" id="yiyi-663">&#x53C2;&#x8003;&#x6587;&#x732E;&#xFF1A;<a class="reference external" href="http://www.sqlalchemy.org/trac/ticket/3375">&#xFF03;3375</a></span></p></li></ul></div><div class="section" id="change-1.0.1-sql"><h3><span class="yiyi-st" id="yiyi-664">SQL <a class="headerlink" href="#change-1.0.1-sql" title="Permalink to this headline">&#xB6; T0&gt;</a></span></h3><ul class="simple"><li><p id="change-1.0.1-4"><span class="yiyi-st" id="yiyi-665"><span class="target" id="change-c38b9512685589dea5443f525d104643"><strong>[sql] [bug] </strong></span>Fixed issue where a straight SELECT EXISTS query would fail to assign the proper result type of Boolean to the result mapping, and instead would leak column types from within the query into the result map. </span><span class="yiyi-st" id="yiyi-666">&#x6B64;&#x95EE;&#x9898;&#x4E5F;&#x5B58;&#x5728;&#x4E8E;0.9&#x53CA;&#x66F4;&#x65E9;&#x7248;&#x672C;&#x4E2D;&#xFF0C;&#x4F46;&#x5728;&#x8FD9;&#x4E9B;&#x7248;&#x672C;&#x4E2D;&#x5F71;&#x54CD;&#x8F83;&#x5C0F;&#x3002;</span><span class="yiyi-st" id="yiyi-667">&#x5728;1.0&#x4E2D;&#xFF0C;&#x7531;&#x4E8E;<a class="reference external" href="http://www.sqlalchemy.org/trac/ticket/918">&#xFF03;918</a>&#xFF0C;&#x8FD9;&#x6210;&#x4E3A;&#x4E00;&#x79CD;&#x56DE;&#x5F52;&#xFF0C;&#x56E0;&#x4E3A;&#x6211;&#x4EEC;&#x73B0;&#x5728;&#x4F9D;&#x8D56;&#x4E8E;&#x7ED3;&#x679C;&#x6620;&#x5C04;&#x975E;&#x5E38;&#x51C6;&#x786E;&#xFF0C;&#x5426;&#x5219;&#x6211;&#x4EEC;&#x53EF;&#x4EE5;&#x5C06;&#x7ED3;&#x679C;&#x7C7B;&#x578B;&#x7684;&#x5904;&#x7406;&#x5668;&#x5206;&#x914D;&#x5230;&#x9519;&#x8BEF;&#x7684;&#x5217;&#x3002;</span><span class="yiyi-st" id="yiyi-668">&#x5728;&#x6240;&#x6709;&#x7248;&#x672C;&#x4E2D;&#xFF0C;&#x8FD9;&#x4E2A;&#x95EE;&#x9898;&#x4E5F;&#x6709;&#x4E00;&#x4E2A;&#x6548;&#x679C;&#xFF0C;&#x5373;&#x4E00;&#x4E2A;&#x7B80;&#x5355;&#x7684;EXISTS&#x4E0D;&#x4F1A;&#x5E94;&#x7528;&#x5E03;&#x5C14;&#x7C7B;&#x578B;&#x5904;&#x7406;&#x7A0B;&#x5E8F;&#xFF0C;&#x5BFC;&#x81F4;&#x540E;&#x7AEF;&#x7684;&#x7B80;&#x5355;1/0&#x503C;&#x4E0D;&#x4F7F;&#x7528;&#x672C;&#x5730;&#x5E03;&#x5C14;&#x503C;&#x800C;&#x4E0D;&#x662F;True / False&#x3002;</span><span class="yiyi-st" id="yiyi-669">&#x4FEE;&#x590D;&#x5305;&#x62EC;EXISTS&#x5217;&#x53C2;&#x6570;&#x5C06;&#x50CF;&#x5176;&#x4ED6;&#x5217;&#x8868;&#x8FBE;&#x5F0F;&#x4E00;&#x6837;&#x88AB;&#x533F;&#x540D;&#x6807;&#x8BB0;&#xFF1B;&#x5BF9;&#x4E8E;&#x7EAF;&#x5E03;&#x5C14;&#x8868;&#x8FBE;&#x5F0F;&#xFF08;&#x5982;<code class="docutils literal"><span class="pre">not_(True())</span></code>&#xFF09;&#x5B9E;&#x73B0;&#x4E86;&#x7C7B;&#x4F3C;&#x7684;&#x4FEE;&#x590D;&#x3002;<a class="changeset-link headerlink reference internal" href="#change-c38b9512685589dea5443f525d104643">&#xB6;</a></span></p><p><span class="yiyi-st" id="yiyi-670">&#x53C2;&#x8003;&#x6587;&#x732E;&#xFF1A;<a class="reference external" href="http://www.sqlalchemy.org/trac/ticket/3372">&#xFF03;3372</a></span></p></li></ul></div><div class="section" id="change-1.0.1-sqlite"><h3><span class="yiyi-st" id="yiyi-671">&#x6E90;&#x7801;<a class="headerlink" href="#change-1.0.1-sqlite" title="Permalink to this headline">&#xB6; T0&gt;</a></span></h3><ul class="simple"><li><p id="change-1.0.1-5"><span class="yiyi-st" id="yiyi-672"><span class="target" id="change-3bf8faa066b4a78884ef6bf04b5ebc2b"><strong>[sqlite] [bug] </strong></span>Fixed a regression due to <a class="reference external" href="http://www.sqlalchemy.org/trac/ticket/3282">#3282</a>, where due to the fact that we attempt to assume the availability of ALTER when creating/dropping schemas, in the case of SQLite we simply said to not worry about foreign keys at all, since ALTER is not available, when creating and dropping tables. </span><span class="yiyi-st" id="yiyi-673">&#x8FD9;&#x610F;&#x5473;&#x7740;&#x5728;SQLite&#x7684;&#x60C5;&#x51B5;&#x4E0B;&#x57FA;&#x672C;&#x4E0A;&#x8DF3;&#x8FC7;&#x4E86;&#x8868;&#x7684;&#x6392;&#x5E8F;&#xFF0C;&#x5BF9;&#x4E8E;&#x7EDD;&#x5927;&#x591A;&#x6570;&#x7684;SQLite&#x7528;&#x4F8B;&#x6765;&#x8BF4;&#xFF0C;&#x8FD9;&#x4E0D;&#x662F;&#x95EE;&#x9898;&#x3002;</span></p><p><span class="yiyi-st" id="yiyi-674">&#x7136;&#x800C;&#xFF0C;&#x90A3;&#x4E9B;&#x5728;SQLite&#x4E0A;&#x6267;&#x884C;DROP&#x5E76;&#x4E14;&#x5E26;&#x6709;&#x6570;&#x636E;&#x5E76;&#x4E14;&#x53C2;&#x7167;&#x5B8C;&#x6574;&#x6027;&#x88AB;&#x6253;&#x5F00;&#x7684;&#x7528;&#x6237;&#x5C06;&#x4F1A;&#x9047;&#x5230;&#x9519;&#x8BEF;&#xFF0C;&#x56E0;&#x4E3A;&#x4F9D;&#x8D56;&#x5173;&#x7CFB;&#x6392;&#x5E8F;<em>&#x5728;&#x5F3A;&#x5236;&#x7EA6;&#x675F;DROP&#x7684;&#x60C5;&#x51B5;&#x4E0B;&#x5F88;&#x91CD;&#x8981;&#xFF0C;&#x5F53;&#x90A3;&#x4E9B;&#x8868;&#x6709;&#x6570;&#x636E;&#xFF08;&#x53EA;&#x8981;&#x6CA1;&#x6709;&#x6570;&#x636E;&#x88AB;&#x5F15;&#x7528;&#xFF0C;SQLite&#x4ECD;&#x7136;&#x5F88;&#x4E50;&#x610F;&#x8BA9;&#x4F60;&#x521B;&#x5EFA;&#x5916;&#x952E;&#x5230;&#x4E0D;&#x5B58;&#x5728;&#x7684;&#x8868;&#xFF0C;&#x5E76;&#x5220;&#x9664;&#x5F15;&#x7528;&#x5DF2;&#x6709;&#x7EA6;&#x675F;&#x7684;&#x73B0;&#x6709;&#x8868;&#x7684;&#x8868;&#xFF09;&#x3002;</em></span></p><p><span class="yiyi-st" id="yiyi-675">In order to maintain the new feature of <a class="reference external" href="http://www.sqlalchemy.org/trac/ticket/3282">#3282</a> while still allowing a SQLite DROP operation to maintain ordering, we now do the sort with full FKs taken under consideration, and if we encounter an unresolvable cycle, only <em>then</em> do we forego attempting to sort the tables; we instead emit a warning and go with the unsorted list. </span><span class="yiyi-st" id="yiyi-676">If an environment needs both ordered DROPs <em>and</em> has foreign key cycles, then the warning notes they will need to restore the <code class="docutils literal"><span class="pre">use_alter</span></code> flag to their <a class="reference internal" href="core_constraints.html#sqlalchemy.schema.ForeignKey" title="sqlalchemy.schema.ForeignKey"><code class="xref py py-class docutils literal"><span class="pre">ForeignKey</span></code></a> and <a class="reference internal" href="core_constraints.html#sqlalchemy.schema.ForeignKeyConstraint" title="sqlalchemy.schema.ForeignKeyConstraint"><code class="xref py py-class docutils literal"><span class="pre">ForeignKeyConstraint</span></code></a> objects so that just those objects will be omitted from the dependency sort.</span></p><div class="admonition seealso"><p class="first admonition-title"><span class="yiyi-st" id="yiyi-677">&#x4E5F;&#x53EF;&#x4EE5;&#x770B;&#x770B;</span></p><p class="last"><span class="yiyi-st" id="yiyi-678"><a class="reference internal" href="migration_10.html#feature-3282"><span>The use_alter flag on ForeignKeyConstraint is (usually) no longer needed</span></a>  - &#x5305;&#x542B;&#x6709;&#x5173;SQLite&#x7684;&#x66F4;&#x65B0;&#x6CE8;&#x91CA;&#x3002;</span></p></div><span class="yiyi-st" id="yiyi-680"> <a class="changeset-link headerlink reference internal" href="#change-3bf8faa066b4a78884ef6bf04b5ebc2b">&#xB6;</a></span><p><span class="yiyi-st" id="yiyi-679">&#x53C2;&#x8003;&#x6587;&#x732E;&#xFF1A;<a class="reference external" href="http://www.sqlalchemy.org/trac/ticket/3378">&#xFF03;3378</a></span></p></li></ul></div><div class="section" id="change-1.0.1-firebird"><h3><span class="yiyi-st" id="yiyi-681">&#x706B;&#x9E1F;<a class="headerlink" href="#change-1.0.1-firebird" title="Permalink to this headline">&#xB6; T0&gt;</a></span></h3><ul class="simple"><li><p id="change-1.0.1-6"><span class="yiyi-st" id="yiyi-682"><span class="target" id="change-dba16e624daeccaf8cb85b4704fadcf9"><strong>[firebird] [bug] </strong></span>&#x4FEE;&#x6B63;&#x4E86;&#x7531;&#x4E8E;<a class="reference external" href="http://www.sqlalchemy.org/trac/ticket/3034">&#xFF03;3034</a>&#x9020;&#x6210;&#x7684;&#x56DE;&#x5F52;&#xFF0C;&#x5176;&#x4E2D;&#x9650;&#x5236;/&#x504F;&#x79FB;&#x5B50;&#x53E5;&#x672A;&#x88AB;Firebird&#x65B9;&#x8A00;&#x6B63;&#x786E;&#x89E3;&#x91CA;&#x3002;</span><span class="yiyi-st" id="yiyi-683">&#x8BF7;&#x6C42;&#x793C;&#x8C8C;effem-git&#x3002;<a class="changeset-link headerlink reference internal" href="#change-dba16e624daeccaf8cb85b4704fadcf9">&#xB6;</a></span></p><p><span class="yiyi-st" id="yiyi-684">&#x53C2;&#x8003;&#x6587;&#x732E;&#xFF1A;<a class="reference external" href="http://www.sqlalchemy.org/trac/ticket/3380">&#xFF03;3380</a>&#xFF0C;<a class="reference external" href="https://github.com/zzzeek/sqlalchemy/pull/168">&#x8BF7;&#x6C42;github&#xFF1A;168</a></span></p></li><li><p id="change-1.0.1-7"><span class="yiyi-st" id="yiyi-685"><span class="target" id="change-454ec28afe6a7226f901467602c5e493"><strong>[firebird] [bug] </strong></span>Fixed support for &#x201C;literal_binds&#x201D; mode when using limit/offset with Firebird, so that the values are again rendered inline when this is selected. </span><span class="yiyi-st" id="yiyi-686">&#x4E0E;<a class="reference external" href="http://www.sqlalchemy.org/trac/ticket/3034">&#xFF03;3034</a>&#x3002;<a class="changeset-link headerlink reference internal" href="#change-454ec28afe6a7226f901467602c5e493">&#xB6;</a>&#x76F8;&#x5173;</span></p><p><span class="yiyi-st" id="yiyi-687">&#x53C2;&#x8003;&#x6587;&#x732E;&#xFF1A;<a class="reference external" href="http://www.sqlalchemy.org/trac/ticket/3381">&#xFF03;3381</a></span></p></li></ul></div></div><div class="section" id="change-1.0.0"><h2><span class="yiyi-st" id="yiyi-689">1.0.0 <a class="headerlink" href="#change-1.0.0" title="Permalink to this headline">&#xB6; T0&gt;</a></span></h2><span class="yiyi-st" id="yiyi-727">&#x53D1;&#x5E03;&#x65E5;&#x671F;&#xFF1A;2015&#x5E74;4&#x6708;16&#x65E5;</span><div class="section" id="change-1.0.0-orm"><h3><span class="yiyi-st" id="yiyi-690">ORM <a class="headerlink" href="#change-1.0.0-orm" title="Permalink to this headline">&#xB6; T0&gt;</a></span></h3><ul class="simple"><li><p id="change-1.0.0-0"><span class="yiyi-st" id="yiyi-691"><span class="target" id="change-d6a9012ea02989676f613aa443e77cfc"><strong>[orm] [feature] </strong></span>&#x6DFB;&#x52A0;&#x4E86;&#x65B0;&#x7684;&#x53C2;&#x6570;<a class="reference internal" href="orm_query.html#sqlalchemy.orm.query.Query.update.params.update_args" title="sqlalchemy.orm.query.Query.update"><code class="xref py py-paramref docutils literal"><span class="pre">Query.update.update_args</span></code></a>&#xFF0C;&#x5B83;&#x5141;&#x8BB8;&#x5C06;&#x8BF8;&#x5982;<code class="docutils literal"><span class="pre">mysql_limit</span></code>&#x4E4B;&#x7C7B;&#x7684;kw&#x53C2;&#x6570;&#x4F20;&#x9012;&#x7ED9;&#x5E95;&#x5C42;&#x7684;<a class="reference internal" href="core_dml.html#sqlalchemy.sql.expression.Update" title="sqlalchemy.sql.expression.Update"><code class="xref py py-class docutils literal"><span class="pre">Update</span></code></a>&#x7ED3;&#x6784;&#x3002;</span><span class="yiyi-st" id="yiyi-692">&#x8BF7;&#x6C42;&#x793C;&#x8C8C;Amir Sadoughi&#x3002;<a class="changeset-link headerlink reference internal" href="#change-d6a9012ea02989676f613aa443e77cfc">&#xB6;</a></span></p><p><span class="yiyi-st" id="yiyi-693">&#x53C2;&#x8003;&#x6587;&#x732E;&#xFF1A;<a class="reference external" href="https://github.com/zzzeek/sqlalchemy/pull/164">&#x8BF7;&#x6C42;github&#xFF1A;164</a></span></p></li><li><p id="change-1.0.0-1"><span class="yiyi-st" id="yiyi-694"><span class="target" id="change-f7fa40f7d0ccb7891bd8c505b5445a0e"><strong>[orm] [bug] </strong></span>&#x591A;&#x6B21;&#x5904;&#x7406;<a class="reference internal" href="orm_query.html#sqlalchemy.orm.query.Query.join" title="sqlalchemy.orm.query.Query.join"><code class="xref py py-meth docutils literal"><span class="pre">Query.join()</span></code></a>&#x5230;&#x540C;&#x4E00;&#x4E2A;&#x76EE;&#x6807;&#x65F6;&#x53D1;&#x73B0;&#x4E0D;&#x4E00;&#x81F4;&#xFF1B;&#x5B83;&#x4EC5;&#x5728;&#x5173;&#x7CFB;&#x8FDE;&#x63A5;&#x7684;&#x60C5;&#x51B5;&#x4E0B;&#x9690;&#x542B;&#x5730;&#x8FDB;&#x884C;&#x4E86;&#x91CD;&#x590D;&#x6570;&#x636E;&#x5220;&#x9664;&#xFF0C;&#x5E76;&#x4E14;&#x7531;&#x4E8E;<a class="reference external" href="http://www.sqlalchemy.org/trac/ticket/3233">&#xFF03;3233</a>&#xFF0C;1.0&#x4E2D;&#x5BF9;&#x540C;&#x4E00;&#x4E2A;&#x8868;&#x7684;&#x4E24;&#x6B21;&#x8FDE;&#x63A5;&#x7684;&#x884C;&#x4E3A;&#x4E0E;0.9&#x4E0D;&#x540C;&#xFF0C;&#x56E0;&#x4E3A;&#x5B83;&#x4E0D;&#x518D;&#x662F;&#x9519;&#x8BEF;&#x7684;&#x522B;&#x540D;&#x3002;</span><span class="yiyi-st" id="yiyi-695">&#x4E3A;&#x4E86;&#x5E2E;&#x52A9;&#x8BB0;&#x5F55;&#x8FD9;&#x79CD;&#x53D8;&#x5316;&#xFF0C;&#x79FB;&#x690D;&#x8BF4;&#x660E;&#x4E2D;&#x5173;&#x4E8E;<a class="reference external" href="http://www.sqlalchemy.org/trac/ticket/3233">&#xFF03;3233</a>&#x7684;&#x63AA;&#x8F9E;&#x5DF2;&#x7ECF;&#x88AB;&#x63A8;&#x5E7F;&#xFF0C;&#x5E76;&#x4E14;&#x5728;&#x9488;&#x5BF9;&#x76F8;&#x540C;&#x7684;<a class="reference internal" href="orm_query.html#sqlalchemy.orm.query.Query.join" title="sqlalchemy.orm.query.Query.join"><code class="xref py py-meth docutils literal"><span class="pre">Query.join()</span></code></a>&#x8C03;&#x7528;&#x65F6;&#x6DFB;&#x52A0;&#x4E86;&#x8B66;&#x544A;&#x76EE;&#x6807;&#x5173;&#x7CFB;&#x4E0D;&#x6B62;&#x4E00;&#x6B21;&#x3002;<a class="changeset-link headerlink reference internal" href="#change-f7fa40f7d0ccb7891bd8c505b5445a0e">&#xB6;</a></span></p><p><span class="yiyi-st" id="yiyi-696">&#x53C2;&#x8003;&#x6587;&#x732E;&#xFF1A;<a class="reference external" href="http://www.sqlalchemy.org/trac/ticket/3367">&#xFF03;3367</a></span></p></li><li><p id="change-1.0.0-2"><span class="yiyi-st" id="yiyi-697"><span class="target" id="change-f24cfb05e58edcba962d50d47c745bf1"><strong>[orm] [bug] </strong></span>Made a small improvement to the heuristics of relationship when determining remote side with semi-self-referential (e.g. two joined inh subclasses referring to each other), non-simple join conditions such that the parententity is taken into account and can reduce the need for using the <code class="docutils literal"><span class="pre">remote()</span></code> annotation; this can restore some cases that might have worked without the annotation prior to 0.9.4 via <a class="reference external" href="http://www.sqlalchemy.org/trac/ticket/2948">#2948</a>.<a class="changeset-link headerlink reference internal" href="#change-f24cfb05e58edcba962d50d47c745bf1">&#xB6;</a></span></p><p><span class="yiyi-st" id="yiyi-698">&#x53C2;&#x8003;&#x6587;&#x732E;&#xFF1A;<a class="reference external" href="http://www.sqlalchemy.org/trac/ticket/3364">&#xFF03;3364</a></span></p></li></ul></div><div class="section" id="change-1.0.0-sql"><h3><span class="yiyi-st" id="yiyi-699">SQL <a class="headerlink" href="#change-1.0.0-sql" title="Permalink to this headline">&#xB6; T0&gt;</a></span></h3><ul class="simple"><li><p id="change-1.0.0-3"><span class="yiyi-st" id="yiyi-700"><span class="target" id="change-aab332eedafc8e090f42b89ac7a67e6c"><strong>[sql] [feature] </strong></span>The topological sorting used to sort <a class="reference internal" href="core_metadata.html#sqlalchemy.schema.Table" title="sqlalchemy.schema.Table"><code class="xref py py-class docutils literal"><span class="pre">Table</span></code></a> objects and available via the <a class="reference internal" href="core_metadata.html#sqlalchemy.schema.MetaData.sorted_tables" title="sqlalchemy.schema.MetaData.sorted_tables"><code class="xref py py-attr docutils literal"><span class="pre">MetaData.sorted_tables</span></code></a> collection will now produce a <strong>deterministic</strong> ordering; that is, the same ordering each time given a set of tables with particular names and dependencies. </span><span class="yiyi-st" id="yiyi-701">&#x8FD9;&#x6709;&#x52A9;&#x4E8E;&#x6BD4;&#x8F83;DDL&#x811A;&#x672C;&#x548C;&#x5176;&#x4ED6;&#x7528;&#x4F8B;&#x3002;</span><span class="yiyi-st" id="yiyi-702">&#x8FD9;&#x4E9B;&#x8868;&#x88AB;&#x53D1;&#x9001;&#x5230;&#x6309;&#x540D;&#x79F0;&#x6392;&#x5E8F;&#x7684;&#x62D3;&#x6251;&#x6392;&#x5E8F;&#xFF0C;&#x5E76;&#x4E14;&#x62D3;&#x6251;&#x6392;&#x5E8F;&#x672C;&#x8EAB;&#x5C06;&#x4EE5;&#x6709;&#x5E8F;&#x65B9;&#x5F0F;&#x5904;&#x7406;&#x8F93;&#x5165;&#x6570;&#x636E;&#x3002;</span><span class="yiyi-st" id="yiyi-703">&#x62C9;&#x8BF7;&#x6C42;&#x585E;&#x5DF4;&#x65AF;&#x8482;&#x5B89;&#x94F6;&#x884C;&#x793C;&#x8C8C;&#x3002;</span></p><div class="admonition seealso"><p class="first admonition-title"><span class="yiyi-st" id="yiyi-704">&#x4E5F;&#x53EF;&#x4EE5;&#x770B;&#x770B;</span></p><p class="last"><span class="yiyi-st" id="yiyi-705"><a class="reference internal" href="migration_10.html#feature-3084"><span>MetaData.sorted_tables accessor is &#x201C;deterministic&#x201D;</span></a></span></p></div><span class="yiyi-st" id="yiyi-707"> <a class="changeset-link headerlink reference internal" href="#change-aab332eedafc8e090f42b89ac7a67e6c">&#xB6;</a></span><p><span class="yiyi-st" id="yiyi-706">References: <a class="reference external" href="http://www.sqlalchemy.org/trac/ticket/3084">#3084</a>, <a class="reference external" href="https://bitbucket.org/zzzeek/sqlalchemy/pull-request/47">pull request bitbucket:47</a></span></p></li><li><p id="change-1.0.0-4"><span class="yiyi-st" id="yiyi-708"><span class="target" id="change-41cee2035e8cd5037366cfcb88fe424c"><strong>[sql] [bug] </strong></span>Fixed issue where a <a class="reference internal" href="core_metadata.html#sqlalchemy.schema.MetaData" title="sqlalchemy.schema.MetaData"><code class="xref py py-class docutils literal"><span class="pre">MetaData</span></code></a> object that used a naming convention would not properly work with pickle. </span><span class="yiyi-st" id="yiyi-709">&#x5982;&#x679C;&#x4F7F;&#x7528;&#x4E0D;&#x5E26;&#x94A9;&#x7684;<a class="reference internal" href="core_metadata.html#sqlalchemy.schema.MetaData" title="sqlalchemy.schema.MetaData"><code class="xref py py-class docutils literal"><span class="pre">MetaData</span></code></a>&#x5BF9;&#x8C61;&#x6765;&#x6784;&#x5EFA;&#x9644;&#x52A0;&#x8868;&#x683C;&#xFF0C;&#x5219;&#x8DF3;&#x8FC7;&#x8BE5;&#x5C5E;&#x6027;&#x4F1A;&#x5BFC;&#x81F4;&#x4E0D;&#x4E00;&#x81F4;&#x548C;&#x5931;&#x8D25;&#x3002;<a class="changeset-link headerlink reference internal" href="#change-41cee2035e8cd5037366cfcb88fe424c">&#xB6;</a></span></p><p><span class="yiyi-st" id="yiyi-710">&#x8FD9;&#x4E2A;&#x6539;&#x53D8;&#x4E5F;&#x88AB;<strong>backported</strong>&#x6539;&#x4E3A;&#xFF1A;0.9.10</span></p><p><span class="yiyi-st" id="yiyi-711">&#x53C2;&#x8003;&#x6587;&#x732E;&#xFF1A;<a class="reference external" href="http://www.sqlalchemy.org/trac/ticket/3362">&#xFF03;3362</a></span></p></li></ul></div><div class="section" id="change-1.0.0-postgresql"><h3><span class="yiyi-st" id="yiyi-712">&#x7684;PostgreSQL <a class="headerlink" href="#change-1.0.0-postgresql" title="Permalink to this headline">&#xB6; T0&gt;</a></span></h3><ul class="simple"><li><p id="change-1.0.0-5"><span class="yiyi-st" id="yiyi-713"><span class="target" id="change-863813ed9984daf0fde8f4a84fcaf02a"><strong>[postgresql] [bug] </strong></span>&#x4FEE;&#x590D;&#x4E86;&#x957F;&#x671F;&#x5B58;&#x5728;&#x7684;bug&#xFF0C;&#x5176;&#x4E2D;psycopg2&#x65B9;&#x8A00;&#x4F7F;&#x7528;&#x7684;<a class="reference internal" href="core_type_basics.html#sqlalchemy.types.Enum" title="sqlalchemy.types.Enum"><code class="xref py py-class docutils literal"><span class="pre">Enum</span></code></a>&#x7C7B;&#x578B;&#x4E0E;&#x975E;ascii&#x503C;&#x548C;<code class="docutils literal"><span class="pre">native_enum=False</span></code>&#x5C06;&#x65E0;&#x6CD5;&#x6B63;&#x786E;&#x89E3;&#x7801;&#x8FD4;&#x56DE;&#x7ED3;&#x679C;&#x3002;</span><span class="yiyi-st" id="yiyi-714">&#x8FD9;&#x6E90;&#x4E8E;PG <a class="reference internal" href="dialects_postgresql.html#sqlalchemy.dialects.postgresql.ENUM" title="sqlalchemy.dialects.postgresql.ENUM"><code class="xref py py-class docutils literal"><span class="pre">postgresql.ENUM</span></code></a>&#x7C7B;&#x578B;&#x66FE;&#x7ECF;&#x662F;&#x6CA1;&#x6709;&#x201C;&#x975E;&#x672C;&#x5730;&#x201D;&#x9009;&#x9879;&#x7684;&#x72EC;&#x7ACB;&#x7C7B;&#x578B;&#x3002;<a class="changeset-link headerlink reference internal" href="#change-863813ed9984daf0fde8f4a84fcaf02a">&#xB6;</a></span></p><p><span class="yiyi-st" id="yiyi-715">&#x8FD9;&#x4E2A;&#x6539;&#x53D8;&#x4E5F;&#x88AB;<strong>backported</strong>&#x6539;&#x4E3A;&#xFF1A;0.9.10</span></p><p><span class="yiyi-st" id="yiyi-716">&#x53C2;&#x8003;&#x6587;&#x732E;&#xFF1A;<a class="reference external" href="http://www.sqlalchemy.org/trac/ticket/3354">&#xFF03;3354</a></span></p></li></ul></div><div class="section" id="change-1.0.0-mssql"><h3><span class="yiyi-st" id="yiyi-717">MSSQL <a class="headerlink" href="#change-1.0.0-mssql" title="Permalink to this headline">&#xB6; T0&gt;</a></span></h3><ul class="simple"><li><p id="change-1.0.0-6"><span class="yiyi-st" id="yiyi-718"><span class="target" id="change-af05e4dd4a311a3d1bfb497d1d748f61"><strong>[mssql] [bug] </strong></span>Fixed a regression where the &#x201C;last inserted id&#x201D; mechanics would fail to store the correct value for MSSQL on an INSERT where the primary key value was present in the insert params before execution, as well as in the case where an INSERT from SELECT would state the target columns as column objects, instead of string keys.<a class="changeset-link headerlink reference internal" href="#change-af05e4dd4a311a3d1bfb497d1d748f61">&#xB6;</a></span></p><p><span class="yiyi-st" id="yiyi-719">&#x53C2;&#x8003;&#x6587;&#x732E;&#xFF1A;<a class="reference external" href="http://www.sqlalchemy.org/trac/ticket/3360">&#xFF03;3360</a></span></p></li><li><p id="change-1.0.0-7"><span class="yiyi-st" id="yiyi-720"><span class="target" id="change-e184664c46b2999f9724d1e3c1efc30a"><strong>[mssql] [bug] </strong></span>&#x4F7F;&#x7528;pymssql&#x4E2D;&#x73B0;&#x5728;&#x5B58;&#x5728;&#x7684;<code class="docutils literal"><span class="pre">Binary</span></code>&#x6784;&#x9020;&#x51FD;&#x6570;&#xFF0C;&#x800C;&#x4E0D;&#x662F;&#x4FEE;&#x8865;&#x5176;&#x4E2D;&#x7684;&#x4E00;&#x4E2A;&#x3002;</span><span class="yiyi-st" id="yiyi-721">&#x8BF7;&#x6C42;&#x62C9;&#x7C73;&#x7F57;&#x83AB;&#x62C9;&#x83B1;&#x65AF;&#x63D0;&#x4F9B;&#x3002;<a class="changeset-link headerlink reference internal" href="#change-e184664c46b2999f9724d1e3c1efc30a">&#xB6;</a></span></p><p><span class="yiyi-st" id="yiyi-722">&#x53C2;&#x8003;&#x6587;&#x732E;&#xFF1A;<a class="reference external" href="https://github.com/zzzeek/sqlalchemy/pull/166">&#x8BF7;&#x6C42;github&#xFF1A;166</a></span></p></li></ul></div><div class="section" id="change-1.0.0-misc"><h3><span class="yiyi-st" id="yiyi-723">&#x6742;&#x9879;<a class="headerlink" href="#change-1.0.0-misc" title="Permalink to this headline">&#xB6; T0&gt;</a></span></h3><ul class="simple"><li><p id="change-1.0.0-8"><span class="yiyi-st" id="yiyi-724"><span class="target" id="change-767cbbf7a16d3556b45934d148b75590"><strong>[bug] [tests] </strong></span>&#x4FEE;&#x590D;&#x6D4B;&#x8BD5;&#x8FD0;&#x884C;&#x65F6;&#x4F7F;&#x7528;&#x7684;&#x8DEF;&#x5F84;&#xFF1B;&#x5BF9;&#x4E8E;sqla_nose.py&#x548C;py.test&#xFF0C;&#x201C;./lib&#x201D;&#x524D;&#x7F00;&#x518D;&#x6B21;&#x63D2;&#x5165;&#x5230;sys.path&#x7684;&#x5934;&#x90E8;&#xFF0C;&#x4F46;&#x524D;&#x63D0;&#x662F;sys.flags.no_user_site&#x672A;&#x8BBE;&#x7F6E;&#xFF1B;&#x8FD9;&#x4F7F;&#x5F97;&#x5B83;&#x7684;&#x884C;&#x4E3A;&#x5C31;&#x50CF;Python&#x5728;&#x9ED8;&#x8BA4;&#x60C5;&#x51B5;&#x4E0B;&#x5728;&#x5F53;&#x524D;&#x8DEF;&#x5F84;&#x4E2D;&#x653E;&#x7F6E;&#x201C;&#x3002;&#x201D;&#x4E00;&#x6837;&#x3002;</span><span class="yiyi-st" id="yiyi-725">&#x5BF9;&#x4E8E;tox&#xFF0C;&#x6211;&#x4EEC;&#x73B0;&#x5728;&#x8BBE;&#x7F6E;PYTHONNOUSERSITE&#x6807;&#x5FD7;&#x3002;<a class="changeset-link headerlink reference internal" href="#change-767cbbf7a16d3556b45934d148b75590">&#xB6;</a></span></p><p><span class="yiyi-st" id="yiyi-726">&#x53C2;&#x8003;&#x6587;&#x732E;&#xFF1A;<a class="reference external" href="http://www.sqlalchemy.org/trac/ticket/3356">&#xFF03;3356</a></span></p></li></ul></div></div><div class="section" id="change-1.0.0b5"><h2><span class="yiyi-st" id="yiyi-728">1.0.0b5 <a class="headerlink" href="#change-1.0.0b5" title="Permalink to this headline">&#xB6; T0&gt;</a></span></h2><span class="yiyi-st" id="yiyi-748">&#x53D1;&#x5E03;&#x65E5;&#x671F;&#xFF1A;2015&#x5E74;4&#x6708;3&#x65E5;</span><div class="section" id="change-1.0.0b5-orm"><h3><span class="yiyi-st" id="yiyi-729">ORM <a class="headerlink" href="#change-1.0.0b5-orm" title="Permalink to this headline">&#xB6; T0&gt;</a></span></h3><ul class="simple"><li><p id="change-1.0.0b5-0"><span class="yiyi-st" id="yiyi-730"><span class="target" id="change-4dc519d63b37a4f457ef287d947f10a8"><strong>[orm] [bug] </strong></span>Fixed bug where the state tracking within multiple, nested <a class="reference internal" href="orm_session_api.html#sqlalchemy.orm.session.Session.begin_nested" title="sqlalchemy.orm.session.Session.begin_nested"><code class="xref py py-meth docutils literal"><span class="pre">Session.begin_nested()</span></code></a> operations would fail to propagate the &#x201C;dirty&#x201D; flag for an object that had been updated within the inner savepoint, such that if the enclosing savepoint were rolled back, the object would not be part of the state that was expired and therefore reverted to its database state.<a class="changeset-link headerlink reference internal" href="#change-4dc519d63b37a4f457ef287d947f10a8">&#xB6;</a></span></p><p><span class="yiyi-st" id="yiyi-731">&#x8FD9;&#x4E2A;&#x6539;&#x53D8;&#x4E5F;&#x88AB;<strong>backported</strong>&#x6539;&#x4E3A;&#xFF1A;0.9.10</span></p><p><span class="yiyi-st" id="yiyi-732">&#x53C2;&#x8003;&#x6587;&#x732E;&#xFF1A;<a class="reference external" href="http://www.sqlalchemy.org/trac/ticket/3352">&#xFF03;3352</a></span></p></li><li><p id="change-1.0.0b5-1"><span class="yiyi-st" id="yiyi-733"><span class="target" id="change-13d3f0158003a7617db3b63ddcf497d1"><strong>[orm] [bug] </strong></span><a class="reference internal" href="orm_query.html#sqlalchemy.orm.query.Query" title="sqlalchemy.orm.query.Query"><code class="xref py py-class docutils literal"><span class="pre">Query</span></code></a> doesn&#x2019;t support joins, subselects, or special FROM clauses when using the <a class="reference internal" href="orm_query.html#sqlalchemy.orm.query.Query.update" title="sqlalchemy.orm.query.Query.update"><code class="xref py py-meth docutils literal"><span class="pre">Query.update()</span></code></a> or <a class="reference internal" href="orm_query.html#sqlalchemy.orm.query.Query.delete" title="sqlalchemy.orm.query.Query.delete"><code class="xref py py-meth docutils literal"><span class="pre">Query.delete()</span></code></a> methods; instead of silently ignoring these fields if methods like <a class="reference internal" href="orm_query.html#sqlalchemy.orm.query.Query.join" title="sqlalchemy.orm.query.Query.join"><code class="xref py py-meth docutils literal"><span class="pre">Query.join()</span></code></a> or <a class="reference internal" href="orm_query.html#sqlalchemy.orm.query.Query.select_from" title="sqlalchemy.orm.query.Query.select_from"><code class="xref py py-meth docutils literal"><span class="pre">Query.select_from()</span></code></a> has been called, an error is raised. </span><span class="yiyi-st" id="yiyi-734">&#x5728;0.9.10&#x4E2D;&#xFF0C;&#x8FD9;&#x53EA;&#x4F1A;&#x53D1;&#x51FA;&#x8B66;&#x544A;&#x3002;<a class="changeset-link headerlink reference internal" href="#change-13d3f0158003a7617db3b63ddcf497d1">&#xB6;</a></span></p><p><span class="yiyi-st" id="yiyi-735">&#x53C2;&#x8003;&#x6587;&#x732E;&#xFF1A;<a class="reference external" href="http://www.sqlalchemy.org/trac/ticket/3349">&#xFF03;3349</a></span></p></li><li><p id="change-1.0.0b5-2"><span class="yiyi-st" id="yiyi-736"><span class="target" id="change-f3cfafae76ecf50510e353cf7dddeca5"><strong>[orm] [bug] </strong></span>Added a list() call around a weak dictionary used within the commit phase of the session, which without it could cause a &#x201C;dictionary changed size during iter&#x201D; error if garbage collection interacted within the process. </span><span class="yiyi-st" id="yiyi-737">&#x53D8;&#x66F4;&#x7531;&#xFF03;3139&#x5F15;&#x5165;&#x3002;<a class="changeset-link headerlink reference internal" href="#change-f3cfafae76ecf50510e353cf7dddeca5">&#xB6;</a></span></p><p></p></li><li><p id="change-1.0.0b5-3"><span class="yiyi-st" id="yiyi-738"><span class="target" id="change-d2fc894ca158a0ac1ac0bd16c128a42c"><strong>[orm] [bug] </strong></span>Fixed a bug related to &#x201C;nested&#x201D; inner join eager loading, which exists in 0.9 as well but is more of a regression in 1.0 due to <a class="reference external" href="http://www.sqlalchemy.org/trac/ticket/3008">#3008</a> which turns on &#x201C;nested&#x201D; by default, such that a joined eager load that travels across sibling paths from a common ancestor using innerjoin=True will correctly splice each &#x201C;innerjoin&#x201D; sibling into the appropriate part of the join, when a series of inner/outer joins are mixed together.<a class="changeset-link headerlink reference internal" href="#change-d2fc894ca158a0ac1ac0bd16c128a42c">&#xB6;</a></span></p><p><span class="yiyi-st" id="yiyi-739">&#x53C2;&#x8003;&#x6587;&#x732E;&#xFF1A;<a class="reference external" href="http://www.sqlalchemy.org/trac/ticket/3347">&#xFF03;3347</a></span></p></li></ul></div><div class="section" id="change-1.0.0b5-sql"><h3><span class="yiyi-st" id="yiyi-740">SQL <a class="headerlink" href="#change-1.0.0b5-sql" title="Permalink to this headline">&#xB6; T0&gt;</a></span></h3><ul class="simple"><li><p id="change-1.0.0b5-4"><span class="yiyi-st" id="yiyi-741"><span class="target" id="change-985d8b07c9b5d0ce36d2ac39ed07d053"><strong>[sql] [bug] </strong></span>The warning emitted by the unicode type for a non-unicode type has been liberalized to warn for values that aren&#x2019;t even string values, such as integers; previously, the updated warning system of 1.0 made use of string formatting operations which would raise an internal TypeError. </span><span class="yiyi-st" id="yiyi-742">&#x5C3D;&#x7BA1;&#x7406;&#x60F3;&#x60C5;&#x51B5;&#x4E0B;&#x8FD9;&#x4E9B;&#x60C5;&#x51B5;&#x5E94;&#x8BE5;&#x5B8C;&#x5168;&#x63D0;&#x5347;&#xFF0C;&#x4F46;&#x50CF;SQLite&#x548C;MySQL&#x8FD9;&#x6837;&#x7684;&#x540E;&#x7AEF;&#x4F1A;&#x63A5;&#x53D7;&#x5B83;&#x4EEC;&#xFF0C;&#x5E76;&#x4E14;&#x53EF;&#x80FD;&#x4F1A;&#x88AB;&#x9057;&#x7559;&#x4EE3;&#x7801;&#x4F7F;&#x7528;&#xFF0C;&#x66F4;&#x4E0D;&#x7528;&#x8BF4;&#x5982;&#x679C;&#x76EE;&#x6807;&#x540E;&#x7AEF;&#x5173;&#x95ED;unicode&#x8F6C;&#x6362;&#xFF0C;&#x5B83;&#x4EEC;&#x5C06;&#x59CB;&#x7EC8;&#x901A;&#x8FC7;&#x3002;<a class="changeset-link headerlink reference internal" href="#change-985d8b07c9b5d0ce36d2ac39ed07d053"> T0&gt;</a></span></p><p><span class="yiyi-st" id="yiyi-743">&#x53C2;&#x8003;&#x6587;&#x732E;&#xFF1A;<a class="reference external" href="http://www.sqlalchemy.org/trac/ticket/3346">&#xFF03;3346</a></span></p></li></ul></div><div class="section" id="change-1.0.0b5-postgresql"><h3><span class="yiyi-st" id="yiyi-744">&#x7684;PostgreSQL <a class="headerlink" href="#change-1.0.0b5-postgresql" title="Permalink to this headline">&#xB6; T0&gt;</a></span></h3><ul class="simple"><li><p id="change-1.0.0b5-5"><span class="yiyi-st" id="yiyi-745">&#x4FEE;&#x6B63;&#x4E86;&#x7531;&#x4E8E;<a class="reference external" href="http://www.sqlalchemy.org/trac/ticket/3184">&#xFF03;3184</a>&#x5F15;&#x8D77;&#x7684;&#x66F4;&#x65B0;PG&#x7D22;&#x5F15;&#x53CD;&#x5C04;&#x4F1A;&#x5BFC;&#x81F4;&#x7D22;&#x5F15;&#x64CD;&#x4F5C;&#x5728;Postgresql 8.4&#x53CA;&#x66F4;&#x65E9;&#x7248;&#x672C;&#x4E0A;&#x5931;&#x8D25;&#x7684;&#x9519;&#x8BEF;&#x3002;<span class="target" id="change-ea6acf6124c25077db337001ff4dd2cb"><strong>[postgresql] [bug] </strong></span></span><span class="yiyi-st" id="yiyi-746">&#x4F7F;&#x7528;&#x65E7;&#x7248;Postgresql&#x65F6;&#xFF0C;&#x73B0;&#x5728;&#x7981;&#x7528;&#x4E86;&#x8FD9;&#x4E9B;&#x589E;&#x5F3A;&#x529F;&#x80FD;&#x3002;<a class="changeset-link headerlink reference internal" href="#change-ea6acf6124c25077db337001ff4dd2cb">&#xB6;</a></span></p><p><span class="yiyi-st" id="yiyi-747">&#x53C2;&#x8003;&#x6587;&#x732E;&#xFF1A;<a class="reference external" href="http://www.sqlalchemy.org/trac/ticket/3343">&#xFF03;3343</a></span></p></li></ul></div></div><div class="section" id="change-1.0.0b4"><h2><span class="yiyi-st" id="yiyi-749">1.0.0b4 <a class="headerlink" href="#change-1.0.0b4" title="Permalink to this headline">&#xB6; T0&gt;</a></span></h2><span class="yiyi-st" id="yiyi-776">&#x53D1;&#x5E03;&#x65E5;&#x671F;&#xFF1A;2015&#x5E74;3&#x6708;29&#x65E5;</span><div class="section" id="change-1.0.0b4-sql"><h3><span class="yiyi-st" id="yiyi-750">SQL <a class="headerlink" href="#change-1.0.0b4-sql" title="Permalink to this headline">&#xB6; T0&gt;</a></span></h3><ul class="simple"><li><p id="change-1.0.0b4-0"><span class="yiyi-st" id="yiyi-751"><span class="target" id="change-aa46baa3af25851e9a3b23c4cf081182"><strong>[sql] [bug] </strong></span>Fixed bug in new &#x201C;label resolution&#x201D; feature of <a class="reference external" href="http://www.sqlalchemy.org/trac/ticket/2992">#2992</a> where a label that was anonymous, then labeled again with a name, would fail to be locatable via a textual label. </span><span class="yiyi-st" id="yiyi-752">&#x5982;&#x679C;&#x5728;&#x67E5;&#x8BE2;&#x4E2D;&#x4E3A;&#x6620;&#x5C04;&#x7684;<a class="reference internal" href="orm_mapping_columns.html#sqlalchemy.orm.column_property" title="sqlalchemy.orm.column_property"><code class="xref py py-func docutils literal"><span class="pre">column_property()</span></code></a>&#x8D4B;&#x4E88;&#x663E;&#x5F0F;&#x6807;&#x7B7E;&#xFF0C;&#x5219;&#x8FD9;&#x79CD;&#x60C5;&#x51B5;&#x81EA;&#x7136;&#x4F1A;&#x53D1;&#x751F;&#x3002;<a class="changeset-link headerlink reference internal" href="#change-aa46baa3af25851e9a3b23c4cf081182">&#xB6;</a></span></p><p><span class="yiyi-st" id="yiyi-753">&#x53C2;&#x8003;&#x6587;&#x732E;&#xFF1A;<a class="reference external" href="http://www.sqlalchemy.org/trac/ticket/3340">&#xFF03;3340</a></span></p></li><li><p id="change-1.0.0b4-1"><span class="yiyi-st" id="yiyi-754"><span class="target" id="change-842ea77e51f1517d3e1d9d918929b5a6"><strong>[sql] [bug] </strong></span>Fixed bug in new &#x201C;label resolution&#x201D; feature of <a class="reference external" href="http://www.sqlalchemy.org/trac/ticket/2992">#2992</a> where the string label placed in the order_by() or group_by() of a statement would place higher priority on the name as found inside the FROM clause instead of a more locally available name inside the columns clause.<a class="changeset-link headerlink reference internal" href="#change-842ea77e51f1517d3e1d9d918929b5a6">&#xB6;</a></span></p><p><span class="yiyi-st" id="yiyi-755">&#x53C2;&#x8003;&#x6587;&#x732E;&#xFF1A;<a class="reference external" href="http://www.sqlalchemy.org/trac/ticket/3335">&#xFF03;3335</a></span></p></li></ul></div><div class="section" id="change-1.0.0b4-schema"><h3><span class="yiyi-st" id="yiyi-756">&#x67B6;&#x6784;<a class="headerlink" href="#change-1.0.0b4-schema" title="Permalink to this headline">&#xB6; T0&gt;</a></span></h3><ul class="simple"><li><p id="change-1.0.0b4-2"><span class="yiyi-st" id="yiyi-757"><span class="target" id="change-6995af73c8bb8ff0a94424837ca173bf"><strong>[schema] [feature] </strong></span>The &#x201C;auto-attach&#x201D; feature of constraints such as <a class="reference internal" href="core_constraints.html#sqlalchemy.schema.UniqueConstraint" title="sqlalchemy.schema.UniqueConstraint"><code class="xref py py-class docutils literal"><span class="pre">UniqueConstraint</span></code></a> and <a class="reference internal" href="core_constraints.html#sqlalchemy.schema.CheckConstraint" title="sqlalchemy.schema.CheckConstraint"><code class="xref py py-class docutils literal"><span class="pre">CheckConstraint</span></code></a> has been further enhanced such that when the constraint is associated with non-table-bound <a class="reference internal" href="core_metadata.html#sqlalchemy.schema.Column" title="sqlalchemy.schema.Column"><code class="xref py py-class docutils literal"><span class="pre">Column</span></code></a> objects, the constraint will set up event listeners with the columns themselves such that the constraint auto attaches at the same time the columns are associated with the table. </span><span class="yiyi-st" id="yiyi-758">&#x8FD9;&#x7279;&#x522B;&#x6709;&#x52A9;&#x4E8E;&#x4E00;&#x4E9B;&#x8FB9;&#x7F18;&#x6848;&#x4F8B;&#x7684;&#x58F0;&#x660E;&#xFF0C;&#x4F46;&#x4E5F;&#x662F;&#x4E00;&#x822C;&#x7528;&#x9014;&#x3002;</span></p><div class="admonition seealso"><p class="first admonition-title"><span class="yiyi-st" id="yiyi-759">&#x4E5F;&#x53EF;&#x4EE5;&#x770B;&#x770B;</span></p><p class="last"><span class="yiyi-st" id="yiyi-760"><a class="reference internal" href="migration_10.html#change-3341"><span>Constraints referring to unattached Columns can auto-attach to the Table when their referred columns are attached</span></a></span></p></div><span class="yiyi-st" id="yiyi-762"> <a class="changeset-link headerlink reference internal" href="#change-6995af73c8bb8ff0a94424837ca173bf">&#xB6;</a></span><p><span class="yiyi-st" id="yiyi-761">&#x53C2;&#x8003;&#x6587;&#x732E;&#xFF1A;<a class="reference external" href="http://www.sqlalchemy.org/trac/ticket/3341">&#xFF03;3341</a></span></p></li></ul></div><div class="section" id="change-1.0.0b4-mysql"><h3><span class="yiyi-st" id="yiyi-763">MySQL&#x7684;<a class="headerlink" href="#change-1.0.0b4-mysql" title="Permalink to this headline">&#xB6; T0&gt;</a></span></h3><ul class="simple"><li><p id="change-1.0.0b4-3"><span class="yiyi-st" id="yiyi-764"><span class="target" id="change-266a2c933324f8199da8adcbe84e6365"><strong>[mysql] [bug] [pymysql] </strong></span>&#x4FEE;&#x6B63;&#x4E86;&#x4F7F;&#x7528;unicode&#x53C2;&#x6570;&#x4F7F;&#x7528;&#x201C;executemany&#x201D;&#x64CD;&#x4F5C;&#x65F6;&#x5BF9;PyMySQL&#x7684;Unicode&#x652F;&#x6301;&#x3002;</span><span class="yiyi-st" id="yiyi-765">SQLAlchemy&#x73B0;&#x5728;&#x5C06;&#x8BED;&#x53E5;&#x4EE5;&#x53CA;&#x7ED1;&#x5B9A;&#x53C2;&#x6570;&#x4F5C;&#x4E3A;unicode&#x5BF9;&#x8C61;&#x4F20;&#x9012;&#xFF0C;&#x56E0;&#x4E3A;PyMySQL&#x901A;&#x5E38;&#x5728;&#x5185;&#x90E8;&#x4F7F;&#x7528;&#x5B57;&#x7B26;&#x4E32;&#x63D2;&#x503C;&#x6765;&#x751F;&#x6210;&#x6700;&#x7EC8;&#x8BED;&#x53E5;&#xFF0C;&#x800C;&#x5728;executemany&#x7684;&#x60C5;&#x51B5;&#x4E0B;&#xFF0C;&#x4EC5;&#x5728;&#x6700;&#x540E;&#x8BED;&#x53E5;&#x4E2D;&#x6267;&#x884C;&#x201C;&#x7F16;&#x7801;&#x201D;&#x6B65;&#x9AA4;&#x3002;<a class="changeset-link headerlink reference internal" href="#change-266a2c933324f8199da8adcbe84e6365">&#xB6; T0&gt;</a></span></p><p><span class="yiyi-st" id="yiyi-766">&#x8FD9;&#x4E2A;&#x6539;&#x53D8;&#x4E5F;&#x88AB;<strong>backported</strong>&#x6539;&#x4E3A;&#xFF1A;0.9.10</span></p><p><span class="yiyi-st" id="yiyi-767">&#x53C2;&#x8003;&#x6587;&#x732E;&#xFF1A;<a class="reference external" href="http://www.sqlalchemy.org/trac/ticket/3337">&#xFF03;3337</a></span></p></li></ul></div><div class="section" id="change-1.0.0b4-mssql"><h3><span class="yiyi-st" id="yiyi-768">MSSQL <a class="headerlink" href="#change-1.0.0b4-mssql" title="Permalink to this headline">&#xB6; T0&gt;</a></span></h3><ul class="simple"><li><p id="change-1.0.0b4-4"><span class="yiyi-st" id="yiyi-769"><span class="target" id="change-dcda11a97947dd7e426511bc4af55102"><strong>[mssql] [bug] [sybase] [firebird] [oracle] </strong></span>Turned off the &#x201C;simple order by&#x201D; flag on the MSSQL, Oracle dialects; this is the flag that per <a class="reference external" href="http://www.sqlalchemy.org/trac/ticket/2992">#2992</a> causes an order by or group by an expression that&#x2019;s also in the columns clause to be copied by label, even if referenced as the expression object. </span><span class="yiyi-st" id="yiyi-770">MSSQL&#x7684;&#x884C;&#x4E3A;&#x73B0;&#x5728;&#x662F;&#x9ED8;&#x8BA4;&#x60C5;&#x51B5;&#x4E0B;&#x590D;&#x5236;&#x6574;&#x4E2A;&#x8868;&#x8FBE;&#x5F0F;&#x7684;&#x65E7;&#x884C;&#x4E3A;&#xFF0C;&#x56E0;&#x4E3A;MSSQL&#x5BF9;&#x8FD9;&#x4E9B;&#x884C;&#x4E3A;&#x5C24;&#x5176;&#x5728;GROUP BY&#x8868;&#x8FBE;&#x5F0F;&#x4E2D;&#x5F88;&#x6311;&#x5254;&#x3002;</span><span class="yiyi-st" id="yiyi-771">&#x5BF9;&#x4E8E;Firebird&#x548C;Sybase&#x65B9;&#x8A00;&#xFF0C;&#x8BE5;&#x6807;&#x5FD7;&#x5728;&#x9632;&#x5FA1;&#x65B9;&#x9762;&#x4E5F;&#x88AB;&#x5173;&#x95ED;&#x3002;</span></p><div class="admonition note"><p class="first admonition-title"><span class="yiyi-st" id="yiyi-772">&#x6CE8;&#x610F;</span></p><p class="last"><span class="yiyi-st" id="yiyi-773">&#x8FD9;&#x4E2A;&#x89E3;&#x51B3;&#x65B9;&#x6848;&#x662F;&#x4E0D;&#x6B63;&#x786E;&#x7684;&#xFF0C;&#x8BF7;&#x53C2;&#x9605;1.0.2&#x7248;&#x5BF9;&#x8FD9;&#x4E2A;&#x51B3;&#x8BAE;&#x7684;&#x8FD4;&#x5DE5;&#x3002;</span></p></div><span class="yiyi-st" id="yiyi-775"> <a class="changeset-link headerlink reference internal" href="#change-dcda11a97947dd7e426511bc4af55102">&#xB6;</a></span><p><span class="yiyi-st" id="yiyi-774">&#x53C2;&#x8003;&#x6587;&#x732E;&#xFF1A;<a class="reference external" href="http://www.sqlalchemy.org/trac/ticket/3338">&#xFF03;3338</a></span></p></li></ul></div></div><div class="section" id="change-1.0.0b3"><h2><span class="yiyi-st" id="yiyi-777">1.0.0b3 <a class="headerlink" href="#change-1.0.0b3" title="Permalink to this headline">&#xB6; T0&gt;</a></span></h2><span class="yiyi-st" id="yiyi-781">&#x53D1;&#x5E03;&#x65E5;&#x671F;&#xFF1A;2015&#x5E74;3&#x6708;20&#x65E5;</span><div class="section" id="change-1.0.0b3-mysql"><h3><span class="yiyi-st" id="yiyi-778">MySQL&#x7684;<a class="headerlink" href="#change-1.0.0b3-mysql" title="Permalink to this headline">&#xB6; T0&gt;</a></span></h3><ul class="simple"><li><p id="change-1.0.0b3-0"><span class="yiyi-st" id="yiyi-779"><span class="target" id="change-618be62c1ace7b1a9c3d132a7b410c7c"><strong>[mysql] [bug] </strong></span>&#x4FEE;&#x590D;&#x4E86;&#x88AB;&#x65E0;&#x610F;&#x4E2D;&#x6CE8;&#x91CA;&#x6389;&#x7684;&#x95EE;&#x9898;&#xFF03;2771&#x7684;&#x63D0;&#x4EA4;&#x3002;<a class="changeset-link headerlink reference internal" href="#change-618be62c1ace7b1a9c3d132a7b410c7c">&#xB6;</a></span></p><p><span class="yiyi-st" id="yiyi-780">&#x53C2;&#x8003;&#x6587;&#x732E;&#xFF1A;<a class="reference external" href="http://www.sqlalchemy.org/trac/ticket/2771">&#xFF03;2771</a></span></p></li></ul></div></div><div class="section" id="change-1.0.0b2"><h2><span class="yiyi-st" id="yiyi-782">1.0.0b2 <a class="headerlink" href="#change-1.0.0b2" title="Permalink to this headline">&#xB6; T0&gt;</a></span></h2><span class="yiyi-st" id="yiyi-808">&#x53D1;&#x5E03;&#x65E5;&#x671F;&#xFF1A;2015&#x5E74;3&#x6708;20&#x65E5;</span><div class="section" id="change-1.0.0b2-orm"><h3><span class="yiyi-st" id="yiyi-783">ORM <a class="headerlink" href="#change-1.0.0b2-orm" title="Permalink to this headline">&#xB6; T0&gt;</a></span></h3><ul class="simple"><li><p id="change-1.0.0b2-0"><span class="yiyi-st" id="yiyi-784"><span class="target" id="change-4c044b2c0a16bca90a751e90c5071191"><strong>[orm] [bug] </strong></span>Fixed unexpected use regression from pullreq github:137 where Py2K unicode literals (e.g. <code class="docutils literal"><span class="pre">u&quot;&quot;</span></code>) would not be accepted by the <a class="reference internal" href="orm_relationship_api.html#sqlalchemy.orm.relationship.params.cascade" title="sqlalchemy.orm.relationship"><code class="xref py py-paramref docutils literal"><span class="pre">relationship.cascade</span></code></a> option. </span><span class="yiyi-st" id="yiyi-785">&#x8BF7;&#x6C42;&#x793C;&#x8C8C;Julien Castets&#x3002;<a class="changeset-link headerlink reference internal" href="#change-4c044b2c0a16bca90a751e90c5071191">&#xB6;</a></span></p><p><span class="yiyi-st" id="yiyi-786">&#x53C2;&#x8003;&#x6587;&#x732E;&#xFF1A;<a class="reference external" href="http://www.sqlalchemy.org/trac/ticket/3327">&#xFF03;3327</a>&#xFF0C;<a class="reference external" href="https://github.com/zzzeek/sqlalchemy/pull/160">&#x8BF7;&#x6C42;github&#xFF1A;160</a></span></p></li></ul></div><div class="section" id="change-1.0.0b2-orm-declarative"><h3><span class="yiyi-st" id="yiyi-787">orm declarative <a class="headerlink" href="#change-1.0.0b2-orm-declarative" title="Permalink to this headline">&#xB6;</a></span></h3><ul class="simple"><li><p id="change-1.0.0b2-1"><span class="yiyi-st" id="yiyi-788"><span class="target" id="change-a790c86836f12d50614920b63573998a"><strong>[orm] [declarative] [change] </strong></span>&#x677E;&#x6563;&#x4E86;&#x4E00;&#x4E9B;&#x6DFB;&#x52A0;&#x5230;<code class="docutils literal"><span class="pre">@declared_attr</span></code>&#x5BF9;&#x8C61;&#x7684;&#x9650;&#x5236;&#xFF0C;&#x4EE5;&#x9632;&#x6B62;&#x5728;&#x58F0;&#x660E;&#x8FC7;&#x7A0B;&#x4E4B;&#x5916;&#x8C03;&#x7528;&#x5B83;&#x4EEC;&#xFF1B;&#x8FD9;&#x4E0E;&#xFF03;3150&#x7684;&#x589E;&#x5F3A;&#x6709;&#x5173;&#xFF0C;&#x5B83;&#x5141;&#x8BB8;<code class="docutils literal"><span class="pre">@declared_attr</span></code>&#x8FD4;&#x56DE;&#x4E00;&#x4E2A;&#x6839;&#x636E;&#x5F53;&#x524D;&#x7C7B;&#x914D;&#x7F6E;&#x7F13;&#x5B58;&#x7684;&#x503C;&#x3002;</span><span class="yiyi-st" id="yiyi-789">&#x5F02;&#x5E38;&#x5F15;&#x53D1;&#x5DF2;&#x88AB;&#x5220;&#x9664;&#xFF0C;&#x5E76;&#x4E14;&#x884C;&#x4E3A;&#x53D1;&#x751F;&#x4E86;&#x53D8;&#x5316;&#xFF0C;&#x56E0;&#x6B64;&#x5728;&#x58F0;&#x660E;&#x8FC7;&#x7A0B;&#x4E4B;&#x5916;&#xFF0C;&#x7531;<code class="docutils literal"><span class="pre">@declared_attr</span></code>&#x88C5;&#x9970;&#x7684;&#x51FD;&#x6570;&#x6BCF;&#x6B21;&#x90FD;&#x4F1A;&#x50CF;&#x5E38;&#x89C4;<code class="docutils literal"><span class="pre">@property</span></code>&#x4E00;&#x6837;&#x8C03;&#x7528;&#xFF0C;&#x6CA1;&#x6709;&#x4F7F;&#x7528;&#x4EFB;&#x4F55;&#x7F13;&#x5B58;&#xFF0C;&#x56E0;&#x4E3A;&#x5728;&#x8FD9;&#x4E2A;&#x9636;&#x6BB5;&#x6CA1;&#x6709;&#x4EFB;&#x4F55;&#x7F13;&#x5B58;&#x3002;<a class="changeset-link headerlink reference internal" href="#change-a790c86836f12d50614920b63573998a">&#xB6;</a></span></p><p><span class="yiyi-st" id="yiyi-790">&#x53C2;&#x8003;&#x6587;&#x732E;&#xFF1A;<a class="reference external" href="http://www.sqlalchemy.org/trac/ticket/3331">&#xFF03;3331</a></span></p></li></ul></div><div class="section" id="change-1.0.0b2-engine"><h3><span class="yiyi-st" id="yiyi-791">&#x53D1;&#x52A8;&#x673A;<a class="headerlink" href="#change-1.0.0b2-engine" title="Permalink to this headline">&#xB6; T0&gt;</a></span></h3><ul class="simple"><li><p id="change-1.0.0b2-2"><span class="yiyi-st" id="yiyi-792"><span class="target" id="change-95589804661b80fa4b64b69f3b32b165"><strong>[engine] [bug] </strong></span>The &#x201C;auto close&#x201D; for <a class="reference internal" href="core_connections.html#sqlalchemy.engine.ResultProxy" title="sqlalchemy.engine.ResultProxy"><code class="xref py py-class docutils literal"><span class="pre">ResultProxy</span></code></a> is now a &#x201C;soft&#x201D; close. </span><span class="yiyi-st" id="yiyi-793">&#x4E5F;&#x5C31;&#x662F;&#x8BF4;&#xFF0C;&#x5728;&#x4F7F;&#x7528;&#x63D0;&#x53D6;&#x65B9;&#x6CD5;&#x6392;&#x9664;&#x6240;&#x6709;&#x884C;&#x4E4B;&#x540E;&#xFF0C;DBAPI&#x6E38;&#x6807;&#x5C06;&#x50CF;&#x4EE5;&#x524D;&#x4E00;&#x6837;&#x88AB;&#x91CA;&#x653E;&#xFF0C;&#x5E76;&#x4E14;&#x53EF;&#x4EE5;&#x5B89;&#x5168;&#x5730;&#x4E22;&#x5F03;&#x8BE5;&#x5BF9;&#x8C61;&#xFF0C;&#x4F46;&#x53EF;&#x80FD;&#x4F1A;&#x7EE7;&#x7EED;&#x8C03;&#x7528;&#x83B7;&#x53D6;&#x65B9;&#x6CD5;&#xFF0C;&#x4EE5;&#x4FBF;&#x8FD4;&#x56DE;&#x7ED3;&#x679C;&#x5BF9;&#x8C61;&#xFF08;&#x65E0;&#x4E3A;fetchone&#xFF0C;fetchmany&#x548C;fetchall&#x7A7A;&#x5217;&#x8868;&#xFF09;&#x3002;</span><span class="yiyi-st" id="yiyi-794">&#x53EA;&#x6709;&#x660E;&#x786E;&#x8C03;&#x7528;<a class="reference internal" href="core_connections.html#sqlalchemy.engine.ResultProxy.close" title="sqlalchemy.engine.ResultProxy.close"><code class="xref py py-meth docutils literal"><span class="pre">ResultProxy.close()</span></code></a>&#x65F6;&#xFF0C;&#x8FD9;&#x4E9B;&#x65B9;&#x6CD5;&#x624D;&#x4F1A;&#x5F15;&#x53D1;&#x201C;result is closed&#x201D;&#x9519;&#x8BEF;&#x3002;</span></p><div class="admonition seealso"><p class="first admonition-title"><span class="yiyi-st" id="yiyi-795">&#x4E5F;&#x53EF;&#x4EE5;&#x770B;&#x770B;</span></p><p class="last"><span class="yiyi-st" id="yiyi-796"><a class="reference internal" href="migration_10.html#change-3330"><span>ResultProxy &#x201C;auto close&#x201D; is now a &#x201C;soft&#x201D; close</span></a></span></p></div><span class="yiyi-st" id="yiyi-798"> <a class="changeset-link headerlink reference internal" href="#change-95589804661b80fa4b64b69f3b32b165">&#xB6;</a></span><p><span class="yiyi-st" id="yiyi-797">&#x53C2;&#x8003;&#x6587;&#x732E;&#xFF1A;<a class="reference external" href="http://www.sqlalchemy.org/trac/ticket/3329">&#xFF03;3329</a>&#xFF0C;<a class="reference external" href="http://www.sqlalchemy.org/trac/ticket/3330">&#xFF03;3330</a></span></p></li></ul></div><div class="section" id="change-1.0.0b2-mysql"><h3><span class="yiyi-st" id="yiyi-799">MySQL&#x7684;<a class="headerlink" href="#change-1.0.0b2-mysql" title="Permalink to this headline">&#xB6; T0&gt;</a></span></h3><ul class="simple"><li><p id="change-1.0.0b2-3"><span class="yiyi-st" id="yiyi-800"><span class="target" id="change-d5a00477ae396554230dc380ca9cff6c"><strong>[mysql] [bug] [py3k] </strong></span>&#x4FEE;&#x6B63;&#x4E86;Py3K&#x4E0A;&#x6CA1;&#x6709;&#x6B63;&#x786E;&#x4F7F;&#x7528;<code class="docutils literal"><span class="pre">ord()</span></code>&#x51FD;&#x6570;&#x7684;<a class="reference internal" href="dialects_mysql.html#sqlalchemy.dialects.mysql.BIT" title="sqlalchemy.dialects.mysql.BIT"><code class="xref py py-class docutils literal"><span class="pre">mysql.BIT</span></code></a>&#x7C7B;&#x578B;&#x3002;</span><span class="yiyi-st" id="yiyi-801">&#x8BF7;&#x6C42;&#x793C;&#x8C8C;David Marin&#x3002;<a class="changeset-link headerlink reference internal" href="#change-d5a00477ae396554230dc380ca9cff6c">&#xB6;</a></span></p><p><span class="yiyi-st" id="yiyi-802">&#x8FD9;&#x4E2A;&#x6539;&#x53D8;&#x4E5F;&#x88AB;<strong>backported</strong>&#x6539;&#x4E3A;&#xFF1A;0.9.10</span></p><p><span class="yiyi-st" id="yiyi-803">&#x53C2;&#x8003;&#x6587;&#x732E;&#xFF1A;<a class="reference external" href="http://www.sqlalchemy.org/trac/ticket/3333">&#xFF03;3333</a>&#xFF0C;<a class="reference external" href="https://github.com/zzzeek/sqlalchemy/pull/158">&#x8BF7;&#x6C42;github&#xFF1A;158</a></span></p></li><li><p id="change-1.0.0b2-4"><span class="yiyi-st" id="yiyi-804"><span class="target" id="change-d371fa3b0a2b4808035e7e50eac2a491"><strong>[mysql] [bug] </strong></span>Fixes to fully support using the <code class="docutils literal"><span class="pre">&apos;utf8mb4&apos;</span></code> MySQL-specific charset with MySQL dialects, in particular MySQL-Python and PyMySQL. </span><span class="yiyi-st" id="yiyi-805">&#x53E6;&#x5916;&#xFF0C;&#x62A5;&#x544A;&#x8BF8;&#x5982;&apos;koi8u&apos;&#x6216;&apos;eucjpms&apos;&#x7B49;&#x66F4;&#x591A;&#x4E0D;&#x5BFB;&#x5E38;&#x5B57;&#x7B26;&#x96C6;&#x7684;MySQL&#x6570;&#x636E;&#x5E93;&#x4E5F;&#x80FD;&#x6B63;&#x5E38;&#x5DE5;&#x4F5C;&#x3002;</span><span class="yiyi-st" id="yiyi-806">&#x62C9;&#x683C;&#x8BF7;&#x6C42;&#x6258;&#x9A6C;&#x65AF;&#x683C;&#x5170;&#x6770;&#x63D0;&#x4F9B;<a class="changeset-link headerlink reference internal" href="#change-d371fa3b0a2b4808035e7e50eac2a491">&#xB6;</a></span></p><p><span class="yiyi-st" id="yiyi-807">&#x53C2;&#x8003;&#x6587;&#x732E;&#xFF1A;<a class="reference external" href="http://www.sqlalchemy.org/trac/ticket/2771">&#xFF03;2771</a>&#xFF0C;<a class="reference external" href="https://bitbucket.org/zzzeek/sqlalchemy/pull-request/49">&#x62C9;&#x53D6;&#x8BF7;&#x6C42;bitbucket&#xFF1A;49</a></span></p></li></ul></div></div><div class="section" id="change-1.0.0b1"><h2><span class="yiyi-st" id="yiyi-809">1.0.0b1 <a class="headerlink" href="#change-1.0.0b1" title="Permalink to this headline">&#xB6; T0&gt;</a></span></h2><span class="yiyi-st" id="yiyi-1732">&#x53D1;&#x5E03;&#x65E5;&#x671F;&#xFF1A;2015&#x5E74;3&#x6708;13&#x65E5;</span><p><span class="yiyi-st" id="yiyi-810">&#x7248;&#x672C;1.0.0b1&#x662F;1.0&#x7CFB;&#x5217;&#x7684;&#x7B2C;&#x4E00;&#x4E2A;&#x7248;&#x672C;&#x3002;</span><span class="yiyi-st" id="yiyi-811">&#x8FD9;&#x91CC;&#x63CF;&#x8FF0;&#x7684;&#x8BB8;&#x591A;&#x53D8;&#x5316;&#x4E5F;&#x5B58;&#x5728;&#x4E8E;0.9&#x548C;0.8&#x7CFB;&#x5217;&#x4E2D;&#x3002;</span><span class="yiyi-st" id="yiyi-812">&#x5BF9;&#x4E8E;&#x7279;&#x5B9A;&#x4E8E;1.0&#x7684;&#x66F4;&#x6539;&#xFF0C;&#x5F3A;&#x8C03;&#x517C;&#x5BB9;&#x6027;&#x95EE;&#x9898;&#xFF0C;&#x8BF7;&#x53C2;&#x9605;<a class="reference internal" href="migration_10.html"><em>What&#x2019;s New in SQLAlchemy 1.0?</em></a>&#x3002;</span></p><div class="section" id="change-1.0.0b1-general"><h3><span class="yiyi-st" id="yiyi-813">&#x4E00;&#x822C;<a class="headerlink" href="#change-1.0.0b1-general" title="Permalink to this headline">&#xB6; T0&gt;</a></span></h3><ul class="simple"><li><p id="change-1.0.0b1-0"><span class="yiyi-st" id="yiyi-814"><span class="target" id="change-2f14e668cc239752997ac9b41f224ec6"><strong>[general] [feature] </strong></span>&#x901A;&#x8FC7;&#x5BF9;&#x8BB8;&#x591A;&#x5185;&#x90E8;&#x5BF9;&#x8C61;&#x4F7F;&#x7528;<code class="docutils literal"><span class="pre">__slots__</span></code>&#xFF0C;&#x7ED3;&#x6784;&#x5185;&#x5B58;&#x4F7F;&#x7528;&#x5F97;&#x5230;&#x4E86;&#x6539;&#x8FDB;&#x3002;</span><span class="yiyi-st" id="yiyi-815">&#x6B64;&#x4F18;&#x5316;&#x5C24;&#x5176;&#x9002;&#x7528;&#x4E8E;&#x5177;&#x6709;&#x5927;&#x91CF;&#x8868;&#x548C;&#x5217;&#x7684;&#x5927;&#x578B;&#x5E94;&#x7528;&#x7A0B;&#x5E8F;&#x7684;&#x57FA;&#x672C;&#x5185;&#x5B58;&#x5927;&#x5C0F;&#xFF0C;&#x5E76;&#x5927;&#x5927;&#x51CF;&#x5C11;&#x5404;&#x79CD;&#x5927;&#x5BB9;&#x91CF;&#x5BF9;&#x8C61;&#xFF08;&#x5305;&#x62EC;&#x4E8B;&#x4EF6;&#x76D1;&#x542C;&#x5185;&#x90E8;&#x4E8B;&#x4EF6;&#xFF0C;&#x6BD4;&#x8F83;&#x5BF9;&#x8C61;&#x4EE5;&#x53CA;ORM&#x5C5E;&#x6027;&#x548C;&#x52A0;&#x8F7D;&#x5668;&#x7B56;&#x7565;&#x7684;&#x67D0;&#x4E9B;&#x90E8;&#x5206;&#xFF09;&#x7684;&#x5185;&#x5B58;&#x5927;&#x5C0F;&#x7CFB;&#x7EDF;&#x3002;</span></p><div class="admonition seealso"><p class="first admonition-title"><span class="yiyi-st" id="yiyi-816">&#x4E5F;&#x53EF;&#x4EE5;&#x770B;&#x770B;</span></p><p class="last"><span class="yiyi-st" id="yiyi-817"><a class="reference internal" href="migration_10.html#feature-slots"><span>Significant Improvements in Structural Memory Use</span></a></span></p></div><span class="yiyi-st" id="yiyi-818"> <a class="changeset-link headerlink reference internal" href="#change-2f14e668cc239752997ac9b41f224ec6">&#xB6;</a></span><p></p></li><li><p id="change-1.0.0b1-1"><span class="yiyi-st" id="yiyi-819"><span class="target" id="change-be87e00250d24db1082e7f44ee07d44e"><strong>[general] [bug] </strong></span>The <code class="docutils literal"><span class="pre">__module__</span></code> attribute is now set for all those SQL and ORM functions that are derived as &#x201C;public factory&#x201D; symbols, which should assist with documentation tools being able to report on the target module.<a class="changeset-link headerlink reference internal" href="#change-be87e00250d24db1082e7f44ee07d44e">&#xB6;</a></span></p><p><span class="yiyi-st" id="yiyi-820">&#x53C2;&#x8003;&#x6587;&#x732E;&#xFF1A;<a class="reference external" href="http://www.sqlalchemy.org/trac/ticket/3218">&#xFF03;3218</a></span></p></li></ul></div><div class="section" id="change-1.0.0b1-orm"><h3><span class="yiyi-st" id="yiyi-821">ORM <a class="headerlink" href="#change-1.0.0b1-orm" title="Permalink to this headline">&#xB6; T0&gt;</a></span></h3><ul class="simple"><li><p id="change-1.0.0b1-2"><span class="yiyi-st" id="yiyi-822"><span class="target" id="change-616a1ffdd35a65e93fd791c48eee3e2a"><strong>[orm] [feature] </strong></span>&#x5411;&#x7531;<a class="reference internal" href="orm_query.html#sqlalchemy.orm.query.Query.column_descriptions" title="sqlalchemy.orm.query.Query.column_descriptions"><code class="xref py py-attr docutils literal"><span class="pre">Query.column_descriptions</span></code></a>&#x8FD4;&#x56DE;&#x7684;&#x5B57;&#x5178;&#x6DFB;&#x52A0;&#x4E86;&#x4E00;&#x4E2A;&#x65B0;&#x6761;&#x76EE;<code class="docutils literal"><span class="pre">&quot;entity&quot;</span></code>&#x3002;</span><span class="yiyi-st" id="yiyi-823">&#x8FD9;&#x662F;&#x6307;&#x7531;&#x8868;&#x8FBE;&#x5F0F;&#x5F15;&#x7528;&#x7684;&#x4E3B;&#x8981;ORM&#x6620;&#x5C04;&#x7C7B;&#x6216;&#x522B;&#x540D;&#x7C7B;&#x3002;</span><span class="yiyi-st" id="yiyi-824">&#x4E0E;<code class="docutils literal"><span class="pre">&quot;type&quot;</span></code>&#x7684;&#x73B0;&#x6709;&#x6761;&#x76EE;&#x76F8;&#x6BD4;&#xFF0C;&#x5373;&#x4F7F;&#x4ECE;&#x5217;&#x8868;&#x8FBE;&#x5F0F;&#x4E2D;&#x63D0;&#x53D6;&#xFF0C;&#x5B83;&#x4E5F;&#x5C06;&#x59CB;&#x7EC8;&#x662F;&#x6620;&#x5C04;&#x5B9E;&#x4F53;&#xFF0C;&#x5982;&#x679C;&#x7ED9;&#x5B9A;&#x8868;&#x8FBE;&#x5F0F;&#x662F;&#x7EAF;&#x7CB9;&#x6838;&#x5FC3;&#x8868;&#x8FBE;&#x5F0F;&#xFF0C;&#x5B83;&#x5C06;&#x59CB;&#x7EC8;&#x4E3A;None&#x3002;</span><span class="yiyi-st" id="yiyi-825">&#x53E6;&#x89C1;<a class="reference external" href="http://www.sqlalchemy.org/trac/ticket/3403">&#xFF03;3403</a>&#xFF0C;&#x5B83;&#x4FEE;&#x590D;&#x4E86;&#x6B64;&#x529F;&#x80FD;&#x4E2D;&#x7684;&#x56DE;&#x5F52;&#xFF0C;&#x8BE5;&#x529F;&#x80FD;&#x5728;0.9.10&#x4E2D;&#x672A;&#x53D1;&#x5E03;&#xFF0C;&#x4F46;&#x5728;1.0&#x7248;&#x672C;&#x4E2D;&#x53D1;&#x5E03;&#x3002;<a class="changeset-link headerlink reference internal" href="#change-616a1ffdd35a65e93fd791c48eee3e2a">&#xB6;</a></span></p><p><span class="yiyi-st" id="yiyi-826">&#x8FD9;&#x4E2A;&#x6539;&#x53D8;&#x4E5F;&#x88AB;<strong>backported</strong>&#x6539;&#x4E3A;&#xFF1A;0.9.10</span></p><p><span class="yiyi-st" id="yiyi-827">&#x53C2;&#x8003;&#x6587;&#x732E;&#xFF1A;<a class="reference external" href="http://www.sqlalchemy.org/trac/ticket/3320">&#xFF03;3320</a></span></p></li><li><p id="change-1.0.0b1-3"><span class="yiyi-st" id="yiyi-828"><span class="target" id="change-3acdcfd8019bdf552158d7f199e9d4a7"><strong>[orm] [feature] </strong></span>&#x6DFB;&#x52A0;&#x4E86;&#x4E00;&#x4E2A;&#x65B0;&#x53C2;&#x6570;<a class="reference internal" href="orm_session_api.html#sqlalchemy.orm.session.Session.connection.params.execution_options" title="sqlalchemy.orm.session.Session.connection"><code class="xref py py-paramref docutils literal"><span class="pre">Session.connection.execution_options</span></code></a>&#xFF0C;&#x5B83;&#x53EF;&#x7528;&#x4E8E;&#x5728;<a class="reference internal" href="core_connections.html#sqlalchemy.engine.Connection" title="sqlalchemy.engine.Connection"><code class="xref py py-class docutils literal"><span class="pre">Connection</span></code></a>&#x4E0A;&#x8BBE;&#x7F6E;&#x6267;&#x884C;&#x9009;&#x9879;&#x5728;&#x4EA4;&#x6613;&#x5F00;&#x59CB;&#x4E4B;&#x524D;&#x9996;&#x5148;&#x68C0;&#x67E5;&#x51FA;&#x6765;&#x3002;</span><span class="yiyi-st" id="yiyi-829">&#x8FD9;&#x7528;&#x4E8E;&#x5728;&#x4E8B;&#x52A1;&#x542F;&#x52A8;&#x4E4B;&#x524D;&#x8BBE;&#x7F6E;&#x8FDE;&#x63A5;&#x4E0A;&#x7684;&#x9694;&#x79BB;&#x7EA7;&#x522B;&#x7B49;&#x9009;&#x9879;&#x3002;</span></p><div class="admonition seealso"><p class="first admonition-title"><span class="yiyi-st" id="yiyi-830">&#x4E5F;&#x53EF;&#x4EE5;&#x770B;&#x770B;</span></p><p class="last"><span class="yiyi-st" id="yiyi-831"><a class="reference internal" href="orm_session_transaction.html#session-transaction-isolation"><span>Setting Transaction Isolation Levels</span></a>  - &#x65B0;&#x7684;&#x6587;&#x6863;&#x90E8;&#x5206;&#x8BE6;&#x7EC6;&#x4ECB;&#x7ECD;&#x4E86;&#x4F7F;&#x7528;&#x4F1A;&#x8BDD;&#x8BBE;&#x7F6E;&#x4E8B;&#x52A1;&#x9694;&#x79BB;&#x7684;&#x6700;&#x4F73;&#x5B9E;&#x8DF5;&#x3002;</span></p></div><span class="yiyi-st" id="yiyi-834"> <a class="changeset-link headerlink reference internal" href="#change-3acdcfd8019bdf552158d7f199e9d4a7">&#xB6;</a></span><p><span class="yiyi-st" id="yiyi-832">&#x8FD9;&#x4E2A;&#x6539;&#x53D8;&#x4E5F;&#x88AB;<strong>backported</strong>&#x6539;&#x4E3A;&#xFF1A;0.9.9</span></p><p><span class="yiyi-st" id="yiyi-833">&#x53C2;&#x8003;&#x6587;&#x732E;&#xFF1A;<a class="reference external" href="http://www.sqlalchemy.org/trac/ticket/3296">&#xFF03;3296</a></span></p></li><li><p id="change-1.0.0b1-4"><span class="yiyi-st" id="yiyi-835"><span class="target" id="change-9a67336d5098be7fa6d5d1712e13abf7"><strong>[orm] [feature] </strong></span>Added new method <a class="reference internal" href="orm_session_api.html#sqlalchemy.orm.session.Session.invalidate" title="sqlalchemy.orm.session.Session.invalidate"><code class="xref py py-meth docutils literal"><span class="pre">Session.invalidate()</span></code></a>, functions similarly to <a class="reference internal" href="orm_session_api.html#sqlalchemy.orm.session.Session.close" title="sqlalchemy.orm.session.Session.close"><code class="xref py py-meth docutils literal"><span class="pre">Session.close()</span></code></a>, except also calls <a class="reference internal" href="core_connections.html#sqlalchemy.engine.Connection.invalidate" title="sqlalchemy.engine.Connection.invalidate"><code class="xref py py-meth docutils literal"><span class="pre">Connection.invalidate()</span></code></a> on all connections, guaranteeing that they will not be returned to the connection pool. </span><span class="yiyi-st" id="yiyi-836">&#x8FD9;&#x5728;&#x4F8B;&#x5982;&#x60C5;&#x51B5;&#x4E0B;&#x662F;&#x6709;&#x7528;&#x7684;&#x5728;&#x8FDB;&#x4E00;&#x6B65;&#x4F7F;&#x7528;&#x8FDE;&#x63A5;&#x4E0D;&#x5B89;&#x5168;&#x65F6;&#x5904;&#x7406;gevent&#x8D85;&#x65F6;&#xFF0C;&#x5373;&#x4F7F;&#x662F;&#x56DE;&#x6EDA;&#x3002;<a class="changeset-link headerlink reference internal" href="#change-9a67336d5098be7fa6d5d1712e13abf7">&#xB6;</a></span></p><p><span class="yiyi-st" id="yiyi-837">&#x8FD9;&#x4E2A;&#x6539;&#x53D8;&#x4E5F;&#x88AB;<strong>backported</strong>&#x6539;&#x4E3A;&#xFF1A;0.9.9</span></p><p></p></li><li><p id="change-1.0.0b1-5"><span class="yiyi-st" id="yiyi-838"><span class="target" id="change-bc2f57a8dd0b3e0854cf5c5fe90779ae"><strong>[orm] [feature] </strong></span>The &#x201C;primaryjoin&#x201D; model has been stretched a bit further to allow a join condition that is strictly from a single column to itself, translated through some kind of SQL function or expression. </span><span class="yiyi-st" id="yiyi-839">&#x8FD9;&#x662F;&#x4E00;&#x79CD;&#x5B9E;&#x9A8C;&#xFF0C;&#x4F46;&#x6982;&#x5FF5;&#x7684;&#x7B2C;&#x4E00;&#x4E2A;&#x8BC1;&#x660E;&#x662F;&#x201C;&#x7269;&#x5316;&#x8DEF;&#x5F84;&#x201D;&#x8FDE;&#x63A5;&#x6761;&#x4EF6;&#xFF0C;&#x5176;&#x4E2D;&#x8DEF;&#x5F84;&#x5B57;&#x7B26;&#x4E32;&#x4F7F;&#x7528;&#x201C;like&#x201D;&#x4E0E;&#x81EA;&#x8EAB;&#x8FDB;&#x884C;&#x6BD4;&#x8F83;&#x3002;</span><span class="yiyi-st" id="yiyi-840"><a class="reference internal" href="core_sqlelement.html#sqlalchemy.sql.operators.ColumnOperators.like" title="sqlalchemy.sql.operators.ColumnOperators.like"><code class="xref py py-meth docutils literal"><span class="pre">ColumnOperators.like()</span></code></a>&#x8FD0;&#x7B97;&#x7B26;&#x4E5F;&#x88AB;&#x6DFB;&#x52A0;&#x5230;&#x5728;primaryjoin&#x6761;&#x4EF6;&#x4E2D;&#x4F7F;&#x7528;&#x7684;&#x6709;&#x6548;&#x8FD0;&#x7B97;&#x7B26;&#x5217;&#x8868;&#x4E2D;&#x3002;<a class="changeset-link headerlink reference internal" href="#change-bc2f57a8dd0b3e0854cf5c5fe90779ae">&#xB6;</a></span></p><p><span class="yiyi-st" id="yiyi-841">&#x8FD9;&#x4E2A;&#x6539;&#x53D8;&#x4E5F;&#x88AB;<strong>backported</strong>&#x6539;&#x4E3A;&#xFF1A;0.9.5</span></p><p><span class="yiyi-st" id="yiyi-842">&#x53C2;&#x8003;&#x6587;&#x732E;&#xFF1A;<a class="reference external" href="http://www.sqlalchemy.org/trac/ticket/3029">&#xFF03;3029</a></span></p></li><li><p id="change-1.0.0b1-6"><span class="yiyi-st" id="yiyi-843"><span class="target" id="change-ad1b3230bf3a35c539d3800bd7eaa906"><strong>[orm] [feature] </strong></span>&#x6DFB;&#x52A0;&#x4E86;&#x65B0;&#x7684;&#x5B9E;&#x7528;&#x7A0B;&#x5E8F;&#x51FD;&#x6570;<a class="reference internal" href="orm_session_api.html#sqlalchemy.orm.session.make_transient_to_detached" title="sqlalchemy.orm.session.make_transient_to_detached"><code class="xref py py-func docutils literal"><span class="pre">make_transient_to_detached()</span></code></a>&#xFF0C;&#x53EF;&#x7528;&#x4E8E;&#x5236;&#x9020;&#x8868;&#x73B0;&#x5982;&#x540C;&#x4ECE;&#x4F1A;&#x8BDD;&#x52A0;&#x8F7D;&#xFF0C;&#x7136;&#x540E;&#x5206;&#x79BB;&#x7684;&#x5BF9;&#x8C61;&#x3002;</span><span class="yiyi-st" id="yiyi-844">&#x4E0D;&#x5B58;&#x5728;&#x7684;&#x5C5E;&#x6027;&#x88AB;&#x6807;&#x8BB0;&#x4E3A;&#x8FC7;&#x671F;&#xFF0C;&#x5E76;&#x4E14;&#x8BE5;&#x5BF9;&#x8C61;&#x53EF;&#x4EE5;&#x88AB;&#x6DFB;&#x52A0;&#x5230;&#x4F1A;&#x8BDD;&#x4E2D;&#xFF0C;&#x5B83;&#x5C06;&#x50CF;&#x4E00;&#x4E2A;&#x6301;&#x4E45;&#x7684;&#x884C;&#x4E3A;&#x4E00;&#x6837;&#x3002;<a class="changeset-link headerlink reference internal" href="#change-ad1b3230bf3a35c539d3800bd7eaa906">&#xB6;</a></span></p><p><span class="yiyi-st" id="yiyi-845">&#x8FD9;&#x4E2A;&#x6539;&#x53D8;&#x4E5F;&#x88AB;<strong>backported</strong>&#x6539;&#x4E3A;&#xFF1A;0.9.5</span></p><p><span class="yiyi-st" id="yiyi-846">&#x53C2;&#x8003;&#x6587;&#x732E;&#xFF1A;<a class="reference external" href="http://www.sqlalchemy.org/trac/ticket/3017">&#xFF03;3017</a></span></p></li><li><p id="change-1.0.0b1-7"><span class="yiyi-st" id="yiyi-847"><span class="target" id="change-224c208adb8b17c4d5402a6d062f720b"><strong>[orm] [feature] </strong></span>&#x65B0;&#x589E;&#x4E86;&#x4E00;&#x4E2A;&#x65B0;&#x7684;&#x4E8B;&#x4EF6;&#x5957;&#x4EF6;<a class="reference internal" href="orm_events.html#sqlalchemy.orm.events.QueryEvents" title="sqlalchemy.orm.events.QueryEvents"><code class="xref py py-class docutils literal"><span class="pre">QueryEvents</span></code></a>&#x3002;</span><span class="yiyi-st" id="yiyi-848">The <a class="reference internal" href="orm_events.html#sqlalchemy.orm.events.QueryEvents.before_compile" title="sqlalchemy.orm.events.QueryEvents.before_compile"><code class="xref py py-meth docutils literal"><span class="pre">QueryEvents.before_compile()</span></code></a> event allows the creation of functions which may place additional modifications to <a class="reference internal" href="orm_query.html#sqlalchemy.orm.query.Query" title="sqlalchemy.orm.query.Query"><code class="xref py py-class docutils literal"><span class="pre">Query</span></code></a> objects before the construction of the SELECT statement. </span><span class="yiyi-st" id="yiyi-849">&#x5E0C;&#x671B;&#x901A;&#x8FC7;&#x65B0;&#x7684;&#x68C0;&#x67E5;&#x7CFB;&#x7EDF;&#x7684;&#x51FA;&#x73B0;&#x4F7F;&#x8FD9;&#x4E00;&#x4E8B;&#x4EF6;&#x53D8;&#x5F97;&#x66F4;&#x52A0;&#x6709;&#x7528;&#xFF0C;&#x8FD9;&#x5C06;&#x5141;&#x8BB8;&#x4EE5;&#x81EA;&#x52A8;&#x65B9;&#x5F0F;&#x5BF9;<a class="reference internal" href="orm_query.html#sqlalchemy.orm.query.Query" title="sqlalchemy.orm.query.Query"><code class="xref py py-class docutils literal"><span class="pre">Query</span></code></a>&#x5BF9;&#x8C61;&#x8FDB;&#x884C;&#x8BE6;&#x7EC6;&#x7684;&#x4FEE;&#x6539;&#x3002;</span></p><div class="admonition seealso"><p class="first admonition-title"><span class="yiyi-st" id="yiyi-850">&#x4E5F;&#x53EF;&#x4EE5;&#x770B;&#x770B;</span></p><p class="last"><span class="yiyi-st" id="yiyi-851"><a class="reference internal" href="orm_events.html#sqlalchemy.orm.events.QueryEvents" title="sqlalchemy.orm.events.QueryEvents"><code class="xref py py-class docutils literal"><span class="pre">QueryEvents</span></code></a></span></p></div><span class="yiyi-st" id="yiyi-853"> <a class="changeset-link headerlink reference internal" href="#change-224c208adb8b17c4d5402a6d062f720b">&#xB6;</a></span><p><span class="yiyi-st" id="yiyi-852">&#x53C2;&#x8003;&#x6587;&#x732E;&#xFF1A;<a class="reference external" href="http://www.sqlalchemy.org/trac/ticket/3317">&#xFF03;3317</a></span></p></li><li><p id="change-1.0.0b1-8"><span class="yiyi-st" id="yiyi-854"><span class="target" id="change-4ffb78c7f1d4662a75b3c14e8865497b"><strong>[orm] [feature] </strong></span>&#x5728;&#x4F7F;&#x7528;&#x8054;&#x63A5;&#x7684;&#x9884;&#x52A0;&#x8F7D;&#x65F6;&#x53D1;&#x751F;&#x7684;&#x5B50;&#x67E5;&#x8BE2;&#x5305;&#x88C5;&#x4E0E;&#x4E00;&#x4E2A;&#x4E00;&#x5BF9;&#x591A;&#x67E5;&#x8BE2;&#x4E00;&#x8D77;&#x4F7F;&#x7528;&#xFF0C;&#x8BE5;&#x67E5;&#x8BE2;&#x8FD8;&#x5177;&#x6709;LIMIT&#xFF0C;OFFSET&#x6216;DISTINCT&#x5728;&#x4E00;&#x4E2A;&#x4E00;&#x5BF9;&#x4E00;&#x5173;&#x7CFB;&#xFF0C;&#x5373;<a class="reference internal" href="orm_relationship_api.html#sqlalchemy.orm.relationship.params.uselist" title="sqlalchemy.orm.relationship"><code class="xref py py-paramref docutils literal"><span class="pre">relationship.uselist</span></code></a>&#x8BBE;&#x7F6E;&#x4E3A;False&#x7684;&#x4E00;&#x5BF9;&#x591A;&#x5173;&#x7CFB;&#x3002;</span><span class="yiyi-st" id="yiyi-855">&#x8FD9;&#x5C06;&#x5728;&#x8FD9;&#x4E9B;&#x60C5;&#x51B5;&#x4E0B;&#x4EA7;&#x751F;&#x66F4;&#x9AD8;&#x6548;&#x7684;&#x67E5;&#x8BE2;&#x3002;</span></p><div class="admonition seealso"><p class="first admonition-title"><span class="yiyi-st" id="yiyi-856">&#x4E5F;&#x53EF;&#x4EE5;&#x770B;&#x770B;</span></p><p class="last"><span class="yiyi-st" id="yiyi-857"><a class="reference internal" href="migration_10.html#change-3249"><span>Subqueries no longer applied to uselist=False joined eager loads</span></a></span></p></div><span class="yiyi-st" id="yiyi-859"> <a class="changeset-link headerlink reference internal" href="#change-4ffb78c7f1d4662a75b3c14e8865497b">&#xB6;</a></span><p><span class="yiyi-st" id="yiyi-858">&#x53C2;&#x8003;&#x6587;&#x732E;&#xFF1A;<a class="reference external" href="http://www.sqlalchemy.org/trac/ticket/3249">&#xFF03;3249</a></span></p></li><li><p id="change-1.0.0b1-9"><span class="yiyi-st" id="yiyi-860"><span class="target" id="change-ba2e12d237fd1b8dd5b88441ad712dd5"><strong>[orm] [feature] </strong></span>&#x5BF9;&#x6620;&#x5C04;&#x72B6;&#x6001;&#x5185;&#x90E8;&#x8FDB;&#x884C;&#x4E86;&#x91CD;&#x65B0;&#x8BBE;&#x8BA1;&#xFF0C;&#x4EE5;&#x5141;&#x8BB8;&#x7279;&#x5B9A;&#x4E8E;&#x5BF9;&#x8C61;&#x201C;&#x8FC7;&#x671F;&#x201D;&#x7684;callcounts&#x51CF;&#x5C11;50&#xFF05;&#xFF0C;&#x5982;<a class="reference internal" href="orm_session_api.html#sqlalchemy.orm.session.Session.commit" title="sqlalchemy.orm.session.Session.commit"><code class="xref py py-meth docutils literal"><span class="pre">Session.commit()</span></code></a>&#x548C;<a class="reference internal" href="orm_session_api.html#sqlalchemy.orm.session.Session.expire_all" title="sqlalchemy.orm.session.Session.expire_all"><code class="xref py py-meth docutils literal"><span class="pre">Session.expire_all()</span></code></a>&#xFF0C;&#x4EE5;&#x53CA;&#x5728;&#x5BF9;&#x8C61;&#x72B6;&#x6001;&#x88AB;&#x5783;&#x573E;&#x6536;&#x96C6;&#x65F6;&#x53D1;&#x751F;&#x7684;&#x201C;&#x6E05;&#x9664;&#x201D;&#x6B65;&#x9AA4;&#x3002;<a class="changeset-link headerlink reference internal" href="#change-ba2e12d237fd1b8dd5b88441ad712dd5">&#xB6;</a></span></p><p><span class="yiyi-st" id="yiyi-861">&#x53C2;&#x8003;&#x6587;&#x732E;&#xFF1A;<a class="reference external" href="http://www.sqlalchemy.org/trac/ticket/3307">&#xFF03;3307</a></span></p></li><li><p id="change-1.0.0b1-10"><span class="yiyi-st" id="yiyi-862"><span class="target" id="change-06fec19f82dae0028e9f912dc0a37eaf"><strong>[orm] [feature] </strong></span>&#x5C06;&#x76F8;&#x540C;&#x7684;&#x591A;&#x6001;&#x6807;&#x8BC6;&#x5206;&#x914D;&#x7ED9;&#x540C;&#x4E00;&#x5C42;&#x6B21;&#x7ED3;&#x6784;&#x4E2D;&#x7684;&#x4E24;&#x4E2A;&#x4E0D;&#x540C;&#x6620;&#x5C04;&#x5668;&#x65F6;&#xFF0C;&#x4F1A;&#x53D1;&#x51FA;&#x8B66;&#x544A;&#x3002;</span><span class="yiyi-st" id="yiyi-863">&#x8FD9;&#x901A;&#x5E38;&#x662F;&#x7528;&#x6237;&#x9519;&#x8BEF;&#xFF0C;&#x5E76;&#x4E14;&#x610F;&#x5473;&#x7740;&#x5728;&#x52A0;&#x8F7D;&#x65F6;&#x4E0D;&#x80FD;&#x6B63;&#x786E;&#x533A;&#x5206;&#x8FD9;&#x4E24;&#x79CD;&#x4E0D;&#x540C;&#x7684;&#x6620;&#x5C04;&#x7C7B;&#x578B;&#x3002;</span><span class="yiyi-st" id="yiyi-864">&#x8BF7;&#x6C42;Sebastian Bank&#x63D0;&#x4F9B;&#x3002;<a class="changeset-link headerlink reference internal" href="#change-06fec19f82dae0028e9f912dc0a37eaf">&#xB6;</a></span></p><p><span class="yiyi-st" id="yiyi-865">&#x53C2;&#x8003;&#x6587;&#x732E;&#xFF1A;<a class="reference external" href="http://www.sqlalchemy.org/trac/ticket/3262">&#xFF03;3262</a>&#xFF0C;<a class="reference external" href="https://bitbucket.org/zzzeek/sqlalchemy/pull-request/38">&#x62C9;&#x53D6;&#x8BF7;&#x6C42;bitbucket&#xFF1A;38</a></span></p></li><li><p id="change-1.0.0b1-11"><span class="yiyi-st" id="yiyi-866"><span class="target" id="change-e101a9e2bfc2d51486dfbb485d2a7d97"><strong>[orm] [feature] </strong></span>&#x5DF2;&#x7ECF;&#x521B;&#x5EFA;&#x4E86;&#x4E00;&#x7CFB;&#x5217;&#x65B0;&#x7684;<a class="reference internal" href="orm_session_api.html#sqlalchemy.orm.session.Session" title="sqlalchemy.orm.session.Session"><code class="xref py py-class docutils literal"><span class="pre">Session</span></code></a>&#x65B9;&#x6CD5;&#xFF0C;&#x5B83;&#x4EEC;&#x5C06;&#x5DE5;&#x4F5C;&#x5355;&#x5143;&#x76F4;&#x63A5;&#x63D0;&#x4F9B;&#x7ED9;&#x5DE5;&#x4F5C;&#x5355;&#x5143;&#x4EE5;&#x53D1;&#x51FA;INSERT&#x548C;UPDATE&#x8BED;&#x53E5;&#x3002;</span><span class="yiyi-st" id="yiyi-867">&#x5982;&#x679C;&#x4F7F;&#x7528;&#x6B63;&#x786E;&#xFF0C;&#x8FD9;&#x4E2A;&#x9762;&#x5411;&#x4E13;&#x5BB6;&#x7684;&#x7CFB;&#x7EDF;&#x53EF;&#x4EE5;&#x5141;&#x8BB8;ORM&#x6620;&#x5C04;&#x7528;&#x4E8E;&#x751F;&#x6210;&#x6279;&#x91CF;&#x63D2;&#x5165;&#x548C;&#x66F4;&#x65B0;&#x8BED;&#x53E5;&#xFF0C;&#x6279;&#x91CF;&#x63D2;&#x5165;&#x5230;executemany&#x7EC4;&#x4E2D;&#xFF0C;&#x4ECE;&#x800C;&#x5141;&#x8BB8;&#x8BED;&#x53E5;&#x4EE5;&#x4E0E;&#x76F4;&#x63A5;&#x4F7F;&#x7528;Core&#x76F8;&#x5AB2;&#x7F8E;&#x7684;&#x901F;&#x5EA6;&#x8FDB;&#x884C;&#x3002;</span></p><div class="admonition seealso"><p class="first admonition-title"><span class="yiyi-st" id="yiyi-868">&#x4E5F;&#x53EF;&#x4EE5;&#x770B;&#x770B;</span></p><p class="last"><span class="yiyi-st" id="yiyi-869"><a class="reference internal" href="orm_persistence_techniques.html#bulk-operations"><span>Bulk Operations</span></a></span></p></div><span class="yiyi-st" id="yiyi-871"> <a class="changeset-link headerlink reference internal" href="#change-e101a9e2bfc2d51486dfbb485d2a7d97">&#xB6;</a></span><p><span class="yiyi-st" id="yiyi-870">&#x53C2;&#x8003;&#x6587;&#x732E;&#xFF1A;<a class="reference external" href="http://www.sqlalchemy.org/trac/ticket/3100">&#xFF03;3100</a></span></p></li><li><p id="change-1.0.0b1-12"><span class="yiyi-st" id="yiyi-872"><span class="target" id="change-2144e6087f689d4bdb021d19044edc77"><strong>[orm] [feature] </strong></span>&#x6DFB;&#x52A0;&#x4E86;&#x4E0E;&#x8C03;&#x7528;<a class="reference internal" href="orm_query.html#sqlalchemy.orm.query.Query.outerjoin" title="sqlalchemy.orm.query.Query.outerjoin"><code class="xref py py-meth docutils literal"><span class="pre">Query.outerjoin()</span></code></a>&#x540C;&#x4E49;&#x7684;&#x53C2;&#x6570;<a class="reference internal" href="orm_query.html#sqlalchemy.orm.query.Query.join.params.isouter" title="sqlalchemy.orm.query.Query.join"><code class="xref py py-paramref docutils literal"><span class="pre">Query.join.isouter</span></code></a>&#xFF1B;&#x4E0E;Core <a class="reference internal" href="core_selectable.html#sqlalchemy.sql.expression.FromClause.join" title="sqlalchemy.sql.expression.FromClause.join"><code class="xref py py-meth docutils literal"><span class="pre">FromClause.join()</span></code></a>&#x76F8;&#x6BD4;&#xFF0C;&#x6B64;&#x6807;&#x5FD7;&#x63D0;&#x4F9B;&#x66F4;&#x4E00;&#x81F4;&#x7684;&#x63A5;&#x53E3;&#x3002;</span><span class="yiyi-st" id="yiyi-873">&#x8BF7;&#x6C42;Jonathan Vanasco&#x63D0;&#x4F9B;&#x3002;<a class="changeset-link headerlink reference internal" href="#change-2144e6087f689d4bdb021d19044edc77">&#xB6;</a></span></p><p><span class="yiyi-st" id="yiyi-874">&#x53C2;&#x8003;&#x6587;&#x732E;&#xFF1A;<a class="reference external" href="http://www.sqlalchemy.org/trac/ticket/3217">&#xFF03;3217</a></span></p></li><li><p id="change-1.0.0b1-13"><span class="yiyi-st" id="yiyi-875"><span class="target" id="change-0e828b26dd65117f3478db52f1f0e546"><strong>[orm] [feature] </strong></span>&#x6DFB;&#x52A0;&#x4E86;&#x65B0;&#x7684;&#x4E8B;&#x4EF6;&#x5904;&#x7406;&#x7A0B;&#x5E8F;<a class="reference internal" href="orm_events.html#sqlalchemy.orm.events.AttributeEvents.init_collection" title="sqlalchemy.orm.events.AttributeEvents.init_collection"><code class="xref py py-meth docutils literal"><span class="pre">AttributeEvents.init_collection()</span></code></a>&#x548C;<a class="reference internal" href="orm_events.html#sqlalchemy.orm.events.AttributeEvents.dispose_collection" title="sqlalchemy.orm.events.AttributeEvents.dispose_collection"><code class="xref py py-meth docutils literal"><span class="pre">AttributeEvents.dispose_collection()</span></code></a>&#x4E0E;&#x5B9E;&#x4F8B;&#x76F8;&#x5173;&#x8054;&#x4EE5;&#x53CA;&#x4F55;&#x65F6;&#x88AB;&#x66FF;&#x6362;&#x3002;</span><span class="yiyi-st" id="yiyi-876">&#x8FD9;&#x4E9B;&#x5904;&#x7406;&#x7A0B;&#x5E8F;&#x53D6;&#x4EE3;<a class="reference internal" href="orm_collections.html#sqlalchemy.orm.collections.collection.linker" title="sqlalchemy.orm.collections.collection.linker"><code class="xref py py-meth docutils literal"><span class="pre">collection.linker()</span></code></a>&#x6CE8;&#x91CA;&#x3002;</span><span class="yiyi-st" id="yiyi-877">&#x65E7;&#x6302;&#x94A9;&#x4ECD;&#x7136;&#x901A;&#x8FC7;&#x4E8B;&#x4EF6;&#x9002;&#x914D;&#x5668;&#x652F;&#x6301;&#x3002;<a class="changeset-link headerlink reference internal" href="#change-0e828b26dd65117f3478db52f1f0e546">&#xB6;</a></span></p><p></p></li><li><p id="change-1.0.0b1-14"><span class="yiyi-st" id="yiyi-878"><span class="target" id="change-b616294de6debb7de491e4493f524c6b"><strong>[orm] [feature] </strong></span>The <a class="reference internal" href="orm_query.html#sqlalchemy.orm.query.Query" title="sqlalchemy.orm.query.Query"><code class="xref py py-class docutils literal"><span class="pre">Query</span></code></a> will raise an exception when <a class="reference internal" href="orm_query.html#sqlalchemy.orm.query.Query.yield_per" title="sqlalchemy.orm.query.Query.yield_per"><code class="xref py py-meth docutils literal"><span class="pre">Query.yield_per()</span></code></a> is used with mappings or options where either subquery eager loading, or joined eager loading with collections, would take place. </span><span class="yiyi-st" id="yiyi-879">&#x8FD9;&#x4E9B;&#x52A0;&#x8F7D;&#x7B56;&#x7565;&#x76EE;&#x524D;&#x4E0E;yield_per&#x4E0D;&#x517C;&#x5BB9;&#xFF0C;&#x6240;&#x4EE5;&#x901A;&#x8FC7;&#x63D0;&#x9AD8;&#x8FD9;&#x4E2A;&#x9519;&#x8BEF;&#xFF0C;&#x8BE5;&#x65B9;&#x6CD5;&#x66F4;&#x5B89;&#x5168;&#x3002;</span><span class="yiyi-st" id="yiyi-880">&#x53EF;&#x4EE5;&#x4F7F;&#x7528;<code class="docutils literal"><span class="pre">lazyload(&apos;*&apos;)</span></code>&#x9009;&#x9879;&#x6216;<a class="reference internal" href="orm_query.html#sqlalchemy.orm.query.Query.enable_eagerloads" title="sqlalchemy.orm.query.Query.enable_eagerloads"><code class="xref py py-meth docutils literal"><span class="pre">Query.enable_eagerloads()</span></code></a>&#x6765;&#x7981;&#x7528;&#x9884;&#x52A0;&#x8F7D;&#x3002;</span></p><div class="admonition seealso"><p class="first admonition-title"><span class="yiyi-st" id="yiyi-881">&#x4E5F;&#x53EF;&#x4EE5;&#x770B;&#x770B;</span></p><p class="last"><span class="yiyi-st" id="yiyi-882"><a class="reference internal" href="migration_10.html#migration-yield-per-eager-loading"><span>Joined/Subquery eager loading explicitly disallowed with yield_per</span></a>&#x52A0;&#x5165;/&#x5B50;&#x67E5;&#x8BE2;&#x52A0;&#x8F7D;&#x52A0;&#x8F7D;</span></p></div><span class="yiyi-st" id="yiyi-883"> <a class="changeset-link headerlink reference internal" href="#change-b616294de6debb7de491e4493f524c6b">&#xB6;</a></span><p></p></li><li><p id="change-1.0.0b1-15"><span class="yiyi-st" id="yiyi-884"><span class="target" id="change-8965eb2566f786710793ef1a6281b74d"><strong>[orm] [feature] </strong></span>A new implementation for <a class="reference internal" href="orm_query.html#sqlalchemy.util.KeyedTuple" title="sqlalchemy.util.KeyedTuple"><code class="xref py py-class docutils literal"><span class="pre">KeyedTuple</span></code></a> used by the <a class="reference internal" href="orm_query.html#sqlalchemy.orm.query.Query" title="sqlalchemy.orm.query.Query"><code class="xref py py-class docutils literal"><span class="pre">Query</span></code></a> object offers dramatic speed improvements when fetching large numbers of column-oriented rows.</span></p><div class="admonition seealso"><p class="first admonition-title"><span class="yiyi-st" id="yiyi-885">&#x4E5F;&#x53EF;&#x4EE5;&#x770B;&#x770B;</span></p><p class="last"><span class="yiyi-st" id="yiyi-886"><a class="reference internal" href="migration_10.html#feature-3176"><span>New KeyedTuple implementation dramatically faster</span></a></span></p></div><span class="yiyi-st" id="yiyi-888"> <a class="changeset-link headerlink reference internal" href="#change-8965eb2566f786710793ef1a6281b74d">&#xB6;</a></span><p><span class="yiyi-st" id="yiyi-887">&#x53C2;&#x8003;&#x6587;&#x732E;&#xFF1A;<a class="reference external" href="http://www.sqlalchemy.org/trac/ticket/3176">&#xFF03;3176</a></span></p></li><li><p id="change-1.0.0b1-16"><span class="yiyi-st" id="yiyi-889"><span class="target" id="change-b3169a2d87d3780499be2e7f2821729b"><strong>[orm] [feature] </strong></span>The behavior of <a class="reference internal" href="orm_loading_relationships.html#sqlalchemy.orm.joinedload.params.innerjoin" title="sqlalchemy.orm.joinedload"><code class="xref py py-paramref docutils literal"><span class="pre">joinedload.innerjoin</span></code></a> as well as <a class="reference internal" href="orm_relationship_api.html#sqlalchemy.orm.relationship.params.innerjoin" title="sqlalchemy.orm.relationship"><code class="xref py py-paramref docutils literal"><span class="pre">relationship.innerjoin</span></code></a> is now to use &#x201C;nested&#x201D; inner joins, that is, right-nested, as the default behavior when an inner join joined eager load is chained to an outer join eager load.</span></p><div class="admonition seealso"><p class="first admonition-title"><span class="yiyi-st" id="yiyi-890">&#x4E5F;&#x53EF;&#x4EE5;&#x770B;&#x770B;</span></p><p class="last"><span class="yiyi-st" id="yiyi-891"><a class="reference internal" href="migration_10.html#migration-3008"><span>Right inner join nesting now the default for joinedload with innerjoin=True</span></a></span></p></div><span class="yiyi-st" id="yiyi-893"> <a class="changeset-link headerlink reference internal" href="#change-b3169a2d87d3780499be2e7f2821729b">&#xB6;</a></span><p><span class="yiyi-st" id="yiyi-892">&#x53C2;&#x8003;&#x6587;&#x732E;&#xFF1A;<a class="reference external" href="http://www.sqlalchemy.org/trac/ticket/3008">&#xFF03;3008</a></span></p></li><li><p id="change-1.0.0b1-17"><span class="yiyi-st" id="yiyi-894"><span class="target" id="change-c2a7ce636a44564eadf2a903567d4605"><strong>[orm] [feature] </strong></span>UPDATE statements can now be batched within an ORM flush into more performant executemany() call, similarly to how INSERT statements can be batched; this will be invoked within flush to the degree that subsequent UPDATE statements for the same mapping and table involve the identical columns within the VALUES clause, that no SET-level SQL expressions are embedded, and that the versioning requirements for the mapping are compatible with the backend dialect&#x2019;s ability to return a correct rowcount for an executemany operation.<a class="changeset-link headerlink reference internal" href="#change-c2a7ce636a44564eadf2a903567d4605">&#xB6;</a></span></p><p></p></li><li><p id="change-1.0.0b1-18"><span class="yiyi-st" id="yiyi-895"><span class="target" id="change-f11e5a48b55d152ba27006a0c7a50f69"><strong>[orm] [feature] </strong></span>The <code class="docutils literal"><span class="pre">info</span></code> parameter has been added to the constructor for <a class="reference internal" href="orm_internals.html#sqlalchemy.orm.descriptor_props.SynonymProperty" title="sqlalchemy.orm.descriptor_props.SynonymProperty"><code class="xref py py-class docutils literal"><span class="pre">SynonymProperty</span></code></a> and <a class="reference internal" href="orm_internals.html#sqlalchemy.orm.properties.ComparableProperty" title="sqlalchemy.orm.properties.ComparableProperty"><code class="xref py py-class docutils literal"><span class="pre">ComparableProperty</span></code></a>.<a class="changeset-link headerlink reference internal" href="#change-f11e5a48b55d152ba27006a0c7a50f69">&#xB6;</a></span></p><p><span class="yiyi-st" id="yiyi-896">&#x53C2;&#x8003;&#x6587;&#x732E;&#xFF1A;<a class="reference external" href="http://www.sqlalchemy.org/trac/ticket/2963">&#xFF03;2963</a></span></p></li><li><p id="change-1.0.0b1-19"><span class="yiyi-st" id="yiyi-897"><span class="target" id="change-dc2eac33191482c15be6aab0b79ac2ee"><strong>[orm] [feature] </strong></span>The <code class="xref py py-attr docutils literal"><span class="pre">InspectionAttr.info</span></code> collection is now moved down to <a class="reference internal" href="orm_internals.html#sqlalchemy.orm.base.InspectionAttr" title="sqlalchemy.orm.base.InspectionAttr"><code class="xref py py-class docutils literal"><span class="pre">InspectionAttr</span></code></a>, where in addition to being available on all <a class="reference internal" href="orm_internals.html#sqlalchemy.orm.interfaces.MapperProperty" title="sqlalchemy.orm.interfaces.MapperProperty"><code class="xref py py-class docutils literal"><span class="pre">MapperProperty</span></code></a> objects, it is also now available on hybrid properties, association proxies, when accessed via <a class="reference internal" href="orm_mapping_api.html#sqlalchemy.orm.mapper.Mapper.all_orm_descriptors" title="sqlalchemy.orm.mapper.Mapper.all_orm_descriptors"><code class="xref py py-attr docutils literal"><span class="pre">Mapper.all_orm_descriptors</span></code></a>.<a class="changeset-link headerlink reference internal" href="#change-dc2eac33191482c15be6aab0b79ac2ee">&#xB6;</a></span></p><p><span class="yiyi-st" id="yiyi-898">&#x53C2;&#x8003;&#x6587;&#x732E;&#xFF1A;<a class="reference external" href="http://www.sqlalchemy.org/trac/ticket/2971">&#xFF03;2971</a></span></p></li><li><p id="change-1.0.0b1-20"><span class="yiyi-st" id="yiyi-899"><span class="target" id="change-95474fb930794e4ecf37bfbc1331505e"><strong>[orm] [changed] </strong></span>The <code class="docutils literal"><span class="pre">proc()</span></code> callable passed to the <code class="docutils literal"><span class="pre">create_row_processor()</span></code> method of custom <a class="reference internal" href="orm_query.html#sqlalchemy.orm.query.Bundle" title="sqlalchemy.orm.query.Bundle"><code class="xref py py-class docutils literal"><span class="pre">Bundle</span></code></a> classes now accepts only a single &#x201C;row&#x201D; argument.</span></p><div class="admonition seealso"><p class="first admonition-title"><span class="yiyi-st" id="yiyi-900">&#x4E5F;&#x53EF;&#x4EE5;&#x770B;&#x770B;</span></p><p class="last"><span class="yiyi-st" id="yiyi-901"><a class="reference internal" href="migration_10.html#bundle-api-change"><span>API Change for new Bundle feature when custom row loaders are used</span></a></span></p></div><span class="yiyi-st" id="yiyi-902"> <a class="changeset-link headerlink reference internal" href="#change-95474fb930794e4ecf37bfbc1331505e">&#xB6;</a></span><p></p></li><li><p id="change-1.0.0b1-21"><span class="yiyi-st" id="yiyi-903"><span class="target" id="change-560ef9d31daf212e20d665eb2eec3570"><strong>[orm] [changed] </strong></span>Deprecated event hooks removed: <code class="docutils literal"><span class="pre">populate_instance</span></code>, <code class="docutils literal"><span class="pre">create_instance</span></code>, <code class="docutils literal"><span class="pre">translate_row</span></code>, <code class="docutils literal"><span class="pre">append_result</span></code></span></p><div class="admonition seealso"><p class="first admonition-title"><span class="yiyi-st" id="yiyi-904">&#x4E5F;&#x53EF;&#x4EE5;&#x770B;&#x770B;</span></p><p class="last"><span class="yiyi-st" id="yiyi-905"><a class="reference internal" href="migration_10.html#migration-deprecated-orm-events"><span>Deprecated ORM Event Hooks Removed</span></a></span></p></div><span class="yiyi-st" id="yiyi-906"> <a class="changeset-link headerlink reference internal" href="#change-560ef9d31daf212e20d665eb2eec3570">&#xB6;</a></span><p></p></li><li><p id="change-1.0.0b1-22"><span class="yiyi-st" id="yiyi-907"><span class="target" id="change-6f298ded8801c07d3257fd19d0ec9d86"><strong>[orm] [bug] </strong></span>Fixed bugs in ORM object comparisons where comparison of many-to-one <code class="docutils literal"><span class="pre">!=</span> <span class="pre">None</span></code> would fail if the source were an aliased class, or if the query needed to apply special aliasing to the expression due to aliased joins or polymorphic querying; also fixed bug in the case where comparing a many-to-one to an object state would fail if the query needed to apply special aliasing due to aliased joins or polymorphic querying.<a class="changeset-link headerlink reference internal" href="#change-6f298ded8801c07d3257fd19d0ec9d86">&#xB6;</a></span></p><p><span class="yiyi-st" id="yiyi-908">&#x8FD9;&#x4E2A;&#x6539;&#x53D8;&#x4E5F;&#x88AB;<strong>backported</strong>&#x6539;&#x4E3A;&#xFF1A;0.9.9</span></p><p><span class="yiyi-st" id="yiyi-909">&#x53C2;&#x8003;&#x6587;&#x732E;&#xFF1A;<a class="reference external" href="http://www.sqlalchemy.org/trac/ticket/3310">&#xFF03;3310</a></span></p></li><li><p id="change-1.0.0b1-23"><span class="yiyi-st" id="yiyi-910">&#x4FEE;&#x6B63;&#x4E86;&#x5728;<a class="reference internal" href="orm_session_api.html#sqlalchemy.orm.session.Session" title="sqlalchemy.orm.session.Session"><code class="xref py py-class docutils literal"><span class="pre">Session</span></code></a>&#x7684;<code class="docutils literal"><span class="pre">after_rollback()</span></code>&#x5904;&#x7406;&#x7A0B;&#x5E8F;&#x9519;&#x8BEF;&#x5730;&#x5C06;&#x72B6;&#x6001;&#x6DFB;&#x52A0;&#x5230;&#x5185;&#x90E8;&#x65AD;&#x8A00;&#x7684;&#x60C5;&#x51B5;&#x4E0B;&#x4F1A;&#x5931;&#x8D25;&#x7684;&#x95EE;&#x9898;&#x3002;<span class="target" id="change-04a3bda01df00148ba3b83fbf9bbe294"><strong>[orm] [bug] </strong></span> <a class="reference internal" href="orm_session_api.html#sqlalchemy.orm.session.Session" title="sqlalchemy.orm.session.Session"><code class="xref py py-class docutils literal"><span class="pre">Session</span></code></a>&#x5904;&#x7406;&#x7A0B;&#x5E8F;&#x4E2D;&#xFF0C;&#x4EE5;&#x53CA;&#x8B66;&#x544A;&#x548C;&#x79FB;&#x9664;&#x6B64;&#x72B6;&#x6001;&#x7684;&#x4EFB;&#x52A1;&#xFF08;&#x7531;<a class="reference external" href="http://www.sqlalchemy.org/trac/ticket/2389">&#xFF03;2389</a>&#x5EFA;&#x7ACB;&#xFF09;&#x5C1D;&#x8BD5;&#x7EE7;&#x7EED;&#x3002;<a class="changeset-link headerlink reference internal" href="#change-04a3bda01df00148ba3b83fbf9bbe294">&#xB6;</a></span></p><p><span class="yiyi-st" id="yiyi-911">&#x8FD9;&#x4E2A;&#x6539;&#x53D8;&#x4E5F;&#x88AB;<strong>backported</strong>&#x6539;&#x4E3A;&#xFF1A;0.9.9</span></p><p><span class="yiyi-st" id="yiyi-912">&#x53C2;&#x8003;&#x6587;&#x732E;&#xFF1A;<a class="reference external" href="http://www.sqlalchemy.org/trac/ticket/3309">&#xFF03;3309</a></span></p></li><li><p id="change-1.0.0b1-24"><span class="yiyi-st" id="yiyi-913"><span class="target" id="change-376e2904e02255469c634ee04c021623"><strong>[orm] [bug] </strong></span>Fixed bug where TypeError raised when <a class="reference internal" href="orm_query.html#sqlalchemy.orm.query.Query.join" title="sqlalchemy.orm.query.Query.join"><code class="xref py py-meth docutils literal"><span class="pre">Query.join()</span></code></a> called with unknown kw arguments would raise its own TypeError due to broken formatting. </span><span class="yiyi-st" id="yiyi-914">&#x8BF7;&#x6C42;Malthe Borch&#x63D0;&#x51FA;&#x8BF7;&#x6C42;&#x3002;<a class="changeset-link headerlink reference internal" href="#change-376e2904e02255469c634ee04c021623">&#xB6;</a></span></p><p><span class="yiyi-st" id="yiyi-915">&#x8FD9;&#x4E2A;&#x6539;&#x53D8;&#x4E5F;&#x88AB;<strong>backported</strong>&#x6539;&#x4E3A;&#xFF1A;0.9.9</span></p><p><span class="yiyi-st" id="yiyi-916">&#x53C2;&#x8003;&#x6587;&#x732E;&#xFF1A;<a class="reference external" href="https://github.com/zzzeek/sqlalchemy/pull/147">&#x8BF7;&#x6C42;github&#xFF1A;147</a></span></p></li><li><p id="change-1.0.0b1-25"><span class="yiyi-st" id="yiyi-917"><span class="target" id="change-2986f6b48420a5a13faf87400ceb4a0f"><strong>[orm] [bug] </strong></span>Fixed bug in lazy loading SQL construction whereby a complex primaryjoin that referred to the same &#x201C;local&#x201D; column multiple times in the &#x201C;column that points to itself&#x201D; style of self-referential join would not be substituted in all cases. </span><span class="yiyi-st" id="yiyi-918">&#x8FD9;&#x91CC;&#x786E;&#x5B9A;&#x66FF;&#x4EE3;&#x7684;&#x903B;&#x8F91;&#x5DF2;&#x88AB;&#x91CD;&#x65B0;&#x8BBE;&#x8BA1;&#x4E3A;&#x66F4;&#x52A0;&#x5F00;&#x653E;&#x3002;<a class="changeset-link headerlink reference internal" href="#change-2986f6b48420a5a13faf87400ceb4a0f">&#xB6;</a></span></p><p><span class="yiyi-st" id="yiyi-919">&#x8FD9;&#x4E2A;&#x6539;&#x53D8;&#x4E5F;&#x88AB;<strong>backported</strong>&#x6539;&#x4E3A;&#xFF1A;0.9.9</span></p><p><span class="yiyi-st" id="yiyi-920">&#x53C2;&#x8003;&#x6587;&#x732E;&#xFF1A;<a class="reference external" href="http://www.sqlalchemy.org/trac/ticket/3300">&#xFF03;3300</a></span></p></li><li><p id="change-1.0.0b1-26"><span class="yiyi-st" id="yiyi-921"><span class="target" id="change-70b361455e80b62dcaf98a303f010d7b"><strong>[orm] [bug] </strong></span>&#x201C;&#x901A;&#x914D;&#x7B26;&#x201D;&#x52A0;&#x8F7D;&#x5668;&#x9009;&#x9879;&#xFF0C;&#x7279;&#x522B;&#x662F;&#x7531;<a class="reference internal" href="orm_loading_columns.html#sqlalchemy.orm.load_only" title="sqlalchemy.orm.load_only"><code class="xref py py-func docutils literal"><span class="pre">orm.load_only()</span></code></a>&#x9009;&#x9879;&#x8BBE;&#x7F6E;&#x7684;&#x9009;&#x9879;&#xFF0C;&#x4EE5;&#x8986;&#x76D6;&#x672A;&#x660E;&#x786E;&#x63D0;&#x53CA;&#x7684;&#x6240;&#x6709;&#x5C5E;&#x6027;&#xFF0C;&#x73B0;&#x5728;&#x8003;&#x8651;&#x7ED9;&#x5B9A;&#x5B9E;&#x4F53;&#x7684;&#x8D85;&#x7C7B;&#xFF0C;&#x5982;&#x679C;&#x8BE5;&#x5B9E;&#x4F53;&#x4F7F;&#x7528;&#x7EE7;&#x627F;&#x6620;&#x5C04;&#x8FDB;&#x884C;&#x6620;&#x5C04;&#xFF0C;&#x90A3;&#x4E48;&#x8D85;&#x7C7B;&#x4E2D;&#x7684;&#x5C5E;&#x6027;&#x540D;&#x4E5F;&#x4ECE;&#x52A0;&#x8F7D;&#x4E2D;&#x7701;&#x7565;&#x3002;</span><span class="yiyi-st" id="yiyi-922">&#x6B64;&#x5916;&#xFF0C;&#x591A;&#x6001;&#x5224;&#x522B;&#x5668;&#x5217;&#x65E0;&#x6761;&#x4EF6;&#x5730;&#x5305;&#x542B;&#x5728;&#x5217;&#x8868;&#x4E2D;&#xFF0C;&#x5C31;&#x50CF;&#x4E3B;&#x952E;&#x5217;&#x4E00;&#x6837;&#xFF0C;&#x6240;&#x4EE5;&#x5373;&#x4F7F;&#x8BBE;&#x7F6E;&#x4E86;load_only()&#xFF0C;&#x5B50;&#x7C7B;&#x578B;&#x7684;&#x591A;&#x6001;&#x52A0;&#x8F7D;&#x4E5F;&#x80FD;&#x6B63;&#x5E38;&#x8FD0;&#x884C;&#x3002;<a class="changeset-link headerlink reference internal" href="#change-70b361455e80b62dcaf98a303f010d7b">&#xB6; t0 &gt;</a></span></p><p><span class="yiyi-st" id="yiyi-923">&#x8FD9;&#x4E2A;&#x6539;&#x53D8;&#x4E5F;&#x88AB;<strong>backported</strong>&#x6539;&#x4E3A;&#xFF1A;0.9.9</span></p><p><span class="yiyi-st" id="yiyi-924">&#x53C2;&#x8003;&#x6587;&#x732E;&#xFF1A;<a class="reference external" href="http://www.sqlalchemy.org/trac/ticket/3287">&#xFF03;3287</a></span></p></li><li><p id="change-1.0.0b1-27"><span class="yiyi-st" id="yiyi-925"><span class="target" id="change-16483765b5b469f2aeb8abd7abfc6035"><strong>[orm] [bug] [pypy] </strong></span>Fixed bug where if an exception were thrown at the start of a <a class="reference internal" href="orm_query.html#sqlalchemy.orm.query.Query" title="sqlalchemy.orm.query.Query"><code class="xref py py-class docutils literal"><span class="pre">Query</span></code></a> before it fetched results, particularly when row processors can&#x2019;t be formed, the cursor would stay open with results pending and not actually be closed. </span><span class="yiyi-st" id="yiyi-926">&#x5BF9;&#x4E8E;&#x50CF;Pypy&#x8FD9;&#x6837;&#x7684;&#x89E3;&#x91CA;&#x5668;&#x6765;&#x8BF4;&#xFF0C;&#x8FD9;&#x901A;&#x5E38;&#x53EA;&#x662F;&#x4E00;&#x4E2A;&#x95EE;&#x9898;&#xFF0C;&#x5728;&#x8FD9;&#x79CD;&#x89E3;&#x91CA;&#x5668;&#x4E2D;&#xFF0C;&#x5149;&#x6807;&#x6CA1;&#x6709;&#x7ACB;&#x5373;&#x88AB;GC&#x5316;&#xFF0C;&#x5E76;&#x4E14;&#x5728;&#x67D0;&#x4E9B;&#x60C5;&#x51B5;&#x4E0B;&#x4F1A;&#x5BFC;&#x81F4;&#x4E8B;&#x52A1;/&#x9501;&#x7684;&#x6253;&#x5F00;&#x65F6;&#x95F4;&#x8D85;&#x8FC7;&#x6240;&#x9700;&#x7684;&#x65F6;&#x95F4;&#x3002;<a class="changeset-link headerlink reference internal" href="#change-16483765b5b469f2aeb8abd7abfc6035">&#xB6;</a></span></p><p><span class="yiyi-st" id="yiyi-927">&#x8FD9;&#x4E2A;&#x6539;&#x53D8;&#x4E5F;&#x88AB;<strong>backported</strong>&#x6539;&#x4E3A;&#xFF1A;0.9.9</span></p><p><span class="yiyi-st" id="yiyi-928">&#x53C2;&#x8003;&#x6587;&#x732E;&#xFF1A;<a class="reference external" href="http://www.sqlalchemy.org/trac/ticket/3285">&#xFF03;3285</a></span></p></li><li><p id="change-1.0.0b1-28"><span class="yiyi-st" id="yiyi-929"><span class="target" id="change-2e12bc9781aa2298691dc48360ef2c6e"><strong>[orm] [bug] </strong></span>Fixed a leak which would occur in the unsupported and highly non-recommended use case of replacing a relationship on a fixed mapped class many times, referring to an arbitrarily growing number of target mappers. </span><span class="yiyi-st" id="yiyi-930">&#x5F53;&#x65E7;&#x7684;&#x5173;&#x7CFB;&#x88AB;&#x66FF;&#x6362;&#x65F6;&#x53D1;&#x51FA;&#x8B66;&#x544A;&#xFF0C;&#x4F46;&#x662F;&#x5982;&#x679C;&#x6620;&#x5C04;&#x5DF2;&#x7ECF;&#x7528;&#x4E8E;&#x67E5;&#x8BE2;&#xFF0C;&#x65E7;&#x7684;&#x5173;&#x7CFB;&#x4ECD;&#x7136;&#x4F1A;&#x5728;&#x4E00;&#x4E9B;&#x6CE8;&#x518C;&#x8868;&#x4E2D;&#x88AB;&#x5F15;&#x7528;&#x3002;<a class="changeset-link headerlink reference internal" href="#change-2e12bc9781aa2298691dc48360ef2c6e">&#xB6;</a></span></p><p><span class="yiyi-st" id="yiyi-931">&#x8FD9;&#x4E2A;&#x6539;&#x53D8;&#x4E5F;&#x88AB;<strong>backported</strong>&#x6539;&#x4E3A;&#xFF1A;0.9.9</span></p><p><span class="yiyi-st" id="yiyi-932">&#x53C2;&#x8003;&#x6587;&#x732E;&#xFF1A;<a class="reference external" href="http://www.sqlalchemy.org/trac/ticket/3251">&#xFF03;3251</a></span></p></li><li><p id="change-1.0.0b1-29"><span class="yiyi-st" id="yiyi-933"><span class="target" id="change-57a644cbb8d635a77fa5615f0d5e72a1"><strong>[orm] [bug] [sqlite] </strong></span>Fixed bug regarding expression mutations which could express itself as a &#x201C;Could not locate column&#x201D; error when using <a class="reference internal" href="orm_query.html#sqlalchemy.orm.query.Query" title="sqlalchemy.orm.query.Query"><code class="xref py py-class docutils literal"><span class="pre">Query</span></code></a> to select from multiple, anonymous column entities when querying against SQLite, as a side effect of the &#x201C;join rewriting&#x201D; feature used by the SQLite dialect.<a class="changeset-link headerlink reference internal" href="#change-57a644cbb8d635a77fa5615f0d5e72a1">&#xB6;</a></span></p><p><span class="yiyi-st" id="yiyi-934">&#x8FD9;&#x4E2A;&#x6539;&#x53D8;&#x4E5F;&#x88AB;<strong>backported</strong>&#x6539;&#x4E3A;&#xFF1A;0.9.9</span></p><p><span class="yiyi-st" id="yiyi-935">&#x53C2;&#x8003;&#x6587;&#x732E;&#xFF1A;<a class="reference external" href="http://www.sqlalchemy.org/trac/ticket/3241">&#xFF03;3241</a></span></p></li><li><p id="change-1.0.0b1-30"><span class="yiyi-st" id="yiyi-936"><span class="target" id="change-ece99f4e425237d28766bafcb908f9c8"><strong>[orm] [bug] </strong></span>Fixed bug where the ON clause for <a class="reference internal" href="orm_query.html#sqlalchemy.orm.query.Query.join" title="sqlalchemy.orm.query.Query.join"><code class="xref py py-meth docutils literal"><span class="pre">Query.join()</span></code></a>, and <a class="reference internal" href="orm_query.html#sqlalchemy.orm.query.Query.outerjoin" title="sqlalchemy.orm.query.Query.outerjoin"><code class="xref py py-meth docutils literal"><span class="pre">Query.outerjoin()</span></code></a> to a single-inheritance subclass using <code class="docutils literal"><span class="pre">of_type()</span></code> would not render the &#x201C;single table criteria&#x201D; in the ON clause if the <code class="docutils literal"><span class="pre">from_joinpoint=True</span></code> flag were set.<a class="changeset-link headerlink reference internal" href="#change-ece99f4e425237d28766bafcb908f9c8">&#xB6;</a></span></p><p><span class="yiyi-st" id="yiyi-937">&#x8FD9;&#x4E2A;&#x6539;&#x53D8;&#x4E5F;&#x88AB;<strong>backported</strong>&#x6539;&#x4E3A;&#xFF1A;0.9.9</span></p><p><span class="yiyi-st" id="yiyi-938">&#x53C2;&#x8003;&#x6587;&#x732E;&#xFF1A;<a class="reference external" href="http://www.sqlalchemy.org/trac/ticket/3232">&#xFF03;3232</a></span></p></li><li><p id="change-1.0.0b1-31"><span class="yiyi-st" id="yiyi-939"><span class="target" id="change-5f4ad543840a3c34916641cc4f26dfd7"><strong>[orm] [bug] [engine] </strong></span>Fixed bug that affected generally the same classes of event as that of <a class="reference external" href="http://www.sqlalchemy.org/trac/ticket/3199">#3199</a>, when the <code class="docutils literal"><span class="pre">named=True</span></code> parameter would be used. </span><span class="yiyi-st" id="yiyi-940">&#x4E00;&#x4E9B;&#x4E8B;&#x4EF6;&#x5C06;&#x65E0;&#x6CD5;&#x6CE8;&#x518C;&#xFF0C;&#x800C;&#x5176;&#x4ED6;&#x4E8B;&#x4EF6;&#x4E0D;&#x4F1A;&#x6B63;&#x786E;&#x5730;&#x8C03;&#x7528;&#x4E8B;&#x4EF6;&#x53C2;&#x6570;&#xFF0C;&#x901A;&#x5E38;&#x662F;&#x5728;&#x4E8B;&#x4EF6;&#x88AB;&#x201C;&#x5305;&#x88C5;&#x201D;&#x4EE5;&#x4FBF;&#x4EE5;&#x5176;&#x4ED6;&#x65B9;&#x5F0F;&#x8FDB;&#x884C;&#x9002;&#x5E94;&#x7684;&#x60C5;&#x51B5;&#x4E0B;&#x3002;</span><span class="yiyi-st" id="yiyi-941">&#x201C;&#x547D;&#x540D;&#x201D;&#x673A;&#x5236;&#x5DF2;&#x91CD;&#x65B0;&#x6392;&#x5217;&#xFF0C;&#x4E0D;&#x4F1A;&#x5E72;&#x6270;&#x5185;&#x90E8;&#x5305;&#x88C5;&#x51FD;&#x6570;&#x671F;&#x671B;&#x7684;&#x53C2;&#x6570;&#x7B7E;&#x540D;&#x3002;<a class="changeset-link headerlink reference internal" href="#change-5f4ad543840a3c34916641cc4f26dfd7">&#xB6;</a></span></p><p><span class="yiyi-st" id="yiyi-942">&#x8FD9;&#x4E2A;&#x6539;&#x53D8;&#x4E5F;&#x662F;<strong>backported</strong>&#x6539;&#x4E3A;&#xFF1A;0.9.8</span></p><p><span class="yiyi-st" id="yiyi-943">&#x53C2;&#x8003;&#x6587;&#x732E;&#xFF1A;<a class="reference external" href="http://www.sqlalchemy.org/trac/ticket/3197">&#xFF03;3197</a></span></p></li><li><p id="change-1.0.0b1-32"><span class="yiyi-st" id="yiyi-944"><span class="target" id="change-13967322d0db184e4ffb1c9b2b8391a2"><strong>[orm] [bug] </strong></span>Fixed bug that affected many classes of event, particularly ORM events but also engine events, where the usual logic of &#x201C;de duplicating&#x201D; a redundant call to <a class="reference internal" href="core_event.html#sqlalchemy.event.listen" title="sqlalchemy.event.listen"><code class="xref py py-func docutils literal"><span class="pre">event.listen()</span></code></a> with the same arguments would fail, for those events where the listener function is wrapped. </span><span class="yiyi-st" id="yiyi-945">&#x65AD;&#x8A00;&#x5C06;&#x5728;registry.py&#x4E2D;&#x53D1;&#x751F;&#x3002;</span><span class="yiyi-st" id="yiyi-946">&#x8FD9;&#x4E00;&#x8BF4;&#x6CD5;&#x73B0;&#x5728;&#x5DF2;&#x7ECF;&#x88AB;&#x7EB3;&#x5165;&#x91CD;&#x590D;&#x6570;&#x636E;&#x5220;&#x9664;&#x68C0;&#x67E5;&#x4E2D;&#xFF0C;&#x5E76;&#x5E26;&#x6765;&#x66F4;&#x7B80;&#x5355;&#x7684;&#x65B9;&#x6CD5;&#x6765;&#x68C0;&#x67E5;&#x91CD;&#x590D;&#x6570;&#x636E;&#x5220;&#x9664;&#x7684;&#x989D;&#x5916;&#x597D;&#x5904;&#x3002;<a class="changeset-link headerlink reference internal" href="#change-13967322d0db184e4ffb1c9b2b8391a2">&#xB6;</a></span></p><p><span class="yiyi-st" id="yiyi-947">&#x8FD9;&#x4E2A;&#x6539;&#x53D8;&#x4E5F;&#x662F;<strong>backported</strong>&#x6539;&#x4E3A;&#xFF1A;0.9.8</span></p><p><span class="yiyi-st" id="yiyi-948">&#x53C2;&#x8003;&#x6587;&#x732E;&#xFF1A;<a class="reference external" href="http://www.sqlalchemy.org/trac/ticket/3199">&#xFF03;3199</a></span></p></li><li><p id="change-1.0.0b1-33"><span class="yiyi-st" id="yiyi-949"><span class="target" id="change-75a312cfcc6e096469f40858cff9a1c6"><strong>[orm] [bug] </strong></span>&#x56FA;&#x5B9A;&#x8B66;&#x544A;&#xFF0C;&#x5F53;&#x590D;&#x6742;&#x7684;&#x81EA;&#x5F15;&#x7528;primaryjoin&#x5305;&#x542B;&#x51FD;&#x6570;&#x65F6;&#x4F1A;&#x53D1;&#x51FA;&#x8B66;&#x544A;&#xFF0C;&#x540C;&#x65F6;&#x6307;&#x5B9A;remote_side&#xFF1B;&#x8B66;&#x544A;&#x4F1A;&#x5EFA;&#x8BAE;&#x8BBE;&#x7F6E;&#x201C;&#x8FDC;&#x7A0B;&#x7AEF;&#x201D;&#x3002;</span><span class="yiyi-st" id="yiyi-950">&#x5982;&#x679C;remote_side&#x4E0D;&#x5B58;&#x5728;&#xFF0C;&#x5B83;&#x73B0;&#x5728;&#x53EA;&#x4F1A;&#x53D1;&#x5C04;&#x3002;<a class="changeset-link headerlink reference internal" href="#change-75a312cfcc6e096469f40858cff9a1c6">&#xB6;</a></span></p><p><span class="yiyi-st" id="yiyi-951">&#x8FD9;&#x4E2A;&#x6539;&#x53D8;&#x4E5F;&#x662F;<strong>backported</strong>&#x6539;&#x4E3A;&#xFF1A;0.9.8</span></p><p><span class="yiyi-st" id="yiyi-952">&#x53C2;&#x8003;&#x6587;&#x732E;&#xFF1A;<a class="reference external" href="http://www.sqlalchemy.org/trac/ticket/3194">&#xFF03;3194</a></span></p></li><li><p id="change-1.0.0b1-34"><span class="yiyi-st" id="yiyi-953"><span class="target" id="change-011e2d22662edc5f79a8c6b840409cd7"><strong>[orm] [bug] [eagerloading] </strong></span>Fixed a regression caused by <a class="reference external" href="http://www.sqlalchemy.org/trac/ticket/2976">#2976</a> released in 0.9.4 where the &#x201C;outer join&#x201D; propagation along a chain of joined eager loads would incorrectly convert an &#x201C;inner join&#x201D; along a sibling join path into an outer join as well, when only descendant paths should be receiving the &#x201C;outer join&#x201D; propagation; additionally, fixed related issue where &#x201C;nested&#x201D; join propagation would take place inappropriately between two sibling join paths.<a class="changeset-link headerlink reference internal" href="#change-011e2d22662edc5f79a8c6b840409cd7">&#xB6;</a></span></p><p><span class="yiyi-st" id="yiyi-954">&#x8FD9;&#x4E2A;&#x6539;&#x53D8;&#x4E5F;&#x88AB;<strong>backported</strong>&#x6539;&#x4E3A;&#xFF1A;0.9.7</span></p><p><span class="yiyi-st" id="yiyi-955">&#x53C2;&#x8003;&#x6587;&#x732E;&#xFF1A;<a class="reference external" href="http://www.sqlalchemy.org/trac/ticket/3131">&#xFF03;3131</a></span></p></li><li><p id="change-1.0.0b1-35"><span class="yiyi-st" id="yiyi-956"><span class="target" id="change-c8c83da8d054bbd7ec8173da1ea832f7"><strong>[orm] [bug] </strong></span>Fixed a regression from 0.9.0 due to <a class="reference external" href="http://www.sqlalchemy.org/trac/ticket/2736">#2736</a> where the <a class="reference internal" href="orm_query.html#sqlalchemy.orm.query.Query.select_from" title="sqlalchemy.orm.query.Query.select_from"><code class="xref py py-meth docutils literal"><span class="pre">Query.select_from()</span></code></a> method no longer set up the &#x201C;from entity&#x201D; of the <a class="reference internal" href="orm_query.html#sqlalchemy.orm.query.Query" title="sqlalchemy.orm.query.Query"><code class="xref py py-class docutils literal"><span class="pre">Query</span></code></a> object correctly, so that subsequent <a class="reference internal" href="orm_query.html#sqlalchemy.orm.query.Query.filter_by" title="sqlalchemy.orm.query.Query.filter_by"><code class="xref py py-meth docutils literal"><span class="pre">Query.filter_by()</span></code></a> or <a class="reference internal" href="orm_query.html#sqlalchemy.orm.query.Query.join" title="sqlalchemy.orm.query.Query.join"><code class="xref py py-meth docutils literal"><span class="pre">Query.join()</span></code></a> calls would fail to check the appropriate &#x201C;from&#x201D; entity when searching for attributes by string name.<a class="changeset-link headerlink reference internal" href="#change-c8c83da8d054bbd7ec8173da1ea832f7">&#xB6;</a></span></p><p><span class="yiyi-st" id="yiyi-957">&#x8FD9;&#x4E2A;&#x6539;&#x53D8;&#x4E5F;&#x88AB;<strong>backported</strong>&#x6539;&#x4E3A;&#xFF1A;0.9.7</span></p><p><span class="yiyi-st" id="yiyi-958">&#x53C2;&#x8003;&#x6587;&#x732E;&#xFF1A;<a class="reference external" href="http://www.sqlalchemy.org/trac/ticket/2736">&#xFF03;2736</a>&#xFF0C;<a class="reference external" href="http://www.sqlalchemy.org/trac/ticket/3083">&#xFF03;3083</a></span></p></li><li><p id="change-1.0.0b1-36"><span class="yiyi-st" id="yiyi-959"><span class="target" id="change-09e0b3775e3126481bf907cdd3c8a22c"><strong>[orm] [bug] </strong></span>Fixed bug where items that were persisted, deleted, or had a primary key change within a savepoint block would not participate in being restored to their former state (not in session, in session, previous PK) after the outer transaction were rolled back.<a class="changeset-link headerlink reference internal" href="#change-09e0b3775e3126481bf907cdd3c8a22c">&#xB6;</a></span></p><p><span class="yiyi-st" id="yiyi-960">&#x8FD9;&#x4E2A;&#x6539;&#x53D8;&#x4E5F;&#x88AB;<strong>backported</strong>&#x6539;&#x4E3A;&#xFF1A;0.9.7</span></p><p><span class="yiyi-st" id="yiyi-961">&#x53C2;&#x8003;&#x6587;&#x732E;&#xFF1A;<a class="reference external" href="http://www.sqlalchemy.org/trac/ticket/3108">&#xFF03;3108</a></span></p></li><li><p id="change-1.0.0b1-37"><span class="yiyi-st" id="yiyi-962"><span class="target" id="change-09c6751d1497c418a77af762659e38ef"><strong>[orm] [bug] </strong></span>Fixed bug in subquery eager loading in conjunction with <a class="reference internal" href="orm_inheritance.html#sqlalchemy.orm.with_polymorphic" title="sqlalchemy.orm.with_polymorphic"><code class="xref py py-func docutils literal"><span class="pre">with_polymorphic()</span></code></a>, the targeting of entities and columns in the subquery load has been made more accurate with respect to this type of entity and others.<a class="changeset-link headerlink reference internal" href="#change-09c6751d1497c418a77af762659e38ef">&#xB6;</a></span></p><p><span class="yiyi-st" id="yiyi-963">&#x8FD9;&#x4E2A;&#x6539;&#x53D8;&#x4E5F;&#x88AB;<strong>backported</strong>&#x6539;&#x4E3A;&#xFF1A;0.9.7</span></p><p><span class="yiyi-st" id="yiyi-964">&#x53C2;&#x8003;&#x6587;&#x732E;&#xFF1A;<a class="reference external" href="http://www.sqlalchemy.org/trac/ticket/3106">&#xFF03;3106</a></span></p></li><li><p id="change-1.0.0b1-38"><span class="yiyi-st" id="yiyi-965"><span class="target" id="change-57fece0f852794967517d0a22cbe10e7"><strong>[orm] [bug] </strong></span>Additional checks have been added for the case where an inheriting mapper is implicitly combining one of its column-based attributes with that of the parent, where those columns normally don&#x2019;t necessarily share the same value. </span><span class="yiyi-st" id="yiyi-966">&#x8FD9;&#x662F;&#x901A;&#x8FC7;<a class="reference external" href="http://www.sqlalchemy.org/trac/ticket/1892">&#xFF03;1892</a>&#x6DFB;&#x52A0;&#x7684;&#x73B0;&#x6709;&#x652F;&#x7968;&#x7684;&#x6269;&#x5C55;&#x3002;&#x7136;&#x800C;&#xFF0C;&#x8FD9;&#x4E2A;&#x65B0;&#x7684;&#x68C0;&#x67E5;&#x4EC5;&#x53D1;&#x51FA;&#x8B66;&#x544A;&#xFF0C;&#x800C;&#x4E0D;&#x662F;&#x4F8B;&#x5916;&#xFF0C;&#x4EE5;&#x5141;&#x8BB8;&#x53EF;&#x80FD;&#x4F9D;&#x8D56;&#x73B0;&#x6709;&#x884C;&#x4E3A;&#x7684;&#x5E94;&#x7528;&#x7A0B;&#x5E8F;&#x3002;</span></p><div class="admonition seealso"><p class="first admonition-title"><span class="yiyi-st" id="yiyi-967">&#x4E5F;&#x53EF;&#x4EE5;&#x770B;&#x770B;</span></p><p class="last"><span class="yiyi-st" id="yiyi-968"><a class="reference internal" href="faq_ormconfiguration.html#faq-combining-columns"><span>I&#x2019;m getting a warning or error about &#x201C;Implicitly combining column X under attribute Y&#x201D;</span></a></span></p></div><span class="yiyi-st" id="yiyi-971"> <a class="changeset-link headerlink reference internal" href="#change-57fece0f852794967517d0a22cbe10e7">&#xB6;</a></span><p><span class="yiyi-st" id="yiyi-969">&#x8FD9;&#x4E2A;&#x6539;&#x53D8;&#x4E5F;&#x88AB;<strong>backported</strong>&#x6539;&#x4E3A;&#xFF1A;0.9.5</span></p><p><span class="yiyi-st" id="yiyi-970">&#x53C2;&#x8003;&#x6587;&#x732E;&#xFF1A;<a class="reference external" href="http://www.sqlalchemy.org/trac/ticket/3042">&#xFF03;3042</a></span></p></li><li><p id="change-1.0.0b1-39"><span class="yiyi-st" id="yiyi-972"><span class="target" id="change-33b5e0cd5517f6c4fc5131ce5e6124cc"><strong>[orm] [bug] </strong></span>Modified the behavior of <a class="reference internal" href="orm_loading_columns.html#sqlalchemy.orm.load_only" title="sqlalchemy.orm.load_only"><code class="xref py py-func docutils literal"><span class="pre">orm.load_only()</span></code></a> such that primary key columns are always added to the list of columns to be &#x201C;undeferred&#x201D;; otherwise, the ORM can&#x2019;t load the row&#x2019;s identity. </span><span class="yiyi-st" id="yiyi-973">&#x663E;&#x7136;&#xFF0C;&#x53EF;&#x4EE5;&#x63A8;&#x8FDF;&#x6620;&#x5C04;&#x7684;&#x4E3B;&#x952E;&#xFF0C;&#x5E76;&#x4E14;ORM&#x5C06;&#x5931;&#x8D25;&#xFF0C;&#x8FD9;&#x5E76;&#x6CA1;&#x6709;&#x6539;&#x53D8;&#x3002;</span><span class="yiyi-st" id="yiyi-974">But as load_only is essentially saying &#x201C;defer all but X&#x201D;, it&#x2019;s more critical that PK cols not be part of this deferral.<a class="changeset-link headerlink reference internal" href="#change-33b5e0cd5517f6c4fc5131ce5e6124cc">&#xB6;</a></span></p><p><span class="yiyi-st" id="yiyi-975">&#x8FD9;&#x4E2A;&#x6539;&#x53D8;&#x4E5F;&#x88AB;<strong>backported</strong>&#x6539;&#x4E3A;&#xFF1A;0.9.5</span></p><p><span class="yiyi-st" id="yiyi-976">&#x53C2;&#x8003;&#x6587;&#x732E;&#xFF1A;<a class="reference external" href="http://www.sqlalchemy.org/trac/ticket/3080">&#xFF03;3080</a></span></p></li><li><p id="change-1.0.0b1-40"><span class="yiyi-st" id="yiyi-977"><span class="target" id="change-c9f980a739ab915284d71db0b46f1cff"><strong>[orm] [bug] </strong></span>Fixed a few edge cases which arise in the so-called &#x201C;row switch&#x201D; scenario, where an INSERT/DELETE can be turned into an UPDATE. </span><span class="yiyi-st" id="yiyi-978">&#x5728;&#x8FD9;&#x79CD;&#x60C5;&#x51B5;&#x4E0B;&#xFF0C;&#x5C06;&#x591A;&#x5BF9;&#x4E00;&#x5173;&#x7CFB;&#x8BBE;&#x7F6E;&#x4E3A;&#x65E0;&#xFF0C;&#x6216;&#x8005;&#x5728;&#x67D0;&#x4E9B;&#x60C5;&#x51B5;&#x4E0B;&#x5C06;&#x6807;&#x91CF;&#x5C5E;&#x6027;&#x8BBE;&#x7F6E;&#x4E3A;&#x65E0;&#xFF0C;&#x53EF;&#x80FD;&#x4E0D;&#x4F1A;&#x5C06;&#x5176;&#x68C0;&#x6D4B;&#x4E3A;&#x503C;&#x7684;&#x51C0;&#x66F4;&#x6539;&#xFF0C;&#x56E0;&#x6B64;UPDATE&#x4E0D;&#x4F1A;&#x91CD;&#x7F6E;&#x4E0A;&#x4E00;&#x884C;&#x4E2D;&#x7684;&#x5185;&#x5BB9;&#x3002;</span><span class="yiyi-st" id="yiyi-979">&#x8FD9;&#x662F;&#x7531;&#x4E8E;&#x4E00;&#x4E9B;&#x5C1A;&#x672A;&#x89E3;&#x51B3;&#x7684;&#x65B9;&#x5F0F;&#x5C5E;&#x6027;&#x5386;&#x53F2;&#x7684;&#x5DE5;&#x4F5C;&#x65B9;&#x5F0F;&#x9690;&#x542B;&#x5730;&#x5047;&#x8BBE;None&#x4E0D;&#x662F;&#x771F;&#x6B63;&#x7684;&#x201C;&#x6539;&#x53D8;&#x201D;&#x4EE5;&#x524D;&#x672A;&#x8BBE;&#x7F6E;&#x7684;&#x5C5E;&#x6027;&#x3002;</span><span class="yiyi-st" id="yiyi-980">&#x53E6;&#x89C1;<a class="reference external" href="http://www.sqlalchemy.org/trac/ticket/3061">&#xFF03;3061</a>&#x3002;</span></p><div class="admonition note"><p class="first admonition-title"><span class="yiyi-st" id="yiyi-981">&#x6CE8;&#x610F;</span></p><p class="last"><span class="yiyi-st" id="yiyi-982">This change has been <strong>REVERTED</strong> in 0.9.6. </span><span class="yiyi-st" id="yiyi-983">&#x5B8C;&#x6574;&#x7684;&#x4FEE;&#x8865;&#x7A0B;&#x5E8F;&#x5C06;&#x5728;SQLAlchemy 1.0&#x7248;&#x4E2D;&#x3002;</span></p></div><span class="yiyi-st" id="yiyi-986"> <a class="changeset-link headerlink reference internal" href="#change-c9f980a739ab915284d71db0b46f1cff">&#xB6;</a></span><p><span class="yiyi-st" id="yiyi-984">&#x8FD9;&#x4E2A;&#x6539;&#x53D8;&#x4E5F;&#x88AB;<strong>backported</strong>&#x6539;&#x4E3A;&#xFF1A;0.9.5</span></p><p><span class="yiyi-st" id="yiyi-985">&#x53C2;&#x8003;&#x6587;&#x732E;&#xFF1A;<a class="reference external" href="http://www.sqlalchemy.org/trac/ticket/3060">&#xFF03;3060</a></span></p></li><li><p id="change-1.0.0b1-41"><span class="yiyi-st" id="yiyi-987"><span class="target" id="change-50f44a6d5929b19a0805c7112c0d27ad"><strong>[orm] [bug] </strong></span>&#x4E0E;<a class="reference external" href="http://www.sqlalchemy.org/trac/ticket/3060">&#xFF03;3060</a>&#x76F8;&#x5173;&#xFF0C;&#x5DF2;&#x5BF9;&#x5DE5;&#x4F5C;&#x5355;&#x5143;&#x8FDB;&#x884C;&#x4E86;&#x8C03;&#x6574;&#xFF0C;&#x4EE5;&#x4F7F;&#x76F8;&#x5173;&#x7684;&#x591A;&#x5BF9;&#x4E00;&#x5BF9;&#x8C61;&#x7684;&#x52A0;&#x8F7D;&#x7A0D;&#x5FAE;&#x66F4;&#x79EF;&#x6781;&#x5728;&#x8981;&#x5220;&#x9664;&#x7684;&#x81EA;&#x5F15;&#x7528;&#x5BF9;&#x8C61;&#x7684;&#x56FE;&#x5F62;&#x7684;&#x60C5;&#x51B5;&#x4E0B;&#xFF1B;&#x5982;&#x679C;&#x672A;&#x8BBE;&#x7F6E;passive_deletes&#xFF0C;&#x5219;&#x76F8;&#x5173;&#x5BF9;&#x8C61;&#x7684;&#x8D1F;&#x8F7D;&#x5C06;&#x5E2E;&#x52A9;&#x786E;&#x5B9A;&#x6B63;&#x786E;&#x7684;&#x5220;&#x9664;&#x987A;&#x5E8F;&#x3002;<a class="changeset-link headerlink reference internal" href="#change-50f44a6d5929b19a0805c7112c0d27ad"></a></span></p><p><span class="yiyi-st" id="yiyi-988">&#x8FD9;&#x4E2A;&#x6539;&#x53D8;&#x4E5F;&#x88AB;<strong>backported</strong>&#x6539;&#x4E3A;&#xFF1A;0.9.5</span></p><p></p></li><li><p id="change-1.0.0b1-42"><span class="yiyi-st" id="yiyi-989"><span class="target" id="change-16b352ed9b306320c6e8315ed89d5a2b"><strong>[orm] [bug] </strong></span>Fixed bug in SQLite join rewriting where anonymized column names due to repeats would not correctly be rewritten in subqueries. </span><span class="yiyi-st" id="yiyi-990">&#x8FD9;&#x4F1A;&#x5F71;&#x54CD;&#x4EFB;&#x4F55;&#x7C7B;&#x578B;&#x7684;&#x5B50;&#x67E5;&#x8BE2;+&#x8FDE;&#x63A5;&#x7684;SELECT&#x67E5;&#x8BE2;&#x3002;<a class="changeset-link headerlink reference internal" href="#change-16b352ed9b306320c6e8315ed89d5a2b">&#xB6;</a></span></p><p><span class="yiyi-st" id="yiyi-991">&#x8FD9;&#x4E2A;&#x6539;&#x53D8;&#x4E5F;&#x88AB;<strong>backported</strong>&#x6539;&#x4E3A;&#xFF1A;0.9.5</span></p><p><span class="yiyi-st" id="yiyi-992">&#x53C2;&#x8003;&#x6587;&#x732E;&#xFF1A;<a class="reference external" href="http://www.sqlalchemy.org/trac/ticket/3057">&#xFF03;3057</a></span></p></li><li><p id="change-1.0.0b1-43"><span class="yiyi-st" id="yiyi-993"><span class="target" id="change-aecdd4c095256f1086a037c2ef111fdc"><strong>[orm] [bug] [sql] </strong></span>Fixes to the newly enhanced boolean coercion in <a class="reference external" href="http://www.sqlalchemy.org/trac/ticket/2804">#2804</a> where the new rules for &#x201C;where&#x201D; and &#x201C;having&#x201D; woudn&#x2019;t take effect for the &#x201C;whereclause&#x201D; and &#x201C;having&#x201D; kw arguments of the <a class="reference internal" href="core_selectable.html#sqlalchemy.sql.expression.select" title="sqlalchemy.sql.expression.select"><code class="xref py py-func docutils literal"><span class="pre">select()</span></code></a> construct, which is also what <a class="reference internal" href="orm_query.html#sqlalchemy.orm.query.Query" title="sqlalchemy.orm.query.Query"><code class="xref py py-class docutils literal"><span class="pre">Query</span></code></a> uses so wasn&#x2019;t working in the ORM either.<a class="changeset-link headerlink reference internal" href="#change-aecdd4c095256f1086a037c2ef111fdc">&#xB6;</a></span></p><p><span class="yiyi-st" id="yiyi-994">&#x8FD9;&#x4E2A;&#x6539;&#x53D8;&#x4E5F;&#x88AB;<strong>backported</strong>&#x6539;&#x4E3A;&#xFF1A;0.9.5</span></p><p><span class="yiyi-st" id="yiyi-995">&#x53C2;&#x8003;&#x6587;&#x732E;&#xFF1A;<a class="reference external" href="http://www.sqlalchemy.org/trac/ticket/3013">&#xFF03;3013</a></span></p></li><li><p id="change-1.0.0b1-44"><span class="yiyi-st" id="yiyi-996"><span class="target" id="change-15fc39532a23156ee7c64b1f7fc460b1"><strong>[orm] [bug] </strong></span>Fixed bug in subquery eager loading where a long chain of eager loads across a polymorphic-subclass boundary in conjunction with polymorphic loading would fail to locate the subclass-link in the chain, erroring out with a missing property name on an <a class="reference internal" href="orm_query.html#sqlalchemy.orm.util.AliasedClass" title="sqlalchemy.orm.util.AliasedClass"><code class="xref py py-class docutils literal"><span class="pre">AliasedClass</span></code></a>.<a class="changeset-link headerlink reference internal" href="#change-15fc39532a23156ee7c64b1f7fc460b1">&#xB6;</a></span></p><p><span class="yiyi-st" id="yiyi-997">This change is also <strong>backported</strong> to: 0.9.5, 0.8.7</span></p><p><span class="yiyi-st" id="yiyi-998">&#x53C2;&#x8003;&#x6587;&#x732E;&#xFF1A;<a class="reference external" href="http://www.sqlalchemy.org/trac/ticket/3055">&#xFF03;3055</a></span></p></li><li><p id="change-1.0.0b1-45"><span class="yiyi-st" id="yiyi-999"><span class="target" id="change-a0449e3beb0c1ac9e913ca55add64fd5"><strong>[orm] [bug] </strong></span>Fixed ORM bug where the <a class="reference internal" href="orm_mapping_api.html#sqlalchemy.orm.class_mapper" title="sqlalchemy.orm.class_mapper"><code class="xref py py-func docutils literal"><span class="pre">class_mapper()</span></code></a> function would mask AttributeErrors or KeyErrors that should raise during mapper configuration due to user errors. </span><span class="yiyi-st" id="yiyi-1000">&#x5BF9;&#x5C5E;&#x6027;/&#x952E;&#x9519;&#x8BEF;&#x7684;&#x6355;&#x83B7;&#x66F4;&#x5177;&#x4F53;&#xFF0C;&#x4E0D;&#x5305;&#x62EC;&#x914D;&#x7F6E;&#x6B65;&#x9AA4;&#x3002;<a class="changeset-link headerlink reference internal" href="#change-a0449e3beb0c1ac9e913ca55add64fd5">&#xB6;</a></span></p><p><span class="yiyi-st" id="yiyi-1001">This change is also <strong>backported</strong> to: 0.9.5, 0.8.7</span></p><p><span class="yiyi-st" id="yiyi-1002">&#x53C2;&#x8003;&#x6587;&#x732E;&#xFF1A;<a class="reference external" href="http://www.sqlalchemy.org/trac/ticket/3047">&#xFF03;3047</a></span></p></li><li><p id="change-1.0.0b1-46"><span class="yiyi-st" id="yiyi-1003"><span class="target" id="change-7025ea4b0c6347ad5a8b4ec049fb17e7"><strong>[orm] [bug] </strong></span>Fixed bug where the session attachment error &#x201C;object is already attached to session X&#x201D; would fail to prevent the object from also being attached to the new session, in the case that execution continued after the error raise occurred.<a class="changeset-link headerlink reference internal" href="#change-7025ea4b0c6347ad5a8b4ec049fb17e7">&#xB6;</a></span></p><p><span class="yiyi-st" id="yiyi-1004">&#x53C2;&#x8003;&#x6587;&#x732E;&#xFF1A;<a class="reference external" href="http://www.sqlalchemy.org/trac/ticket/3301">&#xFF03;3301</a></span></p></li><li><p id="change-1.0.0b1-47"><span class="yiyi-st" id="yiyi-1005"><span class="target" id="change-536752c99cbc5490b91573baaeb7d5f4"><strong>[orm] [bug] </strong></span>The primary <a class="reference internal" href="orm_mapping_api.html#sqlalchemy.orm.mapper.Mapper" title="sqlalchemy.orm.mapper.Mapper"><code class="xref py py-class docutils literal"><span class="pre">Mapper</span></code></a> of a <a class="reference internal" href="orm_query.html#sqlalchemy.orm.query.Query" title="sqlalchemy.orm.query.Query"><code class="xref py py-class docutils literal"><span class="pre">Query</span></code></a> is now passed to the <a class="reference internal" href="orm_session_api.html#sqlalchemy.orm.session.Session.get_bind" title="sqlalchemy.orm.session.Session.get_bind"><code class="xref py py-meth docutils literal"><span class="pre">Session.get_bind()</span></code></a> method when calling upon <a class="reference internal" href="orm_query.html#sqlalchemy.orm.query.Query.count" title="sqlalchemy.orm.query.Query.count"><code class="xref py py-meth docutils literal"><span class="pre">Query.count()</span></code></a>, <a class="reference internal" href="orm_query.html#sqlalchemy.orm.query.Query.update" title="sqlalchemy.orm.query.Query.update"><code class="xref py py-meth docutils literal"><span class="pre">Query.update()</span></code></a>, <a class="reference internal" href="orm_query.html#sqlalchemy.orm.query.Query.delete" title="sqlalchemy.orm.query.Query.delete"><code class="xref py py-meth docutils literal"><span class="pre">Query.delete()</span></code></a>, as well as queries against mapped columns, <a class="reference internal" href="orm_mapping_columns.html#sqlalchemy.orm.column_property" title="sqlalchemy.orm.column_property"><code class="xref py py-obj docutils literal"><span class="pre">column_property</span></code></a> objects, and SQL functions and expressions derived from mapped columns. </span><span class="yiyi-st" id="yiyi-1006">&#x8FD9;&#x5141;&#x8BB8;&#x4F9D;&#x8D56;&#x4E8E;&#x5B9A;&#x5236;&#x7684;<a class="reference internal" href="orm_session_api.html#sqlalchemy.orm.session.Session.get_bind" title="sqlalchemy.orm.session.Session.get_bind"><code class="xref py py-meth docutils literal"><span class="pre">Session.get_bind()</span></code></a>&#x65B9;&#x6848;&#x6216;&#x201C;&#x7ED1;&#x5B9A;&#x201D;&#x5143;&#x6570;&#x636E;&#x7684;&#x4F1A;&#x8BDD;&#x5728;&#x6240;&#x6709;&#x76F8;&#x5173;&#x60C5;&#x51B5;&#x4E0B;&#x90FD;&#x80FD;&#x591F;&#x5DE5;&#x4F5C;&#x3002;</span></p><div class="admonition seealso"><p class="first admonition-title"><span class="yiyi-st" id="yiyi-1007">&#x4E5F;&#x53EF;&#x4EE5;&#x770B;&#x770B;</span></p><p class="last"><span class="yiyi-st" id="yiyi-1008"><a class="reference internal" href="migration_10.html#bug-3227"><span>Session.get_bind() will receive the Mapper in all relevant Query cases</span></a></span></p></div><span class="yiyi-st" id="yiyi-1010"> <a class="changeset-link headerlink reference internal" href="#change-536752c99cbc5490b91573baaeb7d5f4">&#xB6;</a></span><p><span class="yiyi-st" id="yiyi-1009">References: <a class="reference external" href="http://www.sqlalchemy.org/trac/ticket/3242">#3242</a>, <a class="reference external" href="http://www.sqlalchemy.org/trac/ticket/3227">#3227</a>, <a class="reference external" href="http://www.sqlalchemy.org/trac/ticket/1326">#1326</a></span></p></li><li><p id="change-1.0.0b1-48"><span class="yiyi-st" id="yiyi-1011"><span class="target" id="change-ea41da3074acd0052766bd3df13f9711"><strong>[orm] [bug] </strong></span>The <a class="reference internal" href="orm_internals.html#sqlalchemy.orm.interfaces.PropComparator.of_type" title="sqlalchemy.orm.interfaces.PropComparator.of_type"><code class="xref py py-meth docutils literal"><span class="pre">PropComparator.of_type()</span></code></a> modifier has been improved in conjunction with loader directives such as <a class="reference internal" href="orm_loading_relationships.html#sqlalchemy.orm.joinedload" title="sqlalchemy.orm.joinedload"><code class="xref py py-func docutils literal"><span class="pre">joinedload()</span></code></a> and <a class="reference internal" href="orm_loading_relationships.html#sqlalchemy.orm.contains_eager" title="sqlalchemy.orm.contains_eager"><code class="xref py py-func docutils literal"><span class="pre">contains_eager()</span></code></a> such that if two <a class="reference internal" href="orm_internals.html#sqlalchemy.orm.interfaces.PropComparator.of_type" title="sqlalchemy.orm.interfaces.PropComparator.of_type"><code class="xref py py-meth docutils literal"><span class="pre">PropComparator.of_type()</span></code></a> modifiers of the same base type/path are encountered, they will be joined together into a single &#x201C;polymorphic&#x201D; entity, rather than replacing the entity of type A with the one of type B. E.g. a joinedload of <code class="docutils literal"><span class="pre">A.b.of_type(BSub1)-&gt;BSub1.c</span></code> combined with joinedload of <code class="docutils literal"><span class="pre">A.b.of_type(BSub2)-&gt;BSub2.c</span></code> will create a single joinedload of <code class="docutils literal"><span class="pre">A.b.of_type((BSub1,</span> <span class="pre">BSub2))</span> <span class="pre">-&gt;</span> <span class="pre">BSub1.c,</span> <span class="pre">BSub2.c</span></code>, without the need for the <code class="docutils literal"><span class="pre">with_polymorphic</span></code> to be explicit in the query.</span></p><div class="admonition seealso"><p class="first admonition-title"><span class="yiyi-st" id="yiyi-1012">&#x4E5F;&#x53EF;&#x4EE5;&#x770B;&#x770B;</span></p><p class="last"><span class="yiyi-st" id="yiyi-1013"><a class="reference internal" href="orm_inheritance.html#eagerloading-polymorphic-subtypes"><span>Eager Loading of Specific or Polymorphic Subtypes</span></a>  - &#x5305;&#x542B;&#x8BF4;&#x660E;&#x65B0;&#x683C;&#x5F0F;&#x7684;&#x66F4;&#x65B0;&#x793A;&#x4F8B;&#x3002;</span></p></div><span class="yiyi-st" id="yiyi-1015"> <a class="changeset-link headerlink reference internal" href="#change-ea41da3074acd0052766bd3df13f9711">&#xB6;</a></span><p><span class="yiyi-st" id="yiyi-1014">&#x53C2;&#x8003;&#x6587;&#x732E;&#xFF1A;<a class="reference external" href="http://www.sqlalchemy.org/trac/ticket/3256">&#xFF03;3256</a></span></p></li><li><p id="change-1.0.0b1-49"><span class="yiyi-st" id="yiyi-1016"><span class="target" id="change-48bcac0d4325cf6d45c78e2b87c7bc18"><strong>[orm] [bug] </strong></span>Repaired support of the <code class="docutils literal"><span class="pre">copy.deepcopy()</span></code> call when used by the <a class="reference internal" href="orm_internals.html#sqlalchemy.orm.util.CascadeOptions" title="sqlalchemy.orm.util.CascadeOptions"><code class="xref py py-class docutils literal"><span class="pre">orm.util.CascadeOptions</span></code></a> argument, which occurs if <code class="docutils literal"><span class="pre">copy.deepcopy()</span></code> is being used with <a class="reference internal" href="orm_relationship_api.html#sqlalchemy.orm.relationship" title="sqlalchemy.orm.relationship"><code class="xref py py-func docutils literal"><span class="pre">relationship()</span></code></a> (not an officially supported use case). </span><span class="yiyi-st" id="yiyi-1017">&#x62C9;&#x8BF7;&#x6C42;&#x7531;duesenfranz&#x63D0;&#x4F9B;&#x3002;<a class="changeset-link headerlink reference internal" href="#change-48bcac0d4325cf6d45c78e2b87c7bc18">&#xB6;</a></span></p><p><span class="yiyi-st" id="yiyi-1018">&#x53C2;&#x8003;&#x6587;&#x732E;&#xFF1A;<a class="reference external" href="https://github.com/zzzeek/sqlalchemy/pull/137">&#x8BF7;&#x6C42;github&#xFF1A;137</a></span></p></li><li><p id="change-1.0.0b1-50"><span class="yiyi-st" id="yiyi-1019"><span class="target" id="change-59caee694a457e7e0024d37366ccc4af"><strong>[orm] [bug] </strong></span>Fixed bug where <a class="reference internal" href="orm_session_api.html#sqlalchemy.orm.session.Session.expunge" title="sqlalchemy.orm.session.Session.expunge"><code class="xref py py-meth docutils literal"><span class="pre">Session.expunge()</span></code></a> would not fully detach the given object if the object had been subject to a delete operation that was flushed, but not committed. </span><span class="yiyi-st" id="yiyi-1020">&#x8FD9;&#x4E5F;&#x4F1A;&#x5F71;&#x54CD;&#x76F8;&#x5173;&#x7684;&#x64CD;&#x4F5C;&#xFF0C;&#x5982;<a class="reference internal" href="orm_session_api.html#sqlalchemy.orm.session.make_transient" title="sqlalchemy.orm.session.make_transient"><code class="xref py py-func docutils literal"><span class="pre">make_transient()</span></code></a>&#x3002;</span></p><div class="admonition seealso"><p class="first admonition-title"><span class="yiyi-st" id="yiyi-1021">&#x4E5F;&#x53EF;&#x4EE5;&#x770B;&#x770B;</span></p><p class="last"><span class="yiyi-st" id="yiyi-1022"><a class="reference internal" href="migration_10.html#bug-3139"><span>session.expunge() will fully detach an object that&#x2019;s been deleted</span></a></span></p></div><span class="yiyi-st" id="yiyi-1024"> <a class="changeset-link headerlink reference internal" href="#change-59caee694a457e7e0024d37366ccc4af">&#xB6;</a></span><p><span class="yiyi-st" id="yiyi-1023">&#x53C2;&#x8003;&#x6587;&#x732E;&#xFF1A;<a class="reference external" href="http://www.sqlalchemy.org/trac/ticket/3139">&#xFF03;3139</a></span></p></li><li><p id="change-1.0.0b1-51"><span class="yiyi-st" id="yiyi-1025"><span class="target" id="change-242697352354ba812f1570b0e04e2b68"><strong>[orm] [bug] </strong></span>A warning is emitted in the case of multiple relationships that ultimately will populate a foreign key column in conflict with another, where the relationships are attempting to copy values from different source columns. </span><span class="yiyi-st" id="yiyi-1026">&#x8FD9;&#x53D1;&#x751F;&#x5728;&#x5177;&#x6709;&#x91CD;&#x53E0;&#x5217;&#x7684;&#x7EC4;&#x5408;&#x5916;&#x952E;&#x6620;&#x5C04;&#x5230;&#x6BCF;&#x4E2A;&#x5F15;&#x7528;&#x4E0D;&#x540C;&#x5F15;&#x7528;&#x5217;&#x7684;&#x5173;&#x7CFB;&#x7684;&#x60C5;&#x51B5;&#x4E0B;&#x3002;</span><span class="yiyi-st" id="yiyi-1027">&#x65B0;&#x7684;&#x6587;&#x6863;&#x90E8;&#x5206;&#x5C06;&#x8BF4;&#x660E;&#x8BE5;&#x793A;&#x4F8B;&#x4EE5;&#x53CA;&#x5982;&#x4F55;&#x901A;&#x8FC7;&#x5728;&#x6BCF;&#x4E2A;&#x5173;&#x7CFB;&#x7684;&#x57FA;&#x7840;&#x4E0A;&#x4E13;&#x95E8;&#x6307;&#x5B9A;&#x201C;&#x5916;&#x6765;&#x201D;&#x5217;&#x6765;&#x89E3;&#x51B3;&#x8BE5;&#x95EE;&#x9898;&#x3002;</span></p><div class="admonition seealso"><p class="first admonition-title"><span class="yiyi-st" id="yiyi-1028">&#x4E5F;&#x53EF;&#x4EE5;&#x770B;&#x770B;</span></p><p class="last"><span class="yiyi-st" id="yiyi-1029"><a class="reference internal" href="orm_join_conditions.html#relationship-overlapping-foreignkeys"><span>Overlapping Foreign Keys</span></a></span></p></div><span class="yiyi-st" id="yiyi-1031"> <a class="changeset-link headerlink reference internal" href="#change-242697352354ba812f1570b0e04e2b68">&#xB6;</a></span><p><span class="yiyi-st" id="yiyi-1030">&#x53C2;&#x8003;&#x6587;&#x732E;&#xFF1A;<a class="reference external" href="http://www.sqlalchemy.org/trac/ticket/3230">&#xFF03;3230</a></span></p></li><li><p id="change-1.0.0b1-52"><span class="yiyi-st" id="yiyi-1032"><span class="target" id="change-04f95fecb0cc472b5f37e7ad801ce005"><strong>[orm] [bug] </strong></span>The <a class="reference internal" href="orm_query.html#sqlalchemy.orm.query.Query.update" title="sqlalchemy.orm.query.Query.update"><code class="xref py py-meth docutils literal"><span class="pre">Query.update()</span></code></a> method will now convert string key names in the given dictionary of values into mapped attribute names against the mapped class being updated. </span><span class="yiyi-st" id="yiyi-1033">&#x4EE5;&#x524D;&#xFF0C;&#x5B57;&#x7B26;&#x4E32;&#x540D;&#x79F0;&#x76F4;&#x63A5;&#x88AB;&#x91C7;&#x7528;&#x5E76;&#x4F20;&#x9012;&#x7ED9;&#x6838;&#x5FC3;&#x66F4;&#x65B0;&#x8BED;&#x53E5;&#xFF0C;&#x6CA1;&#x6709;&#x4EFB;&#x4F55;&#x65B9;&#x6CD5;&#x53EF;&#x4EE5;&#x6839;&#x636E;&#x6620;&#x5C04;&#x5B9E;&#x4F53;&#x8FDB;&#x884C;&#x89E3;&#x6790;&#x3002;</span><span class="yiyi-st" id="yiyi-1034">&#x652F;&#x6301;&#x540C;&#x4E49;&#x8BCD;&#x548C;&#x6DF7;&#x5408;&#x5C5E;&#x6027;&#x4F5C;&#x4E3A;<a class="reference internal" href="orm_query.html#sqlalchemy.orm.query.Query.update" title="sqlalchemy.orm.query.Query.update"><code class="xref py py-meth docutils literal"><span class="pre">Query.update()</span></code></a>&#x7684;&#x4E3B;&#x9898;&#x5C5E;&#x6027;&#x3002;</span></p><div class="admonition seealso"><p class="first admonition-title"><span class="yiyi-st" id="yiyi-1035">&#x4E5F;&#x53EF;&#x4EE5;&#x770B;&#x770B;</span></p><p class="last"><span class="yiyi-st" id="yiyi-1036"><a class="reference internal" href="migration_10.html#bug-3228"><span>query.update() now resolves string names into mapped attribute names</span></a></span></p></div><span class="yiyi-st" id="yiyi-1038"> <a class="changeset-link headerlink reference internal" href="#change-04f95fecb0cc472b5f37e7ad801ce005">&#xB6;</a></span><p><span class="yiyi-st" id="yiyi-1037">&#x53C2;&#x8003;&#x6587;&#x732E;&#xFF1A;<a class="reference external" href="http://www.sqlalchemy.org/trac/ticket/3228">&#xFF03;3228</a></span></p></li><li><p id="change-1.0.0b1-53"><span class="yiyi-st" id="yiyi-1039"><span class="target" id="change-1503884aa0f4847e8b48adc09e62f9fe"><strong>[orm] [bug] </strong></span>Improvements to the mechanism used by <a class="reference internal" href="orm_session_api.html#sqlalchemy.orm.session.Session" title="sqlalchemy.orm.session.Session"><code class="xref py py-class docutils literal"><span class="pre">Session</span></code></a> to locate &#x201C;binds&#x201D; (e.g. engines to use), such engines can be associated with mixin classes, concrete subclasses, as well as a wider variety of table metadata such as joined inheritance tables.</span></p><div class="admonition seealso"><p class="first admonition-title"><span class="yiyi-st" id="yiyi-1040">&#x4E5F;&#x53EF;&#x4EE5;&#x770B;&#x770B;</span></p><p class="last"><span class="yiyi-st" id="yiyi-1041"><a class="reference internal" href="migration_10.html#bug-3035"><span>Session.get_bind() handles a wider variety of inheritance scenarios</span></a></span></p></div><span class="yiyi-st" id="yiyi-1043"> <a class="changeset-link headerlink reference internal" href="#change-1503884aa0f4847e8b48adc09e62f9fe">&#xB6;</a></span><p><span class="yiyi-st" id="yiyi-1042">&#x53C2;&#x8003;&#x6587;&#x732E;&#xFF1A;<a class="reference external" href="http://www.sqlalchemy.org/trac/ticket/3035">&#xFF03;3035</a></span></p></li><li><p id="change-1.0.0b1-54"><span class="yiyi-st" id="yiyi-1044"><span class="target" id="change-d320a6f7b1d2612830586f2eff0be2ed"><strong>[orm] [bug] </strong></span>Fixed bug in single table inheritance where a chain of joins that included the same single inh entity more than once (normally this should raise an error) could, in some cases depending on what was being joined &#x201C;from&#x201D;, implicitly alias the second case of the single inh entity, producing a query that &#x201C;worked&#x201D;. </span><span class="yiyi-st" id="yiyi-1045">&#x4F46;&#x662F;&#xFF0C;&#x7531;&#x4E8E;&#x8FD9;&#x79CD;&#x9690;&#x5F0F;&#x522B;&#x540D;&#x5E76;&#x4E0D;&#x9002;&#x7528;&#x4E8E;&#x5355;&#x8868;&#x7EE7;&#x627F;&#x7684;&#x60C5;&#x51B5;&#xFF0C;&#x56E0;&#x6B64;&#x5B83;&#x5E76;&#x6CA1;&#x6709;&#x771F;&#x6B63;&#x201C;&#x5145;&#x5206;&#x53D1;&#x6325;&#x4F5C;&#x7528;&#x201D;&#xFF0C;&#x800C;&#x4E14;&#x975E;&#x5E38;&#x5177;&#x6709;&#x8BEF;&#x5BFC;&#x6027;&#xFF0C;&#x56E0;&#x4E3A;&#x5B83;&#x5E76;&#x4E0D;&#x603B;&#x662F;&#x663E;&#x793A;&#x51FA;&#x6765;&#x3002;</span></p><div class="admonition seealso"><p class="first admonition-title"><span class="yiyi-st" id="yiyi-1046">&#x4E5F;&#x53EF;&#x4EE5;&#x770B;&#x770B;</span></p><p class="last"><span class="yiyi-st" id="yiyi-1047"><a class="reference internal" href="migration_10.html#bug-3233"><span>Changes and fixes in handling of duplicate join targets</span></a></span></p></div><span class="yiyi-st" id="yiyi-1049"> <a class="changeset-link headerlink reference internal" href="#change-d320a6f7b1d2612830586f2eff0be2ed">&#xB6;</a></span><p><span class="yiyi-st" id="yiyi-1048">&#x53C2;&#x8003;&#x6587;&#x732E;&#xFF1A;<a class="reference external" href="http://www.sqlalchemy.org/trac/ticket/3233">&#xFF03;3233</a></span></p></li><li><p id="change-1.0.0b1-55"><span class="yiyi-st" id="yiyi-1050"><span class="target" id="change-99003d65e049410824e42ce9dab0c51b"><strong>[orm] [bug] </strong></span>The ON clause rendered when using <a class="reference internal" href="orm_query.html#sqlalchemy.orm.query.Query.join" title="sqlalchemy.orm.query.Query.join"><code class="xref py py-meth docutils literal"><span class="pre">Query.join()</span></code></a>, <a class="reference internal" href="orm_query.html#sqlalchemy.orm.query.Query.outerjoin" title="sqlalchemy.orm.query.Query.outerjoin"><code class="xref py py-meth docutils literal"><span class="pre">Query.outerjoin()</span></code></a>, or the standalone <a class="reference internal" href="orm_query.html#sqlalchemy.orm.join" title="sqlalchemy.orm.join"><code class="xref py py-func docutils literal"><span class="pre">orm.join()</span></code></a> / <a class="reference internal" href="orm_query.html#sqlalchemy.orm.outerjoin" title="sqlalchemy.orm.outerjoin"><code class="xref py py-func docutils literal"><span class="pre">orm.outerjoin()</span></code></a> functions to a single-inheritance subclass will now include the &#x201C;single table criteria&#x201D; in the ON clause even if the ON clause is otherwise hand-rolled; it is now added to the criteria using AND, the same way as if joining to a single-table target using relationship or similar.</span></p><p><span class="yiyi-st" id="yiyi-1051">&#x8FD9;&#x662F;&#x4ECB;&#x4E8E;&#x7279;&#x5F81;&#x548C;&#x7F3A;&#x9677;&#x4E4B;&#x95F4;&#x7684;&#x4E00;&#x79CD;&#x3002;</span></p><div class="admonition seealso"><p class="first admonition-title"><span class="yiyi-st" id="yiyi-1052">&#x4E5F;&#x53EF;&#x4EE5;&#x770B;&#x770B;</span></p><p class="last"><span class="yiyi-st" id="yiyi-1053"><a class="reference internal" href="migration_10.html#migration-3222"><span>single-table-inheritance criteria added to all ON clauses unconditionally</span></a></span></p></div><span class="yiyi-st" id="yiyi-1055"> <a class="changeset-link headerlink reference internal" href="#change-99003d65e049410824e42ce9dab0c51b">&#xB6;</a></span><p><span class="yiyi-st" id="yiyi-1054">&#x53C2;&#x8003;&#x6587;&#x732E;&#xFF1A;<a class="reference external" href="http://www.sqlalchemy.org/trac/ticket/3222">&#xFF03;3222</a></span></p></li><li><p id="change-1.0.0b1-56"><span class="yiyi-st" id="yiyi-1056"><span class="target" id="change-4dc82827da24b55f91128a02f9b3f695"><strong>[orm] [bug] </strong></span>A major rework to the behavior of expression labels, most specifically when used with ColumnProperty constructs with custom SQL expressions and in conjunction with the &#x201C;order by labels&#x201D; logic first introduced in 0.9. </span><span class="yiyi-st" id="yiyi-1057">&#x4FEE;&#x590D;&#x5305;&#x62EC;&#x5373;&#x4F7F;&#x5B9E;&#x4F53;&#x53D7;&#x5230;&#x6DF7;&#x6DC6;&#xFF0C;&#x4E00;&#x4E2A;<code class="docutils literal"><span class="pre">order_by(Entity.some_col_prop)</span></code>&#x73B0;&#x5728;&#x53EF;&#x4EE5;&#x4F7F;&#x7528;&#x201C;&#x6309;&#x6807;&#x7B7E;&#x6392;&#x5E8F;&#x201D;&#x89C4;&#x5219;&#xFF0C;&#x53EF;&#x4EE5;&#x901A;&#x8FC7;&#x7EE7;&#x627F;&#x5448;&#x73B0;&#x6216;&#x901A;&#x8FC7;&#x4F7F;&#x7528;<code class="docutils literal"><span class="pre">aliased()</span></code>&#x7ED3;&#x6784;&#xFF1B;&#x4F7F;&#x7528;&#x522B;&#x540D;&#xFF08;&#x4F8B;&#x5982;&#xFF0C;<code class="docutils literal"><span class="pre">&#x67E5;&#x8BE2;&#xFF08;Entity.some_prop&#xFF0C; tt&gt; <span class="pre">entity_alias.some_prop&#xFF09;</span></span></code>&#xFF09;&#x591A;&#x6B21;&#x6E32;&#x67D3;&#x540C;&#x4E00;&#x5217;&#x5C5E;&#x6027;&#x5C06;&#x6807;&#x8BB0;&#x6BCF;&#x6B21;&#x51FA;&#x73B0;&#x5B9E;&#x4F53;&#x5177;&#x6709;&#x4E0D;&#x540C;&#x7684;&#x6807;&#x7B7E;&#xFF0C;&#x5E76;&#x4E14;&#x53E6;&#x5916;&#x201C;&#x6309;&#x6807;&#x7B7E;&#x6392;&#x5E8F;&#x201D;&#x89C4;&#x5219;&#x9002;&#x7528;&#x4E8E;&#x4E24;&#x8005;&#xFF08;&#x4F8B;&#x5982;&#xFF0C;<code class="docutils literal"><span class="pre">order_by&#xFF08;Entity.some_prop&#xFF0C;</span> <span class="pre">entity_alias.some_prop&#xFF09;</span>  t7 &gt;&#xFF09;&#x3002;</code></span><span class="yiyi-st" id="yiyi-1058">&#x5176;&#x4ED6;&#x95EE;&#x9898;&#x53EF;&#x80FD;&#x4F1A;&#x963B;&#x6B62;&#x201C;&#x6309;&#x6807;&#x7B7E;&#x6392;&#x5E8F;&#x201D;&#x903B;&#x8F91;&#x5728;0.9&#x4E0B;&#x5DE5;&#x4F5C;&#xFF0C;&#x6700;&#x503C;&#x5F97;&#x6CE8;&#x610F;&#x7684;&#x662F;&#x6807;&#x7B7E;&#x7684;&#x72B6;&#x6001;&#x53EF;&#x80FD;&#x53D1;&#x751F;&#x53D8;&#x5316;&#xFF0C;&#x4F7F;&#x5F97;&#x201C;&#x6309;&#x6807;&#x7B7E;&#x6392;&#x5E8F;&#x201D;&#x5C06;&#x505C;&#x6B62;&#x5DE5;&#x4F5C;&#xFF0C;&#x5177;&#x4F53;&#x53D6;&#x51B3;&#x4E8E;&#x8C03;&#x7528;&#x65B9;&#x5F0F;&#xFF0C;&#x5DF2;&#x5F97;&#x5230;&#x4FEE;&#x590D;&#x3002;</span></p><div class="admonition seealso"><p class="first admonition-title"><span class="yiyi-st" id="yiyi-1059">&#x4E5F;&#x53EF;&#x4EE5;&#x770B;&#x770B;</span></p><p class="last"><span class="yiyi-st" id="yiyi-1060"><a class="reference internal" href="migration_10.html#bug-3188"><span>ColumnProperty constructs work a lot better with aliases, order_by</span></a></span></p></div><span class="yiyi-st" id="yiyi-1062"> <a class="changeset-link headerlink reference internal" href="#change-4dc82827da24b55f91128a02f9b3f695">&#xB6;</a></span><p><span class="yiyi-st" id="yiyi-1061">&#x53C2;&#x8003;&#x6587;&#x732E;&#xFF1A;<a class="reference external" href="http://www.sqlalchemy.org/trac/ticket/3148">&#xFF03;3148</a>&#xFF0C;<a class="reference external" href="http://www.sqlalchemy.org/trac/ticket/3188">&#xFF03;3188</a></span></p></li><li><p id="change-1.0.0b1-57"><span class="yiyi-st" id="yiyi-1063"><span class="target" id="change-e1840eaa8736367b7f48e48d04d2d7d2"><strong>[orm] [bug] </strong></span>&#x66F4;&#x6539;&#x4E86;&#x4F7F;&#x7528;<a class="reference internal" href="orm_query.html#sqlalchemy.orm.query.Query.from_self" title="sqlalchemy.orm.query.Query.from_self"><code class="xref py py-meth docutils literal"><span class="pre">Query.from_self()</span></code></a>&#x65F6;&#x5E94;&#x7528;&#x201C;&#x5355;&#x4E00;&#x7EE7;&#x627F;&#x6807;&#x51C6;&#x201D;&#x7684;&#x65B9;&#x6CD5;&#x6216;&#x5176;&#x666E;&#x901A;&#x7528;&#x6237;<a class="reference internal" href="orm_query.html#sqlalchemy.orm.query.Query.count" title="sqlalchemy.orm.query.Query.count"><code class="xref py py-meth docutils literal"><span class="pre">Query.count()</span></code></a></span><span class="yiyi-st" id="yiyi-1064">&#x73B0;&#x5728;&#xFF0C;&#x5728;&#x5185;&#x90E8;&#x5B50;&#x67E5;&#x8BE2;&#x4E2D;&#x800C;&#x4E0D;&#x662F;&#x5916;&#x90E8;&#x5B50;&#x67E5;&#x8BE2;&#x4E2D;&#x6307;&#x5B9A;&#x4E86;&#x5C06;&#x884C;&#x9650;&#x5236;&#x4E3A;&#x5177;&#x6709;&#x67D0;&#x79CD;&#x7C7B;&#x578B;&#x7684;&#x6807;&#x51C6;&#x7684;&#x6761;&#x4EF6;&#xFF0C;&#x4EE5;&#x4FBF;&#x5373;&#x4F7F;&#x201C;&#x5217;&#x201D;&#x5B50;&#x53E5;&#x4E2D;&#x201C;&#x7C7B;&#x578B;&#x201D;&#x5217;&#x4E0D;&#x53EF;&#x7528;&#xFF0C;&#x6211;&#x4EEC;&#x4E5F;&#x53EF;&#x4EE5;&#x5728;&#x201C;&#x5185;&#x90E8;&#x201C;&#x67E5;&#x8BE2;&#x3002;</span></p><div class="admonition seealso"><p class="first admonition-title"><span class="yiyi-st" id="yiyi-1065">&#x4E5F;&#x53EF;&#x4EE5;&#x770B;&#x770B;</span></p><p class="last"><span class="yiyi-st" id="yiyi-1066"><a class="reference internal" href="migration_10.html#migration-3177"><span>Change to single-table-inheritance criteria when using from_self(), count()</span></a>&#x65F6;&#x66F4;&#x6539;&#x4E3A;&#x5355;&#x8868;&#x7EE7;&#x627F;&#x6761;&#x4EF6;</span></p></div><span class="yiyi-st" id="yiyi-1068"> <a class="changeset-link headerlink reference internal" href="#change-e1840eaa8736367b7f48e48d04d2d7d2">&#xB6;</a></span><p><span class="yiyi-st" id="yiyi-1067">&#x53C2;&#x8003;&#x6587;&#x732E;&#xFF1A;<a class="reference external" href="http://www.sqlalchemy.org/trac/ticket/3177">&#xFF03;3177</a></span></p></li><li><p id="change-1.0.0b1-58"><span class="yiyi-st" id="yiyi-1069"><span class="target" id="change-c17ae9c4ebca0e74f469b58a3f8ac5a1"><strong>[orm] [bug] </strong></span>&#x5BF9;&#x5EF6;&#x8FDF;&#x52A0;&#x8F7D;&#x7684;&#x673A;&#x5236;&#x505A;&#x4E86;&#x4E00;&#x4E9B;&#x5C0F;&#x8C03;&#x6574;&#xFF0C;&#x8FD9;&#x6837;&#x5728;&#x5BF9;&#x8C61;&#x6307;&#x5411;&#x81EA;&#x8EAB;&#x7684;&#x975E;&#x5E38;&#x7F55;&#x89C1;&#x7684;&#x60C5;&#x51B5;&#x4E0B;&#xFF0C;&#x5E72;&#x6D89;joinload()&#x7684;&#x53EF;&#x80FD;&#x6027;&#x5C31;&#x4F1A;&#x964D;&#x4F4E;&#xFF1B;&#x5728;&#x8FD9;&#x79CD;&#x60C5;&#x51B5;&#x4E0B;&#xFF0C;&#x5BF9;&#x8C61;&#x5728;&#x52A0;&#x8F7D;&#x5176;&#x5C5E;&#x6027;&#x65F6;&#x4F1A;&#x5F15;&#x7528;&#x81EA;&#x8EAB;&#xFF0C;&#x8FD9;&#x4F1A;&#x5BFC;&#x81F4;&#x52A0;&#x8F7D;&#x5668;&#x4E4B;&#x95F4;&#x51FA;&#x73B0;&#x6DF7;&#x6DC6;&#x3002;</span><span class="yiyi-st" id="yiyi-1070">&#x201C;&#x5BF9;&#x8C61;&#x6307;&#x5411;&#x81EA;&#x8EAB;&#x201D;&#x7684;&#x7528;&#x4F8B;&#x5E76;&#x4E0D;&#x5B8C;&#x5168;&#x652F;&#x6301;&#xFF0C;&#x4F46;&#x4FEE;&#x590D;&#x8FD8;&#x4F1A;&#x6D88;&#x9664;&#x4E00;&#x4E9B;&#x5F00;&#x9500;&#xFF0C;&#x6240;&#x4EE5;&#x73B0;&#x5728;&#x662F;&#x6D4B;&#x8BD5;&#x7684;&#x4E00;&#x90E8;&#x5206;&#x3002;<a class="changeset-link headerlink reference internal" href="#change-c17ae9c4ebca0e74f469b58a3f8ac5a1">&#xB6;</a></span></p><p><span class="yiyi-st" id="yiyi-1071">&#x53C2;&#x8003;&#x6587;&#x732E;&#xFF1A;<a class="reference external" href="http://www.sqlalchemy.org/trac/ticket/3145">&#xFF03;3145</a></span></p></li><li><p id="change-1.0.0b1-59"><span class="yiyi-st" id="yiyi-1072"><span class="target" id="change-ee661e992971bab23524715b4fd7af05"><strong>[orm] [bug] </strong></span>&#x201C;resurrect&#x201D;ORM&#x4E8B;&#x4EF6;&#x5DF2;&#x88AB;&#x5220;&#x9664;&#x3002;</span><span class="yiyi-st" id="yiyi-1073">&#x8FD9;&#x4E2A;&#x4E8B;&#x4EF6;&#x94A9;&#x5B50;&#x6CA1;&#x6709;&#x7528;&#x5904;&#xFF0C;&#x56E0;&#x4E3A;&#x5728;0.8&#x4E2D;&#x5220;&#x9664;&#x4E86;&#x65E7;&#x7684;&#x201C;&#x53EF;&#x53D8;&#x5C5E;&#x6027;&#x201D;&#x7CFB;&#x7EDF;&#x3002;<a class="changeset-link headerlink reference internal" href="#change-ee661e992971bab23524715b4fd7af05">&#xB6;</a></span></p><p><span class="yiyi-st" id="yiyi-1074">&#x53C2;&#x8003;&#x6587;&#x732E;&#xFF1A;<a class="reference external" href="http://www.sqlalchemy.org/trac/ticket/3171">&#xFF03;3171</a></span></p></li><li><p id="change-1.0.0b1-60"><span class="yiyi-st" id="yiyi-1075"><span class="target" id="change-b5c339b9efafb2a17766bcb8e791ab2b"><strong>[orm] [bug] </strong></span>Fixed bug where attribute &#x201C;set&#x201D; events or columns with <code class="docutils literal"><span class="pre">@validates</span></code> would have events triggered within the flush process, when those columns were the targets of a &#x201C;fetch and populate&#x201D; operation, such as an autoincremented primary key, a Python side default, or a server-side default &#x201C;eagerly&#x201D; fetched via RETURNING.<a class="changeset-link headerlink reference internal" href="#change-b5c339b9efafb2a17766bcb8e791ab2b">&#xB6;</a></span></p><p><span class="yiyi-st" id="yiyi-1076">&#x53C2;&#x8003;&#x6587;&#x732E;&#xFF1A;<a class="reference external" href="http://www.sqlalchemy.org/trac/ticket/3167">&#xFF03;3167</a></span></p></li><li><p id="change-1.0.0b1-61"><span class="yiyi-st" id="yiyi-1077"><span class="target" id="change-21c5bfbd3c59afd9373dca8d8606a34e"><strong>[orm] [bug] [py3k] </strong></span>The <a class="reference internal" href="orm_internals.html#sqlalchemy.orm.identity.IdentityMap" title="sqlalchemy.orm.identity.IdentityMap"><code class="xref py py-class docutils literal"><span class="pre">IdentityMap</span></code></a> exposed from <a class="reference internal" href="orm_session_api.html#sqlalchemy.orm.session.Session.identity_map" title="sqlalchemy.orm.session.Session.identity_map"><code class="xref py py-attr docutils literal"><span class="pre">Session.identity_map</span></code></a> now returns lists for <code class="docutils literal"><span class="pre">items()</span></code> and <code class="docutils literal"><span class="pre">values()</span></code> in Py3K. </span><span class="yiyi-st" id="yiyi-1078">&#x65E9;&#x671F;&#x79FB;&#x690D;&#x5230;Py3K&#x8FD9;&#x91CC;&#x6709;&#x8FD9;&#x4E9B;&#x8FD4;&#x56DE;&#x7684;&#x8FED;&#x4EE3;&#x5668;&#xFF0C;&#x5F53;&#x5B83;&#x4EEC;&#x5728;&#x6280;&#x672F;&#x4E0A;&#x5E94;&#x8BE5;&#x662F;&#x201C;&#x53EF;&#x8FED;&#x4EE3;&#x7684;&#x89C6;&#x56FE;&#x201D;&#x65F6;&#x3002;&#x73B0;&#x5728;&#xFF0C;&#x5217;&#x8868;&#x662F;&#x53EF;&#x4EE5;&#x7684;&#x3002;<a class="changeset-link headerlink reference internal" href="#change-21c5bfbd3c59afd9373dca8d8606a34e">&#xB6;</a></span></p><p></p></li><li><p id="change-1.0.0b1-62"><span class="yiyi-st" id="yiyi-1079"><span class="target" id="change-9f773e193791199cf150187e1e900de3"><strong>[orm] [bug] </strong></span>The &#x201C;evaluator&#x201D; for query.update()/delete() won&#x2019;t work with multi-table updates, and needs to be set to <cite>synchronize_session=False</cite> or <cite>synchronize_session=&#x2019;fetch&#x2019;</cite>; this now raises an exception, with a message to change the synchronize setting. </span><span class="yiyi-st" id="yiyi-1080">&#x8FD9;&#x662F;&#x4ECE;0.9.7&#x53D1;&#x51FA;&#x7684;&#x8B66;&#x544A;&#x5347;&#x7EA7;&#x800C;&#x6765;&#x7684;&#x3002;<a class="changeset-link headerlink reference internal" href="#change-9f773e193791199cf150187e1e900de3">&#xB6;</a></span></p><p><span class="yiyi-st" id="yiyi-1081">&#x53C2;&#x8003;&#x6587;&#x732E;&#xFF1A;<a class="reference external" href="http://www.sqlalchemy.org/trac/ticket/3117">&#xFF03;3117</a></span></p></li><li><p id="change-1.0.0b1-63"><span class="yiyi-st" id="yiyi-1082"><span class="target" id="change-0b4a0dfd1c62dd4c3d1b1194d31a4ca3"><strong>[orm] [change] </strong></span>&#x5373;&#x4F7F;&#x5217;&#x4E2D;&#x7684;&#x67D0;&#x4E9B;&#x5217;&#x4EE5;&#x67D0;&#x79CD;&#x65B9;&#x5F0F;&#x5B58;&#x5728;&#x4E8E;&#x7ED3;&#x679C;&#x96C6;&#x4E2D;&#xFF0C;&#x6807;&#x8BB0;&#x4E3A;deferred&#x7684;&#x6620;&#x5C04;&#x5C5E;&#x6027;&#x73B0;&#x5728;&#x4ECD;&#x4FDD;&#x6301;&#x201C;&#x5EF6;&#x8FDF;&#x201D;&#x72B6;&#x6001;&#x3002;</span><span class="yiyi-st" id="yiyi-1083">&#x8FD9;&#x662F;&#x4E00;&#x79CD;&#x6027;&#x80FD;&#x589E;&#x5F3A;&#xFF0C;&#x56E0;&#x4E3A;&#x5F53;&#x83B7;&#x5F97;&#x7ED3;&#x679C;&#x96C6;&#x65F6;&#xFF0C;ORM&#x52A0;&#x8F7D;&#x4E0D;&#x518D;&#x82B1;&#x8D39;&#x65F6;&#x95F4;&#x641C;&#x7D22;&#x6BCF;&#x4E2A;&#x5EF6;&#x8FDF;&#x5217;&#x3002;</span><span class="yiyi-st" id="yiyi-1084">&#x4F46;&#x662F;&#xFF0C;&#x5BF9;&#x4E8E;&#x4F9D;&#x8D56;&#x4E8E;&#x6B64;&#x7684;&#x5E94;&#x7528;&#x7A0B;&#x5E8F;&#xFF0C;&#x73B0;&#x5728;&#x5E94;&#x8BE5;&#x4F7F;&#x7528;&#x660E;&#x786E;&#x7684;<a class="reference internal" href="orm_loading_columns.html#sqlalchemy.orm.undefer" title="sqlalchemy.orm.undefer"><code class="xref py py-func docutils literal"><span class="pre">undefer()</span></code></a>&#x6216;&#x7C7B;&#x4F3C;&#x9009;&#x9879;&#x3002;<a class="changeset-link headerlink reference internal" href="#change-0b4a0dfd1c62dd4c3d1b1194d31a4ca3">&#xB6;</a></span></p><p></p></li><li><p id="change-1.0.0b1-64"><span class="yiyi-st" id="yiyi-1085"><span class="target" id="change-adcdeaea46191497621f88dc5dc2e323"><strong>[orm] [enhancement] </strong></span>&#x8C03;&#x6574;&#x5C5E;&#x6027;&#x7684;&#x673A;&#x5236;&#xFF0C;&#x6D89;&#x53CA;&#x4F55;&#x65F6;&#x5C06;&#x503C;&#x901A;&#x8FC7;&#x7B2C;&#x4E00;&#x6B21;&#x8BBF;&#x95EE;&#x9690;&#x5F0F;&#x521D;&#x59CB;&#x5316;&#x4E3A;None&#xFF1B;&#x8FD9;&#x79CD;&#x4E00;&#x76F4;&#x5BFC;&#x81F4;&#x4EBA;&#x53E3;&#x5C5E;&#x6027;&#x7684;&#x884C;&#x4E3A;&#x4E0D;&#x518D;&#x8FD9;&#x6837;&#x505A;&#xFF1B;&#x5C06;&#x8FD4;&#x56DE;None&#x503C;&#xFF0C;&#x4F46;&#x5E95;&#x5C42;&#x5C5E;&#x6027;&#x4E0D;&#x4F1A;&#x6536;&#x5230;&#x8BBE;&#x7F6E;&#x4E8B;&#x4EF6;&#x3002;</span><span class="yiyi-st" id="yiyi-1086">&#x8FD9;&#x4E0E;&#x96C6;&#x5408;&#x7684;&#x5DE5;&#x4F5C;&#x65B9;&#x5F0F;&#x4E00;&#x81F4;&#xFF0C;&#x5E76;&#x5141;&#x8BB8;&#x5C5E;&#x6027;&#x673A;&#x5236;&#x7684;&#x884C;&#x4E3A;&#x66F4;&#x52A0;&#x4E00;&#x81F4;&#xFF1B;&#x7279;&#x522B;&#x662F;&#xFF0C;&#x5982;&#x679C;&#x503C;&#x5B9E;&#x9645;&#x8BBE;&#x7F6E;&#x4E3A;None&#xFF0C;&#x5219;&#x83B7;&#x53D6;&#x4E0D;&#x5E26;&#x503C;&#x7684;&#x5C5E;&#x6027;&#x4E0D;&#x4F1A;&#x538B;&#x7F29;&#x5E94;&#x7EE7;&#x7EED;&#x6267;&#x884C;&#x7684;&#x4E8B;&#x4EF6;&#x3002;</span></p><div class="admonition seealso"><p class="first admonition-title"><span class="yiyi-st" id="yiyi-1087">&#x4E5F;&#x53EF;&#x4EE5;&#x770B;&#x770B;</span></p><p class="last"><span class="yiyi-st" id="yiyi-1088"><a class="reference internal" href="migration_10.html#migration-3061"><span>Changes to attribute events and other operations regarding attributes that have no pre-existing value</span></a>&#x7684;&#x5C5E;&#x6027;&#x7684;&#x64CD;&#x4F5C;</span></p></div><p><span class="yiyi-st" id="yiyi-1089">&#x6839;&#x636E;&#x7F16;&#x8BD1;&#x65F6;&#x9009;&#x9879;&#x5C06;&#x7ED1;&#x5B9A;&#x53C2;&#x6570;&#x5185;&#x8054;&#x5448;&#x73B0;&#x4E3A;&#x5B57;&#x7B26;&#x4E32;&#x3002;</span><span class="yiyi-st" id="yiyi-1090">&#x6B64;&#x529F;&#x80FD;&#x7684;&#x5DE5;&#x4F5C;&#x662F;&#x7531;Dobes Vandermeer&#x63D0;&#x4F9B;&#x7684;&#x3002;</span></p><blockquote><div><div class="admonition seealso"><p class="first admonition-title"><span class="yiyi-st" id="yiyi-1091">&#x4E5F;&#x53EF;&#x4EE5;&#x770B;&#x770B;</span></p><p class="last"><span class="yiyi-st" id="yiyi-1092"><a class="reference internal" href="migration_10.html#feature-3034"><span>Select/Query LIMIT / OFFSET may be specified as an arbitrary SQL expression</span></a>.</span></p></div></div></blockquote><span class="yiyi-st" id="yiyi-1094"> <a class="changeset-link headerlink reference internal" href="#change-adcdeaea46191497621f88dc5dc2e323">&#xB6;</a></span><p><span class="yiyi-st" id="yiyi-1093">&#x53C2;&#x8003;&#x6587;&#x732E;&#xFF1A;<a class="reference external" href="http://www.sqlalchemy.org/trac/ticket/3061">&#xFF03;3061</a></span></p></li></ul></div><div class="section" id="change-1.0.0b1-orm-declarative"><h3><span class="yiyi-st" id="yiyi-1095">orm declarative <a class="headerlink" href="#change-1.0.0b1-orm-declarative" title="Permalink to this headline">&#xB6;</a></span></h3><ul class="simple"><li><p id="change-1.0.0b1-65"><span class="yiyi-st" id="yiyi-1096"><span class="target" id="change-4705f0764e48b2f5eb3aab8ef41313f3"><strong>[feature] [orm] [declarative] </strong></span> <a class="reference internal" href="orm_extensions_declarative_api.html#sqlalchemy.ext.declarative.declared_attr" title="sqlalchemy.ext.declarative.declared_attr"><code class="xref py py-class docutils literal"><span class="pre">declared_attr</span></code></a>&#x6784;&#x9020;&#x5177;&#x6709;&#x4E0E;&#x58F0;&#x660E;&#x5F0F;&#x7ED3;&#x5408;&#x7684;&#x65B0;&#x6539;&#x8FDB;&#x7684;&#x884C;&#x4E3A;&#x548C;&#x7279;&#x5F81;&#x3002;</span><span class="yiyi-st" id="yiyi-1097">&#x88C5;&#x9970;&#x540E;&#x7684;&#x51FD;&#x6570;&#x73B0;&#x5728;&#x53EF;&#x4EE5;&#x5728;&#x8C03;&#x7528;&#x65F6;&#x8BBF;&#x95EE;&#x672C;&#x5730;mixin&#x4E0A;&#x5B58;&#x5728;&#x7684;&#x6700;&#x7EC8;&#x5217;&#x526F;&#x672C;&#xFF0C;&#x5E76;&#x4E14;&#x6BCF;&#x6B21;&#x6620;&#x5C04;&#x7684;&#x7C7B;&#x4E5F;&#x4F1A;&#x88AB;&#x8C03;&#x7528;&#x4E00;&#x6B21;&#xFF0C;&#x8FD4;&#x56DE;&#x7684;&#x7ED3;&#x679C;&#x5C06;&#x88AB;&#x8BB0;&#x5FC6;&#x3002;</span><span class="yiyi-st" id="yiyi-1098">&#x8FD8;&#x6DFB;&#x52A0;&#x4E86;&#x65B0;&#x7684;&#x4FEE;&#x9970;&#x7B26;<a class="reference internal" href="orm_extensions_declarative_api.html#sqlalchemy.ext.declarative.declared_attr.cascading" title="sqlalchemy.ext.declarative.declared_attr.cascading"><code class="xref py py-attr docutils literal"><span class="pre">declared_attr.cascading</span></code></a>&#x3002;</span></p><div class="admonition seealso"><p class="first admonition-title"><span class="yiyi-st" id="yiyi-1099">&#x4E5F;&#x53EF;&#x4EE5;&#x770B;&#x770B;</span></p><p class="last"><span class="yiyi-st" id="yiyi-1100"><a class="reference internal" href="migration_10.html#feature-3150"><span>Improvements to declarative mixins, @declared_attr and related features</span></a></span></p></div><span class="yiyi-st" id="yiyi-1102"> <a class="changeset-link headerlink reference internal" href="#change-4705f0764e48b2f5eb3aab8ef41313f3">&#xB6;</a></span><p><span class="yiyi-st" id="yiyi-1101">&#x53C2;&#x8003;&#x6587;&#x732E;&#xFF1A;<a class="reference external" href="http://www.sqlalchemy.org/trac/ticket/3150">&#xFF03;3150</a></span></p></li><li><p id="change-1.0.0b1-66"><span class="yiyi-st" id="yiyi-1103"><span class="target" id="change-35f8b8e11566fd75025e1d45a0b5bb5f"><strong>[bug] [declarative] [orm] </strong></span>Fixed &#x201C;&#x2018;NoneType&#x2019; object has no attribute &#x2018;concrete&#x2019;&#x201D; error when using <a class="reference internal" href="orm_extensions_declarative_api.html#sqlalchemy.ext.declarative.AbstractConcreteBase" title="sqlalchemy.ext.declarative.AbstractConcreteBase"><code class="xref py py-class docutils literal"><span class="pre">AbstractConcreteBase</span></code></a> in conjunction with a subclass that declares <code class="docutils literal"><span class="pre">__abstract__</span></code>.<a class="changeset-link headerlink reference internal" href="#change-35f8b8e11566fd75025e1d45a0b5bb5f">&#xB6;</a></span></p><p><span class="yiyi-st" id="yiyi-1104">&#x8FD9;&#x4E2A;&#x6539;&#x53D8;&#x4E5F;&#x662F;<strong>backported</strong>&#x6539;&#x4E3A;&#xFF1A;0.9.8</span></p><p><span class="yiyi-st" id="yiyi-1105">&#x53C2;&#x8003;&#x6587;&#x732E;&#xFF1A;<a class="reference external" href="http://www.sqlalchemy.org/trac/ticket/3185">&#xFF03;3185</a></span></p></li><li><p id="change-1.0.0b1-67"><span class="yiyi-st" id="yiyi-1106"><span class="target" id="change-c38f0b260fc330da3a825c0062499246"><strong>[bug] [orm] [declarative] </strong></span>Fixed bug where using an <code class="docutils literal"><span class="pre">__abstract__</span></code> mixin in the middle of a declarative inheritance hierarchy would prevent attributes and configuration being correctly propagated from the base class to the inheriting class.<a class="changeset-link headerlink reference internal" href="#change-c38f0b260fc330da3a825c0062499246">&#xB6;</a></span></p><p><span class="yiyi-st" id="yiyi-1107">&#x53C2;&#x8003;&#x6587;&#x732E;&#xFF1A;<a class="reference external" href="http://www.sqlalchemy.org/trac/ticket/3240">&#xFF03;3240</a>&#xFF0C;<a class="reference external" href="http://www.sqlalchemy.org/trac/ticket/3219">&#xFF03;3219</a></span></p></li><li><p id="change-1.0.0b1-68"><span class="yiyi-st" id="yiyi-1108"><span class="target" id="change-51f59e6c6a8a87ad61d8e37d86ecd144"><strong>[bug] [orm] [declarative] </strong></span>A relationship set up with <a class="reference internal" href="orm_extensions_declarative_api.html#sqlalchemy.ext.declarative.declared_attr" title="sqlalchemy.ext.declarative.declared_attr"><code class="xref py py-class docutils literal"><span class="pre">declared_attr</span></code></a> on a <a class="reference internal" href="orm_extensions_declarative_api.html#sqlalchemy.ext.declarative.AbstractConcreteBase" title="sqlalchemy.ext.declarative.AbstractConcreteBase"><code class="xref py py-class docutils literal"><span class="pre">AbstractConcreteBase</span></code></a> base class will now be configured on the abstract base mapping automatically, in addition to being set up on descendant concrete classes as usual.</span></p><div class="admonition seealso"><p class="first admonition-title"><span class="yiyi-st" id="yiyi-1109">&#x4E5F;&#x53EF;&#x4EE5;&#x770B;&#x770B;</span></p><p class="last"><span class="yiyi-st" id="yiyi-1110"><a class="reference internal" href="migration_10.html#feature-3150"><span>Improvements to declarative mixins, @declared_attr and related features</span></a></span></p></div><span class="yiyi-st" id="yiyi-1112"> <a class="changeset-link headerlink reference internal" href="#change-51f59e6c6a8a87ad61d8e37d86ecd144">&#xB6;</a></span><p><span class="yiyi-st" id="yiyi-1111">&#x53C2;&#x8003;&#x6587;&#x732E;&#xFF1A;<a class="reference external" href="http://www.sqlalchemy.org/trac/ticket/2670">&#xFF03;2670</a></span></p></li></ul></div><div class="section" id="change-1.0.0b1-engine"><h3><span class="yiyi-st" id="yiyi-1113">&#x53D1;&#x52A8;&#x673A;<a class="headerlink" href="#change-1.0.0b1-engine" title="Permalink to this headline">&#xB6; T0&gt;</a></span></h3><ul class="simple"><li><p id="change-1.0.0b1-69"><span class="yiyi-st" id="yiyi-1114"><span class="target" id="change-c5f37fab842327e43b9fdbd6c63bb80c"><strong>[engine] [feature] </strong></span>&#x589E;&#x52A0;&#x4E86;&#x7528;&#x4E8E;&#x67E5;&#x770B;&#x4E8B;&#x52A1;&#x9694;&#x79BB;&#x7EA7;&#x522B;&#x7684;&#x65B0;&#x7528;&#x6237;&#x7A7A;&#x95F4;&#x8BBF;&#x95EE;&#x5668;&#xFF1B; <a class="reference internal" href="core_connections.html#sqlalchemy.engine.Connection.get_isolation_level" title="sqlalchemy.engine.Connection.get_isolation_level"><code class="xref py py-meth docutils literal"><span class="pre">Connection.get_isolation_level()</span></code></a>&#xFF0C;<a class="reference internal" href="core_connections.html#sqlalchemy.engine.Connection.default_isolation_level" title="sqlalchemy.engine.Connection.default_isolation_level"><code class="xref py py-attr docutils literal"><span class="pre">Connection.default_isolation_level</span></code></a>&#x3002;<a class="changeset-link headerlink reference internal" href="#change-c5f37fab842327e43b9fdbd6c63bb80c">&#xB6;</a></span></p><p><span class="yiyi-st" id="yiyi-1115">&#x8FD9;&#x4E2A;&#x6539;&#x53D8;&#x4E5F;&#x88AB;<strong>backported</strong>&#x6539;&#x4E3A;&#xFF1A;0.9.9</span></p><p></p></li><li><p id="change-1.0.0b1-70"><span class="yiyi-st" id="yiyi-1116"><span class="target" id="change-ce4694f9946ff09e6367694b4c41ac6f"><strong>[engine] [feature] </strong></span>Added new event <a class="reference internal" href="core_events.html#sqlalchemy.events.ConnectionEvents.handle_error" title="sqlalchemy.events.ConnectionEvents.handle_error"><code class="xref py py-meth docutils literal"><span class="pre">ConnectionEvents.handle_error()</span></code></a>, a more fully featured and comprehensive replacement for <a class="reference internal" href="core_events.html#sqlalchemy.events.ConnectionEvents.dbapi_error" title="sqlalchemy.events.ConnectionEvents.dbapi_error"><code class="xref py py-meth docutils literal"><span class="pre">ConnectionEvents.dbapi_error()</span></code></a>.<a class="changeset-link headerlink reference internal" href="#change-ce4694f9946ff09e6367694b4c41ac6f">&#xB6;</a></span></p><p><span class="yiyi-st" id="yiyi-1117">&#x8FD9;&#x4E2A;&#x6539;&#x53D8;&#x4E5F;&#x88AB;<strong>backported</strong>&#x6539;&#x4E3A;&#xFF1A;0.9.7</span></p><p><span class="yiyi-st" id="yiyi-1118">&#x53C2;&#x8003;&#x6587;&#x732E;&#xFF1A;<a class="reference external" href="http://www.sqlalchemy.org/trac/ticket/3076">&#xFF03;3076</a></span></p></li><li><p id="change-1.0.0b1-71"><span class="yiyi-st" id="yiyi-1119"><span class="target" id="change-bec11487773ec538543ddd3dac610199"><strong>[engine] [feature] </strong></span>&#x53EF;&#x4EE5;&#x53D1;&#x51FA;&#x4E00;&#x79CD;&#x65B0;&#x7684;&#x8B66;&#x544A;&#x6837;&#x5F0F;&#xFF0C;&#x5B83;&#x5C06;&#x201C;&#x8FC7;&#x6EE4;&#x201D;&#x51FA;&#x73B0;N&#x6B21;&#x53C2;&#x6570;&#x5316;&#x5B57;&#x7B26;&#x4E32;&#x3002;</span><span class="yiyi-st" id="yiyi-1120">&#x8FD9;&#x5141;&#x8BB8;&#x53EF;&#x4EE5;&#x5F15;&#x7528;&#x53C2;&#x6570;&#x7684;&#x53C2;&#x6570;&#x5316;&#x8B66;&#x544A;&#x88AB;&#x4F20;&#x9012;&#x56FA;&#x5B9A;&#x6B21;&#x6570;&#xFF0C;&#x76F4;&#x5230;&#x5141;&#x8BB8;Python&#x8B66;&#x544A;&#x8FC7;&#x6EE4;&#x5668;&#x538B;&#x5236;&#x5B83;&#x4EEC;&#xFF0C;&#x5E76;&#x4E14;&#x9632;&#x6B62;&#x5185;&#x5B58;&#x5728;Python&#x7684;&#x8B66;&#x544A;&#x6CE8;&#x518C;&#x8868;&#x4E2D;&#x65E0;&#x9650;&#x589E;&#x957F;&#x3002;</span></p><div class="admonition seealso"><p class="first admonition-title"><span class="yiyi-st" id="yiyi-1121">&#x4E5F;&#x53EF;&#x4EE5;&#x770B;&#x770B;</span></p><p class="last"><span class="yiyi-st" id="yiyi-1122"><a class="reference internal" href="migration_10.html#feature-3178"><span>Session.get_bind() handles a wider variety of inheritance scenarios</span></a></span></p></div><span class="yiyi-st" id="yiyi-1124"> <a class="changeset-link headerlink reference internal" href="#change-bec11487773ec538543ddd3dac610199">&#xB6;</a></span><p><span class="yiyi-st" id="yiyi-1123">&#x53C2;&#x8003;&#x6587;&#x732E;&#xFF1A;<a class="reference external" href="http://www.sqlalchemy.org/trac/ticket/3178">&#xFF03;3178</a></span></p></li><li><p id="change-1.0.0b1-72"><span class="yiyi-st" id="yiyi-1125"><span class="target" id="change-1cbe7376cc9712fd0fa0633c798b04b5"><strong>[engine] [bug] </strong></span>Fixed bug in <a class="reference internal" href="core_connections.html#sqlalchemy.engine.Connection" title="sqlalchemy.engine.Connection"><code class="xref py py-class docutils literal"><span class="pre">Connection</span></code></a> and pool where the <a class="reference internal" href="core_connections.html#sqlalchemy.engine.Connection.invalidate" title="sqlalchemy.engine.Connection.invalidate"><code class="xref py py-meth docutils literal"><span class="pre">Connection.invalidate()</span></code></a> method, or an invalidation due to a database disconnect, would fail if the <code class="docutils literal"><span class="pre">isolation_level</span></code> parameter had been used with <a class="reference internal" href="core_connections.html#sqlalchemy.engine.Connection.execution_options" title="sqlalchemy.engine.Connection.execution_options"><code class="xref py py-meth docutils literal"><span class="pre">Connection.execution_options()</span></code></a>; the &#x201C;finalizer&#x201D; that resets the isolation level would be called on the no longer opened connection.<a class="changeset-link headerlink reference internal" href="#change-1cbe7376cc9712fd0fa0633c798b04b5">&#xB6;</a></span></p><p><span class="yiyi-st" id="yiyi-1126">&#x8FD9;&#x4E2A;&#x6539;&#x53D8;&#x4E5F;&#x88AB;<strong>backported</strong>&#x6539;&#x4E3A;&#xFF1A;0.9.9</span></p><p><span class="yiyi-st" id="yiyi-1127">&#x53C2;&#x8003;&#x6587;&#x732E;&#xFF1A;<a class="reference external" href="http://www.sqlalchemy.org/trac/ticket/3302">&#xFF03;3302</a></span></p></li><li><p id="change-1.0.0b1-73"><span class="yiyi-st" id="yiyi-1128"><span class="target" id="change-35e91e4cf37ed9f5f5338f624ccfac94"><strong>[engine] [bug] </strong></span>A warning is emitted if the <code class="docutils literal"><span class="pre">isolation_level</span></code> parameter is used with <a class="reference internal" href="core_connections.html#sqlalchemy.engine.Connection.execution_options" title="sqlalchemy.engine.Connection.execution_options"><code class="xref py py-meth docutils literal"><span class="pre">Connection.execution_options()</span></code></a> when a <a class="reference internal" href="core_connections.html#sqlalchemy.engine.Transaction" title="sqlalchemy.engine.Transaction"><code class="xref py py-class docutils literal"><span class="pre">Transaction</span></code></a> is in play; DBAPIs and/or SQLAlchemy dialects such as psycopg2, MySQLdb may implicitly rollback or commit the transaction, or not change the setting til next transaction, so this is never safe.<a class="changeset-link headerlink reference internal" href="#change-35e91e4cf37ed9f5f5338f624ccfac94">&#xB6;</a></span></p><p><span class="yiyi-st" id="yiyi-1129">&#x8FD9;&#x4E2A;&#x6539;&#x53D8;&#x4E5F;&#x88AB;<strong>backported</strong>&#x6539;&#x4E3A;&#xFF1A;0.9.9</span></p><p><span class="yiyi-st" id="yiyi-1130">&#x53C2;&#x8003;&#x6587;&#x732E;&#xFF1A;<a class="reference external" href="http://www.sqlalchemy.org/trac/ticket/3296">&#xFF03;3296</a></span></p></li><li><p id="change-1.0.0b1-74"><span class="yiyi-st" id="yiyi-1131"><span class="target" id="change-d3615ec97e4cb3d677b23aae37c5f9a1"><strong>[engine] [bug] </strong></span>The execution options passed to an <a class="reference internal" href="core_connections.html#sqlalchemy.engine.Engine" title="sqlalchemy.engine.Engine"><code class="xref py py-class docutils literal"><span class="pre">Engine</span></code></a> either via <a class="reference internal" href="core_engines.html#sqlalchemy.create_engine.params.execution_options" title="sqlalchemy.create_engine"><code class="xref py py-paramref docutils literal"><span class="pre">create_engine.execution_options</span></code></a> or <a class="reference internal" href="core_connections.html#sqlalchemy.engine.Engine.update_execution_options" title="sqlalchemy.engine.Engine.update_execution_options"><code class="xref py py-meth docutils literal"><span class="pre">Engine.update_execution_options()</span></code></a> are not passed to the special <a class="reference internal" href="core_connections.html#sqlalchemy.engine.Connection" title="sqlalchemy.engine.Connection"><code class="xref py py-class docutils literal"><span class="pre">Connection</span></code></a> used to initialize the dialect within the &#x201C;first connect&#x201D; event; dialects will usually perform their own queries in this phase, and none of the current available options should be applied here. </span><span class="yiyi-st" id="yiyi-1132">&#x7279;&#x522B;&#x662F;&#xFF0C;&#x201C;&#x81EA;&#x52A8;&#x63D0;&#x4EA4;&#x201D;&#x9009;&#x9879;&#x4F1A;&#x5BFC;&#x81F4;&#x5C1D;&#x8BD5;&#x5728;&#x6B64;&#x521D;&#x59CB;&#x8FDE;&#x63A5;&#x4E2D;&#x81EA;&#x52A8;&#x63D0;&#x4EA4;&#xFF0C;&#x7531;&#x4E8E;<a class="reference internal" href="core_connections.html#sqlalchemy.engine.Connection" title="sqlalchemy.engine.Connection"><code class="xref py py-class docutils literal"><span class="pre">Connection</span></code></a>&#x7684;&#x975E;&#x6807;&#x51C6;&#x72B6;&#x6001;&#xFF0C;&#x8BE5;&#x9009;&#x9879;&#x5C06;&#x56E0;AttributeError&#x5931;&#x8D25;&#x3002;<a class="changeset-link headerlink reference internal" href="#change-d3615ec97e4cb3d677b23aae37c5f9a1">&#xB6;</a></span></p><p><span class="yiyi-st" id="yiyi-1133">&#x8FD9;&#x4E2A;&#x6539;&#x53D8;&#x4E5F;&#x662F;<strong>backported</strong>&#x6539;&#x4E3A;&#xFF1A;0.9.8</span></p><p><span class="yiyi-st" id="yiyi-1134">&#x53C2;&#x8003;&#x6587;&#x732E;&#xFF1A;<a class="reference external" href="http://www.sqlalchemy.org/trac/ticket/3200">&#xFF03;3200</a></span></p></li><li><p id="change-1.0.0b1-75"><span class="yiyi-st" id="yiyi-1135"><span class="target" id="change-17ea7031c46ba798ed90caf31a4ec215"><strong>[engine] [bug] </strong></span>&#x7528;&#x4E8E;&#x786E;&#x5B9A;&#x53D7;INSERT&#x6216;UPDATE&#x5F71;&#x54CD;&#x7684;&#x5217;&#x7684;&#x5B57;&#x7B26;&#x4E32;&#x952E;&#x73B0;&#x5728;&#x5728;&#x5BF9;&#x201C;&#x7F16;&#x8BD1;&#x7F13;&#x5B58;&#x201D;&#x7F13;&#x5B58;&#x952E;&#x4F5C;&#x51FA;&#x8D21;&#x732E;&#x65F6;&#x88AB;&#x6392;&#x5E8F;&#x3002;</span><span class="yiyi-st" id="yiyi-1136">&#x8FD9;&#x4E9B;&#x952E;&#x4EE5;&#x524D;&#x6CA1;&#x6709;&#x786E;&#x5B9A;&#x6027;&#x5730;&#x6392;&#x5E8F;&#xFF0C;&#x8FD9;&#x610F;&#x5473;&#x7740;&#x76F8;&#x540C;&#x7684;&#x8BED;&#x53E5;&#x53EF;&#x4EE5;&#x5728;&#x76F8;&#x540C;&#x7684;&#x952E;&#x4E0A;&#x591A;&#x6B21;&#x7F13;&#x5B58;&#xFF0C;&#x4ECE;&#x5185;&#x5B58;&#x548C;&#x6027;&#x80FD;&#x4E24;&#x4E2A;&#x65B9;&#x9762;&#x6765;&#x8BF4;&#x90FD;&#x662F;&#x8FD9;&#x6837;&#x3002;<a class="changeset-link headerlink reference internal" href="#change-17ea7031c46ba798ed90caf31a4ec215">&#xB6;</a></span></p><p><span class="yiyi-st" id="yiyi-1137">&#x8FD9;&#x4E2A;&#x6539;&#x53D8;&#x4E5F;&#x662F;<strong>backported</strong>&#x6539;&#x4E3A;&#xFF1A;0.9.8</span></p><p><span class="yiyi-st" id="yiyi-1138">&#x53C2;&#x8003;&#x6587;&#x732E;&#xFF1A;<a class="reference external" href="http://www.sqlalchemy.org/trac/ticket/3165">&#xFF03;3165</a></span></p></li><li><p id="change-1.0.0b1-76"><span class="yiyi-st" id="yiyi-1139"><span class="target" id="change-61f8e288cabf0d93da08c5bf8b0da4f5"><strong>[engine] [bug] </strong></span>Fixed bug which would occur if a DBAPI exception occurs when the engine first connects and does its initial checks, and the exception is not a disconnect exception, yet the cursor raises an error when we try to close it. </span><span class="yiyi-st" id="yiyi-1140">&#x5728;&#x8FD9;&#x79CD;&#x60C5;&#x51B5;&#x4E0B;&#xFF0C;&#x5F53;&#x6211;&#x4EEC;&#x8BD5;&#x56FE;&#x901A;&#x8FC7;&#x8FDE;&#x63A5;&#x6C60;&#x8BB0;&#x5F55;&#x6E38;&#x6807;&#x5173;&#x95ED;&#x5F02;&#x5E38;&#x5E76;&#x4E14;&#x5931;&#x8D25;&#x65F6;&#xFF0C;&#x771F;&#x6B63;&#x7684;&#x5F02;&#x5E38;&#x5C06;&#x88AB;&#x5E9F;&#x9664;&#xFF0C;&#x56E0;&#x4E3A;&#x6211;&#x4EEC;&#x8BD5;&#x56FE;&#x4EE5;&#x5728;&#x8FD9;&#x79CD;&#x7279;&#x5B9A;&#x60C5;&#x51B5;&#x4E0B;&#x4E0D;&#x5408;&#x9002;&#x7684;&#x65B9;&#x5F0F;&#x8BBF;&#x95EE;&#x6C60;&#x7684;&#x8BB0;&#x5F55;&#x5668;&#x3002;<a class="changeset-link headerlink reference internal" href="#change-61f8e288cabf0d93da08c5bf8b0da4f5"> T0&gt;</a></span></p><p><span class="yiyi-st" id="yiyi-1141">&#x8FD9;&#x4E2A;&#x6539;&#x53D8;&#x4E5F;&#x88AB;<strong>backported</strong>&#x6539;&#x4E3A;&#xFF1A;0.9.5</span></p><p><span class="yiyi-st" id="yiyi-1142">&#x53C2;&#x8003;&#x6587;&#x732E;&#xFF1A;<a class="reference external" href="http://www.sqlalchemy.org/trac/ticket/3063">&#xFF03;3063</a></span></p></li><li><p id="change-1.0.0b1-77"><span class="yiyi-st" id="yiyi-1143"><span class="target" id="change-b3e19fc9b61e48ed28a2d41b53aa789b"><strong>[engine] [bug] </strong></span>Fixed some &#x201C;double invalidate&#x201D; situations were detected where a connection invalidation could occur within an already critical section like a connection.close(); ultimately, these conditions are caused by the change in <a class="reference external" href="http://www.sqlalchemy.org/trac/ticket/2907">#2907</a>, in that the &#x201C;reset on return&#x201D; feature calls out to the Connection/Transaction in order to handle it, where &#x201C;disconnect detection&#x201D; might be caught. </span><span class="yiyi-st" id="yiyi-1144">&#x7136;&#x800C;&#xFF0C;<a class="reference external" href="http://www.sqlalchemy.org/trac/ticket/2985">&#xFF03;2985</a>&#x4E2D;&#x6700;&#x8FD1;&#x53D1;&#x751F;&#x7684;&#x53D8;&#x5316;&#x53EF;&#x80FD;&#x4F1A;&#x5BFC;&#x81F4;&#x8FD9;&#x79CD;&#x60C5;&#x51B5;&#x51FA;&#x73B0;&#xFF0C;&#x56E0;&#x4E3A;&#x201C;&#x8FDE;&#x63A5;&#x65E0;&#x6548;&#x201D;&#x64CD;&#x4F5C;&#x7684;&#x901F;&#x5EA6;&#x66F4;&#x5FEB;&#xFF0C;&#x56E0;&#x4E3A;&#x95EE;&#x9898;&#x5728;0.9.4&#x4E0A;&#x7684;&#x53EF;&#x91CD;&#x590D;&#x6027;&#x9AD8;&#x4E8E;0.9.3&#x3002;</span></p><p><span class="yiyi-st" id="yiyi-1145">&#x73B0;&#x5728;&#x5728;&#x4EFB;&#x4F55;&#x53EF;&#x80FD;&#x51FA;&#x73B0;&#x5931;&#x6548;&#x7684;&#x90E8;&#x5206;&#x6DFB;&#x52A0;&#x68C0;&#x67E5;&#xFF0C;&#x4EE5;&#x6682;&#x505C;&#x5BF9;&#x5931;&#x6548;&#x7684;&#x8FDE;&#x63A5;&#x8FDB;&#x4E00;&#x6B65;&#x7981;&#x6B62;&#x7684;&#x64CD;&#x4F5C;&#x3002;</span><span class="yiyi-st" id="yiyi-1146">&#x8FD9;&#x5305;&#x62EC;&#x5728;&#x5F15;&#x64CE;&#x7EA7;&#x522B;&#x548C;&#x6C60;&#x7EA7;&#x522B;&#x7684;&#x4E24;&#x4E2A;&#x4FEE;&#x8865;&#x7A0B;&#x5E8F;&#x3002;</span><span class="yiyi-st" id="yiyi-1147">&#x867D;&#x7136;&#x5728;&#x9AD8;&#x5EA6;&#x5E76;&#x53D1;&#x7684;&#x57FA;&#x56E0;&#x4E8B;&#x4EF6;&#x4E2D;&#x89C2;&#x5BDF;&#x5230;&#x8FD9;&#x4E2A;&#x95EE;&#x9898;&#xFF0C;&#x4F46;&#x7406;&#x8BBA;&#x4E0A;&#x53EF;&#x4EE5;&#x53D1;&#x751F;&#x5728;&#x8FDE;&#x63A5;&#x5173;&#x95ED;&#x64CD;&#x4F5C;&#x5185;&#x53D1;&#x751F;&#x65AD;&#x5F00;&#x8FDE;&#x63A5;&#x7684;&#x4EFB;&#x4F55;&#x60C5;&#x51B5;&#x4E0B;&#x3002;</span></p><span class="yiyi-st" id="yiyi-1150"> <a class="changeset-link headerlink reference internal" href="#change-b3e19fc9b61e48ed28a2d41b53aa789b">&#xB6;</a></span><p><span class="yiyi-st" id="yiyi-1148">&#x8FD9;&#x4E2A;&#x6539;&#x53D8;&#x4E5F;&#x88AB;<strong>backported</strong>&#x6539;&#x4E3A;&#xFF1A;0.9.5</span></p><p><span class="yiyi-st" id="yiyi-1149">&#x53C2;&#x8003;&#x6587;&#x732E;&#xFF1A;<a class="reference external" href="http://www.sqlalchemy.org/trac/ticket/3043">&#xFF03;3043</a></span></p></li><li><p id="change-1.0.0b1-78"><span class="yiyi-st" id="yiyi-1151"><span class="target" id="change-305888802341ee5b5704384fe2d5d5df"><strong>[engine] [bug] </strong></span>The engine-level error handling and wrapping routines will now take effect in all engine connection use cases, including when user-custom connect routines are used via the <a class="reference internal" href="core_engines.html#sqlalchemy.create_engine.params.creator" title="sqlalchemy.create_engine"><code class="xref py py-paramref docutils literal"><span class="pre">create_engine.creator</span></code></a> parameter, as well as when the <a class="reference internal" href="core_connections.html#sqlalchemy.engine.Connection" title="sqlalchemy.engine.Connection"><code class="xref py py-class docutils literal"><span class="pre">Connection</span></code></a> encounters a connection error on revalidation.</span></p><div class="admonition seealso"><p class="first admonition-title"><span class="yiyi-st" id="yiyi-1152">&#x4E5F;&#x53EF;&#x4EE5;&#x770B;&#x770B;</span></p><p class="last"><span class="yiyi-st" id="yiyi-1153"><a class="reference internal" href="migration_10.html#change-3266"><span>DBAPI exception wrapping and handle_error() event improvements</span></a></span></p></div><span class="yiyi-st" id="yiyi-1155"> <a class="changeset-link headerlink reference internal" href="#change-305888802341ee5b5704384fe2d5d5df">&#xB6;</a></span><p><span class="yiyi-st" id="yiyi-1154">&#x53C2;&#x8003;&#x6587;&#x732E;&#xFF1A;<a class="reference external" href="http://www.sqlalchemy.org/trac/ticket/3266">&#xFF03;3266</a></span></p></li><li><p id="change-1.0.0b1-79"><span class="yiyi-st" id="yiyi-1156"><span class="target" id="change-f9df77c38b48404825304dd1b5099cbc"><strong>[engine] [bug] </strong></span>&#x5728;&#x4E8B;&#x4EF6;&#x6B63;&#x5728;&#x81EA;&#x5DF1;&#x8FD0;&#x884C;&#x7684;&#x540C;&#x65F6;&#xFF0C;&#x4ECE;&#x4FA6;&#x542C;&#x5668;&#x5185;&#x90E8;&#x6216;&#x5E76;&#x53D1;&#x7EBF;&#x7A0B;&#x4E2D;&#x79FB;&#x9664;&#xFF08;&#x6216;&#x6DFB;&#x52A0;&#xFF09;&#x4E8B;&#x4EF6;&#x4FA6;&#x542C;&#x5668;&#xFF0C;&#x73B0;&#x5728;&#x4F1A;&#x5F15;&#x53D1;RuntimeError&#xFF0C;&#x5982;&#x6240;&#x4F7F;&#x7528;&#x7684;&#x96C6;&#x5408;&#x73B0;&#x5728;&#x662F;<code class="docutils literal"><span class="pre">colletions.deque()</span></code>&#x7684;&#x4E00;&#x4E2A;&#x5B9E;&#x4F8B;&#xFF0C;&#x5E76;&#x4E14;&#x5728;&#x8FED;&#x4EE3;&#x65F6;&#x4E0D;&#x652F;&#x6301;&#x66F4;&#x6539;&#x3002;</span><span class="yiyi-st" id="yiyi-1157">&#x4EE5;&#x524D;&#xFF0C;&#x4F7F;&#x7528;&#x666E;&#x901A;&#x7684;Python&#x5217;&#x8868;&#x4ECE;&#x4E8B;&#x4EF6;&#x672C;&#x8EAB;&#x4E2D;&#x5220;&#x9664;&#x4F1A;&#x4EA7;&#x751F;&#x6C89;&#x9ED8;&#x5931;&#x8D25;&#x3002;<a class="changeset-link headerlink reference internal" href="#change-f9df77c38b48404825304dd1b5099cbc">&#xB6;</a></span></p><p><span class="yiyi-st" id="yiyi-1158">&#x53C2;&#x8003;&#x6587;&#x732E;&#xFF1A;<a class="reference external" href="http://www.sqlalchemy.org/trac/ticket/3163">&#xFF03;3163</a></span></p></li></ul></div><div class="section" id="change-1.0.0b1-sql"><h3><span class="yiyi-st" id="yiyi-1159">SQL <a class="headerlink" href="#change-1.0.0b1-sql" title="Permalink to this headline">&#xB6; T0&gt;</a></span></h3><ul class="simple"><li><p id="change-1.0.0b1-80"><span class="yiyi-st" id="yiyi-1160"><span class="target" id="change-553972af1791bce62b6e70a2b4b58c62"><strong>[sql] [feature] </strong></span>&#x7A0D;&#x5FAE;&#x653E;&#x5BBD;&#x4E86;<a class="reference internal" href="core_constraints.html#sqlalchemy.schema.Index" title="sqlalchemy.schema.Index"><code class="xref py py-class docutils literal"><span class="pre">Index</span></code></a>&#x7684;&#x5951;&#x7EA6;&#xFF0C;&#x56E0;&#x4E3A;&#x60A8;&#x53EF;&#x4EE5;&#x6307;&#x5B9A;&#x4E00;&#x4E2A;<a class="reference internal" href="core_sqlelement.html#sqlalchemy.sql.expression.text" title="sqlalchemy.sql.expression.text"><code class="xref py py-func docutils literal"><span class="pre">text()</span></code></a>&#x8868;&#x8FBE;&#x5F0F;&#x4F5C;&#x4E3A;&#x76EE;&#x6807;&#xFF1B;&#x5982;&#x679C;&#x8981;&#x901A;&#x8FC7;&#x5185;&#x8054;&#x58F0;&#x660E;&#x6216;&#x901A;&#x8FC7;<a class="reference internal" href="core_metadata.html#sqlalchemy.schema.Table.append_constraint" title="sqlalchemy.schema.Table.append_constraint"><code class="xref py py-meth docutils literal"><span class="pre">Table.append_constraint()</span></code></a>&#x5C06;&#x7D22;&#x5F15;&#x624B;&#x52A8;&#x6DFB;&#x52A0;&#x5230;&#x8868;&#x4E2D;&#xFF0C;&#x5219;&#x7D22;&#x5F15;&#x4E0D;&#x518D;&#x9700;&#x8981;&#x5B58;&#x5728;&#x8868;&#x683C;&#x7ED1;&#x5B9A;&#x5217;&#x3002;<a class="changeset-link headerlink reference internal" href="#change-553972af1791bce62b6e70a2b4b58c62"> T11&gt;</a></span></p><p><span class="yiyi-st" id="yiyi-1161">&#x8FD9;&#x4E2A;&#x6539;&#x53D8;&#x4E5F;&#x88AB;<strong>backported</strong>&#x6539;&#x4E3A;&#xFF1A;0.9.5</span></p><p><span class="yiyi-st" id="yiyi-1162">&#x53C2;&#x8003;&#x6587;&#x732E;&#xFF1A;<a class="reference external" href="http://www.sqlalchemy.org/trac/ticket/3028">&#xFF03;3028</a></span></p></li><li><p id="change-1.0.0b1-81"><span class="yiyi-st" id="yiyi-1163"><span class="target" id="change-02c788316ab5dac725919f22d513af61"><strong>[sql] [feature] </strong></span>Added new flag <a class="reference internal" href="core_sqlelement.html#sqlalchemy.sql.expression.between.params.symmetric" title="sqlalchemy.sql.expression.between"><code class="xref py py-paramref docutils literal"><span class="pre">expression.between.symmetric</span></code></a>, when set to True renders &#x201C;BETWEEN SYMMETRIC&#x201D;. </span><span class="yiyi-st" id="yiyi-1164">&#x8FD8;&#x6DFB;&#x52A0;&#x4E86;&#x4E00;&#x4E2A;&#x65B0;&#x7684;&#x5426;&#x5B9A;&#x8FD0;&#x7B97;&#x7B26;&#x201C;notbetween_op&#x201D;&#xFF0C;&#x8BE5;&#x8FD0;&#x7B97;&#x7B26;&#x73B0;&#x5728;&#x5141;&#x8BB8;&#x50CF;<code class="docutils literal"><span class="pre">&#x301C;col.between&#xFF08;x&#xFF0C;</span> <span class="pre">y&#xFF09;</span></code>&#x8FD9;&#x6837;&#x7684;&#x8868;&#x8FBE;&#x5F0F;&#x5448;&#x73B0;&#x4E3A;&#x201C; col NOT BETWEEN x AND y&#x201C;&#xFF0C;&#x800C;&#x4E0D;&#x662F;&#x4E00;&#x4E2A;&#x5E26;&#x62EC;&#x53F7;&#x7684;NOT&#x5B57;&#x7B26;&#x4E32;&#x3002;<a class="changeset-link headerlink reference internal" href="#change-02c788316ab5dac725919f22d513af61">&#xB6;</a></span></p><p><span class="yiyi-st" id="yiyi-1165">&#x8FD9;&#x4E2A;&#x6539;&#x53D8;&#x4E5F;&#x88AB;<strong>backported</strong>&#x6539;&#x4E3A;&#xFF1A;0.9.5</span></p><p><span class="yiyi-st" id="yiyi-1166">&#x53C2;&#x8003;&#x6587;&#x732E;&#xFF1A;<a class="reference external" href="http://www.sqlalchemy.org/trac/ticket/2990">&#xFF03;2990</a></span></p></li><li><p id="change-1.0.0b1-82"><span class="yiyi-st" id="yiyi-1167"><span class="target" id="change-8f6d04c8049c045718d8b2c153efd641"><strong>[sql] [feature] </strong></span>The SQL compiler now generates the mapping of expected columns such that they are matched to the received result set positionally, rather than by name. </span><span class="yiyi-st" id="yiyi-1168">&#x6700;&#x521D;&#xFF0C;&#x8FD9;&#x88AB;&#x89C6;&#x4E3A;&#x4E00;&#x79CD;&#x5904;&#x7406;&#x6211;&#x4EEC;&#x7684;&#x5217;&#x8FD4;&#x56DE;&#x4E86;&#x96BE;&#x4EE5;&#x9884;&#x6D4B;&#x7684;&#x540D;&#x79F0;&#x7684;&#x6848;&#x4F8B;&#xFF0C;&#x5C3D;&#x7BA1;&#x5728;&#x73B0;&#x4EE3;&#x4F7F;&#x7528;&#x4E2D;&#x8FD9;&#x4E2A;&#x95EE;&#x9898;&#x5DF2;&#x7ECF;&#x88AB;&#x533F;&#x540D;&#x6807;&#x7B7E;&#x514B;&#x670D;&#x3002;</span><span class="yiyi-st" id="yiyi-1169">&#x5728;&#x8FD9;&#x4E2A;&#x7248;&#x672C;&#x4E2D;&#xFF0C;&#x8BE5;&#x65B9;&#x6CD5;&#x57FA;&#x672C;&#x4E0A;&#x901A;&#x8FC7;&#x51E0;&#x5341;&#x6B21;&#x8C03;&#x7528;&#x51CF;&#x5C11;&#x4E86;&#x6BCF;&#x4E2A;&#x7ED3;&#x679C;&#x7684;&#x51FD;&#x6570;&#x8C03;&#x7528;&#x6B21;&#x6570;&#xFF0C;&#x5BF9;&#x4E8E;&#x66F4;&#x5927;&#x7684;&#x7ED3;&#x679C;&#x5217;&#x96C6;&#x5219;&#x66F4;&#x591A;&#x3002;</span><span class="yiyi-st" id="yiyi-1170">&#x5982;&#x679C;&#x5728;&#x7F16;&#x8BD1;&#x7684;&#x5217;&#x96C6;&#x4E0E;&#x63A5;&#x6536;&#x5230;&#x7684;&#x5217;&#x96C6;&#x4E4B;&#x95F4;&#x5B58;&#x5728;&#x4EFB;&#x4F55;&#x5DEE;&#x5F02;&#xFF0C;&#x90A3;&#x4E48;&#x8FD9;&#x79CD;&#x65B9;&#x6CD5;&#x4ECD;&#x7136;&#x4F1A;&#x964D;&#x7EA7;&#x4E3A;&#x73B0;&#x4EE3;&#x7248;&#x672C;&#x7684;&#x65E7;&#x65B9;&#x6CD5;&#xFF0C;&#x56E0;&#x6B64;&#xFF0C;&#x5BF9;&#x4E8E;&#x90E8;&#x5206;&#x6216;&#x5168;&#x90E8;&#x6587;&#x672C;&#x7F16;&#x8BD1;&#x65B9;&#x6848;&#x800C;&#x8A00;&#xFF0C;&#x8FD9;&#x4E9B;&#x5217;&#x8868;&#x53EF;&#x80FD;&#x4E0D;&#x4E00;&#x81F4;&#x65F6;&#x6CA1;&#x6709;&#x95EE;&#x9898;&#x3002;<a class="changeset-link headerlink reference internal" href="#change-8f6d04c8049c045718d8b2c153efd641">&#xB6; T0&gt;</a></span></p><p><span class="yiyi-st" id="yiyi-1171">&#x53C2;&#x8003;&#x6587;&#x732E;&#xFF1A;<a class="reference external" href="http://www.sqlalchemy.org/trac/ticket/918">&#xFF03;918</a></span></p></li><li><p id="change-1.0.0b1-83"><span class="yiyi-st" id="yiyi-1172"><span class="target" id="change-70c132d171b14712cef0e03b38e36176"><strong>[sql] [feature] </strong></span>&#x4F7F;&#x7528;<a class="reference internal" href="core_metadata.html#sqlalchemy.schema.Column.params.server_default" title="sqlalchemy.schema.Column"><code class="xref py py-paramref docutils literal"><span class="pre">Column.server_default</span></code></a>&#x53C2;&#x6570;&#x8C03;&#x7528;&#x7684;<a class="reference internal" href="core_defaults.html#sqlalchemy.schema.DefaultClause" title="sqlalchemy.schema.DefaultClause"><code class="xref py py-class docutils literal"><span class="pre">DefaultClause</span></code></a>&#x4E2D;&#x7684;&#x6587;&#x5B57;&#x503C;&#x73B0;&#x5728;&#x5C06;&#x4F7F;&#x7528;&#x201C;&#x5185;&#x8054;&#x201D;&#x7F16;&#x8BD1;&#x5668;&#xFF0C;&#x4EE5;&#x4FBF;&#x5B83;&#x4EEC;&#x6309;&#x539F;&#x6837;&#x5448;&#x73B0;&#xFF0C;&#x800C;&#x4E0D;&#x662F;&#x4F5C;&#x4E3A;&#x7ED1;&#x5B9A;&#x53C2;&#x6570;&#x3002;</span></p><div class="admonition seealso"><p class="first admonition-title"><span class="yiyi-st" id="yiyi-1173">&#x4E5F;&#x53EF;&#x4EE5;&#x770B;&#x770B;</span></p><p class="last"><span class="yiyi-st" id="yiyi-1174"><a class="reference internal" href="migration_10.html#change-3087"><span>Column server defaults now render literal values</span></a></span></p></div><span class="yiyi-st" id="yiyi-1176"> <a class="changeset-link headerlink reference internal" href="#change-70c132d171b14712cef0e03b38e36176">&#xB6;</a></span><p><span class="yiyi-st" id="yiyi-1175">&#x53C2;&#x8003;&#x6587;&#x732E;&#xFF1A;<a class="reference external" href="http://www.sqlalchemy.org/trac/ticket/3087">&#xFF03;3087</a></span></p></li><li><p id="change-1.0.0b1-84"><span class="yiyi-st" id="yiyi-1177"><span class="target" id="change-0d5ede096a0fc28dba2ae3cc966f7ce4"><strong>[sql] [feature] </strong></span>&#x4F20;&#x9012;&#x7ED9;SQL&#x8868;&#x8FBE;&#x5F0F;&#x5355;&#x5143;&#x7684;&#x5BF9;&#x8C61;&#x4E0D;&#x80FD;&#x88AB;&#x89E3;&#x91CA;&#x4E3A;SQL&#x7247;&#x6BB5;&#x65F6;&#xFF0C;&#x62A5;&#x544A;&#x8868;&#x8FBE;&#x5F0F;&#x7684;&#x7C7B;&#x578B;&#xFF1B;&#x8BF7;&#x6C42;&#x793C;&#x8C8C;Ryan P. Kelly&#x3002;<a class="changeset-link headerlink reference internal" href="#change-0d5ede096a0fc28dba2ae3cc966f7ce4">&#xB6;</a></span></p><p><span class="yiyi-st" id="yiyi-1178">&#x53C2;&#x8003;&#x6587;&#x732E;&#xFF1A;<a class="reference external" href="https://github.com/zzzeek/sqlalchemy/pull/150">&#x8BF7;&#x6C42;github&#xFF1A;150</a></span></p></li><li><p id="change-1.0.0b1-85"><span class="yiyi-st" id="yiyi-1179"><span class="target" id="change-ec77f5fb7c2ec01c645e9f8d9b4832b8"><strong>[sql] [feature] </strong></span>&#x4E3A;<a class="reference internal" href="core_metadata.html#sqlalchemy.schema.Table.tometadata" title="sqlalchemy.schema.Table.tometadata"><code class="xref py py-meth docutils literal"><span class="pre">Table.tometadata()</span></code></a>&#x65B9;&#x6CD5;&#x6DFB;&#x52A0;&#x4E86;&#x4E00;&#x4E2A;&#x65B0;&#x53C2;&#x6570;<a class="reference internal" href="core_metadata.html#sqlalchemy.schema.Table.tometadata.params.name" title="sqlalchemy.schema.Table.tometadata"><code class="xref py py-paramref docutils literal"><span class="pre">Table.tometadata.name</span></code></a>&#x3002;</span><span class="yiyi-st" id="yiyi-1180">&#x4E0E;<a class="reference internal" href="core_metadata.html#sqlalchemy.schema.Table.tometadata.params.schema" title="sqlalchemy.schema.Table.tometadata"><code class="xref py py-paramref docutils literal"><span class="pre">Table.tometadata.schema</span></code></a>&#x7C7B;&#x4F3C;&#xFF0C;&#x6B64;&#x53C2;&#x6570;&#x4F1A;&#x4F7F;&#x65B0;&#x590D;&#x5236;&#x7684;<a class="reference internal" href="core_metadata.html#sqlalchemy.schema.Table" title="sqlalchemy.schema.Table"><code class="xref py py-class docutils literal"><span class="pre">Table</span></code></a>&#x91C7;&#x7528;&#x65B0;&#x540D;&#x79F0;&#x800C;&#x4E0D;&#x662F;&#x73B0;&#x6709;&#x540D;&#x79F0;&#x3002;</span><span class="yiyi-st" id="yiyi-1181">&#x8FD9;&#x589E;&#x52A0;&#x4E86;&#x4E00;&#x4E2A;&#x6709;&#x8DA3;&#x7684;&#x529F;&#x80FD;&#xFF0C;&#x5373;&#x7528;&#x4E00;&#x4E2A;&#x65B0;&#x540D;&#x79F0;&#x5C06;<a class="reference internal" href="core_metadata.html#sqlalchemy.schema.Table" title="sqlalchemy.schema.Table"><code class="xref py py-class docutils literal"><span class="pre">Table</span></code></a>&#x5BF9;&#x8C61;&#x590D;&#x5236;&#x5230;<em>&#x76F8;&#x540C;&#x7684;</em> <a class="reference internal" href="core_metadata.html#sqlalchemy.schema.MetaData" title="sqlalchemy.schema.MetaData"><code class="xref py py-class docutils literal"><span class="pre">MetaData</span></code></a>&#x76EE;&#x6807;&#x3002;</span><span class="yiyi-st" id="yiyi-1182">&#x62C9;&#x63D0;&#x51FA;&#x8BF7;&#x6C42;n.d.&#x5E15;&#x514B;&#x3002;<a class="changeset-link headerlink reference internal" href="#change-ec77f5fb7c2ec01c645e9f8d9b4832b8">&#xB6; T0&gt;</a></span></p><p><span class="yiyi-st" id="yiyi-1183">&#x53C2;&#x8003;&#x6587;&#x732E;&#xFF1A;<a class="reference external" href="https://github.com/zzzeek/sqlalchemy/pull/139">&#x8BF7;&#x6C42;github&#xFF1A;139</a></span></p></li><li><p id="change-1.0.0b1-86"><span class="yiyi-st" id="yiyi-1184"><span class="target" id="change-38450c605d2df954cca91dfb84d0b5de"><strong>[sql] [feature] </strong></span>Exception messages have been spiffed up a bit. </span><span class="yiyi-st" id="yiyi-1185">&#x5982;&#x679C;&#x4E3A;None&#xFF0C;&#x5219;&#x4E0D;&#x663E;&#x793A;SQL&#x8BED;&#x53E5;&#x548C;&#x53C2;&#x6570;&#xFF0C;&#x4ECE;&#x800C;&#x51CF;&#x5C11;&#x4E0E;&#x8BED;&#x53E5;&#x65E0;&#x5173;&#x7684;&#x9519;&#x8BEF;&#x6D88;&#x606F;&#x7684;&#x6DF7;&#x6DC6;&#x3002;</span><span class="yiyi-st" id="yiyi-1186">&#x663E;&#x793A;DBAPI&#x7EA7;&#x522B;&#x5F02;&#x5E38;&#x7684;&#x5B8C;&#x6574;&#x6A21;&#x5757;&#x548C;&#x7C7B;&#x540D;&#xFF0C;&#x6E05;&#x695A;&#x5730;&#x8868;&#x660E;&#x8FD9;&#x662F;&#x4E00;&#x4E2A;&#x5305;&#x88C5;&#x7684;DBAPI&#x5F02;&#x5E38;&#x3002;</span><span class="yiyi-st" id="yiyi-1187">&#x8BED;&#x53E5;&#x548C;&#x53C2;&#x6570;&#x672C;&#x8EAB;&#x88AB;&#x9650;&#x5236;&#x5728;&#x62EC;&#x53F7;&#x5185;&#x7684;&#x90E8;&#x5206;&#xFF0C;&#x4EE5;&#x66F4;&#x597D;&#x5730;&#x5C06;&#x5B83;&#x4EEC;&#x4E0E;&#x9519;&#x8BEF;&#x6D88;&#x606F;&#x548C;&#x76F8;&#x4E92;&#x4E4B;&#x95F4;&#x9694;&#x79BB;&#x3002;<a class="changeset-link headerlink reference internal" href="#change-38450c605d2df954cca91dfb84d0b5de">&#xB6;</a></span></p><p><span class="yiyi-st" id="yiyi-1188">&#x53C2;&#x8003;&#x6587;&#x732E;&#xFF1A;<a class="reference external" href="http://www.sqlalchemy.org/trac/ticket/3172">&#xFF03;3172</a></span></p></li><li><p id="change-1.0.0b1-87"><span class="yiyi-st" id="yiyi-1189"><span class="target" id="change-b54916ee4be6c995b86450e0be4f551a"><strong>[sql] [feature] </strong></span><a class="reference internal" href="core_dml.html#sqlalchemy.sql.expression.Insert.from_select" title="sqlalchemy.sql.expression.Insert.from_select"><code class="xref py py-meth docutils literal"><span class="pre">Insert.from_select()</span></code></a> now includes Python and SQL-expression defaults if otherwise unspecified; the limitation where non- server column defaults aren&#x2019;t included in an INSERT FROM SELECT is now lifted and these expressions are rendered as constants into the SELECT statement.</span></p><div class="admonition seealso"><p class="first admonition-title"><span class="yiyi-st" id="yiyi-1190">&#x4E5F;&#x53EF;&#x4EE5;&#x770B;&#x770B;</span></p><p class="last"><span class="yiyi-st" id="yiyi-1191"><a class="reference internal" href="migration_10.html#feature-insert-from-select-defaults"><span>INSERT FROM SELECT now includes Python and SQL-expression defaults</span></a></span></p></div><span class="yiyi-st" id="yiyi-1192"> <a class="changeset-link headerlink reference internal" href="#change-b54916ee4be6c995b86450e0be4f551a">&#xB6;</a></span><p></p></li><li><p id="change-1.0.0b1-88"><span class="yiyi-st" id="yiyi-1193"><span class="target" id="change-79b21344c66473f22ca547a5bd1db39a"><strong>[sql] [feature] </strong></span>&#x5BF9;&#x4E8E;&#x9002;&#x7528;&#x7684;&#x6570;&#x636E;&#x5E93;&#xFF0C;<a class="reference internal" href="core_constraints.html#sqlalchemy.schema.UniqueConstraint" title="sqlalchemy.schema.UniqueConstraint"><code class="xref py py-class docutils literal"><span class="pre">UniqueConstraint</span></code></a>&#x6784;&#x9020;&#x73B0;&#x5728;&#x5305;&#x542B;&#x5728;&#x53CD;&#x6620;<a class="reference internal" href="core_metadata.html#sqlalchemy.schema.Table" title="sqlalchemy.schema.Table"><code class="xref py py-class docutils literal"><span class="pre">Table</span></code></a>&#x5BF9;&#x8C61;&#x65F6;&#x3002;</span><span class="yiyi-st" id="yiyi-1194">&#x4E3A;&#x4E86;&#x4EE5;&#x8DB3;&#x591F;&#x7684;&#x51C6;&#x786E;&#x6027;&#x8FBE;&#x5230;&#x8FD9;&#x4E2A;&#x76EE;&#x7684;&#xFF0C;MySQL&#x548C;Postgresql&#x73B0;&#x5728;&#x5305;&#x542B;&#x4E86;&#x5728;&#x53CD;&#x6620;&#x8868;&#xFF0C;&#x7D22;&#x5F15;&#x548C;&#x7EA6;&#x675F;&#x65F6;&#x7EA0;&#x6B63;&#x7D22;&#x5F15;&#x91CD;&#x590D;&#x548C;&#x552F;&#x4E00;&#x7EA6;&#x675F;&#x7684;&#x529F;&#x80FD;&#x3002;</span><span class="yiyi-st" id="yiyi-1195">In the case of MySQL, there is not actually a &#x201C;unique constraint&#x201D; concept independent of a &#x201C;unique index&#x201D;, so for this backend <a class="reference internal" href="core_constraints.html#sqlalchemy.schema.UniqueConstraint" title="sqlalchemy.schema.UniqueConstraint"><code class="xref py py-class docutils literal"><span class="pre">UniqueConstraint</span></code></a> continues to remain non-present for a reflected <a class="reference internal" href="core_metadata.html#sqlalchemy.schema.Table" title="sqlalchemy.schema.Table"><code class="xref py py-class docutils literal"><span class="pre">Table</span></code></a>. </span><span class="yiyi-st" id="yiyi-1196">For Postgresql, the query used to detect indexes against <code class="docutils literal"><span class="pre">pg_index</span></code> has been improved to check for the same construct in <code class="docutils literal"><span class="pre">pg_constraint</span></code>, and the implicitly constructed unique index is not included with a reflected <a class="reference internal" href="core_metadata.html#sqlalchemy.schema.Table" title="sqlalchemy.schema.Table"><code class="xref py py-class docutils literal"><span class="pre">Table</span></code></a>.</span></p><p><span class="yiyi-st" id="yiyi-1197">In both cases, the <a class="reference internal" href="core_reflection.html#sqlalchemy.engine.reflection.Inspector.get_indexes" title="sqlalchemy.engine.reflection.Inspector.get_indexes"><code class="xref py py-meth docutils literal"><span class="pre">Inspector.get_indexes()</span></code></a> and the <a class="reference internal" href="core_reflection.html#sqlalchemy.engine.reflection.Inspector.get_unique_constraints" title="sqlalchemy.engine.reflection.Inspector.get_unique_constraints"><code class="xref py py-meth docutils literal"><span class="pre">Inspector.get_unique_constraints()</span></code></a> methods return both constructs individually, but include a new token <code class="docutils literal"><span class="pre">duplicates_constraint</span></code> in the case of Postgresql or <code class="docutils literal"><span class="pre">duplicates_index</span></code> in the case of MySQL to indicate when this condition is detected. </span><span class="yiyi-st" id="yiyi-1198">&#x62C9;&#x7EA6;&#x8BF7;&#x6C42;Johannes Erdfelt&#x63D0;&#x4F9B;&#x3002;</span></p><div class="admonition seealso"><p class="first admonition-title"><span class="yiyi-st" id="yiyi-1199">&#x4E5F;&#x53EF;&#x4EE5;&#x770B;&#x770B;</span></p><p class="last"><span class="yiyi-st" id="yiyi-1200"><a class="reference internal" href="migration_10.html#feature-3184"><span>UniqueConstraint is now part of the Table reflection process</span></a></span></p></div><span class="yiyi-st" id="yiyi-1202"> <a class="changeset-link headerlink reference internal" href="#change-79b21344c66473f22ca547a5bd1db39a">&#xB6;</a></span><p><span class="yiyi-st" id="yiyi-1201">&#x53C2;&#x8003;&#x6587;&#x732E;&#xFF1A;<a class="reference external" href="http://www.sqlalchemy.org/trac/ticket/3184">&#xFF03;3184</a>&#xFF0C;<a class="reference external" href="https://bitbucket.org/zzzeek/sqlalchemy/pull-request/30">&#x62C9;&#x53D6;&#x8BF7;&#x6C42;bitbucket&#xFF1A;30</a></span></p></li><li><p id="change-1.0.0b1-89"><span class="yiyi-st" id="yiyi-1203"><span class="target" id="change-828e90507d9e510ed8982e8e4765b3c4"><strong>[sql] [feature] </strong></span>Added new method <a class="reference internal" href="core_selectable.html#sqlalchemy.sql.expression.Select.with_statement_hint" title="sqlalchemy.sql.expression.Select.with_statement_hint"><code class="xref py py-meth docutils literal"><span class="pre">Select.with_statement_hint()</span></code></a> and ORM method <a class="reference internal" href="orm_query.html#sqlalchemy.orm.query.Query.with_statement_hint" title="sqlalchemy.orm.query.Query.with_statement_hint"><code class="xref py py-meth docutils literal"><span class="pre">Query.with_statement_hint()</span></code></a> to support statement-level hints that are not specific to a table.<a class="changeset-link headerlink reference internal" href="#change-828e90507d9e510ed8982e8e4765b3c4">&#xB6;</a></span></p><p><span class="yiyi-st" id="yiyi-1204">&#x53C2;&#x8003;&#x6587;&#x732E;&#xFF1A;<a class="reference external" href="http://www.sqlalchemy.org/trac/ticket/3206">&#xFF03;3206</a></span></p></li><li><p id="change-1.0.0b1-90"><span class="yiyi-st" id="yiyi-1205"><span class="target" id="change-29a46a76843336a7bb96c5eb8e10d349"><strong>[sql] [feature] </strong></span>The <code class="docutils literal"><span class="pre">info</span></code> parameter has been added as a constructor argument to all schema constructs including <a class="reference internal" href="core_metadata.html#sqlalchemy.schema.MetaData" title="sqlalchemy.schema.MetaData"><code class="xref py py-class docutils literal"><span class="pre">MetaData</span></code></a>, <a class="reference internal" href="core_constraints.html#sqlalchemy.schema.Index" title="sqlalchemy.schema.Index"><code class="xref py py-class docutils literal"><span class="pre">Index</span></code></a>, <a class="reference internal" href="core_constraints.html#sqlalchemy.schema.ForeignKey" title="sqlalchemy.schema.ForeignKey"><code class="xref py py-class docutils literal"><span class="pre">ForeignKey</span></code></a>, <a class="reference internal" href="core_constraints.html#sqlalchemy.schema.ForeignKeyConstraint" title="sqlalchemy.schema.ForeignKeyConstraint"><code class="xref py py-class docutils literal"><span class="pre">ForeignKeyConstraint</span></code></a>, <a class="reference internal" href="core_constraints.html#sqlalchemy.schema.UniqueConstraint" title="sqlalchemy.schema.UniqueConstraint"><code class="xref py py-class docutils literal"><span class="pre">UniqueConstraint</span></code></a>, <a class="reference internal" href="core_constraints.html#sqlalchemy.schema.PrimaryKeyConstraint" title="sqlalchemy.schema.PrimaryKeyConstraint"><code class="xref py py-class docutils literal"><span class="pre">PrimaryKeyConstraint</span></code></a>, <a class="reference internal" href="core_constraints.html#sqlalchemy.schema.CheckConstraint" title="sqlalchemy.schema.CheckConstraint"><code class="xref py py-class docutils literal"><span class="pre">CheckConstraint</span></code></a>.<a class="changeset-link headerlink reference internal" href="#change-29a46a76843336a7bb96c5eb8e10d349">&#xB6;</a></span></p><p><span class="yiyi-st" id="yiyi-1206">&#x53C2;&#x8003;&#x6587;&#x732E;&#xFF1A;<a class="reference external" href="http://www.sqlalchemy.org/trac/ticket/2963">&#xFF03;2963</a></span></p></li><li><p id="change-1.0.0b1-91"><span class="yiyi-st" id="yiyi-1207"><span class="target" id="change-8c119ef8352a4ded12f21ceeb8206401"><strong>[sql] [feature] </strong></span>The <a class="reference internal" href="core_metadata.html#sqlalchemy.schema.Table.params.autoload_with" title="sqlalchemy.schema.Table"><code class="xref py py-paramref docutils literal"><span class="pre">Table.autoload_with</span></code></a> flag now implies that <a class="reference internal" href="core_metadata.html#sqlalchemy.schema.Table.params.autoload" title="sqlalchemy.schema.Table"><code class="xref py py-paramref docutils literal"><span class="pre">Table.autoload</span></code></a> should be <code class="docutils literal"><span class="pre">True</span></code>. </span><span class="yiyi-st" id="yiyi-1208">&#x8BF7;&#x6C42;Malik Diarra&#x63D0;&#x4F9B;&#x3002;<a class="changeset-link headerlink reference internal" href="#change-8c119ef8352a4ded12f21ceeb8206401">&#xB6;</a></span></p><p><span class="yiyi-st" id="yiyi-1209">&#x53C2;&#x8003;&#x6587;&#x732E;&#xFF1A;<a class="reference external" href="http://www.sqlalchemy.org/trac/ticket/3027">&#xFF03;3027</a></span></p></li><li><p id="change-1.0.0b1-92"><span class="yiyi-st" id="yiyi-1210"><span class="target" id="change-11ea70249f3dd8a1cbfa008dfd6b3b7d"><strong>[sql] [feature] </strong></span>The <a class="reference internal" href="core_selectable.html#sqlalchemy.sql.expression.Select.limit" title="sqlalchemy.sql.expression.Select.limit"><code class="xref py py-meth docutils literal"><span class="pre">Select.limit()</span></code></a> and <a class="reference internal" href="core_selectable.html#sqlalchemy.sql.expression.Select.offset" title="sqlalchemy.sql.expression.Select.offset"><code class="xref py py-meth docutils literal"><span class="pre">Select.offset()</span></code></a> methods now accept any SQL expression, in addition to integer values, as arguments. </span><span class="yiyi-st" id="yiyi-1211">&#x901A;&#x5E38;&#xFF0C;&#x8FD9;&#x7528;&#x4E8E;&#x5141;&#x8BB8;&#x4F20;&#x9012;&#x7ED1;&#x5B9A;&#x53C2;&#x6570;&#xFF0C;&#x8BE5;&#x53C2;&#x6570;&#x53EF;&#x4EE5;&#x7A0D;&#x540E;&#x7528;&#x503C;&#x66FF;&#x6362;&#xFF0C;&#x4ECE;&#x800C;&#x5141;&#x8BB8;SQL&#x67E5;&#x8BE2;&#x7684;Python&#x7AEF;&#x7F13;&#x5B58;&#x3002;</span><span class="yiyi-st" id="yiyi-1212">&#x8FD9;&#x91CC;&#x7684;&#x5B9E;&#x73B0;&#x5B8C;&#x5168;&#x5411;&#x540E;&#x517C;&#x5BB9;&#x73B0;&#x6709;&#x7684;&#x7B2C;&#x4E09;&#x65B9;&#x65B9;&#x8A00;&#xFF0C;&#x4F46;&#x662F;&#x90A3;&#x4E9B;&#x5B9E;&#x73B0;&#x7279;&#x6B8A;LIMIT / OFFSET&#x7CFB;&#x7EDF;&#x7684;&#x65B9;&#x8A00;&#x9700;&#x8981;&#x4FEE;&#x6539;&#x624D;&#x80FD;&#x5229;&#x7528;&#x65B0;&#x7684;&#x529F;&#x80FD;&#x3002;</span><span class="yiyi-st" id="yiyi-1213">&#x9650;&#x5236;&#x548C;&#x504F;&#x79FB;&#x4E5F;&#x652F;&#x6301;&#x201C;literal_binds&#x201D;&#x6A21;&#x5F0F;&#xFF0C;<a class="changeset-link headerlink reference internal" href="#change-11ea70249f3dd8a1cbfa008dfd6b3b7d">&#xB6;</a></span></p><p><span class="yiyi-st" id="yiyi-1214">&#x53C2;&#x8003;&#x6587;&#x732E;&#xFF1A;<a class="reference external" href="http://www.sqlalchemy.org/trac/ticket/3034">&#xFF03;3034</a></span></p></li><li><p id="change-1.0.0b1-93"><span class="yiyi-st" id="yiyi-1215"><span class="target" id="change-47e8252f60bddcee7241fffca1f31f22"><strong>[sql] [changed] </strong></span>The <a class="reference internal" href="core_sqlelement.html#sqlalchemy.sql.expression.column" title="sqlalchemy.sql.expression.column"><code class="xref py py-func docutils literal"><span class="pre">column()</span></code></a> and <a class="reference internal" href="core_selectable.html#sqlalchemy.sql.expression.table" title="sqlalchemy.sql.expression.table"><code class="xref py py-func docutils literal"><span class="pre">table()</span></code></a> constructs are now importable from the &#x201C;from sqlalchemy&#x201D; namespace, just like every other Core construct.<a class="changeset-link headerlink reference internal" href="#change-47e8252f60bddcee7241fffca1f31f22">&#xB6;</a></span></p><p></p></li><li><p id="change-1.0.0b1-94"><span class="yiyi-st" id="yiyi-1216"><span class="target" id="change-684a942e0874832475bc4b2d6b3ecbd9"><strong>[sql] [changed] </strong></span>The implicit conversion of strings to <a class="reference internal" href="core_sqlelement.html#sqlalchemy.sql.expression.text" title="sqlalchemy.sql.expression.text"><code class="xref py py-func docutils literal"><span class="pre">text()</span></code></a> constructs when passed to most builder methods of <a class="reference internal" href="core_selectable.html#sqlalchemy.sql.expression.select" title="sqlalchemy.sql.expression.select"><code class="xref py py-func docutils literal"><span class="pre">select()</span></code></a> as well as <a class="reference internal" href="orm_query.html#sqlalchemy.orm.query.Query" title="sqlalchemy.orm.query.Query"><code class="xref py py-class docutils literal"><span class="pre">Query</span></code></a> now emits a warning with just the plain string sent. </span><span class="yiyi-st" id="yiyi-1217">&#x7136;&#x800C;&#xFF0C;&#x6587;&#x672C;&#x8F6C;&#x6362;&#x4ECD;&#x7136;&#x6B63;&#x5E38;&#x8FDB;&#x884C;&#x3002;</span><span class="yiyi-st" id="yiyi-1218">&#x63A5;&#x53D7;&#x4E0D;&#x5E26;&#x8B66;&#x544A;&#x5B57;&#x7B26;&#x4E32;&#x7684;&#x552F;&#x4E00;&#x65B9;&#x6CD5;&#x662F;&#x50CF;&#x201C;order_by()&#x201D;&#xFF0C;&#x201C;group_by()&#x201D;&#x8FD9;&#x6837;&#x7684;&#x201C;&#x6807;&#x7B7E;&#x5F15;&#x7528;&#x201D;&#x65B9;&#x6CD5;&#x3002;&#x8FD9;&#x4E9B;&#x51FD;&#x6570;&#x73B0;&#x5728;&#x5C06;&#x5728;&#x7F16;&#x8BD1;&#x65F6;&#x5C1D;&#x8BD5;&#x5C06;&#x5355;&#x4E2A;&#x5B57;&#x7B26;&#x4E32;&#x53C2;&#x6570;&#x89E3;&#x6790;&#x4E3A;&#x53EF;&#x9009;&#x62E9;&#x7684;&#x5217;&#x6216;&#x6807;&#x7B7E;&#x8868;&#x8FBE;&#x5F0F;&#xFF1B;&#x5982;&#x679C;&#x6CA1;&#x6709;&#x627E;&#x5230;&#xFF0C;&#x8868;&#x8FBE;&#x5F0F;&#x4ECD;&#x4F1A;&#x5448;&#x73B0;&#xFF0C;&#x4F46;&#x60A8;&#x4F1A;&#x518D;&#x6B21;&#x6536;&#x5230;&#x8B66;&#x544A;&#x3002;</span><span class="yiyi-st" id="yiyi-1219">&#x8FD9;&#x91CC;&#x7684;&#x57FA;&#x672C;&#x539F;&#x7406;&#x662F;&#xFF0C;&#x4ECE;&#x5B57;&#x7B26;&#x4E32;&#x5230;&#x6587;&#x672C;&#x7684;&#x9690;&#x5F0F;&#x8F6C;&#x6362;&#x6BD4;&#x73B0;&#x5728;&#x66F4;&#x4E0D;&#x53EF;&#x9884;&#x671F;&#xFF0C;&#x5E76;&#x4E14;&#x6700;&#x597D;&#x662F;&#x5728;&#x4F20;&#x9012;&#x539F;&#x59CB;&#x5B57;&#x7B26;&#x4E32;&#x65F6;&#x5411;&#x7528;&#x6237;&#x53D1;&#x9001;&#x66F4;&#x591A;&#x65B9;&#x5411;&#x4EE5;&#x6307;&#x793A;&#x5E94;&#x91C7;&#x53D6;&#x7684;&#x65B9;&#x5411;&#x3002;</span><span class="yiyi-st" id="yiyi-1220">core_ORM&#x6559;&#x7A0B;&#x5DF2;&#x66F4;&#x65B0;&#xFF0C;&#x4EE5;&#x6DF1;&#x5165;&#x4E86;&#x89E3;&#x5982;&#x4F55;&#x5904;&#x7406;&#x6587;&#x672C;&#x3002;</span></p><div class="admonition seealso"><p class="first admonition-title"><span class="yiyi-st" id="yiyi-1221">&#x4E5F;&#x53EF;&#x4EE5;&#x770B;&#x770B;</span></p><p class="last"><span class="yiyi-st" id="yiyi-1222"><a class="reference internal" href="migration_10.html#migration-2992"><span>Warnings emitted when coercing full SQL fragments into text()</span></a></span></p></div><span class="yiyi-st" id="yiyi-1224"> <a class="changeset-link headerlink reference internal" href="#change-684a942e0874832475bc4b2d6b3ecbd9">&#xB6;</a></span><p><span class="yiyi-st" id="yiyi-1223">&#x53C2;&#x8003;&#x6587;&#x732E;&#xFF1A;<a class="reference external" href="http://www.sqlalchemy.org/trac/ticket/2992">&#xFF03;2992</a></span></p></li><li><p id="change-1.0.0b1-95"><span class="yiyi-st" id="yiyi-1225"><span class="target" id="change-9ae9e60a64156ef8b01aa18d9ab79582"><strong>[sql] [bug] </strong></span>&#x5C06;<code class="docutils literal"><span class="pre">native_enum</span></code>&#x6807;&#x5FD7;&#x6DFB;&#x52A0;&#x5230;<a class="reference internal" href="core_type_basics.html#sqlalchemy.types.Enum" title="sqlalchemy.types.Enum"><code class="xref py py-class docutils literal"><span class="pre">Enum</span></code></a>&#x7684;<code class="docutils literal"><span class="pre">__repr__()</span></code>&#x4E0E;Alembic&#x81EA;&#x52A8;&#x751F;&#x6210;&#x4E00;&#x8D77;&#x4F7F;&#x7528;&#x65F6;&#x5F88;&#x91CD;&#x8981;&#x3002;</span><span class="yiyi-st" id="yiyi-1226">&#x62C9;&#x8BF7;&#x6C42;&#x793C;&#x8C8C;Dimitris Theodorou&#x3002;<a class="changeset-link headerlink reference internal" href="#change-9ae9e60a64156ef8b01aa18d9ab79582">&#xB6;</a></span></p><p><span class="yiyi-st" id="yiyi-1227">&#x8FD9;&#x4E2A;&#x6539;&#x53D8;&#x4E5F;&#x88AB;<strong>backported</strong>&#x6539;&#x4E3A;&#xFF1A;0.9.9</span></p><p><span class="yiyi-st" id="yiyi-1228">&#x53C2;&#x8003;&#x6587;&#x732E;&#xFF1A;<a class="reference external" href="https://bitbucket.org/zzzeek/sqlalchemy/pull-request/41">pull request bitbucket&#xFF1A;41</a></span></p></li><li><p id="change-1.0.0b1-96"><span class="yiyi-st" id="yiyi-1229"><span class="target" id="change-c4ca12ab497a943945db5eadb8afdcb1"><strong>[sql] [bug] </strong></span>Fixed bug where using a <a class="reference internal" href="core_custom_types.html#sqlalchemy.types.TypeDecorator" title="sqlalchemy.types.TypeDecorator"><code class="xref py py-class docutils literal"><span class="pre">TypeDecorator</span></code></a> that implemented a type that was also a <a class="reference internal" href="core_custom_types.html#sqlalchemy.types.TypeDecorator" title="sqlalchemy.types.TypeDecorator"><code class="xref py py-class docutils literal"><span class="pre">TypeDecorator</span></code></a> would fail with Python&#x2019;s &#x201C;Cannot create a consistent method resolution order (MRO)&#x201D; error, when any kind of SQL comparison expression were used against an object using this type.<a class="changeset-link headerlink reference internal" href="#change-c4ca12ab497a943945db5eadb8afdcb1">&#xB6;</a></span></p><p><span class="yiyi-st" id="yiyi-1230">&#x8FD9;&#x4E2A;&#x6539;&#x53D8;&#x4E5F;&#x88AB;<strong>backported</strong>&#x6539;&#x4E3A;&#xFF1A;0.9.9</span></p><p><span class="yiyi-st" id="yiyi-1231">&#x53C2;&#x8003;&#x6587;&#x732E;&#xFF1A;<a class="reference external" href="http://www.sqlalchemy.org/trac/ticket/3278">&#xFF03;3278</a></span></p></li><li><p id="change-1.0.0b1-97"><span class="yiyi-st" id="yiyi-1232"><span class="target" id="change-0fa65101409965b00ae87e09df2deccd"><strong>[sql] [bug] </strong></span>Fixed issue where the columns from a SELECT embedded in an INSERT, either through the values clause or as a &#x201C;from select&#x201D;, would pollute the column types used in the result set produced by the RETURNING clause when columns from both statements shared the same name, leading to potential errors or mis-adaptation when retrieving the returning rows.<a class="changeset-link headerlink reference internal" href="#change-0fa65101409965b00ae87e09df2deccd">&#xB6;</a></span></p><p><span class="yiyi-st" id="yiyi-1233">&#x8FD9;&#x4E2A;&#x6539;&#x53D8;&#x4E5F;&#x88AB;<strong>backported</strong>&#x6539;&#x4E3A;&#xFF1A;0.9.9</span></p><p><span class="yiyi-st" id="yiyi-1234">&#x53C2;&#x8003;&#x6587;&#x732E;&#xFF1A;<a class="reference external" href="http://www.sqlalchemy.org/trac/ticket/3248">&#xFF03;3248</a></span></p></li><li><p id="change-1.0.0b1-98"><span class="yiyi-st" id="yiyi-1235"><span class="target" id="change-c518fd751f15c7bd9ca6846998ca1123"><strong>[sql] [bug] </strong></span>Fixed bug where a fair number of SQL elements within the sql package would fail to <code class="docutils literal"><span class="pre">__repr__()</span></code> successfully, due to a missing <code class="docutils literal"><span class="pre">description</span></code> attribute that would then invoke a recursion overflow when an internal AttributeError would then re-invoke <code class="docutils literal"><span class="pre">__repr__()</span></code>.<a class="changeset-link headerlink reference internal" href="#change-c518fd751f15c7bd9ca6846998ca1123">&#xB6;</a></span></p><p><span class="yiyi-st" id="yiyi-1236">&#x8FD9;&#x4E2A;&#x6539;&#x53D8;&#x4E5F;&#x662F;<strong>backported</strong>&#x6539;&#x4E3A;&#xFF1A;0.9.8</span></p><p><span class="yiyi-st" id="yiyi-1237">&#x53C2;&#x8003;&#x6587;&#x732E;&#xFF1A;<a class="reference external" href="http://www.sqlalchemy.org/trac/ticket/3195">&#xFF03;3195</a></span></p></li><li><p id="change-1.0.0b1-99"><span class="yiyi-st" id="yiyi-1238"><span class="target" id="change-3dda9c816b245a162ae7caa498e557ca"><strong>[sql] [bug] </strong></span>An adjustment to table/index reflection such that if an index reports a column that isn&#x2019;t found to be present in the table, a warning is emitted and the column is skipped. </span><span class="yiyi-st" id="yiyi-1239">&#x5BF9;&#x4E8E;&#x4E00;&#x4E9B;&#x7279;&#x6B8A;&#x7684;&#x7CFB;&#x7EDF;&#x5217;&#x60C5;&#x51B5;&#xFF0C;&#x53EF;&#x80FD;&#x4F1A;&#x53D1;&#x751F;&#x8FD9;&#x79CD;&#x60C5;&#x51B5;&#xFF0C;&#x6B63;&#x5982;Oracle&#x89C2;&#x5BDF;&#x5230;&#x7684;&#x90A3;&#x6837;&#x3002;<a class="changeset-link headerlink reference internal" href="#change-3dda9c816b245a162ae7caa498e557ca">&#xB6;</a></span></p><p><span class="yiyi-st" id="yiyi-1240">&#x8FD9;&#x4E2A;&#x6539;&#x53D8;&#x4E5F;&#x662F;<strong>backported</strong>&#x6539;&#x4E3A;&#xFF1A;0.9.8</span></p><p><span class="yiyi-st" id="yiyi-1241">&#x53C2;&#x8003;&#x6587;&#x732E;&#xFF1A;<a class="reference external" href="http://www.sqlalchemy.org/trac/ticket/3180">&#xFF03;3180</a></span></p></li><li><p id="change-1.0.0b1-100"><span class="yiyi-st" id="yiyi-1242"><span class="target" id="change-4f0c952d23b07cabacb2f2b5506144a0"><strong>[sql] [bug] </strong></span>Fixed bug in CTE where <code class="docutils literal"><span class="pre">literal_binds</span></code> compiler argument would not be always be correctly propagated when one CTE referred to another aliased CTE in a statement.<a class="changeset-link headerlink reference internal" href="#change-4f0c952d23b07cabacb2f2b5506144a0">&#xB6;</a></span></p><p><span class="yiyi-st" id="yiyi-1243">&#x8FD9;&#x4E2A;&#x6539;&#x53D8;&#x4E5F;&#x662F;<strong>backported</strong>&#x6539;&#x4E3A;&#xFF1A;0.9.8</span></p><p><span class="yiyi-st" id="yiyi-1244">&#x53C2;&#x8003;&#x6587;&#x732E;&#xFF1A;<a class="reference external" href="http://www.sqlalchemy.org/trac/ticket/3154">&#xFF03;3154</a></span></p></li><li><p id="change-1.0.0b1-101"><span class="yiyi-st" id="yiyi-1245"><span class="target" id="change-c84995f2c63b6054e2cace46281a86e2"><strong>[sql] [bug] </strong></span>&#x4FEE;&#x6B63;&#x4E86;&#x7531;<a class="reference external" href="http://www.sqlalchemy.org/trac/ticket/3067">&#xFF03;3067</a>&#x5BFC;&#x81F4;&#x7684;0.9.7&#x56DE;&#x5F52;&#x4E0E;&#x9519;&#x8BEF;&#x7684;&#x5355;&#x5143;&#x6D4B;&#x8BD5;&#x7684;&#x7ED3;&#x5408;&#xFF0C;&#x4F7F;&#x5F97;&#x6240;&#x8C13;&#x7684;&#x201C;&#x6A21;&#x5F0F;&#x201D;&#x7C7B;&#x578B;&#x5982;<a class="reference internal" href="core_type_basics.html#sqlalchemy.types.Boolean" title="sqlalchemy.types.Boolean"><code class="xref py py-class docutils literal"><span class="pre">Boolean</span></code></a>&#x548C;<a class="reference internal" href="core_type_basics.html#sqlalchemy.types.Enum" title="sqlalchemy.types.Enum"><code class="xref py py-class docutils literal"><span class="pre">Enum</span></code></a>&#x4E0D;&#x80FD;&#x518D;&#x88AB;&#x814C;&#x5236;&#x3002;<a class="changeset-link headerlink reference internal" href="#change-c84995f2c63b6054e2cace46281a86e2">&#xB6;</a></span></p><p><span class="yiyi-st" id="yiyi-1246">&#x8FD9;&#x4E2A;&#x6539;&#x53D8;&#x4E5F;&#x662F;<strong>backported</strong>&#x6539;&#x4E3A;&#xFF1A;0.9.8</span></p><p><span class="yiyi-st" id="yiyi-1247">&#x53C2;&#x8003;&#x6587;&#x732E;&#xFF1A;<a class="reference external" href="http://www.sqlalchemy.org/trac/ticket/3144">&#xFF03;3144</a>&#xFF0C;<a class="reference external" href="http://www.sqlalchemy.org/trac/ticket/3067">&#xFF03;3067</a></span></p></li><li><p id="change-1.0.0b1-102"><span class="yiyi-st" id="yiyi-1248"><span class="target" id="change-0b7554df5bbc7c044d69d2b40ba9ba35"><strong>[sql] [bug] </strong></span>Fix bug in naming convention feature where using a check constraint convention that includes <code class="docutils literal"><span class="pre">constraint_name</span></code> would then force all <a class="reference internal" href="core_type_basics.html#sqlalchemy.types.Boolean" title="sqlalchemy.types.Boolean"><code class="xref py py-class docutils literal"><span class="pre">Boolean</span></code></a> and <a class="reference internal" href="core_type_basics.html#sqlalchemy.types.Enum" title="sqlalchemy.types.Enum"><code class="xref py py-class docutils literal"><span class="pre">Enum</span></code></a> types to require names as well, as these implicitly create a constraint, even if the ultimate target backend were one that does not require generation of the constraint such as Postgresql. </span><span class="yiyi-st" id="yiyi-1249">&#x8FD9;&#x4E9B;&#x7279;&#x5B9A;&#x7EA6;&#x675F;&#x7684;&#x547D;&#x540D;&#x7EA6;&#x5B9A;&#x7684;&#x673A;&#x5236;&#x5DF2;&#x91CD;&#x65B0;&#x7EC4;&#x7EC7;&#xFF0C;&#x4EE5;&#x4FBF;&#x5728;DDL&#x7F16;&#x8BD1;&#x65F6;&#x5B8C;&#x6210;&#x547D;&#x540D;&#x786E;&#x5B9A;&#xFF0C;&#x800C;&#x4E0D;&#x662F;&#x5728;&#x7EA6;&#x675F;/&#x8868;&#x6784;&#x9020;&#x65F6;&#x5B8C;&#x6210;&#x547D;&#x4EE4;&#x3002;<a class="changeset-link headerlink reference internal" href="#change-0b7554df5bbc7c044d69d2b40ba9ba35">&#xB6;</a></span></p><p><span class="yiyi-st" id="yiyi-1250">&#x8FD9;&#x4E2A;&#x6539;&#x53D8;&#x4E5F;&#x88AB;<strong>backported</strong>&#x6539;&#x4E3A;&#xFF1A;0.9.7</span></p><p><span class="yiyi-st" id="yiyi-1251">&#x53C2;&#x8003;&#x6587;&#x732E;&#xFF1A;<a class="reference external" href="http://www.sqlalchemy.org/trac/ticket/3067">&#xFF03;3067</a></span></p></li><li><p id="change-1.0.0b1-103"><span class="yiyi-st" id="yiyi-1252"><span class="target" id="change-9881397eb449cc15f8ace6fbcbd4eb09"><strong>[sql] [bug] </strong></span>Fixed bug in common table expressions whereby positional bound parameters could be expressed in the wrong final order when CTEs were nested in certain ways.<a class="changeset-link headerlink reference internal" href="#change-9881397eb449cc15f8ace6fbcbd4eb09">&#xB6;</a></span></p><p><span class="yiyi-st" id="yiyi-1253">&#x8FD9;&#x4E2A;&#x6539;&#x53D8;&#x4E5F;&#x88AB;<strong>backported</strong>&#x6539;&#x4E3A;&#xFF1A;0.9.7</span></p><p><span class="yiyi-st" id="yiyi-1254">&#x53C2;&#x8003;&#x6587;&#x732E;&#xFF1A;<a class="reference external" href="http://www.sqlalchemy.org/trac/ticket/3090">&#xFF03;3090</a></span></p></li><li><p id="change-1.0.0b1-104"><span class="yiyi-st" id="yiyi-1255">&#x4FEE;&#x6B63;&#x4E86;&#x591A;&#x503C;<a class="reference internal" href="core_dml.html#sqlalchemy.sql.expression.Insert" title="sqlalchemy.sql.expression.Insert"><code class="xref py py-class docutils literal"><span class="pre">Insert</span></code></a>&#x6784;&#x9020;&#x65E0;&#x6CD5;&#x68C0;&#x67E5;&#x7ED9;&#x5B9A;&#x7684;&#x5B57;&#x9762;SQL&#x8868;&#x8FBE;&#x5F0F;&#x7B2C;&#x4E00;&#x4E2A;&#x4EE5;&#x540E;&#x7684;&#x503C;&#x7684;&#x95EE;&#x9898;&#x3002;<a class="changeset-link headerlink reference internal" href="#change-c9422f7c699644c36a03c9721b9e9960"><span class="target" id="change-c9422f7c699644c36a03c9721b9e9960"><strong>[sql] [bug] </strong></span></a></span></p><p><span class="yiyi-st" id="yiyi-1256">&#x8FD9;&#x4E2A;&#x6539;&#x53D8;&#x4E5F;&#x88AB;<strong>backported</strong>&#x6539;&#x4E3A;&#xFF1A;0.9.7</span></p><p><span class="yiyi-st" id="yiyi-1257">&#x53C2;&#x8003;&#x6587;&#x732E;&#xFF1A;<a class="reference external" href="http://www.sqlalchemy.org/trac/ticket/3069">&#xFF03;3069</a></span></p></li><li><p id="change-1.0.0b1-105"><span class="yiyi-st" id="yiyi-1258"><span class="target" id="change-dc34d2e11cf4b685da7ca74198a77500"><strong>[sql] [bug] </strong></span>&#x5728;Python&#x7248;&#x672C;<2.6.5的dialect_kwargs迭代中添加了一个“str()”步骤，解决了“no unicode="" keyword="" arg”关键字在一些反射过程中引用。<a="" class="changeset-link headerlink reference internal" href="#change-dc34d2e11cf4b685da7ca74198a77500">&#xB6;</2.6.5的dialect_kwargs迭代中添加了一个“str()”步骤，解决了“no></span></p><p><span class="yiyi-st" id="yiyi-1259">&#x8FD9;&#x4E2A;&#x6539;&#x53D8;&#x4E5F;&#x88AB;<strong>backported</strong>&#x6539;&#x4E3A;&#xFF1A;0.9.7</span></p><p><span class="yiyi-st" id="yiyi-1260">&#x53C2;&#x8003;&#x6587;&#x732E;&#xFF1A;<a class="reference external" href="http://www.sqlalchemy.org/trac/ticket/3123">&#xFF03;3123</a></span></p></li><li><p id="change-1.0.0b1-106"><span class="yiyi-st" id="yiyi-1261"><span class="target" id="change-e5ef7cae58e33445c054718ec2361f1d"><strong>[sql] [bug] </strong></span>The <a class="reference internal" href="core_type_api.html#sqlalchemy.types.TypeEngine.with_variant" title="sqlalchemy.types.TypeEngine.with_variant"><code class="xref py py-meth docutils literal"><span class="pre">TypeEngine.with_variant()</span></code></a> method will now accept a type class as an argument which is internally converted to an instance, using the same convention long established by other constructs such as <a class="reference internal" href="core_metadata.html#sqlalchemy.schema.Column" title="sqlalchemy.schema.Column"><code class="xref py py-class docutils literal"><span class="pre">Column</span></code></a>.<a class="changeset-link headerlink reference internal" href="#change-e5ef7cae58e33445c054718ec2361f1d">&#xB6;</a></span></p><p><span class="yiyi-st" id="yiyi-1262">&#x8FD9;&#x4E2A;&#x6539;&#x53D8;&#x4E5F;&#x88AB;<strong>backported</strong>&#x6539;&#x4E3A;&#xFF1A;0.9.7</span></p><p><span class="yiyi-st" id="yiyi-1263">&#x53C2;&#x8003;&#x6587;&#x732E;&#xFF1A;<a class="reference external" href="http://www.sqlalchemy.org/trac/ticket/3122">&#xFF03;3122</a></span></p></li><li><p id="change-1.0.0b1-107"><span class="yiyi-st" id="yiyi-1264"><span class="target" id="change-281f7135707711426544c956bad3dc76"><strong>[sql] [bug] </strong></span>The <a class="reference internal" href="core_metadata.html#sqlalchemy.schema.Column.params.nullable" title="sqlalchemy.schema.Column"><code class="xref py py-paramref docutils literal"><span class="pre">Column.nullable</span></code></a> flag is implicitly set to <code class="docutils literal"><span class="pre">False</span></code> when that <a class="reference internal" href="core_metadata.html#sqlalchemy.schema.Column" title="sqlalchemy.schema.Column"><code class="xref py py-class docutils literal"><span class="pre">Column</span></code></a> is referred to in an explicit <a class="reference internal" href="core_constraints.html#sqlalchemy.schema.PrimaryKeyConstraint" title="sqlalchemy.schema.PrimaryKeyConstraint"><code class="xref py py-class docutils literal"><span class="pre">PrimaryKeyConstraint</span></code></a> for that table. </span><span class="yiyi-st" id="yiyi-1265">&#x8FD9;&#x79CD;&#x884C;&#x4E3A;&#x73B0;&#x5728;&#x4E0E;<a class="reference internal" href="core_metadata.html#sqlalchemy.schema.Column" title="sqlalchemy.schema.Column"><code class="xref py py-class docutils literal"><span class="pre">Column</span></code></a>&#x672C;&#x8EAB;&#x5C06;<a class="reference internal" href="core_metadata.html#sqlalchemy.schema.Column.params.primary_key" title="sqlalchemy.schema.Column"><code class="xref py py-paramref docutils literal"><span class="pre">Column.primary_key</span></code></a>&#x6807;&#x5FD7;&#x8BBE;&#x7F6E;&#x4E3A;<code class="docutils literal"><span class="pre">True</span></code>&#x65F6;&#x7684;&#x884C;&#x4E3A;&#x76F8;&#x5339;&#x914D;&#xFF0C;&#x8BE5;&#x884C;&#x4E3A;&#x65E8;&#x5728;&#x6210;&#x4E3A;&#x4E00;&#x4E2A;&#x5B8C;&#x5168;&#x7B49;&#x6548;&#x7684;&#x60C5;&#x51B5;<a class="changeset-link headerlink reference internal" href="#change-281f7135707711426544c956bad3dc76">&#xB6; T8&gt;</a></span></p><p><span class="yiyi-st" id="yiyi-1266">&#x8FD9;&#x4E2A;&#x6539;&#x53D8;&#x4E5F;&#x88AB;<strong>backported</strong>&#x6539;&#x4E3A;&#xFF1A;0.9.5</span></p><p><span class="yiyi-st" id="yiyi-1267">&#x53C2;&#x8003;&#x6587;&#x732E;&#xFF1A;<a class="reference external" href="http://www.sqlalchemy.org/trac/ticket/3023">&#xFF03;3023</a></span></p></li><li><p id="change-1.0.0b1-108"><span class="yiyi-st" id="yiyi-1268"><span class="target" id="change-3ea444f027c5e125d738d7c910e350ea"><strong>[sql] [bug] </strong></span>Fixed bug where the <a class="reference internal" href="core_sqlelement.html#sqlalchemy.sql.operators.Operators.__and__" title="sqlalchemy.sql.operators.Operators.__and__"><code class="xref py py-meth docutils literal"><span class="pre">Operators.__and__()</span></code></a>, <a class="reference internal" href="core_sqlelement.html#sqlalchemy.sql.operators.Operators.__or__" title="sqlalchemy.sql.operators.Operators.__or__"><code class="xref py py-meth docutils literal"><span class="pre">Operators.__or__()</span></code></a> and <a class="reference internal" href="core_sqlelement.html#sqlalchemy.sql.operators.Operators.__invert__" title="sqlalchemy.sql.operators.Operators.__invert__"><code class="xref py py-meth docutils literal"><span class="pre">Operators.__invert__()</span></code></a> operator overload methods could not be overridden within a custom <a class="reference internal" href="core_type_api.html#sqlalchemy.types.TypeEngine.Comparator" title="sqlalchemy.types.TypeEngine.Comparator"><code class="xref py py-class docutils literal"><span class="pre">TypeEngine.Comparator</span></code></a> implementation.<a class="changeset-link headerlink reference internal" href="#change-3ea444f027c5e125d738d7c910e350ea">&#xB6;</a></span></p><p><span class="yiyi-st" id="yiyi-1269">&#x8FD9;&#x4E2A;&#x6539;&#x53D8;&#x4E5F;&#x88AB;<strong>backported</strong>&#x6539;&#x4E3A;&#xFF1A;0.9.5</span></p><p><span class="yiyi-st" id="yiyi-1270">&#x53C2;&#x8003;&#x6587;&#x732E;&#xFF1A;<a class="reference external" href="http://www.sqlalchemy.org/trac/ticket/3012">&#xFF03;3012</a></span></p></li><li><p id="change-1.0.0b1-109"><span class="yiyi-st" id="yiyi-1271"><span class="target" id="change-0d2c9fb4311c501e2c7be559308fe61d"><strong>[sql] [bug] </strong></span>Fixed bug in new <a class="reference internal" href="core_sqlelement.html#sqlalchemy.sql.base.DialectKWArgs.argument_for" title="sqlalchemy.sql.base.DialectKWArgs.argument_for"><code class="xref py py-meth docutils literal"><span class="pre">DialectKWArgs.argument_for()</span></code></a> method where adding an argument for a construct not previously included for any special arguments would fail.<a class="changeset-link headerlink reference internal" href="#change-0d2c9fb4311c501e2c7be559308fe61d">&#xB6;</a></span></p><p><span class="yiyi-st" id="yiyi-1272">&#x8FD9;&#x4E2A;&#x6539;&#x53D8;&#x4E5F;&#x88AB;<strong>backported</strong>&#x6539;&#x4E3A;&#xFF1A;0.9.5</span></p><p><span class="yiyi-st" id="yiyi-1273">&#x53C2;&#x8003;&#x6587;&#x732E;&#xFF1A;<a class="reference external" href="http://www.sqlalchemy.org/trac/ticket/3024">&#xFF03;3024</a></span></p></li><li><p id="change-1.0.0b1-110"><span class="yiyi-st" id="yiyi-1274"><span class="target" id="change-1e6a69139b4a3648c3a1ccc79e3e9fbb"><strong>[sql] [bug] </strong></span>Fixed regression introduced in 0.9 where new &#x201C;ORDER BY <labelname>&#x201D; feature from <a class="reference external" href="http://www.sqlalchemy.org/trac/ticket/1068">#1068</a> would not apply quoting rules to the label name as rendered in the ORDER BY.<a class="changeset-link headerlink reference internal" href="#change-1e6a69139b4a3648c3a1ccc79e3e9fbb">&#xB6;</a></labelname></span></p><p><span class="yiyi-st" id="yiyi-1275">&#x8FD9;&#x4E2A;&#x6539;&#x53D8;&#x4E5F;&#x88AB;<strong>backported</strong>&#x6539;&#x4E3A;&#xFF1A;0.9.5</span></p><p><span class="yiyi-st" id="yiyi-1276">&#x53C2;&#x8003;&#x6587;&#x732E;&#xFF1A;<a class="reference external" href="http://www.sqlalchemy.org/trac/ticket/1068">&#xFF03;1068</a>&#xFF0C;<a class="reference external" href="http://www.sqlalchemy.org/trac/ticket/3020">&#xFF03;3020</a></span></p></li><li><p id="change-1.0.0b1-111"><span class="yiyi-st" id="yiyi-1277"><span class="target" id="change-7023fa6f794789bffac1141bc7ecf86b"><strong>[sql] [bug] </strong></span>&#x5C06;<a class="reference internal" href="core_functions.html#sqlalchemy.sql.functions.Function" title="sqlalchemy.sql.functions.Function"><code class="xref py py-class docutils literal"><span class="pre">Function</span></code></a>&#x7684;&#x5BFC;&#x5165;&#x6062;&#x590D;&#x5230;<code class="docutils literal"><span class="pre">sqlalchemy.sql.expression</span></code>&#x5BFC;&#x5165;&#x547D;&#x540D;&#x7A7A;&#x95F4;&#xFF0C;&#x8BE5;&#x7A7A;&#x95F4;&#x5728;0.9&#x5F00;&#x59CB;&#x65F6;&#x88AB;&#x5220;&#x9664;<a class="changeset-link headerlink reference internal" href="#change-7023fa6f794789bffac1141bc7ecf86b">&#xB6; T7&gt;</a></span></p><p><span class="yiyi-st" id="yiyi-1278">&#x8FD9;&#x4E2A;&#x6539;&#x53D8;&#x4E5F;&#x88AB;<strong>backported</strong>&#x6539;&#x4E3A;&#xFF1A;0.9.5</span></p><p></p></li><li><p id="change-1.0.0b1-112"><span class="yiyi-st" id="yiyi-1279"><span class="target" id="change-39ff64c9a38a07a10351e5eac319e215"><strong>[sql] [bug] </strong></span>Fixed bug in <a class="reference internal" href="core_type_basics.html#sqlalchemy.types.Enum" title="sqlalchemy.types.Enum"><code class="xref py py-class docutils literal"><span class="pre">Enum</span></code></a> and other <a class="reference internal" href="core_type_basics.html#sqlalchemy.types.SchemaType" title="sqlalchemy.types.SchemaType"><code class="xref py py-class docutils literal"><span class="pre">SchemaType</span></code></a> subclasses where direct association of the type with a <a class="reference internal" href="core_metadata.html#sqlalchemy.schema.MetaData" title="sqlalchemy.schema.MetaData"><code class="xref py py-class docutils literal"><span class="pre">MetaData</span></code></a> would lead to a hang when events (like create events) were emitted on the <a class="reference internal" href="core_metadata.html#sqlalchemy.schema.MetaData" title="sqlalchemy.schema.MetaData"><code class="xref py py-class docutils literal"><span class="pre">MetaData</span></code></a>.<a class="changeset-link headerlink reference internal" href="#change-39ff64c9a38a07a10351e5eac319e215">&#xB6;</a></span></p><p><span class="yiyi-st" id="yiyi-1280">This change is also <strong>backported</strong> to: 0.9.7, 0.8.7</span></p><p><span class="yiyi-st" id="yiyi-1281">&#x53C2;&#x8003;&#x6587;&#x732E;&#xFF1A;<a class="reference external" href="http://www.sqlalchemy.org/trac/ticket/3124">&#xFF03;3124</a></span></p></li><li><p id="change-1.0.0b1-113"><span class="yiyi-st" id="yiyi-1282"><span class="target" id="change-3f0858c763a82a38425a4f5cd06df17b"><strong>[sql] [bug] </strong></span>Fixed a bug within the custom operator plus <a class="reference internal" href="core_type_api.html#sqlalchemy.types.TypeEngine.with_variant" title="sqlalchemy.types.TypeEngine.with_variant"><code class="xref py py-meth docutils literal"><span class="pre">TypeEngine.with_variant()</span></code></a> system, whereby using a <a class="reference internal" href="core_custom_types.html#sqlalchemy.types.TypeDecorator" title="sqlalchemy.types.TypeDecorator"><code class="xref py py-class docutils literal"><span class="pre">TypeDecorator</span></code></a> in conjunction with variant would fail with an MRO error when a comparison operator was used.<a class="changeset-link headerlink reference internal" href="#change-3f0858c763a82a38425a4f5cd06df17b">&#xB6;</a></span></p><p><span class="yiyi-st" id="yiyi-1283">This change is also <strong>backported</strong> to: 0.9.7, 0.8.7</span></p><p><span class="yiyi-st" id="yiyi-1284">&#x53C2;&#x8003;&#x6587;&#x732E;&#xFF1A;<a class="reference external" href="http://www.sqlalchemy.org/trac/ticket/3102">&#xFF03;3102</a></span></p></li><li><p id="change-1.0.0b1-114"><span class="yiyi-st" id="yiyi-1285"><span class="target" id="change-7d8d4c6b958b8f1189653efea4b7b3d8"><strong>[sql] [bug] </strong></span>Fixed bug in INSERT..FROM SELECT construct where selecting from a UNION would wrap the union in an anonymous (e.g. unlabled) subquery.<a class="changeset-link headerlink reference internal" href="#change-7d8d4c6b958b8f1189653efea4b7b3d8">&#xB6;</a></span></p><p><span class="yiyi-st" id="yiyi-1286">This change is also <strong>backported</strong> to: 0.9.5, 0.8.7</span></p><p><span class="yiyi-st" id="yiyi-1287">&#x53C2;&#x8003;&#x6587;&#x732E;&#xFF1A;<a class="reference external" href="http://www.sqlalchemy.org/trac/ticket/3044">&#xFF03;3044</a></span></p></li><li><p id="change-1.0.0b1-115"><span class="yiyi-st" id="yiyi-1288">&#x4FEE;&#x590D;&#x4E86;&#x5F53;<a class="reference internal" href="core_metadata.html#sqlalchemy.schema.Table.update" title="sqlalchemy.schema.Table.update"><code class="xref py py-meth docutils literal"><span class="pre">Table.update()</span></code></a>&#x548C;<a class="reference internal" href="core_metadata.html#sqlalchemy.schema.Table.delete" title="sqlalchemy.schema.Table.delete"><code class="xref py py-meth docutils literal"><span class="pre">Table.delete()</span></code></a>&#x5728;&#x7A7A;&#x7684;&#x65F6;&#x5019;&#x4F1A;&#x4EA7;&#x751F;&#x4E00;&#x4E2A;&#x7A7A;&#x7684;WHERE&#x5B50;&#x53E5;&#x7684;&#x95EE;&#x9898;&#x3002;<span class="target" id="change-49df72c237a28d2aed4a95b52c723c1e"><strong>[sql] [bug] </strong></span> <a class="reference internal" href="core_sqlelement.html#sqlalchemy.sql.expression.and_" title="sqlalchemy.sql.expression.and_"><code class="xref py py-func docutils literal"><span class="pre">and_()</span></code></a>&#x6216;<a class="reference internal" href="core_sqlelement.html#sqlalchemy.sql.expression.or_" title="sqlalchemy.sql.expression.or_"><code class="xref py py-func docutils literal"><span class="pre">or_()</span></code></a>&#x6216;&#x5176;&#x4ED6;&#x7A7A;&#x767D;&#x8868;&#x8FBE;&#x3002;</span><span class="yiyi-st" id="yiyi-1289">&#x8FD9;&#x4E0E;<a class="reference internal" href="core_selectable.html#sqlalchemy.sql.expression.select" title="sqlalchemy.sql.expression.select"><code class="xref py py-func docutils literal"><span class="pre">select()</span></code></a>&#x7684;&#x4E00;&#x81F4;&#x3002;<a class="changeset-link headerlink reference internal" href="#change-49df72c237a28d2aed4a95b52c723c1e">&#xB6;</a></span></p><p><span class="yiyi-st" id="yiyi-1290">This change is also <strong>backported</strong> to: 0.9.5, 0.8.7</span></p><p><span class="yiyi-st" id="yiyi-1291">&#x53C2;&#x8003;&#x6587;&#x732E;&#xFF1A;<a class="reference external" href="http://www.sqlalchemy.org/trac/ticket/3045">&#xFF03;3045</a></span></p></li><li><p id="change-1.0.0b1-116"><span class="yiyi-st" id="yiyi-1292"><span class="target" id="change-122f0ef022ba2c5e0c4793bc923c28e2"><strong>[sql] [bug] </strong></span>The multi-values version of <a class="reference internal" href="core_dml.html#sqlalchemy.sql.expression.Insert.values" title="sqlalchemy.sql.expression.Insert.values"><code class="xref py py-meth docutils literal"><span class="pre">Insert.values()</span></code></a> has been repaired to work more usefully with tables that have Python- side default values and/or functions, as well as server-side defaults. </span><span class="yiyi-st" id="yiyi-1293">&#x8BE5;&#x529F;&#x80FD;&#x73B0;&#x5728;&#x53EF;&#x4EE5;&#x4F7F;&#x7528;&#x4F7F;&#x7528;&#x201C;&#x4F4D;&#x7F6E;&#x201D;&#x53C2;&#x6570;&#x7684;&#x65B9;&#x8A00;&#xFF1B;&#x5C31;&#x50CF;&#x201C;executemany&#x201D;&#x6837;&#x5F0F;&#x8C03;&#x7528;&#x4E00;&#x6837;&#xFF0C;&#x6BCF;&#x4E2A;&#x884C;&#x4E5F;&#x4F1A;&#x5355;&#x72EC;&#x8C03;&#x7528;&#x4E00;&#x4E2A;Python&#x53EF;&#x8C03;&#x7528;&#x5BF9;&#x8C61;&#xFF1B;&#x670D;&#x52A1;&#x5668;&#x7AEF;&#x9ED8;&#x8BA4;&#x5217;&#x5C06;&#x4E0D;&#x518D;&#x9690;&#x5F0F;&#x5730;&#x63A5;&#x6536;&#x4E3A;&#x7B2C;&#x4E00;&#x884C;&#x663E;&#x5F0F;&#x6307;&#x5B9A;&#x7684;&#x503C;&#xFF0C;&#x800C;&#x62D2;&#x7EDD;&#x5728;&#x6CA1;&#x6709;&#x663E;&#x5F0F;&#x503C;&#x7684;&#x60C5;&#x51B5;&#x4E0B;&#x8C03;&#x7528;&#x3002;</span></p><div class="admonition seealso"><p class="first admonition-title"><span class="yiyi-st" id="yiyi-1294">&#x4E5F;&#x53EF;&#x4EE5;&#x770B;&#x770B;</span></p><p class="last"><span class="yiyi-st" id="yiyi-1295"><a class="reference internal" href="migration_10.html#bug-3288"><span>Python-side defaults invoked for each row invidually when using a multivalued insert</span></a>&#x65F6;&#xFF0C;&#x4E3A;&#x6BCF;&#x884C;&#x72EC;&#x7ACB;&#x8C03;&#x7528;Python&#x7AEF;&#x7F3A;&#x7701;&#x503C;</span></p></div><span class="yiyi-st" id="yiyi-1297"> <a class="changeset-link headerlink reference internal" href="#change-122f0ef022ba2c5e0c4793bc923c28e2">&#xB6;</a></span><p><span class="yiyi-st" id="yiyi-1296">&#x53C2;&#x8003;&#x6587;&#x732E;&#xFF1A;<a class="reference external" href="http://www.sqlalchemy.org/trac/ticket/3288">&#xFF03;3288</a></span></p></li><li><p id="change-1.0.0b1-117"><span class="yiyi-st" id="yiyi-1298"><span class="target" id="change-deb48f32e1bed24bf1ca698f249edd8b"><strong>[sql] [bug] </strong></span>Fixed bug in <a class="reference internal" href="core_metadata.html#sqlalchemy.schema.Table.tometadata" title="sqlalchemy.schema.Table.tometadata"><code class="xref py py-meth docutils literal"><span class="pre">Table.tometadata()</span></code></a> method where the <a class="reference internal" href="core_constraints.html#sqlalchemy.schema.CheckConstraint" title="sqlalchemy.schema.CheckConstraint"><code class="xref py py-class docutils literal"><span class="pre">CheckConstraint</span></code></a> associated with a <a class="reference internal" href="core_type_basics.html#sqlalchemy.types.Boolean" title="sqlalchemy.types.Boolean"><code class="xref py py-class docutils literal"><span class="pre">Boolean</span></code></a> or <a class="reference internal" href="core_type_basics.html#sqlalchemy.types.Enum" title="sqlalchemy.types.Enum"><code class="xref py py-class docutils literal"><span class="pre">Enum</span></code></a> type object would be doubled in the target table. </span><span class="yiyi-st" id="yiyi-1299">&#x590D;&#x5236;&#x8FC7;&#x7A0B;&#x73B0;&#x5728;&#x5C06;&#x8BE5;&#x7EA6;&#x675F;&#x5BF9;&#x8C61;&#x7684;&#x751F;&#x4EA7;&#x8FFD;&#x8E2A;&#x4E3A;&#x7C7B;&#x578B;&#x5BF9;&#x8C61;&#x7684;&#x672C;&#x5730;&#x5BF9;&#x8C61;&#x3002;<a class="changeset-link headerlink reference internal" href="#change-deb48f32e1bed24bf1ca698f249edd8b">&#xB6;</a></span></p><p><span class="yiyi-st" id="yiyi-1300">&#x53C2;&#x8003;&#x6587;&#x732E;&#xFF1A;<a class="reference external" href="http://www.sqlalchemy.org/trac/ticket/3260">&#xFF03;3260</a></span></p></li><li><p id="change-1.0.0b1-118"><span class="yiyi-st" id="yiyi-1301"><span class="target" id="change-2c2325d005f45286712184e3593a548f"><strong>[sql] [bug] </strong></span> <code class="xref py py-attr docutils literal"><span class="pre">ForeignKeyConstraint.columns</span></code>&#x96C6;&#x5408;&#x7684;&#x884C;&#x4E3A;&#x5951;&#x7EA6;&#x5DF2;&#x7ECF;&#x4E00;&#x81F4;&#xFF1B;&#x8FD9;&#x4E2A;&#x5C5E;&#x6027;&#x73B0;&#x5728;&#x662F;&#x4E00;&#x4E2A;&#x7C7B;&#x4F3C;&#x6240;&#x6709;&#x5176;&#x4ED6;&#x7EA6;&#x675F;&#x7684;<a class="reference internal" href="core_sqlelement.html#sqlalchemy.sql.expression.ColumnCollection" title="sqlalchemy.sql.expression.ColumnCollection"><code class="xref py py-class docutils literal"><span class="pre">ColumnCollection</span></code></a>&#xFF0C;&#x5E76;&#x4E14;&#x5728;&#x7EA6;&#x675F;&#x4E0E;<a class="reference internal" href="core_metadata.html#sqlalchemy.schema.Table" title="sqlalchemy.schema.Table"><code class="xref py py-class docutils literal"><span class="pre">Table</span></code></a>&#x5173;&#x8054;&#x7684;&#x65F6;&#x5019;&#x521D;&#x59CB;&#x5316;&#x3002;</span></p><div class="admonition seealso"><p class="first admonition-title"><span class="yiyi-st" id="yiyi-1302">&#x4E5F;&#x53EF;&#x4EE5;&#x770B;&#x770B;</span></p><p class="last"><span class="yiyi-st" id="yiyi-1303"><a class="reference internal" href="migration_10.html#change-3243"><span>ForeignKeyConstraint.columns is now a ColumnCollection</span></a></span></p></div><span class="yiyi-st" id="yiyi-1305"> <a class="changeset-link headerlink reference internal" href="#change-2c2325d005f45286712184e3593a548f">&#xB6;</a></span><p><span class="yiyi-st" id="yiyi-1304">&#x53C2;&#x8003;&#x6587;&#x732E;&#xFF1A;<a class="reference external" href="http://www.sqlalchemy.org/trac/ticket/3243">&#xFF03;3243</a></span></p></li><li><p id="change-1.0.0b1-119"><span class="yiyi-st" id="yiyi-1306"><span class="target" id="change-31200a6951c38906d011838b19760a18"><strong>[sql] [bug] </strong></span>The <code class="xref py py-attr docutils literal"><span class="pre">Column.key</span></code> attribute is now used as the source of anonymous bound parameter names within expressions, to match the existing use of this value as the key when rendered in an INSERT or UPDATE statement. </span><span class="yiyi-st" id="yiyi-1307">&#x8FD9;&#x5141;&#x8BB8;&#x5C06;<code class="xref py py-attr docutils literal"><span class="pre">Column.key</span></code>&#x7528;&#x4F5C;&#x201C;&#x66FF;&#x4EE3;&#x201D;&#x5B57;&#x7B26;&#x4E32;&#x6765;&#x89E3;&#x51B3;&#x96BE;&#x4EE5;&#x8F6C;&#x6362;&#x4E3A;&#x7ED1;&#x5B9A;&#x53C2;&#x6570;&#x540D;&#x79F0;&#x7684;&#x56F0;&#x96BE;&#x5217;&#x540D;&#x79F0;&#x3002;</span><span class="yiyi-st" id="yiyi-1308">&#x8BF7;&#x6CE8;&#x610F;&#xFF0C;&#x5728;&#x4EFB;&#x4F55;&#x60C5;&#x51B5;&#x4E0B;&#xFF0C;paramstyle&#x90FD;&#x53EF;&#x4EE5;&#x5728;<a class="reference internal" href="core_engines.html#sqlalchemy.create_engine" title="sqlalchemy.create_engine"><code class="xref py py-func docutils literal"><span class="pre">create_engine()</span></code></a>&#x4E0A;&#x914D;&#x7F6E;&#xFF0C;&#x5E76;&#x4E14;&#x4ECA;&#x5929;&#x5927;&#x591A;&#x6570;DBAPI&#x652F;&#x6301;&#x547D;&#x540D;&#x548C;&#x4F4D;&#x7F6E;&#x6837;&#x5F0F;&#x3002;<a class="changeset-link headerlink reference internal" href="#change-31200a6951c38906d011838b19760a18">&#xB6;</a></span></p><p><span class="yiyi-st" id="yiyi-1309">&#x53C2;&#x8003;&#x6587;&#x732E;&#xFF1A;<a class="reference external" href="http://www.sqlalchemy.org/trac/ticket/3245">&#xFF03;3245</a></span></p></li><li><p id="change-1.0.0b1-120"><span class="yiyi-st" id="yiyi-1310"><span class="target" id="change-45c6243938b8d4ee1e742945f0bb54a6"><strong>[sql] [bug] </strong></span>&#x4FEE;&#x590D;&#x4F20;&#x9012;&#x7ED9;&#x6B64;&#x4E8B;&#x4EF6;&#x7684;<a class="reference internal" href="core_events.html#sqlalchemy.events.PoolEvents.reset.params.dbapi_connection" title="sqlalchemy.events.PoolEvents.reset"><code class="xref py py-paramref docutils literal"><span class="pre">PoolEvents.reset.dbapi_connection</span></code></a>&#x53C2;&#x6570;&#x7684;&#x540D;&#x79F0;&#xFF1B;&#x7279;&#x522B;&#x662F;&#x8FD9;&#x4F1A;&#x5F71;&#x54CD;&#x8BE5;&#x4E8B;&#x4EF6;&#x7684;&#x201C;&#x547D;&#x540D;&#x201D;&#x53C2;&#x6570;&#x98CE;&#x683C;&#x7684;&#x4F7F;&#x7528;&#x3002;</span><span class="yiyi-st" id="yiyi-1311">&#x62C9;&#x91D1;&#x8BF7;&#x6C42;&#x63D0;&#x4F9B;Jason Goldberger&#x3002;<a class="changeset-link headerlink reference internal" href="#change-45c6243938b8d4ee1e742945f0bb54a6">&#xB6;</a></span></p><p><span class="yiyi-st" id="yiyi-1312">&#x53C2;&#x8003;&#x6587;&#x732E;&#xFF1A;<a class="reference external" href="https://github.com/zzzeek/sqlalchemy/pull/146">&#x8BF7;&#x6C42;github&#xFF1A;146</a></span></p></li><li><p id="change-1.0.0b1-121"><span class="yiyi-st" id="yiyi-1313"><span class="target" id="change-df1b227cf2b11212ed7273639ee8494a"><strong>[sql] [bug] </strong></span>Reversing a change that was made in 0.9, the &#x201C;singleton&#x201D; nature of the &#x201C;constants&#x201D; <a class="reference internal" href="core_sqlelement.html#sqlalchemy.sql.expression.null" title="sqlalchemy.sql.expression.null"><code class="xref py py-func docutils literal"><span class="pre">null()</span></code></a>, <a class="reference internal" href="core_sqlelement.html#sqlalchemy.sql.expression.true" title="sqlalchemy.sql.expression.true"><code class="xref py py-func docutils literal"><span class="pre">true()</span></code></a>, and <a class="reference internal" href="core_sqlelement.html#sqlalchemy.sql.expression.false" title="sqlalchemy.sql.expression.false"><code class="xref py py-func docutils literal"><span class="pre">false()</span></code></a> has been reverted. </span><span class="yiyi-st" id="yiyi-1314">&#x8FD9;&#x4E9B;&#x8FD4;&#x56DE;&#x201C;&#x5355;&#x4F8B;&#x201D;&#x5BF9;&#x8C61;&#x7684;&#x51FD;&#x6570;&#x5177;&#x6709;&#x8FD9;&#x6837;&#x7684;&#x6548;&#x679C;&#xFF0C;&#x5373;&#x4E0D;&#x7BA1;&#x8BCD;&#x5178;&#x4F7F;&#x7528;&#x5982;&#x4F55;&#xFF0C;&#x4E0D;&#x540C;&#x7684;&#x5B9E;&#x4F8B;&#x90FD;&#x5C06;&#x88AB;&#x89C6;&#x4E3A;&#x76F8;&#x540C;&#xFF0C;&#x8FD9;&#x5C24;&#x5176;&#x4F1A;&#x5F71;&#x54CD;SELECT&#x8BED;&#x53E5;&#x7684;columns&#x5B50;&#x53E5;&#x7684;&#x5448;&#x73B0;&#x3002;</span></p><div class="admonition seealso"><p class="first admonition-title"><span class="yiyi-st" id="yiyi-1315">&#x4E5F;&#x53EF;&#x4EE5;&#x770B;&#x770B;</span></p><p class="last"><span class="yiyi-st" id="yiyi-1316"><a class="reference internal" href="migration_10.html#bug-3170"><span>null(), false() and true() constants are no longer singletons</span></a></span></p></div><span class="yiyi-st" id="yiyi-1318"> <a class="changeset-link headerlink reference internal" href="#change-df1b227cf2b11212ed7273639ee8494a">&#xB6;</a></span><p><span class="yiyi-st" id="yiyi-1317">&#x53C2;&#x8003;&#x6587;&#x732E;&#xFF1A;<a class="reference external" href="http://www.sqlalchemy.org/trac/ticket/3170">&#xFF03;3170</a></span></p></li><li><p id="change-1.0.0b1-122"><span class="yiyi-st" id="yiyi-1319"><span class="target" id="change-d95f6dd7c7d56fb5b50397f3c1355b6c"><strong>[sql] [bug] [engine] </strong></span>&#x4FEE;&#x590D;&#x4E86;&#x5F53;&#x60A8;&#x8C03;&#x7528;<a class="reference internal" href="core_connections.html#sqlalchemy.engine.Connection.connect" title="sqlalchemy.engine.Connection.connect"><code class="xref py py-meth docutils literal"><span class="pre">Connection.connect()</span></code></a>&#x65F6;&#x83B7;&#x5F97;&#x7684;&#x201C;&#x5206;&#x652F;&#x201D;&#x8FDE;&#x63A5;&#x4E0D;&#x4F1A;&#x5171;&#x4EAB;&#x7684;&#x9519;&#x8BEF;&#x4E0E;&#x7236;&#x6BCD;&#x7684;&#x65E0;&#x6548;&#x72B6;&#x6001;&#x3002;</span><span class="yiyi-st" id="yiyi-1320">&#x5206;&#x652F;&#x4F53;&#x7CFB;&#x7ED3;&#x6784;&#x5DF2;&#x7ECF;&#x8C03;&#x6574;&#x4E86;&#x4E00;&#x70B9;&#xFF0C;&#x4EE5;&#x4FBF;&#x5206;&#x652F;&#x8FDE;&#x63A5;&#x6309;&#x7167;&#x6240;&#x6709;&#x5931;&#x6548;&#x72B6;&#x6001;&#x548C;&#x64CD;&#x4F5C;&#x987A;&#x4ECE;&#x7236;&#x9879;&#x3002;<a class="changeset-link headerlink reference internal" href="#change-d95f6dd7c7d56fb5b50397f3c1355b6c">&#xB6;</a></span></p><p><span class="yiyi-st" id="yiyi-1321">&#x53C2;&#x8003;&#x6587;&#x732E;&#xFF1A;<a class="reference external" href="http://www.sqlalchemy.org/trac/ticket/3215">&#xFF03;3215</a></span></p></li><li><p id="change-1.0.0b1-123"><span class="yiyi-st" id="yiyi-1322"><span class="target" id="change-65d68f5b8481db16ce132eedd3b8d459"><strong>[sql] [bug] [engine] </strong></span>&#x4FEE;&#x590D;&#x4E86;&#x5F53;&#x60A8;&#x8C03;&#x7528;<a class="reference internal" href="core_connections.html#sqlalchemy.engine.Connection.connect" title="sqlalchemy.engine.Connection.connect"><code class="xref py py-meth docutils literal"><span class="pre">Connection.connect()</span></code></a>&#x65F6;&#x83B7;&#x5F97;&#x7684;&#x201C;&#x5206;&#x652F;&#x201D;&#x8FDE;&#x63A5;&#x4E0D;&#x4F1A;&#x5171;&#x4EAB;&#x7684;&#x9519;&#x8BEF;&#x4E0E;&#x7236;&#x6BCD;&#x7684;&#x4EA4;&#x6613;&#x72B6;&#x6001;&#x3002;</span><span class="yiyi-st" id="yiyi-1323">&#x5206;&#x652F;&#x4F53;&#x7CFB;&#x7ED3;&#x6784;&#x5DF2;&#x7ECF;&#x505A;&#x4E86;&#x4E00;&#x4E9B;&#x8C03;&#x6574;&#xFF0C;&#x4EE5;&#x4FBF;&#x5206;&#x652F;&#x8FDE;&#x63A5;&#x6309;&#x7167;&#x6240;&#x6709;&#x4E8B;&#x52A1;&#x72B6;&#x6001;&#x548C;&#x64CD;&#x4F5C;&#x987A;&#x4ECE;&#x7236;&#x8FDB;&#x7A0B;&#x3002;<a class="changeset-link headerlink reference internal" href="#change-65d68f5b8481db16ce132eedd3b8d459">&#xB6;</a></span></p><p><span class="yiyi-st" id="yiyi-1324">&#x53C2;&#x8003;&#x6587;&#x732E;&#xFF1A;<a class="reference external" href="http://www.sqlalchemy.org/trac/ticket/3190">&#xFF03;3190</a></span></p></li><li><p id="change-1.0.0b1-124"><span class="yiyi-st" id="yiyi-1325"><span class="target" id="change-18b10ba82954d47ea8c64416cf12bb27"><strong>[sql] [bug] </strong></span>Using <a class="reference internal" href="core_dml.html#sqlalchemy.sql.expression.Insert.from_select" title="sqlalchemy.sql.expression.Insert.from_select"><code class="xref py py-meth docutils literal"><span class="pre">Insert.from_select()</span></code></a> now implies <code class="docutils literal"><span class="pre">inline=True</span></code> on <a class="reference internal" href="dialects_postgresql.html#sqlalchemy.dialects.postgresql.dml.insert" title="sqlalchemy.dialects.postgresql.dml.insert"><code class="xref py py-func docutils literal"><span class="pre">insert()</span></code></a>. </span><span class="yiyi-st" id="yiyi-1326">&#x8FD9;&#x6709;&#x52A9;&#x4E8E;&#x4FEE;&#x590D;INSERT ... FROM SELECT&#x6784;&#x9020;&#x65E0;&#x610F;&#x4E2D;&#x7F16;&#x8BD1;&#x4E3A;&#x652F;&#x6301;&#x540E;&#x7AEF;&#x7684;&#x201C;&#x9690;&#x5F0F;&#x8FD4;&#x56DE;&#x201D;&#x7684;&#x9519;&#x8BEF;&#xFF0C;&#x8FD9;&#x4F1A;&#x5728;&#x63D2;&#x5165;&#x96F6;&#x884C;&#x7684;INSERT&#x60C5;&#x51B5;&#x4E0B;&#x5BFC;&#x81F4;&#x7834;&#x574F;&#xFF08;&#x56E0;&#x4E3A;&#x9690;&#x5F0F;&#x8FD4;&#x56DE;&#x671F;&#x671B;&#x884C;&#xFF09; &#xFF0C;&#x4EE5;&#x53CA;&#x5728;&#x63D2;&#x5165;&#x591A;&#x884C;&#x7684;INSERT&#x60C5;&#x51B5;&#x4E0B;&#x7684;&#x4EFB;&#x610F;&#x8FD4;&#x56DE;&#x6570;&#x636E;&#xFF08;&#x4F8B;&#x5982;&#xFF0C;&#x53EA;&#x6709;&#x5F88;&#x591A;&#x884C;&#x7684;&#x7B2C;&#x4E00;&#x884C;&#xFF09;&#x3002;</span><span class="yiyi-st" id="yiyi-1327">&#x4E00;&#x4E2A;&#x7C7B;&#x4F3C;&#x7684;&#x66F4;&#x6539;&#x4E5F;&#x9002;&#x7528;&#x4E8E;&#x5177;&#x6709;&#x591A;&#x4E2A;&#x53C2;&#x6570;&#x96C6;&#x7684;INSERT..VALUES&#xFF1B;&#x9690;&#x542B;&#x7684;RETURNING&#x5C06;&#x4E0D;&#x518D;&#x4E3A;&#x6B64;&#x8BED;&#x53E5;&#x53D1;&#x51FA;&#x3002;</span><span class="yiyi-st" id="yiyi-1328">&#x7531;&#x4E8E;&#x8FD9;&#x4E24;&#x4E2A;&#x6784;&#x9020;&#x90FD;&#x5904;&#x7406;&#x53EF;&#x53D8;&#x6570;&#x91CF;&#x7684;&#x884C;&#xFF0C;&#x6240;&#x4EE5;<a class="reference internal" href="core_connections.html#sqlalchemy.engine.ResultProxy.inserted_primary_key" title="sqlalchemy.engine.ResultProxy.inserted_primary_key"><code class="xref py py-attr docutils literal"><span class="pre">ResultProxy.inserted_primary_key</span></code></a>&#x8BBF;&#x95EE;&#x5668;&#x4E0D;&#x9002;&#x7528;&#x3002;</span><span class="yiyi-st" id="yiyi-1329">&#x4EE5;&#x524D;&#xFF0C;&#x6709;&#x4E00;&#x4E2A;&#x6587;&#x6863;&#x8BF4;&#x660E;&#xFF0C;&#x6709;&#x4EBA;&#x53EF;&#x80FD;&#x66F4;&#x559C;&#x6B22;&#x5E26;&#x6709;INSERT..FROM SELECT&#x7684;<code class="docutils literal"><span class="pre">inline=True</span></code>&#xFF0C;&#x56E0;&#x4E3A;&#x6709;&#x4E9B;&#x6570;&#x636E;&#x5E93;&#x4E0D;&#x652F;&#x6301;&#x8FD4;&#x56DE;&#xFF0C;&#x56E0;&#x6B64;&#x4E0D;&#x80FD;&#x505A;&#x201C;&#x9690;&#x5F0F;&#x201D;&#x8FD4;&#x56DE;&#xFF0C;&#x4F46;&#x6CA1;&#x6709;&#x4EFB;&#x4F55;&#x7406;&#x7531;INSERT ... FROM SELECT&#x9700;&#x8981;&#x5728;&#x4EFB;&#x4F55;&#x60C5;&#x51B5;&#x4E0B;&#x9690;&#x5F0F;&#x8FD4;&#x56DE;&#x3002;</span><span class="yiyi-st" id="yiyi-1330">&#x5982;&#x679C;&#x9700;&#x8981;&#x63D2;&#x5165;&#x6570;&#x636E;&#xFF0C;&#x5219;&#x5E94;&#x4F7F;&#x7528;&#x5E38;&#x89C4;&#x663E;&#x5F0F;<a class="reference internal" href="core_dml.html#sqlalchemy.sql.expression.Insert.returning" title="sqlalchemy.sql.expression.Insert.returning"><code class="xref py py-meth docutils literal"><span class="pre">Insert.returning()</span></code></a>&#x6765;&#x8FD4;&#x56DE;&#x53EF;&#x53D8;&#x6570;&#x76EE;&#x7684;&#x7ED3;&#x679C;&#x884C;&#x3002;<a class="changeset-link headerlink reference internal" href="#change-18b10ba82954d47ea8c64416cf12bb27">&#xB6;</a></span></p><p><span class="yiyi-st" id="yiyi-1331">&#x53C2;&#x8003;&#x6587;&#x732E;&#xFF1A;<a class="reference external" href="http://www.sqlalchemy.org/trac/ticket/3169">&#xFF03;3169</a></span></p></li><li><p id="change-1.0.0b1-125"><span class="yiyi-st" id="yiyi-1332"><span class="target" id="change-464e59fa2bf92cf803edfc0088f713da"><strong>[sql] [enhancement] </strong></span>Custom dialects that implement <code class="xref py py-class docutils literal"><span class="pre">GenericTypeCompiler</span></code> can now be constructed such that the visit methods receive an indication of the owning expression object, if any. </span><span class="yiyi-st" id="yiyi-1333">&#x4EFB;&#x4F55;&#x63A5;&#x53D7;&#x5173;&#x952E;&#x5B57;&#x53C2;&#x6570;&#x7684;&#x8BBF;&#x95EE;&#x65B9;&#x6CD5;&#xFF08;&#x4F8B;&#x5982;<code class="docutils literal"><span class="pre">**kw</span></code>&#xFF09;&#x5728;&#x5927;&#x591A;&#x6570;&#x60C5;&#x51B5;&#x4E0B;&#x90FD;&#x4F1A;&#x63A5;&#x6536;&#x5173;&#x952E;&#x5B57;&#x53C2;&#x6570;<code class="docutils literal"><span class="pre">type_expression</span></code>&#xFF0C;&#x5E76;&#x5F15;&#x7528;&#x8BE5;&#x7C7B;&#x578B;&#x6240;&#x5305;&#x542B;&#x7684;&#x8868;&#x8FBE;&#x5F0F;&#x5BF9;&#x8C61;&#x3002;</span><span class="yiyi-st" id="yiyi-1334">&#x5BF9;&#x4E8E;DDL&#x4E2D;&#x7684;&#x5217;&#xFF0C;&#x65B9;&#x8A00;&#x7684;&#x7F16;&#x8BD1;&#x5668;&#x7C7B;&#x53EF;&#x80FD;&#x9700;&#x8981;&#x4FEE;&#x6539;&#x5B83;&#x7684;<code class="docutils literal"><span class="pre">get_column_specification()</span></code>&#x65B9;&#x6CD5;&#x4EE5;&#x652F;&#x6301;&#x5B83;&#x3002;</span><span class="yiyi-st" id="yiyi-1335">&#x5982;&#x679C;&#x5728;&#x53C2;&#x6570;&#x7B7E;&#x540D;&#x4E2D;&#x63D0;&#x4F9B;<code class="docutils literal"><span class="pre">**kw</span></code>&#xFF0C;<code class="docutils literal"><span class="pre">UserDefinedType.get_col_spec()</span></code>&#x65B9;&#x6CD5;&#x4E5F;&#x4F1A;&#x63A5;&#x6536;<code class="docutils literal"><span class="pre">type_expression</span></code>&#x3002;<a class="changeset-link headerlink reference internal" href="#change-464e59fa2bf92cf803edfc0088f713da">&#xB6;</a> &gt;</span></p><p><span class="yiyi-st" id="yiyi-1336">&#x53C2;&#x8003;&#x6587;&#x732E;&#xFF1A;<a class="reference external" href="http://www.sqlalchemy.org/trac/ticket/3074">&#xFF03;3074</a></span></p></li></ul></div><div class="section" id="change-1.0.0b1-schema"><h3><span class="yiyi-st" id="yiyi-1337">&#x67B6;&#x6784;<a class="headerlink" href="#change-1.0.0b1-schema" title="Permalink to this headline">&#xB6; T0&gt;</a></span></h3><ul class="simple"><li><p id="change-1.0.0b1-126"><span class="yiyi-st" id="yiyi-1338"><span class="target" id="change-1029cbed41420ead46a2b77d52f42920"><strong>[schema] [feature] </strong></span>The DDL generation system of <a class="reference internal" href="core_metadata.html#sqlalchemy.schema.MetaData.create_all" title="sqlalchemy.schema.MetaData.create_all"><code class="xref py py-meth docutils literal"><span class="pre">MetaData.create_all()</span></code></a> and <a class="reference internal" href="core_metadata.html#sqlalchemy.schema.MetaData.drop_all" title="sqlalchemy.schema.MetaData.drop_all"><code class="xref py py-meth docutils literal"><span class="pre">MetaData.drop_all()</span></code></a> has been enhanced to in most cases automatically handle the case of mutually dependent foreign key constraints; the need for the <a class="reference internal" href="core_constraints.html#sqlalchemy.schema.ForeignKeyConstraint.params.use_alter" title="sqlalchemy.schema.ForeignKeyConstraint"><code class="xref py py-paramref docutils literal"><span class="pre">ForeignKeyConstraint.use_alter</span></code></a> flag is greatly reduced. </span><span class="yiyi-st" id="yiyi-1339">&#x8BE5;&#x7CFB;&#x7EDF;&#x8FD8;&#x9002;&#x7528;&#x4E8E;&#x5148;&#x524D;&#x672A;&#x7ED9;&#x51FA;&#x540D;&#x79F0;&#x7684;&#x7EA6;&#x675F;&#xFF1B;&#x53EA;&#x6709;&#x5728;DROP&#x7684;&#x60C5;&#x51B5;&#x4E0B;&#xFF0C;&#x8BE5;&#x5468;&#x671F;&#x4E2D;&#x6D89;&#x53CA;&#x7684;&#x81F3;&#x5C11;&#x4E00;&#x4E2A;&#x7EA6;&#x675F;&#x6240;&#x9700;&#x7684;&#x540D;&#x79F0;&#x3002;</span></p><div class="admonition seealso"><p class="first admonition-title"><span class="yiyi-st" id="yiyi-1340">&#x4E5F;&#x53EF;&#x4EE5;&#x770B;&#x770B;</span></p><p class="last"><span class="yiyi-st" id="yiyi-1341"><a class="reference internal" href="migration_10.html#feature-3282"><span>The use_alter flag on ForeignKeyConstraint is (usually) no longer needed</span></a></span></p></div><span class="yiyi-st" id="yiyi-1343"> <a class="changeset-link headerlink reference internal" href="#change-1029cbed41420ead46a2b77d52f42920">&#xB6;</a></span><p><span class="yiyi-st" id="yiyi-1342">&#x53C2;&#x8003;&#x6587;&#x732E;&#xFF1A;<a class="reference external" href="http://www.sqlalchemy.org/trac/ticket/3282">&#xFF03;3282</a></span></p></li><li><p id="change-1.0.0b1-127"><span class="yiyi-st" id="yiyi-1344"><span class="target" id="change-7288ebf25551a199d61be187d6926a8b"><strong>[schema] [feature] </strong></span>Added a new accessor <a class="reference internal" href="core_metadata.html#sqlalchemy.schema.Table.foreign_key_constraints" title="sqlalchemy.schema.Table.foreign_key_constraints"><code class="xref py py-attr docutils literal"><span class="pre">Table.foreign_key_constraints</span></code></a> to complement the <a class="reference internal" href="core_metadata.html#sqlalchemy.schema.Table.foreign_keys" title="sqlalchemy.schema.Table.foreign_keys"><code class="xref py py-attr docutils literal"><span class="pre">Table.foreign_keys</span></code></a> collection, as well as <a class="reference internal" href="core_constraints.html#sqlalchemy.schema.ForeignKeyConstraint.referred_table" title="sqlalchemy.schema.ForeignKeyConstraint.referred_table"><code class="xref py py-attr docutils literal"><span class="pre">ForeignKeyConstraint.referred_table</span></code></a>.<a class="changeset-link headerlink reference internal" href="#change-7288ebf25551a199d61be187d6926a8b">&#xB6;</a></span></p><p></p></li><li><p id="change-1.0.0b1-128"><span class="yiyi-st" id="yiyi-1345"><span class="target" id="change-5851c2f9630e7aeed059ec8faeab5fc6"><strong>[schema] [bug] </strong></span>The <a class="reference internal" href="core_constraints.html#sqlalchemy.schema.CheckConstraint" title="sqlalchemy.schema.CheckConstraint"><code class="xref py py-class docutils literal"><span class="pre">CheckConstraint</span></code></a> construct now supports naming conventions that include the token <code class="docutils literal"><span class="pre">%(column_0_name)s</span></code>; the constraint expression is scanned for columns. </span><span class="yiyi-st" id="yiyi-1346">&#x6B64;&#x5916;&#xFF0C;&#x4E0D;&#x5305;&#x542B;<code class="docutils literal"><span class="pre">%(constraint_name)s</span></code>&#x6807;&#x8BB0;&#x7684;&#x68C0;&#x67E5;&#x7EA6;&#x675F;&#x7684;&#x547D;&#x540D;&#x7EA6;&#x5B9A;&#x73B0;&#x5728;&#x53EF;&#x7528;&#x4E8E;<a class="reference internal" href="core_type_basics.html#sqlalchemy.types.SchemaType" title="sqlalchemy.types.SchemaType"><code class="xref py py-class docutils literal"><span class="pre">SchemaType</span></code></a>  - &#x751F;&#x6210;&#x7684;&#x7EA6;&#x675F;&#xFF0C;&#x5982;<a class="reference internal" href="core_type_basics.html#sqlalchemy.types.Boolean" title="sqlalchemy.types.Boolean"><code class="xref py py-class docutils literal"><span class="pre">Boolean</span></code></a>&#x548C;<a class="reference internal" href="core_type_basics.html#sqlalchemy.types.Enum" title="sqlalchemy.types.Enum"><code class="xref py py-class docutils literal"><span class="pre">Enum</span></code></a>&#xFF1B;&#x7531;&#x4E8E;<a class="reference external" href="http://www.sqlalchemy.org/trac/ticket/3067">&#xFF03;3067</a>&#x7684;&#x539F;&#x56E0;&#xFF0C;&#x5B83;&#x5728;0.9.7&#x4E2D;&#x505C;&#x6B62;&#x5DE5;&#x4F5C;&#x3002;</span></p><div class="admonition seealso"><p class="first admonition-title"><span class="yiyi-st" id="yiyi-1347">&#x4E5F;&#x53EF;&#x4EE5;&#x770B;&#x770B;</span></p><p><span class="yiyi-st" id="yiyi-1348"><a class="reference internal" href="core_constraints.html#naming-check-constraints"><span>Naming CHECK Constraints</span></a></span></p><p class="last"><span class="yiyi-st" id="yiyi-1349"><a class="reference internal" href="core_constraints.html#naming-schematypes"><span>Configuring Naming for Boolean, Enum, and other schema types</span></a>&#x914D;&#x7F6E;&#x547D;&#x540D;</span></p></div><span class="yiyi-st" id="yiyi-1351"> <a class="changeset-link headerlink reference internal" href="#change-5851c2f9630e7aeed059ec8faeab5fc6">&#xB6;</a></span><p><span class="yiyi-st" id="yiyi-1350">&#x53C2;&#x8003;&#x6587;&#x732E;&#xFF1A;<a class="reference external" href="http://www.sqlalchemy.org/trac/ticket/3067">&#xFF03;3067</a>&#xFF0C;<a class="reference external" href="http://www.sqlalchemy.org/trac/ticket/3299">&#xFF03;3299</a></span></p></li></ul></div><div class="section" id="change-1.0.0b1-postgresql"><h3><span class="yiyi-st" id="yiyi-1352">&#x7684;PostgreSQL <a class="headerlink" href="#change-1.0.0b1-postgresql" title="Permalink to this headline">&#xB6; T0&gt;</a></span></h3><ul class="simple"><li><p id="change-1.0.0b1-129"><span class="yiyi-st" id="yiyi-1353"><span class="target" id="change-9c8871edf9c5e6a62540a127958c0c4e"><strong>[postgresql] [feature] </strong></span>&#x4F7F;&#x7528;<code class="docutils literal"><span class="pre">postgresql_concurrently</span></code>&#x6DFB;&#x52A0;&#x4E86;&#x5BF9;&#x4F7F;&#x7528;Postgresql&#x7D22;&#x5F15;&#x7684;<code class="docutils literal"><span class="pre">CONCURRENTLY</span></code>&#x5173;&#x952E;&#x5B57;&#x7684;&#x652F;&#x6301;&#x3002;</span><span class="yiyi-st" id="yiyi-1354">&#x8BF7;&#x6C42;Iuri de Silvio&#x63D0;&#x51FA;&#x8BF7;&#x6C42;&#x3002;</span></p><div class="admonition seealso"><p class="first admonition-title"><span class="yiyi-st" id="yiyi-1355">&#x4E5F;&#x53EF;&#x4EE5;&#x770B;&#x770B;</span></p><p class="last"><span class="yiyi-st" id="yiyi-1356"><a class="reference internal" href="dialects_postgresql.html#postgresql-index-concurrently"><span>Indexes with CONCURRENTLY</span></a></span></p></div><span class="yiyi-st" id="yiyi-1359"> <a class="changeset-link headerlink reference internal" href="#change-9c8871edf9c5e6a62540a127958c0c4e">&#xB6;</a></span><p><span class="yiyi-st" id="yiyi-1357">&#x8FD9;&#x4E2A;&#x6539;&#x53D8;&#x4E5F;&#x88AB;<strong>backported</strong>&#x6539;&#x4E3A;&#xFF1A;0.9.9</span></p><p><span class="yiyi-st" id="yiyi-1358">&#x53C2;&#x8003;&#xFF1A;<a class="reference external" href="https://bitbucket.org/zzzeek/sqlalchemy/pull-request/45">&#x62C9;&#x8BF7;&#x6C42;bitbucket&#xFF1A;45</a></span></p></li><li><p id="change-1.0.0b1-130"><span class="yiyi-st" id="yiyi-1360"><span class="target" id="change-c8679f38da94085f949f3f8fdec71306"><strong>[postgresql] [feature] [pg8000] </strong></span>&#x901A;&#x8FC7;pg8000&#x9A71;&#x52A8;&#x7A0B;&#x5E8F;&#x4E3A;&#x201C;&#x7406;&#x667A;&#x7684;&#x591A;&#x884C;&#x6570;&#x201D;&#x6DFB;&#x52A0;&#x652F;&#x6301;&#xFF0C;&#x4E3B;&#x8981;&#x9002;&#x7528;&#x4E8E;&#x4F7F;&#x7528;ORM&#x8FDB;&#x884C;&#x7248;&#x672C;&#x63A7;&#x5236;&#x65F6;&#x3002;</span><span class="yiyi-st" id="yiyi-1361">&#x8BE5;&#x529F;&#x80FD;&#x57FA;&#x4E8E;&#x4F7F;&#x7528;&#x7684;pg8000 1.9.14&#x6216;&#x66F4;&#x9AD8;&#x7248;&#x672C;&#x8FDB;&#x884C;&#x7248;&#x672C;&#x68C0;&#x6D4B;&#x3002;</span><span class="yiyi-st" id="yiyi-1362">&#x62C9;&#x6258;&#x6D1B;&#x514B;&#x6D1B;&#x8BF7;&#x6C42;&#x793C;&#x8C8C;&#x3002;<a class="changeset-link headerlink reference internal" href="#change-c8679f38da94085f949f3f8fdec71306">&#xB6;</a></span></p><p><span class="yiyi-st" id="yiyi-1363">&#x8FD9;&#x4E2A;&#x6539;&#x53D8;&#x4E5F;&#x662F;<strong>backported</strong>&#x6539;&#x4E3A;&#xFF1A;0.9.8</span></p><p><span class="yiyi-st" id="yiyi-1364">&#x53C2;&#x8003;&#x6587;&#x732E;&#xFF1A;<a class="reference external" href="https://github.com/zzzeek/sqlalchemy/pull/125">&#x8BF7;&#x6C42;github&#xFF1A;125</a></span></p></li><li><p id="change-1.0.0b1-131"><span class="yiyi-st" id="yiyi-1365"><span class="target" id="change-a11821d7d20015d6d83485a50f48aa6d"><strong>[postgresql] [feature] </strong></span>&#x6DFB;&#x52A0;kw&#x53C2;&#x6570;<code class="docutils literal"><span class="pre">postgresql_regconfig</span></code>&#x5230;<a class="reference internal" href="core_sqlelement.html#sqlalchemy.sql.operators.ColumnOperators.match" title="sqlalchemy.sql.operators.ColumnOperators.match"><code class="xref py py-meth docutils literal"><span class="pre">ColumnOperators.match()</span></code></a>&#x8FD0;&#x7B97;&#x7B26;&#xFF0C;&#x5141;&#x8BB8;&#x6307;&#x5B9A;&#x201C;reg config&#x201D;&#x53C2;&#x6570;&#x53D1;&#x9001;&#x5230;<code class="docutils literal"><span class="pre">to_tsquery()</span></code>&#x51FD;&#x6570;&#x3002;</span><span class="yiyi-st" id="yiyi-1366">&#x8BF7;&#x6C42;Jonathan Vanasco&#x63D0;&#x4F9B;&#x3002;<a class="changeset-link headerlink reference internal" href="#change-a11821d7d20015d6d83485a50f48aa6d">&#xB6;</a></span></p><p><span class="yiyi-st" id="yiyi-1367">&#x8FD9;&#x4E2A;&#x6539;&#x53D8;&#x4E5F;&#x88AB;<strong>backported</strong>&#x6539;&#x4E3A;&#xFF1A;0.9.7</span></p><p><span class="yiyi-st" id="yiyi-1368">References: <a class="reference external" href="http://www.sqlalchemy.org/trac/ticket/3078">#3078</a>, <a class="reference external" href="https://bitbucket.org/zzzeek/sqlalchemy/pull-request/22">pull request bitbucket:22</a></span></p></li><li><p id="change-1.0.0b1-132"><span class="yiyi-st" id="yiyi-1369"><span class="target" id="change-65fc53d293aae94000bece0cfec7dc02"><strong>[postgresql] [feature] </strong></span>&#x901A;&#x8FC7;<a class="reference internal" href="dialects_postgresql.html#sqlalchemy.dialects.postgresql.JSONB" title="sqlalchemy.dialects.postgresql.JSONB"><code class="xref py py-class docutils literal"><span class="pre">JSONB</span></code></a>&#x589E;&#x52A0;&#x4E86;&#x5BF9;Postgresql JSONB&#x7684;&#x652F;&#x6301;&#x3002;</span><span class="yiyi-st" id="yiyi-1370">&#x8BF7;&#x6C42;&#x793C;&#x8C8C;Damian Dimmich&#x3002;<a class="changeset-link headerlink reference internal" href="#change-65fc53d293aae94000bece0cfec7dc02">&#xB6;</a></span></p><p><span class="yiyi-st" id="yiyi-1371">&#x8FD9;&#x4E2A;&#x6539;&#x53D8;&#x4E5F;&#x88AB;<strong>backported</strong>&#x6539;&#x4E3A;&#xFF1A;0.9.7</span></p><p><span class="yiyi-st" id="yiyi-1372">&#x53C2;&#x8003;&#x6587;&#x732E;&#xFF1A;<a class="reference external" href="https://github.com/zzzeek/sqlalchemy/pull/101">&#x8BF7;&#x6C42;github&#xFF1A;101</a></span></p></li><li><p id="change-1.0.0b1-133"><span class="yiyi-st" id="yiyi-1373"><span class="target" id="change-185ea3fa8da27b13fd310a783ad58be2"><strong>[postgresql] [feature] </strong></span>&#x5728;&#x4F7F;&#x7528;pg8000 DBAPI&#x65F6;&#x589E;&#x52A0;&#x4E86;&#x5BF9;AUTOCOMMIT&#x9694;&#x79BB;&#x7EA7;&#x522B;&#x7684;&#x652F;&#x6301;&#x3002;</span><span class="yiyi-st" id="yiyi-1374">&#x62C9;&#x6258;&#x6D1B;&#x514B;&#x6D1B;&#x8BF7;&#x6C42;&#x793C;&#x8C8C;&#x3002;<a class="changeset-link headerlink reference internal" href="#change-185ea3fa8da27b13fd310a783ad58be2">&#xB6;</a></span></p><p><span class="yiyi-st" id="yiyi-1375">&#x8FD9;&#x4E2A;&#x6539;&#x53D8;&#x4E5F;&#x88AB;<strong>backported</strong>&#x6539;&#x4E3A;&#xFF1A;0.9.5</span></p><p><span class="yiyi-st" id="yiyi-1376">&#x53C2;&#x8003;&#x6587;&#x732E;&#xFF1A;<a class="reference external" href="https://github.com/zzzeek/sqlalchemy/pull/88">&#x8BF7;&#x6C42;github&#xFF1A;88</a></span></p></li><li><p id="change-1.0.0b1-134"><span class="yiyi-st" id="yiyi-1377"><span class="target" id="change-ca799da80767ded4fb507183b68fc51e"><strong>[postgresql] [feature] </strong></span>&#x5C06;&#x65B0;&#x6807;&#x5FD7;<a class="reference internal" href="dialects_postgresql.html#sqlalchemy.dialects.postgresql.ARRAY.params.zero_indexes" title="sqlalchemy.dialects.postgresql.ARRAY"><code class="xref py py-paramref docutils literal"><span class="pre">ARRAY.zero_indexes</span></code></a>&#x6DFB;&#x52A0;&#x5230;Postgresql <a class="reference internal" href="dialects_postgresql.html#sqlalchemy.dialects.postgresql.ARRAY" title="sqlalchemy.dialects.postgresql.ARRAY"><code class="xref py py-class docutils literal"><span class="pre">ARRAY</span></code></a>&#x7C7B;&#x578B;&#x3002;</span><span class="yiyi-st" id="yiyi-1378">&#x5F53;&#x8BBE;&#x7F6E;&#x4E3A;<code class="docutils literal"><span class="pre">True</span></code>&#x65F6;&#xFF0C;&#x5728;&#x4F20;&#x9012;&#x5230;&#x6570;&#x636E;&#x5E93;&#x4E4B;&#x524D;&#xFF0C;&#x503C;&#x4E3A;1&#x5C06;&#x88AB;&#x6DFB;&#x52A0;&#x5230;&#x6240;&#x6709;&#x6570;&#x7EC4;&#x7D22;&#x5F15;&#x503C;&#xFF0C;&#x4ECE;&#x800C;&#x5141;&#x8BB8;Python&#x6837;&#x5F0F;&#x7684;&#x57FA;&#x4E8E;&#x96F6;&#x7684;&#x7D22;&#x5F15;&#x548C;&#x57FA;&#x4E8E;Postgresql one&#x7684;&#x7D22;&#x5F15;&#x4E4B;&#x95F4;&#x5177;&#x6709;&#x66F4;&#x597D;&#x7684;&#x4E92;&#x64CD;&#x4F5C;&#x6027;&#x3002;</span><span class="yiyi-st" id="yiyi-1379">&#x8BF7;&#x6C42;&#x793C;&#x8C8C;Alexey Terentev&#x3002;<a class="changeset-link headerlink reference internal" href="#change-ca799da80767ded4fb507183b68fc51e">&#xB6;</a></span></p><p><span class="yiyi-st" id="yiyi-1380">&#x8FD9;&#x4E2A;&#x6539;&#x53D8;&#x4E5F;&#x88AB;<strong>backported</strong>&#x6539;&#x4E3A;&#xFF1A;0.9.5</span></p><p><span class="yiyi-st" id="yiyi-1381">&#x53C2;&#x8003;&#x6587;&#x732E;&#xFF1A;<a class="reference external" href="http://www.sqlalchemy.org/trac/ticket/2785">&#xFF03;2785</a>&#xFF0C;<a class="reference external" href="https://bitbucket.org/zzzeek/sqlalchemy/pull-request/18">&#x62C9;&#x53D6;&#x8BF7;&#x6C42;bitbucket&#xFF1A;18</a></span></p></li><li><p id="change-1.0.0b1-135"><span class="yiyi-st" id="yiyi-1382"><span class="target" id="change-d52ca2e8075eaaf7fae1903092cfedfe"><strong>[postgresql] [feature] </strong></span> PG8000&#x65B9;&#x8A00;&#x73B0;&#x5728;&#x652F;&#x6301;<a class="reference internal" href="core_engines.html#sqlalchemy.create_engine.params.encoding" title="sqlalchemy.create_engine"><code class="xref py py-paramref docutils literal"><span class="pre">create_engine.encoding</span></code></a>&#x53C2;&#x6570;&#xFF0C;&#x65B9;&#x6CD5;&#x662F;&#x5728;&#x8FDE;&#x63A5;&#x4E0A;&#x8BBE;&#x7F6E;&#x5BA2;&#x6237;&#x7AEF;&#x7F16;&#x7801;&#xFF0C;&#x7136;&#x540E;&#x7531;pg8000&#x62E6;&#x622A;&#x3002;</span><span class="yiyi-st" id="yiyi-1383">&#x62C9;&#x6258;&#x6D1B;&#x514B;&#x6D1B;&#x8BF7;&#x6C42;&#x793C;&#x8C8C;&#x3002;<a class="changeset-link headerlink reference internal" href="#change-d52ca2e8075eaaf7fae1903092cfedfe">&#xB6;</a></span></p><p><span class="yiyi-st" id="yiyi-1384">&#x53C2;&#x8003;&#xFF1A;<a class="reference external" href="https://github.com/zzzeek/sqlalchemy/pull/132">&#x8BF7;&#x6C42;github&#xFF1A;132</a></span></p></li><li><p id="change-1.0.0b1-136"><span class="yiyi-st" id="yiyi-1385"><span class="target" id="change-7e075e5c447c03086a2a0f17646240a1"><strong>[postgresql] [feature] </strong></span>&#x589E;&#x52A0;&#x4E86;&#x5BF9;PG8000&#x539F;&#x751F;JSONB&#x529F;&#x80FD;&#x7684;&#x652F;&#x6301;&#x3002;</span><span class="yiyi-st" id="yiyi-1386">&#x62C9;&#x6258;&#x6D1B;&#x514B;&#x6D1B;&#x8BF7;&#x6C42;&#x793C;&#x8C8C;&#x3002;<a class="changeset-link headerlink reference internal" href="#change-7e075e5c447c03086a2a0f17646240a1">&#xB6;</a></span></p><p><span class="yiyi-st" id="yiyi-1387">&#x53C2;&#x8003;&#xFF1A;<a class="reference external" href="https://github.com/zzzeek/sqlalchemy/pull/132">&#x8BF7;&#x6C42;github&#xFF1A;132</a></span></p></li><li><p id="change-1.0.0b1-137"><span class="yiyi-st" id="yiyi-1388"><span class="target" id="change-64734b17d3eb6c3fd68a94871b4d52fb"><strong>[postgresql] [feature] [pypy] </strong></span>&#x589E;&#x52A0;&#x4E86;&#x5BF9;pypy&#x4E0A;psycopg2cffi DBAPI&#x7684;&#x652F;&#x6301;&#x3002;</span><span class="yiyi-st" id="yiyi-1389">&#x62C9;&#x8BF7;&#x6C42;&#x793C;&#x8C8C;shauns&#x3002;</span></p><div class="admonition seealso"><p class="first admonition-title"><span class="yiyi-st" id="yiyi-1390">&#x4E5F;&#x53EF;&#x4EE5;&#x770B;&#x770B;</span></p><p class="last"><span class="yiyi-st" id="yiyi-1391"><a class="reference internal" href="dialects_postgresql.html#module-sqlalchemy.dialects.postgresql.psycopg2cffi" title="sqlalchemy.dialects.postgresql.psycopg2cffi"><code class="xref py py-mod docutils literal"><span class="pre">sqlalchemy.dialects.postgresql.psycopg2cffi</span></code></a></span></p></div><span class="yiyi-st" id="yiyi-1393"> <a class="changeset-link headerlink reference internal" href="#change-64734b17d3eb6c3fd68a94871b4d52fb">&#xB6;</a></span><p><span class="yiyi-st" id="yiyi-1392">References: <a class="reference external" href="http://www.sqlalchemy.org/trac/ticket/3052">#3052</a>, <a class="reference external" href="https://bitbucket.org/zzzeek/sqlalchemy/pull-request/34">pull request bitbucket:34</a></span></p></li><li><p id="change-1.0.0b1-138"><span class="yiyi-st" id="yiyi-1394"><span class="target" id="change-fe67d804d0a940d8be8496fcaa7991d4"><strong>[postgresql] [feature] </strong></span>&#x589E;&#x52A0;&#x4E86;&#x5BF9;&#x5E94;&#x7528;&#x4E8E;&#x805A;&#x5408;&#x51FD;&#x6570;&#x7684;FILTER&#x5173;&#x952E;&#x5B57;&#x7684;&#x652F;&#x6301;&#xFF0C;Postgresql 9.4&#x652F;&#x6301;&#x8BE5;&#x5173;&#x952E;&#x5B57;&#x3002;</span><span class="yiyi-st" id="yiyi-1395">&#x62C9;&#x5C14;&#x8BF7;&#x6C42;IljaEveril&#xE4;&#x793C;&#x8C8C;&#x3002;</span></p><div class="admonition seealso"><p class="first admonition-title"><span class="yiyi-st" id="yiyi-1396">&#x4E5F;&#x53EF;&#x4EE5;&#x770B;&#x770B;</span></p><p class="last"><span class="yiyi-st" id="yiyi-1397"><a class="reference internal" href="migration_10.html#feature-gh134"><span>Postgresql FILTER keyword</span></a></span></p></div><span class="yiyi-st" id="yiyi-1399"> <a class="changeset-link headerlink reference internal" href="#change-fe67d804d0a940d8be8496fcaa7991d4">&#xB6;</a></span><p><span class="yiyi-st" id="yiyi-1398">&#x53C2;&#x8003;&#x6587;&#x732E;&#xFF1A;<a class="reference external" href="https://github.com/zzzeek/sqlalchemy/pull/134">&#x8BF7;&#x6C42;github&#xFF1A;134</a></span></p></li><li><p id="change-1.0.0b1-139"><span class="yiyi-st" id="yiyi-1400"><span class="target" id="change-ebab99a9425c3e47b7dc731718ef33ff"><strong>[postgresql] [feature] </strong></span>&#x5DF2;&#x7ECF;&#x6DFB;&#x52A0;&#x4E86;&#x5BF9;&#x7269;&#x5316;&#x89C6;&#x56FE;&#x548C;&#x5916;&#x90E8;&#x8868;&#x7684;&#x53CD;&#x6620;&#xFF0C;&#x4EE5;&#x53CA;&#x5BF9;<a class="reference internal" href="core_reflection.html#sqlalchemy.engine.reflection.Inspector.get_view_names" title="sqlalchemy.engine.reflection.Inspector.get_view_names"><code class="xref py py-meth docutils literal"><span class="pre">Inspector.get_view_names()</span></code></a>&#x4E2D;&#x7269;&#x5316;&#x89C6;&#x56FE;&#x7684;&#x652F;&#x6301;&#x4EE5;&#x53CA;&#x65B0;&#x65B9;&#x6CD5;<a class="reference internal" href="dialects_postgresql.html#sqlalchemy.dialects.postgresql.base.PGInspector.get_foreign_table_names" title="sqlalchemy.dialects.postgresql.base.PGInspector.get_foreign_table_names"><code class="xref py py-meth docutils literal"><span class="pre">PGInspector.get_foreign_table_names()</span></code></a>&#x5728;Postgresql&#x7248;&#x672C;&#x7684;<a class="reference internal" href="core_reflection.html#sqlalchemy.engine.reflection.Inspector" title="sqlalchemy.engine.reflection.Inspector"><code class="xref py py-class docutils literal"><span class="pre">Inspector</span></code></a>&#x4E0A;&#x53EF;&#x7528;&#x3002;</span><span class="yiyi-st" id="yiyi-1401">Pull&#x8BF7;&#x6C42;Rodrigo Menezes&#x793C;&#x8C8C;&#x3002;</span></p><div class="admonition seealso"><p class="first admonition-title"><span class="yiyi-st" id="yiyi-1402">&#x4E5F;&#x53EF;&#x4EE5;&#x770B;&#x770B;</span></p><p class="last"><span class="yiyi-st" id="yiyi-1403"><a class="reference internal" href="migration_10.html#feature-2891"><span>Postgresql Dialect reflects Materialized Views, Foreign Tables</span></a></span></p></div><span class="yiyi-st" id="yiyi-1405"> <a class="changeset-link headerlink reference internal" href="#change-ebab99a9425c3e47b7dc731718ef33ff">&#xB6;</a></span><p><span class="yiyi-st" id="yiyi-1404">&#x53C2;&#x8003;&#x6587;&#x732E;&#xFF1A;<a class="reference external" href="http://www.sqlalchemy.org/trac/ticket/2891">&#xFF03;2891</a>&#xFF0C;<a class="reference external" href="https://github.com/zzzeek/sqlalchemy/pull/128">&#x8BF7;&#x6C42;github&#xFF1A;128</a></span></p></li><li><p id="change-1.0.0b1-140"><span class="yiyi-st" id="yiyi-1406"><span class="target" id="change-c2d997de0574a24ee1406fba275c153b"><strong>[postgresql] [feature] </strong></span>&#x901A;&#x8FC7;<a class="reference internal" href="core_metadata.html#sqlalchemy.schema.Table" title="sqlalchemy.schema.Table"><code class="xref py py-class docutils literal"><span class="pre">Table</span></code></a>&#x6784;&#x9020;&#x6E32;&#x67D3;DDL&#x65F6;&#xFF0C;&#x589E;&#x52A0;&#x4E86;&#x5BF9;PG&#x8868;&#x9009;&#x9879;TABLESPACE&#xFF0C;ON COMMIT&#xFF0C;WITH&#xFF08;OUT&#xFF09;OIDS&#x548C;INHERITS&#x7684;&#x652F;&#x6301;&#x3002;</span><span class="yiyi-st" id="yiyi-1407">&#x62C9;&#x8BF7;&#x6C42;&#x793C;&#x8C8C;malikdiarra&#x3002;</span></p><div class="admonition seealso"><p class="first admonition-title"><span class="yiyi-st" id="yiyi-1408">&#x4E5F;&#x53EF;&#x4EE5;&#x770B;&#x770B;</span></p><p class="last"><span class="yiyi-st" id="yiyi-1409"><a class="reference internal" href="dialects_postgresql.html#postgresql-table-options"><span>PostgreSQL Table Options</span></a></span></p></div><span class="yiyi-st" id="yiyi-1411"> <a class="changeset-link headerlink reference internal" href="#change-c2d997de0574a24ee1406fba275c153b">&#xB6;</a></span><p><span class="yiyi-st" id="yiyi-1410">&#x53C2;&#x8003;&#x6587;&#x732E;&#xFF1A;<a class="reference external" href="http://www.sqlalchemy.org/trac/ticket/2051">&#xFF03;2051</a></span></p></li><li><p id="change-1.0.0b1-141"><span class="yiyi-st" id="yiyi-1412">&#x5F53;&#x4F7F;&#x7528;Postgresql&#x7684;&#x68C0;&#x67E5;&#x5668;&#x65F6;&#xFF0C;&#x6DFB;&#x52A0;&#x65B0;&#x65B9;&#x6CD5;<a class="reference internal" href="dialects_postgresql.html#sqlalchemy.dialects.postgresql.base.PGInspector.get_enums" title="sqlalchemy.dialects.postgresql.base.PGInspector.get_enums"><code class="xref py py-meth docutils literal"><span class="pre">PGInspector.get_enums()</span></code></a>&#x5C06;&#x63D0;&#x4F9B;ENUM&#x7C7B;&#x578B;&#x7684;&#x5217;&#x8868;&#x3002;<span class="target" id="change-5bb1041a6093e95b51a5d7ceebb49aa0"><strong>[postgresql] [feature] </strong></span></span><span class="yiyi-st" id="yiyi-1413">&#x8BF7;&#x6C42;&#x793C;&#x7269;Ilya Pekelny&#x3002;<a class="changeset-link headerlink reference internal" href="#change-5bb1041a6093e95b51a5d7ceebb49aa0">&#xB6;</a></span></p><p><span class="yiyi-st" id="yiyi-1414">&#x53C2;&#x8003;&#xFF1A;<a class="reference external" href="https://github.com/zzzeek/sqlalchemy/pull/126">&#x8BF7;&#x6C42;github&#xFF1A;126</a></span></p></li><li><p id="change-1.0.0b1-142"><span class="yiyi-st" id="yiyi-1415"><span class="target" id="change-435eea7e8818574357a2498c0f1400bf"><strong>[postgresql] [bug] </strong></span>&#x4F7F;&#x7528;psycopg2&#x65F6;&#x4FEE;&#x590D;&#x4E86;&#x5BF9;Postgresql UUID&#x7C7B;&#x578B;&#x4E0E;ARRAY&#x7C7B;&#x578B;&#x7684;&#x652F;&#x6301;&#x3002;</span><span class="yiyi-st" id="yiyi-1416">psycopg2&#x65B9;&#x8A00;&#x73B0;&#x5728;&#x4F7F;&#x7528;psycopg2.extras.register_uuid()&#x6302;&#x94A9;&#xFF0C;&#x4EE5;&#x4FBF;&#x59CB;&#x7EC8;&#x5C06;UUID&#x503C;&#x4F5C;&#x4E3A;UUID()&#x5BF9;&#x8C61;&#x4F20;&#x9012;&#x7ED9;DBAPI&#x6216;&#x4ECE;DBAPI&#x4F20;&#x9012;&#x3002;</span><span class="yiyi-st" id="yiyi-1417"><a class="reference internal" href="dialects_postgresql.html#sqlalchemy.dialects.postgresql.UUID.params.as_uuid" title="sqlalchemy.dialects.postgresql.UUID"><code class="xref py py-paramref docutils literal"><span class="pre">UUID.as_uuid</span></code></a>&#x6807;&#x5FD7;&#x4ECD;&#x7136;&#x6709;&#x6548;&#xFF0C;&#x9664;&#x975E;&#x4F7F;&#x7528;psycopg2&#xFF0C;&#x5426;&#x5219;&#x6211;&#x4EEC;&#x9700;&#x8981;&#x5728;&#x7981;&#x7528;&#x65F6;&#x5C06;&#x8FD4;&#x56DE;&#x7684;UUID&#x5BF9;&#x8C61;&#x8F6C;&#x6362;&#x56DE;&#x5B57;&#x7B26;&#x4E32;&#x3002;<a class="changeset-link headerlink reference internal" href="#change-435eea7e8818574357a2498c0f1400bf">&#xB6;</a></span></p><p><span class="yiyi-st" id="yiyi-1418">&#x8FD9;&#x4E2A;&#x6539;&#x53D8;&#x4E5F;&#x88AB;<strong>backported</strong>&#x6539;&#x4E3A;&#xFF1A;0.9.9</span></p><p><span class="yiyi-st" id="yiyi-1419">&#x53C2;&#x8003;&#x6587;&#x732E;&#xFF1A;<a class="reference external" href="http://www.sqlalchemy.org/trac/ticket/2940">&#xFF03;2940</a></span></p></li><li><p id="change-1.0.0b1-143"><span class="yiyi-st" id="yiyi-1420"><span class="target" id="change-17f696f8363a81871bbc9c3d2ed800b8"><strong>[postgresql] [bug] </strong></span>Added support for the <code class="xref py py-class docutils literal"><span class="pre">postgresql.JSONB</span></code> datatype when using psycopg2 2.5.4 or greater, which features native conversion of JSONB data so that SQLAlchemy&#x2019;s converters must be disabled; additionally, the newly added psycopg2 extension <code class="docutils literal"><span class="pre">extras.register_default_jsonb</span></code> is used to establish a JSON deserializer passed to the dialect via the <code class="docutils literal"><span class="pre">json_deserializer</span></code> argument. </span><span class="yiyi-st" id="yiyi-1421">&#x8FD8;&#x4FEE;&#x590D;&#x4E86;Postgresql&#x96C6;&#x6210;&#x6D4B;&#x8BD5;&#xFF0C;&#x5B83;&#x5B9E;&#x9645;&#x4E0A;&#x5E76;&#x672A;&#x5C06;JSONB&#x7C7B;&#x578B;&#x4E0E;JSON&#x7C7B;&#x578B;&#x76F8;&#x53CD;&#x3002;</span><span class="yiyi-st" id="yiyi-1422">&#x8BF7;&#x6C42;Mateusz Susik&#x63D0;&#x4F9B;&#x3002;<a class="changeset-link headerlink reference internal" href="#change-17f696f8363a81871bbc9c3d2ed800b8">&#xB6;</a></span></p><p><span class="yiyi-st" id="yiyi-1423">&#x8FD9;&#x4E2A;&#x6539;&#x53D8;&#x4E5F;&#x88AB;<strong>backported</strong>&#x6539;&#x4E3A;&#xFF1A;0.9.9</span></p><p><span class="yiyi-st" id="yiyi-1424">&#x53C2;&#x8003;&#x6587;&#x732E;&#xFF1A;<a class="reference external" href="https://github.com/zzzeek/sqlalchemy/pull/145">&#x8BF7;&#x6C42;github&#xFF1A;145</a></span></p></li><li><p id="change-1.0.0b1-144"><span class="yiyi-st" id="yiyi-1425"><span class="target" id="change-18280aca8fea699cc94cfd0f8b561703"><strong>[postgresql] [bug] </strong></span>&#x5728;&#x6CE8;&#x518C;HSTORE&#x7C7B;&#x578B;&#x65F6;&#xFF0C;&#x4FEE;&#x590D;&#x4E86;&#x4F7F;&#x7528;&#x201C;array_oid&#x201D;&#x6807;&#x5FD7;&#x7684;&#x65E7;&#x7248;psycopg2&#x7248;&#x672C;<2.4.3，该版本不支持该标志，以及使用native json串行器钩子“register_default_json”与用户定义的<code="" class="docutils literal"><span class="pre">json_deserializer</span>&#x5728;psycopg2&#x7248;&#x672C;<2.5上，其中不包含本地json <a="" class="changeset-link headerlink reference internal" href="#change-18280aca8fea699cc94cfd0f8b561703">&#xB6;</2.5上，其中不包含本地json></2.4.3，该版本不支持该标志，以及使用native></span></p><p><span class="yiyi-st" id="yiyi-1426">&#x8FD9;&#x4E2A;&#x6539;&#x53D8;&#x4E5F;&#x88AB;<strong>backported</strong>&#x6539;&#x4E3A;&#xFF1A;0.9.9</span></p><p></p></li><li><p id="change-1.0.0b1-145"><span class="yiyi-st" id="yiyi-1427"><span class="target" id="change-05ce1a0889e2a9def9137445d02dc6de"><strong>[postgresql] [bug] </strong></span>Fixed bug where Postgresql dialect would fail to render an expression in an <a class="reference internal" href="core_constraints.html#sqlalchemy.schema.Index" title="sqlalchemy.schema.Index"><code class="xref py py-class docutils literal"><span class="pre">Index</span></code></a> that did not correspond directly to a table-bound column; typically when a <a class="reference internal" href="core_sqlelement.html#sqlalchemy.sql.expression.text" title="sqlalchemy.sql.expression.text"><code class="xref py py-func docutils literal"><span class="pre">text()</span></code></a> construct was one of the expressions within the index; or could misinterpret the list of expressions if one or more of them were such an expression.<a class="changeset-link headerlink reference internal" href="#change-05ce1a0889e2a9def9137445d02dc6de">&#xB6;</a></span></p><p><span class="yiyi-st" id="yiyi-1428">&#x8FD9;&#x4E2A;&#x6539;&#x53D8;&#x4E5F;&#x88AB;<strong>backported</strong>&#x6539;&#x4E3A;&#xFF1A;0.9.9</span></p><p><span class="yiyi-st" id="yiyi-1429">&#x53C2;&#x8003;&#x6587;&#x732E;&#xFF1A;<a class="reference external" href="http://www.sqlalchemy.org/trac/ticket/3174">&#xFF03;3174</a></span></p></li><li><p id="change-1.0.0b1-146"><span class="yiyi-st" id="yiyi-1430"><span class="target" id="change-678bda6dc87cf119880054c9592d5a53"><strong>[postgresql] [bug] </strong></span>&#x91CD;&#x65B0;&#x5BA1;&#x89C6;&#x6B64;&#x95EE;&#x9898;&#x5728;0.9.5&#x4E2D;&#x9996;&#x6B21;&#x88AB;&#x4FEE;&#x8865;&#xFF0C;&#x663E;&#x7136;psycopg2&#x7684;<code class="docutils literal"><span class="pre">.closed</span></code>&#x8BBF;&#x95EE;&#x5668;&#x5E76;&#x4E0D;&#x50CF;&#x6211;&#x4EEC;&#x5047;&#x8BBE;&#x7684;&#x90A3;&#x6837;&#x53EF;&#x9760;&#xFF0C;&#x6240;&#x4EE5;&#x6211;&#x4EEC;&#x6DFB;&#x52A0;&#x4E86;&#x4E00;&#x4E2A;&#x5F53;&#x68C0;&#x6D4B;&#x5230;is-disconnect&#x573A;&#x666F;&#x65F6;&#xFF0C;&#x663E;&#x5F0F;&#x68C0;&#x67E5;&#x5F02;&#x5E38;&#x6D88;&#x606F;&#x201C;SSL SYSCALL&#x9519;&#x8BEF;&#xFF1A;&#x9519;&#x8BEF;&#x7684;&#x6587;&#x4EF6;&#x63CF;&#x8FF0;&#x7B26;&#x201D;&#x548C;&#x201C;SSL SYSCALL&#x9519;&#x8BEF;&#xFF1A;EOF&#x68C0;&#x6D4B;&#x5230;&#x201D;&#x3002;</span><span class="yiyi-st" id="yiyi-1431">&#x6211;&#x4EEC;&#x5C06;&#x7EE7;&#x7EED;&#x54A8;&#x8BE2;psycopg2&#x7684;connection.closed&#x4F5C;&#x4E3A;&#x7B2C;&#x4E00;&#x6B21;&#x68C0;&#x67E5;&#x3002;<a class="changeset-link headerlink reference internal" href="#change-678bda6dc87cf119880054c9592d5a53">&#xB6;</a></span></p><p><span class="yiyi-st" id="yiyi-1432">&#x8FD9;&#x4E2A;&#x6539;&#x53D8;&#x4E5F;&#x662F;<strong>backported</strong>&#x6539;&#x4E3A;&#xFF1A;0.9.8</span></p><p><span class="yiyi-st" id="yiyi-1433">&#x53C2;&#x8003;&#x6587;&#x732E;&#xFF1A;<a class="reference external" href="http://www.sqlalchemy.org/trac/ticket/3021">&#xFF03;3021</a></span></p></li><li><p id="change-1.0.0b1-147"><span class="yiyi-st" id="yiyi-1434"><span class="target" id="change-4437affca8615476c90ba2583daa2a88"><strong>[postgresql] [bug] </strong></span>Fixed bug where Postgresql JSON type was not able to persist or otherwise render a SQL NULL column value, rather than a JSON-encoded <code class="docutils literal"><span class="pre">&apos;null&apos;</span></code>. </span><span class="yiyi-st" id="yiyi-1435">&#x4E3A;&#x4E86;&#x652F;&#x6301;&#x8FD9;&#x79CD;&#x60C5;&#x51B5;&#xFF0C;&#x66F4;&#x6539;&#x5982;&#x4E0B;&#xFF1A;</span></p><ul><li><span class="yiyi-st" id="yiyi-1436">&#x73B0;&#x5728;&#x53EF;&#x4EE5;&#x6307;&#x5B9A;<a class="reference internal" href="core_sqlelement.html#sqlalchemy.sql.expression.null" title="sqlalchemy.sql.expression.null"><code class="xref py py-func docutils literal"><span class="pre">null()</span></code></a>&#x503C;&#xFF0C;&#x8FD9;&#x5C06;&#x59CB;&#x7EC8;&#x5BFC;&#x81F4;&#x4EA7;&#x751F;&#x8BE5;&#x8BED;&#x53E5;&#x7684;NULL&#x503C;&#x3002;</span></li><li><span class="yiyi-st" id="yiyi-1437">&#x6DFB;&#x52A0;&#x4E86;&#x4E00;&#x4E2A;&#x65B0;&#x53C2;&#x6570;<a class="reference internal" href="dialects_mysql.html#sqlalchemy.dialects.mysql.JSON.params.none_as_null" title="sqlalchemy.dialects.mysql.JSON"><code class="xref py py-paramref docutils literal"><span class="pre">JSON.none_as_null</span></code></a>&#xFF0C;&#x5F53;True&#x8868;&#x793A;Python <code class="docutils literal"><span class="pre">None</span></code>&#x503C;&#x5E94;&#x8BE5;&#x4F5C;&#x4E3A;SQL NULL&#x6267;&#x884C;&#xFF0C;&#x800C;&#x4E0D;&#x662F;JSON&#x7F16;&#x7801;<code class="docutils literal"><span class="pre">&apos;null&apos;</span></code></span></li></ul><p><span class="yiyi-st" id="yiyi-1438">&#x5BF9;&#x4E8E;&#x975E;psycopg2&#x7684;DBAPI&#xFF0C;&#x5373;pg8000&#xFF0C;&#x4E5F;&#x4F1A;&#x4FEE;&#x590D;NULL&#x7684;&#x7A7A;&#x503C;&#x3002;</span></p><span class="yiyi-st" id="yiyi-1441"> <a class="changeset-link headerlink reference internal" href="#change-4437affca8615476c90ba2583daa2a88">&#xB6;</a></span><p><span class="yiyi-st" id="yiyi-1439">&#x8FD9;&#x4E2A;&#x6539;&#x53D8;&#x4E5F;&#x662F;<strong>backported</strong>&#x6539;&#x4E3A;&#xFF1A;0.9.8</span></p><p><span class="yiyi-st" id="yiyi-1440">&#x53C2;&#x8003;&#x6587;&#x732E;&#xFF1A;<a class="reference external" href="http://www.sqlalchemy.org/trac/ticket/3159">&#xFF03;3159</a></span></p></li><li><p id="change-1.0.0b1-148"><span class="yiyi-st" id="yiyi-1442"><span class="target" id="change-2a6df9779f9af4407c9c4efce9190458"><strong>[postgresql] [bug] </strong></span> DBAPI&#x9519;&#x8BEF;&#x7684;&#x5F02;&#x5E38;&#x5305;&#x88C5;&#x7CFB;&#x7EDF;&#x73B0;&#x5728;&#x53EF;&#x4EE5;&#x5BB9;&#x7EB3;&#x975E;&#x6807;&#x51C6;DBAPI&#x5F02;&#x5E38;&#xFF0C;&#x4F8B;&#x5982;psycopg2 TransactionRollbackError&#x3002;</span><span class="yiyi-st" id="yiyi-1443">&#x8FD9;&#x4E9B;&#x5F02;&#x5E38;&#x73B0;&#x5728;&#x5C06;&#x4F7F;&#x7528;<code class="docutils literal"><span class="pre">sqlalchemy.exc</span></code>&#x4E2D;&#x6700;&#x63A5;&#x8FD1;&#x7684;&#x53EF;&#x7528;&#x5B50;&#x7C7B;&#x8FDB;&#x884C;&#x5F15;&#x53D1;&#xFF0C;&#x5982;&#x679C;&#x662F;TransactionRollbackError&#xFF0C;<code class="docutils literal"><span class="pre">sqlalchemy.exc.OperationalError</span></code>&#x3002;<a class="changeset-link headerlink reference internal" href="#change-2a6df9779f9af4407c9c4efce9190458">&#xB6;</a></span></p><p><span class="yiyi-st" id="yiyi-1444">&#x8FD9;&#x4E2A;&#x6539;&#x53D8;&#x4E5F;&#x662F;<strong>backported</strong>&#x6539;&#x4E3A;&#xFF1A;0.9.8</span></p><p><span class="yiyi-st" id="yiyi-1445">&#x53C2;&#x8003;&#x6587;&#x732E;&#xFF1A;<a class="reference external" href="http://www.sqlalchemy.org/trac/ticket/3075">&#xFF03;3075</a></span></p></li><li><p id="change-1.0.0b1-149"><span class="yiyi-st" id="yiyi-1446"><span class="target" id="change-947dc4e5d0e46e59a1fec0630c63cfd8"><strong>[postgresql] [bug] </strong></span>&#x4FEE;&#x6B63;&#x4E86;<a class="reference internal" href="dialects_postgresql.html#sqlalchemy.dialects.postgresql.array" title="sqlalchemy.dialects.postgresql.array"><code class="xref py py-class docutils literal"><span class="pre">postgresql.array</span></code></a>&#x5BF9;&#x8C61;&#x4E2D;&#x7684;&#x4E00;&#x4E2A;&#x9519;&#x8BEF;&#xFF0C;&#x5176;&#x4E2D;&#x4E0E;&#x666E;&#x901A;Python&#x5217;&#x8868;&#x7684;&#x6BD4;&#x8F83;&#x5C06;&#x65E0;&#x6CD5;&#x4F7F;&#x7528;&#x6B63;&#x786E;&#x7684;&#x6570;&#x7EC4;&#x6784;&#x9020;&#x51FD;&#x6570;&#x3002;</span><span class="yiyi-st" id="yiyi-1447">&#x62C9;&#x8BF7;&#x6C42;&#x793C;&#x8C8C;Andrew&#x3002;<a class="changeset-link headerlink reference internal" href="#change-947dc4e5d0e46e59a1fec0630c63cfd8">&#xB6;</a></span></p><p><span class="yiyi-st" id="yiyi-1448">&#x8FD9;&#x4E2A;&#x6539;&#x53D8;&#x4E5F;&#x662F;<strong>backported</strong>&#x6539;&#x4E3A;&#xFF1A;0.9.8</span></p><p><span class="yiyi-st" id="yiyi-1449">&#x53C2;&#x8003;&#x6587;&#x732E;&#xFF1A;<a class="reference external" href="http://www.sqlalchemy.org/trac/ticket/3141">&#xFF03;3141</a>&#xFF0C;<a class="reference external" href="https://github.com/zzzeek/sqlalchemy/pull/124">&#x8BF7;&#x6C42;github&#xFF1A;124</a></span></p></li><li><p id="change-1.0.0b1-150"><span class="yiyi-st" id="yiyi-1450"><span class="target" id="change-085435079f7139f16f13675776d31727"><strong>[postgresql] [bug] </strong></span>&#x4E3A;&#x51FD;&#x6570;&#x6DFB;&#x52A0;&#x4E86;&#x652F;&#x6301;&#x7684;<a class="reference internal" href="core_functions.html#sqlalchemy.sql.functions.FunctionElement.alias" title="sqlalchemy.sql.functions.FunctionElement.alias"><code class="xref py py-meth docutils literal"><span class="pre">FunctionElement.alias()</span></code></a>&#x65B9;&#x6CD5;&#x3002; <code class="docutils literal"><span class="pre">func</span></code>&#x6784;&#x9020;&#x3002;</span><span class="yiyi-st" id="yiyi-1451">&#x4EE5;&#x524D;&#xFF0C;&#x6B64;&#x65B9;&#x6CD5;&#x7684;&#x884C;&#x4E3A;&#x672A;&#x5B9A;&#x4E49;&#x3002;</span><span class="yiyi-st" id="yiyi-1452">&#x5F53;&#x524D;&#x884C;&#x4E3A;&#x6A21;&#x4EFF;0.9.4&#x4E4B;&#x524D;&#x7684;&#x884C;&#x4E3A;&#xFF0C;&#x5373;&#x8BE5;&#x51FD;&#x6570;&#x88AB;&#x8F6C;&#x6362;&#x4E3A;&#x5177;&#x6709;&#x7ED9;&#x5B9A;&#x522B;&#x540D;&#x7684;&#x5355;&#x5217;FROM&#x5B50;&#x53E5;&#xFF0C;&#x5176;&#x4E2D;&#x5217;&#x672C;&#x8EAB;&#x662F;&#x533F;&#x540D;&#x547D;&#x540D;&#x7684;&#x3002;<a class="changeset-link headerlink reference internal" href="#change-085435079f7139f16f13675776d31727">&#xB6;</a></span></p><p><span class="yiyi-st" id="yiyi-1453">&#x8FD9;&#x4E2A;&#x6539;&#x53D8;&#x4E5F;&#x662F;<strong>backported</strong>&#x6539;&#x4E3A;&#xFF1A;0.9.8</span></p><p><span class="yiyi-st" id="yiyi-1454">&#x53C2;&#x8003;&#x6587;&#x732E;&#xFF1A;<a class="reference external" href="http://www.sqlalchemy.org/trac/ticket/3137">&#xFF03;3137</a></span></p></li><li><p id="change-1.0.0b1-151"><span class="yiyi-st" id="yiyi-1455"><span class="target" id="change-fd59b588a71617bcbc79e1d3af27e0fb"><strong>[postgresql] [bug] [pg8000] </strong></span>&#x4FEE;&#x6B63;&#x4E86;0.9.5&#x7248;&#x672C;&#x4E2D;&#x65B0;&#x589E;&#x7684;pg8000&#x9694;&#x79BB;&#x7EA7;&#x522B;&#x529F;&#x80FD;&#x5BFC;&#x81F4;&#x7684;&#x9519;&#x8BEF;&#xFF0C;&#x5176;&#x4E2D;&#x5F15;&#x64CE;&#x7EA7;&#x522B;&#x7684;&#x9694;&#x79BB;&#x7EA7;&#x522B;&#x53C2;&#x6570;&#x4F1A;&#x5728;&#x8FDE;&#x63A5;&#x65F6;&#x4EA7;&#x751F;&#x9519;&#x8BEF;<a class="changeset-link headerlink reference internal" href="#change-fd59b588a71617bcbc79e1d3af27e0fb">&#xB6; t2 &gt;</a></span></p><p><span class="yiyi-st" id="yiyi-1456">&#x8FD9;&#x4E2A;&#x6539;&#x53D8;&#x4E5F;&#x88AB;<strong>backported</strong>&#x6539;&#x4E3A;&#xFF1A;0.9.7</span></p><p><span class="yiyi-st" id="yiyi-1457">&#x53C2;&#x8003;&#x6587;&#x732E;&#xFF1A;<a class="reference external" href="http://www.sqlalchemy.org/trac/ticket/3134">&#xFF03;3134</a></span></p></li><li><p id="change-1.0.0b1-152"><span class="yiyi-st" id="yiyi-1458"><span class="target" id="change-817ce246e076efdc67696a7e59f8a604"><strong>[postgresql] [bug] </strong></span>&#x5F53;&#x786E;&#x5B9A;&#x5F02;&#x5E38;&#x662F;&#x5426;&#x4E3A;&#x201C;&#x65AD;&#x5F00;&#x201D;&#x9519;&#x8BEF;&#x65F6;&#xFF0C;&#x73B0;&#x5728;&#x67E5;&#x9605;psycopg2 <code class="docutils literal"><span class="pre">.closed</span></code>&#x8BBF;&#x95EE;&#x5668;&#xFF1B;&#x7406;&#x60F3;&#x60C5;&#x51B5;&#x4E0B;&#xFF0C;&#x8FD9;&#x5E94;&#x8BE5;&#x4E0D;&#x9700;&#x8981;&#x5BF9;&#x5F02;&#x5E38;&#x6D88;&#x606F;&#x8FDB;&#x884C;&#x4EFB;&#x4F55;&#x5176;&#x4ED6;&#x68C0;&#x67E5;&#x6765;&#x68C0;&#x6D4B;&#x65AD;&#x5F00;&#x8FDE;&#x63A5;&#xFF0C;&#x4F46;&#x662F;&#x6211;&#x4EEC;&#x5C06;&#x4FDD;&#x7559;&#x73B0;&#x6709;&#x7684;&#x6D88;&#x606F;&#x4F5C;&#x4E3A;&#x540E;&#x5907;&#x6D88;&#x606F;&#x3002;</span><span class="yiyi-st" id="yiyi-1459">&#x8FD9;&#x5E94;&#x8BE5;&#x80FD;&#x591F;&#x5904;&#x7406;&#x65B0;&#x7684;&#x60C5;&#x51B5;&#xFF0C;&#x5982;&#x201C;SSL EOF&#x201D;&#x6761;&#x4EF6;&#x3002;</span><span class="yiyi-st" id="yiyi-1460">&#x62C9;&#x5FB7;&#x8BF7;&#x6C42;&#x793C;&#x8C8C;&#x5FB7;&#x514B;&#x7C73;&#x52D2;&#x3002;<a class="changeset-link headerlink reference internal" href="#change-817ce246e076efdc67696a7e59f8a604">&#xB6;</a></span></p><p><span class="yiyi-st" id="yiyi-1461">&#x8FD9;&#x4E2A;&#x6539;&#x53D8;&#x4E5F;&#x88AB;<strong>backported</strong>&#x6539;&#x4E3A;&#xFF1A;0.9.5</span></p><p><span class="yiyi-st" id="yiyi-1462">&#x53C2;&#x8003;&#x6587;&#x732E;&#xFF1A;<a class="reference external" href="http://www.sqlalchemy.org/trac/ticket/3021">&#xFF03;3021</a>&#xFF0C;<a class="reference external" href="https://github.com/zzzeek/sqlalchemy/pull/87">&#x8BF7;&#x6C42;github&#xFF1A;87</a></span></p></li><li><p id="change-1.0.0b1-153"><span class="yiyi-st" id="yiyi-1463"><span class="target" id="change-841cb0d0b58c849de0668c465b375c91"><strong>[postgresql] [bug] </strong></span>&#x4E3A;PG <a class="reference internal" href="dialects_postgresql.html#sqlalchemy.dialects.postgresql.HSTORE" title="sqlalchemy.dialects.postgresql.HSTORE"><code class="xref py py-class docutils literal"><span class="pre">HSTORE</span></code></a>&#x7C7B;&#x578B;&#x6DFB;&#x52A0;&#x4E86;<code class="docutils literal"><span class="pre">hashable=False</span></code>&#x6807;&#x5FD7;&#xFF0C;&#x8FD9;&#x662F;&#x5141;&#x8BB8;ORM&#x8DF3;&#x8FC7;&#x5C1D;&#x8BD5;&#x5728;&#x6DF7;&#x5408;&#x5217;/&#x5B9E;&#x4F53;&#x5217;&#x8868;&#x4E2D;&#x8BF7;&#x6C42;ORM&#x6620;&#x5C04;&#x7684;HSTORE&#x5217;&#x65F6;&#x201C;&#x6563;&#x5217;&#x201D;&#x3002;</span><span class="yiyi-st" id="yiyi-1464">&#x8865;&#x4E01;&#x793C;&#x8C8C;Gunnlaugur&#xDE;&#xF3;rBriem&#x3002;<a class="changeset-link headerlink reference internal" href="#change-841cb0d0b58c849de0668c465b375c91">&#xB6;</a></span></p><p><span class="yiyi-st" id="yiyi-1465">This change is also <strong>backported</strong> to: 0.9.5, 0.8.7</span></p><p><span class="yiyi-st" id="yiyi-1466">&#x53C2;&#x8003;&#x6587;&#x732E;&#xFF1A;<a class="reference external" href="http://www.sqlalchemy.org/trac/ticket/3053">&#xFF03;3053</a></span></p></li><li><p id="change-1.0.0b1-154"><span class="yiyi-st" id="yiyi-1467"><span class="target" id="change-391e08a06b2dda8bd1502d285f7fa3ec"><strong>[postgresql] [bug] </strong></span>&#x6DFB;&#x52A0;&#x4E86;&#x4E00;&#x4E2A;&#x65B0;&#x7684;&#x201C;&#x65AD;&#x5F00;&#x8FDE;&#x63A5;&#x201D;&#x6D88;&#x606F;&#x201C;&#x8FDE;&#x63A5;&#x610F;&#x5916;&#x5173;&#x95ED;&#x201D;&#x3002;</span><span class="yiyi-st" id="yiyi-1468">&#x8FD9;&#x4F3C;&#x4E4E;&#x4E0E;&#x66F4;&#x65B0;&#x7248;&#x672C;&#x7684;SSL&#x6709;&#x5173;&#x3002;</span><span class="yiyi-st" id="yiyi-1469">&#x62C9;&#x63D0;&#x8BF7;&#x6C42;Antti Haapala&#x793C;&#x8C8C;&#x3002;<a class="changeset-link headerlink reference internal" href="#change-391e08a06b2dda8bd1502d285f7fa3ec">&#xB6;</a></span></p><p><span class="yiyi-st" id="yiyi-1470">This change is also <strong>backported</strong> to: 0.9.5, 0.8.7</span></p><p><span class="yiyi-st" id="yiyi-1471">&#x53C2;&#x8003;&#xFF1A;<a class="reference external" href="https://bitbucket.org/zzzeek/sqlalchemy/pull-request/13">&#x62C9;&#x53D6;&#x8BF7;&#x6C42;bitbucket&#xFF1A;13</a></span></p></li><li><p id="change-1.0.0b1-155"><span class="yiyi-st" id="yiyi-1472"><span class="target" id="change-00dd6007a5498f39661875f8752be36a"><strong>[postgresql] [bug] </strong></span>The Postgresql <a class="reference internal" href="dialects_postgresql.html#sqlalchemy.dialects.postgresql.ENUM" title="sqlalchemy.dialects.postgresql.ENUM"><code class="xref py py-class docutils literal"><span class="pre">postgresql.ENUM</span></code></a> type will emit a DROP TYPE instruction when a plain <code class="docutils literal"><span class="pre">table.drop()</span></code> is called, assuming the object is not associated directly with a <a class="reference internal" href="core_metadata.html#sqlalchemy.schema.MetaData" title="sqlalchemy.schema.MetaData"><code class="xref py py-class docutils literal"><span class="pre">MetaData</span></code></a> object. </span><span class="yiyi-st" id="yiyi-1473">&#x4E3A;&#x4E86;&#x9002;&#x5E94;&#x591A;&#x4E2A;&#x8868;&#x4E4B;&#x95F4;&#x5171;&#x4EAB;&#x679A;&#x4E3E;&#x7C7B;&#x578B;&#x7684;&#x7528;&#x4F8B;&#xFF0C;&#x7C7B;&#x578B;&#x5E94;&#x8BE5;&#x76F4;&#x63A5;&#x4E0E;<a class="reference internal" href="core_metadata.html#sqlalchemy.schema.MetaData" title="sqlalchemy.schema.MetaData"><code class="xref py py-class docutils literal"><span class="pre">MetaData</span></code></a>&#x5BF9;&#x8C61;&#x5173;&#x8054;&#xFF1B;&#x5728;&#x8FD9;&#x79CD;&#x60C5;&#x51B5;&#x4E0B;&#xFF0C;&#x7C7B;&#x578B;&#x53EA;&#x80FD;&#x5728;&#x5143;&#x6570;&#x636E;&#x7EA7;&#x522B;&#x521B;&#x5EFA;&#xFF0C;&#x6216;&#x8005;&#x76F4;&#x63A5;&#x521B;&#x5EFA;&#x3002;</span><span class="yiyi-st" id="yiyi-1474">&#x4E00;&#x822C;&#x6765;&#x8BF4;&#xFF0C;Postgresql&#x679A;&#x4E3E;&#x7C7B;&#x578B;&#x7684;&#x521B;&#x5EFA;/&#x5220;&#x9664;&#x89C4;&#x5219;&#x5DF2;&#x88AB;&#x9AD8;&#x5EA6;&#x91CD;&#x6784;&#x3002;</span></p><div class="admonition seealso"><p class="first admonition-title"><span class="yiyi-st" id="yiyi-1475">&#x4E5F;&#x53EF;&#x4EE5;&#x770B;&#x770B;</span></p><p class="last"><span class="yiyi-st" id="yiyi-1476"><a class="reference internal" href="migration_10.html#change-3319"><span>Overhaul of ENUM type create/drop rules</span></a></span></p></div><span class="yiyi-st" id="yiyi-1478"> <a class="changeset-link headerlink reference internal" href="#change-00dd6007a5498f39661875f8752be36a">&#xB6;</a></span><p><span class="yiyi-st" id="yiyi-1477">&#x53C2;&#x8003;&#x6587;&#x732E;&#xFF1A;<a class="reference external" href="http://www.sqlalchemy.org/trac/ticket/3319">&#xFF03;3319</a></span></p></li><li><p id="change-1.0.0b1-156"><span class="yiyi-st" id="yiyi-1479"><span class="target" id="change-1fc9593e4484eb96e7d37ce3877329e6"><strong>[postgresql] [bug] </strong></span>The <code class="xref py py-meth docutils literal"><span class="pre">PGDialect.has_table()</span></code> method will now query against <code class="docutils literal"><span class="pre">pg_catalog.pg_table_is_visible(c.oid)</span></code>, rather than testing for an exact schema match, when the schema name is None; this so that the method will also illustrate that temporary tables are present. </span><span class="yiyi-st" id="yiyi-1480">&#x8BF7;&#x6CE8;&#x610F;&#xFF0C;&#x8FD9;&#x662F;&#x4E00;&#x4E2A;&#x884C;&#x4E3A;&#x6539;&#x53D8;&#xFF0C;&#x56E0;&#x4E3A;Postgresql&#x5141;&#x8BB8;&#x975E;&#x4E34;&#x65F6;&#x8868;&#x4EE5;&#x9ED8;&#x9ED8;&#x65B9;&#x5F0F;&#x8986;&#x76D6;&#x73B0;&#x6709;&#x7684;&#x5177;&#x6709;&#x76F8;&#x540C;&#x540D;&#x79F0;&#x7684;&#x4E34;&#x65F6;&#x8868;&#xFF0C;&#x6240;&#x4EE5;&#x8FD9;&#x6539;&#x53D8;&#x4E86;<code class="docutils literal"><span class="pre">checkfirst</span></code>&#x5728;&#x8BE5;&#x5F02;&#x5E38;&#x60C5;&#x51B5;&#x4E0B;&#x7684;&#x884C;&#x4E3A;&#x3002;</span></p><div class="admonition seealso"><p class="first admonition-title"><span class="yiyi-st" id="yiyi-1481">&#x4E5F;&#x53EF;&#x4EE5;&#x770B;&#x770B;</span></p><p class="last"><span class="yiyi-st" id="yiyi-1482"><a class="reference internal" href="migration_10.html#change-3264"><span>Postgresql has_table() now works for temporary tables</span></a></span></p></div><span class="yiyi-st" id="yiyi-1484"> <a class="changeset-link headerlink reference internal" href="#change-1fc9593e4484eb96e7d37ce3877329e6">&#xB6;</a></span><p><span class="yiyi-st" id="yiyi-1483">&#x53C2;&#x8003;&#x6587;&#x732E;&#xFF1A;<a class="reference external" href="http://www.sqlalchemy.org/trac/ticket/3264">&#xFF03;3264</a></span></p></li><li><p id="change-1.0.0b1-157"><span class="yiyi-st" id="yiyi-1485"><span class="target" id="change-1174b8b08516d0b487d6d8520fcc3b4f"><strong>[postgresql] [enhancement] </strong></span>&#x5728;Postgresql&#x65B9;&#x8A00;&#x4E2D;&#x6DFB;&#x52A0;&#x4E86;&#x4E00;&#x4E2A;&#x65B0;&#x7C7B;&#x578B;&#x7684;<a class="reference internal" href="dialects_postgresql.html#sqlalchemy.dialects.postgresql.OID" title="sqlalchemy.dialects.postgresql.OID"><code class="xref py py-class docutils literal"><span class="pre">postgresql.OID</span></code></a>&#x3002;</span><span class="yiyi-st" id="yiyi-1486">&#x867D;&#x7136;&#x201C;oid&#x201D;&#x901A;&#x5E38;&#x662F;PG&#x4E2D;&#x7684;&#x79C1;&#x6709;&#x7C7B;&#x578B;&#xFF0C;&#x4F46;&#x5728;&#x73B0;&#x4EE3;&#x7248;&#x672C;&#x4E2D;&#x5E76;&#x672A;&#x516C;&#x5F00;&#xFF0C;&#x4F46;&#x6709;&#x4E00;&#x4E9B;PG&#x7528;&#x4F8B;&#xFF0C;&#x4F8B;&#x5982;&#x53EF;&#x80FD;&#x66B4;&#x9732;&#x8FD9;&#x4E9B;&#x7C7B;&#x578B;&#x7684;&#x5927;&#x5BF9;&#x8C61;&#x652F;&#x6301;&#xFF0C;&#x4EE5;&#x53CA;&#x67D0;&#x4E9B;&#x7528;&#x6237;&#x62A5;&#x544A;&#x7684;&#x6A21;&#x5F0F;&#x53CD;&#x5C04;&#x7528;&#x4F8B;&#x3002; <a class="changeset-link headerlink reference internal" href="#change-1174b8b08516d0b487d6d8520fcc3b4f">&#xB6; T0&gt;</a></span></p><p><span class="yiyi-st" id="yiyi-1487">&#x8FD9;&#x4E2A;&#x6539;&#x53D8;&#x4E5F;&#x88AB;<strong>backported</strong>&#x6539;&#x4E3A;&#xFF1A;0.9.5</span></p><p><span class="yiyi-st" id="yiyi-1488">&#x53C2;&#x8003;&#x6587;&#x732E;&#xFF1A;<a class="reference external" href="http://www.sqlalchemy.org/trac/ticket/3002">&#xFF03;3002</a></span></p></li></ul></div><div class="section" id="change-1.0.0b1-mysql"><h3><span class="yiyi-st" id="yiyi-1489">MySQL&#x7684;<a class="headerlink" href="#change-1.0.0b1-mysql" title="Permalink to this headline">&#xB6; T0&gt;</a></span></h3><ul class="simple"><li><p id="change-1.0.0b1-158"><span class="yiyi-st" id="yiyi-1490"><span class="target" id="change-888c2e0789c5c34cc840a4b8462d9b9f"><strong>[mysql] [feature] </strong></span>&#x73B0;&#x5728;&#xFF0C;MySQL&#x65B9;&#x8A00;&#x5728;&#x6240;&#x6709;&#x60C5;&#x51B5;&#x4E0B;&#x90FD;&#x4F7F;&#x7528;NULL / NOT NULL&#x5448;&#x73B0;TIMESTAMP&#xFF0C;&#x56E0;&#x6B64;&#x542F;&#x7528;<code class="docutils literal"><span class="pre">explicit_defaults_for_timestamp</span></code>&#x6807;&#x5FD7;&#x7684;MySQL 5.6.6&#x5C06;&#x5141;&#x8BB8;TIMESTAMP&#x5728;<code class="docutils literal"><span class="pre">nullable=False</span></code>&#x65F6;&#x7EE7;&#x7EED;&#x6309;&#x9884;&#x671F;&#x5DE5;&#x4F5C;&#x3002;</span><span class="yiyi-st" id="yiyi-1491">&#x73B0;&#x6709;&#x7684;&#x5E94;&#x7528;&#x7A0B;&#x5E8F;&#x4E0D;&#x53D7;&#x5F71;&#x54CD;&#xFF0C;&#x56E0;&#x4E3A;SQLAlchemy&#x603B;&#x662F;&#x4E3A;<code class="docutils literal"><span class="pre">nullable=True</span></code>&#x7684;TIMESTAMP&#x5217;&#x53D1;&#x51FA;NULL&#x3002;</span></p><div class="admonition seealso"><p class="first admonition-title"><span class="yiyi-st" id="yiyi-1492">&#x4E5F;&#x53EF;&#x4EE5;&#x770B;&#x770B;</span></p><p><span class="yiyi-st" id="yiyi-1493"><a class="reference internal" href="migration_10.html#change-3155"><span>MySQL TIMESTAMP Type now renders NULL / NOT NULL in all cases</span></a></span></p><p class="last"><span class="yiyi-st" id="yiyi-1494"><a class="reference internal" href="dialects_mysql.html#mysql-timestamp-null"><span>TIMESTAMP Columns and NULL</span></a></span></p></div><span class="yiyi-st" id="yiyi-1496"> <a class="changeset-link headerlink reference internal" href="#change-888c2e0789c5c34cc840a4b8462d9b9f">&#xB6;</a></span><p><span class="yiyi-st" id="yiyi-1495">&#x53C2;&#x8003;&#x6587;&#x732E;&#xFF1A;<a class="reference external" href="http://www.sqlalchemy.org/trac/ticket/3155">&#xFF03;3155</a></span></p></li><li><p id="change-1.0.0b1-159"><span class="yiyi-st" id="yiyi-1497"><span class="target" id="change-4a9ddc227788a62f6b733bcdef159f74"><strong>[mysql] [feature] </strong></span>&#x5728;Python 2&#x4E0B;&#x5C06;MySQLdb&#x548C;Pymysql&#x7684;&#x201C;supports_unicode_statements&#x201D;&#x6807;&#x5FD7;&#x66F4;&#x65B0;&#x4E3A;True&#x3002;</span><span class="yiyi-st" id="yiyi-1498">&#x8FD9;&#x662F;&#x6307;SQL&#x8BED;&#x53E5;&#x672C;&#x8EAB;&#xFF0C;&#x800C;&#x4E0D;&#x662F;&#x53C2;&#x6570;&#xFF0C;&#x5E76;&#x5F71;&#x54CD;&#x4F7F;&#x7528;&#x975E;ASCII&#x5B57;&#x7B26;&#x7684;&#x8868;&#x548C;&#x5217;&#x540D;&#x79F0;&#x7B49;&#x95EE;&#x9898;&#x3002;</span><span class="yiyi-st" id="yiyi-1499">&#x8FD9;&#x4E9B;&#x9A71;&#x52A8;&#x7A0B;&#x5E8F;&#x4F3C;&#x4E4E;&#x90FD;&#x652F;&#x6301;Python 2 Unicode&#x5BF9;&#x8C61;&#xFF0C;&#x800C;&#x5728;&#x73B0;&#x4EE3;&#x7248;&#x672C;&#x4E2D;&#x6CA1;&#x6709;&#x95EE;&#x9898;&#x3002;<a class="changeset-link headerlink reference internal" href="#change-4a9ddc227788a62f6b733bcdef159f74">&#xB6;</a></span></p><p><span class="yiyi-st" id="yiyi-1500">&#x53C2;&#x8003;&#x6587;&#x732E;&#xFF1A;<a class="reference external" href="http://www.sqlalchemy.org/trac/ticket/3121">&#xFF03;3121</a></span></p></li><li><p id="change-1.0.0b1-160"><span class="yiyi-st" id="yiyi-1501"><span class="target" id="change-e9507a4fa2966caf6fbdf8f3d92b30a6"><strong>[mysql] [bug] </strong></span>&#x589E;&#x52A0;&#x4E86;&#x5BF9;&apos;utf8_bin&apos;&#x6392;&#x5E8F;&#x68C0;&#x67E5;&#x5468;&#x56F4;&#x7684;MySQLdb&#x65B9;&#x8A00;&#x7684;&#x7248;&#x672C;&#x68C0;&#x67E5;&#xFF0C;&#x56E0;&#x4E3A;&#x8FD9;&#x5728;MySQL&#x670D;&#x52A1;&#x5668;<5.0中失败。<a class="changeset-link headerlink reference internal" href="#change-e9507a4fa2966caf6fbdf8f3d92b30a6">&#xB6;</5.0中失败。<a></span></p><p><span class="yiyi-st" id="yiyi-1502">&#x8FD9;&#x4E2A;&#x6539;&#x53D8;&#x4E5F;&#x88AB;<strong>backported</strong>&#x6539;&#x4E3A;&#xFF1A;0.9.9</span></p><p><span class="yiyi-st" id="yiyi-1503">&#x53C2;&#x8003;&#x6587;&#x732E;&#xFF1A;<a class="reference external" href="http://www.sqlalchemy.org/trac/ticket/3274">&#xFF03;3274</a></span></p></li><li><p id="change-1.0.0b1-161"><span class="yiyi-st" id="yiyi-1504"><span class="target" id="change-82e5f7ede904a4dfc77f0ed73d7d6de6"><strong>[mysql] [bug] [mysqlconnector] </strong></span>Mysqlconnector as of version 2.0, probably as a side effect of the python 3 merge, now does not expect percent signs (e.g. as used as the modulus operator and others) to be doubled, even when using the &#x201C;pyformat&#x201D; bound parameter format (this change is not documented by Mysqlconnector). </span><span class="yiyi-st" id="yiyi-1505">&#x5F53;&#x68C0;&#x6D4B;&#x6A21;&#x8FD0;&#x7B97;&#x7B26;&#x662F;&#x5426;&#x5E94;&#x8BE5;&#x5448;&#x73B0;&#x4E3A;<code class="docutils literal"><span class="pre">%%</span></code>&#x6216;<code class="docutils literal"><span class="pre">%</span></code>&#x65F6;&#xFF0C;&#x65B9;&#x8A00;&#x73B0;&#x5728;&#x68C0;&#x67E5;py2k&#x548C;mysqlconnector&#x5C0F;&#x4E8E;2.0&#x7248;&#x3002;<a class="changeset-link headerlink reference internal" href="#change-82e5f7ede904a4dfc77f0ed73d7d6de6">&#xB6;</a></span></p><p><span class="yiyi-st" id="yiyi-1506">&#x8FD9;&#x4E2A;&#x6539;&#x53D8;&#x4E5F;&#x662F;<strong>backported</strong>&#x6539;&#x4E3A;&#xFF1A;0.9.8</span></p><p></p></li><li><p id="change-1.0.0b1-162"><span class="yiyi-st" id="yiyi-1507"><span class="target" id="change-b1e1955593b6611049d3537fca258c4a"><strong>[mysql] [bug] [mysqlconnector] </strong></span> Unicode SQL&#x73B0;&#x5728;&#x4F20;&#x9012;&#x7ED9;MySQLconnector 2.0&#x53CA;&#x66F4;&#x9AD8;&#x7248;&#x672C;&#xFF1B;&#x5BF9;&#x4E8E;Py2k&#x548C;MySQL <2.0，字符串被编码。<a class="changeset-link headerlink reference internal" href="#change-b1e1955593b6611049d3537fca258c4a">&#xB6;</2.0，字符串被编码。<a></span></p><p><span class="yiyi-st" id="yiyi-1508">&#x8FD9;&#x4E2A;&#x6539;&#x53D8;&#x4E5F;&#x662F;<strong>backported</strong>&#x6539;&#x4E3A;&#xFF1A;0.9.8</span></p><p></p></li><li><p id="change-1.0.0b1-163"><span class="yiyi-st" id="yiyi-1509"><span class="target" id="change-cc47f2dadf913e8df10f13d8f6369b8a"><strong>[mysql] [bug] </strong></span>MySQL error 2014 &#x201C;commands out of sync&#x201D; appears to be raised as a ProgrammingError, not OperationalError, in modern MySQL-Python versions; all MySQL error codes that are tested for &#x201C;is disconnect&#x201D; are now checked within OperationalError and ProgrammingError regardless.<a class="changeset-link headerlink reference internal" href="#change-cc47f2dadf913e8df10f13d8f6369b8a">&#xB6;</a></span></p><p><span class="yiyi-st" id="yiyi-1510">This change is also <strong>backported</strong> to: 0.9.7, 0.8.7</span></p><p><span class="yiyi-st" id="yiyi-1511">&#x53C2;&#x8003;&#x6587;&#x732E;&#xFF1A;<a class="reference external" href="http://www.sqlalchemy.org/trac/ticket/3101">&#xFF03;3101</a></span></p></li><li><p id="change-1.0.0b1-164"><span class="yiyi-st" id="yiyi-1512"><span class="target" id="change-aeee11434848543451def6bb5409fee7"><strong>[mysql] [bug] </strong></span>Fixed bug where column names added to <code class="docutils literal"><span class="pre">mysql_length</span></code> parameter on an index needed to have the same quoting for quoted names in order to be recognized. </span><span class="yiyi-st" id="yiyi-1513">&#x8BE5;&#x4FEE;&#x590D;&#x4F7F;&#x5F97;&#x5F15;&#x53F7;&#x662F;&#x53EF;&#x9009;&#x7684;&#xFF0C;&#x4F46;&#x4E5F;&#x63D0;&#x4F9B;&#x4E86;&#x65E7;&#x7684;&#x884C;&#x4E3A;&#xFF0C;&#x4EE5;&#x4FBF;&#x4E0E;&#x4F7F;&#x7528;&#x53D8;&#x901A;&#x65B9;&#x6CD5;&#x7684;&#x5411;&#x540E;&#x517C;&#x5BB9;&#x3002;<a class="changeset-link headerlink reference internal" href="#change-aeee11434848543451def6bb5409fee7">&#xB6;</a></span></p><p><span class="yiyi-st" id="yiyi-1514">This change is also <strong>backported</strong> to: 0.9.5, 0.8.7</span></p><p><span class="yiyi-st" id="yiyi-1515">&#x53C2;&#x8003;&#x6587;&#x732E;&#xFF1A;<a class="reference external" href="http://www.sqlalchemy.org/trac/ticket/3085">&#xFF03;3085</a></span></p></li><li><p id="change-1.0.0b1-165"><span class="yiyi-st" id="yiyi-1516"><span class="target" id="change-028aac30fa34b4cac9c150baf9952dc3"><strong>[mysql] [bug] </strong></span>&#x589E;&#x52A0;&#x4E86;&#x5BF9;&#x4F7F;&#x7528;&#x7B49;&#x53F7;&#x5728;&#x7D22;&#x5F15;&#x4E2D;&#x5305;&#x542B;KEY_BLOCK_SIZE&#x7684;&#x8868;&#x6765;&#x53CD;&#x6620;&#x8868;&#x7684;&#x652F;&#x6301;&#x3002;</span><span class="yiyi-st" id="yiyi-1517">&#x62C9;&#x8BF7;&#x6C42;&#x793C;&#x8C8C;&#x8096;&#x6069;McGivern&#x3002;<a class="changeset-link headerlink reference internal" href="#change-028aac30fa34b4cac9c150baf9952dc3">&#xB6;</a></span></p><p><span class="yiyi-st" id="yiyi-1518">This change is also <strong>backported</strong> to: 0.9.5, 0.8.7</span></p><p><span class="yiyi-st" id="yiyi-1519">&#x53C2;&#x8003;&#x6587;&#x732E;&#xFF1A;<a class="reference external" href="https://bitbucket.org/zzzeek/sqlalchemy/pull-request/15">&#x62C9;&#x53D6;&#x8BF7;&#x6C42;bitbucket&#xFF1A;15</a></span></p></li><li><p id="change-1.0.0b1-166"><span class="yiyi-st" id="yiyi-1520"><span class="target" id="change-d248e6e466f184e254344213a59553d3"><strong>[mysql] [bug] </strong></span>&#x73B0;&#x5728;&#xFF0C;MySQL&#x65B9;&#x8A00;&#x652F;&#x6301;&#x5C06;CAST&#x6784;&#x9020;&#x4E3A;<a class="reference internal" href="core_custom_types.html#sqlalchemy.types.TypeDecorator" title="sqlalchemy.types.TypeDecorator"><code class="xref py py-class docutils literal"><span class="pre">TypeDecorator</span></code></a>&#x5BF9;&#x8C61;&#x3002;<a class="changeset-link headerlink reference internal" href="#change-d248e6e466f184e254344213a59553d3">&#xB6;</a></span></p><p></p></li><li><p id="change-1.0.0b1-167"><span class="yiyi-st" id="yiyi-1521"><span class="target" id="change-e06b558414bac3be5aee54ce4035def2"><strong>[mysql] [bug] </strong></span>&#x5728;MySQL&#x4E0D;&#x652F;&#x6301;CAST&#x7684;&#x7C7B;&#x578B;&#x4E0A;&#x4F7F;&#x7528;<a class="reference internal" href="core_sqlelement.html#sqlalchemy.sql.expression.cast" title="sqlalchemy.sql.expression.cast"><code class="xref py py-func docutils literal"><span class="pre">cast()</span></code></a>&#x65F6;&#xFF0C;&#x4F1A;&#x53D1;&#x51FA;&#x8B66;&#x544A;&#x3002; MySQL&#x4EC5;&#x652F;&#x6301;&#x4E00;&#x90E8;&#x5206;&#x6570;&#x636E;&#x7C7B;&#x578B;&#x7684;CAST&#x3002;</span><span class="yiyi-st" id="yiyi-1522">SQLAlchemy&#x5F88;&#x957F;&#x4E00;&#x6BB5;&#x65F6;&#x95F4;&#x5728;MySQL&#x4E2D;&#x7701;&#x7565;&#x4E86;&#x4E0D;&#x652F;&#x6301;&#x7C7B;&#x578B;&#x7684;CAST&#x3002;</span><span class="yiyi-st" id="yiyi-1523">&#x867D;&#x7136;&#x6211;&#x4EEC;&#x73B0;&#x5728;&#x4E0D;&#x60F3;&#x6539;&#x53D8;&#x5B83;&#xFF0C;&#x4F46;&#x6211;&#x4EEC;&#x4F1A;&#x53D1;&#x51FA;&#x8B66;&#x544A;&#x4EE5;&#x8868;&#x660E;&#x5B83;&#x5DF2;&#x53D1;&#x751F;&#x3002;</span><span class="yiyi-st" id="yiyi-1524">&#x5F53;&#x4E00;&#x4E2A;CAST&#x4E0E;&#x4E00;&#x4E2A;&#x6839;&#x672C;&#x4E0D;&#x652F;&#x6301;CAST&#x7684;&#x8F83;&#x8001;&#x7684;MySQL&#x7248;&#x672C;&#xFF08;<4）一起使用时，也会发出一个警告，在这种情况下它也被跳过。<a class="changeset-link headerlink reference internal" href="#change-e06b558414bac3be5aee54ce4035def2">&#xB6;</4）一起使用时，也会发出一个警告，在这种情况下它也被跳过。<a></span></p><p><span class="yiyi-st" id="yiyi-1525">&#x53C2;&#x8003;&#x6587;&#x732E;&#xFF1A;<a class="reference external" href="http://www.sqlalchemy.org/trac/ticket/3237">&#xFF03;3237</a></span></p></li><li><p id="change-1.0.0b1-168"><span class="yiyi-st" id="yiyi-1526"><span class="target" id="change-220ee8533c248292fd2a189f6855742c"><strong>[mysql] [bug] </strong></span>&#x5BF9;<a class="reference internal" href="dialects_mysql.html#sqlalchemy.dialects.mysql.SET" title="sqlalchemy.dialects.mysql.SET"><code class="xref py py-class docutils literal"><span class="pre">mysql.SET</span></code></a>&#x7C7B;&#x578B;&#x8FDB;&#x884C;&#x4E86;&#x5927;&#x68C0;&#x67E5;&#xFF0C;&#x4EE5;&#x4FBF;&#x4E0D;&#x518D;&#x5047;&#x5B9A;&#x7A7A;&#x5B57;&#x7B26;&#x4E32;&#x6216;&#x5177;&#x6709;&#x5355;&#x4E2A;&#x7A7A;&#x5B57;&#x7B26;&#x4E32;&#x503C;&#x7684;&#x96C6;&#x5408;&#x5B9E;&#x9645;&#x4E0A;&#x4E00;&#x4E2A;&#x5E26;&#x6709;&#x5355;&#x4E2A;&#x7A7A;&#x5B57;&#x7B26;&#x4E32;&#x7684;&#x96C6;&#x5408;&#xFF1B;&#x76F8;&#x53CD;&#xFF0C;&#x8FD9;&#x662F;&#x9ED8;&#x8BA4;&#x5904;&#x7406;&#x4E3A;&#x7A7A;&#x96C6;&#x3002;</span><span class="yiyi-st" id="yiyi-1527">&#x4E3A;&#x4E86;&#x5904;&#x7406;&#x5B9E;&#x9645;&#x4E0A;&#x5E0C;&#x671B;&#x5C06;&#x7A7A;&#x503C;<code class="docutils literal"><span class="pre">&apos;&apos;</span></code>&#x4F5C;&#x4E3A;&#x5408;&#x6CD5;&#x503C;&#x7684;<a class="reference internal" href="dialects_mysql.html#sqlalchemy.dialects.mysql.SET" title="sqlalchemy.dialects.mysql.SET"><code class="xref py py-class docutils literal"><span class="pre">mysql.SET</span></code></a>&#x7684;&#x6301;&#x4E45;&#x6027;&#xFF0C;&#x6DFB;&#x52A0;&#x4E86;&#x4E00;&#x4E2A;&#x65B0;&#x7684;&#x6309;&#x4F4D;&#x64CD;&#x4F5C;&#x6A21;&#x5F0F;&#xFF0C; <a class="reference internal" href="dialects_mysql.html#sqlalchemy.dialects.mysql.SET.params.retrieve_as_bitwise" title="sqlalchemy.dialects.mysql.SET"><code class="xref py py-paramref docutils literal"><span class="pre">mysql.SET.retrieve_as_bitwise</span></code></a>&#x6807;&#x5FD7;&#xFF0C;&#x8BE5;&#x6807;&#x5FD7;&#x5C06;&#x4F7F;&#x7528;&#x5B83;&#x4EEC;&#x7684;&#x4F4D;&#x6807;&#x5B9A;&#x4F4D;&#x6765;&#x4FDD;&#x6301;&#x5E76;&#x660E;&#x786E;&#x68C0;&#x7D22;&#x503C;&#x3002;</span><span class="yiyi-st" id="yiyi-1528">&#x5B58;&#x50A8;&#x548C;&#x68C0;&#x7D22;&#x672C;&#x5730;&#x4E0D;&#x8F6C;&#x6362;unicode&#x7684;&#x9A71;&#x52A8;&#x7A0B;&#x5E8F;&#x914D;&#x7F6E;&#x7684;unicode&#x503C;&#x4E5F;&#x4F1A;&#x88AB;&#x4FEE;&#x590D;&#x3002;</span></p><div class="admonition seealso"><p class="first admonition-title"><span class="yiyi-st" id="yiyi-1529">&#x4E5F;&#x53EF;&#x4EE5;&#x770B;&#x770B;</span></p><p class="last"><span class="yiyi-st" id="yiyi-1530"><a class="reference internal" href="migration_10.html#change-3283"><span>MySQL SET Type Overhauled to support empty sets, unicode, blank value handling</span></a></span></p></div><span class="yiyi-st" id="yiyi-1532"> <a class="changeset-link headerlink reference internal" href="#change-220ee8533c248292fd2a189f6855742c">&#xB6;</a></span><p><span class="yiyi-st" id="yiyi-1531">&#x53C2;&#x8003;&#x6587;&#x732E;&#xFF1A;<a class="reference external" href="http://www.sqlalchemy.org/trac/ticket/3283">&#xFF03;3283</a></span></p></li><li><p id="change-1.0.0b1-169"><span class="yiyi-st" id="yiyi-1533"><span class="target" id="change-d684884bc2ec500da77ede3801a695af"><strong>[mysql] [bug] </strong></span>The <a class="reference internal" href="core_sqlelement.html#sqlalchemy.sql.operators.ColumnOperators.match" title="sqlalchemy.sql.operators.ColumnOperators.match"><code class="xref py py-meth docutils literal"><span class="pre">ColumnOperators.match()</span></code></a> operator is now handled such that the return type is not strictly assumed to be boolean; it now returns a <a class="reference internal" href="core_type_basics.html#sqlalchemy.types.Boolean" title="sqlalchemy.types.Boolean"><code class="xref py py-class docutils literal"><span class="pre">Boolean</span></code></a> subclass called <a class="reference internal" href="core_type_basics.html#sqlalchemy.types.MatchType" title="sqlalchemy.types.MatchType"><code class="xref py py-class docutils literal"><span class="pre">MatchType</span></code></a>. </span><span class="yiyi-st" id="yiyi-1534">&#x8BE5;&#x7C7B;&#x578B;&#x5728;Python&#x8868;&#x8FBE;&#x5F0F;&#x4E2D;&#x4F7F;&#x7528;&#x65F6;&#x4ECD;&#x7136;&#x4F1A;&#x4EA7;&#x751F;&#x5E03;&#x5C14;&#x884C;&#x4E3A;&#xFF0C;&#x4F46;&#x65B9;&#x8A00;&#x53EF;&#x4EE5;&#x5728;&#x7ED3;&#x679C;&#x65F6;&#x8986;&#x76D6;&#x5176;&#x884C;&#x4E3A;&#x3002;</span><span class="yiyi-st" id="yiyi-1535">&#x5728;MySQL&#x7684;&#x60C5;&#x51B5;&#x4E0B;&#xFF0C;&#x867D;&#x7136;MATCH&#x8FD0;&#x7B97;&#x7B26;&#x901A;&#x5E38;&#x7528;&#x5728;&#x8868;&#x8FBE;&#x5F0F;&#x4E2D;&#x7684;&#x5E03;&#x5C14;&#x4E0A;&#x4E0B;&#x6587;&#x4E2D;&#xFF0C;&#x4F46;&#x5982;&#x679C;&#x5B9E;&#x9645;&#x67E5;&#x8BE2;&#x5339;&#x914D;&#x8868;&#x8FBE;&#x5F0F;&#x7684;&#x503C;&#xFF0C;&#x5219;&#x4F1A;&#x8FD4;&#x56DE;&#x6D6E;&#x70B9;&#x503C;&#xFF1B;&#x6B64;&#x503C;&#x4E0E;SQLAlchemy&#x7684;&#x57FA;&#x4E8E;C&#x7684;&#x5E03;&#x5C14;&#x5904;&#x7406;&#x5668;&#x4E0D;&#x517C;&#x5BB9;&#xFF0C;&#x6240;&#x4EE5;MySQL&#x7684;&#x7ED3;&#x679C;&#x96C6;&#x884C;&#x4E3A;&#x73B0;&#x5728;&#x9075;&#x5FAA;<a class="reference internal" href="core_type_basics.html#sqlalchemy.types.Float" title="sqlalchemy.types.Float"><code class="xref py py-class docutils literal"><span class="pre">Float</span></code></a>&#x7C7B;&#x578B;&#x7684;&#x884C;&#x4E3A;&#x3002;</span><span class="yiyi-st" id="yiyi-1536">&#x8FD8;&#x6DFB;&#x52A0;&#x4E86;&#x4E00;&#x4E2A;&#x65B0;&#x7684;&#x64CD;&#x4F5C;&#x7B26;&#x5BF9;&#x8C61;<code class="docutils literal"><span class="pre">notmatch_op</span></code>&#xFF0C;&#x4EE5;&#x4FBF;&#x66F4;&#x597D;&#x5730;&#x5141;&#x8BB8;&#x65B9;&#x8A00;&#x5B9A;&#x4E49;&#x5339;&#x914D;&#x64CD;&#x4F5C;&#x7684;&#x5426;&#x5B9A;&#x3002;</span></p><div class="admonition seealso"><p class="first admonition-title"><span class="yiyi-st" id="yiyi-1537">&#x4E5F;&#x53EF;&#x4EE5;&#x770B;&#x770B;</span></p><p class="last"><span class="yiyi-st" id="yiyi-1538"><a class="reference internal" href="migration_10.html#change-3263"><span>The match() operator now returns an agnostic MatchType compatible with MySQL&#x2019;s floating point return value</span></a></span></p></div><span class="yiyi-st" id="yiyi-1540"> <a class="changeset-link headerlink reference internal" href="#change-d684884bc2ec500da77ede3801a695af">&#xB6;</a></span><p><span class="yiyi-st" id="yiyi-1539">&#x53C2;&#x8003;&#x6587;&#x732E;&#xFF1A;<a class="reference external" href="http://www.sqlalchemy.org/trac/ticket/3263">&#xFF03;3263</a></span></p></li><li><p id="change-1.0.0b1-170"><span class="yiyi-st" id="yiyi-1541"><span class="target" id="change-9787cfb315047779532af296d86e52c8"><strong>[mysql] [bug] </strong></span> MySQL&#x5E03;&#x5C14;&#x7B26;&#x53F7;&#x201C;true&#x201D;&#xFF0C;&#x201C;false&#x201D;&#x518D;&#x6B21;&#x5DE5;&#x4F5C;&#x3002;</span><span class="yiyi-st" id="yiyi-1542">0.9 <a class="reference external" href="http://www.sqlalchemy.org/trac/ticket/2682">&#xFF03;2682</a>&#x4E2D;&#x7684;&#x53D8;&#x5316;&#x4E0D;&#x5141;&#x8BB8;MySQL&#x65B9;&#x8A00;&#x5728;&#x201C;IS&#x201D;/&#x201C;IS NOT&#x201D;&#x7684;&#x4E0A;&#x4E0B;&#x6587;&#x4E2D;&#x4F7F;&#x7528;&#x201C;true&#x201D;&#x548C;&#x201C;false&#x201D;&#x7B26;&#x53F7;&#xFF0C;&#x4F46;MySQL&#x751A;&#x81F3;&#x652F;&#x6301;&#x8FD9;&#x79CD;&#x8BED;&#x6CD5;&#x5C3D;&#x7BA1;&#x5B83;&#x6CA1;&#x6709;&#x5E03;&#x5C14;&#x7C7B;&#x578B;&#x3002;</span><span class="yiyi-st" id="yiyi-1543">MySQL remains &#x201C;non native boolean&#x201D;, but the <a class="reference internal" href="core_sqlelement.html#sqlalchemy.sql.expression.true" title="sqlalchemy.sql.expression.true"><code class="xref py py-func docutils literal"><span class="pre">true()</span></code></a> and <a class="reference internal" href="core_sqlelement.html#sqlalchemy.sql.expression.false" title="sqlalchemy.sql.expression.false"><code class="xref py py-func docutils literal"><span class="pre">false()</span></code></a> symbols again produce the keywords &#x201C;true&#x201D; and &#x201C;false&#x201D;, so that an expression like <code class="docutils literal"><span class="pre">column.is_(true())</span></code> again works on MySQL.</span></p><div class="admonition seealso"><p class="first admonition-title"><span class="yiyi-st" id="yiyi-1544">&#x4E5F;&#x53EF;&#x4EE5;&#x770B;&#x770B;</span></p><p class="last"><span class="yiyi-st" id="yiyi-1545"><a class="reference internal" href="migration_10.html#bug-3186"><span>MySQL boolean symbols &#x201C;true&#x201D;, &#x201C;false&#x201D; work again</span></a></span></p></div><span class="yiyi-st" id="yiyi-1547"> <a class="changeset-link headerlink reference internal" href="#change-9787cfb315047779532af296d86e52c8">&#xB6;</a></span><p><span class="yiyi-st" id="yiyi-1546">&#x53C2;&#x8003;&#x6587;&#x732E;&#xFF1A;<a class="reference external" href="http://www.sqlalchemy.org/trac/ticket/3186">&#xFF03;3186</a></span></p></li><li><p id="change-1.0.0b1-171"><span class="yiyi-st" id="yiyi-1548"><span class="target" id="change-828372b575d2aa0994e92d6186465a3d"><strong>[mysql] [bug] </strong></span>&#x73B0;&#x5728;&#xFF0C;MySQL&#x65B9;&#x8A00;&#x5C06;&#x7981;&#x7528;<a class="reference internal" href="core_events.html#sqlalchemy.events.ConnectionEvents.handle_error" title="sqlalchemy.events.ConnectionEvents.handle_error"><code class="xref py py-meth docutils literal"><span class="pre">ConnectionEvents.handle_error()</span></code></a>&#x4E8B;&#x4EF6;&#x89E6;&#x53D1;&#x5B83;&#x5728;&#x5185;&#x90E8;&#x7528;&#x4E8E;&#x68C0;&#x6D4B;&#x8868;&#x662F;&#x5426;&#x5B58;&#x5728;&#x7684;&#x8BED;&#x53E5;&#x3002;</span><span class="yiyi-st" id="yiyi-1549">&#x8FD9;&#x662F;&#x901A;&#x8FC7;&#x4F7F;&#x7528;&#x6267;&#x884C;&#x9009;&#x9879;<code class="docutils literal"><span class="pre">skip_user_error_events</span></code>&#x6765;&#x5B9E;&#x73B0;&#x7684;&#xFF0C;&#x8BE5;&#x9009;&#x9879;&#x4E3A;&#x8BE5;&#x6267;&#x884C;&#x7684;&#x8303;&#x56F4;&#x7981;&#x7528;&#x53E5;&#x67C4;&#x9519;&#x8BEF;&#x4E8B;&#x4EF6;&#x3002;</span><span class="yiyi-st" id="yiyi-1550">&#x901A;&#x8FC7;&#x8FD9;&#x79CD;&#x65B9;&#x5F0F;&#xFF0C;&#x91CD;&#x5199;&#x5F02;&#x5E38;&#x7684;&#x7528;&#x6237;&#x4EE3;&#x7801;&#x4E0D;&#x9700;&#x8981;&#x62C5;&#x5FC3;&#x5076;&#x5C14;&#x9700;&#x8981;&#x6355;&#x83B7;SQLAlchemy&#x7279;&#x5B9A;&#x5F02;&#x5E38;&#x7684;MySQL&#x65B9;&#x8A00;&#x6216;&#x5176;&#x4ED6;&#x65B9;&#x8A00;&#x3002;<a class="changeset-link headerlink reference internal" href="#change-828372b575d2aa0994e92d6186465a3d">&#xB6;</a></span></p><p></p></li><li><p id="change-1.0.0b1-172"><span class="yiyi-st" id="yiyi-1551"><span class="target" id="change-c99bdbe39a0aae424a21593e9240e9f3"><strong>[mysql] [bug] </strong></span>&#x5C06;MySQL&#x8FDE;&#x63A5;&#x5668;&#x7684;&#x201C;raise_on_warnings&#x201D;&#x7684;&#x9ED8;&#x8BA4;&#x503C;&#x66F4;&#x6539;&#x4E3A;False&#x3002;</span><span class="yiyi-st" id="yiyi-1552">&#x7531;&#x4E8E;&#x67D0;&#x79CD;&#x539F;&#x56E0;&#xFF0C;&#x8FD9;&#x88AB;&#x8BBE;&#x7F6E;&#x4E3A;True&#x3002;</span><span class="yiyi-st" id="yiyi-1553">&#x4E0D;&#x5E78;&#x7684;&#x662F;&#xFF0C;&#x201C;&#x7F13;&#x51B2;&#x201D;&#x6807;&#x5FD7;&#x5FC5;&#x987B;&#x4FDD;&#x6301;&#x4E3A;True&#xFF0C;&#x56E0;&#x4E3A;MySQL&#x8FDE;&#x63A5;&#x5668;&#x4E0D;&#x5141;&#x8BB8;&#x6E38;&#x6807;&#x88AB;&#x5173;&#x95ED;&#xFF0C;&#x9664;&#x975E;&#x6240;&#x6709;&#x7ED3;&#x679C;&#x90FD;&#x88AB;&#x5168;&#x90E8;&#x83B7;&#x53D6;&#x3002;<a class="changeset-link headerlink reference internal" href="#change-c99bdbe39a0aae424a21593e9240e9f3">&#xB6;</a></span></p><p><span class="yiyi-st" id="yiyi-1554">&#x53C2;&#x8003;&#x6587;&#x732E;&#xFF1A;<a class="reference external" href="http://www.sqlalchemy.org/trac/ticket/2515">&#xFF03;2515</a></span></p></li><li><p id="change-1.0.0b1-173"><span class="yiyi-st" id="yiyi-1555"><span class="target" id="change-88c8bf1c005b1ba08a675f1c4fc922b3"><strong>[mysql] [change] </strong></span> <code class="docutils literal"><span class="pre">gaerdbms</span></code>&#x65B9;&#x8A00;&#x4E0D;&#x518D;&#x9700;&#x8981;&#xFF0C;&#x5E76;&#x4E14;&#x53D1;&#x51FA;&#x5F03;&#x7528;&#x8B66;&#x544A;&#x3002;</span><span class="yiyi-st" id="yiyi-1556">Google&#x73B0;&#x5728;&#x5EFA;&#x8BAE;&#x76F4;&#x63A5;&#x4F7F;&#x7528;MySQLdb&#x65B9;&#x8A00;&#x3002;<a class="changeset-link headerlink reference internal" href="#change-88c8bf1c005b1ba08a675f1c4fc922b3">&#xB6;</a></span></p><p><span class="yiyi-st" id="yiyi-1557">&#x8FD9;&#x4E2A;&#x6539;&#x53D8;&#x4E5F;&#x88AB;<strong>backported</strong>&#x6539;&#x4E3A;&#xFF1A;0.9.9</span></p><p><span class="yiyi-st" id="yiyi-1558">&#x53C2;&#x8003;&#x6587;&#x732E;&#xFF1A;<a class="reference external" href="http://www.sqlalchemy.org/trac/ticket/3275">&#xFF03;3275</a></span></p></li></ul></div><div class="section" id="change-1.0.0b1-sqlite"><h3><span class="yiyi-st" id="yiyi-1559">&#x6E90;&#x7801;<a class="headerlink" href="#change-1.0.0b1-sqlite" title="Permalink to this headline">&#xB6; T0&gt;</a></span></h3><ul class="simple"><li><p id="change-1.0.0b1-174"><span class="yiyi-st" id="yiyi-1560"><span class="target" id="change-3d9fb6341c517aafb29dced236fb59d6"><strong>[sqlite] [feature] </strong></span>&#x5728;SQLite&#x4E2D;&#x589E;&#x52A0;&#x4E86;&#x5BF9;&#x90E8;&#x5206;&#x7D22;&#x5F15;&#xFF08;&#x4F8B;&#x5982;&#x4F7F;&#x7528;WHERE&#x5B50;&#x53E5;&#xFF09;&#x7684;&#x652F;&#x6301;&#x3002;</span><span class="yiyi-st" id="yiyi-1561">&#x8BF7;&#x6C42;Kai Groner&#x63D0;&#x4F9B;&#x7684;&#x8BF7;&#x6C42;&#x3002;</span></p><div class="admonition seealso"><p class="first admonition-title"><span class="yiyi-st" id="yiyi-1562">&#x4E5F;&#x53EF;&#x4EE5;&#x770B;&#x770B;</span></p><p class="last"><span class="yiyi-st" id="yiyi-1563"><a class="reference internal" href="dialects_sqlite.html#sqlite-partial-index"><span>Partial Indexes</span></a></span></p></div><span class="yiyi-st" id="yiyi-1566"> <a class="changeset-link headerlink reference internal" href="#change-3d9fb6341c517aafb29dced236fb59d6">&#xB6;</a></span><p><span class="yiyi-st" id="yiyi-1564">&#x8FD9;&#x4E2A;&#x6539;&#x53D8;&#x4E5F;&#x88AB;<strong>backported</strong>&#x6539;&#x4E3A;&#xFF1A;0.9.9</span></p><p><span class="yiyi-st" id="yiyi-1565">&#x53C2;&#x8003;&#x6587;&#x732E;&#xFF1A;<a class="reference external" href="https://bitbucket.org/zzzeek/sqlalchemy/pull-request/42">pull request bitbucket&#xFF1A;42</a></span></p></li><li><p id="change-1.0.0b1-175"><span class="yiyi-st" id="yiyi-1567"><span class="target" id="change-7e6346bf1aeb5ee43f7e365c475c7b57"><strong>[sqlite] [feature] </strong></span>&#x4E3A;SQLCipher&#x540E;&#x7AEF;&#x6DFB;&#x52A0;&#x4E86;&#x65B0;&#x7684;SQLite&#x540E;&#x7AEF;&#x3002;</span><span class="yiyi-st" id="yiyi-1568">&#x8BE5;&#x540E;&#x7AEF;&#x4F7F;&#x7528;pysqlcipher Python&#x9A71;&#x52A8;&#x7A0B;&#x5E8F;&#x63D0;&#x4F9B;&#x52A0;&#x5BC6;&#x7684;SQLite&#x6570;&#x636E;&#x5E93;&#xFF0C;&#x8FD9;&#x4E0E;pysqlite&#x9A71;&#x52A8;&#x7A0B;&#x5E8F;&#x975E;&#x5E38;&#x76F8;&#x4F3C;&#x3002;</span></p><div class="admonition seealso"><p class="first admonition-title"><span class="yiyi-st" id="yiyi-1569">&#x4E5F;&#x53EF;&#x4EE5;&#x770B;&#x770B;</span></p><p class="last"><span class="yiyi-st" id="yiyi-1570"><a class="reference internal" href="dialects_sqlite.html#module-sqlalchemy.dialects.sqlite.pysqlcipher" title="sqlalchemy.dialects.sqlite.pysqlcipher"><code class="xref py py-mod docutils literal"><span class="pre">pysqlcipher</span></code></a></span></p></div><span class="yiyi-st" id="yiyi-1572"> <a class="changeset-link headerlink reference internal" href="#change-7e6346bf1aeb5ee43f7e365c475c7b57">&#xB6;</a></span><p><span class="yiyi-st" id="yiyi-1571">&#x8FD9;&#x4E2A;&#x6539;&#x53D8;&#x4E5F;&#x88AB;<strong>backported</strong>&#x6539;&#x4E3A;&#xFF1A;0.9.9</span></p><p></p></li><li><p id="change-1.0.0b1-176"><span class="yiyi-st" id="yiyi-1573"><span class="target" id="change-946017d06b93655ea05ced1c50d7c010"><strong>[sqlite] [bug] </strong></span>When selecting from a UNION using an attached database file, the pysqlite driver reports column names in cursor.description as &#x2018;dbname.tablename.colname&#x2019;, instead of &#x2018;tablename.colname&#x2019; as it normally does for a UNION (note that it&#x2019;s supposed to just be &#x2018;colname&#x2019; for both, but we work around it). </span><span class="yiyi-st" id="yiyi-1574">&#x6B64;&#x5904;&#x7684;&#x5217;&#x8F6C;&#x6362;&#x903B;&#x8F91;&#x5DF2;&#x88AB;&#x8C03;&#x6574;&#x4E3A;&#x68C0;&#x7D22;&#x6700;&#x53F3;&#x4FA7;&#x7684;&#x6807;&#x8BB0;&#xFF0C;&#x800C;&#x4E0D;&#x662F;&#x7B2C;&#x4E8C;&#x4E2A;&#x6807;&#x8BB0;&#xFF0C;&#x56E0;&#x6B64;&#x5B83;&#x9002;&#x7528;&#x4E8E;&#x8FD9;&#x4E24;&#x79CD;&#x60C5;&#x51B5;&#x3002;</span><span class="yiyi-st" id="yiyi-1575">&#x89E3;&#x51B3;&#x65B9;&#x6CD5;&#x793C;&#x8C8C;Tony Roberts&#x3002;<a class="changeset-link headerlink reference internal" href="#change-946017d06b93655ea05ced1c50d7c010">&#xB6;</a></span></p><p><span class="yiyi-st" id="yiyi-1576">&#x8FD9;&#x4E2A;&#x6539;&#x53D8;&#x4E5F;&#x662F;<strong>backported</strong>&#x6539;&#x4E3A;&#xFF1A;0.9.8</span></p><p><span class="yiyi-st" id="yiyi-1577">&#x53C2;&#x8003;&#x6587;&#x732E;&#xFF1A;<a class="reference external" href="http://www.sqlalchemy.org/trac/ticket/3211">&#xFF03;3211</a></span></p></li><li><p id="change-1.0.0b1-177"><span class="yiyi-st" id="yiyi-1578"><span class="target" id="change-dbba9e2ad3a065a1eb84d3b38b6d347d"><strong>[sqlite] [bug] </strong></span>Fixed a SQLite join rewriting issue where a subquery that is embedded as a scalar subquery such as within an IN would receive inappropriate substitutions from the enclosing query, if the same table were present inside the subquery as were in the enclosing query such as in a joined inheritance scenario.<a class="changeset-link headerlink reference internal" href="#change-dbba9e2ad3a065a1eb84d3b38b6d347d">&#xB6;</a></span></p><p><span class="yiyi-st" id="yiyi-1579">&#x8FD9;&#x4E2A;&#x6539;&#x53D8;&#x4E5F;&#x88AB;<strong>backported</strong>&#x6539;&#x4E3A;&#xFF1A;0.9.7</span></p><p><span class="yiyi-st" id="yiyi-1580">&#x53C2;&#x8003;&#x6587;&#x732E;&#xFF1A;<a class="reference external" href="http://www.sqlalchemy.org/trac/ticket/3130">&#xFF03;3130</a></span></p></li><li><p id="change-1.0.0b1-178"><span class="yiyi-st" id="yiyi-1581"><span class="target" id="change-792dfcd8b60e9bb55f168dcccc0fd113"><strong>[sqlite] [bug] </strong></span> UNIQUE&#x548C;FOREIGN KEY&#x7EA6;&#x675F;&#x73B0;&#x5728;&#x5B8C;&#x5168;&#x53CD;&#x6620;&#x5728;SQLite&#x4E2D;&#xFF0C;&#x5305;&#x542B;&#x540D;&#x79F0;&#x548C;&#x4E0D;&#x5305;&#x542B;&#x540D;&#x79F0;&#x3002;</span><span class="yiyi-st" id="yiyi-1582">&#x4EE5;&#x524D;&#xFF0C;&#x5916;&#x952E;&#x540D;&#x79F0;&#x88AB;&#x5FFD;&#x7565;&#xFF0C;&#x672A;&#x547D;&#x540D;&#x7684;&#x552F;&#x4E00;&#x7EA6;&#x675F;&#x88AB;&#x5FFD;&#x7565;&#x3002;</span><span class="yiyi-st" id="yiyi-1583">&#x611F;&#x8C22;Jon Nelson&#x5BFB;&#x6C42;&#x5E2E;&#x52A9;&#x3002;<a class="changeset-link headerlink reference internal" href="#change-792dfcd8b60e9bb55f168dcccc0fd113">&#xB6;</a></span></p><p><span class="yiyi-st" id="yiyi-1584">&#x53C2;&#x8003;&#x6587;&#x732E;&#xFF1A;<a class="reference external" href="http://www.sqlalchemy.org/trac/ticket/3261">&#xFF03;3261</a>&#xFF0C;<a class="reference external" href="http://www.sqlalchemy.org/trac/ticket/3244">&#xFF03;3244</a></span></p></li><li><p id="change-1.0.0b1-179"><span class="yiyi-st" id="yiyi-1585"><span class="target" id="change-239acc44616f1d843f4adf9a759d3a7b"><strong>[sqlite] [bug] </strong></span>The SQLite dialect, when using the <a class="reference internal" href="dialects_sqlite.html#sqlalchemy.dialects.sqlite.DATE" title="sqlalchemy.dialects.sqlite.DATE"><code class="xref py py-class docutils literal"><span class="pre">sqlite.DATE</span></code></a>, <a class="reference internal" href="dialects_sqlite.html#sqlalchemy.dialects.sqlite.TIME" title="sqlalchemy.dialects.sqlite.TIME"><code class="xref py py-class docutils literal"><span class="pre">sqlite.TIME</span></code></a>, or <a class="reference internal" href="dialects_sqlite.html#sqlalchemy.dialects.sqlite.DATETIME" title="sqlalchemy.dialects.sqlite.DATETIME"><code class="xref py py-class docutils literal"><span class="pre">sqlite.DATETIME</span></code></a> types, and given a <code class="docutils literal"><span class="pre">storage_format</span></code> that only renders numbers, will render the types in DDL as <code class="docutils literal"><span class="pre">DATE_CHAR</span></code>, <code class="docutils literal"><span class="pre">TIME_CHAR</span></code>, and <code class="docutils literal"><span class="pre">DATETIME_CHAR</span></code>, so that despite the lack of alpha characters in the values, the column will still deliver the &#x201C;text affinity&#x201D;. </span><span class="yiyi-st" id="yiyi-1586">&#x901A;&#x5E38;&#x8FD9;&#x4E0D;&#x662F;&#x5FC5;&#x9700;&#x7684;&#xFF0C;&#x56E0;&#x4E3A;&#x9ED8;&#x8BA4;&#x5B58;&#x50A8;&#x683C;&#x5F0F;&#x4E2D;&#x7684;&#x6587;&#x672C;&#x503C;&#x5DF2;&#x7ECF;&#x6697;&#x793A;&#x4E86;&#x6587;&#x672C;&#x3002;</span></p><div class="admonition seealso"><p class="first admonition-title"><span class="yiyi-st" id="yiyi-1587">&#x4E5F;&#x53EF;&#x4EE5;&#x770B;&#x770B;</span></p><p class="last"><span class="yiyi-st" id="yiyi-1588"><a class="reference internal" href="dialects_sqlite.html#sqlite-datetime"><span>Date and Time Types</span></a></span></p></div><span class="yiyi-st" id="yiyi-1590"> <a class="changeset-link headerlink reference internal" href="#change-239acc44616f1d843f4adf9a759d3a7b">&#xB6;</a></span><p><span class="yiyi-st" id="yiyi-1589">&#x53C2;&#x8003;&#x6587;&#x732E;&#xFF1A;<a class="reference external" href="http://www.sqlalchemy.org/trac/ticket/3257">&#xFF03;3257</a></span></p></li><li><p id="change-1.0.0b1-180"><span class="yiyi-st" id="yiyi-1591"><span class="target" id="change-143526c69a00507711235150baad7656"><strong>[sqlite] [bug] </strong></span> SQLite&#x73B0;&#x5728;&#x652F;&#x6301;&#x53CD;&#x6620;&#x6765;&#x81EA;&#x4E34;&#x65F6;&#x8868;&#x7684;&#x552F;&#x4E00;&#x7EA6;&#x675F;&#xFF1B;&#x4EE5;&#x524D;&#xFF0C;&#x8FD9;&#x4F1A;&#x56E0;&#x7C7B;&#x578B;&#x9519;&#x8BEF;&#x800C;&#x5931;&#x8D25;&#x3002;</span><span class="yiyi-st" id="yiyi-1592">&#x62C9;&#x7EA6;&#x8BF7;&#x6C42;Johannes Erdfelt&#x63D0;&#x4F9B;&#x3002;</span></p><div class="admonition seealso"><p class="first admonition-title"><span class="yiyi-st" id="yiyi-1593">&#x4E5F;&#x53EF;&#x4EE5;&#x770B;&#x770B;</span></p><p class="last"><span class="yiyi-st" id="yiyi-1594"><a class="reference internal" href="migration_10.html#change-3204"><span>SQLite/Oracle have distinct methods for temporary table/view name reporting</span></a> - changes regarding SQLite temporary table and view reflection.</span></p></div><span class="yiyi-st" id="yiyi-1596"> <a class="changeset-link headerlink reference internal" href="#change-143526c69a00507711235150baad7656">&#xB6;</a></span><p><span class="yiyi-st" id="yiyi-1595">&#x53C2;&#x8003;&#x6587;&#x732E;&#xFF1A;<a class="reference external" href="http://www.sqlalchemy.org/trac/ticket/3203">&#xFF03;3203</a>&#xFF0C;<a class="reference external" href="https://bitbucket.org/zzzeek/sqlalchemy/pull-request/31">&#x62C9;&#x53D6;&#x8BF7;&#x6C42;bitbucket&#xFF1A;31</a></span></p></li><li><p id="change-1.0.0b1-181"><span class="yiyi-st" id="yiyi-1597"><span class="target" id="change-dc3cc23baa14088445f40787bfb225c9"><strong>[sqlite] [bug] </strong></span>&#x6DFB;&#x52A0;&#x4E86;<a class="reference internal" href="core_reflection.html#sqlalchemy.engine.reflection.Inspector.get_temp_table_names" title="sqlalchemy.engine.reflection.Inspector.get_temp_table_names"><code class="xref py py-meth docutils literal"><span class="pre">Inspector.get_temp_table_names()</span></code></a>&#x548C;<a class="reference internal" href="core_reflection.html#sqlalchemy.engine.reflection.Inspector.get_temp_view_names" title="sqlalchemy.engine.reflection.Inspector.get_temp_view_names"><code class="xref py py-meth docutils literal"><span class="pre">Inspector.get_temp_view_names()</span></code></a>&#xFF1B;&#x76EE;&#x524D;&#xFF0C;&#x53EA;&#x6709;SQLite&#x548C;Oracle&#x65B9;&#x8A00;&#x652F;&#x6301;&#x8FD9;&#x4E9B;&#x65B9;&#x6CD5;&#x3002;</span><span class="yiyi-st" id="yiyi-1598">The return of temporary table and view names has been <strong>removed</strong> from SQLite and Oracle&#x2019;s version of <a class="reference internal" href="core_reflection.html#sqlalchemy.engine.reflection.Inspector.get_table_names" title="sqlalchemy.engine.reflection.Inspector.get_table_names"><code class="xref py py-meth docutils literal"><span class="pre">Inspector.get_table_names()</span></code></a> and <a class="reference internal" href="core_reflection.html#sqlalchemy.engine.reflection.Inspector.get_view_names" title="sqlalchemy.engine.reflection.Inspector.get_view_names"><code class="xref py py-meth docutils literal"><span class="pre">Inspector.get_view_names()</span></code></a>; other database backends cannot support this information (such as MySQL), and the scope of operation is different in that the tables can be local to a session and typically aren&#x2019;t supported in remote schemas.</span></p><div class="admonition seealso"><p class="first admonition-title"><span class="yiyi-st" id="yiyi-1599">&#x4E5F;&#x53EF;&#x4EE5;&#x770B;&#x770B;</span></p><p class="last"><span class="yiyi-st" id="yiyi-1600"><a class="reference internal" href="migration_10.html#change-3204"><span>SQLite/Oracle have distinct methods for temporary table/view name reporting</span></a></span></p></div><span class="yiyi-st" id="yiyi-1602"> <a class="changeset-link headerlink reference internal" href="#change-dc3cc23baa14088445f40787bfb225c9">&#xB6;</a></span><p><span class="yiyi-st" id="yiyi-1601">&#x53C2;&#x8003;&#x6587;&#x732E;&#xFF1A;<a class="reference external" href="http://www.sqlalchemy.org/trac/ticket/3204">&#xFF03;3204</a></span></p></li></ul></div><div class="section" id="change-1.0.0b1-mssql"><h3><span class="yiyi-st" id="yiyi-1603">MSSQL <a class="headerlink" href="#change-1.0.0b1-mssql" title="Permalink to this headline">&#xB6; T0&gt;</a></span></h3><ul class="simple"><li><p id="change-1.0.0b1-182"><span class="yiyi-st" id="yiyi-1604"><span class="target" id="change-20559f663839ceee7e14634eafedb5be"><strong>[mssql] [feature] </strong></span>&#x4E3A;SQL Server 2008&#x542F;&#x7528;&#x201C;&#x591A;&#x503C;&#x63D2;&#x5165;&#x201D;&#x3002;</span><span class="yiyi-st" id="yiyi-1605">&#x62C9;&#x5C14;&#x8BF7;&#x6C42;Albert Cervin&#x793C;&#x8C8C;&#x3002;</span><span class="yiyi-st" id="yiyi-1606">&#x8FD8;&#x6269;&#x5C55;&#x4E86;&#x5BF9;&#x201C;IDENTITY INSERT&#x201D;&#x6A21;&#x5F0F;&#x7684;&#x68C0;&#x67E5;&#xFF0C;&#x4EE5;&#x4FBF;&#x5728;&#x8BED;&#x53E5;&#x7684;VALUE&#x5B50;&#x53E5;&#x4E2D;&#x5B58;&#x5728;&#x8EAB;&#x4EFD;&#x94A5;&#x5319;&#x65F6;&#x5305;&#x542B;&#x8BE5;&#x8EAB;&#x4EFD;&#x94A5;&#x5319;&#x3002;<a class="changeset-link headerlink reference internal" href="#change-20559f663839ceee7e14634eafedb5be">&#xB6;</a></span></p><p><span class="yiyi-st" id="yiyi-1607">&#x8FD9;&#x4E2A;&#x6539;&#x53D8;&#x4E5F;&#x88AB;<strong>backported</strong>&#x6539;&#x4E3A;&#xFF1A;0.9.7</span></p><p><span class="yiyi-st" id="yiyi-1608">&#x53C2;&#x8003;&#x6587;&#x732E;&#xFF1A;<a class="reference external" href="https://github.com/zzzeek/sqlalchemy/pull/98">&#x8BF7;&#x6C42;github&#xFF1A;98</a></span></p></li><li><p id="change-1.0.0b1-183"><span class="yiyi-st" id="yiyi-1609"><span class="target" id="change-f520106ec3455eaa056110c048aa4862"><strong>[mssql] [feature] </strong></span>SQL Server 2012 now recommends VARCHAR(max), NVARCHAR(max), VARBINARY(max) for large text/binary types. </span><span class="yiyi-st" id="yiyi-1610">MSSQL&#x65B9;&#x8A00;&#x73B0;&#x5728;&#x5C06;&#x57FA;&#x4E8E;&#x7248;&#x672C;&#x68C0;&#x6D4B;&#x4EE5;&#x53CA;&#x65B0;&#x7684;<code class="docutils literal"><span class="pre">deprecate_large_types</span></code>&#x6807;&#x5FD7;&#x5C0A;&#x91CD;&#x5B83;&#x3002;</span></p><div class="admonition seealso"><p class="first admonition-title"><span class="yiyi-st" id="yiyi-1611">&#x4E5F;&#x53EF;&#x4EE5;&#x770B;&#x770B;</span></p><p class="last"><span class="yiyi-st" id="yiyi-1612"><a class="reference internal" href="dialects_mssql.html#mssql-large-type-deprecation"><span>Large Text/Binary Type Deprecation</span></a></span></p></div><span class="yiyi-st" id="yiyi-1614"> <a class="changeset-link headerlink reference internal" href="#change-f520106ec3455eaa056110c048aa4862">&#xB6;</a></span><p><span class="yiyi-st" id="yiyi-1613">&#x53C2;&#x8003;&#x6587;&#x732E;&#xFF1A;<a class="reference external" href="http://www.sqlalchemy.org/trac/ticket/3039">&#xFF03;3039</a></span></p></li><li><p id="change-1.0.0b1-184"><span class="yiyi-st" id="yiyi-1615"><span class="target" id="change-216a4d0059a5b9c4689bd6f999ba2f1e"><strong>[mssql] [changed] </strong></span>&#x4F7F;&#x7528;pyodbc&#x65F6;&#xFF0C;SQL Server&#x7684;&#x57FA;&#x4E8E;&#x4E3B;&#x673A;&#x540D;&#x7684;&#x8FDE;&#x63A5;&#x683C;&#x5F0F;&#x5C06;&#x4E0D;&#x518D;&#x6307;&#x5B9A;&#x9ED8;&#x8BA4;&#x7684;&#x201C;&#x9A71;&#x52A8;&#x7A0B;&#x5E8F;&#x540D;&#x79F0;&#x201D;&#xFF0C;&#x5E76;&#x4E14;&#x5982;&#x679C;&#x7F3A;&#x5C11;&#x8BE5;&#x9A71;&#x52A8;&#x7A0B;&#x5E8F;&#x540D;&#x79F0;&#xFF0C;&#x5219;&#x4F1A;&#x53D1;&#x51FA;&#x8B66;&#x544A;&#x3002;</span><span class="yiyi-st" id="yiyi-1616">SQL Server&#x7684;&#x6700;&#x4F73;&#x9A71;&#x52A8;&#x7A0B;&#x5E8F;&#x540D;&#x79F0;&#x7ECF;&#x5E38;&#x66F4;&#x6539;&#x5E76;&#x4E14;&#x662F;&#x6BCF;&#x4E2A;&#x5E73;&#x53F0;&#xFF0C;&#x56E0;&#x6B64;&#x57FA;&#x4E8E;&#x4E3B;&#x673A;&#x540D;&#x7684;&#x8FDE;&#x63A5;&#x9700;&#x8981;&#x6307;&#x5B9A;&#x6B64;&#x540D;&#x79F0;&#x3002;</span><span class="yiyi-st" id="yiyi-1617">&#x57FA;&#x4E8E;DSN&#x7684;&#x8FDE;&#x63A5;&#x662F;&#x9996;&#x9009;&#x3002;</span></p><div class="admonition seealso"><p class="first admonition-title"><span class="yiyi-st" id="yiyi-1618">&#x4E5F;&#x53EF;&#x4EE5;&#x770B;&#x770B;</span></p><p class="last"><span class="yiyi-st" id="yiyi-1619"><a class="reference internal" href="migration_10.html#change-3182"><span>PyODBC driver name is required with hostname-based SQL Server connections</span></a>&#x662F;&#x5FC5;&#x9700;&#x7684;</span></p></div><span class="yiyi-st" id="yiyi-1621"> <a class="changeset-link headerlink reference internal" href="#change-216a4d0059a5b9c4689bd6f999ba2f1e">&#xB6;</a></span><p><span class="yiyi-st" id="yiyi-1620">&#x53C2;&#x8003;&#x6587;&#x732E;&#xFF1A;<a class="reference external" href="http://www.sqlalchemy.org/trac/ticket/3182">&#xFF03;3182</a></span></p></li><li><p id="change-1.0.0b1-185"><span class="yiyi-st" id="yiyi-1622"><span class="target" id="change-1ac1ebc454b99a8106f36414704b4f13"><strong>[mssql] [bug] </strong></span>&#x4FEE;&#x590D;&#x4E86;pymssql&#x65B9;&#x8A00;&#x4E2D;&#x7684;&#x7248;&#x672C;&#x5B57;&#x7B26;&#x4E32;&#x68C0;&#x6D4B;&#x95EE;&#x9898;&#xFF0C;&#x4EE5;&#x4FBF;&#x4E0E;Microsoft SQL Azure&#x4E00;&#x8D77;&#x4F7F;&#x7528;&#xFF0C;&#x5B83;&#x5C06;&#x5355;&#x8BCD;&#x201C;SQL Server&#x201D;&#x66F4;&#x6539;&#x4E3A;&#x201C;SQL Azure&#x201D;&#x3002;<a class="changeset-link headerlink reference internal" href="#change-1ac1ebc454b99a8106f36414704b4f13">&#xB6; t2 &gt;</a></span></p><p><span class="yiyi-st" id="yiyi-1623">&#x8FD9;&#x4E2A;&#x6539;&#x53D8;&#x4E5F;&#x662F;<strong>backported</strong>&#x6539;&#x4E3A;&#xFF1A;0.9.8</span></p><p><span class="yiyi-st" id="yiyi-1624">&#x53C2;&#x8003;&#x6587;&#x732E;&#xFF1A;<a class="reference external" href="http://www.sqlalchemy.org/trac/ticket/3151">&#xFF03;3151</a></span></p></li><li><p id="change-1.0.0b1-186"><span class="yiyi-st" id="yiyi-1625"><span class="target" id="change-bbd51d56a17c9f56dbfba67a40873a90"><strong>[mssql] [bug] </strong></span>Revised the query used to determine the current default schema name to use the <code class="docutils literal"><span class="pre">database_principal_id()</span></code> function in conjunction with the <code class="docutils literal"><span class="pre">sys.database_principals</span></code> view so that we can determine the default schema independently of the type of login in progress (e.g., SQL Server, Windows, etc).<a class="changeset-link headerlink reference internal" href="#change-bbd51d56a17c9f56dbfba67a40873a90">&#xB6;</a></span></p><p><span class="yiyi-st" id="yiyi-1626">&#x8FD9;&#x4E2A;&#x6539;&#x53D8;&#x4E5F;&#x88AB;<strong>backported</strong>&#x6539;&#x4E3A;&#xFF1A;0.9.5</span></p><p><span class="yiyi-st" id="yiyi-1627">&#x53C2;&#x8003;&#x6587;&#x732E;&#xFF1A;<a class="reference external" href="http://www.sqlalchemy.org/trac/ticket/3025">&#xFF03;3025</a></span></p></li><li><p id="change-1.0.0b1-187"><span class="yiyi-st" id="yiyi-1628"><span class="target" id="change-1f87a0341490182683860e3d896e5d83"><strong>[mssql] [bug] </strong></span>Added statement encoding to the &#x201C;SET IDENTITY_INSERT&#x201D; statements which operate when an explicit INSERT is being interjected into an IDENTITY column, to support non-ascii table identifiers on drivers such as pyodbc + unix + py2k that don&#x2019;t support unicode statements.<a class="changeset-link headerlink reference internal" href="#change-1f87a0341490182683860e3d896e5d83">&#xB6;</a></span></p><p><span class="yiyi-st" id="yiyi-1629">This change is also <strong>backported</strong> to: 0.9.7, 0.8.7</span></p><p></p></li><li><p id="change-1.0.0b1-188"><span class="yiyi-st" id="yiyi-1630"><span class="target" id="change-8540c30a01328c69626ed15f9d38ae35"><strong>[mssql] [bug] </strong></span>In the SQL Server pyodbc dialect, repaired the implementation for the <code class="docutils literal"><span class="pre">description_encoding</span></code> dialect parameter, which when not explicitly set was preventing cursor.description from being parsed correctly in the case of result sets that contained names in alternate encodings. </span><span class="yiyi-st" id="yiyi-1631">&#x8FD9;&#x4E2A;&#x53C2;&#x6570;&#x4E0D;&#x5E94;&#x8BE5;&#x88AB;&#x7EE7;&#x7EED;&#x4F7F;&#x7528;&#x3002;<a class="changeset-link headerlink reference internal" href="#change-8540c30a01328c69626ed15f9d38ae35">&#xB6;</a></span></p><p><span class="yiyi-st" id="yiyi-1632">This change is also <strong>backported</strong> to: 0.9.7, 0.8.7</span></p><p><span class="yiyi-st" id="yiyi-1633">&#x53C2;&#x8003;&#x6587;&#x732E;&#xFF1A;<a class="reference external" href="http://www.sqlalchemy.org/trac/ticket/3091">&#xFF03;3091</a></span></p></li></ul></div><div class="section" id="change-1.0.0b1-oracle"><h3><span class="yiyi-st" id="yiyi-1634">&#x9884;&#x8A00;<a class="headerlink" href="#change-1.0.0b1-oracle" title="Permalink to this headline">&#xB6; T0&gt;</a></span></h3><ul class="simple"><li><p id="change-1.0.0b1-189"><span class="yiyi-st" id="yiyi-1635"><span class="target" id="change-f1f07fe9ae58e5e7549f76959816986a"><strong>[oracle] [feature] </strong></span>&#x901A;&#x8FC7;&#x5C06;<code class="docutils literal"><span class="pre">?service_name=&lt;name&gt;</span></code>&#x4F20;&#x9012;&#x7ED9;URL&#xFF0C;&#x589E;&#x52A0;&#x4E86;&#x5BF9;&#x7279;&#x5B9A;&#x670D;&#x52A1;&#x540D;&#x79F0;&#x7684;cx_oracle&#x8FDE;&#x63A5;&#x7684;&#x652F;&#x6301;&#xFF0C;&#x800C;&#x4E0D;&#x662F;tns&#x540D;&#x79F0;&#x3002;</span><span class="yiyi-st" id="yiyi-1636">&#x8BF7;&#x6C42;&#x793C;&#x8C8C;S&#x142;awomirEhlert&#x3002;<a class="changeset-link headerlink reference internal" href="#change-f1f07fe9ae58e5e7549f76959816986a">&#xB6;</a></span></p><p><span class="yiyi-st" id="yiyi-1637">&#x53C2;&#x8003;&#x6587;&#x732E;&#xFF1A;<a class="reference external" href="https://github.com/zzzeek/sqlalchemy/pull/152">&#x8BF7;&#x6C42;github&#xFF1A;152</a></span></p></li><li><p id="change-1.0.0b1-190"><span class="yiyi-st" id="yiyi-1638"><span class="target" id="change-d721c0561d8a2b535f97670c2d8ef966"><strong>[oracle] [feature] </strong></span>&#x65B0;&#x7684;Oracle DDL&#x7279;&#x6027;&#x7528;&#x4E8E;&#x8868;&#xFF0C;&#x7D22;&#x5F15;&#xFF1A;COMPRESS&#xFF0C;BITMAP&#x3002;</span><span class="yiyi-st" id="yiyi-1639">Gabor Gombas&#x63D0;&#x4F9B;&#x8865;&#x4E01;&#x3002;<a class="changeset-link headerlink reference internal" href="#change-d721c0561d8a2b535f97670c2d8ef966">&#xB6;</a></span></p><p></p></li><li><p id="change-1.0.0b1-191"><span class="yiyi-st" id="yiyi-1640"><span class="target" id="change-d9d92d75a7435eeb5a6b5bc6eb1f7f1f"><strong>[oracle] [feature] </strong></span>&#x6DFB;&#x52A0;&#x4E86;&#x5BF9;Oracle&#x4E0B;&#x7684;CTE&#x7684;&#x652F;&#x6301;&#x3002;</span><span class="yiyi-st" id="yiyi-1641">This includes some tweaks to the aliasing syntax, as well as a new CTE feature <a class="reference internal" href="core_selectable.html#sqlalchemy.sql.expression.CTE.suffix_with" title="sqlalchemy.sql.expression.CTE.suffix_with"><code class="xref py py-meth docutils literal"><span class="pre">CTE.suffix_with()</span></code></a>, which is useful for adding in special Oracle-specific directives to the CTE.</span></p><div class="admonition seealso"><p class="first admonition-title"><span class="yiyi-st" id="yiyi-1642">&#x4E5F;&#x53EF;&#x4EE5;&#x770B;&#x770B;</span></p><p class="last"><span class="yiyi-st" id="yiyi-1643"><a class="reference internal" href="migration_10.html#change-3220"><span>Improved support for CTEs in Oracle</span></a></span></p></div><span class="yiyi-st" id="yiyi-1645"> <a class="changeset-link headerlink reference internal" href="#change-d9d92d75a7435eeb5a6b5bc6eb1f7f1f">&#xB6;</a></span><p><span class="yiyi-st" id="yiyi-1644">&#x53C2;&#x8003;&#x6587;&#x732E;&#xFF1A;<a class="reference external" href="http://www.sqlalchemy.org/trac/ticket/3220">&#xFF03;3220</a></span></p></li><li><p id="change-1.0.0b1-192"><span class="yiyi-st" id="yiyi-1646"><span class="target" id="change-833d0958c15092ca207886692b5894b6"><strong>[oracle] [feature] </strong></span>&#x65B0;&#x589E;&#x4E86;&#x5BF9;Oracle&#x8868;&#x9009;&#x9879;ON COMMIT&#x7684;&#x652F;&#x6301;&#x3002;<a class="changeset-link headerlink reference internal" href="#change-833d0958c15092ca207886692b5894b6">&#xB6;</a></span></p><p></p></li><li><p id="change-1.0.0b1-193"><span class="yiyi-st" id="yiyi-1647"><span class="target" id="change-8cb6529185a476446f028d78bada53c7"><strong>[oracle] [bug] </strong></span>Fixed long-standing bug in Oracle dialect where bound parameter names that started with numbers would not be quoted, as Oracle doesn&#x2019;t like numerics in bound parameter names.<a class="changeset-link headerlink reference internal" href="#change-8cb6529185a476446f028d78bada53c7">&#xB6;</a></span></p><p><span class="yiyi-st" id="yiyi-1648">&#x8FD9;&#x4E2A;&#x6539;&#x53D8;&#x4E5F;&#x662F;<strong>backported</strong>&#x6539;&#x4E3A;&#xFF1A;0.9.8</span></p><p><span class="yiyi-st" id="yiyi-1649">&#x53C2;&#x8003;&#x6587;&#x732E;&#xFF1A;<a class="reference external" href="http://www.sqlalchemy.org/trac/ticket/2138">&#xFF03;2138</a></span></p></li><li><p id="change-1.0.0b1-194"><span class="yiyi-st" id="yiyi-1650"><span class="target" id="change-a07180efec1ae8c8de5daffb374ea261"><strong>[oracle] [bug] [tests] </strong></span>Fixed bug in oracle dialect test suite where in one test, &#x2018;username&#x2019; was assumed to be in the database URL, even though this might not be the case.<a class="changeset-link headerlink reference internal" href="#change-a07180efec1ae8c8de5daffb374ea261">&#xB6;</a></span></p><p><span class="yiyi-st" id="yiyi-1651">&#x8FD9;&#x4E2A;&#x6539;&#x53D8;&#x4E5F;&#x88AB;<strong>backported</strong>&#x6539;&#x4E3A;&#xFF1A;0.9.7</span></p><p><span class="yiyi-st" id="yiyi-1652">&#x53C2;&#x8003;&#x6587;&#x732E;&#xFF1A;<a class="reference external" href="http://www.sqlalchemy.org/trac/ticket/3128">&#xFF03;3128</a></span></p></li><li><p id="change-1.0.0b1-195"><span class="yiyi-st" id="yiyi-1653"><span class="target" id="change-b22f2a6c7705c972bdd48542da13e9e1"><strong>[oracle] [bug] </strong></span>An alias name will be properly quoted when referred to using the <code class="docutils literal"><span class="pre">%(name)s</span></code> token inside the <a class="reference internal" href="core_selectable.html#sqlalchemy.sql.expression.Select.with_hint" title="sqlalchemy.sql.expression.Select.with_hint"><code class="xref py py-meth docutils literal"><span class="pre">Select.with_hint()</span></code></a> method. </span><span class="yiyi-st" id="yiyi-1654">&#x4EE5;&#x524D;&#xFF0C;Oracle&#x540E;&#x7AEF;&#x6CA1;&#x6709;&#x5B9E;&#x73B0;&#x8FD9;&#x79CD;&#x5F15;&#x7528;&#x3002;<a class="changeset-link headerlink reference internal" href="#change-b22f2a6c7705c972bdd48542da13e9e1">&#xB6;</a></span></p><p></p></li></ul></div><div class="section" id="change-1.0.0b1-misc"><h3><span class="yiyi-st" id="yiyi-1655">&#x6742;&#x9879;<a class="headerlink" href="#change-1.0.0b1-misc" title="Permalink to this headline">&#xB6; T0&gt;</a></span></h3><ul class="simple"><li><p id="change-1.0.0b1-196"><span class="yiyi-st" id="yiyi-1656"><span class="target" id="change-34bed682b188b0328e558a3338cd3564"><strong>[feature] [examples] </strong></span>&#x6DFB;&#x52A0;&#x4E86;&#x4E00;&#x4E2A;&#x4F7F;&#x7528;&#x6700;&#x65B0;&#x5173;&#x7CFB;&#x529F;&#x80FD;&#x8BF4;&#x660E;&#x7269;&#x5316;&#x8DEF;&#x5F84;&#x7684;&#x65B0;&#x793A;&#x4F8B;&#x3002;</span><span class="yiyi-st" id="yiyi-1657">Jack Zhou&#x63D0;&#x4F9B;&#x7684;&#x4F8B;&#x5B50;&#x3002;<a class="changeset-link headerlink reference internal" href="#change-34bed682b188b0328e558a3338cd3564">&#xB6;</a></span></p><p><span class="yiyi-st" id="yiyi-1658">&#x8FD9;&#x4E2A;&#x6539;&#x53D8;&#x4E5F;&#x88AB;<strong>backported</strong>&#x6539;&#x4E3A;&#xFF1A;0.9.5</span></p><p><span class="yiyi-st" id="yiyi-1659">&#x53C2;&#x8003;&#x6587;&#x732E;&#xFF1A;<a class="reference external" href="https://bitbucket.org/zzzeek/sqlalchemy/pull-request/21">pull request bitbucket&#xFF1A;21</a></span></p></li><li><p id="change-1.0.0b1-197"><span class="yiyi-st" id="yiyi-1660"><span class="target" id="change-fabfc534f4d8cf8fe39e10413fb7d5e6"><strong>[feature] [ext] </strong></span>&#x6DFB;&#x52A0;&#x4E86;&#x4E00;&#x4E2A;&#x65B0;&#x7684;&#x6269;&#x5C55;&#x5957;&#x4EF6;<a class="reference internal" href="orm_extensions_baked.html#module-sqlalchemy.ext.baked" title="sqlalchemy.ext.baked"><code class="xref py py-mod docutils literal"><span class="pre">sqlalchemy.ext.baked</span></code></a>&#x3002;</span><span class="yiyi-st" id="yiyi-1661">&#x8FD9;&#x4E2A;&#x7B80;&#x5355;&#x4F46;&#x4E0D;&#x540C;&#x5BFB;&#x5E38;&#x7684;&#x7CFB;&#x7EDF;&#x53EF;&#x4EE5;&#x663E;&#x7740;&#x8282;&#x7701;Python&#x6784;&#x5EFA;&#x548C;&#x5904;&#x7406;orm <a class="reference internal" href="orm_query.html#sqlalchemy.orm.query.Query" title="sqlalchemy.orm.query.Query"><code class="xref py py-class docutils literal"><span class="pre">Query</span></code></a>&#x5BF9;&#x8C61;&#xFF0C;&#x4ECE;&#x67E5;&#x8BE2;&#x6784;&#x5EFA;&#x5230;&#x6E32;&#x67D3;&#x5B57;&#x7B26;&#x4E32;SQL&#x8BED;&#x53E5;&#x3002;</span></p><div class="admonition seealso"><p class="first admonition-title"><span class="yiyi-st" id="yiyi-1662">&#x4E5F;&#x53EF;&#x4EE5;&#x770B;&#x770B;</span></p><p class="last"><span class="yiyi-st" id="yiyi-1663"><a class="reference internal" href="orm_extensions_baked.html"><span>Baked Queries</span></a></span></p></div><span class="yiyi-st" id="yiyi-1665"> <a class="changeset-link headerlink reference internal" href="#change-fabfc534f4d8cf8fe39e10413fb7d5e6">&#xB6;</a></span><p><span class="yiyi-st" id="yiyi-1664">&#x53C2;&#x8003;&#x6587;&#x732E;&#xFF1A;<a class="reference external" href="http://www.sqlalchemy.org/trac/ticket/3054">&#xFF03;3054</a></span></p></li><li><p id="change-1.0.0b1-198"><span class="yiyi-st" id="yiyi-1666"><span class="target" id="change-c3e04c4306f45aebbbd32a56d0f13d47"><strong>[feature] [examples] </strong></span>&#x4E00;&#x5957;&#x65B0;&#x7684;&#x793A;&#x4F8B;&#xFF0C;&#x81F4;&#x529B;&#x4E8E;&#x4ECE;&#x591A;&#x4E2A;&#x89D2;&#x5EA6;&#x8BE6;&#x7EC6;&#x7814;&#x7A76;SQLAlchemy ORM&#x548C;Core&#x4EE5;&#x53CA;DBAPI&#x7684;&#x6027;&#x80FD;&#x3002;</span><span class="yiyi-st" id="yiyi-1667">&#x8BE5;&#x5957;&#x4EF6;&#x5728;&#x4E00;&#x4E2A;&#x5BB9;&#x5668;&#x5185;&#x8FD0;&#x884C;&#xFF0C;&#x8BE5;&#x5BB9;&#x5668;&#x901A;&#x8FC7;&#x63A7;&#x5236;&#x53F0;&#x8F93;&#x51FA;&#x4EE5;&#x53CA;&#x901A;&#x8FC7;RunSnake&#x5DE5;&#x5177;&#x4EE5;&#x56FE;&#x5F62;&#x65B9;&#x5F0F;&#x63D0;&#x4F9B;&#x5185;&#x7F6E;&#x7684;&#x5206;&#x6790;&#x663E;&#x793A;&#x3002;</span></p><div class="admonition seealso"><p class="first admonition-title"><span class="yiyi-st" id="yiyi-1668">&#x4E5F;&#x53EF;&#x4EE5;&#x770B;&#x770B;</span></p><p class="last"><span class="yiyi-st" id="yiyi-1669"><a class="reference internal" href="orm_examples.html#examples-performance"><span>Performance</span></a></span></p></div><span class="yiyi-st" id="yiyi-1670"> <a class="changeset-link headerlink reference internal" href="#change-c3e04c4306f45aebbbd32a56d0f13d47">&#xB6;</a></span><p></p></li><li><p id="change-1.0.0b1-199"><span class="yiyi-st" id="yiyi-1671"><span class="target" id="change-748a15a873fc07b67bd7ddfe221fbff3"><strong>[feature] [ext] </strong></span>The <a class="reference internal" href="orm_extensions_automap.html#module-sqlalchemy.ext.automap" title="sqlalchemy.ext.automap"><code class="xref py py-mod docutils literal"><span class="pre">sqlalchemy.ext.automap</span></code></a> extension will now set <code class="docutils literal"><span class="pre">cascade=&quot;all,</span> <span class="pre">delete-orphan&quot;</span></code> automatically on a one-to-many relationship/backref where the foreign key is detected as containing one or more non-nullable columns. </span><span class="yiyi-st" id="yiyi-1672">&#x5728;&#x8FD9;&#x79CD;&#x60C5;&#x51B5;&#x4E0B;&#xFF0C;&#x8BE5;&#x53C2;&#x6570;&#x51FA;&#x73B0;&#x5728;&#x4F20;&#x9012;&#x7ED9;<a class="reference internal" href="orm_extensions_automap.html#sqlalchemy.ext.automap.generate_relationship" title="sqlalchemy.ext.automap.generate_relationship"><code class="xref py py-func docutils literal"><span class="pre">automap.generate_relationship()</span></code></a>&#x7684;&#x5173;&#x952E;&#x5B57;&#x4E2D;&#xFF0C;&#x5E76;&#x4E14;&#x4ECD;&#x7136;&#x53EF;&#x4EE5;&#x88AB;&#x8986;&#x76D6;&#x3002;</span><span class="yiyi-st" id="yiyi-1673">Additionally, if the <a class="reference internal" href="core_constraints.html#sqlalchemy.schema.ForeignKeyConstraint" title="sqlalchemy.schema.ForeignKeyConstraint"><code class="xref py py-class docutils literal"><span class="pre">ForeignKeyConstraint</span></code></a> specifies <code class="docutils literal"><span class="pre">ondelete=&quot;CASCADE&quot;</span></code> for a non-nullable or <code class="docutils literal"><span class="pre">ondelete=&quot;SET</span> <span class="pre">NULL&quot;</span></code> for a nullable set of columns, the argument <code class="docutils literal"><span class="pre">passive_deletes=True</span></code> is also added to the relationship. </span><span class="yiyi-st" id="yiyi-1674">&#x8BF7;&#x6CE8;&#x610F;&#xFF0C;&#x5E76;&#x975E;&#x6240;&#x6709;&#x540E;&#x7AEF;&#x90FD;&#x652F;&#x6301;ondelete&#x7684;&#x53CD;&#x5C04;&#xFF0C;&#x4F46;&#x540E;&#x7AEF;&#x5305;&#x62EC;Postgresql&#x548C;MySQL&#x3002;<a class="changeset-link headerlink reference internal" href="#change-748a15a873fc07b67bd7ddfe221fbff3">&#xB6;</a></span></p><p><span class="yiyi-st" id="yiyi-1675">&#x53C2;&#x8003;&#x6587;&#x732E;&#xFF1A;<a class="reference external" href="http://www.sqlalchemy.org/trac/ticket/3210">&#xFF03;3210</a></span></p></li><li><p id="change-1.0.0b1-200"><span class="yiyi-st" id="yiyi-1676"><span class="target" id="change-4b74183b867c026c18e2cd7db8eeb462"><strong>[removed] </strong></span> Drizzle&#x65B9;&#x8A00;&#x5DF2;&#x4ECE;Core&#x4E2D;&#x5220;&#x9664;&#xFF1B;&#x5B83;&#x73B0;&#x5728;&#x53EF;&#x4EE5;&#x4F5C;&#x4E3A;<a class="reference external" href="https://bitbucket.org/zzzeek/sqlalchemy-drizzle">sqlalchemy-drizzle</a>&#xFF0C;&#x4E00;&#x79CD;&#x72EC;&#x7ACB;&#x7684;&#x7B2C;&#x4E09;&#x65B9;&#x65B9;&#x8A00;&#x3002;</span><span class="yiyi-st" id="yiyi-1677">&#x8BE5;&#x65B9;&#x8A00;&#x4ECD;&#x7136;&#x57FA;&#x4E8E;SQLAlchemy&#x4E2D;&#x5B58;&#x5728;&#x7684;MySQL&#x65B9;&#x8A00;&#x3002;</span></p><div class="admonition seealso"><p class="first admonition-title"><span class="yiyi-st" id="yiyi-1678">&#x4E5F;&#x53EF;&#x4EE5;&#x770B;&#x770B;</span></p><p class="last"><span class="yiyi-st" id="yiyi-1679"><a class="reference internal" href="migration_10.html#change-2984"><span>Drizzle Dialect is now an External Dialect</span></a></span></p></div><span class="yiyi-st" id="yiyi-1680"> <a class="changeset-link headerlink reference internal" href="#change-4b74183b867c026c18e2cd7db8eeb462">&#xB6;</a></span><p></p></li><li><p id="change-1.0.0b1-201"><span class="yiyi-st" id="yiyi-1681"><span class="target" id="change-065233e8c2777e0d68ba556dd655c2f9"><strong>[bug] [ext] [py3k] </strong></span>Fixed bug where the association proxy list class would not interpret slices correctly under Py3K. </span><span class="yiyi-st" id="yiyi-1682">&#x62C9;&#x5C14;&#x8BF7;&#x6C42;&#x793C;&#x8C8C;Gilles Dartiguelongue&#x3002;<a class="changeset-link headerlink reference internal" href="#change-065233e8c2777e0d68ba556dd655c2f9">&#xB6;</a></span></p><p><span class="yiyi-st" id="yiyi-1683">&#x8FD9;&#x4E2A;&#x6539;&#x53D8;&#x4E5F;&#x88AB;<strong>backported</strong>&#x6539;&#x4E3A;&#xFF1A;0.9.9</span></p><p><span class="yiyi-st" id="yiyi-1684">&#x53C2;&#x8003;&#x6587;&#x732E;&#xFF1A;<a class="reference external" href="https://github.com/zzzeek/sqlalchemy/pull/154">&#x8BF7;&#x6C42;github&#xFF1A;154</a></span></p></li><li><p id="change-1.0.0b1-202"><span class="yiyi-st" id="yiyi-1685"><span class="target" id="change-fa2a2b92fa766fc863eb7235e9fb3d03"><strong>[bug] [examples] </strong></span>Updated the <a class="reference internal" href="orm_examples.html#examples-versioned-history"><span>Versioning with a History Table</span></a> example such that mapped columns are re-mapped to match column names as well as grouping of columns; in particular, this allows columns that are explicitly grouped in a same-column-named joined inheritance scenario to be mapped in the same way in the history mappings, avoiding warnings added in the 0.9 series regarding this pattern and allowing the same view of attribute keys.<a class="changeset-link headerlink reference internal" href="#change-fa2a2b92fa766fc863eb7235e9fb3d03">&#xB6;</a></span></p><p><span class="yiyi-st" id="yiyi-1686">&#x8FD9;&#x4E2A;&#x6539;&#x53D8;&#x4E5F;&#x88AB;<strong>backported</strong>&#x6539;&#x4E3A;&#xFF1A;0.9.9</span></p><p></p></li><li><p id="change-1.0.0b1-203"><span class="yiyi-st" id="yiyi-1687"><span class="target" id="change-615e4d1220e634fb7ce6d05550eb21a7"><strong>[bug] [examples] </strong></span>Fixed a bug in the examples/generic_assocaitions/discriminator_on_association.py example, where the subclasses of AddressAssociation were not being mapped as &#x201C;single table inheritance&#x201D;, leading to problems when trying to use the mappings further.<a class="changeset-link headerlink reference internal" href="#change-615e4d1220e634fb7ce6d05550eb21a7">&#xB6;</a></span></p><p><span class="yiyi-st" id="yiyi-1688">&#x8FD9;&#x4E2A;&#x6539;&#x53D8;&#x4E5F;&#x88AB;<strong>backported</strong>&#x6539;&#x4E3A;&#xFF1A;0.9.9</span></p><p></p></li><li><p id="change-1.0.0b1-204"><span class="yiyi-st" id="yiyi-1689"><span class="target" id="change-42c47d9c9a02c97b7a2be9901e2a9645"><strong>[bug] [declarative] </strong></span>Fixed an unlikely race condition observed in some exotic end-user setups, where the attempt to check for &#x201C;duplicate class name&#x201D; in declarative would hit upon a not-totally-cleaned-up weak reference related to some other class being removed; the check here now ensures the weakref still references an object before calling upon it further.<a class="changeset-link headerlink reference internal" href="#change-42c47d9c9a02c97b7a2be9901e2a9645">&#xB6;</a></span></p><p><span class="yiyi-st" id="yiyi-1690">&#x8FD9;&#x4E2A;&#x6539;&#x53D8;&#x4E5F;&#x662F;<strong>backported</strong>&#x6539;&#x4E3A;&#xFF1A;0.9.8</span></p><p><span class="yiyi-st" id="yiyi-1691">&#x53C2;&#x8003;&#x6587;&#x732E;&#xFF1A;<a class="reference external" href="http://www.sqlalchemy.org/trac/ticket/3208">&#xFF03;3208</a></span></p></li><li><p id="change-1.0.0b1-205"><span class="yiyi-st" id="yiyi-1692"><span class="target" id="change-0c1e3c4d921376b5c6e8063fc8ce0569"><strong>[bug] [ext] </strong></span>&#x4FEE;&#x6B63;&#x4E86;&#x8BA2;&#x8D2D;&#x6E05;&#x5355;&#x4E2D;&#x7684;bug&#xFF0C;&#x5982;&#x679C;reorder_on_append&#x6807;&#x5FD7;&#x88AB;&#x8BBE;&#x7F6E;&#x4E3A;True&#xFF0C;&#x5219;&#x5728;&#x6536;&#x96C6;&#x66FF;&#x6362;&#x4E8B;&#x4EF6;&#x671F;&#x95F4;&#x5C06;&#x629B;&#x51FA;&#x7269;&#x54C1;&#x7684;&#x987A;&#x5E8F;&#x3002;</span><span class="yiyi-st" id="yiyi-1693">&#x8BE5;&#x4FEE;&#x590D;&#x786E;&#x4FDD;&#x6392;&#x5E8F;&#x5217;&#x8868;&#x4EC5;&#x5F71;&#x54CD;&#x4E0E;&#x8BE5;&#x5BF9;&#x8C61;&#x663E;&#x5F0F;&#x5173;&#x8054;&#x7684;&#x5217;&#x8868;&#x3002;<a class="changeset-link headerlink reference internal" href="#change-0c1e3c4d921376b5c6e8063fc8ce0569">&#xB6;</a></span></p><p><span class="yiyi-st" id="yiyi-1694">&#x8FD9;&#x4E2A;&#x6539;&#x53D8;&#x4E5F;&#x662F;<strong>backported</strong>&#x6539;&#x4E3A;&#xFF1A;0.9.8</span></p><p><span class="yiyi-st" id="yiyi-1695">&#x53C2;&#x8003;&#x6587;&#x732E;&#xFF1A;<a class="reference external" href="http://www.sqlalchemy.org/trac/ticket/3191">&#xFF03;3191</a></span></p></li><li><p id="change-1.0.0b1-206"><span class="yiyi-st" id="yiyi-1696">&#x4FEE;&#x6B63;&#x4E86;<a class="reference internal" href="orm_extensions_mutable.html#sqlalchemy.ext.mutable.MutableDict" title="sqlalchemy.ext.mutable.MutableDict"><code class="xref py py-class docutils literal"><span class="pre">ext.mutable.MutableDict</span></code></a>&#x65E0;&#x6CD5;&#x5B9E;&#x73B0;<code class="docutils literal"><span class="pre">update()</span></code>&#x5B57;&#x5178;&#x65B9;&#x6CD5;&#x7684;&#x9519;&#x8BEF;&#xFF0C;&#x56E0;&#x6B64;&#x65E0;&#x6CD5;&#x6355;&#x6349;&#x66F4;&#x6539;&#x3002;<span class="target" id="change-294bea028af9c9afef0f3f0e1704cdcb"><strong>[bug] [ext] </strong></span></span><span class="yiyi-st" id="yiyi-1697">&#x62C9;&#x8BF7;&#x6C42;&#x9A6C;&#x7279;Chisholm&#x3002;<a class="changeset-link headerlink reference internal" href="#change-294bea028af9c9afef0f3f0e1704cdcb">&#xB6;</a></span></p><p><span class="yiyi-st" id="yiyi-1698">&#x8FD9;&#x4E2A;&#x6539;&#x53D8;&#x4E5F;&#x662F;<strong>backported</strong>&#x6539;&#x4E3A;&#xFF1A;0.9.8</span></p><p></p></li><li><p id="change-1.0.0b1-207"><span class="yiyi-st" id="yiyi-1699"><span class="target" id="change-8d145545ac65b225cab55e7ddd8b87c1"><strong>[bug] [ext] </strong></span>Fixed bug where a custom subclass of <a class="reference internal" href="orm_extensions_mutable.html#sqlalchemy.ext.mutable.MutableDict" title="sqlalchemy.ext.mutable.MutableDict"><code class="xref py py-class docutils literal"><span class="pre">ext.mutable.MutableDict</span></code></a> would not show up in a &#x201C;coerce&#x201D; operation, and would instead return a plain <a class="reference internal" href="orm_extensions_mutable.html#sqlalchemy.ext.mutable.MutableDict" title="sqlalchemy.ext.mutable.MutableDict"><code class="xref py py-class docutils literal"><span class="pre">ext.mutable.MutableDict</span></code></a>. </span><span class="yiyi-st" id="yiyi-1700">&#x62C9;&#x8BF7;&#x6C42;&#x9A6C;&#x7279;Chisholm&#x3002;<a class="changeset-link headerlink reference internal" href="#change-8d145545ac65b225cab55e7ddd8b87c1">&#xB6;</a></span></p><p><span class="yiyi-st" id="yiyi-1701">&#x8FD9;&#x4E2A;&#x6539;&#x53D8;&#x4E5F;&#x662F;<strong>backported</strong>&#x6539;&#x4E3A;&#xFF1A;0.9.8</span></p><p></p></li><li><p id="change-1.0.0b1-208"><span class="yiyi-st" id="yiyi-1702"><span class="target" id="change-40ab208d891571a2d6aaa91d50bc86b4"><strong>[bug] [pool] </strong></span>Fixed bug in connection pool logging where the &#x201C;connection checked out&#x201D; debug logging message would not emit if the logging were set up using <code class="docutils literal"><span class="pre">logging.setLevel()</span></code>, rather than using the <code class="docutils literal"><span class="pre">echo_pool</span></code> flag. </span><span class="yiyi-st" id="yiyi-1703">&#x5DF2;&#x7ECF;&#x6DFB;&#x52A0;&#x4E86;&#x6D4B;&#x8BD5;&#x6765;&#x58F0;&#x660E;&#x8FD9;&#x4E2A;&#x65E5;&#x5FD7;&#x8BB0;&#x5F55;&#x3002;</span><span class="yiyi-st" id="yiyi-1704">&#x8FD9;&#x662F;&#x5728;0.9.0&#x4E2D;&#x5F15;&#x5165;&#x7684;&#x56DE;&#x5F52;&#x3002;<a class="changeset-link headerlink reference internal" href="#change-40ab208d891571a2d6aaa91d50bc86b4">&#xB6;</a></span></p><p><span class="yiyi-st" id="yiyi-1705">&#x8FD9;&#x4E2A;&#x6539;&#x53D8;&#x4E5F;&#x662F;<strong>backported</strong>&#x6539;&#x4E3A;&#xFF1A;0.9.8</span></p><p><span class="yiyi-st" id="yiyi-1706">&#x53C2;&#x8003;&#x6587;&#x732E;&#xFF1A;<a class="reference external" href="http://www.sqlalchemy.org/trac/ticket/3168">&#xFF03;3168</a></span></p></li><li><p id="change-1.0.0b1-209"><span class="yiyi-st" id="yiyi-1707"><span class="target" id="change-b4849c03234d67784392c98314d97728"><strong>[bug] [tests] </strong></span>&#x4FEE;&#x6B63;&#x4E86;&#x201C;python setup.py test&#x201D;&#x6CA1;&#x6709;&#x6B63;&#x786E;&#x8C03;&#x7528;distutils&#x7684;&#x9519;&#x8BEF;&#xFF0C;&#x5E76;&#x4E14;&#x5728;&#x6D4B;&#x8BD5;&#x5957;&#x4EF6;&#x7ED3;&#x675F;&#x65F6;&#x4F1A;&#x53D1;&#x51FA;&#x9519;&#x8BEF;&#x3002;<a class="changeset-link headerlink reference internal" href="#change-b4849c03234d67784392c98314d97728"> T2&gt;</a></span></p><p><span class="yiyi-st" id="yiyi-1708">&#x8FD9;&#x4E2A;&#x6539;&#x53D8;&#x4E5F;&#x88AB;<strong>backported</strong>&#x6539;&#x4E3A;&#xFF1A;0.9.7</span></p><p></p></li><li><p id="change-1.0.0b1-210"><span class="yiyi-st" id="yiyi-1709"><span class="target" id="change-b4c1be63379dda62c10d4726c27c8beb"><strong>[bug] [declarative] </strong></span>Fixed bug when the declarative <code class="docutils literal"><span class="pre">__abstract__</span></code> flag was not being distinguished for when it was actually the value <code class="docutils literal"><span class="pre">False</span></code>. </span><span class="yiyi-st" id="yiyi-1710"><code class="docutils literal"><span class="pre">__abstract__</span></code>&#x6807;&#x5FD7;&#x9700;&#x8981;&#x5728;&#x88AB;&#x6D4B;&#x8BD5;&#x7684;&#x7EA7;&#x522B;&#x4E0A;&#x8FDB;&#x884C;&#x771F;&#x5B9E;&#x503C;&#x8BA1;&#x7B97;&#x3002;<a class="changeset-link headerlink reference internal" href="#change-b4c1be63379dda62c10d4726c27c8beb">&#xB6;</a></span></p><p><span class="yiyi-st" id="yiyi-1711">&#x8FD9;&#x4E2A;&#x6539;&#x53D8;&#x4E5F;&#x88AB;<strong>backported</strong>&#x6539;&#x4E3A;&#xFF1A;0.9.7</span></p><p><span class="yiyi-st" id="yiyi-1712">&#x53C2;&#x8003;&#x6587;&#x732E;&#xFF1A;<a class="reference external" href="http://www.sqlalchemy.org/trac/ticket/3097">&#xFF03;3097</a></span></p></li><li><p id="change-1.0.0b1-211"><span class="yiyi-st" id="yiyi-1713"><span class="target" id="change-cfe458e354058e2bba60dd1c3f521791"><strong>[bug] [testsuite] </strong></span>In public test suite, shanged to use of <code class="docutils literal"><span class="pre">String(40)</span></code> from less-supported <code class="docutils literal"><span class="pre">Text</span></code> in <code class="docutils literal"><span class="pre">StringTest.test_literal_backslashes</span></code>. </span><span class="yiyi-st" id="yiyi-1714">Pullreq&#x793C;&#x8C8C;Jan. <a class="changeset-link headerlink reference internal" href="#change-cfe458e354058e2bba60dd1c3f521791">&#xB6;</a></span></p><p><span class="yiyi-st" id="yiyi-1715">&#x8FD9;&#x4E2A;&#x6539;&#x53D8;&#x4E5F;&#x88AB;<strong>backported</strong>&#x6539;&#x4E3A;&#xFF1A;0.9.5</span></p><p><span class="yiyi-st" id="yiyi-1716">&#x53C2;&#x8003;&#xFF1A;<a class="reference external" href="https://github.com/zzzeek/sqlalchemy/pull/95">&#x8BF7;&#x6C42;github&#xFF1A;95</a></span></p></li><li><p id="change-1.0.0b1-212"><span class="yiyi-st" id="yiyi-1717"><span class="target" id="change-2792c57b68ceebf75c4999473088cba4"><strong>[bug] [tests] [py3k] </strong></span>&#x66F4;&#x6B63;&#x4E86;&#x8FD0;&#x884C;&#x6D4B;&#x8BD5;&#x65F6;&#x6D89;&#x53CA;<code class="docutils literal"><span class="pre">imp</span></code>&#x6A21;&#x5757;&#x548C;Python 3.3&#x6216;&#x66F4;&#x9AD8;&#x7248;&#x672C;&#x7684;&#x4E00;&#x4E9B;&#x5F03;&#x7528;&#x8B66;&#x544A;&#x3002;</span><span class="yiyi-st" id="yiyi-1718">&#x62C9;&#x8BF7;&#x6C42;&#x9A6C;&#x7279;Chisholm&#x3002;<a class="changeset-link headerlink reference internal" href="#change-2792c57b68ceebf75c4999473088cba4">&#xB6;</a></span></p><p><span class="yiyi-st" id="yiyi-1719">&#x8FD9;&#x4E2A;&#x6539;&#x53D8;&#x4E5F;&#x88AB;<strong>backported</strong>&#x6539;&#x4E3A;&#xFF1A;0.9.5</span></p><p><span class="yiyi-st" id="yiyi-1720">References: <a class="reference external" href="http://www.sqlalchemy.org/trac/ticket/2830">#2830</a>, <a class="reference external" href="https://bitbucket.org/zzzeek/sqlalchemy/pull-request/2830">pull request bitbucket:2830</a></span></p></li><li><p id="change-1.0.0b1-213"><span class="yiyi-st" id="yiyi-1721"><span class="target" id="change-7190c4c8e7853dc246b3c4c738478edb"><strong>[bug] [declarative] </strong></span>The <code class="docutils literal"><span class="pre">__mapper_args__</span></code> dictionary is copied from a declarative mixin or abstract class when accessed, so that modifications made to this dictionary by declarative itself won&#x2019;t conflict with that of other mappings. </span><span class="yiyi-st" id="yiyi-1722">&#x5173;&#x4E8E;<code class="docutils literal"><span class="pre">version_id_col</span></code>&#x548C;<code class="docutils literal"><span class="pre">polymorphic_on</span></code>&#x53C2;&#x6570;&#x7684;&#x5B57;&#x5178;&#x88AB;&#x4FEE;&#x6539;&#xFF0C;&#x5C06;&#x5185;&#x90E8;&#x7684;&#x5217;&#x66FF;&#x6362;&#x4E3A;&#x6B63;&#x5F0F;&#x6620;&#x5C04;&#x5230;&#x672C;&#x5730;&#x7C7B;/&#x8868;&#x7684;&#x5217;&#x3002;<a class="changeset-link headerlink reference internal" href="#change-7190c4c8e7853dc246b3c4c738478edb">&#xB6; t4 &gt;</a></span></p><p><span class="yiyi-st" id="yiyi-1723">This change is also <strong>backported</strong> to: 0.9.5, 0.8.7</span></p><p><span class="yiyi-st" id="yiyi-1724">&#x53C2;&#x8003;&#x6587;&#x732E;&#xFF1A;<a class="reference external" href="http://www.sqlalchemy.org/trac/ticket/3062">&#xFF03;3062</a></span></p></li><li><p id="change-1.0.0b1-214"><span class="yiyi-st" id="yiyi-1725"><span class="target" id="change-eae3f266c75c4ae69fc34c7668edf3d1"><strong>[bug] [ext] </strong></span>Fixed bug in mutable extension where <a class="reference internal" href="orm_extensions_mutable.html#sqlalchemy.ext.mutable.MutableDict" title="sqlalchemy.ext.mutable.MutableDict"><code class="xref py py-class docutils literal"><span class="pre">MutableDict</span></code></a> did not report change events for the <code class="docutils literal"><span class="pre">setdefault()</span></code> dictionary operation.<a class="changeset-link headerlink reference internal" href="#change-eae3f266c75c4ae69fc34c7668edf3d1">&#xB6;</a></span></p><p><span class="yiyi-st" id="yiyi-1726">This change is also <strong>backported</strong> to: 0.9.5, 0.8.7</span></p><p><span class="yiyi-st" id="yiyi-1727">&#x53C2;&#x8003;&#x6587;&#x732E;&#xFF1A;<a class="reference external" href="http://www.sqlalchemy.org/trac/ticket/3093">&#xFF03;3093</a>&#xFF0C;<a class="reference external" href="http://www.sqlalchemy.org/trac/ticket/3051">&#xFF03;3051</a></span></p></li><li><p id="change-1.0.0b1-215"><span class="yiyi-st" id="yiyi-1728"><span class="target" id="change-97ce2c718bb55b40569d4c50e584b2fc"><strong>[bug] [ext] </strong></span>Fixed bug where <a class="reference internal" href="orm_extensions_mutable.html#sqlalchemy.ext.mutable.MutableDict.setdefault" title="sqlalchemy.ext.mutable.MutableDict.setdefault"><code class="xref py py-meth docutils literal"><span class="pre">MutableDict.setdefault()</span></code></a> didn&#x2019;t return the existing or new value (this bug was not released in any 0.8 version). </span><span class="yiyi-st" id="yiyi-1729">&#x8BF7;&#x6C42;&#x793C;&#x8C8C;&#x6258;&#x9A6C;&#x65AF;Herv&#xE9;&#x3002;<a class="changeset-link headerlink reference internal" href="#change-97ce2c718bb55b40569d4c50e584b2fc">&#xB6;</a></span></p><p><span class="yiyi-st" id="yiyi-1730">This change is also <strong>backported</strong> to: 0.9.5, 0.8.7</span></p><p><span class="yiyi-st" id="yiyi-1731">References: <a class="reference external" href="http://www.sqlalchemy.org/trac/ticket/3093">#3093</a>, <a class="reference external" href="http://www.sqlalchemy.org/trac/ticket/3051">#3051</a>, <a class="reference external" href="https://bitbucket.org/zzzeek/sqlalchemy/pull-request/24">pull request bitbucket:24</a></span></p></li></ul></div></div>