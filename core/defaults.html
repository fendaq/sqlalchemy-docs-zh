<h1><span class="yiyi-st" id="yiyi-48">&#x5217;&#x63D2;&#x5165;/&#x66F4;&#x65B0;&#x9ED8;&#x8BA4;&#x503C;<a class="headerlink" href="#column-insert-update-defaults" title="Permalink to this headline">&#xB6;</a></span></h1><p><span class="yiyi-st" id="yiyi-49">SQLAlchemy&#x9488;&#x5BF9;&#x5728;INSERT&#x548C;UPDATE&#x8BED;&#x53E5;&#x671F;&#x95F4;&#x53D1;&#x751F;&#x7684;&#x5217;&#x7EA7;&#x4E8B;&#x4EF6;&#x63D0;&#x4F9B;&#x4E86;&#x975E;&#x5E38;&#x4E30;&#x5BCC;&#x7684;&#x529F;&#x80FD;&#x96C6;&#x3002;</span><span class="yiyi-st" id="yiyi-50">&#x9009;&#x9879;&#x5305;&#x62EC;&#xFF1A;</span></p><ul class="simple"><li><span class="yiyi-st" id="yiyi-51">&#x5728;INSERT&#x548C;UPDATE&#x64CD;&#x4F5C;&#x671F;&#x95F4;&#x7528;&#x4F5C;&#x9ED8;&#x8BA4;&#x503C;&#x7684;&#x6807;&#x91CF;&#x503C;</span></li><li><span class="yiyi-st" id="yiyi-52">&#x5728;INSERT&#x548C;UPDATE&#x64CD;&#x4F5C;&#x65F6;&#x6267;&#x884C;&#x7684;Python&#x51FD;&#x6570;</span></li><li><span class="yiyi-st" id="yiyi-53">INSERT&#x8BED;&#x53E5;&#x4E2D;&#x5D4C;&#x5165;&#x7684;SQL&#x8868;&#x8FBE;&#x5F0F;&#xFF08;&#x6216;&#x8005;&#x5728;&#x67D0;&#x4E9B;&#x60C5;&#x51B5;&#x4E0B;&#x9884;&#x5148;&#x6267;&#x884C;&#xFF09;</span></li><li><span class="yiyi-st" id="yiyi-54">&#x5D4C;&#x5165;&#x5728;UPDATE&#x8BED;&#x53E5;&#x4E2D;&#x7684;SQL&#x8868;&#x8FBE;&#x5F0F;</span></li><li><span class="yiyi-st" id="yiyi-55">&#x5728;INSERT&#x671F;&#x95F4;&#x4F7F;&#x7528;&#x7684;&#x670D;&#x52A1;&#x5668;&#x7AEF;&#x9ED8;&#x8BA4;&#x503C;</span></li><li><span class="yiyi-st" id="yiyi-56">&#x5728;UPDATE&#x671F;&#x95F4;&#x4F7F;&#x7528;&#x670D;&#x52A1;&#x5668;&#x7AEF;&#x89E6;&#x53D1;&#x5668;&#x7684;&#x6807;&#x8BB0;</span></li></ul><p><span class="yiyi-st" id="yiyi-57">&#x6240;&#x6709;&#x63D2;&#x5165;/&#x66F4;&#x65B0;&#x9ED8;&#x8BA4;&#x503C;&#x7684;&#x4E00;&#x822C;&#x89C4;&#x5219;&#x662F;&#xFF0C;&#x53EA;&#x6709;&#x5F53;&#x7279;&#x5B9A;&#x5217;&#x7684;&#x503C;&#x4E0D;&#x4F5C;&#x4E3A;<code class="docutils literal"><span class="pre">execute()</span></code>&#x53C2;&#x6570;&#x4F20;&#x9012;&#x65F6;&#x624D;&#x4F1A;&#x751F;&#x6548;&#x3002;&#x5426;&#x5219;&#xFF0C;&#x4F7F;&#x7528;&#x7ED9;&#x5B9A;&#x7684;&#x503C;&#x3002;</span></p><div class="section" id="scalar-defaults"><h2><span class="yiyi-st" id="yiyi-58">&#x6807;&#x91CF;&#x9ED8;&#x8BA4;&#x503C;<a class="headerlink" href="#scalar-defaults" title="Permalink to this headline">&#xB6;</a></span></h2><p><span class="yiyi-st" id="yiyi-59">&#x6700;&#x7B80;&#x5355;&#x7684;&#x9ED8;&#x8BA4;&#x503C;&#x662F;&#x4E00;&#x4E2A;&#x7528;&#x4F5C;&#x5217;&#x9ED8;&#x8BA4;&#x503C;&#x7684;&#x6807;&#x91CF;&#x503C;&#xFF1A;</span></p><div class="highlight-python"><div class="highlight"><pre><span></span><span class="n">Table</span><span class="p">(</span><span class="s2">&quot;mytable&quot;</span><span class="p">,</span> <span class="n">meta</span><span class="p">,</span>
    <span class="n">Column</span><span class="p">(</span><span class="s2">&quot;somecolumn&quot;</span><span class="p">,</span> <span class="n">Integer</span><span class="p">,</span> <span class="n">default</span><span class="o">=</span><span class="mi">12</span><span class="p">)</span>
<span class="p">)</span></pre></div></div><p><span class="yiyi-st" id="yiyi-60">&#x4E0A;&#x9762;&#xFF0C;&#x5982;&#x679C;&#x6CA1;&#x6709;&#x63D0;&#x4F9B;&#x5176;&#x4ED6;&#x503C;&#xFF0C;&#x5219;&#x5728;INSERT&#x671F;&#x95F4;&#x5C06;&#x503C;&#x201C;12&#x201D;&#x7ED1;&#x5B9A;&#x4E3A;&#x5217;&#x503C;&#x3002;</span></p><p><span class="yiyi-st" id="yiyi-61">&#x6807;&#x91CF;&#x503C;&#x4E5F;&#x53EF;&#x80FD;&#x4E0E;UPDATE&#x8BED;&#x53E5;&#x76F8;&#x5173;&#x8054;&#xFF0C;&#x5C3D;&#x7BA1;&#x8FD9;&#x4E0D;&#x662F;&#x5F88;&#x5E38;&#x89C1;&#xFF08;&#x56E0;&#x4E3A;UPDATE&#x8BED;&#x53E5;&#x901A;&#x5E38;&#x5728;&#x5BFB;&#x627E;&#x52A8;&#x6001;&#x9ED8;&#x8BA4;&#x503C;&#xFF09;&#xFF1A;</span></p><div class="highlight-python"><div class="highlight"><pre><span></span><span class="n">Table</span><span class="p">(</span><span class="s2">&quot;mytable&quot;</span><span class="p">,</span> <span class="n">meta</span><span class="p">,</span>
    <span class="n">Column</span><span class="p">(</span><span class="s2">&quot;somecolumn&quot;</span><span class="p">,</span> <span class="n">Integer</span><span class="p">,</span> <span class="n">onupdate</span><span class="o">=</span><span class="mi">25</span><span class="p">)</span>
<span class="p">)</span></pre></div></div></div><div class="section" id="python-executed-functions"><h2><span class="yiyi-st" id="yiyi-62">Python&#x6267;&#x884C;&#x7684;&#x51FD;&#x6570;<a class="headerlink" href="#python-executed-functions" title="Permalink to this headline">&#xB6;</a></span></h2><p><span class="yiyi-st" id="yiyi-63"><a class="reference internal" href="metadata.html#sqlalchemy.schema.Column.params.default" title="sqlalchemy.schema.Column"><code class="xref py py-paramref docutils literal"><span class="pre">Column.default</span></code></a>&#x548C;<a class="reference internal" href="metadata.html#sqlalchemy.schema.Column.params.onupdate" title="sqlalchemy.schema.Column"><code class="xref py py-paramref docutils literal"><span class="pre">Column.onupdate</span></code></a>&#x5173;&#x952E;&#x5B57;&#x53C2;&#x6570;&#x4E5F;&#x63A5;&#x53D7;Python&#x51FD;&#x6570;&#x3002;</span><span class="yiyi-st" id="yiyi-64">&#x5982;&#x679C;&#x6CA1;&#x6709;&#x63D0;&#x4F9B;&#x8BE5;&#x5217;&#x7684;&#x5176;&#x4ED6;&#x503C;&#xFF0C;&#x5219;&#x5728;&#x63D2;&#x5165;&#x6216;&#x66F4;&#x65B0;&#x65F6;&#x8C03;&#x7528;&#x8FD9;&#x4E9B;&#x51FD;&#x6570;&#xFF0C;&#x5E76;&#x5C06;&#x8FD4;&#x56DE;&#x7684;&#x503C;&#x7528;&#x4E8E;&#x8BE5;&#x5217;&#x7684;&#x503C;&#x3002;</span><span class="yiyi-st" id="yiyi-65">&#x4E0B;&#x9762;&#x4E3E;&#x4F8B;&#x8BF4;&#x660E;&#x4E86;&#x4E00;&#x4E2A;&#x7C97;&#x7565;&#x7684;&#x201C;&#x5E8F;&#x5217;&#x201D;&#xFF0C;&#x5B83;&#x5C06;&#x4E00;&#x4E2A;&#x9012;&#x589E;&#x8BA1;&#x6570;&#x5668;&#x5206;&#x914D;&#x7ED9;&#x4E3B;&#x952E;&#x5217;&#xFF1A;</span></p><div class="highlight-python"><div class="highlight"><pre><span></span><span class="c1"># a function which counts upwards</span>
<span class="n">i</span> <span class="o">=</span> <span class="mi">0</span>
<span class="k">def</span> <span class="nf">mydefault</span><span class="p">():</span>
    <span class="k">global</span> <span class="n">i</span>
    <span class="n">i</span> <span class="o">+=</span> <span class="mi">1</span>
    <span class="k">return</span> <span class="n">i</span>

<span class="n">t</span> <span class="o">=</span> <span class="n">Table</span><span class="p">(</span><span class="s2">&quot;mytable&quot;</span><span class="p">,</span> <span class="n">meta</span><span class="p">,</span>
    <span class="n">Column</span><span class="p">(</span><span class="s1">&apos;id&apos;</span><span class="p">,</span> <span class="n">Integer</span><span class="p">,</span> <span class="n">primary_key</span><span class="o">=</span><span class="bp">True</span><span class="p">,</span> <span class="n">default</span><span class="o">=</span><span class="n">mydefault</span><span class="p">),</span>
<span class="p">)</span></pre></div></div><p><span class="yiyi-st" id="yiyi-66">&#x5E94;&#x8BE5;&#x6CE8;&#x610F;&#x7684;&#x662F;&#xFF0C;&#x5BF9;&#x4E8E;&#x771F;&#x6B63;&#x7684;&#x201C;&#x9012;&#x589E;&#x5E8F;&#x5217;&#x201D;&#x884C;&#x4E3A;&#xFF0C;&#x901A;&#x5E38;&#x5E94;&#x8BE5;&#x4F7F;&#x7528;&#x6570;&#x636E;&#x5E93;&#x7684;&#x5185;&#x7F6E;&#x529F;&#x80FD;&#xFF0C;&#x8FD9;&#x53EF;&#x80FD;&#x5305;&#x62EC;&#x5E8F;&#x5217;&#x5BF9;&#x8C61;&#x6216;&#x5176;&#x4ED6;&#x81EA;&#x52A8;&#x589E;&#x91CF;&#x529F;&#x80FD;&#x3002;</span><span class="yiyi-st" id="yiyi-67">&#x5BF9;&#x4E8E;&#x4E3B;&#x952E;&#x5217;&#xFF0C;SQLAlchemy&#x5728;&#x5927;&#x591A;&#x6570;&#x60C5;&#x51B5;&#x4E0B;&#x4F1A;&#x81EA;&#x52A8;&#x4F7F;&#x7528;&#x8FD9;&#x4E9B;&#x529F;&#x80FD;&#x3002;</span><span class="yiyi-st" id="yiyi-68">&#x6709;&#x5173;<a class="reference internal" href="metadata.html#sqlalchemy.schema.Column" title="sqlalchemy.schema.Column"><code class="xref py py-class docutils literal"><span class="pre">Column</span></code></a>&#x7684;API&#x6587;&#x6863;&#xFF0C;&#x5305;&#x62EC;<a class="reference internal" href="metadata.html#sqlalchemy.schema.Column.params.autoincrement" title="sqlalchemy.schema.Column"><code class="xref py py-paramref docutils literal"><span class="pre">Column.autoincrement</span></code></a>&#x6807;&#x5FD7;&#x4EE5;&#x53CA;&#x672C;&#x7AE0;&#x540E;&#x9762;<a class="reference internal" href="#sqlalchemy.schema.Sequence" title="sqlalchemy.schema.Sequence"><code class="xref py py-class docutils literal"><span class="pre">Sequence</span></code></a>&#x4E2D;&#x6709;&#x5173;&#x6807;&#x51C6;&#x4E3B;&#x8981;&#x80CC;&#x666F;&#x7684;&#x90E8;&#x5206;&#x5BC6;&#x94A5;&#x751F;&#x6210;&#x6280;&#x672F;&#x3002;</span></p><p><span class="yiyi-st" id="yiyi-69">To illustrate onupdate, we assign the Python <code class="docutils literal"><span class="pre">datetime</span></code> function <code class="docutils literal"><span class="pre">now</span></code> to the <a class="reference internal" href="metadata.html#sqlalchemy.schema.Column.params.onupdate" title="sqlalchemy.schema.Column"><code class="xref py py-paramref docutils literal"><span class="pre">Column.onupdate</span></code></a> attribute:</span></p><div class="highlight-python"><div class="highlight"><pre><span></span><span class="kn">import</span> <span class="nn">datetime</span>

<span class="n">t</span> <span class="o">=</span> <span class="n">Table</span><span class="p">(</span><span class="s2">&quot;mytable&quot;</span><span class="p">,</span> <span class="n">meta</span><span class="p">,</span>
    <span class="n">Column</span><span class="p">(</span><span class="s1">&apos;id&apos;</span><span class="p">,</span> <span class="n">Integer</span><span class="p">,</span> <span class="n">primary_key</span><span class="o">=</span><span class="bp">True</span><span class="p">),</span>

    <span class="c1"># define &apos;last_updated&apos; to be populated with datetime.now()</span>
    <span class="n">Column</span><span class="p">(</span><span class="s1">&apos;last_updated&apos;</span><span class="p">,</span> <span class="n">DateTime</span><span class="p">,</span> <span class="n">onupdate</span><span class="o">=</span><span class="n">datetime</span><span class="o">.</span><span class="n">datetime</span><span class="o">.</span><span class="n">now</span><span class="p">),</span>
<span class="p">)</span></pre></div></div><p><span class="yiyi-st" id="yiyi-70">&#x5F53;update&#x8BED;&#x53E5;&#x6267;&#x884C;&#x5E76;&#x4E14;&#x6CA1;&#x6709;&#x4E3A;<code class="docutils literal"><span class="pre">last_updated</span></code>&#x4F20;&#x9012;&#x503C;&#x65F6;&#xFF0C;&#x5C06;&#x6267;&#x884C;<code class="docutils literal"><span class="pre">datetime.datetime.now()</span></code> Python&#x51FD;&#x6570;&#x5E76;&#x5C06;&#x5176;&#x8FD4;&#x56DE;&#x503C;&#x7528;&#x4F5C;<code class="docutils literal"><span class="pre">last_updated</span></code></span><span class="yiyi-st" id="yiyi-71">&#x8BF7;&#x6CE8;&#x610F;&#xFF0C;&#x6211;&#x4EEC;&#x73B0;&#x5728;<code class="docutils literal"><span class="pre">now</span></code>&#x4F5C;&#x4E3A;&#x51FD;&#x6570;&#x672C;&#x8EAB;&#x800C;&#x4E0D;&#x8C03;&#x7528;&#x5B83;&#xFF08;&#x5373;&#x6CA1;&#x6709;&#x4E0B;&#x9762;&#x7684;&#x62EC;&#x53F7;&#xFF09; -  SQLAlchemy&#x5C06;&#x5728;&#x8BED;&#x53E5;&#x6267;&#x884C;&#x65F6;&#x6267;&#x884C;&#x8BE5;&#x51FD;&#x6570;&#x3002;</span></p><div class="section" id="context-sensitive-default-functions"><h3><span class="yiyi-st" id="yiyi-72">&#x4E0A;&#x4E0B;&#x6587;&#x76F8;&#x5173;&#x7684;&#x9ED8;&#x8BA4;&#x51FD;&#x6570;<a class="headerlink" href="#context-sensitive-default-functions" title="Permalink to this headline">&#xB6;</a></span></h3><p><span class="yiyi-st" id="yiyi-73">&#x7531;<a class="reference internal" href="metadata.html#sqlalchemy.schema.Column.params.default" title="sqlalchemy.schema.Column"><code class="xref py py-paramref docutils literal"><span class="pre">Column.default</span></code></a>&#x548C;<a class="reference internal" href="metadata.html#sqlalchemy.schema.Column.params.onupdate" title="sqlalchemy.schema.Column"><code class="xref py py-paramref docutils literal"><span class="pre">Column.onupdate</span></code></a>&#x4F7F;&#x7528;&#x7684;Python&#x51FD;&#x6570;&#x4E5F;&#x53EF;&#x4EE5;&#x4F7F;&#x7528;&#x5F53;&#x524D;&#x8BED;&#x53E5;&#x7684;&#x4E0A;&#x4E0B;&#x6587;&#x6765;&#x786E;&#x5B9A;&#x4E00;&#x4E2A;&#x503C;&#x3002;</span><span class="yiyi-st" id="yiyi-74">&#x8BED;&#x53E5;&#x7684;<cite>context</cite>&#x662F;&#x4E00;&#x4E2A;&#x5185;&#x90E8;SQLAlchemy&#x5BF9;&#x8C61;&#xFF0C;&#x5B83;&#x5305;&#x542B;&#x6709;&#x5173;&#x6B63;&#x5728;&#x6267;&#x884C;&#x7684;&#x8BED;&#x53E5;&#x7684;&#x6240;&#x6709;&#x4FE1;&#x606F;&#xFF0C;&#x5305;&#x62EC;&#x5176;&#x6E90;&#x8868;&#x8FBE;&#x5F0F;&#xFF0C;&#x4E0E;&#x5176;&#x5173;&#x8054;&#x7684;&#x53C2;&#x6570;&#x4EE5;&#x53CA;&#x6E38;&#x6807;&#x3002;</span><span class="yiyi-st" id="yiyi-75">&#x4E0E;&#x9ED8;&#x8BA4;&#x751F;&#x6210;&#x6709;&#x5173;&#x7684;&#x4E0A;&#x4E0B;&#x6587;&#x7684;&#x5178;&#x578B;&#x7528;&#x4F8B;&#x662F;&#x8BBF;&#x95EE;&#x5728;&#x8BE5;&#x884C;&#x4E0A;&#x63D2;&#x5165;&#x6216;&#x66F4;&#x65B0;&#x7684;&#x5176;&#x4ED6;&#x503C;&#x3002;</span><span class="yiyi-st" id="yiyi-76">&#x8981;&#x8BBF;&#x95EE;&#x4E0A;&#x4E0B;&#x6587;&#xFF0C;&#x8BF7;&#x63D0;&#x4F9B;&#x4E00;&#x4E2A;&#x63A5;&#x53D7;&#x5355;&#x4E2A;<code class="docutils literal"><span class="pre">context</span></code>&#x53C2;&#x6570;&#x7684;&#x51FD;&#x6570;&#xFF1A;</span></p><div class="highlight-python"><div class="highlight"><pre><span></span><span class="k">def</span> <span class="nf">mydefault</span><span class="p">(</span><span class="n">context</span><span class="p">):</span>
    <span class="k">return</span> <span class="n">context</span><span class="o">.</span><span class="n">current_parameters</span><span class="p">[</span><span class="s1">&apos;counter&apos;</span><span class="p">]</span> <span class="o">+</span> <span class="mi">12</span>

<span class="n">t</span> <span class="o">=</span> <span class="n">Table</span><span class="p">(</span><span class="s1">&apos;mytable&apos;</span><span class="p">,</span> <span class="n">meta</span><span class="p">,</span>
    <span class="n">Column</span><span class="p">(</span><span class="s1">&apos;counter&apos;</span><span class="p">,</span> <span class="n">Integer</span><span class="p">),</span>
    <span class="n">Column</span><span class="p">(</span><span class="s1">&apos;counter_plus_twelve&apos;</span><span class="p">,</span> <span class="n">Integer</span><span class="p">,</span> <span class="n">default</span><span class="o">=</span><span class="n">mydefault</span><span class="p">,</span> <span class="n">onupdate</span><span class="o">=</span><span class="n">mydefault</span><span class="p">)</span>
<span class="p">)</span></pre></div></div><p><span class="yiyi-st" id="yiyi-77">&#x4E0A;&#x9762;&#x6211;&#x4EEC;&#x4E3E;&#x4F8B;&#x8BF4;&#x660E;&#x4E86;&#x4E00;&#x4E2A;&#x9ED8;&#x8BA4;&#x51FD;&#x6570;&#xFF0C;&#x5B83;&#x5C06;&#x4E3A;&#x6240;&#x6709;&#x7684;INSERT&#x548C;UPDATE&#x8BED;&#x53E5;&#x6267;&#x884C;&#xFF0C;&#x5176;&#x4E2D;<code class="docutils literal"><span class="pre">counter_plus_twelve</span></code>&#x7684;&#x503C;&#x6CA1;&#x6709;&#x88AB;&#x63D0;&#x4F9B;&#xFF0C;&#x5E76;&#x4E14;&#x8BE5;&#x503C;&#x5C06;&#x662F;&#x6267;&#x884C;<code class="docutils literal"><span class="pre">counter</span></code>&#x5217;&#xFF0C;&#x52A0;&#x4E0A;&#x6570;&#x5B57;12&#x3002;</span></p><p><span class="yiyi-st" id="yiyi-78">&#x867D;&#x7136;&#x4F20;&#x9012;&#x7ED9;&#x9ED8;&#x8BA4;&#x51FD;&#x6570;&#x7684;&#x4E0A;&#x4E0B;&#x6587;&#x5BF9;&#x8C61;&#x5177;&#x6709;&#x8BB8;&#x591A;&#x5C5E;&#x6027;&#xFF0C;&#x4F46;<code class="docutils literal"><span class="pre">current_parameters</span></code>&#x6210;&#x5458;&#x662F;&#x4EC5;&#x5728;&#x6267;&#x884C;&#x9ED8;&#x8BA4;&#x51FD;&#x6570;&#x65F6;&#x624D;&#x63D0;&#x4F9B;&#x7684;&#x7279;&#x6B8A;&#x6210;&#x5458;&#xFF0C;&#x7528;&#x4E8E;&#x4ECE;&#x5176;&#x73B0;&#x6709;&#x503C;&#x4E2D;&#x6D3E;&#x751F;&#x9ED8;&#x8BA4;&#x503C;&#x3002;</span><span class="yiyi-st" id="yiyi-79">For a single statement that is executing many sets of bind parameters, the user-defined function is called for each set of parameters, and <code class="docutils literal"><span class="pre">current_parameters</span></code> will be provided with each individual parameter set for each execution.</span></p></div></div><div class="section" id="sql-expressions"><h2><span class="yiyi-st" id="yiyi-80">SQL&#x8868;&#x8FBE;&#x5F0F;<a class="headerlink" href="#sql-expressions" title="Permalink to this headline">&#xB6;</a></span></h2><p><span class="yiyi-st" id="yiyi-81">&#x201C;default&#x201D;&#x548C;&#x201C;onupdate&#x201D;&#x5173;&#x952E;&#x5B57;&#x4E5F;&#x53EF;&#x4EE5;&#x901A;&#x8FC7;SQL&#x8868;&#x8FBE;&#x5F0F;&#xFF0C;&#x5305;&#x62EC;select&#x8BED;&#x53E5;&#x6216;&#x76F4;&#x63A5;&#x51FD;&#x6570;&#x8C03;&#x7528;&#xFF1A;</span></p><div class="highlight-python"><div class="highlight"><pre><span></span><span class="n">t</span> <span class="o">=</span> <span class="n">Table</span><span class="p">(</span><span class="s2">&quot;mytable&quot;</span><span class="p">,</span> <span class="n">meta</span><span class="p">,</span>
    <span class="n">Column</span><span class="p">(</span><span class="s1">&apos;id&apos;</span><span class="p">,</span> <span class="n">Integer</span><span class="p">,</span> <span class="n">primary_key</span><span class="o">=</span><span class="bp">True</span><span class="p">),</span>

    <span class="c1"># define &apos;create_date&apos; to default to now()</span>
    <span class="n">Column</span><span class="p">(</span><span class="s1">&apos;create_date&apos;</span><span class="p">,</span> <span class="n">DateTime</span><span class="p">,</span> <span class="n">default</span><span class="o">=</span><span class="n">func</span><span class="o">.</span><span class="n">now</span><span class="p">()),</span>

    <span class="c1"># define &apos;key&apos; to pull its default from the &apos;keyvalues&apos; table</span>
    <span class="n">Column</span><span class="p">(</span><span class="s1">&apos;key&apos;</span><span class="p">,</span> <span class="n">String</span><span class="p">(</span><span class="mi">20</span><span class="p">),</span> <span class="n">default</span><span class="o">=</span><span class="n">keyvalues</span><span class="o">.</span><span class="n">select</span><span class="p">(</span><span class="n">keyvalues</span><span class="o">.</span><span class="n">c</span><span class="o">.</span><span class="n">type</span><span class="o">=</span><span class="s1">&apos;type1&apos;</span><span class="p">,</span> <span class="n">limit</span><span class="o">=</span><span class="mi">1</span><span class="p">)),</span>

    <span class="c1"># define &apos;last_modified&apos; to use the current_timestamp SQL function on update</span>
    <span class="n">Column</span><span class="p">(</span><span class="s1">&apos;last_modified&apos;</span><span class="p">,</span> <span class="n">DateTime</span><span class="p">,</span> <span class="n">onupdate</span><span class="o">=</span><span class="n">func</span><span class="o">.</span><span class="n">utc_timestamp</span><span class="p">())</span>
    <span class="p">)</span></pre></div></div><p><span class="yiyi-st" id="yiyi-82">Above, the <code class="docutils literal"><span class="pre">create_date</span></code> column will be populated with the result of the <code class="docutils literal"><span class="pre">now()</span></code> SQL function (which, depending on backend, compiles into <code class="docutils literal"><span class="pre">NOW()</span></code> or <code class="docutils literal"><span class="pre">CURRENT_TIMESTAMP</span></code> in most cases) during an INSERT statement, and the <code class="docutils literal"><span class="pre">key</span></code> column with the result of a SELECT subquery from another table. </span><span class="yiyi-st" id="yiyi-83">&#x5F53;&#x4E3A;&#x6B64;&#x8868;&#x53D1;&#x51FA;UPDATE&#x8BED;&#x53E5;&#x65F6;&#xFF0C;<code class="docutils literal"><span class="pre">last_modified</span></code>&#x5217;&#x5C06;&#x586B;&#x5145;<code class="docutils literal"><span class="pre">UTC_TIMESTAMP()</span></code>&#x7684;&#x503C;&#xFF0C;&#x8BE5;&#x51FD;&#x6570;&#x662F;MySQL&#x7279;&#x6709;&#x7684;&#x51FD;&#x6570;&#x3002;</span></p><p><span class="yiyi-st" id="yiyi-84">&#x8BF7;&#x6CE8;&#x610F;&#xFF0C;&#x5F53;&#x4F7F;&#x7528;<code class="docutils literal"><span class="pre">func</span></code>&#x51FD;&#x6570;&#x65F6;&#xFF0C;&#x4E0E;&#x4F7F;&#x7528;Python <cite>datetime</cite>&#x51FD;&#x6570;&#x4E0D;&#x540C;&#xFF0C;&#x6211;&#x4EEC;<em>do</em>&#x8C03;&#x7528;&#x51FD;&#x6570;&#xFF0C;&#x5373;&#x62EC;&#x53F7;&#x201C;()&#x201D; - &#x8FD9;&#x662F;&#x56E0;&#x4E3A;&#x6211;&#x4EEC;&#x5728;&#x8FD9;&#x79CD;&#x60C5;&#x51B5;&#x4E0B;&#x9700;&#x8981;&#x7684;&#x662F;&#x51FD;&#x6570;&#x7684;&#x8FD4;&#x56DE;&#x503C;&#xFF0C;&#x5B83;&#x662F;&#x5C06;&#x88AB;&#x5448;&#x73B0;&#x5230;INSERT&#x6216;UPDATE&#x8BED;&#x53E5;&#x4E2D;&#x7684;SQL&#x8868;&#x8FBE;&#x5F0F;&#x7ED3;&#x6784;&#x3002;</span></p><p><span class="yiyi-st" id="yiyi-85">&#x4E0A;&#x8FF0;SQL&#x51FD;&#x6570;&#x901A;&#x5E38;&#x5728;&#x6267;&#x884C;INSERT&#x6216;UPDATE&#x8BED;&#x53E5;&#x65F6;&#x201C;inline&#x201D;&#x6267;&#x884C;&#xFF0C;&#x4E5F;&#x5C31;&#x662F;&#x8BF4;&#xFF0C;&#x6267;&#x884C;&#x4E00;&#x6761;&#x8BED;&#x53E5;&#xFF0C;&#x5C06;&#x7ED9;&#x5B9A;&#x7684;&#x8868;&#x8FBE;&#x5F0F;&#x6216;&#x5B50;&#x67E5;&#x8BE2;&#x5D4C;&#x5165;&#x5230;&#x8BED;&#x53E5;&#x7684;VALUES&#x6216;SET&#x5B50;&#x53E5;&#x4E2D;&#x3002;</span><span class="yiyi-st" id="yiyi-86">&#x5C3D;&#x7BA1;&#x5728;&#x67D0;&#x4E9B;&#x60C5;&#x51B5;&#x4E0B;&#xFF0C;&#x51FD;&#x6570;&#x5728;&#x4E8B;&#x5148;SELECT&#x8BED;&#x53E5;&#x4E2D;&#x201C;&#x9884;&#x6267;&#x884C;&#x201D;&#x3002;</span><span class="yiyi-st" id="yiyi-87">&#x5F53;&#x4EE5;&#x4E0B;&#x6240;&#x6709;&#x60C5;&#x51B5;&#x90FD;&#x5C5E;&#x5B9E;&#x65F6;&#xFF0C;&#x4F1A;&#x53D1;&#x751F;&#x8FD9;&#x79CD;&#x60C5;&#x51B5;&#xFF1A;</span></p><ul class="simple"><li><span class="yiyi-st" id="yiyi-88">&#x8BE5;&#x5217;&#x662F;&#x4E3B;&#x952E;&#x5217;</span></li><li><span class="yiyi-st" id="yiyi-89">&#x6570;&#x636E;&#x5E93;&#x65B9;&#x8A00;&#x4E0D;&#x652F;&#x6301;&#x53EF;&#x7528;&#x7684;<code class="docutils literal"><span class="pre">cursor.lastrowid</span></code>&#x5B58;&#x53D6;&#x5668;&#xFF08;&#x6216;&#x7B49;&#x4EF7;&#x7269;&#xFF09;&#xFF1B;&#x76EE;&#x524D;&#x5305;&#x62EC;PostgreSQL&#xFF0C;Oracle&#x548C;Firebird&#xFF0C;&#x4EE5;&#x53CA;&#x4E00;&#x4E9B;MySQL&#x65B9;&#x8A00;&#x3002;</span></li><li><span class="yiyi-st" id="yiyi-90">&#x8BE5;&#x65B9;&#x8A00;&#x4E0D;&#x652F;&#x6301;&#x201C;RETURNING&#x201D;&#x5B50;&#x53E5;&#x6216;&#x7C7B;&#x4F3C;&#x65B9;&#x6CD5;&#xFF0C;&#x6216;&#x8005;&#x5C06;<code class="docutils literal"><span class="pre">implicit_returning</span></code>&#x6807;&#x5FD7;&#x8BBE;&#x7F6E;&#x4E3A;<code class="docutils literal"><span class="pre">False</span></code>&#x3002;</span><span class="yiyi-st" id="yiyi-91">&#x652F;&#x6301;RETURNING&#x7684;&#x65B9;&#x8A00;&#x76EE;&#x524D;&#x5305;&#x62EC;Postgresql&#xFF0C;Oracle&#xFF0C;Firebird&#x548C;MS-SQL&#x3002;</span></li><li><span class="yiyi-st" id="yiyi-92">&#x8BE5;&#x58F0;&#x660E;&#x662F;&#x5355;&#x4E2A;&#x6267;&#x884C;&#xFF0C;&#x5373;&#x4EC5;&#x63D0;&#x4F9B;&#x4E00;&#x7EC4;&#x53C2;&#x6570;&#xFF0C;&#x5E76;&#x4E14;&#x4E0D;&#x4F7F;&#x7528;&#x201C;executemany&#x201D;&#x884C;&#x4E3A;</span></li><li><span class="yiyi-st" id="yiyi-93">&#x5728;<a class="reference internal" href="dml.html#sqlalchemy.sql.expression.Insert" title="sqlalchemy.sql.expression.Insert"><code class="xref py py-class docutils literal"><span class="pre">Insert()</span></code></a>&#x6216;<a class="reference internal" href="dml.html#sqlalchemy.sql.expression.Update" title="sqlalchemy.sql.expression.Update"><code class="xref py py-class docutils literal"><span class="pre">Update()</span></code></a>&#x7ED3;&#x6784;&#x4E2D;&#x672A;&#x8BBE;&#x7F6E;<code class="docutils literal"><span class="pre">inline=True</span></code>&#x6807;&#x5FD7;&#xFF0C;&#x5E76;&#x4E14;&#x8BE5;&#x8BED;&#x53E5;&#x6CA1;&#x6709;&#x5B9A;&#x4E49;&#x660E;&#x786E;&#x7684;<cite> returns()</cite>&#x5B50;&#x53E5;&#x3002;</span></li></ul><p><span class="yiyi-st" id="yiyi-94">&#x9664;&#x975E;&#x51FA;&#x4E8E;&#x6027;&#x80FD;&#x8003;&#x8651;&#xFF0C;&#x5426;&#x5219;&#x9ED8;&#x8BA4;&#x751F;&#x6210;&#x5B50;&#x53E5;&#x201C;&#x9884;&#x6267;&#x884C;&#x201D;&#x4E0D;&#x662F;&#x901A;&#x5E38;&#x9700;&#x8981;&#x8003;&#x8651;&#x7684;&#x4E8B;&#x9879;&#x3002;</span></p><p><span class="yiyi-st" id="yiyi-95">&#x5F53;&#x4F7F;&#x7528;&#x4E00;&#x7EC4;&#x53C2;&#x6570;&#x6267;&#x884C;&#x8BED;&#x53E5;&#xFF08;&#x5373;&#xFF0C;&#x5B83;&#x4E0D;&#x662F;&#x201C;executemany&#x201D;&#x6837;&#x5F0F;&#x6267;&#x884C;&#xFF09;&#x65F6;&#xFF0C;&#x8FD4;&#x56DE;&#x7684;<a class="reference internal" href="connections.html#sqlalchemy.engine.ResultProxy" title="sqlalchemy.engine.ResultProxy"><code class="xref py py-class docutils literal"><span class="pre">ResultProxy</span></code></a>&#x5C06;&#x5305;&#x542B;&#x53EF;&#x901A;&#x8FC7;<a class="reference internal" href="connections.html#sqlalchemy.engine.ResultProxy.postfetch_cols" title="sqlalchemy.engine.ResultProxy.postfetch_cols"><code class="xref py py-meth docutils literal"><span class="pre">ResultProxy.postfetch_cols()</span></code></a>&#x5176;&#x4E2D;&#x5305;&#x542B;&#x5177;&#x6709;&#x5185;&#x8054;&#x6267;&#x884C;&#x7684;&#x7F3A;&#x7701;&#x503C;&#x7684;&#x6240;&#x6709;<a class="reference internal" href="metadata.html#sqlalchemy.schema.Column" title="sqlalchemy.schema.Column"><code class="xref py py-class docutils literal"><span class="pre">Column</span></code></a>&#x5BF9;&#x8C61;&#x7684;&#x5217;&#x8868;&#x3002;</span><span class="yiyi-st" id="yiyi-96">Similarly, all parameters which were bound to the statement, including all Python and SQL expressions which were pre-executed, are present in the <a class="reference internal" href="connections.html#sqlalchemy.engine.ResultProxy.last_inserted_params" title="sqlalchemy.engine.ResultProxy.last_inserted_params"><code class="xref py py-meth docutils literal"><span class="pre">ResultProxy.last_inserted_params()</span></code></a> or <a class="reference internal" href="connections.html#sqlalchemy.engine.ResultProxy.last_updated_params" title="sqlalchemy.engine.ResultProxy.last_updated_params"><code class="xref py py-meth docutils literal"><span class="pre">ResultProxy.last_updated_params()</span></code></a> collections on <a class="reference internal" href="connections.html#sqlalchemy.engine.ResultProxy" title="sqlalchemy.engine.ResultProxy"><code class="xref py py-class docutils literal"><span class="pre">ResultProxy</span></code></a>. </span><span class="yiyi-st" id="yiyi-97"><a class="reference internal" href="connections.html#sqlalchemy.engine.ResultProxy.inserted_primary_key" title="sqlalchemy.engine.ResultProxy.inserted_primary_key"><code class="xref py py-attr docutils literal"><span class="pre">ResultProxy.inserted_primary_key</span></code></a>&#x96C6;&#x5408;&#x5305;&#x542B;&#x63D2;&#x5165;&#x884C;&#x7684;&#x4E3B;&#x952E;&#x503C;&#x5217;&#x8868;&#xFF08;&#x5217;&#x8868;&#x4F7F;&#x5F97;&#x5355;&#x5217;&#x548C;&#x7EC4;&#x5408;&#x5217;&#x4E3B;&#x952E;&#x4EE5;&#x76F8;&#x540C;&#x7684;&#x683C;&#x5F0F;&#x8868;&#x793A;&#xFF09;&#x3002;</span></p></div><div class="section" id="server-side-defaults"><h2><span class="yiyi-st" id="yiyi-98">&#x670D;&#x52A1;&#x5668;&#x7AEF;&#x9ED8;&#x8BA4;&#x503C;<a class="headerlink" href="#server-side-defaults" title="Permalink to this headline">&#xB6;</a></span></h2><p><span class="yiyi-st" id="yiyi-99">SQL&#x8868;&#x8FBE;&#x5F0F;&#x9ED8;&#x8BA4;&#x7684;&#x53D8;&#x4F53;&#x662F;<a class="reference internal" href="metadata.html#sqlalchemy.schema.Column.params.server_default" title="sqlalchemy.schema.Column"><code class="xref py py-paramref docutils literal"><span class="pre">Column.server_default</span></code></a>&#xFF0C;&#x5B83;&#x5728;<a class="reference internal" href="metadata.html#sqlalchemy.schema.Table.create" title="sqlalchemy.schema.Table.create"><code class="xref py py-meth docutils literal"><span class="pre">Table.create()</span></code></a>&#x64CD;&#x4F5C;&#x671F;&#x95F4;&#x88AB;&#x653E;&#x7F6E;&#x5728;CREATE TABLE&#x8BED;&#x53E5;&#x4E2D;&#xFF1A;</span></p><div class="highlight-python+sql"><div class="highlight"><pre><span></span><span class="n">t</span> <span class="o">=</span> <span class="n">Table</span><span class="p">(</span><span class="s1">&apos;test&apos;</span><span class="p">,</span> <span class="n">meta</span><span class="p">,</span>
    <span class="n">Column</span><span class="p">(</span><span class="s1">&apos;abc&apos;</span><span class="p">,</span> <span class="n">String</span><span class="p">(</span><span class="mi">20</span><span class="p">),</span> <span class="n">server_default</span><span class="o">=</span><span class="s1">&apos;abc&apos;</span><span class="p">),</span>
    <span class="n">Column</span><span class="p">(</span><span class="s1">&apos;created_at&apos;</span><span class="p">,</span> <span class="n">DateTime</span><span class="p">,</span> <span class="n">server_default</span><span class="o">=</span><span class="n">text</span><span class="p">(</span><span class="s2">&quot;sysdate&quot;</span><span class="p">))</span>
<span class="p">)</span></pre></div></div><p><span class="yiyi-st" id="yiyi-100">&#x521B;&#x5EFA;&#x4E0A;&#x8FF0;&#x8868;&#x683C;&#x7684;&#x8C03;&#x7528;&#x5C06;&#x4EA7;&#x751F;&#xFF1A;</span></p><div class="highlight-python"><div class="highlight"><pre><span></span>CREATE TABLE test (
    abc varchar(20) default &apos;abc&apos;,
    created_at datetime default sysdate
)</pre></div></div><p><span class="yiyi-st" id="yiyi-101"><a class="reference internal" href="metadata.html#sqlalchemy.schema.Column.params.server_default" title="sqlalchemy.schema.Column"><code class="xref py py-paramref docutils literal"><span class="pre">Column.server_default</span></code></a>&#x7684;&#x884C;&#x4E3A;&#x7C7B;&#x4F3C;&#x4E8E;&#x5E38;&#x89C4;SQL&#x9ED8;&#x8BA4;&#x884C;&#x4E3A;&#xFF1B;&#x5982;&#x679C;&#x5B83;&#x653E;&#x5728;&#x6570;&#x636E;&#x5E93;&#x7684;&#x4E3B;&#x952E;&#x5217;&#x4E0A;&#xFF0C;&#x4F46;&#x6CA1;&#x6709;&#x201C;&#x540E;&#x53D6;&#x201D;ID&#x7684;&#x65B9;&#x6CD5;&#xFF0C;&#x5E76;&#x4E14;&#x8BE5;&#x8BED;&#x53E5;&#x4E0D;&#x662F;&#x201C;&#x5185;&#x8054;&#x201D;&#x7684;&#xFF0C;&#x5219;SQL&#x8868;&#x8FBE;&#x5F0F;&#x5C06;&#x88AB;&#x9884;&#x5148;&#x6267;&#x884C;&#xFF1B;&#x5426;&#x5219;&#xFF0C;SQLAlchemy&#x4F1A;&#x8BA9;&#x6570;&#x636E;&#x5E93;&#x7AEF;&#x7684;&#x9ED8;&#x8BA4;&#x503C;&#x6B63;&#x5E38;&#x542F;&#x52A8;&#x3002;</span></p></div><div class="section" id="triggered-columns"><h2><span class="yiyi-st" id="yiyi-102">&#x89E6;&#x53D1;&#x5217;<a class="headerlink" href="#triggered-columns" title="Permalink to this headline">&#xB6;</a></span></h2><p><span class="yiyi-st" id="yiyi-103">&#x53EF;&#x4EE5;&#x4F7F;&#x7528;<a class="reference internal" href="#sqlalchemy.schema.FetchedValue" title="sqlalchemy.schema.FetchedValue"><code class="xref py py-class docutils literal"><span class="pre">FetchedValue</span></code></a>&#x4F5C;&#x4E3A;&#x6807;&#x8BB0;&#x6765;&#x8C03;&#x51FA;&#x5177;&#x6709;&#x7531;&#x6570;&#x636E;&#x5E93;&#x89E6;&#x53D1;&#x5668;&#x6216;&#x5176;&#x4ED6;&#x5916;&#x90E8;&#x8FC7;&#x7A0B;&#x8BBE;&#x7F6E;&#x7684;&#x503C;&#x7684;&#x5217;&#xFF1A;</span></p><div class="highlight-python"><div class="highlight"><pre><span></span><span class="n">t</span> <span class="o">=</span> <span class="n">Table</span><span class="p">(</span><span class="s1">&apos;test&apos;</span><span class="p">,</span> <span class="n">meta</span><span class="p">,</span>
    <span class="n">Column</span><span class="p">(</span><span class="s1">&apos;abc&apos;</span><span class="p">,</span> <span class="n">String</span><span class="p">(</span><span class="mi">20</span><span class="p">),</span> <span class="n">server_default</span><span class="o">=</span><span class="n">FetchedValue</span><span class="p">()),</span>
    <span class="n">Column</span><span class="p">(</span><span class="s1">&apos;def&apos;</span><span class="p">,</span> <span class="n">String</span><span class="p">(</span><span class="mi">20</span><span class="p">),</span> <span class="n">server_onupdate</span><span class="o">=</span><span class="n">FetchedValue</span><span class="p">())</span>
<span class="p">)</span></pre></div></div><div class="versionchanged"><p><span class="yiyi-st" id="yiyi-104"><span class="versionmodified">&#x66F4;&#x6539;&#x4E3A;0.8.0b2,0.7.10&#x7248;&#x672C;&#xFF1A;</span> <a class="reference internal" href="#sqlalchemy.schema.FetchedValue" title="sqlalchemy.schema.FetchedValue"><code class="xref py py-class docutils literal"><span class="pre">FetchedValue</span></code></a>&#x4E0A;&#x7684;<code class="docutils literal"><span class="pre">for_update</span></code>&#x53C2;&#x6570;&#x5728;&#x6307;&#x5B9A;&#x4E3A;<code class="docutils literal"><span class="pre">server_onupdate</span></code></span><span class="yiyi-st" id="yiyi-105">&#x5982;&#x679C;&#x4F7F;&#x7528;&#x65E7;&#x7248;&#x672C;&#xFF0C;&#x8BF7;&#x5C06;&#x4E0A;&#x9762;&#x7684;onupdate&#x6307;&#x5B9A;&#x4E3A;<code class="docutils literal"><span class="pre">server_onupdate=FetchedValue(for_update=True)</span></code>&#x3002;</span></p></div><p><span class="yiyi-st" id="yiyi-106">&#x8FD9;&#x4E9B;&#x6807;&#x8BB0;&#x5728;&#x521B;&#x5EFA;&#x8868;&#x65F6;&#x4E0D;&#x4F1A;&#x53D1;&#x51FA;&#x201C;default&#x201D;&#x5B50;&#x53E5;&#xFF0C;&#x4F46;&#x662F;&#x5B83;&#x4EEC;&#x5C06;&#x9759;&#x6001;&#x7684;<code class="docutils literal"><span class="pre">server_default</span></code>&#x5B50;&#x53E5;&#x8BBE;&#x7F6E;&#x4E3A;&#x76F8;&#x540C;&#x7684;&#x5185;&#x90E8;&#x6807;&#x5FD7;&#xFF0C;&#x4E3A;&#x9AD8;&#x7EA7;&#x5DE5;&#x5177;&#x63D0;&#x4F9B;&#x4E86;&#x4E00;&#x4E2A;&#x63D0;&#x793A;&#xFF1A;&#x201C;post-fetch &#x201C;&#x5E94;&#x5728;&#x63D2;&#x5165;&#x6216;&#x66F4;&#x65B0;&#x540E;&#x6267;&#x884C;&#x8FD9;&#x4E9B;&#x884C;&#x3002;</span></p><div class="admonition note"><p class="first admonition-title"><span class="yiyi-st" id="yiyi-107">&#x6CE8;&#x610F;</span></p><p><span class="yiyi-st" id="yiyi-108">&#x5C06;<a class="reference internal" href="#sqlalchemy.schema.FetchedValue" title="sqlalchemy.schema.FetchedValue"><code class="xref py py-class docutils literal"><span class="pre">FetchedValue</span></code></a>&#x4E0E;&#x4E3B;&#x952E;&#x5217;&#x7ED3;&#x5408;&#x4F7F;&#x7528;&#x901A;&#x5E38;&#x662F;&#x4E0D;&#x6070;&#x5F53;&#x7684;&#xFF0C;&#x7279;&#x522B;&#x662F;&#x5728;&#x4F7F;&#x7528;ORM&#x6216;&#x9700;&#x8981;<a class="reference internal" href="connections.html#sqlalchemy.engine.ResultProxy.inserted_primary_key" title="sqlalchemy.engine.ResultProxy.inserted_primary_key"><code class="xref py py-attr docutils literal"><span class="pre">ResultProxy.inserted_primary_key</span></code></a>&#x5C5E;&#x6027;&#x7684;&#x4EFB;&#x4F55;&#x5176;&#x4ED6;&#x573A;&#x666F;&#x65F6;&#x3002;</span><span class="yiyi-st" id="yiyi-109">&#x8FD9;&#x662F;&#x56E0;&#x4E3A;&#x201C;post-fetch&#x201D;&#x64CD;&#x4F5C;&#x8981;&#x6C42;&#x4E3B;&#x952E;&#x503C;&#x5DF2;&#x7ECF;&#x53EF;&#x7528;&#xFF0C;&#x4EE5;&#x4FBF;&#x53EF;&#x4EE5;&#x5728;&#x4E3B;&#x952E;&#x4E0A;&#x9009;&#x62E9;&#x8BE5;&#x884C;&#x3002;</span></p><p><span class="yiyi-st" id="yiyi-110">&#x5BF9;&#x4E8E;&#x670D;&#x52A1;&#x5668;&#x751F;&#x6210;&#x7684;&#x4E3B;&#x952E;&#x503C;&#xFF0C;&#x6240;&#x6709;&#x6570;&#x636E;&#x5E93;&#x90FD;&#x63D0;&#x4F9B;&#x7279;&#x6B8A;&#x7684;&#x8BBF;&#x95EE;&#x5668;&#x6216;&#x5176;&#x4ED6;&#x6280;&#x672F;&#x6765;&#x83B7;&#x53D6;&#x8868;&#x7684;&#x201C;&#x6700;&#x540E;&#x63D2;&#x5165;&#x7684;&#x4E3B;&#x952E;&#x201D;&#x5217;&#x3002;</span><span class="yiyi-st" id="yiyi-111">&#x8FD9;&#x4E9B;&#x673A;&#x5236;&#x4E0D;&#x53D7;<a class="reference internal" href="#sqlalchemy.schema.FetchedValue" title="sqlalchemy.schema.FetchedValue"><code class="xref py py-class docutils literal"><span class="pre">FetchedValue</span></code></a>&#x7684;&#x5F71;&#x54CD;&#x3002;</span><span class="yiyi-st" id="yiyi-112">&#x5BF9;&#x4E8E;&#x4F7F;&#x7528;&#x89E6;&#x53D1;&#x5668;&#x751F;&#x6210;&#x4E3B;&#x952E;&#x503C;&#x7684;&#x7279;&#x6B8A;&#x60C5;&#x51B5;&#xFF0C;&#x5E76;&#x4E14;&#x6B63;&#x5728;&#x4F7F;&#x7528;&#x7684;&#x6570;&#x636E;&#x5E93;&#x4E0D;&#x652F;&#x6301;<code class="docutils literal"><span class="pre">RETURNING</span></code>&#x5B50;&#x53E5;&#xFF0C;&#x53EF;&#x80FD;&#x9700;&#x8981;&#x653E;&#x5F03;&#x4F7F;&#x7528;&#x89E6;&#x53D1;&#x5668;&#xFF0C;&#x800C;&#x662F;&#x5E94;&#x7528;SQL&#x8868;&#x8FBE;&#x5F0F;&#x6216;&#x7528;&#x4F5C;&#x201C;&#x9884;&#x6267;&#x884C;&#x201D;&#x8868;&#x8FBE;&#x5F0F;&#xFF1A;</span></p><div class="highlight-python"><div class="highlight"><pre><span></span><span class="n">t</span> <span class="o">=</span> <span class="n">Table</span><span class="p">(</span><span class="s1">&apos;test&apos;</span><span class="p">,</span> <span class="n">meta</span><span class="p">,</span>
        <span class="n">Column</span><span class="p">(</span><span class="s1">&apos;abc&apos;</span><span class="p">,</span> <span class="n">MyType</span><span class="p">,</span> <span class="n">default</span><span class="o">=</span><span class="n">func</span><span class="o">.</span><span class="n">generate_new_value</span><span class="p">(),</span> <span class="n">primary_key</span><span class="o">=</span><span class="bp">True</span><span class="p">)</span>
<span class="p">)</span></pre></div></div><p class="last"><span class="yiyi-st" id="yiyi-113">Where above, when <a class="reference internal" href="metadata.html#sqlalchemy.schema.Table.insert" title="sqlalchemy.schema.Table.insert"><code class="xref py py-meth docutils literal"><span class="pre">Table.insert()</span></code></a> is used, the <code class="docutils literal"><span class="pre">func.generate_new_value()</span></code> expression will be pre-executed in the context of a scalar <code class="docutils literal"><span class="pre">SELECT</span></code> statement, and the new value will be applied to the subsequent <code class="docutils literal"><span class="pre">INSERT</span></code>, while at the same time being made available to the <a class="reference internal" href="connections.html#sqlalchemy.engine.ResultProxy.inserted_primary_key" title="sqlalchemy.engine.ResultProxy.inserted_primary_key"><code class="xref py py-attr docutils literal"><span class="pre">ResultProxy.inserted_primary_key</span></code></a> attribute.</span></p></div></div><div class="section" id="defining-sequences"><h2><span class="yiyi-st" id="yiyi-114">&#x5B9A;&#x4E49;&#x5E8F;&#x5217;<a class="headerlink" href="#defining-sequences" title="Permalink to this headline">&#xB6;</a></span></h2><p><span class="yiyi-st" id="yiyi-115">SQLAlchemy&#x4F7F;&#x7528;<a class="reference internal" href="#sqlalchemy.schema.Sequence" title="sqlalchemy.schema.Sequence"><code class="xref py py-class docutils literal"><span class="pre">Sequence</span></code></a>&#x5BF9;&#x8C61;&#x8868;&#x793A;&#x6570;&#x636E;&#x5E93;&#x5E8F;&#x5217;&#xFF0C;&#x8FD9;&#x88AB;&#x8BA4;&#x4E3A;&#x662F;&#x201C;&#x5217;&#x7F3A;&#x7701;&#x201D;&#x7684;&#x7279;&#x4F8B;&#x3002;</span><span class="yiyi-st" id="yiyi-116">&#x5B83;&#x53EA;&#x5BF9;&#x6570;&#x636E;&#x5E93;&#x6709;&#x660E;&#x786E;&#x7684;&#x652F;&#x6301;&#xFF0C;&#x8FD9;&#x4E9B;&#x6570;&#x636E;&#x5E93;&#x76EE;&#x524D;&#x5305;&#x62EC;Postgresql&#xFF0C;Oracle&#x548C;Firebird&#x3002;</span><span class="yiyi-st" id="yiyi-117"><a class="reference internal" href="#sqlalchemy.schema.Sequence" title="sqlalchemy.schema.Sequence"><code class="xref py py-class docutils literal"><span class="pre">Sequence</span></code></a>&#x5BF9;&#x8C61;&#x88AB;&#x5FFD;&#x7565;&#x3002;</span></p><p><span class="yiyi-st" id="yiyi-118"><a class="reference internal" href="#sqlalchemy.schema.Sequence" title="sqlalchemy.schema.Sequence"><code class="xref py py-class docutils literal"><span class="pre">Sequence</span></code></a>&#x53EF;&#x4EE5;&#x4F5C;&#x4E3A;INSERT&#x64CD;&#x4F5C;&#x671F;&#x95F4;&#x4F7F;&#x7528;&#x7684;&#x201C;&#x9ED8;&#x8BA4;&#x201D;&#x751F;&#x6210;&#x5668;&#x653E;&#x7F6E;&#x5728;&#x4EFB;&#x4F55;&#x5217;&#x4E0A;&#xFF0C;&#x4E5F;&#x53EF;&#x4EE5;&#x914D;&#x7F6E;&#x4E3A;&#x5728;UPDATE&#x64CD;&#x4F5C;&#x671F;&#x95F4;&#x6839;&#x636E;&#x9700;&#x8981;&#x89E6;&#x53D1;&#x3002;</span><span class="yiyi-st" id="yiyi-119">&#x5B83;&#x901A;&#x5E38;&#x4E0E;&#x5355;&#x4E2A;&#x6574;&#x6570;&#x4E3B;&#x952E;&#x5217;&#x7ED3;&#x5408;&#x4F7F;&#x7528;&#xFF1A;</span></p><div class="highlight-python"><div class="highlight"><pre><span></span><span class="n">table</span> <span class="o">=</span> <span class="n">Table</span><span class="p">(</span><span class="s2">&quot;cartitems&quot;</span><span class="p">,</span> <span class="n">meta</span><span class="p">,</span>
    <span class="n">Column</span><span class="p">(</span><span class="s2">&quot;cart_id&quot;</span><span class="p">,</span> <span class="n">Integer</span><span class="p">,</span> <span class="n">Sequence</span><span class="p">(</span><span class="s1">&apos;cart_id_seq&apos;</span><span class="p">),</span> <span class="n">primary_key</span><span class="o">=</span><span class="bp">True</span><span class="p">),</span>
    <span class="n">Column</span><span class="p">(</span><span class="s2">&quot;description&quot;</span><span class="p">,</span> <span class="n">String</span><span class="p">(</span><span class="mi">40</span><span class="p">)),</span>
    <span class="n">Column</span><span class="p">(</span><span class="s2">&quot;createdate&quot;</span><span class="p">,</span> <span class="n">DateTime</span><span class="p">())</span>
<span class="p">)</span></pre></div></div><p><span class="yiyi-st" id="yiyi-120">&#x5728;&#x4E0A;&#x9762;&#xFF0C;&#x8868;&#x201C;cartitems&#x201D;&#x4E0E;&#x540D;&#x4E3A;&#x201C;cart_id_seq&#x201D;&#x7684;&#x5E8F;&#x5217;&#x76F8;&#x5173;&#x8054;&#x3002;</span><span class="yiyi-st" id="yiyi-121">&#x5F53;&#x9488;&#x5BF9;&#x201C;cartitems&#x201D;&#x53D1;&#x751F;INSERT&#x8BED;&#x53E5;&#x5E76;&#x4E14;&#x6CA1;&#x6709;&#x4E3A;&#x201C;cart_id&#x201D;&#x5217;&#x4F20;&#x9012;&#x503C;&#x65F6;&#xFF0C;&#x5C06;&#x4F7F;&#x7528;&#x201C;cart_id_seq&#x201D;&#x5E8F;&#x5217;&#x6765;&#x751F;&#x6210;&#x4E00;&#x4E2A;&#x503C;&#x3002;</span></p><p><span class="yiyi-st" id="yiyi-122">&#x5F53;<a class="reference internal" href="#sqlalchemy.schema.Sequence" title="sqlalchemy.schema.Sequence"><code class="xref py py-class docutils literal"><span class="pre">Sequence</span></code></a>&#x4E0E;&#x8868;&#x5173;&#x8054;&#x65F6;&#xFF0C;&#x4E3A;&#x8BE5;&#x8868;&#x9881;&#x53D1;&#x7684;CREATE&#x548C;DROP&#x8BED;&#x53E5;&#x4E5F;&#x5C06;&#x4E3A;&#x8BE5;&#x5E8F;&#x5217;&#x5BF9;&#x8C61;&#x53D1;&#x51FA;CREATE / DROP&#xFF0C;&#x4ECE;&#x800C;&#x5C06;&#x5E8F;&#x5217;&#x5BF9;&#x8C61;&#x4E0E;&#x5176;&#x7236;&#x8868;&#x201C;&#x6346;&#x7ED1;&#x201D;&#x3002;</span></p><p><span class="yiyi-st" id="yiyi-123"><a class="reference internal" href="#sqlalchemy.schema.Sequence" title="sqlalchemy.schema.Sequence"><code class="xref py py-class docutils literal"><span class="pre">Sequence</span></code></a>&#x5BF9;&#x8C61;&#x8FD8;&#x5B9E;&#x73B0;&#x4E86;&#x7279;&#x6B8A;&#x7684;&#x529F;&#x80FD;&#x4EE5;&#x9002;&#x5E94;Postgresql&#x7684;SERIAL&#x6570;&#x636E;&#x7C7B;&#x578B;&#x3002;</span><span class="yiyi-st" id="yiyi-124">PG&#x4E2D;&#x7684;SERIAL&#x7C7B;&#x578B;&#x81EA;&#x52A8;&#x751F;&#x6210;&#x4E00;&#x4E2A;&#x5728;&#x63D2;&#x5165;&#x8FC7;&#x7A0B;&#x4E2D;&#x9690;&#x5F0F;&#x4F7F;&#x7528;&#x7684;&#x5E8F;&#x5217;&#x3002;</span><span class="yiyi-st" id="yiyi-125">&#x8FD9;&#x610F;&#x5473;&#x7740;&#x5982;&#x679C;&#x4E00;&#x4E2A;<a class="reference internal" href="metadata.html#sqlalchemy.schema.Table" title="sqlalchemy.schema.Table"><code class="xref py py-class docutils literal"><span class="pre">Table</span></code></a>&#x5BF9;&#x8C61;&#x5728;&#x5176;&#x4E3B;&#x952E;&#x5217;&#x4E0A;&#x5B9A;&#x4E49;&#x4E86;&#x4E00;&#x4E2A;<a class="reference internal" href="#sqlalchemy.schema.Sequence" title="sqlalchemy.schema.Sequence"><code class="xref py py-class docutils literal"><span class="pre">Sequence</span></code></a>&#xFF0C;&#x4EE5;&#x4FBF;&#x5B83;&#x53EF;&#x4EE5;&#x4E0E;Oracle&#x548C;Firebird&#x4E00;&#x8D77;&#x4F7F;&#x7528;&#xFF0C;&#x90A3;&#x4E48;<a class="reference internal" href="#sqlalchemy.schema.Sequence" title="sqlalchemy.schema.Sequence"><code class="xref py py-class docutils literal"><span class="pre">Sequence</span></code></a>&#x5C06;&#x8FDB;&#x5165;PG&#x901A;&#x5E38;&#x4F7F;&#x7528;&#x7684;&#x201C;&#x9690;&#x5F0F;&#x201D;&#x5E8F;&#x5217;&#x7684;&#x65B9;&#x5F0F;&#x3002;</span><span class="yiyi-st" id="yiyi-126">&#x5BF9;&#x4E8E;&#x8FD9;&#x4E2A;&#x7528;&#x4F8B;&#xFF0C;&#x5C06;&#x6807;&#x5FD7;<code class="docutils literal"><span class="pre">optional=True</span></code>&#x6DFB;&#x52A0;&#x5230;<a class="reference internal" href="#sqlalchemy.schema.Sequence" title="sqlalchemy.schema.Sequence"><code class="xref py py-class docutils literal"><span class="pre">Sequence</span></code></a>&#x5BF9;&#x8C61; - &#x8FD9;&#x8868;&#x660E;&#x4EC5;&#x5F53;&#x6570;&#x636E;&#x5E93;&#x63D0;&#x4F9B;&#x65F6;&#x624D;&#x5E94;&#x4F7F;&#x7528;<a class="reference internal" href="#sqlalchemy.schema.Sequence" title="sqlalchemy.schema.Sequence"><code class="xref py py-class docutils literal"><span class="pre">Sequence</span></code></a>&#x6CA1;&#x6709;&#x5176;&#x4ED6;&#x9009;&#x9879;&#x53EF;&#x7528;&#x4E8E;&#x751F;&#x6210;&#x4E3B;&#x952E;&#x6807;&#x8BC6;&#x7B26;&#x3002;</span></p><p><span class="yiyi-st" id="yiyi-127"><a class="reference internal" href="#sqlalchemy.schema.Sequence" title="sqlalchemy.schema.Sequence"><code class="xref py py-class docutils literal"><span class="pre">Sequence</span></code></a>&#x5BF9;&#x8C61;&#x4E5F;&#x53EF;&#x4EE5;&#x50CF;SQL&#x8868;&#x8FBE;&#x5F0F;&#x90A3;&#x6837;&#x72EC;&#x7ACB;&#x6267;&#x884C;&#xFF0C;&#x5177;&#x6709;&#x8C03;&#x7528;&#x5176;&#x201C;&#x4E0B;&#x4E00;&#x4E2A;&#x503C;&#x201D;&#x529F;&#x80FD;&#x7684;&#x6548;&#x679C;&#xFF1A;</span></p><div class="highlight-python"><div class="highlight"><pre><span></span><span class="n">seq</span> <span class="o">=</span> <span class="n">Sequence</span><span class="p">(</span><span class="s1">&apos;some_sequence&apos;</span><span class="p">)</span>
<span class="n">nextid</span> <span class="o">=</span> <span class="n">connection</span><span class="o">.</span><span class="n">execute</span><span class="p">(</span><span class="n">seq</span><span class="p">)</span></pre></div></div><div class="section" id="associating-a-sequence-as-the-server-side-default"><h3><span class="yiyi-st" id="yiyi-128">&#x5C06;&#x5E8F;&#x5217;&#x5173;&#x8054;&#x5230;&#x670D;&#x52A1;&#x5668;&#x7AEF;&#x9ED8;&#x8BA4;<a class="headerlink" href="#associating-a-sequence-as-the-server-side-default" title="Permalink to this headline">&#xB6;</a></span></h3><p><span class="yiyi-st" id="yiyi-129">&#x5F53;&#x6211;&#x4EEC;&#x5982;&#x4E0A;&#x6240;&#x8FF0;&#x5C06;<a class="reference internal" href="#sqlalchemy.schema.Sequence" title="sqlalchemy.schema.Sequence"><code class="xref py py-class docutils literal"><span class="pre">Sequence</span></code></a>&#x4E0E;<a class="reference internal" href="metadata.html#sqlalchemy.schema.Column" title="sqlalchemy.schema.Column"><code class="xref py py-class docutils literal"><span class="pre">Column</span></code></a>&#x76F8;&#x5173;&#x8054;&#x65F6;&#xFF0C;&#x6B64;&#x5173;&#x8054;&#x4EC5;&#x4E3A;<strong>in-Python only</strong>&#x5173;&#x8054;&#x3002;</span><span class="yiyi-st" id="yiyi-130">&#x5C06;&#x4E3A;&#x6211;&#x4EEC;&#x7684;<a class="reference internal" href="metadata.html#sqlalchemy.schema.Table" title="sqlalchemy.schema.Table"><code class="xref py py-class docutils literal"><span class="pre">Table</span></code></a>&#x751F;&#x6210;&#x7684;CREATE TABLE&#x4E0D;&#x4F1A;&#x5F15;&#x7528;&#x6B64;&#x5E8F;&#x5217;&#x3002;</span><span class="yiyi-st" id="yiyi-131">&#x5982;&#x679C;&#x6211;&#x4EEC;&#x5E0C;&#x671B;&#x5C06;&#x5E8F;&#x5217;&#x7528;&#x4F5C;&#x670D;&#x52A1;&#x5668;&#x7AEF;&#x7F3A;&#x7701;&#x503C;&#xFF0C;&#x5373;&#x4F7F;&#x6211;&#x4EEC;&#x4ECE;SQL&#x547D;&#x4EE4;&#x884C;&#x5411;&#x8868;&#x4E2D;&#x53D1;&#x51FA;INSERT&#x547D;&#x4EE4;&#xFF0C;&#x4E5F;&#x53EF;&#x4EE5;&#x4F7F;&#x7528;<a class="reference internal" href="metadata.html#sqlalchemy.schema.Column.params.server_default" title="sqlalchemy.schema.Column"><code class="xref py py-paramref docutils literal"><span class="pre">Column.server_default</span></code></a>&#x53C2;&#x6570;&#x4E0E;&#x5E8F;&#x5217;&#x7684;&#x503C;&#x751F;&#x6210;&#x51FD;&#x6570;&#x4E00;&#x8D77;&#x4F7F;&#x7528;&#xFF0C;&#x53EF;&#x4EE5;&#x4ECE;<a class="reference internal" href="#sqlalchemy.schema.Sequence.next_value" title="sqlalchemy.schema.Sequence.next_value"><code class="xref py py-meth docutils literal"><span class="pre">Sequence.next_value()</span></code></a>&#x65B9;&#x6CD5;&#x83B7;&#x5F97;&#xFF1A;</span></p><div class="highlight-python"><div class="highlight"><pre><span></span><span class="n">cart_id_seq</span> <span class="o">=</span> <span class="n">Sequence</span><span class="p">(</span><span class="s1">&apos;cart_id_seq&apos;</span><span class="p">)</span>
<span class="n">table</span> <span class="o">=</span> <span class="n">Table</span><span class="p">(</span><span class="s2">&quot;cartitems&quot;</span><span class="p">,</span> <span class="n">meta</span><span class="p">,</span>
    <span class="n">Column</span><span class="p">(</span>
        <span class="s2">&quot;cart_id&quot;</span><span class="p">,</span> <span class="n">Integer</span><span class="p">,</span> <span class="n">cart_id_seq</span><span class="p">,</span>
        <span class="n">server_default</span><span class="o">=</span><span class="n">cart_id_seq</span><span class="o">.</span><span class="n">next_value</span><span class="p">(),</span> <span class="n">primary_key</span><span class="o">=</span><span class="bp">True</span><span class="p">),</span>
    <span class="n">Column</span><span class="p">(</span><span class="s2">&quot;description&quot;</span><span class="p">,</span> <span class="n">String</span><span class="p">(</span><span class="mi">40</span><span class="p">)),</span>
    <span class="n">Column</span><span class="p">(</span><span class="s2">&quot;createdate&quot;</span><span class="p">,</span> <span class="n">DateTime</span><span class="p">())</span>
<span class="p">)</span></pre></div></div><p><span class="yiyi-st" id="yiyi-132">&#x4E0A;&#x9762;&#x7684;&#x5143;&#x6570;&#x636E;&#x5C06;&#x5728;Postgresql&#x4E0A;&#x751F;&#x6210;&#x4E00;&#x4E2A;CREATE TABLE&#x8BED;&#x53E5;&#xFF0C;&#x5982;&#x4E0B;&#x6240;&#x793A;&#xFF1A;</span></p><div class="highlight-python"><div class="highlight"><pre><span></span>CREATE TABLE cartitems (
    cart_id INTEGER DEFAULT nextval(&apos;cart_id_seq&apos;) NOT NULL,
    description VARCHAR(40),
    createdate TIMESTAMP WITHOUT TIME ZONE,
    PRIMARY KEY (cart_id)
)</pre></div></div><p><span class="yiyi-st" id="yiyi-133">&#x6211;&#x4EEC;&#x628A;<a class="reference internal" href="#sqlalchemy.schema.Sequence" title="sqlalchemy.schema.Sequence"><code class="xref py py-class docutils literal"><span class="pre">Sequence</span></code></a>&#x4E5F;&#x4F5C;&#x4E3A;Python&#x7684;&#x9ED8;&#x8BA4;&#x503C;&#x653E;&#x5728;&#x4E0A;&#x9762;&#xFF0C;&#x4E5F;&#x5C31;&#x662F;&#x8BF4;&#xFF0C;&#x5B83;&#x5728;<a class="reference internal" href="metadata.html#sqlalchemy.schema.Column" title="sqlalchemy.schema.Column"><code class="xref py py-class docutils literal"><span class="pre">Column</span></code></a>&#x5B9A;&#x4E49;&#x4E2D;&#x63D0;&#x5230;&#x4E86;&#x4E24;&#x6B21;&#x3002;</span><span class="yiyi-st" id="yiyi-134">&#x6839;&#x636E;&#x6240;&#x4F7F;&#x7528;&#x7684;&#x540E;&#x7AEF;&#xFF0C;&#x8FD9;&#x53EF;&#x80FD;&#x4E0D;&#x662F;&#x4E25;&#x683C;&#x5FC5;&#x8981;&#x7684;&#xFF0C;&#x4F8B;&#x5982;&#x5728;Postgresql&#x540E;&#x7AEF;&#xFF0C;Core&#x5C06;&#x4F7F;&#x7528;<code class="docutils literal"><span class="pre">RETURNING</span></code>&#x8BBF;&#x95EE;&#x65B0;&#x751F;&#x6210;&#x7684;&#x4E3B;&#x952E;&#x503C;&#x3002;</span><span class="yiyi-st" id="yiyi-135">However, for the best compatibility, <a class="reference internal" href="#sqlalchemy.schema.Sequence" title="sqlalchemy.schema.Sequence"><code class="xref py py-class docutils literal"><span class="pre">Sequence</span></code></a> was originally intended to be a Python-side directive first and foremost so it&#x2019;s probably a good idea to specify it in this way as well.</span></p></div></div><div class="section" id="default-objects-api"><h2><span class="yiyi-st" id="yiyi-136">&#x9ED8;&#x8BA4;&#x5BF9;&#x8C61;API <a class="headerlink" href="#default-objects-api" title="Permalink to this headline">&#xB6;</a></span></h2><dl class="class"><dt id="sqlalchemy.schema.ColumnDefault"><span class="yiyi-st" id="yiyi-137"><em class="property">class</em> <code class="descclassname">sqlalchemy.schema&#x3002;</code> <code class="descname">ColumnDefault</code> <span class="sig-paren">&#xFF08;</span> <em>arg</em>&#xFF0C;<em>** kwargs  T5&gt; <span class="sig-paren">&#xFF09; T6&gt; <a class="headerlink" href="#sqlalchemy.schema.ColumnDefault" title="Permalink to this definition">&#xB6; T7&gt;</a></span></em></span></dt><dd><p><span class="yiyi-st" id="yiyi-138">&#x57FA;&#x7840;&#xFF1A;<a class="reference internal" href="#sqlalchemy.schema.DefaultGenerator" title="sqlalchemy.schema.DefaultGenerator"><code class="xref py py-class docutils literal"><span class="pre">sqlalchemy.schema.DefaultGenerator</span></code></a></span></p><p><span class="yiyi-st" id="yiyi-139">&#x5217;&#x4E0A;&#x7684;&#x666E;&#x901A;&#x9ED8;&#x8BA4;&#x503C;&#x3002;</span></p><p><span class="yiyi-st" id="yiyi-140">&#x8FD9;&#x53EF;&#x4EE5;&#x5BF9;&#x5E94;&#x4E8E;&#x5E38;&#x91CF;&#xFF0C;&#x53EF;&#x8C03;&#x7528;&#x51FD;&#x6570;&#x6216;SQL&#x5B50;&#x53E5;&#x3002;</span></p><p><span class="yiyi-st" id="yiyi-141"><a class="reference internal" href="#sqlalchemy.schema.ColumnDefault" title="sqlalchemy.schema.ColumnDefault"><code class="xref py py-class docutils literal"><span class="pre">ColumnDefault</span></code></a> is generated automatically whenever the <code class="docutils literal"><span class="pre">default</span></code>, <code class="docutils literal"><span class="pre">onupdate</span></code> arguments of <a class="reference internal" href="metadata.html#sqlalchemy.schema.Column" title="sqlalchemy.schema.Column"><code class="xref py py-class docutils literal"><span class="pre">Column</span></code></a> are used. </span><span class="yiyi-st" id="yiyi-142">&#x4E00;&#x4E2A;<a class="reference internal" href="#sqlalchemy.schema.ColumnDefault" title="sqlalchemy.schema.ColumnDefault"><code class="xref py py-class docutils literal"><span class="pre">ColumnDefault</span></code></a>&#x4E5F;&#x53EF;&#x4EE5;&#x5728;&#x4F4D;&#x7F6E;&#x4E0A;&#x4F20;&#x9012;&#x3002;</span></p><p><span class="yiyi-st" id="yiyi-143">&#x4F8B;&#x5982;&#xFF0C;&#x4EE5;&#x4E0B;&#x5185;&#x5BB9;&#xFF1A;</span></p><div class="highlight-python"><div class="highlight"><pre><span></span><span class="n">Column</span><span class="p">(</span><span class="s1">&apos;foo&apos;</span><span class="p">,</span> <span class="n">Integer</span><span class="p">,</span> <span class="n">default</span><span class="o">=</span><span class="mi">50</span><span class="p">)</span></pre></div></div><p><span class="yiyi-st" id="yiyi-144">&#x76F8;&#x5F53;&#x4E8E;&#xFF1A;</span></p><div class="highlight-python"><div class="highlight"><pre><span></span><span class="n">Column</span><span class="p">(</span><span class="s1">&apos;foo&apos;</span><span class="p">,</span> <span class="n">Integer</span><span class="p">,</span> <span class="n">ColumnDefault</span><span class="p">(</span><span class="mi">50</span><span class="p">))</span></pre></div></div></dd></dl><dl class="class"><dt id="sqlalchemy.schema.DefaultClause"><span class="yiyi-st" id="yiyi-145"> <em class="property">class </em><code class="descclassname">sqlalchemy.schema.</code><code class="descname">DefaultClause</code><span class="sig-paren">(</span><em>arg</em>, <em>for_update=False</em>, <em>_reflected=False</em><span class="sig-paren">)</span><a class="headerlink" href="#sqlalchemy.schema.DefaultClause" title="Permalink to this definition">&#xB6;</a></span></dt><dd><p><span class="yiyi-st" id="yiyi-146">&#x57FA;&#x7840;&#xFF1A;<a class="reference internal" href="#sqlalchemy.schema.FetchedValue" title="sqlalchemy.schema.FetchedValue"><code class="xref py py-class docutils literal"><span class="pre">sqlalchemy.schema.FetchedValue</span></code></a></span></p><p><span class="yiyi-st" id="yiyi-147">DDL&#x6307;&#x5B9A;&#x7684;DEFAULT&#x5217;&#x503C;&#x3002;</span></p><p><span class="yiyi-st" id="yiyi-148"><a class="reference internal" href="#sqlalchemy.schema.DefaultClause" title="sqlalchemy.schema.DefaultClause"><code class="xref py py-class docutils literal"><span class="pre">DefaultClause</span></code></a> is a <a class="reference internal" href="#sqlalchemy.schema.FetchedValue" title="sqlalchemy.schema.FetchedValue"><code class="xref py py-class docutils literal"><span class="pre">FetchedValue</span></code></a> that also generates a &#x201C;DEFAULT&#x201D; clause when &#x201C;CREATE TABLE&#x201D; is emitted.</span></p><p><span class="yiyi-st" id="yiyi-149"><a class="reference internal" href="#sqlalchemy.schema.DefaultClause" title="sqlalchemy.schema.DefaultClause"><code class="xref py py-class docutils literal"><span class="pre">DefaultClause</span></code></a> is generated automatically whenever the <code class="docutils literal"><span class="pre">server_default</span></code>, <code class="docutils literal"><span class="pre">server_onupdate</span></code> arguments of <a class="reference internal" href="metadata.html#sqlalchemy.schema.Column" title="sqlalchemy.schema.Column"><code class="xref py py-class docutils literal"><span class="pre">Column</span></code></a> are used. </span><span class="yiyi-st" id="yiyi-150">&#x4E00;&#x4E2A;<a class="reference internal" href="#sqlalchemy.schema.DefaultClause" title="sqlalchemy.schema.DefaultClause"><code class="xref py py-class docutils literal"><span class="pre">DefaultClause</span></code></a>&#x4E5F;&#x53EF;&#x4EE5;&#x5728;&#x4F4D;&#x7F6E;&#x4E0A;&#x4F20;&#x9012;&#x3002;</span></p><p><span class="yiyi-st" id="yiyi-151">&#x4F8B;&#x5982;&#xFF0C;&#x4EE5;&#x4E0B;&#x5185;&#x5BB9;&#xFF1A;</span></p><div class="highlight-python"><div class="highlight"><pre><span></span><span class="n">Column</span><span class="p">(</span><span class="s1">&apos;foo&apos;</span><span class="p">,</span> <span class="n">Integer</span><span class="p">,</span> <span class="n">server_default</span><span class="o">=</span><span class="s2">&quot;50&quot;</span><span class="p">)</span></pre></div></div><p><span class="yiyi-st" id="yiyi-152">&#x76F8;&#x5F53;&#x4E8E;&#xFF1A;</span></p><div class="highlight-python"><div class="highlight"><pre><span></span><span class="n">Column</span><span class="p">(</span><span class="s1">&apos;foo&apos;</span><span class="p">,</span> <span class="n">Integer</span><span class="p">,</span> <span class="n">DefaultClause</span><span class="p">(</span><span class="s2">&quot;50&quot;</span><span class="p">))</span></pre></div></div></dd></dl><dl class="class"><dt id="sqlalchemy.schema.DefaultGenerator"><span class="yiyi-st" id="yiyi-153"><em class="property">class</em> <code class="descclassname">sqlalchemy.schema&#x3002;</code> <code class="descname">DefaultGenerator</code> <span class="sig-paren">&#xFF08;</span> <em>for_update = False</em> <span class="sig-paren">/ T5&gt; <a class="headerlink" href="#sqlalchemy.schema.DefaultGenerator" title="Permalink to this definition">&#xB6; T6&gt;</a></span></span></dt><dd><p><span class="yiyi-st" id="yiyi-154">&#x57FA;&#x7840;&#xFF1A;<code class="xref py py-class docutils literal"><span class="pre">sqlalchemy.schema._NotAColumnExpr</span></code>&#xFF0C;<a class="reference internal" href="metadata.html#sqlalchemy.schema.SchemaItem" title="sqlalchemy.schema.SchemaItem"><code class="xref py py-class docutils literal"><span class="pre">sqlalchemy.schema.SchemaItem</span></code></a></span></p><p><span class="yiyi-st" id="yiyi-155">&#x5217;<em>&#x9ED8;&#x8BA4;</em>&#x503C;&#x7684;&#x57FA;&#x7C7B;&#x3002;</span></p></dd></dl><dl class="class"><dt id="sqlalchemy.schema.FetchedValue"><span class="yiyi-st" id="yiyi-156"><em class="property">&#x7C7B; T0&gt; <code class="descclassname"> sqlalchemy.schema&#x3002; T1&gt; <code class="descname"> FetchedValue  T2&gt; <span class="sig-paren">&#xFF08; T3&gt; <em> FOR_UPDATE =&#x5047; T4&gt; <span class="sig-paren">&#xFF09;&lt; / T5&gt; <a class="headerlink" href="#sqlalchemy.schema.FetchedValue" title="Permalink to this definition">&#xB6; T6&gt;</a></span></em></span></code></code></em></span></dt><dd><p><span class="yiyi-st" id="yiyi-157">&#x57FA;&#x7840;&#xFF1A;<code class="xref py py-class docutils literal"><span class="pre">sqlalchemy.schema._NotAColumnExpr</span></code>&#xFF0C;<code class="xref py py-class docutils literal"><span class="pre">sqlalchemy.sql.expression.SchemaEventTarget</span></code></span></p><p><span class="yiyi-st" id="yiyi-158">&#x900F;&#x660E;&#x6570;&#x636E;&#x5E93;&#x9ED8;&#x8BA4;&#x7684;&#x6807;&#x8BB0;&#x3002;</span></p><p><span class="yiyi-st" id="yiyi-159">&#x5F53;&#x6570;&#x636E;&#x5E93;&#x914D;&#x7F6E;&#x4E3A;&#x4E3A;&#x5217;&#x63D0;&#x4F9B;&#x4E00;&#x4E9B;&#x81EA;&#x52A8;&#x9ED8;&#x8BA4;&#x503C;&#x65F6;&#xFF0C;&#x4F7F;&#x7528;<a class="reference internal" href="#sqlalchemy.schema.FetchedValue" title="sqlalchemy.schema.FetchedValue"><code class="xref py py-class docutils literal"><span class="pre">FetchedValue</span></code></a>&#x3002;</span></p><p><span class="yiyi-st" id="yiyi-160">&#x4F8B;&#x5982;&#x3002;&#xFF1A;</span></p><div class="highlight-python"><div class="highlight"><pre><span></span><span class="n">Column</span><span class="p">(</span><span class="s1">&apos;foo&apos;</span><span class="p">,</span> <span class="n">Integer</span><span class="p">,</span> <span class="n">FetchedValue</span><span class="p">())</span></pre></div></div><p><span class="yiyi-st" id="yiyi-161">&#x5C06;&#x6307;&#x51FA;&#x67D0;&#x4E2A;&#x89E6;&#x53D1;&#x5668;&#x6216;&#x9ED8;&#x8BA4;&#x751F;&#x6210;&#x5668;&#x5C06;&#x5728;INSERT&#x671F;&#x95F4;&#x4E3A;<code class="docutils literal"><span class="pre">foo</span></code>&#x5217;&#x521B;&#x5EFA;&#x65B0;&#x503C;&#x3002;</span></p><div class="admonition seealso"><p class="first admonition-title"><span class="yiyi-st" id="yiyi-162">&#x4E5F;&#x53EF;&#x4EE5;&#x770B;&#x770B;</span></p><p class="last"><span class="yiyi-st" id="yiyi-163"><a class="reference internal" href="#triggered-columns"><span>Triggered Columns</span></a></span></p></div></dd></dl><dl class="class"><dt id="sqlalchemy.schema.PassiveDefault"><span class="yiyi-st" id="yiyi-164"><em class="property">class</em> <code class="descclassname">sqlalchemy.schema&#x3002;</code> <code class="descname">PassiveDefault</code> <span class="sig-paren">&#xFF08;</span> <em>* arg</em>&#xFF0C;<em>**&#x5343;&#x74E6; T5&gt; <span class="sig-paren">&#xFF09; T6&gt; <a class="headerlink" href="#sqlalchemy.schema.PassiveDefault" title="Permalink to this definition">&#xB6; T7&gt;</a></span></em></span></dt><dd><p><span class="yiyi-st" id="yiyi-165">&#x57FA;&#x7840;&#xFF1A;<a class="reference internal" href="#sqlalchemy.schema.DefaultClause" title="sqlalchemy.schema.DefaultClause"><code class="xref py py-class docutils literal"><span class="pre">sqlalchemy.schema.DefaultClause</span></code></a></span></p><p><span class="yiyi-st" id="yiyi-166">DDL&#x6307;&#x5B9A;&#x7684;DEFAULT&#x5217;&#x503C;&#x3002;</span></p><div class="deprecated"><p><span class="yiyi-st" id="yiyi-167"><span class="versionmodified">&#x4ECE;&#x7248;&#x672C;0.6&#x5F00;&#x59CB;&#x5F03;&#x7528;&#xFF1A;</span> <a class="reference internal" href="#sqlalchemy.schema.PassiveDefault" title="sqlalchemy.schema.PassiveDefault"><code class="xref py py-class docutils literal"><span class="pre">PassiveDefault</span></code></a>&#x5DF2;&#x5F03;&#x7528;&#x3002;</span><span class="yiyi-st" id="yiyi-168">&#x4F7F;&#x7528;<a class="reference internal" href="#sqlalchemy.schema.DefaultClause" title="sqlalchemy.schema.DefaultClause"><code class="xref py py-class docutils literal"><span class="pre">DefaultClause</span></code></a>&#x3002;</span></p></div></dd></dl><dl class="class"><dt id="sqlalchemy.schema.Sequence"><span class="yiyi-st" id="yiyi-169"> <em class="property">class </em><code class="descclassname">sqlalchemy.schema.</code><code class="descname">Sequence</code><span class="sig-paren">(</span><em>name</em>, <em>start=None</em>, <em>increment=None</em>, <em>minvalue=None</em>, <em>maxvalue=None</em>, <em>nominvalue=None</em>, <em>nomaxvalue=None</em>, <em>cycle=None</em>, <em>schema=None</em>, <em>optional=False</em>, <em>quote=None</em>, <em>metadata=None</em>, <em>quote_schema=None</em>, <em>for_update=False</em><span class="sig-paren">)</span><a class="headerlink" href="#sqlalchemy.schema.Sequence" title="Permalink to this definition">&#xB6;</a></span></dt><dd><p><span class="yiyi-st" id="yiyi-170">&#x57FA;&#x7840;&#xFF1A;<a class="reference internal" href="#sqlalchemy.schema.DefaultGenerator" title="sqlalchemy.schema.DefaultGenerator"><code class="xref py py-class docutils literal"><span class="pre">sqlalchemy.schema.DefaultGenerator</span></code></a></span></p><p><span class="yiyi-st" id="yiyi-171">&#x8868;&#x793A;&#x4E00;&#x4E2A;&#x547D;&#x540D;&#x7684;&#x6570;&#x636E;&#x5E93;&#x5E8F;&#x5217;&#x3002;</span></p><p><span class="yiyi-st" id="yiyi-172"><a class="reference internal" href="#sqlalchemy.schema.Sequence" title="sqlalchemy.schema.Sequence"><code class="xref py py-class docutils literal"><span class="pre">Sequence</span></code></a>&#x5BF9;&#x8C61;&#x8868;&#x793A;&#x6570;&#x636E;&#x5E93;&#x5E8F;&#x5217;&#x7684;&#x540D;&#x79F0;&#x548C;&#x914D;&#x7F6E;&#x53C2;&#x6570;&#x3002;</span><span class="yiyi-st" id="yiyi-173">&#x5B83;&#x8FD8;&#x8868;&#x793A;&#x4E00;&#x4E2A;&#x53EF;&#x4EE5;&#x7531;SQLAlchemy <a class="reference internal" href="connections.html#sqlalchemy.engine.Engine" title="sqlalchemy.engine.Engine"><code class="xref py py-class docutils literal"><span class="pre">Engine</span></code></a>&#x6216;<a class="reference internal" href="connections.html#sqlalchemy.engine.Connection" title="sqlalchemy.engine.Connection"><code class="xref py py-class docutils literal"><span class="pre">Connection</span></code></a>&#x6267;&#x884C;&#x7684;&#x6784;&#x9020;&#xFF0C;&#x4E3A;&#x76EE;&#x6807;&#x6570;&#x636E;&#x5E93;&#x5448;&#x73B0;&#x9002;&#x5F53;&#x7684;&#x201C;&#x4E0B;&#x4E00;&#x4E2A;&#x503C;&#x201D;&#x51FD;&#x6570;&#x5E76;&#x8FD4;&#x56DE;&#x7ED3;&#x679C;&#x3002;</span></p><p><span class="yiyi-st" id="yiyi-174"><a class="reference internal" href="#sqlalchemy.schema.Sequence" title="sqlalchemy.schema.Sequence"><code class="xref py py-class docutils literal"><span class="pre">Sequence</span></code></a>&#x901A;&#x5E38;&#x4E0E;&#x4E3B;&#x952E;&#x5217;&#x5173;&#x8054;&#xFF1A;</span></p><div class="highlight-python"><div class="highlight"><pre><span></span><span class="n">some_table</span> <span class="o">=</span> <span class="n">Table</span><span class="p">(</span>
    <span class="s1">&apos;some_table&apos;</span><span class="p">,</span> <span class="n">metadata</span><span class="p">,</span>
    <span class="n">Column</span><span class="p">(</span><span class="s1">&apos;id&apos;</span><span class="p">,</span> <span class="n">Integer</span><span class="p">,</span> <span class="n">Sequence</span><span class="p">(</span><span class="s1">&apos;some_table_seq&apos;</span><span class="p">),</span>
    <span class="n">primary_key</span><span class="o">=</span><span class="bp">True</span><span class="p">)</span>
<span class="p">)</span></pre></div></div><p><span class="yiyi-st" id="yiyi-175">&#x5F53;&#x9488;&#x5BF9;&#x4E0A;&#x8FF0;<a class="reference internal" href="metadata.html#sqlalchemy.schema.Table" title="sqlalchemy.schema.Table"><code class="xref py py-class docutils literal"><span class="pre">Table</span></code></a>&#x53D1;&#x51FA;CREATE TABLE&#x65F6;&#xFF0C;&#x5982;&#x679C;&#x76EE;&#x6807;&#x5E73;&#x53F0;&#x652F;&#x6301;&#x5E8F;&#x5217;&#xFF0C;&#x5219;&#x4E5F;&#x4F1A;&#x53D1;&#x51FA;CREATE SEQUENCE&#x8BED;&#x53E5;&#x3002;</span><span class="yiyi-st" id="yiyi-176">&#x5BF9;&#x4E8E;&#x4E0D;&#x652F;&#x6301;&#x5E8F;&#x5217;&#x7684;&#x5E73;&#x53F0;&#xFF0C;&#x5FFD;&#x7565;<a class="reference internal" href="#sqlalchemy.schema.Sequence" title="sqlalchemy.schema.Sequence"><code class="xref py py-class docutils literal"><span class="pre">Sequence</span></code></a>&#x7ED3;&#x6784;&#x3002;</span></p><div class="admonition seealso"><p class="first admonition-title"><span class="yiyi-st" id="yiyi-177">&#x4E5F;&#x53EF;&#x4EE5;&#x770B;&#x770B;</span></p><p><span class="yiyi-st" id="yiyi-178"><a class="reference internal" href="ddl.html#sqlalchemy.schema.CreateSequence" title="sqlalchemy.schema.CreateSequence"><code class="xref py py-class docutils literal"><span class="pre">CreateSequence</span></code></a></span></p><p class="last"><span class="yiyi-st" id="yiyi-179"><a class="reference internal" href="ddl.html#sqlalchemy.schema.DropSequence" title="sqlalchemy.schema.DropSequence"><code class="xref py py-class docutils literal"><span class="pre">DropSequence</span></code></a></span></p></div><dl class="method"><dt id="sqlalchemy.schema.Sequence.__init__"><span class="yiyi-st" id="yiyi-180"> <code class="descname">__init__</code><span class="sig-paren">(</span><em>name</em>, <em>start=None</em>, <em>increment=None</em>, <em>minvalue=None</em>, <em>maxvalue=None</em>, <em>nominvalue=None</em>, <em>nomaxvalue=None</em>, <em>cycle=None</em>, <em>schema=None</em>, <em>optional=False</em>, <em>quote=None</em>, <em>metadata=None</em>, <em>quote_schema=None</em>, <em>for_update=False</em><span class="sig-paren">)</span><a class="headerlink" href="#sqlalchemy.schema.Sequence.__init__" title="Permalink to this definition">&#xB6;</a></span></dt><dd><p><span class="yiyi-st" id="yiyi-181">&#x6784;&#x5EFA;&#x4E00;&#x4E2A;<a class="reference internal" href="#sqlalchemy.schema.Sequence" title="sqlalchemy.schema.Sequence"><code class="xref py py-class docutils literal"><span class="pre">Sequence</span></code></a>&#x5BF9;&#x8C61;&#x3002;</span></p><table class="docutils field-list" frame="void" rules="none"><tbody valign="top"><tr class="field-odd field"><th class="field-name"><span class="yiyi-st" id="yiyi-182">&#x53C2;&#x6570;&#xFF1A;</span></th><td class="field-body"><ul class="first last simple"><li><span class="yiyi-st" id="yiyi-183"><span class="target" id="sqlalchemy.schema.Sequence.params.name"></span> <strong>&#x540D;&#x79F0;</strong> <a class="paramlink headerlink reference internal" href="#sqlalchemy.schema.Sequence.params.name">&#xB6;</a>  - &#x5E8F;&#x5217;&#x7684;&#x540D;&#x79F0;&#x3002;</span></li><li><span class="yiyi-st" id="yiyi-184"><span class="target" id="sqlalchemy.schema.Sequence.params.start"></span> <strong>&#x5F00;&#x59CB;</strong> <a class="paramlink headerlink reference internal" href="#sqlalchemy.schema.Sequence.params.start">&#xB6;</a>  - &#x5E8F;&#x5217;&#x7684;&#x8D77;&#x59CB;&#x7D22;&#x5F15;&#x3002;</span><span class="yiyi-st" id="yiyi-185">&#x5F53;CREATE SEQUENCE&#x547D;&#x4EE4;&#x4F5C;&#x4E3A;&#x201C;START WITH&#x201D;&#x5B50;&#x53E5;&#x7684;&#x503C;&#x53D1;&#x9001;&#x5230;&#x6570;&#x636E;&#x5E93;&#x65F6;&#x4F7F;&#x7528;&#x6B64;&#x503C;&#x3002;</span><span class="yiyi-st" id="yiyi-186">&#x5982;&#x679C;<code class="docutils literal"><span class="pre">None</span></code>&#xFF0C;&#x5219;&#x7701;&#x7565;&#x8BE5;&#x5B50;&#x53E5;&#xFF0C;&#x5728;&#x5927;&#x591A;&#x6570;&#x5E73;&#x53F0;&#x4E0A;&#x8BE5;&#x5B50;&#x53E5;&#x6307;&#x793A;&#x8D77;&#x59CB;&#x503C;&#x4E3A;1&#x3002;</span></li><li><span class="yiyi-st" id="yiyi-187"><span class="target" id="sqlalchemy.schema.Sequence.params.increment"> <strong>&#x589E;&#x91CF;</strong> <a class="paramlink headerlink reference internal" href="#sqlalchemy.schema.Sequence.params.increment">&#xB6;</a>  - &#x5E8F;&#x5217;&#x7684;&#x589E;&#x91CF;&#x503C;&#x3002;</span></span><span class="yiyi-st" id="yiyi-188">&#x5F53;CREATE SEQUENCE&#x547D;&#x4EE4;&#x4F5C;&#x4E3A;&#x201C;INCREMENT BY&#x201D;&#x5B50;&#x53E5;&#x7684;&#x503C;&#x53D1;&#x9001;&#x5230;&#x6570;&#x636E;&#x5E93;&#x65F6;&#x4F7F;&#x7528;&#x6B64;&#x503C;&#x3002;</span><span class="yiyi-st" id="yiyi-189">&#x5982;&#x679C;<code class="docutils literal"><span class="pre">None</span></code>&#xFF0C;&#x5219;&#x8BE5;&#x5B50;&#x53E5;&#x88AB;&#x7701;&#x7565;&#xFF0C;&#x5728;&#x5927;&#x591A;&#x6570;&#x5E73;&#x53F0;&#x4E0A;&#x8BE5;&#x5B50;&#x53E5;&#x6307;&#x793A;&#x589E;&#x91CF;&#x4E3A;1&#x3002;</span></li><li><span class="yiyi-st" id="yiyi-194"><span class="target" id="sqlalchemy.schema.Sequence.params.minvalue"></span> <strong>minvalue</strong> <a class="paramlink headerlink reference internal" href="#sqlalchemy.schema.Sequence.params.minvalue">&#xB6;</a>  - </span><p><span class="yiyi-st" id="yiyi-190">&#x5E8F;&#x5217;&#x7684;&#x6700;&#x5C0F;&#x503C;&#x3002;</span><span class="yiyi-st" id="yiyi-191">&#x5F53;CREATE SEQUENCE&#x547D;&#x4EE4;&#x4F5C;&#x4E3A;&#x201C;MINVALUE&#x201D;&#x5B50;&#x53E5;&#x7684;&#x503C;&#x53D1;&#x9001;&#x5230;&#x6570;&#x636E;&#x5E93;&#x65F6;&#x4F7F;&#x7528;&#x6B64;&#x503C;&#x3002;</span><span class="yiyi-st" id="yiyi-192">&#x5982;&#x679C;<code class="docutils literal"><span class="pre">None</span></code>&#xFF0C;&#x5219;&#x8BE5;&#x5B50;&#x53E5;&#x88AB;&#x7701;&#x7565;&#xFF0C;&#x5728;&#x5927;&#x591A;&#x6570;&#x5E73;&#x53F0;&#x4E0A;&#x8BE5;&#x5B50;&#x53E5;&#x5206;&#x522B;&#x6307;&#x793A;&#x5347;&#x5E8F;&#x548C;&#x964D;&#x5E8F;&#x5E8F;&#x5217;&#x7684;&#x6700;&#x5C0F;&#x503C;&#x4E3A;1&#x548C;-2 ^ 63-1&#x3002;</span></p><div class="versionadded"><p><span class="yiyi-st" id="yiyi-193"><span class="versionmodified">&#x7248;&#x672C;1.0.7&#x4E2D;&#x7684;&#x65B0;&#x529F;&#x80FD;</span></span></p></div></li><li><span class="yiyi-st" id="yiyi-199"><span class="target" id="sqlalchemy.schema.Sequence.params.maxvalue"></span> <strong>maxvalue</strong> <a class="paramlink headerlink reference internal" href="#sqlalchemy.schema.Sequence.params.maxvalue">&#xB6;</a>  - </span><p><span class="yiyi-st" id="yiyi-195">&#x5E8F;&#x5217;&#x7684;&#x6700;&#x5927;&#x503C;&#x3002;</span><span class="yiyi-st" id="yiyi-196">&#x5F53;CREATE SEQUENCE&#x547D;&#x4EE4;&#x4F5C;&#x4E3A;&#x201C;MAXVALUE&#x201D;&#x5B50;&#x53E5;&#x7684;&#x503C;&#x53D1;&#x9001;&#x5230;&#x6570;&#x636E;&#x5E93;&#x65F6;&#x4F7F;&#x7528;&#x6B64;&#x503C;&#x3002;</span><span class="yiyi-st" id="yiyi-197">&#x5982;&#x679C;<code class="docutils literal"><span class="pre">None</span></code>&#xFF0C;&#x5219;&#x7701;&#x7565;&#x8BE5;&#x5B50;&#x53E5;&#xFF0C;&#x5B83;&#x5728;&#x5927;&#x591A;&#x6570;&#x5E73;&#x53F0;&#x4E0A;&#x5206;&#x522B;&#x6307;&#x793A;&#x5347;&#x5E8F;&#x548C;&#x964D;&#x5E8F;&#x5E8F;&#x5217;&#x7684;&#x6700;&#x5927;&#x503C;&#x4E3A;2 ^ 63-1&#x548C;-1&#x3002;</span></p><div class="versionadded"><p><span class="yiyi-st" id="yiyi-198"><span class="versionmodified">&#x7248;&#x672C;1.0.7&#x4E2D;&#x7684;&#x65B0;&#x529F;&#x80FD;</span></span></p></div></li><li><span class="yiyi-st" id="yiyi-204"><span class="target" id="sqlalchemy.schema.Sequence.params.nominvalue"></span> <strong>nominvalue</strong> <a class="paramlink headerlink reference internal" href="#sqlalchemy.schema.Sequence.params.nominvalue">&#xB6;</a>  - </span><p><span class="yiyi-st" id="yiyi-200">&#x6CA1;&#x6709;&#x6700;&#x5C0F;&#x503C;&#x7684;&#x5E8F;&#x5217;&#x3002;</span><span class="yiyi-st" id="yiyi-201">&#x5F53;CREATE SEQUENCE&#x547D;&#x4EE4;&#x4F5C;&#x4E3A;&#x201C;NO MINVALUE&#x201D;&#x5B50;&#x53E5;&#x7684;&#x503C;&#x53D1;&#x9001;&#x5230;&#x6570;&#x636E;&#x5E93;&#x65F6;&#x4F7F;&#x7528;&#x6B64;&#x503C;&#x3002;</span><span class="yiyi-st" id="yiyi-202">&#x5982;&#x679C;<code class="docutils literal"><span class="pre">None</span></code>&#xFF0C;&#x5219;&#x8BE5;&#x5B50;&#x53E5;&#x88AB;&#x7701;&#x7565;&#xFF0C;&#x5728;&#x5927;&#x591A;&#x6570;&#x5E73;&#x53F0;&#x4E0A;&#x8BE5;&#x5B50;&#x53E5;&#x5206;&#x522B;&#x6307;&#x793A;&#x5347;&#x5E8F;&#x548C;&#x964D;&#x5E8F;&#x5E8F;&#x5217;&#x7684;&#x6700;&#x5C0F;&#x503C;&#x4E3A;1&#x548C;-2 ^ 63-1&#x3002;</span></p><div class="versionadded"><p><span class="yiyi-st" id="yiyi-203"><span class="versionmodified">&#x7248;&#x672C;1.0.7&#x4E2D;&#x7684;&#x65B0;&#x529F;&#x80FD;</span></span></p></div></li><li><span class="yiyi-st" id="yiyi-209"><span class="target" id="sqlalchemy.schema.Sequence.params.nomaxvalue"></span> <strong>nomaxvalue</strong> <a class="paramlink headerlink reference internal" href="#sqlalchemy.schema.Sequence.params.nomaxvalue">&#xB6;</a>  - </span><p><span class="yiyi-st" id="yiyi-205">&#x6CA1;&#x6709;&#x6700;&#x5927;&#x503C;&#x7684;&#x5E8F;&#x5217;&#x3002;</span><span class="yiyi-st" id="yiyi-206">&#x5F53;&#x5C06;CREATE SEQUENCE&#x547D;&#x4EE4;&#x4F5C;&#x4E3A;&#x201C;NO MAXVALUE&#x201D;&#x5B50;&#x53E5;&#x7684;&#x503C;&#x53D1;&#x9001;&#x5230;&#x6570;&#x636E;&#x5E93;&#x65F6;&#x4F7F;&#x7528;&#x6B64;&#x503C;&#x3002;</span><span class="yiyi-st" id="yiyi-207">&#x5982;&#x679C;<code class="docutils literal"><span class="pre">None</span></code>&#xFF0C;&#x5219;&#x7701;&#x7565;&#x8BE5;&#x5B50;&#x53E5;&#xFF0C;&#x5B83;&#x5728;&#x5927;&#x591A;&#x6570;&#x5E73;&#x53F0;&#x4E0A;&#x5206;&#x522B;&#x6307;&#x793A;&#x5347;&#x5E8F;&#x548C;&#x964D;&#x5E8F;&#x5E8F;&#x5217;&#x7684;&#x6700;&#x5927;&#x503C;&#x4E3A;2 ^ 63-1&#x548C;-1&#x3002;</span></p><div class="versionadded"><p><span class="yiyi-st" id="yiyi-208"><span class="versionmodified">&#x7248;&#x672C;1.0.7&#x4E2D;&#x7684;&#x65B0;&#x529F;&#x80FD;</span></span></p></div></li><li><span class="yiyi-st" id="yiyi-215"><span class="target" id="sqlalchemy.schema.Sequence.params.cycle"></span> <strong>&#x5FAA;&#x73AF;</strong> <a class="paramlink headerlink reference internal" href="#sqlalchemy.schema.Sequence.params.cycle">&#xB6;</a>  - </span><p><span class="yiyi-st" id="yiyi-210">&#x5141;&#x8BB8;&#x5E8F;&#x5217;&#x5728;&#x5206;&#x522B;&#x4EE5;&#x5347;&#x5E8F;&#x6216;&#x964D;&#x5E8F;&#x8FBE;&#x5230;&#x6700;&#x5927;&#x503C;&#x6216;&#x6700;&#x5C0F;&#x503C;&#x65F6;&#x56DE;&#x7ED5;&#x3002;</span><span class="yiyi-st" id="yiyi-211">&#x5F53;CREATE SEQUENCE&#x547D;&#x4EE4;&#x4F5C;&#x4E3A;&#x201C;CYCLE&#x201D;&#x5B50;&#x53E5;&#x53D1;&#x9001;&#x5230;&#x6570;&#x636E;&#x5E93;&#x65F6;&#x4F7F;&#x7528;&#x6B64;&#x503C;&#x3002;</span><span class="yiyi-st" id="yiyi-212">&#x5982;&#x679C;&#x8FBE;&#x5230;&#x9650;&#x5236;&#xFF0C;&#x5219;&#x751F;&#x6210;&#x7684;&#x4E0B;&#x4E00;&#x4E2A;&#x6570;&#x5B57;&#x5C06;&#x5206;&#x522B;&#x4E3A;minvalue&#x6216;maxvalue&#x3002;</span><span class="yiyi-st" id="yiyi-213">&#x5982;&#x679C;cycle = False&#xFF08;&#x9ED8;&#x8BA4;&#x503C;&#xFF09;&#xFF0C;&#x5219;&#x5728;&#x5E8F;&#x5217;&#x8FBE;&#x5230;&#x5176;&#x6700;&#x5927;&#x503C;&#x540E;&#x5BF9;nextval&#x7684;&#x4EFB;&#x4F55;&#x8C03;&#x7528;&#x5C06;&#x8FD4;&#x56DE;&#x4E00;&#x4E2A;&#x9519;&#x8BEF;&#x3002;</span></p><div class="versionadded"><p><span class="yiyi-st" id="yiyi-214"><span class="versionmodified">&#x7248;&#x672C;1.0.7&#x4E2D;&#x7684;&#x65B0;&#x529F;&#x80FD;</span></span></p></div></li><li><span class="yiyi-st" id="yiyi-216"><span class="target" id="sqlalchemy.schema.Sequence.params.schema"></span><strong>schema</strong><a class="paramlink headerlink reference internal" href="#sqlalchemy.schema.Sequence.params.schema">&#xB6;</a> &#x2013; Optional schema name for the sequence, if located in a schema other than the default. </span><span class="yiyi-st" id="yiyi-217">&#x5F53;<a class="reference internal" href="metadata.html#sqlalchemy.schema.MetaData" title="sqlalchemy.schema.MetaData"><code class="xref py py-class docutils literal"><span class="pre">MetaData</span></code></a>&#x51FA;&#x73B0;&#x65F6;&#x9009;&#x62E9;&#x6A21;&#x5F0F;&#x540D;&#x79F0;&#x7684;&#x89C4;&#x5219;&#x4E0E;<a class="reference internal" href="metadata.html#sqlalchemy.schema.Table.params.schema" title="sqlalchemy.schema.Table"><code class="xref py py-paramref docutils literal"><span class="pre">Table.schema</span></code></a>&#x7684;&#x89C4;&#x5219;&#x76F8;&#x540C;&#x3002;</span></li><li><span class="yiyi-st" id="yiyi-218"><span class="target" id="sqlalchemy.schema.Sequence.params.optional"></span><strong>optional</strong><a class="paramlink headerlink reference internal" href="#sqlalchemy.schema.Sequence.params.optional">&#xB6;</a> &#x2013; boolean value, when <code class="docutils literal"><span class="pre">True</span></code>, indicates that this <a class="reference internal" href="#sqlalchemy.schema.Sequence" title="sqlalchemy.schema.Sequence"><code class="xref py py-class docutils literal"><span class="pre">Sequence</span></code></a> object only needs to be explicitly generated on backends that don&#x2019;t provide another way to generate primary key identifiers. </span><span class="yiyi-st" id="yiyi-219">&#x76EE;&#x524D;&#xFF0C;&#x5B83;&#x57FA;&#x672C;&#x4E0A;&#x610F;&#x5473;&#x7740;&#x201C;&#x4E0D;&#x8981;&#x5728;Postgresql&#x540E;&#x7AEF;&#x521B;&#x5EFA;&#x8FD9;&#x4E2A;&#x5E8F;&#x5217;&#xFF0C;SERIAL&#x5173;&#x952E;&#x5B57;&#x4F1A;&#x81EA;&#x52A8;&#x4E3A;&#x6211;&#x4EEC;&#x521B;&#x5EFA;&#x4E00;&#x4E2A;&#x5E8F;&#x5217;&#x201D;&#x3002;</span></li><li><span class="yiyi-st" id="yiyi-220"><span class="target" id="sqlalchemy.schema.Sequence.params.quote"></span><strong>quote</strong><a class="paramlink headerlink reference internal" href="#sqlalchemy.schema.Sequence.params.quote">&#xB6;</a> &#x2013; boolean value, when <code class="docutils literal"><span class="pre">True</span></code> or <code class="docutils literal"><span class="pre">False</span></code>, explicitly forces quoting of the schema name on or off. </span><span class="yiyi-st" id="yiyi-221">&#x5982;&#x679C;&#x4FDD;&#x7559;&#x4E3A;<code class="docutils literal"><span class="pre">None</span></code>&#x7684;&#x9ED8;&#x8BA4;&#x503C;&#xFF0C;&#x5219;&#x4F1A;&#x53D1;&#x751F;&#x57FA;&#x4E8E;&#x5927;&#x62EC;&#x53F7;&#x548C;&#x4FDD;&#x7559;&#x5B57;&#x7684;&#x6B63;&#x5E38;&#x5F15;&#x7528;&#x89C4;&#x5219;&#x3002;</span></li><li><span class="yiyi-st" id="yiyi-222"><span class="target" id="sqlalchemy.schema.Sequence.params.quote_schema"></span><strong>quote_schema</strong><a class="paramlink headerlink reference internal" href="#sqlalchemy.schema.Sequence.params.quote_schema">&#xB6;</a> &#x2013; set the quoting preferences for the <code class="docutils literal"><span class="pre">schema</span></code> name.</span></li><li><span class="yiyi-st" id="yiyi-228"><span class="target" id="sqlalchemy.schema.Sequence.params.metadata"></span> <strong>&#x5143;&#x6570;&#x636E;</strong> <a class="paramlink headerlink reference internal" href="#sqlalchemy.schema.Sequence.params.metadata">&#xB6;</a>  - </span><p><span class="yiyi-st" id="yiyi-223">&#x53EF;&#x9009;&#x7684;<a class="reference internal" href="metadata.html#sqlalchemy.schema.MetaData" title="sqlalchemy.schema.MetaData"><code class="xref py py-class docutils literal"><span class="pre">MetaData</span></code></a>&#x5BF9;&#x8C61;&#xFF0C;&#x5B83;&#x5C06;&#x4E0E;&#x6B64;<a class="reference internal" href="#sqlalchemy.schema.Sequence" title="sqlalchemy.schema.Sequence"><code class="xref py py-class docutils literal"><span class="pre">Sequence</span></code></a>&#x5173;&#x8054;&#x3002;</span><span class="yiyi-st" id="yiyi-224">A <a class="reference internal" href="#sqlalchemy.schema.Sequence" title="sqlalchemy.schema.Sequence"><code class="xref py py-class docutils literal"><span class="pre">Sequence</span></code></a> that is associated with a <a class="reference internal" href="metadata.html#sqlalchemy.schema.MetaData" title="sqlalchemy.schema.MetaData"><code class="xref py py-class docutils literal"><span class="pre">MetaData</span></code></a> gains access to the <code class="docutils literal"><span class="pre">bind</span></code> of that <a class="reference internal" href="metadata.html#sqlalchemy.schema.MetaData" title="sqlalchemy.schema.MetaData"><code class="xref py py-class docutils literal"><span class="pre">MetaData</span></code></a>, meaning the <a class="reference internal" href="#sqlalchemy.schema.Sequence.create" title="sqlalchemy.schema.Sequence.create"><code class="xref py py-meth docutils literal"><span class="pre">Sequence.create()</span></code></a> and <a class="reference internal" href="#sqlalchemy.schema.Sequence.drop" title="sqlalchemy.schema.Sequence.drop"><code class="xref py py-meth docutils literal"><span class="pre">Sequence.drop()</span></code></a> methods will make usage of that engine automatically.</span></p><div class="versionchanged"><p><span class="yiyi-st" id="yiyi-225"><span class="versionmodified">&#x7248;&#x672C;0.7&#x66F4;&#x6539;&#xFF1A;</span>&#x6B64;&#x5916;&#xFF0C;&#x5F53;<a class="reference internal" href="metadata.html#sqlalchemy.schema.MetaData.create_all" title="sqlalchemy.schema.MetaData.create_all"><code class="xref py py-meth docutils literal"><span class="pre">MetaData.create_all()</span></code></a>&#x65F6;&#xFF0C;&#x76F8;&#x5E94;&#x7684;<a class="reference internal" href="#sqlalchemy.schema.Sequence" title="sqlalchemy.schema.Sequence"><code class="xref py py-class docutils literal"><span class="pre">Sequence</span></code></a>&#x5C06;&#x4F1A;&#x53D1;&#x51FA;&#x76F8;&#x5E94;&#x7684;CREATE SEQUENCE / DROP SEQUENCE DDL&#x547D;&#x4EE4;&#x548C;<a class="reference internal" href="metadata.html#sqlalchemy.schema.MetaData.drop_all" title="sqlalchemy.schema.MetaData.drop_all"><code class="xref py py-meth docutils literal"><span class="pre">MetaData.drop_all()</span></code></a>&#x88AB;&#x8C03;&#x7528;&#x3002;</span></p></div><p><span class="yiyi-st" id="yiyi-226">&#x8BF7;&#x6CE8;&#x610F;&#xFF0C;&#x5F53;&#x4E00;&#x4E2A;<a class="reference internal" href="#sqlalchemy.schema.Sequence" title="sqlalchemy.schema.Sequence"><code class="xref py py-class docutils literal"><span class="pre">Sequence</span></code></a>&#x5E94;&#x7528;&#x4E8E;<a class="reference internal" href="metadata.html#sqlalchemy.schema.Column" title="sqlalchemy.schema.Column"><code class="xref py py-class docutils literal"><span class="pre">Column</span></code></a>&#x65F6;&#xFF0C;<a class="reference internal" href="#sqlalchemy.schema.Sequence" title="sqlalchemy.schema.Sequence"><code class="xref py py-class docutils literal"><span class="pre">Sequence</span></code></a>&#x4F1A;&#x81EA;&#x52A8;&#x4E0E;&#x8BE5;&#x5143;&#x7D20;&#x7684;<a class="reference internal" href="metadata.html#sqlalchemy.schema.MetaData" title="sqlalchemy.schema.MetaData"><code class="xref py py-class docutils literal"><span class="pre">MetaData</span></code></a>&#x5BF9;&#x8C61;&#x5173;&#x8054;&#x5217;&#x7684;&#x7236;<a class="reference internal" href="metadata.html#sqlalchemy.schema.Table" title="sqlalchemy.schema.Table"><code class="xref py py-class docutils literal"><span class="pre">Table</span></code></a>&#xFF0C;&#x5F53;&#x8BE5;&#x5173;&#x8054;&#x65F6;&#x3002;</span><span class="yiyi-st" id="yiyi-227">The <a class="reference internal" href="#sqlalchemy.schema.Sequence" title="sqlalchemy.schema.Sequence"><code class="xref py py-class docutils literal"><span class="pre">Sequence</span></code></a> will then be subject to automatic CREATE SEQUENCE/DROP SEQUENCE corresponding to when the <a class="reference internal" href="metadata.html#sqlalchemy.schema.Table" title="sqlalchemy.schema.Table"><code class="xref py py-class docutils literal"><span class="pre">Table</span></code></a> object itself is created or dropped, rather than that of the <a class="reference internal" href="metadata.html#sqlalchemy.schema.MetaData" title="sqlalchemy.schema.MetaData"><code class="xref py py-class docutils literal"><span class="pre">MetaData</span></code></a> object overall.</span></p></li><li><span class="yiyi-st" id="yiyi-229"><span class="target" id="sqlalchemy.schema.Sequence.params.for_update"></span><strong>for_update</strong><a class="paramlink headerlink reference internal" href="#sqlalchemy.schema.Sequence.params.for_update">&#xB6;</a> &#x2013; Indicates this <a class="reference internal" href="#sqlalchemy.schema.Sequence" title="sqlalchemy.schema.Sequence"><code class="xref py py-class docutils literal"><span class="pre">Sequence</span></code></a>, when associated with a <a class="reference internal" href="metadata.html#sqlalchemy.schema.Column" title="sqlalchemy.schema.Column"><code class="xref py py-class docutils literal"><span class="pre">Column</span></code></a>, should be invoked for UPDATE statements on that column&#x2019;s table, rather than for INSERT statements, when no value is otherwise present for that column in the statement.</span></li></ul></td></tr></tbody></table></dd></dl><dl class="method"><dt id="sqlalchemy.schema.Sequence.create"><span class="yiyi-st" id="yiyi-230"> <code class="descname">create</code><span class="sig-paren">(</span><em>bind=None</em>, <em>checkfirst=True</em><span class="sig-paren">)</span><a class="headerlink" href="#sqlalchemy.schema.Sequence.create" title="Permalink to this definition">&#xB6;</a></span></dt><dd><p><span class="yiyi-st" id="yiyi-231">&#x5728;&#x6570;&#x636E;&#x5E93;&#x4E2D;&#x521B;&#x5EFA;&#x8FD9;&#x4E2A;&#x5E8F;&#x5217;&#x3002;</span></p></dd></dl><dl class="method"><dt id="sqlalchemy.schema.Sequence.drop"><span class="yiyi-st" id="yiyi-232"> <code class="descname">drop</code><span class="sig-paren">(</span><em>bind=None</em>, <em>checkfirst=True</em><span class="sig-paren">)</span><a class="headerlink" href="#sqlalchemy.schema.Sequence.drop" title="Permalink to this definition">&#xB6;</a></span></dt><dd><p><span class="yiyi-st" id="yiyi-233">&#x4ECE;&#x6570;&#x636E;&#x5E93;&#x4E2D;&#x5220;&#x9664;&#x8FD9;&#x4E2A;&#x5E8F;&#x5217;&#x3002;</span></p></dd></dl><dl class="method"><dt id="sqlalchemy.schema.Sequence.next_value"><span class="yiyi-st" id="yiyi-234"><code class="descname"> next_value  T0&gt; <span class="sig-paren">&#xFF08; T1&gt; <span class="sig-paren">&#xFF09; T2&gt; <a class="headerlink" href="#sqlalchemy.schema.Sequence.next_value" title="Permalink to this definition">&#xB6; T3&gt;</a></span></span></code></span></dt><dd><p><span class="yiyi-st" id="yiyi-235">&#x8FD4;&#x56DE;&#x4E00;&#x4E2A;<a class="reference internal" href="functions.html#sqlalchemy.sql.functions.next_value" title="sqlalchemy.sql.functions.next_value"><code class="xref py py-class docutils literal"><span class="pre">next_value</span></code></a>&#x51FD;&#x6570;&#x5143;&#x7D20;&#xFF0C;&#x8BE5;&#x5143;&#x7D20;&#x5C06;&#x4E3A;&#x4EFB;&#x4F55;SQL&#x8868;&#x8FBE;&#x5F0F;&#x4E2D;&#x7684;<a class="reference internal" href="#sqlalchemy.schema.Sequence" title="sqlalchemy.schema.Sequence"><code class="xref py py-class docutils literal"><span class="pre">Sequence</span></code></a>&#x63D0;&#x4F9B;&#x9002;&#x5F53;&#x7684;&#x589E;&#x91CF;&#x51FD;&#x6570;&#x3002;</span></p></dd></dl></dd></dl></div>