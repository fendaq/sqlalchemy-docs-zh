<h1><span class="yiyi-st" id="yiyi-40">&#x8868;&#x8FBE;&#x5F0F;&#x4E32;&#x884C;&#x5668;&#x6269;&#x5C55;<a class="headerlink" href="#module-sqlalchemy.ext.serializer" title="Permalink to this headline">&#xB6;</a></span></h1><p><span class="yiyi-st" id="yiyi-41">Serializer / Deserializer&#x5BF9;&#x8C61;&#x4E0E;SQLAlchemy&#x67E5;&#x8BE2;&#x7ED3;&#x6784;&#x4E00;&#x8D77;&#x4F7F;&#x7528;&#xFF0C;&#x5141;&#x8BB8;&#x201C;&#x4E0A;&#x4E0B;&#x6587;&#x201D;&#x53CD;&#x5E8F;&#x5217;&#x5316;&#x3002;</span></p><p><span class="yiyi-st" id="yiyi-42">&#x4EFB;&#x4F55;&#x57FA;&#x4E8E;sqlalchemy.sql&#x7684;SQLAlchemy&#x67E5;&#x8BE2;&#x7ED3;&#x6784;&#x3002;</span><span class="yiyi-st" id="yiyi-43">*&#x6216;sqlalchemy.orm&#x3002;</span><span class="yiyi-st" id="yiyi-44">*&#x53EF;&#x4EE5;&#x4F7F;&#x7528;&#x3002;</span><span class="yiyi-st" id="yiyi-45">&#x6620;&#x5C04;&#x5668;&#xFF0C;&#x8868;&#x683C;&#xFF0C;&#x5217;&#xFF0C;&#x4F1A;&#x8BDD;&#x7B49;</span><span class="yiyi-st" id="yiyi-46">&#x7ED3;&#x6784;&#x5F15;&#x7528;&#x7684;&#x5185;&#x5BB9;&#x4E0D;&#x662F;&#x4EE5;&#x5E8F;&#x5217;&#x5316;&#x5F62;&#x5F0F;&#x6301;&#x4E45;&#x5316;&#x7684;&#xFF0C;&#x800C;&#x662F;&#x5728;&#x53CD;&#x5E8F;&#x5217;&#x5316;&#x65F6;&#x4E0E;&#x67E5;&#x8BE2;&#x7ED3;&#x6784;&#x91CD;&#x65B0;&#x5173;&#x8054;&#x3002;</span></p><p><span class="yiyi-st" id="yiyi-47">&#x7528;&#x6CD5;&#x4E0E;&#x6807;&#x51C6;Python pickle&#x6A21;&#x5757;&#x7684;&#x7528;&#x6CD5;&#x51E0;&#x4E4E;&#x76F8;&#x540C;&#xFF1A;</span></p><div class="highlight-python"><div class="highlight"><pre><span></span>from sqlalchemy.ext.serializer import loads, dumps
metadata = MetaData(bind=some_engine)
Session = scoped_session(sessionmaker())

# ... define mappers

query = Session.query(MyClass).
    filter(MyClass.somedata==&apos;foo&apos;).order_by(MyClass.sortkey)

# pickle the query
serialized = dumps(query)

# unpickle.  Pass in metadata + scoped_session
query2 = loads(serialized, metadata, Session)

print query2.all()</pre></div></div><p><span class="yiyi-st" id="yiyi-48">&#x4E0E;&#x4F7F;&#x7528;&#x751F;&#x814C;&#x83DC;&#x65F6;&#x7C7B;&#x4F3C;&#x7684;&#x9650;&#x5236;&#x9002;&#x7528;&#xFF1B;&#x6620;&#x5C04;&#x7C7B;&#x672C;&#x8EAB;&#x5FC5;&#x987B;&#x662F;&#x53EF;&#x4EE5;&#x9009;&#x62E9;&#x7684;&#xFF0C;&#x8FD9;&#x610F;&#x5473;&#x7740;&#x5B83;&#x4EEC;&#x53EF;&#x4EE5;&#x4ECE;&#x6A21;&#x5757;&#x7EA7;&#x547D;&#x540D;&#x7A7A;&#x95F4;&#x5BFC;&#x5165;&#x3002;</span></p><p><span class="yiyi-st" id="yiyi-49">&#x5E8F;&#x5217;&#x5316;&#x5668;&#x6A21;&#x5757;&#x4EC5;&#x9002;&#x7528;&#x4E8E;&#x67E5;&#x8BE2;&#x7ED3;&#x6784;&#x3002;</span><span class="yiyi-st" id="yiyi-50">&#x5B83;&#x4E0D;&#x9700;&#x8981;&#xFF1A;</span></p><ul class="simple"><li><span class="yiyi-st" id="yiyi-51">&#x7528;&#x6237;&#x5B9A;&#x4E49;&#x7C7B;&#x7684;&#x5B9E;&#x4F8B;&#x3002;</span><span class="yiyi-st" id="yiyi-52">&#x5B83;&#x4EEC;&#x5728;&#x5178;&#x578B;&#x60C5;&#x51B5;&#x4E0B;&#x4E0D;&#x5305;&#x542B;&#x5BF9;&#x5F15;&#x64CE;&#xFF0C;&#x4F1A;&#x8BDD;&#x6216;&#x8868;&#x8FBE;&#x5F0F;&#x7ED3;&#x6784;&#x7684;&#x5F15;&#x7528;&#xFF0C;&#x5E76;&#x4E14;&#x53EF;&#x4EE5;&#x76F4;&#x63A5;&#x5E8F;&#x5217;&#x5316;&#x3002;</span></li><li><span class="yiyi-st" id="yiyi-53">&#x8981;&#x5B8C;&#x5168;&#x4ECE;&#x5E8F;&#x5217;&#x5316;&#x7ED3;&#x6784;&#x52A0;&#x8F7D;&#x7684;&#x8868;&#x5143;&#x6570;&#x636E;&#xFF08;&#x5373;&#xFF0C;&#x5C1A;&#x672A;&#x5728;&#x5E94;&#x7528;&#x7A0B;&#x5E8F;&#x4E2D;&#x58F0;&#x660E;&#xFF09;&#x3002;</span><span class="yiyi-st" id="yiyi-54">&#x5E38;&#x89C4;pickle.loads()/ dumps()&#x53EF;&#x7528;&#x4E8E;&#x5B8C;&#x5168;&#x8F6C;&#x50A8;&#x4EFB;&#x4F55;<code class="docutils literal"><span class="pre">MetaData</span></code>&#x5BF9;&#x8C61;&#xFF0C;&#x901A;&#x5E38;&#x662F;&#x5728;&#x67D0;&#x4E2A;&#x5148;&#x524D;&#x65F6;&#x95F4;&#x70B9;&#x4ECE;&#x73B0;&#x6709;&#x6570;&#x636E;&#x5E93;&#x53CD;&#x6620;&#x7684;&#x5BF9;&#x8C61;&#x3002;</span><span class="yiyi-st" id="yiyi-55">&#x4E32;&#x884C;&#x5668;&#x6A21;&#x5757;&#x4E13;&#x95E8;&#x7528;&#x4E8E;&#x76F8;&#x53CD;&#x7684;&#x60C5;&#x51B5;&#xFF0C;&#x5176;&#x4E2D;&#x8868;&#x5143;&#x6570;&#x636E;&#x5DF2;&#x7ECF;&#x5B58;&#x5728;&#x4E8E;&#x5185;&#x5B58;&#x4E2D;&#x3002;</span></li></ul><dl class="function"><dt id="sqlalchemy.ext.serializer.Serializer"><span class="yiyi-st" id="yiyi-56"> <code class="descclassname">sqlalchemy.ext.serializer.</code><code class="descname">Serializer</code><span class="sig-paren">(</span><em>*args</em>, <em>**kw</em><span class="sig-paren">)</span><a class="headerlink" href="#sqlalchemy.ext.serializer.Serializer" title="Permalink to this definition">&#xB6;</a></span></dt><dd></dd></dl><dl class="function"><dt id="sqlalchemy.ext.serializer.Deserializer"><span class="yiyi-st" id="yiyi-57"> <code class="descclassname">sqlalchemy.ext.serializer.</code><code class="descname">Deserializer</code><span class="sig-paren">(</span><em>file</em>, <em>metadata=None</em>, <em>scoped_session=None</em>, <em>engine=None</em><span class="sig-paren">)</span><a class="headerlink" href="#sqlalchemy.ext.serializer.Deserializer" title="Permalink to this definition">&#xB6;</a></span></dt><dd></dd></dl><dl class="function"><dt id="sqlalchemy.ext.serializer.dumps"><span class="yiyi-st" id="yiyi-58"> <code class="descclassname">sqlalchemy.ext.serializer.</code><code class="descname">dumps</code><span class="sig-paren">(</span><em>obj</em>, <em>protocol=0</em><span class="sig-paren">)</span><a class="headerlink" href="#sqlalchemy.ext.serializer.dumps" title="Permalink to this definition">&#xB6;</a></span></dt><dd></dd></dl><dl class="function"><dt id="sqlalchemy.ext.serializer.loads"><span class="yiyi-st" id="yiyi-59"> <code class="descclassname">sqlalchemy.ext.serializer.</code><code class="descname">loads</code><span class="sig-paren">(</span><em>data</em>, <em>metadata=None</em>, <em>scoped_session=None</em>, <em>engine=None</em><span class="sig-paren">)</span><a class="headerlink" href="#sqlalchemy.ext.serializer.loads" title="Permalink to this definition">&#xB6;</a></span></dt><dd></dd></dl>