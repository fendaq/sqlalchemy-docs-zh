<h1><span class="yiyi-st" id="yiyi-52">&#x4F7F;&#x7528;&#x5F15;&#x64CE;&#x548C;&#x8FDE;&#x63A5;<a class="headerlink" href="#module-sqlalchemy.engine" title="Permalink to this headline">&#xB6;</a></span></h1><p><span class="yiyi-st" id="yiyi-53">&#x672C;&#x8282;&#x8BE6;&#x7EC6;&#x4ECB;&#x7ECD;<a class="reference internal" href="#sqlalchemy.engine.Engine" title="sqlalchemy.engine.Engine"><code class="xref py py-class docutils literal"><span class="pre">Engine</span></code></a>&#xFF0C;<a class="reference internal" href="#sqlalchemy.engine.Connection" title="sqlalchemy.engine.Connection"><code class="xref py py-class docutils literal"><span class="pre">Connection</span></code></a>&#x548C;&#x76F8;&#x5173;&#x5BF9;&#x8C61;&#x7684;&#x76F4;&#x63A5;&#x4F7F;&#x7528;&#x3002;</span><span class="yiyi-st" id="yiyi-54">&#x9700;&#x8981;&#x6CE8;&#x610F;&#x7684;&#x662F;&#xFF0C;&#x5728;&#x4F7F;&#x7528;SQLAlchemy ORM&#x65F6;&#xFF0C;&#x901A;&#x5E38;&#x4E0D;&#x4F1A;&#x8BBF;&#x95EE;&#x8FD9;&#x4E9B;&#x5BF9;&#x8C61;&#xFF1B;&#x76F8;&#x53CD;&#xFF0C;<a class="reference internal" href="orm_session_api.html#sqlalchemy.orm.session.Session" title="sqlalchemy.orm.session.Session"><code class="xref py py-class docutils literal"><span class="pre">Session</span></code></a>&#x5BF9;&#x8C61;&#x7528;&#x4F5C;&#x6570;&#x636E;&#x5E93;&#x7684;&#x63A5;&#x53E3;&#x3002;</span><span class="yiyi-st" id="yiyi-55">&#x4F46;&#x662F;&#xFF0C;&#x5BF9;&#x4E8E;&#x76F4;&#x63A5;&#x4F7F;&#x7528;&#x6587;&#x672C;SQL&#x8BED;&#x53E5;&#x548C;/&#x6216;SQL&#x8868;&#x8FBE;&#x7ED3;&#x6784;&#x800C;&#x4E0D;&#x9700;&#x8981;ORM&#x7684;&#x9AD8;&#x7EA7;&#x7BA1;&#x7406;&#x670D;&#x52A1;&#x7684;&#x5E94;&#x7528;&#x7A0B;&#x5E8F;&#xFF0C;<a class="reference internal" href="#sqlalchemy.engine.Engine" title="sqlalchemy.engine.Engine"><code class="xref py py-class docutils literal"><span class="pre">Engine</span></code></a>&#x548C;<a class="reference internal" href="#sqlalchemy.engine.Connection" title="sqlalchemy.engine.Connection"><code class="xref py py-class docutils literal"><span class="pre">Connection</span></code></a>&#x4E3A;&#x738B;&#xFF08;&#x548C;&#x7687;&#x540E;&#xFF1F;&#xFF09;</span><span class="yiyi-st" id="yiyi-56"> - &#x7EE7;&#x7EED;&#x9605;&#x8BFB;&#x3002;</span></p><div class="section" id="basic-usage"><h2><span class="yiyi-st" id="yiyi-57">&#x57FA;&#x672C;&#x7528;&#x6CD5;<a class="headerlink" href="#basic-usage" title="Permalink to this headline">&#xB6;</a></span></h2><p><span class="yiyi-st" id="yiyi-58">&#x4ECE;<a class="reference internal" href="engines.html"><em>Engine Configuration</em></a>&#x56DE;&#x987E;<a class="reference internal" href="#sqlalchemy.engine.Engine" title="sqlalchemy.engine.Engine"><code class="xref py py-class docutils literal"><span class="pre">Engine</span></code></a>&#x662F;&#x901A;&#x8FC7;<a class="reference internal" href="engines.html#sqlalchemy.create_engine" title="sqlalchemy.create_engine"><code class="xref py py-func docutils literal"><span class="pre">create_engine()</span></code></a>&#x8C03;&#x7528;&#x521B;&#x5EFA;&#x7684;&#xFF1A;</span></p><div class="highlight-python"><div class="highlight"><pre><span></span><span class="n">engine</span> <span class="o">=</span> <span class="n">create_engine</span><span class="p">(</span><span class="s1">&apos;mysql://scott:tiger@localhost/test&apos;</span><span class="p">)</span></pre></div></div><p><span class="yiyi-st" id="yiyi-59"><a class="reference internal" href="engines.html#sqlalchemy.create_engine" title="sqlalchemy.create_engine"><code class="xref py py-func docutils literal"><span class="pre">create_engine()</span></code></a>&#x7684;&#x5178;&#x578B;&#x7528;&#x6CD5;&#x662F;&#x6BCF;&#x4E2A;&#x7279;&#x5B9A;&#x7684;&#x6570;&#x636E;&#x5E93;URL&#x4E00;&#x6B21;&#xFF0C;&#x5728;&#x5355;&#x4E2A;&#x5E94;&#x7528;&#x7A0B;&#x5E8F;&#x8FDB;&#x7A0B;&#x7684;&#x6574;&#x4E2A;&#x751F;&#x547D;&#x5468;&#x671F;&#x5185;&#x5168;&#x5C40;&#x4FDD;&#x5B58;&#x3002;</span><span class="yiyi-st" id="yiyi-60">&#x4E00;&#x4E2A;<a class="reference internal" href="#sqlalchemy.engine.Engine" title="sqlalchemy.engine.Engine"><code class="xref py py-class docutils literal"><span class="pre">Engine</span></code></a>&#x4EE3;&#x8868;&#x8FDB;&#x7A0B;&#x7BA1;&#x7406;&#x8BB8;&#x591A;&#x5355;&#x72EC;&#x7684;DBAPI&#x8FDE;&#x63A5;&#xFF0C;&#x5E76;&#x4E14;&#x65E8;&#x5728;&#x4EE5;&#x5E76;&#x53D1;&#x65B9;&#x5F0F;&#x8C03;&#x7528;&#x3002;</span><span class="yiyi-st" id="yiyi-61">The <a class="reference internal" href="#sqlalchemy.engine.Engine" title="sqlalchemy.engine.Engine"><code class="xref py py-class docutils literal"><span class="pre">Engine</span></code></a> is <strong>not</strong> synonymous to the DBAPI <code class="docutils literal"><span class="pre">connect</span></code> function, which represents just one connection resource - the <a class="reference internal" href="#sqlalchemy.engine.Engine" title="sqlalchemy.engine.Engine"><code class="xref py py-class docutils literal"><span class="pre">Engine</span></code></a> is most efficient when created just once at the module level of an application, not per-object or per-function call.</span></p><p><span class="yiyi-st" id="yiyi-62">&#x5BF9;&#x4E8E;&#x4F7F;&#x7528;<code class="docutils literal"><span class="pre">os.fork</span></code>&#x7CFB;&#x7EDF;&#x8C03;&#x7528;&#x7684;&#x591A;&#x8FDB;&#x7A0B;&#x5E94;&#x7528;&#x7A0B;&#x5E8F;&#xFF0C;&#x6216;&#x8005;&#x4F8B;&#x5982;Python <code class="docutils literal"><span class="pre">multiprocessing</span></code>&#x6A21;&#x5757;&#xFF0C;&#x901A;&#x5E38;&#x9700;&#x8981;&#x5355;&#x72EC;&#x7684;<a class="reference internal" href="#sqlalchemy.engine.Engine" title="sqlalchemy.engine.Engine"><code class="xref py py-class docutils literal"><span class="pre">Engine</span></code></a></span><span class="yiyi-st" id="yiyi-63">&#x8FD9;&#x662F;&#x56E0;&#x4E3A;<a class="reference internal" href="#sqlalchemy.engine.Engine" title="sqlalchemy.engine.Engine"><code class="xref py py-class docutils literal"><span class="pre">Engine</span></code></a>&#x4FDD;&#x6301;&#x5BF9;&#x6700;&#x7EC8;&#x5F15;&#x7528;DBAPI&#x8FDE;&#x63A5;&#x7684;&#x8FDE;&#x63A5;&#x6C60;&#x7684;&#x5F15;&#x7528; - &#x8FD9;&#x4E9B;&#x8FDE;&#x63A5;&#x6C60;&#x5F80;&#x5F80;&#x4E0D;&#x80FD;&#x8DE8;&#x8FDB;&#x7A0B;&#x8FB9;&#x754C;&#x79FB;&#x690D;&#x3002;</span><span class="yiyi-st" id="yiyi-64">&#x914D;&#x7F6E;&#x4E3A;&#x4E0D;&#x4F7F;&#x7528;&#x6C60;&#x7684;<a class="reference internal" href="#sqlalchemy.engine.Engine" title="sqlalchemy.engine.Engine"><code class="xref py py-class docutils literal"><span class="pre">Engine</span></code></a>&#xFF08;&#x901A;&#x8FC7;&#x4F7F;&#x7528;<a class="reference internal" href="pooling.html#sqlalchemy.pool.NullPool" title="sqlalchemy.pool.NullPool"><code class="xref py py-class docutils literal"><span class="pre">NullPool</span></code></a>&#x5B9E;&#x73B0;&#xFF09;&#x4E0D;&#x5177;&#x5907;&#x6B64;&#x8981;&#x6C42;&#x3002;</span></p><p><span class="yiyi-st" id="yiyi-65">&#x8BE5;&#x5F15;&#x64CE;&#x53EF;&#x4EE5;&#x76F4;&#x63A5;&#x7528;&#x4E8E;&#x5411;&#x6570;&#x636E;&#x5E93;&#x53D1;&#x51FA;SQL&#x3002;</span><span class="yiyi-st" id="yiyi-66">&#x6700;&#x901A;&#x7528;&#x7684;&#x65B9;&#x6CD5;&#x662F;&#x9996;&#x5148;&#x83B7;&#x53D6;&#x8FDE;&#x63A5;&#x8D44;&#x6E90;&#xFF0C;&#x901A;&#x8FC7;<a class="reference internal" href="#sqlalchemy.engine.Engine.connect" title="sqlalchemy.engine.Engine.connect"><code class="xref py py-meth docutils literal"><span class="pre">Engine.connect()</span></code></a>&#x65B9;&#x6CD5;&#x83B7;&#x53D6;&#x8FDE;&#x63A5;&#x8D44;&#x6E90;&#xFF1A;</span></p><div class="highlight-python"><div class="highlight"><pre><span></span><span class="n">connection</span> <span class="o">=</span> <span class="n">engine</span><span class="o">.</span><span class="n">connect</span><span class="p">()</span>
<span class="n">result</span> <span class="o">=</span> <span class="n">connection</span><span class="o">.</span><span class="n">execute</span><span class="p">(</span><span class="s2">&quot;select username from users&quot;</span><span class="p">)</span>
<span class="k">for</span> <span class="n">row</span> <span class="ow">in</span> <span class="n">result</span><span class="p">:</span>
    <span class="k">print</span><span class="p">(</span><span class="s2">&quot;username:&quot;</span><span class="p">,</span> <span class="n">row</span><span class="p">[</span><span class="s1">&apos;username&apos;</span><span class="p">])</span>
<span class="n">connection</span><span class="o">.</span><span class="n">close</span><span class="p">()</span></pre></div></div><p><span class="yiyi-st" id="yiyi-67">&#x8FDE;&#x63A5;&#x662F;<a class="reference internal" href="#sqlalchemy.engine.Connection" title="sqlalchemy.engine.Connection"><code class="xref py py-class docutils literal"><span class="pre">Connection</span></code></a>&#x7684;&#x4E00;&#x4E2A;&#x5B9E;&#x4F8B;&#xFF0C;&#x5B83;&#x662F;&#x5B9E;&#x9645;DBAPI&#x8FDE;&#x63A5;&#x7684;<strong>&#x4EE3;&#x7406;</strong>&#x5BF9;&#x8C61;&#x3002;</span><span class="yiyi-st" id="yiyi-68">&#x5728;&#x521B;&#x5EFA;<a class="reference internal" href="#sqlalchemy.engine.Connection" title="sqlalchemy.engine.Connection"><code class="xref py py-class docutils literal"><span class="pre">Connection</span></code></a>&#x65F6;&#x4ECE;&#x8FDE;&#x63A5;&#x6C60;&#x4E2D;&#x68C0;&#x7D22;DBAPI&#x8FDE;&#x63A5;&#x3002;</span></p><p><span class="yiyi-st" id="yiyi-69">&#x8FD4;&#x56DE;&#x7684;&#x7ED3;&#x679C;&#x662F;<a class="reference internal" href="#sqlalchemy.engine.ResultProxy" title="sqlalchemy.engine.ResultProxy"><code class="xref py py-class docutils literal"><span class="pre">ResultProxy</span></code></a>&#x7684;&#x4E00;&#x4E2A;&#x5B9E;&#x4F8B;&#xFF0C;&#x5B83;&#x5F15;&#x7528;&#x4E86;&#x4E00;&#x4E2A;DBAPI&#x6E38;&#x6807;&#x5E76;&#x63D0;&#x4F9B;&#x4E86;&#x4E00;&#x4E2A;&#x4E0E;DBAPI&#x6E38;&#x6807;&#x7684;&#x63A5;&#x53E3;&#x57FA;&#x672C;&#x517C;&#x5BB9;&#x7684;&#x63A5;&#x53E3;&#x3002;</span><span class="yiyi-st" id="yiyi-70">&#x5F53;&#x5B83;&#x7684;&#x6240;&#x6709;&#x7ED3;&#x679C;&#x884C;&#xFF08;&#x5982;&#x679C;&#x6709;&#xFF09;&#x7528;&#x5C3D;&#x65F6;&#xFF0C;DBAPI&#x6E38;&#x6807;&#x5C06;&#x7531;<a class="reference internal" href="#sqlalchemy.engine.ResultProxy" title="sqlalchemy.engine.ResultProxy"><code class="xref py py-class docutils literal"><span class="pre">ResultProxy</span></code></a>&#x5173;&#x95ED;&#x3002;</span><span class="yiyi-st" id="yiyi-71">A <a class="reference internal" href="#sqlalchemy.engine.ResultProxy" title="sqlalchemy.engine.ResultProxy"><code class="xref py py-class docutils literal"><span class="pre">ResultProxy</span></code></a> that returns no rows, such as that of an UPDATE statement (without any returned rows), releases cursor resources immediately upon construction.</span></p><p><span class="yiyi-st" id="yiyi-72">&#x5F53;&#x8C03;&#x7528;<a class="reference internal" href="#sqlalchemy.engine.Connection.close" title="sqlalchemy.engine.Connection.close"><code class="xref py py-meth docutils literal"><span class="pre">close()</span></code></a>&#x65B9;&#x6CD5;&#x65F6;&#xFF0C;&#x5F15;&#x7528;&#x7684;DBAPI&#x8FDE;&#x63A5;&#x5C06;<a class="reference internal" href="glossary.html#term-released"><span class="xref std std-term">released</span></a>&#x5230;&#x8FDE;&#x63A5;&#x6C60;&#x4E2D;&#x3002;</span><span class="yiyi-st" id="yiyi-73">&#x4ECE;&#x6570;&#x636E;&#x5E93;&#x672C;&#x8EAB;&#x7684;&#x89D2;&#x5EA6;&#x6765;&#x770B;&#xFF0C;&#x5047;&#x8BBE;&#x6C60;&#x5316;&#x6B63;&#x5728;&#x88AB;&#x4F7F;&#x7528;&#xFF0C;&#x6CA1;&#x6709;&#x4EC0;&#x4E48;&#x662F;&#x201C;&#x5C01;&#x95ED;&#x7684;&#x201D;&#x3002;</span><span class="yiyi-st" id="yiyi-74">&#x6C60;&#x5316;&#x673A;&#x5236;&#x5728;DBAPI&#x8FDE;&#x63A5;&#x4E0A;&#x53D1;&#x51FA;&#x4E00;&#x4E2A;<code class="docutils literal"><span class="pre">rollback()</span></code>&#x8C03;&#x7528;&#xFF0C;&#x4EE5;&#x4FBF;&#x5220;&#x9664;&#x4EFB;&#x4F55;&#x4E8B;&#x52A1;&#x72B6;&#x6001;&#x6216;&#x9501;&#xFF0C;&#x5E76;&#x4E14;&#x8FDE;&#x63A5;&#x5DF2;&#x51C6;&#x5907;&#x597D;&#x8FDB;&#x884C;&#x4E0B;&#x4E00;&#x6B21;&#x4F7F;&#x7528;&#x3002;</span></p><p><span class="yiyi-st" id="yiyi-75">&#x4E0A;&#x8FF0;&#x8FC7;&#x7A0B;&#x53EF;&#x4EE5;&#x901A;&#x8FC7;&#x4F7F;&#x7528;<a class="reference internal" href="#sqlalchemy.engine.Engine" title="sqlalchemy.engine.Engine"><code class="xref py py-class docutils literal"><span class="pre">Engine</span></code></a>&#x672C;&#x8EAB;&#x7684;<a class="reference internal" href="#sqlalchemy.engine.Engine.execute" title="sqlalchemy.engine.Engine.execute"><code class="xref py py-meth docutils literal"><span class="pre">execute()</span></code></a>&#x65B9;&#x6CD5;&#x4EE5;&#x7B80;&#x5199;&#x7684;&#x65B9;&#x5F0F;&#x6267;&#x884C;&#xFF1A;</span></p><div class="highlight-python"><div class="highlight"><pre><span></span><span class="n">result</span> <span class="o">=</span> <span class="n">engine</span><span class="o">.</span><span class="n">execute</span><span class="p">(</span><span class="s2">&quot;select username from users&quot;</span><span class="p">)</span>
<span class="k">for</span> <span class="n">row</span> <span class="ow">in</span> <span class="n">result</span><span class="p">:</span>
    <span class="k">print</span><span class="p">(</span><span class="s2">&quot;username:&quot;</span><span class="p">,</span> <span class="n">row</span><span class="p">[</span><span class="s1">&apos;username&apos;</span><span class="p">])</span></pre></div></div><p><span class="yiyi-st" id="yiyi-76">&#x5728;&#x4E0A;&#x9762;&#xFF0C;<a class="reference internal" href="#sqlalchemy.engine.Engine.execute" title="sqlalchemy.engine.Engine.execute"><code class="xref py py-meth docutils literal"><span class="pre">execute()</span></code></a>&#x65B9;&#x6CD5;&#x81EA;&#x5DF1;&#x83B7;&#x53D6;&#x4E00;&#x4E2A;&#x65B0;&#x7684;<a class="reference internal" href="#sqlalchemy.engine.Connection" title="sqlalchemy.engine.Connection"><code class="xref py py-class docutils literal"><span class="pre">Connection</span></code></a>&#xFF0C;&#x7528;&#x8BE5;&#x5BF9;&#x8C61;&#x6267;&#x884C;&#x8BED;&#x53E5;&#x5E76;&#x8FD4;&#x56DE;<a class="reference internal" href="#sqlalchemy.engine.ResultProxy" title="sqlalchemy.engine.ResultProxy"><code class="xref py py-class docutils literal"><span class="pre">ResultProxy</span></code></a>&#x3002;</span><span class="yiyi-st" id="yiyi-77">&#x5728;&#x8FD9;&#x79CD;&#x60C5;&#x51B5;&#x4E0B;&#xFF0C;<a class="reference internal" href="#sqlalchemy.engine.ResultProxy" title="sqlalchemy.engine.ResultProxy"><code class="xref py py-class docutils literal"><span class="pre">ResultProxy</span></code></a>&#x5305;&#x542B;&#x4E00;&#x4E2A;&#x79F0;&#x4E3A;<code class="docutils literal"><span class="pre">close_with_result</span></code>&#x7684;&#x7279;&#x6B8A;&#x6807;&#x5FD7;&#xFF0C;&#x5B83;&#x6307;&#x793A;&#x5F53;&#x5176;&#x5E95;&#x5C42;DBAPI&#x6E38;&#x6807;&#x5173;&#x95ED;&#x65F6;&#xFF0C;<a class="reference internal" href="#sqlalchemy.engine.Connection" title="sqlalchemy.engine.Connection"><code class="xref py py-class docutils literal"><span class="pre">Connection</span></code></a>&#x4E5F;&#x5173;&#x95ED;&#xFF0C;&#x5B83;&#x518D;&#x6B21;&#x5C06;DBAPI&#x8FDE;&#x63A5;&#x8FD4;&#x56DE;&#x5230;&#x8FDE;&#x63A5;&#x6C60;&#xFF0C;&#x91CA;&#x653E;&#x4E8B;&#x52A1;&#x8D44;&#x6E90;&#x3002;</span></p><p><span class="yiyi-st" id="yiyi-78">&#x5982;&#x679C;<a class="reference internal" href="#sqlalchemy.engine.ResultProxy" title="sqlalchemy.engine.ResultProxy"><code class="xref py py-class docutils literal"><span class="pre">ResultProxy</span></code></a>&#x53EF;&#x80FD;&#x5305;&#x542B;&#x884C;&#xFF0C;&#x5219;&#x53EF;&#x4EE5;&#x6307;&#x793A;&#x660E;&#x786E;&#x5730;&#x5173;&#x95ED;&#x5176;&#x8D44;&#x6E90;&#xFF1A;</span></p><div class="highlight-python"><div class="highlight"><pre><span></span><span class="n">result</span><span class="o">.</span><span class="n">close</span><span class="p">()</span></pre></div></div><p><span class="yiyi-st" id="yiyi-79">&#x5982;&#x679C;<a class="reference internal" href="#sqlalchemy.engine.ResultProxy" title="sqlalchemy.engine.ResultProxy"><code class="xref py py-class docutils literal"><span class="pre">ResultProxy</span></code></a>&#x5177;&#x6709;&#x5F85;&#x5904;&#x7406;&#x7684;&#x884C;&#x5E76;&#x4E14;&#x672A;&#x88AB;&#x5173;&#x95ED;&#xFF0C;&#x5E94;&#x7528;&#x7A0B;&#x5E8F;&#x5C06;&#x53D6;&#x6D88;&#x5F15;&#x7528;&#xFF0C;&#x5219;Python&#x5783;&#x573E;&#x56DE;&#x6536;&#x6700;&#x7EC8;&#x4F1A;&#x5173;&#x95ED;&#x6E38;&#x6807;&#x5E76;&#x89E6;&#x53D1;&#x6C60;&#x7684;DBAPI&#x8FDE;&#x63A5;&#x8D44;&#x6E90;&#x8FD4;&#x56DE;&#x5230;&#x6C60;&#xFF08;SQLAlchemy&#x901A;&#x8FC7;&#x4F7F;&#x7528;weakref&#x56DE;&#x8C03;&#x6765;&#x5B9E;&#x73B0;&#x8FD9;&#x4E00;&#x70B9; -  <em>&#x4ECE;&#x6765;&#x6CA1;&#x6709;<code class="docutils literal"><span class="pre">__del__</span></code>&#x65B9;&#x6CD5;&#xFF09; - &#x4F46;&#x4F9D;&#x9760;Python&#x5783;&#x573E;&#x56DE;&#x6536;&#x6765;&#x7BA1;&#x7406;&#x8D44;&#x6E90;&#x6C38;&#x8FDC;&#x4E0D;&#x662F;&#x4E00;&#x4E2A;&#x597D;&#x4E3B;&#x610F;&#x3002;</em></span></p><p><span class="yiyi-st" id="yiyi-80">&#x6211;&#x4EEC;&#x4E0A;&#x9762;&#x7684;&#x4F8B;&#x5B50;&#x8BF4;&#x660E;&#x4E86;&#x6587;&#x672C;SQL&#x5B57;&#x7B26;&#x4E32;&#x7684;&#x6267;&#x884C;&#x3002;</span><span class="yiyi-st" id="yiyi-81"><a class="reference internal" href="#sqlalchemy.engine.Connection.execute" title="sqlalchemy.engine.Connection.execute"><code class="xref py py-meth docutils literal"><span class="pre">execute()</span></code></a>&#x65B9;&#x6CD5;&#x5F53;&#x7136;&#x53EF;&#x4EE5;&#x9002;&#x7528;&#x66F4;&#x591A;&#xFF0C;&#x5305;&#x62EC;<a class="reference internal" href="tutorial.html"><span>SQL Expression Language Tutorial</span></a>&#x4E2D;&#x63CF;&#x8FF0;&#x7684;&#x5404;&#x79CD;SQL&#x8868;&#x8FBE;&#x5F0F;&#x7ED3;&#x6784;&#x3002;</span></p></div><div class="section" id="using-transactions"><h2><span class="yiyi-st" id="yiyi-82">&#x4F7F;&#x7528;&#x4EA4;&#x6613;<a class="headerlink" href="#using-transactions" title="Permalink to this headline">&#xB6;</a></span></h2><div class="admonition note"><p class="first admonition-title"><span class="yiyi-st" id="yiyi-83">&#x6CE8;&#x610F;</span></p><p class="last"><span class="yiyi-st" id="yiyi-84">&#x672C;&#x8282;&#x4ECB;&#x7ECD;&#x5982;&#x4F55;&#x5728;&#x76F4;&#x63A5;&#x4F7F;&#x7528;<a class="reference internal" href="#sqlalchemy.engine.Engine" title="sqlalchemy.engine.Engine"><code class="xref py py-class docutils literal"><span class="pre">Engine</span></code></a>&#x548C;<a class="reference internal" href="#sqlalchemy.engine.Connection" title="sqlalchemy.engine.Connection"><code class="xref py py-class docutils literal"><span class="pre">Connection</span></code></a>&#x5BF9;&#x8C61;&#x65F6;&#x4F7F;&#x7528;&#x4E8B;&#x52A1;&#x3002;</span><span class="yiyi-st" id="yiyi-85">&#x5F53;&#x4F7F;&#x7528;SQLAlchemy ORM&#x65F6;&#xFF0C;&#x7528;&#x4E8E;&#x4E8B;&#x52A1;&#x63A7;&#x5236;&#x7684;&#x516C;&#x5171;API&#x662F;&#x901A;&#x8FC7;<a class="reference internal" href="orm_session_api.html#sqlalchemy.orm.session.Session" title="sqlalchemy.orm.session.Session"><code class="xref py py-class docutils literal"><span class="pre">Session</span></code></a>&#x5BF9;&#x8C61;&#x8FDB;&#x884C;&#x7684;&#xFF0C;&#x5B83;&#x5728;&#x5185;&#x90E8;&#x4F7F;&#x7528;<a class="reference internal" href="#sqlalchemy.engine.Transaction" title="sqlalchemy.engine.Transaction"><code class="xref py py-class docutils literal"><span class="pre">Transaction</span></code></a>&#x5BF9;&#x8C61;&#x3002;</span><span class="yiyi-st" id="yiyi-86">&#x6709;&#x5173;&#x66F4;&#x591A;&#x4FE1;&#x606F;&#xFF0C;&#x8BF7;&#x53C2;&#x9605;<a class="reference internal" href="orm_session_transaction.html#unitofwork-transaction"><span>Managing Transactions</span></a>&#x3002;</span></p></div><p><span class="yiyi-st" id="yiyi-87"><a class="reference internal" href="#sqlalchemy.engine.Connection" title="sqlalchemy.engine.Connection"><code class="xref py py-class docutils literal"><span class="pre">Connection</span></code></a>&#x5BF9;&#x8C61;&#x63D0;&#x4F9B;&#x4E86;&#x4E00;&#x4E2A;&#x8FD4;&#x56DE;<a class="reference internal" href="#sqlalchemy.engine.Transaction" title="sqlalchemy.engine.Transaction"><code class="xref py py-class docutils literal"><span class="pre">Transaction</span></code></a>&#x5BF9;&#x8C61;&#x7684;<a class="reference internal" href="#sqlalchemy.engine.Connection.begin" title="sqlalchemy.engine.Connection.begin"><code class="xref py py-meth docutils literal"><span class="pre">begin()</span></code></a>&#x65B9;&#x6CD5;&#x3002;</span><span class="yiyi-st" id="yiyi-88">This object is usually used within a try/except clause so that it is guaranteed to invoke <a class="reference internal" href="#sqlalchemy.engine.Transaction.rollback" title="sqlalchemy.engine.Transaction.rollback"><code class="xref py py-meth docutils literal"><span class="pre">Transaction.rollback()</span></code></a> or <a class="reference internal" href="#sqlalchemy.engine.Transaction.commit" title="sqlalchemy.engine.Transaction.commit"><code class="xref py py-meth docutils literal"><span class="pre">Transaction.commit()</span></code></a>:</span></p><div class="highlight-python"><div class="highlight"><pre><span></span><span class="n">connection</span> <span class="o">=</span> <span class="n">engine</span><span class="o">.</span><span class="n">connect</span><span class="p">()</span>
<span class="n">trans</span> <span class="o">=</span> <span class="n">connection</span><span class="o">.</span><span class="n">begin</span><span class="p">()</span>
<span class="k">try</span><span class="p">:</span>
    <span class="n">r1</span> <span class="o">=</span> <span class="n">connection</span><span class="o">.</span><span class="n">execute</span><span class="p">(</span><span class="n">table1</span><span class="o">.</span><span class="n">select</span><span class="p">())</span>
    <span class="n">connection</span><span class="o">.</span><span class="n">execute</span><span class="p">(</span><span class="n">table1</span><span class="o">.</span><span class="n">insert</span><span class="p">(),</span> <span class="n">col1</span><span class="o">=</span><span class="mi">7</span><span class="p">,</span> <span class="n">col2</span><span class="o">=</span><span class="s1">&apos;this is some data&apos;</span><span class="p">)</span>
    <span class="n">trans</span><span class="o">.</span><span class="n">commit</span><span class="p">()</span>
<span class="k">except</span><span class="p">:</span>
    <span class="n">trans</span><span class="o">.</span><span class="n">rollback</span><span class="p">()</span>
    <span class="k">raise</span></pre></div></div><p><span class="yiyi-st" id="yiyi-89">&#x4F7F;&#x7528;&#x4E0A;&#x4E0B;&#x6587;&#x7BA1;&#x7406;&#x5668;&#x53EF;&#x4EE5;&#x66F4;&#x7B80;&#x6D01;&#x5730;&#x521B;&#x5EFA;&#x4E0A;&#x8FF0;&#x5757;&#xFF0C;&#x53EF;&#x4EE5;&#x4F7F;&#x7528;<a class="reference internal" href="#sqlalchemy.engine.Engine" title="sqlalchemy.engine.Engine"><code class="xref py py-class docutils literal"><span class="pre">Engine</span></code></a>&#xFF1A;</span></p><div class="highlight-python"><div class="highlight"><pre><span></span><span class="c1"># runs a transaction</span>
<span class="k">with</span> <span class="n">engine</span><span class="o">.</span><span class="n">begin</span><span class="p">()</span> <span class="k">as</span> <span class="n">connection</span><span class="p">:</span>
    <span class="n">r1</span> <span class="o">=</span> <span class="n">connection</span><span class="o">.</span><span class="n">execute</span><span class="p">(</span><span class="n">table1</span><span class="o">.</span><span class="n">select</span><span class="p">())</span>
    <span class="n">connection</span><span class="o">.</span><span class="n">execute</span><span class="p">(</span><span class="n">table1</span><span class="o">.</span><span class="n">insert</span><span class="p">(),</span> <span class="n">col1</span><span class="o">=</span><span class="mi">7</span><span class="p">,</span> <span class="n">col2</span><span class="o">=</span><span class="s1">&apos;this is some data&apos;</span><span class="p">)</span></pre></div></div><p><span class="yiyi-st" id="yiyi-90">&#x6216;&#x8005;&#x4ECE;<a class="reference internal" href="#sqlalchemy.engine.Connection" title="sqlalchemy.engine.Connection"><code class="xref py py-class docutils literal"><span class="pre">Connection</span></code></a>&#xFF0C;&#x5728;&#x8FD9;&#x79CD;&#x60C5;&#x51B5;&#x4E0B;&#x4E5F;&#x53EF;&#x4EE5;&#x4F7F;&#x7528;<a class="reference internal" href="#sqlalchemy.engine.Transaction" title="sqlalchemy.engine.Transaction"><code class="xref py py-class docutils literal"><span class="pre">Transaction</span></code></a>&#x5BF9;&#x8C61;&#xFF1A;</span></p><div class="highlight-python"><div class="highlight"><pre><span></span><span class="k">with</span> <span class="n">connection</span><span class="o">.</span><span class="n">begin</span><span class="p">()</span> <span class="k">as</span> <span class="n">trans</span><span class="p">:</span>
    <span class="n">r1</span> <span class="o">=</span> <span class="n">connection</span><span class="o">.</span><span class="n">execute</span><span class="p">(</span><span class="n">table1</span><span class="o">.</span><span class="n">select</span><span class="p">())</span>
    <span class="n">connection</span><span class="o">.</span><span class="n">execute</span><span class="p">(</span><span class="n">table1</span><span class="o">.</span><span class="n">insert</span><span class="p">(),</span> <span class="n">col1</span><span class="o">=</span><span class="mi">7</span><span class="p">,</span> <span class="n">col2</span><span class="o">=</span><span class="s1">&apos;this is some data&apos;</span><span class="p">)</span></pre></div></div><div class="section" id="nesting-of-transaction-blocks"><h3><span class="yiyi-st" id="yiyi-91">&#x5D4C;&#x5957;&#x4E8B;&#x52A1;&#x5757;<a class="headerlink" href="#nesting-of-transaction-blocks" title="Permalink to this headline">&#xB6;</a></span></h3><p><span class="yiyi-st" id="yiyi-92"><a class="reference internal" href="#sqlalchemy.engine.Transaction" title="sqlalchemy.engine.Transaction"><code class="xref py py-class docutils literal"><span class="pre">Transaction</span></code></a>&#x5BF9;&#x8C61;&#x8FD8;&#x901A;&#x8FC7;&#x8DDF;&#x8E2A;&#x6700;&#x5916;&#x9762;&#x7684;&#x5F00;&#x59CB;/&#x63D0;&#x4EA4;&#x5BF9;&#x6765;&#x5904;&#x7406;&#x201C;&#x5D4C;&#x5957;&#x201D;&#x884C;&#x4E3A;&#x3002;</span><span class="yiyi-st" id="yiyi-93">In this example, two functions both issue a transaction on a <a class="reference internal" href="#sqlalchemy.engine.Connection" title="sqlalchemy.engine.Connection"><code class="xref py py-class docutils literal"><span class="pre">Connection</span></code></a>, but only the outermost <a class="reference internal" href="#sqlalchemy.engine.Transaction" title="sqlalchemy.engine.Transaction"><code class="xref py py-class docutils literal"><span class="pre">Transaction</span></code></a> object actually takes effect when it is committed.</span></p><div class="highlight-python+sql"><div class="highlight"><pre><span></span><span class="c1"># method_a starts a transaction and calls method_b</span>
<span class="k">def</span> <span class="nf">method_a</span><span class="p">(</span><span class="n">connection</span><span class="p">):</span>
    <span class="n">trans</span> <span class="o">=</span> <span class="n">connection</span><span class="o">.</span><span class="n">begin</span><span class="p">()</span> <span class="c1"># open a transaction</span>
    <span class="k">try</span><span class="p">:</span>
        <span class="n">method_b</span><span class="p">(</span><span class="n">connection</span><span class="p">)</span>
        <span class="n">trans</span><span class="o">.</span><span class="n">commit</span><span class="p">()</span>  <span class="c1"># transaction is committed here</span>
    <span class="k">except</span><span class="p">:</span>
        <span class="n">trans</span><span class="o">.</span><span class="n">rollback</span><span class="p">()</span> <span class="c1"># this rolls back the transaction unconditionally</span>
        <span class="k">raise</span>

<span class="c1"># method_b also starts a transaction</span>
<span class="k">def</span> <span class="nf">method_b</span><span class="p">(</span><span class="n">connection</span><span class="p">):</span>
    <span class="n">trans</span> <span class="o">=</span> <span class="n">connection</span><span class="o">.</span><span class="n">begin</span><span class="p">()</span> <span class="c1"># open a transaction - this runs in the context of method_a&apos;s transaction</span>
    <span class="k">try</span><span class="p">:</span>
        <span class="n">connection</span><span class="o">.</span><span class="n">execute</span><span class="p">(</span><span class="s2">&quot;insert into mytable values (&apos;bat&apos;, &apos;lala&apos;)&quot;</span><span class="p">)</span>
        <span class="n">connection</span><span class="o">.</span><span class="n">execute</span><span class="p">(</span><span class="n">mytable</span><span class="o">.</span><span class="n">insert</span><span class="p">(),</span> <span class="n">col1</span><span class="o">=</span><span class="s1">&apos;bat&apos;</span><span class="p">,</span> <span class="n">col2</span><span class="o">=</span><span class="s1">&apos;lala&apos;</span><span class="p">)</span>
        <span class="n">trans</span><span class="o">.</span><span class="n">commit</span><span class="p">()</span>  <span class="c1"># transaction is not committed yet</span>
    <span class="k">except</span><span class="p">:</span>
        <span class="n">trans</span><span class="o">.</span><span class="n">rollback</span><span class="p">()</span> <span class="c1"># this rolls back the transaction unconditionally</span>
        <span class="k">raise</span>

<span class="c1"># open a Connection and call method_a</span>
<span class="n">conn</span> <span class="o">=</span> <span class="n">engine</span><span class="o">.</span><span class="n">connect</span><span class="p">()</span>
<span class="n">method_a</span><span class="p">(</span><span class="n">conn</span><span class="p">)</span>
<span class="n">conn</span><span class="o">.</span><span class="n">close</span><span class="p">()</span></pre></div></div><p><span class="yiyi-st" id="yiyi-94">&#x4E0A;&#x9762;&#xFF0C;&#x9996;&#x5148;&#x8C03;&#x7528;<code class="docutils literal"><span class="pre">method_a</span></code>&#xFF0C;&#x5B83;&#x8C03;&#x7528;<code class="docutils literal"><span class="pre">connection.begin()</span></code>&#x3002;</span><span class="yiyi-st" id="yiyi-95">&#x7136;&#x540E;&#x5B83;&#x8C03;&#x7528;<code class="docutils literal"><span class="pre">method_b</span></code>&#x3002;</span><span class="yiyi-st" id="yiyi-96"><code class="docutils literal"><span class="pre">method_b</span></code>&#x8C03;&#x7528;<code class="docutils literal"><span class="pre">connection.begin()</span></code>&#x65F6;&#xFF0C;&#x5B83;&#x53EA;&#x4F1A;&#x589E;&#x52A0;&#x4E00;&#x4E2A;&#x8BA1;&#x6570;&#x5668;&#xFF0C;&#x5B83;&#x5728;&#x8C03;&#x7528;<code class="docutils literal"><span class="pre">commit()</span></code>&#x65F6;&#x9012;&#x51CF;&#x3002;</span><span class="yiyi-st" id="yiyi-97">&#x5982;&#x679C;<code class="docutils literal"><span class="pre">method_a</span></code>&#x6216;<code class="docutils literal"><span class="pre">method_b</span></code>&#x8C03;&#x7528;<code class="docutils literal"><span class="pre">rollback()</span></code>&#xFF0C;&#x5219;&#x6574;&#x4E2A;&#x4E8B;&#x52A1;&#x56DE;&#x6EDA;&#x3002;</span><span class="yiyi-st" id="yiyi-98">&#x5728;<code class="docutils literal"><span class="pre">method_a</span></code>&#x8C03;&#x7528;<code class="docutils literal"><span class="pre">commit()</span></code>&#x65B9;&#x6CD5;&#x4E4B;&#x524D;&#xFF0C;&#x4E8B;&#x52A1;&#x4E0D;&#x4F1A;&#x88AB;&#x63D0;&#x4EA4;&#x3002;</span><span class="yiyi-st" id="yiyi-99">&#x8FD9;&#x79CD;&#x201C;&#x5D4C;&#x5957;&#x201D;&#x884C;&#x4E3A;&#x5141;&#x8BB8;&#x521B;&#x5EFA;&#x4E00;&#x4E9B;&#x529F;&#x80FD;&#xFF0C;&#x201C;&#x4FDD;&#x8BC1;&#x201D;&#x4E00;&#x9879;&#x4EA4;&#x6613;&#x5982;&#x679C;&#x5C1A;&#x4E0D;&#x53EF;&#x7528;&#xFF0C;&#x5C06;&#x81EA;&#x52A8;&#x53C2;&#x4E0E;&#x5C01;&#x95ED;&#x4EA4;&#x6613;&#xFF08;&#x5982;&#x679C;&#x5B58;&#x5728;&#x7684;&#x8BDD;&#xFF09;&#x3002;</span></p></div></div><div class="section" id="understanding-autocommit"><h2><span class="yiyi-st" id="yiyi-100">&#x4E86;&#x89E3;&#x81EA;&#x52A8;&#x63D0;&#x4EA4;<a class="headerlink" href="#understanding-autocommit" title="Permalink to this headline">&#xB6;</a></span></h2><p><span class="yiyi-st" id="yiyi-101">&#x524D;&#x9762;&#x7684;&#x4E8B;&#x52A1;&#x793A;&#x4F8B;&#x8BF4;&#x660E;&#x4E86;&#x5982;&#x4F55;&#x4F7F;&#x7528;<a class="reference internal" href="#sqlalchemy.engine.Transaction" title="sqlalchemy.engine.Transaction"><code class="xref py py-class docutils literal"><span class="pre">Transaction</span></code></a>&#xFF0C;&#x4EE5;&#x4FBF;&#x591A;&#x6B21;&#x6267;&#x884C;&#x53EF;&#x4EE5;&#x53C2;&#x4E0E;&#x540C;&#x4E00;&#x4E2A;&#x4E8B;&#x52A1;&#x3002;</span><span class="yiyi-st" id="yiyi-102">&#x5F53;&#x6211;&#x4EEC;&#x5728;&#x4E0D;&#x4F7F;&#x7528;<a class="reference internal" href="#sqlalchemy.engine.Transaction" title="sqlalchemy.engine.Transaction"><code class="xref py py-class docutils literal"><span class="pre">Transaction</span></code></a>&#x7684;&#x60C5;&#x51B5;&#x4E0B;&#x53D1;&#x51FA;INSERT&#xFF0C;UPDATE&#x6216;DELETE&#x8C03;&#x7528;&#x65F6;&#x4F1A;&#x53D1;&#x751F;&#x4EC0;&#x4E48;&#xFF1F;</span><span class="yiyi-st" id="yiyi-103">While some DBAPI implementations provide various special &#x201C;non-transactional&#x201D; modes, the core behavior of DBAPI per PEP-0249 is that a <em>transaction is always in progress</em>, providing only <code class="docutils literal"><span class="pre">rollback()</span></code> and <code class="docutils literal"><span class="pre">commit()</span></code> methods but no <code class="docutils literal"><span class="pre">begin()</span></code>. </span><span class="yiyi-st" id="yiyi-104">SQLAlchemy&#x5047;&#x5B9A;&#x5BF9;&#x4E8E;&#x4EFB;&#x4F55;&#x7ED9;&#x5B9A;&#x7684;DBAPI&#x90FD;&#x662F;&#x8FD9;&#x79CD;&#x60C5;&#x51B5;&#x3002;</span></p><p><span class="yiyi-st" id="yiyi-105">&#x9274;&#x4E8E;&#x8FD9;&#x4E00;&#x8981;&#x6C42;&#xFF0C;SQLAlchemy&#x5B9E;&#x73B0;&#x4E86;&#x81EA;&#x5DF1;&#x7684;&#x201C;&#x81EA;&#x52A8;&#x63D0;&#x4EA4;&#x201D;&#x529F;&#x80FD;&#xFF0C;&#x8BE5;&#x529F;&#x80FD;&#x5728;&#x6240;&#x6709;&#x540E;&#x7AEF;&#x5B8C;&#x5168;&#x4E00;&#x81F4;&#x5730;&#x5DE5;&#x4F5C;&#x3002;</span><span class="yiyi-st" id="yiyi-106">&#x8FD9;&#x662F;&#x901A;&#x8FC7;&#x68C0;&#x6D4B;&#x4EE3;&#x8868;&#x6570;&#x636E;&#x66F4;&#x6539;&#x64CD;&#x4F5C;&#xFF08;&#x5373;INSERT&#xFF0C;UPDATE&#xFF0C;DELETE&#xFF09;&#x4EE5;&#x53CA;&#x6570;&#x636E;&#x5B9A;&#x4E49;&#x8BED;&#x8A00;&#xFF08;DDL&#xFF09;&#x8BED;&#x53E5;&#xFF08;&#x5982;CREATE TABLE&#xFF0C;ALTER TABLE&#xFF09;&#x7684;&#x8BED;&#x53E5;&#xFF0C;&#x7136;&#x540E;&#x5728;&#x6CA1;&#x6709;&#x4E8B;&#x52A1;&#x6B63;&#x5728;&#x8FDB;&#x884C;&#x65F6;&#x81EA;&#x52A8;&#x53D1;&#x51FA;COMMIT &#x3002;</span><span class="yiyi-st" id="yiyi-107">&#x8BE5;&#x68C0;&#x6D4B;&#x57FA;&#x4E8E;&#x8BED;&#x53E5;&#x4E2D;&#x5B58;&#x5728;<code class="docutils literal"><span class="pre">autocommit=True</span></code>&#x6267;&#x884C;&#x9009;&#x9879;&#x3002;</span><span class="yiyi-st" id="yiyi-108">&#x5982;&#x679C;&#x8BED;&#x53E5;&#x662F;&#x7EAF;&#x6587;&#x672C;&#x8BED;&#x53E5;&#x5E76;&#x4E14;&#x672A;&#x8BBE;&#x7F6E;&#x6807;&#x5FD7;&#xFF0C;&#x5219;&#x4F7F;&#x7528;&#x6B63;&#x5219;&#x8868;&#x8FBE;&#x5F0F;&#x6765;&#x68C0;&#x6D4B;INSERT&#xFF0C;UPDATE&#xFF0C;DELETE&#x4EE5;&#x53CA;&#x9488;&#x5BF9;&#x7279;&#x5B9A;&#x540E;&#x7AEF;&#x7684;&#x5404;&#x79CD;&#x5176;&#x4ED6;&#x547D;&#x4EE4;&#xFF1A;</span></p><div class="highlight-python"><div class="highlight"><pre><span></span><span class="n">conn</span> <span class="o">=</span> <span class="n">engine</span><span class="o">.</span><span class="n">connect</span><span class="p">()</span>
<span class="n">conn</span><span class="o">.</span><span class="n">execute</span><span class="p">(</span><span class="s2">&quot;INSERT INTO users VALUES (1, &apos;john&apos;)&quot;</span><span class="p">)</span>  <span class="c1"># autocommits</span></pre></div></div><p><span class="yiyi-st" id="yiyi-109">&#x201C;&#x81EA;&#x52A8;&#x63D0;&#x4EA4;&#x201D;&#x529F;&#x80FD;&#x4EC5;&#x5728;&#x6CA1;&#x6709;&#x58F0;&#x660E;<a class="reference internal" href="#sqlalchemy.engine.Transaction" title="sqlalchemy.engine.Transaction"><code class="xref py py-class docutils literal"><span class="pre">Transaction</span></code></a>&#x65F6;&#x624D;&#x6709;&#x6548;&#x3002;</span><span class="yiyi-st" id="yiyi-110">&#x8FD9;&#x610F;&#x5473;&#x7740;&#x8BE5;&#x529F;&#x80FD;&#x901A;&#x5E38;&#x4E0D;&#x7528;&#x4E8E;ORM&#xFF0C;&#x56E0;&#x4E3A;&#x9ED8;&#x8BA4;&#x60C5;&#x51B5;&#x4E0B;<a class="reference internal" href="orm_session_api.html#sqlalchemy.orm.session.Session" title="sqlalchemy.orm.session.Session"><code class="xref py py-class docutils literal"><span class="pre">Session</span></code></a>&#x5BF9;&#x8C61;&#x59CB;&#x7EC8;&#x4FDD;&#x6301;&#x6B63;&#x5728;&#x8FDB;&#x884C;&#x7684;<a class="reference internal" href="#sqlalchemy.engine.Transaction" title="sqlalchemy.engine.Transaction"><code class="xref py py-class docutils literal"><span class="pre">Transaction</span></code></a>&#x3002;</span></p><p><span class="yiyi-st" id="yiyi-111">Full control of the &#x201C;autocommit&#x201D; behavior is available using the generative <a class="reference internal" href="#sqlalchemy.engine.Connection.execution_options" title="sqlalchemy.engine.Connection.execution_options"><code class="xref py py-meth docutils literal"><span class="pre">Connection.execution_options()</span></code></a> method provided on <a class="reference internal" href="#sqlalchemy.engine.Connection" title="sqlalchemy.engine.Connection"><code class="xref py py-class docutils literal"><span class="pre">Connection</span></code></a>, <a class="reference internal" href="#sqlalchemy.engine.Engine" title="sqlalchemy.engine.Engine"><code class="xref py py-class docutils literal"><span class="pre">Engine</span></code></a>, <a class="reference internal" href="selectable.html#sqlalchemy.sql.expression.Executable" title="sqlalchemy.sql.expression.Executable"><code class="xref py py-class docutils literal"><span class="pre">Executable</span></code></a>, using the &#x201C;autocommit&#x201D; flag which will turn on or off the autocommit for the selected scope. </span><span class="yiyi-st" id="yiyi-112">&#x4F8B;&#x5982;&#xFF0C;&#x8868;&#x793A;&#x63D0;&#x4EA4;&#x7684;&#x5B58;&#x50A8;&#x8FC7;&#x7A0B;&#x7684;<a class="reference internal" href="sqlelement.html#sqlalchemy.sql.expression.text" title="sqlalchemy.sql.expression.text"><code class="xref py py-func docutils literal"><span class="pre">text()</span></code></a>&#x6784;&#x9020;&#x53EF;&#x80FD;&#x4F1A;&#x4F7F;&#x7528;&#x5B83;&#xFF0C;&#x4EE5;&#x4FBF;SELECT&#x8BED;&#x53E5;&#x5C06;&#x53D1;&#x51FA;COMMIT&#xFF1A;</span></p><div class="highlight-python"><div class="highlight"><pre><span></span><span class="n">engine</span><span class="o">.</span><span class="n">execute</span><span class="p">(</span><span class="n">text</span><span class="p">(</span><span class="s2">&quot;SELECT my_mutating_procedure()&quot;</span><span class="p">)</span><span class="o">.</span><span class="n">execution_options</span><span class="p">(</span><span class="n">autocommit</span><span class="o">=</span><span class="bp">True</span><span class="p">))</span></pre></div></div></div><div class="section" id="connectionless-execution-implicit-execution"><h2><span class="yiyi-st" id="yiyi-113">&#x65E0;&#x8FDE;&#x63A5;&#x6267;&#x884C;&#xFF0C;&#x9690;&#x5F0F;&#x6267;&#x884C;<a class="headerlink" href="#connectionless-execution-implicit-execution" title="Permalink to this headline">&#xB6;</a></span></h2><p><span class="yiyi-st" id="yiyi-114">&#x56DE;&#x60F3;&#x4E00;&#x4E0B;&#x6211;&#x4EEC;&#x63D0;&#x5230;&#x7684;&#x7B2C;&#x4E00;&#x90E8;&#x5206;&#x662F;&#x5426;&#x6267;&#x884C;<a class="reference internal" href="#sqlalchemy.engine.Connection" title="sqlalchemy.engine.Connection"><code class="xref py py-class docutils literal"><span class="pre">Connection</span></code></a>&#x3002;</span><span class="yiyi-st" id="yiyi-115">&#x201C;&#x65E0;&#x8FDE;&#x63A5;&#x201D;&#x6267;&#x884C;&#x6307;&#x7684;&#x662F;&#x5728;&#x4E0D;&#x662F;<a class="reference internal" href="#sqlalchemy.engine.Connection" title="sqlalchemy.engine.Connection"><code class="xref py py-class docutils literal"><span class="pre">Connection</span></code></a>&#x7684;&#x5BF9;&#x8C61;&#x4E0A;&#x4F7F;&#x7528;<code class="docutils literal"><span class="pre">execute()</span></code>&#x65B9;&#x6CD5;&#x3002;</span><span class="yiyi-st" id="yiyi-116">&#x8FD9;&#x662F;&#x4F7F;&#x7528;<a class="reference internal" href="#sqlalchemy.engine.Engine" title="sqlalchemy.engine.Engine"><code class="xref py py-class docutils literal"><span class="pre">Engine</span></code></a>&#x7684;<a class="reference internal" href="#sqlalchemy.engine.Engine.execute" title="sqlalchemy.engine.Engine.execute"><code class="xref py py-meth docutils literal"><span class="pre">execute()</span></code></a>&#x65B9;&#x6CD5;&#x8BF4;&#x660E;&#x7684;&#xFF1A;</span></p><div class="highlight-python"><div class="highlight"><pre><span></span><span class="n">result</span> <span class="o">=</span> <span class="n">engine</span><span class="o">.</span><span class="n">execute</span><span class="p">(</span><span class="s2">&quot;select username from users&quot;</span><span class="p">)</span>
<span class="k">for</span> <span class="n">row</span> <span class="ow">in</span> <span class="n">result</span><span class="p">:</span>
    <span class="k">print</span><span class="p">(</span><span class="s2">&quot;username:&quot;</span><span class="p">,</span> <span class="n">row</span><span class="p">[</span><span class="s1">&apos;username&apos;</span><span class="p">])</span></pre></div></div><p><span class="yiyi-st" id="yiyi-117">&#x9664;&#x4E86;&#x201C;&#x65E0;&#x8FDE;&#x63A5;&#x201D;&#x6267;&#x884C;&#x4E4B;&#x5916;&#xFF0C;&#x8FD8;&#x53EF;&#x4EE5;&#x4F7F;&#x7528;&#x4EFB;&#x4F55;<a class="reference internal" href="selectable.html#sqlalchemy.sql.expression.Executable" title="sqlalchemy.sql.expression.Executable"><code class="xref py py-class docutils literal"><span class="pre">Executable</span></code></a>&#x7ED3;&#x6784;&#x7684;<a class="reference internal" href="selectable.html#sqlalchemy.sql.expression.Executable.execute" title="sqlalchemy.sql.expression.Executable.execute"><code class="xref py py-meth docutils literal"><span class="pre">execute()</span></code></a>&#x65B9;&#x6CD5;&#xFF0C;&#x8FD9;&#x662F;&#x652F;&#x6301;&#x6267;&#x884C;&#x7684;SQL&#x8868;&#x8FBE;&#x5F0F;&#x5BF9;&#x8C61;&#x7684;&#x6807;&#x8BB0;&#x3002;</span><span class="yiyi-st" id="yiyi-118">SQL&#x8868;&#x8FBE;&#x5F0F;&#x5BF9;&#x8C61;&#x672C;&#x8EAB;&#x5F15;&#x7528;&#x79F0;&#x4E3A;<strong>bind</strong>&#x7684;<a class="reference internal" href="#sqlalchemy.engine.Engine" title="sqlalchemy.engine.Engine"><code class="xref py py-class docutils literal"><span class="pre">Engine</span></code></a>&#x6216;<a class="reference internal" href="#sqlalchemy.engine.Connection" title="sqlalchemy.engine.Connection"><code class="xref py py-class docutils literal"><span class="pre">Connection</span></code></a>&#xFF0C;&#x5B83;&#x4F7F;&#x7528;&#x5B83;&#x6765;&#x63D0;&#x4F9B;&#x6240;&#x8C13;&#x7684;&#x201C;&#x9690;&#x5F0F;&#x201D;&#x6267;&#x884C;&#x670D;&#x52A1;&#x3002;</span></p><p><span class="yiyi-st" id="yiyi-119">&#x7ED9;&#x51FA;&#x5982;&#x4E0B;&#x8868;&#x683C;&#xFF1A;</span></p><div class="highlight-python"><div class="highlight"><pre><span></span><span class="kn">from</span> <span class="nn">sqlalchemy</span> <span class="kn">import</span> <span class="n">MetaData</span><span class="p">,</span> <span class="n">Table</span><span class="p">,</span> <span class="n">Column</span><span class="p">,</span> <span class="n">Integer</span>

<span class="n">meta</span> <span class="o">=</span> <span class="n">MetaData</span><span class="p">()</span>
<span class="n">users_table</span> <span class="o">=</span> <span class="n">Table</span><span class="p">(</span><span class="s1">&apos;users&apos;</span><span class="p">,</span> <span class="n">meta</span><span class="p">,</span>
    <span class="n">Column</span><span class="p">(</span><span class="s1">&apos;id&apos;</span><span class="p">,</span> <span class="n">Integer</span><span class="p">,</span> <span class="n">primary_key</span><span class="o">=</span><span class="bp">True</span><span class="p">),</span>
    <span class="n">Column</span><span class="p">(</span><span class="s1">&apos;name&apos;</span><span class="p">,</span> <span class="n">String</span><span class="p">(</span><span class="mi">50</span><span class="p">))</span>
<span class="p">)</span></pre></div></div><p><span class="yiyi-st" id="yiyi-120">&#x663E;&#x5F0F;&#x6267;&#x884C;&#x5C06;SQL&#x6587;&#x672C;&#x6216;&#x6784;&#x9020;&#x7684;SQL&#x8868;&#x8FBE;&#x5F0F;&#x4F20;&#x9012;&#x7ED9;<a class="reference internal" href="#sqlalchemy.engine.Connection" title="sqlalchemy.engine.Connection"><code class="xref py py-class docutils literal"><span class="pre">Connection</span></code></a>&#x7684;<a class="reference internal" href="#sqlalchemy.engine.Connection.execute" title="sqlalchemy.engine.Connection.execute"><code class="xref py py-meth docutils literal"><span class="pre">execute()</span></code></a>&#x65B9;&#x6CD5;&#xFF1A;</span></p><div class="highlight-python+sql"><div class="highlight"><pre><span></span><span class="n">engine</span> <span class="o">=</span> <span class="n">create_engine</span><span class="p">(</span><span class="s1">&apos;sqlite:///file.db&apos;</span><span class="p">)</span>
<span class="n">connection</span> <span class="o">=</span> <span class="n">engine</span><span class="o">.</span><span class="n">connect</span><span class="p">()</span>
<span class="n">result</span> <span class="o">=</span> <span class="n">connection</span><span class="o">.</span><span class="n">execute</span><span class="p">(</span><span class="n">users_table</span><span class="o">.</span><span class="n">select</span><span class="p">())</span>
<span class="k">for</span> <span class="n">row</span> <span class="ow">in</span> <span class="n">result</span><span class="p">:</span>
    <span class="c1"># ....</span>
<span class="n">connection</span><span class="o">.</span><span class="n">close</span><span class="p">()</span></pre></div></div><p><span class="yiyi-st" id="yiyi-121">&#x663E;&#x5F0F;&#x65E0;&#x8FDE;&#x63A5;&#x6267;&#x884C;&#x5C06;&#x8868;&#x8FBE;&#x5F0F;&#x4F20;&#x9012;&#x7ED9;<a class="reference internal" href="#sqlalchemy.engine.Engine" title="sqlalchemy.engine.Engine"><code class="xref py py-class docutils literal"><span class="pre">Engine</span></code></a>&#x7684;<a class="reference internal" href="#sqlalchemy.engine.Engine.execute" title="sqlalchemy.engine.Engine.execute"><code class="xref py py-meth docutils literal"><span class="pre">execute()</span></code></a>&#x65B9;&#x6CD5;&#xFF1A;</span></p><div class="highlight-python+sql"><div class="highlight"><pre><span></span><span class="n">engine</span> <span class="o">=</span> <span class="n">create_engine</span><span class="p">(</span><span class="s1">&apos;sqlite:///file.db&apos;</span><span class="p">)</span>
<span class="n">result</span> <span class="o">=</span> <span class="n">engine</span><span class="o">.</span><span class="n">execute</span><span class="p">(</span><span class="n">users_table</span><span class="o">.</span><span class="n">select</span><span class="p">())</span>
<span class="k">for</span> <span class="n">row</span> <span class="ow">in</span> <span class="n">result</span><span class="p">:</span>
    <span class="c1"># ....</span>
<span class="n">result</span><span class="o">.</span><span class="n">close</span><span class="p">()</span></pre></div></div><p><span class="yiyi-st" id="yiyi-122">&#x9690;&#x5F0F;&#x6267;&#x884C;&#x4E5F;&#x662F;&#x65E0;&#x8FDE;&#x63A5;&#x7684;&#xFF0C;&#x5E76;&#x4E14;&#x4F7F;&#x7528;&#x8868;&#x8FBE;&#x5F0F;&#x672C;&#x8EAB;&#x7684;<a class="reference internal" href="selectable.html#sqlalchemy.sql.expression.Executable.execute" title="sqlalchemy.sql.expression.Executable.execute"><code class="xref py py-meth docutils literal"><span class="pre">execute()</span></code></a>&#x65B9;&#x6CD5;&#x3002;</span><span class="yiyi-st" id="yiyi-123">&#x8BE5;&#x65B9;&#x6CD5;&#x4F5C;&#x4E3A;<a class="reference internal" href="selectable.html#sqlalchemy.sql.expression.Executable" title="sqlalchemy.sql.expression.Executable"><code class="xref py py-class docutils literal"><span class="pre">Executable</span></code></a>&#x7C7B;&#x7684;&#x4E00;&#x90E8;&#x5206;&#x63D0;&#x4F9B;&#xFF0C;&#x8BE5;&#x7C7B;&#x5F15;&#x7528;&#x4E86;&#x8DB3;&#x4EE5;&#x7528;&#x4E8E;&#x9488;&#x5BF9;&#x6570;&#x636E;&#x5E93;&#x8C03;&#x7528;&#x7684;SQL&#x8BED;&#x53E5;&#x3002;</span><span class="yiyi-st" id="yiyi-124">The method makes usage of the assumption that either an <a class="reference internal" href="#sqlalchemy.engine.Engine" title="sqlalchemy.engine.Engine"><code class="xref py py-class docutils literal"><span class="pre">Engine</span></code></a> or <a class="reference internal" href="#sqlalchemy.engine.Connection" title="sqlalchemy.engine.Connection"><code class="xref py py-class docutils literal"><span class="pre">Connection</span></code></a> has been <strong>bound</strong> to the expression object. </span><span class="yiyi-st" id="yiyi-125">&#x901A;&#x8FC7;&#x201C;&#x7ED1;&#x5B9A;&#x201D;&#xFF0C;&#x6211;&#x4EEC;&#x7684;&#x610F;&#x601D;&#x662F;&#x4F7F;&#x7528;&#x7279;&#x6B8A;&#x5C5E;&#x6027;<a class="reference internal" href="metadata.html#sqlalchemy.schema.MetaData.bind" title="sqlalchemy.schema.MetaData.bind"><code class="xref py py-attr docutils literal"><span class="pre">MetaData.bind</span></code></a>&#x5C06;&#x4E00;&#x7CFB;&#x5217;<a class="reference internal" href="metadata.html#sqlalchemy.schema.Table" title="sqlalchemy.schema.Table"><code class="xref py py-class docutils literal"><span class="pre">Table</span></code></a>&#x5BF9;&#x8C61;&#x548C;&#x4ECE;&#x5B83;&#x4EEC;&#x6D3E;&#x751F;&#x7684;&#x6240;&#x6709;SQL&#x6784;&#x9020;&#x4E0E;&#x7279;&#x5B9A;&#x5F15;&#x64CE;&#x76F8;&#x5173;&#x8054;&#xFF1A;</span></p><div class="highlight-python"><div class="highlight"><pre><span></span>engine = create_engine(&apos;sqlite:///file.db&apos;)
meta.bind = engine
result = users_table.select().execute()
for row in result:
    # ....
result.close()</pre></div></div><p><span class="yiyi-st" id="yiyi-126">&#x4E0A;&#x9762;&#xFF0C;&#x6211;&#x4EEC;&#x4F7F;&#x7528;&#x7279;&#x6B8A;&#x5C5E;&#x6027;<a class="reference internal" href="metadata.html#sqlalchemy.schema.MetaData.bind" title="sqlalchemy.schema.MetaData.bind"><code class="xref py py-attr docutils literal"><span class="pre">MetaData.bind</span></code></a>&#x5C06;<a class="reference internal" href="#sqlalchemy.engine.Engine" title="sqlalchemy.engine.Engine"><code class="xref py py-class docutils literal"><span class="pre">Engine</span></code></a>&#x4E0E;<a class="reference internal" href="metadata.html#sqlalchemy.schema.MetaData" title="sqlalchemy.schema.MetaData"><code class="xref py py-class docutils literal"><span class="pre">MetaData</span></code></a>&#x5BF9;&#x8C61;&#x76F8;&#x5173;&#x8054;&#x3002;</span><span class="yiyi-st" id="yiyi-127">&#x4ECE;<a class="reference internal" href="metadata.html#sqlalchemy.schema.Table" title="sqlalchemy.schema.Table"><code class="xref py py-class docutils literal"><span class="pre">Table</span></code></a>&#x5BF9;&#x8C61;&#x4EA7;&#x751F;&#x7684;<a class="reference internal" href="selectable.html#sqlalchemy.sql.expression.select" title="sqlalchemy.sql.expression.select"><code class="xref py py-func docutils literal"><span class="pre">select()</span></code></a>&#x7ED3;&#x6784;&#x6709;&#x4E00;&#x4E2A;&#x65B9;&#x6CD5;<a class="reference internal" href="selectable.html#sqlalchemy.sql.expression.Executable.execute" title="sqlalchemy.sql.expression.Executable.execute"><code class="xref py py-meth docutils literal"><span class="pre">execute()</span></code></a>&#xFF0C;&#x5B83;&#x5C06;&#x641C;&#x7D22;<a class="reference internal" href="#sqlalchemy.engine.Engine" title="sqlalchemy.engine.Engine"><code class="xref py py-class docutils literal"><span class="pre">Engine</span></code></a> &gt;&#x201C;&#x7ED1;&#x5B9A;&#x201D;&#x5230;<a class="reference internal" href="metadata.html#sqlalchemy.schema.Table" title="sqlalchemy.schema.Table"><code class="xref py py-class docutils literal"><span class="pre">Table</span></code></a>&#x3002;</span></p><p><span class="yiyi-st" id="yiyi-128">&#x603B;&#x7684;&#x6765;&#x8BF4;&#xFF0C;&#x201C;&#x7ED1;&#x5B9A;&#x5143;&#x6570;&#x636E;&#x201D;&#x7684;&#x4F7F;&#x7528;&#x6709;&#x4E09;&#x4E2A;&#x4E00;&#x822C;&#x6548;&#x679C;&#xFF1A;</span></p><ul class="simple"><li><span class="yiyi-st" id="yiyi-129">SQL&#x8BED;&#x53E5;&#x5BF9;&#x8C61;&#x83B7;&#x5F97;&#x4E00;&#x4E2A;<a class="reference internal" href="selectable.html#sqlalchemy.sql.expression.Executable.execute" title="sqlalchemy.sql.expression.Executable.execute"><code class="xref py py-meth docutils literal"><span class="pre">Executable.execute()</span></code></a>&#x65B9;&#x6CD5;&#xFF0C;&#x8BE5;&#x65B9;&#x6CD5;&#x81EA;&#x52A8;&#x67E5;&#x627E;&#x8981;&#x6267;&#x884C;&#x7684;&#x201C;&#x7ED1;&#x5B9A;&#x201D;&#x3002;</span></li><li><span class="yiyi-st" id="yiyi-130">The ORM <a class="reference internal" href="orm_session_api.html#sqlalchemy.orm.session.Session" title="sqlalchemy.orm.session.Session"><code class="xref py py-class docutils literal"><span class="pre">Session</span></code></a> object supports using &#x201C;bound metadata&#x201D; in order to establish which <a class="reference internal" href="#sqlalchemy.engine.Engine" title="sqlalchemy.engine.Engine"><code class="xref py py-class docutils literal"><span class="pre">Engine</span></code></a> should be used to invoke SQL statements on behalf of a particular mapped class, though the <a class="reference internal" href="orm_session_api.html#sqlalchemy.orm.session.Session" title="sqlalchemy.orm.session.Session"><code class="xref py py-class docutils literal"><span class="pre">Session</span></code></a> also features its own explicit system of establishing complex <a class="reference internal" href="#sqlalchemy.engine.Engine" title="sqlalchemy.engine.Engine"><code class="xref py py-class docutils literal"><span class="pre">Engine</span></code></a>/ mapped class configurations.</span></li><li><span class="yiyi-st" id="yiyi-131">The <a class="reference internal" href="metadata.html#sqlalchemy.schema.MetaData.create_all" title="sqlalchemy.schema.MetaData.create_all"><code class="xref py py-meth docutils literal"><span class="pre">MetaData.create_all()</span></code></a>, <a class="reference internal" href="metadata.html#sqlalchemy.schema.MetaData.drop_all" title="sqlalchemy.schema.MetaData.drop_all"><code class="xref py py-meth docutils literal"><span class="pre">MetaData.drop_all()</span></code></a>, <a class="reference internal" href="metadata.html#sqlalchemy.schema.Table.create" title="sqlalchemy.schema.Table.create"><code class="xref py py-meth docutils literal"><span class="pre">Table.create()</span></code></a>, <a class="reference internal" href="metadata.html#sqlalchemy.schema.Table.drop" title="sqlalchemy.schema.Table.drop"><code class="xref py py-meth docutils literal"><span class="pre">Table.drop()</span></code></a>, and &#x201C;autoload&#x201D; features all make usage of the bound <a class="reference internal" href="#sqlalchemy.engine.Engine" title="sqlalchemy.engine.Engine"><code class="xref py py-class docutils literal"><span class="pre">Engine</span></code></a> automatically without the need to pass it explicitly.</span></li></ul><div class="admonition note"><p class="first admonition-title"><span class="yiyi-st" id="yiyi-132">&#x6CE8;&#x610F;</span></p><p><span class="yiyi-st" id="yiyi-133">&#x73B0;&#x4EE3;SQLAlchemy&#x4E2D;&#x6CA1;&#x6709;&#x5F3A;&#x8C03;&#x201C;&#x7ED1;&#x5B9A;&#x5143;&#x6570;&#x636E;&#x201D;&#x548C;&#x201C;&#x9690;&#x5F0F;&#x6267;&#x884C;&#x201D;&#x7684;&#x6982;&#x5FF5;&#x3002;</span><span class="yiyi-st" id="yiyi-134">&#x867D;&#x7136;&#x5B83;&#x4EEC;&#x63D0;&#x4F9B;&#x4E86;&#x4E00;&#x4E9B;&#x4FBF;&#x5229;&#xFF0C;&#x4F46;&#x5B83;&#x4EEC;&#x4E0D;&#x518D;&#x53D7;&#x4EFB;&#x4F55;API&#x7684;&#x8981;&#x6C42;&#xFF0C;&#x5E76;&#x4E14;&#x4ECE;&#x4E0D;&#x662F;&#x5FC5;&#x9700;&#x7684;&#x3002;</span></p><p><span class="yiyi-st" id="yiyi-135">&#x5728;&#x5B58;&#x5728;&#x591A;&#x4E2A;<a class="reference internal" href="#sqlalchemy.engine.Engine" title="sqlalchemy.engine.Engine"><code class="xref py py-class docutils literal"><span class="pre">Engine</span></code></a>&#x5BF9;&#x8C61;&#x7684;&#x5E94;&#x7528;&#x7A0B;&#x5E8F;&#x4E2D;&#xFF0C;&#x6BCF;&#x4E2A;&#x5BF9;&#x8C61;&#x90FD;&#x4E0E;&#x4E00;&#x7EC4;&#x8868;&#xFF08;<em>vertical sharding</em>&#xFF09;&#x903B;&#x8F91;&#x5173;&#x8054;&#xFF0C;&#x53EF;&#x4EE5;&#x4F7F;&#x7528;&#x201C;&#x7ED1;&#x5B9A;&#x5143;&#x6570;&#x636E;&#x201D;&#x6280;&#x672F;&#xFF0C;&#x4E2A;&#x522B;<a class="reference internal" href="metadata.html#sqlalchemy.schema.Table" title="sqlalchemy.schema.Table"><code class="xref py py-class docutils literal"><span class="pre">Table</span></code></a>&#x53EF;&#x4EE5;&#x81EA;&#x52A8;&#x5F15;&#x7528;&#x9002;&#x5F53;&#x7684;<a class="reference internal" href="#sqlalchemy.engine.Engine" title="sqlalchemy.engine.Engine"><code class="xref py py-class docutils literal"><span class="pre">Engine</span></code></a>&#xFF1B;&#x7279;&#x522B;&#x662F;ORM&#x901A;&#x8FC7;<a class="reference internal" href="orm_session_api.html#sqlalchemy.orm.session.Session" title="sqlalchemy.orm.session.Session"><code class="xref py py-class docutils literal"><span class="pre">Session</span></code></a>&#x5BF9;&#x8C61;&#x652F;&#x6301;&#x8FD9;&#x79CD;&#x65B9;&#x5F0F;&#xFF0C;&#x4F5C;&#x4E3A;&#x5C06;<a class="reference internal" href="metadata.html#sqlalchemy.schema.Table" title="sqlalchemy.schema.Table"><code class="xref py py-class docutils literal"><span class="pre">Table</span></code></a>&#x5BF9;&#x8C61;&#x4E0E;&#x9002;&#x5F53;&#x7684;<a class="reference internal" href="#sqlalchemy.engine.Engine" title="sqlalchemy.engine.Engine"><code class="xref py py-class docutils literal"><span class="pre">Engine</span></code></a>&#x5173;&#x8054;&#x7684;&#x4E00;&#x79CD;&#x624B;&#x6BB5;&#xFF0C;&#x4F5C;&#x4E3A;&#x4F7F;&#x7528;&#x7ED1;&#x5B9A;&#x53C2;&#x6570;&#x7531;<a class="reference internal" href="orm_session_api.html#sqlalchemy.orm.session.Session" title="sqlalchemy.orm.session.Session"><code class="xref py py-class docutils literal"><span class="pre">Session</span></code></a>&#x76F4;&#x63A5;&#x63A5;&#x53D7;&#x3002;</span></p><p><span class="yiyi-st" id="yiyi-136">&#x7136;&#x800C;&#xFF0C;&#x201C;&#x9690;&#x5F0F;&#x6267;&#x884C;&#x201D;&#x6280;&#x672F;&#x5E76;&#x4E0D;&#x9002;&#x5408;&#x4E0E;ORM&#x4E00;&#x8D77;&#x4F7F;&#x7528;&#xFF0C;&#x56E0;&#x4E3A;&#x5B83;&#x7ED5;&#x8FC7;&#x4E86;<a class="reference internal" href="orm_session_api.html#sqlalchemy.orm.session.Session" title="sqlalchemy.orm.session.Session"><code class="xref py py-class docutils literal"><span class="pre">Session</span></code></a>&#x7EF4;&#x62A4;&#x7684;&#x4E8B;&#x52A1;&#x4E0A;&#x4E0B;&#x6587;&#x3002;</span></p><p><span class="yiyi-st" id="yiyi-137">Overall, in the <em>vast majority</em> of cases, &#x201C;bound metadata&#x201D; and &#x201C;implicit execution&#x201D; are <strong>not useful</strong>. </span><span class="yiyi-st" id="yiyi-138">&#x867D;&#x7136;&#x201C;&#x7ED1;&#x5B9A;&#x7684;&#x5143;&#x6570;&#x636E;&#x201D;&#x5728;ORM&#x914D;&#x7F6E;&#x65B9;&#x9762;&#x7684;&#x7528;&#x5904;&#x4E0D;&#x5927;&#xFF0C;&#x4F46;&#x201C;&#x9690;&#x5F0F;&#x6267;&#x884C;&#x201D;&#x662F;&#x4E00;&#x79CD;&#x975E;&#x5E38;&#x53E4;&#x8001;&#x7684;&#x7528;&#x6CD5;&#x6A21;&#x5F0F;&#xFF0C;&#x5728;&#x5927;&#x591A;&#x6570;&#x60C5;&#x51B5;&#x4E0B;&#xFF0C;&#x5B83;&#x6BD4;&#x6709;&#x7528;&#x7684;&#x6A21;&#x5F0F;&#x66F4;&#x4EE4;&#x4EBA;&#x56F0;&#x60D1;&#xFF0C;&#x800C;&#x4E14;&#x5B83;&#x7684;&#x4F7F;&#x7528;&#x4E5F;&#x4E0D;&#x53D7;&#x6B22;&#x8FCE;&#x3002;</span><span class="yiyi-st" id="yiyi-139">&#x8FD9;&#x4E24;&#x79CD;&#x6A21;&#x5F0F;&#x4F3C;&#x4E4E;&#x90FD;&#x9F13;&#x52B1;&#x5728;&#x5E94;&#x7528;&#x7A0B;&#x5E8F;&#x8BBE;&#x8BA1;&#x4E2D;&#x8FC7;&#x5EA6;&#x4F7F;&#x7528;&#x6743;&#x5B9C;&#x7684;&#x201C;&#x6377;&#x5F84;&#x201D;&#xFF0C;&#x8FD9;&#x4F1A;&#x5728;&#x4EE5;&#x540E;&#x5BFC;&#x81F4;&#x95EE;&#x9898;&#x3002;</span></p><p class="last"><span class="yiyi-st" id="yiyi-140">&#x73B0;&#x4EE3;SQLAlchemy&#x7684;&#x7528;&#x6CD5;&#xFF0C;&#x7279;&#x522B;&#x662F;ORM&#xFF0C;&#x5728;&#x4EFB;&#x4F55;&#x65F6;&#x5019;&#x90FD;&#x5728;&#x4EA4;&#x6613;&#x7684;&#x4E0A;&#x4E0B;&#x6587;&#x4E2D;&#x91CD;&#x89C6;&#x5DE5;&#x4F5C;&#xFF1B; &#x201C;&#x9690;&#x5F0F;&#x6267;&#x884C;&#x201D;&#x6982;&#x5FF5;&#x4F7F;&#x5F97;&#x5C06;&#x8BED;&#x53E5;&#x6267;&#x884C;&#x4E0E;&#x7279;&#x5B9A;&#x4E8B;&#x52A1;&#x76F8;&#x5173;&#x8054;&#x7684;&#x5DE5;&#x4F5C;&#x66F4;&#x52A0;&#x56F0;&#x96BE;&#x3002;</span><span class="yiyi-st" id="yiyi-141">&#x7279;&#x5B9A;SQL&#x8BED;&#x53E5;&#x4E0A;&#x7684;<a class="reference internal" href="selectable.html#sqlalchemy.sql.expression.Executable.execute" title="sqlalchemy.sql.expression.Executable.execute"><code class="xref py py-meth docutils literal"><span class="pre">Executable.execute()</span></code></a>&#x65B9;&#x6CD5;&#x901A;&#x5E38;&#x610F;&#x5473;&#x7740;&#x6267;&#x884C;&#x4E0D;&#x662F;&#x4EFB;&#x4F55;&#x7279;&#x5B9A;&#x4E8B;&#x52A1;&#x7684;&#x4E00;&#x90E8;&#x5206;&#xFF0C;&#x8FD9;&#x901A;&#x5E38;&#x4E0D;&#x662F;&#x6240;&#x671F;&#x671B;&#x7684;&#x6548;&#x679C;&#x3002;</span></p></div><p><span class="yiyi-st" id="yiyi-142">&#x5728;&#x4E24;&#x4E2A;&#x201C;&#x65E0;&#x8FDE;&#x63A5;&#x201D;&#x793A;&#x4F8B;&#x4E2D;&#xFF0C;<a class="reference internal" href="#sqlalchemy.engine.Connection" title="sqlalchemy.engine.Connection"><code class="xref py py-class docutils literal"><span class="pre">Connection</span></code></a>&#x5728;&#x5E55;&#x540E;&#x521B;&#x5EFA;&#xFF1B;&#x7531;<code class="docutils literal"><span class="pre">execute()</span></code>&#x8C03;&#x7528;&#x8FD4;&#x56DE;&#x7684;<a class="reference internal" href="#sqlalchemy.engine.ResultProxy" title="sqlalchemy.engine.ResultProxy"><code class="xref py py-class docutils literal"><span class="pre">ResultProxy</span></code></a>&#x5F15;&#x7528;&#x7528;&#x4E8E;&#x53D1;&#x51FA;SQL&#x8BED;&#x53E5;&#x7684;<a class="reference internal" href="#sqlalchemy.engine.Connection" title="sqlalchemy.engine.Connection"><code class="xref py py-class docutils literal"><span class="pre">Connection</span></code></a>&#x3002;</span><span class="yiyi-st" id="yiyi-143">&#x5F53;<a class="reference internal" href="#sqlalchemy.engine.ResultProxy" title="sqlalchemy.engine.ResultProxy"><code class="xref py py-class docutils literal"><span class="pre">ResultProxy</span></code></a>&#x5173;&#x95ED;&#x65F6;&#xFF0C;&#x5E95;&#x5C42;&#x7684;<a class="reference internal" href="#sqlalchemy.engine.Connection" title="sqlalchemy.engine.Connection"><code class="xref py py-class docutils literal"><span class="pre">Connection</span></code></a>&#x5C06;&#x5173;&#x95ED;&#xFF0C;&#x5BFC;&#x81F4;DBAPI&#x8FDE;&#x63A5;&#x8FD4;&#x56DE;&#x5230;&#x6C60;&#x4E2D;&#xFF0C;&#x540C;&#x65F6;&#x5220;&#x9664;&#x4E8B;&#x52A1;&#x8D44;&#x6E90;&#x3002;</span></p></div><div class="section" id="translation-of-schema-names"><h2><span class="yiyi-st" id="yiyi-144">&#x6A21;&#x5F0F;&#x540D;&#x79F0;&#x7FFB;&#x8BD1;<a class="headerlink" href="#translation-of-schema-names" title="Permalink to this headline">&#xB6;</a></span></h2><p><span class="yiyi-st" id="yiyi-145">&#x4E3A;&#x4E86;&#x652F;&#x6301;&#x5C06;&#x516C;&#x5171;&#x8868;&#x96C6;&#x5206;&#x914D;&#x5230;&#x591A;&#x4E2A;&#x6A21;&#x5F0F;&#x4E2D;&#x7684;&#x591A;&#x79DF;&#x6237;&#x5E94;&#x7528;&#x7A0B;&#x5E8F;&#xFF0C;&#x53EF;&#x4EE5;&#x4F7F;&#x7528;<a class="reference internal" href="#sqlalchemy.engine.Connection.execution_options.params.schema_translate_map" title="sqlalchemy.engine.Connection.execution_options"><code class="xref py py-paramref docutils literal"><span class="pre">Connection.execution_options.schema_translate_map</span></code></a>&#x6267;&#x884C;&#x9009;&#x9879;&#x6765;&#x91CD;&#x65B0;&#x5229;&#x7528;&#x4E00;&#x7EC4;<a class="reference internal" href="metadata.html#sqlalchemy.schema.Table" title="sqlalchemy.schema.Table"><code class="xref py py-class docutils literal"><span class="pre">Table</span></code></a>&#x5BF9;&#x8C61;&#x6765;&#x5448;&#x73B0;&#x5728;&#x4E0D;&#x540C;&#x7684;&#x6A21;&#x5F0F;&#x540D;&#x79F0;&#x4E0B;&#x6CA1;&#x6709;&#x4EFB;&#x4F55;&#x66F4;&#x6539;&#x3002;</span></p><p><span class="yiyi-st" id="yiyi-146">&#x7ED9;&#x5B9A;&#x4E00;&#x5F20;&#x8868;&#x683C;&#xFF1A;</span></p><div class="highlight-python"><div class="highlight"><pre><span></span><span class="n">user_table</span> <span class="o">=</span> <span class="n">Table</span><span class="p">(</span>
    <span class="s1">&apos;user&apos;</span><span class="p">,</span> <span class="n">metadata</span><span class="p">,</span>
    <span class="n">Column</span><span class="p">(</span><span class="s1">&apos;id&apos;</span><span class="p">,</span> <span class="n">Integer</span><span class="p">,</span> <span class="n">primary_key</span><span class="o">=</span><span class="bp">True</span><span class="p">),</span>
    <span class="n">Column</span><span class="p">(</span><span class="s1">&apos;name&apos;</span><span class="p">,</span> <span class="n">String</span><span class="p">(</span><span class="mi">50</span><span class="p">))</span>
<span class="p">)</span></pre></div></div><p><span class="yiyi-st" id="yiyi-147">&#x7531;<a class="reference internal" href="metadata.html#sqlalchemy.schema.Table.params.schema" title="sqlalchemy.schema.Table"><code class="xref py py-paramref docutils literal"><span class="pre">Table.schema</span></code></a>&#x5C5E;&#x6027;&#x5B9A;&#x4E49;&#x7684;<a class="reference internal" href="metadata.html#sqlalchemy.schema.Table" title="sqlalchemy.schema.Table"><code class="xref py py-class docutils literal"><span class="pre">Table</span></code></a>&#x7684;&#x201C;&#x6A21;&#x5F0F;&#x201D;&#x662F;<code class="docutils literal"><span class="pre">None</span></code>&#x3002;</span><span class="yiyi-st" id="yiyi-148"><a class="reference internal" href="#sqlalchemy.engine.Connection.execution_options.params.schema_translate_map" title="sqlalchemy.engine.Connection.execution_options"><code class="xref py py-paramref docutils literal"><span class="pre">Connection.execution_options.schema_translate_map</span></code></a>&#x53EF;&#x4EE5;&#x6307;&#x5B9A;&#x6A21;&#x5F0F;&#x4E3A;<code class="docutils literal"><span class="pre">None</span></code>&#x7684;&#x6240;&#x6709;<a class="reference internal" href="metadata.html#sqlalchemy.schema.Table" title="sqlalchemy.schema.Table"><code class="xref py py-class docutils literal"><span class="pre">Table</span></code></a>&#x5BF9;&#x8C61;&#x5C06;&#x5448;&#x73B0;&#x6A21;&#x5F0F;&#x4E3A;<code class="docutils literal"><span class="pre">user_schema_one</span></code></span></p><div class="highlight-python"><div class="highlight"><pre><span></span><span class="n">connection</span> <span class="o">=</span> <span class="n">engine</span><span class="o">.</span><span class="n">connect</span><span class="p">()</span><span class="o">.</span><span class="n">execution_options</span><span class="p">(</span>
    <span class="n">schema_translate_map</span><span class="o">=</span><span class="p">{</span><span class="bp">None</span><span class="p">:</span> <span class="s2">&quot;user_schema_one&quot;</span><span class="p">})</span>

<span class="n">result</span> <span class="o">=</span> <span class="n">connection</span><span class="o">.</span><span class="n">execute</span><span class="p">(</span><span class="n">user_table</span><span class="o">.</span><span class="n">select</span><span class="p">())</span></pre></div></div><p><span class="yiyi-st" id="yiyi-149">&#x4E0A;&#x9762;&#x7684;&#x4EE3;&#x7801;&#x5C06;&#x5728;&#x8868;&#x5355;&#x7684;&#x6570;&#x636E;&#x5E93;&#x4E0A;&#x8C03;&#x7528;SQL&#xFF1A;</span></p><div class="highlight-python"><div class="highlight"><pre><span></span>SELECT user_schema_one.user.id, user_schema_one.user.name FROM
user_schema.user</pre></div></div><p><span class="yiyi-st" id="yiyi-150">&#x4E5F;&#x5C31;&#x662F;&#x8BF4;&#xFF0C;&#x6A21;&#x5F0F;&#x540D;&#x79F0;&#x88AB;&#x66FF;&#x6362;&#x4E3A;&#x6211;&#x4EEC;&#x7FFB;&#x8BD1;&#x7684;&#x540D;&#x79F0;&#x3002;</span><span class="yiyi-st" id="yiyi-151">&#x8BE5;&#x5730;&#x56FE;&#x53EF;&#x4EE5;&#x6307;&#x5B9A;&#x4EFB;&#x610F;&#x6570;&#x91CF;&#x7684;&#x76EE;&#x6807; - &gt;&#x76EE;&#x7684;&#x5730;&#x6A21;&#x5F0F;&#xFF1A;</span></p><div class="highlight-python"><div class="highlight"><pre><span></span><span class="n">connection</span> <span class="o">=</span> <span class="n">engine</span><span class="o">.</span><span class="n">connect</span><span class="p">()</span><span class="o">.</span><span class="n">execution_options</span><span class="p">(</span>
    <span class="n">schema_translate_map</span><span class="o">=</span><span class="p">{</span>
        <span class="bp">None</span><span class="p">:</span> <span class="s2">&quot;user_schema_one&quot;</span><span class="p">,</span>     <span class="c1"># no schema name -&gt; &quot;user_schema_one&quot;</span>
        <span class="s2">&quot;special&quot;</span><span class="p">:</span> <span class="s2">&quot;special_schema&quot;</span><span class="p">,</span> <span class="c1"># schema=&quot;special&quot; becomes &quot;special_schema&quot;</span>
        <span class="s2">&quot;public&quot;</span><span class="p">:</span> <span class="bp">None</span>               <span class="c1"># Table objects with schema=&quot;public&quot; will render with no schema</span>
    <span class="p">})</span></pre></div></div><p><span class="yiyi-st" id="yiyi-152"><a class="reference internal" href="#sqlalchemy.engine.Connection.execution_options.params.schema_translate_map" title="sqlalchemy.engine.Connection.execution_options"><code class="xref py py-paramref docutils literal"><span class="pre">Connection.execution_options.schema_translate_map</span></code></a>&#x53C2;&#x6570;&#x4F1A;&#x5F71;&#x54CD;&#x4ECE;<a class="reference internal" href="metadata.html#sqlalchemy.schema.Table" title="sqlalchemy.schema.Table"><code class="xref py py-class docutils literal"><span class="pre">Table</span></code></a>&#x6216;<a class="reference internal" href="defaults.html#sqlalchemy.schema.Sequence" title="sqlalchemy.schema.Sequence"><code class="xref py py-class docutils literal"><span class="pre">Sequence</span></code></a>&#x5BF9;&#x8C61;&#x6D3E;&#x751F;&#x7684;SQL&#x8868;&#x8FBE;&#x5F0F;&#x8BED;&#x8A00;&#x751F;&#x6210;&#x7684;&#x6240;&#x6709;DDL&#x548C;SQL&#x7ED3;&#x6784;&#x3002;</span><span class="yiyi-st" id="yiyi-153">It does <strong>not</strong> impact literal string SQL used via the <a class="reference internal" href="sqlelement.html#sqlalchemy.sql.expression.text" title="sqlalchemy.sql.expression.text"><code class="xref py py-func docutils literal"><span class="pre">expression.text()</span></code></a> construct nor via plain strings passed to <a class="reference internal" href="#sqlalchemy.engine.Connection.execute" title="sqlalchemy.engine.Connection.execute"><code class="xref py py-meth docutils literal"><span class="pre">Connection.execute()</span></code></a>.</span></p><p><span class="yiyi-st" id="yiyi-154">&#x5728;&#x6A21;&#x5F0F;&#x7684;&#x540D;&#x79F0;&#x76F4;&#x63A5;&#x6765;&#x6E90;&#x4E8E;<a class="reference internal" href="metadata.html#sqlalchemy.schema.Table" title="sqlalchemy.schema.Table"><code class="xref py py-class docutils literal"><span class="pre">Table</span></code></a>&#x6216;<a class="reference internal" href="defaults.html#sqlalchemy.schema.Sequence" title="sqlalchemy.schema.Sequence"><code class="xref py py-class docutils literal"><span class="pre">Sequence</span></code></a>&#x7684;&#x60C5;&#x51B5;&#x4E0B;&#xFF0C;&#x8BE5;&#x529F;&#x80FD;&#x4EC5;&#x5BF9;<strong>&#x6709;&#x6548;</strong>&#xFF1B;&#x5B83;&#x4E0D;&#x4F1A;&#x5F71;&#x54CD;&#x5B57;&#x7B26;&#x4E32;&#x6A21;&#x5F0F;&#x540D;&#x79F0;&#x76F4;&#x63A5;&#x4F20;&#x9012;&#x7684;&#x65B9;&#x6CD5;&#x3002;</span><span class="yiyi-st" id="yiyi-155">By this pattern, it takes effect within the &#x201C;can create&#x201D; / &#x201C;can drop&#x201D; checks performed by methods such as <a class="reference internal" href="metadata.html#sqlalchemy.schema.MetaData.create_all" title="sqlalchemy.schema.MetaData.create_all"><code class="xref py py-meth docutils literal"><span class="pre">MetaData.create_all()</span></code></a> or <a class="reference internal" href="metadata.html#sqlalchemy.schema.MetaData.drop_all" title="sqlalchemy.schema.MetaData.drop_all"><code class="xref py py-meth docutils literal"><span class="pre">MetaData.drop_all()</span></code></a> are called, and it takes effect when using table reflection given a <a class="reference internal" href="metadata.html#sqlalchemy.schema.Table" title="sqlalchemy.schema.Table"><code class="xref py py-class docutils literal"><span class="pre">Table</span></code></a> object. </span><span class="yiyi-st" id="yiyi-156">However it does <strong>not</strong> affect the operations present on the <a class="reference internal" href="reflection.html#sqlalchemy.engine.reflection.Inspector" title="sqlalchemy.engine.reflection.Inspector"><code class="xref py py-class docutils literal"><span class="pre">Inspector</span></code></a> object, as the schema name is passed to these methods explicitly.</span></p><div class="versionadded"><p><span class="yiyi-st" id="yiyi-157"><span class="versionmodified">&#x7248;&#x672C;1.1&#x4E2D;&#x7684;&#x65B0;&#x529F;&#x80FD;</span></span></p></div></div><div class="section" id="engine-disposal"><h2><span class="yiyi-st" id="yiyi-158">&#x5F15;&#x64CE;&#x5904;&#x7F6E;<a class="headerlink" href="#engine-disposal" title="Permalink to this headline">&#xB6;</a></span></h2><p><span class="yiyi-st" id="yiyi-159"><a class="reference internal" href="#sqlalchemy.engine.Engine" title="sqlalchemy.engine.Engine"><code class="xref py py-class docutils literal"><span class="pre">Engine</span></code></a>&#x6307;&#x7684;&#x662F;&#x8FDE;&#x63A5;&#x6C60;&#xFF0C;&#x8FD9;&#x610F;&#x5473;&#x7740;&#x5728;&#x6B63;&#x5E38;&#x60C5;&#x51B5;&#x4E0B;&#x5B58;&#x5728;&#x5F00;&#x653E;&#x7684;&#x6570;&#x636E;&#x5E93;&#x8FDE;&#x63A5;&#xFF0C;&#x800C;<a class="reference internal" href="#sqlalchemy.engine.Engine" title="sqlalchemy.engine.Engine"><code class="xref py py-class docutils literal"><span class="pre">Engine</span></code></a>&#x5BF9;&#x8C61;&#x4ECD;&#x9A7B;&#x7559;&#x5728;&#x5185;&#x5B58;&#x4E2D;&#x3002;</span><span class="yiyi-st" id="yiyi-160">&#x5F53;&#x4E00;&#x4E2A;<a class="reference internal" href="#sqlalchemy.engine.Engine" title="sqlalchemy.engine.Engine"><code class="xref py py-class docutils literal"><span class="pre">Engine</span></code></a>&#x88AB;&#x5783;&#x573E;&#x6536;&#x96C6;&#x65F6;&#xFF0C;&#x5B83;&#x7684;&#x8FDE;&#x63A5;&#x6C60;&#x4E0D;&#x518D;&#x88AB;<a class="reference internal" href="#sqlalchemy.engine.Engine" title="sqlalchemy.engine.Engine"><code class="xref py py-class docutils literal"><span class="pre">Engine</span></code></a>&#x5F15;&#x7528;&#xFF0C;&#x5E76;&#x4E14;&#x5047;&#x5B9A;&#x5B83;&#x7684;&#x8FDE;&#x63A5;&#x90FD;&#x6CA1;&#x6709;&#x88AB;&#x68C0;&#x51FA;&#xFF0C;&#x6C60;&#x548C;&#x5B83;&#x7684;&#x8FDE;&#x63A5;&#x5C06;&#x4F1A;&#x4E5F;&#x4F1A;&#x88AB;&#x5783;&#x573E;&#x6536;&#x96C6;&#xFF0C;&#x8FD9;&#x4E5F;&#x4F1A;&#x5F71;&#x54CD;&#x5230;&#x5B9E;&#x9645;&#x7684;&#x6570;&#x636E;&#x5E93;&#x8FDE;&#x63A5;&#x3002;</span><span class="yiyi-st" id="yiyi-161">&#x4F46;&#x662F;&#x5426;&#x5219;&#xFF0C;&#x5047;&#x8BBE;&#x5B83;&#x4F7F;&#x7528;<a class="reference internal" href="pooling.html#sqlalchemy.pool.QueuePool" title="sqlalchemy.pool.QueuePool"><code class="xref py py-class docutils literal"><span class="pre">QueuePool</span></code></a>&#x7684;&#x6B63;&#x5E38;&#x9ED8;&#x8BA4;&#x6C60;&#x5B9E;&#x73B0;&#xFF0C;<a class="reference internal" href="#sqlalchemy.engine.Engine" title="sqlalchemy.engine.Engine"><code class="xref py py-class docutils literal"><span class="pre">Engine</span></code></a>&#x5C06;&#x4FDD;&#x6301;&#x5F00;&#x653E;&#x6570;&#x636E;&#x5E93;&#x8FDE;&#x63A5;&#x3002;</span></p><p><span class="yiyi-st" id="yiyi-162"><a class="reference internal" href="#sqlalchemy.engine.Engine" title="sqlalchemy.engine.Engine"><code class="xref py py-class docutils literal"><span class="pre">Engine</span></code></a>&#x901A;&#x5E38;&#x662F;&#x4E00;&#x4E2A;&#x6C38;&#x4E45;&#x6027;&#x7684;&#x56FA;&#x5B9A;&#x88C5;&#x7F6E;&#xFF0C;&#x53EF;&#x4EE5;&#x5728;&#x5E94;&#x7528;&#x7A0B;&#x5E8F;&#x7684;&#x6574;&#x4E2A;&#x4F7F;&#x7528;&#x671F;&#x9650;&#x5185;&#x5EFA;&#x7ACB;&#x5E76;&#x7EF4;&#x6301;&#x3002;</span><span class="yiyi-st" id="yiyi-163">&#x4E0D;&#x6253;&#x7B97;&#x5728;&#x6BCF;&#x4E2A;&#x8FDE;&#x63A5;&#x7684;&#x57FA;&#x7840;&#x4E0A;&#x521B;&#x5EFA;&#x548C;&#x5904;&#x7406;<strong></strong>&#xFF1B;&#x5B83;&#x662F;&#x4E00;&#x4E2A;&#x6CE8;&#x518C;&#x8868;&#xFF0C;&#x5B83;&#x7EF4;&#x62A4;&#x4E00;&#x4E2A;&#x8FDE;&#x63A5;&#x6C60;&#x4EE5;&#x53CA;&#x6709;&#x5173;&#x6B63;&#x5728;&#x4F7F;&#x7528;&#x7684;&#x6570;&#x636E;&#x5E93;&#x548C;DBAPI&#x7684;&#x914D;&#x7F6E;&#x4FE1;&#x606F;&#xFF0C;&#x4EE5;&#x53CA;&#x4E00;&#x5B9A;&#x7A0B;&#x5EA6;&#x7684;&#x6BCF;&#x4E2A;&#x6570;&#x636E;&#x5E93;&#x8D44;&#x6E90;&#x7684;&#x5185;&#x90E8;&#x7F13;&#x5B58;&#x3002;</span></p><p><span class="yiyi-st" id="yiyi-164">&#x7136;&#x800C;&#xFF0C;&#x5728;&#x5F88;&#x591A;&#x60C5;&#x51B5;&#x4E0B;&#xFF0C;<a class="reference internal" href="#sqlalchemy.engine.Engine" title="sqlalchemy.engine.Engine"><code class="xref py py-class docutils literal"><span class="pre">Engine</span></code></a>&#x5F15;&#x7528;&#x7684;&#x6240;&#x6709;&#x8FDE;&#x63A5;&#x8D44;&#x6E90;&#x90FD;&#x9700;&#x8981;&#x5B8C;&#x5168;&#x5173;&#x95ED;&#x3002;</span><span class="yiyi-st" id="yiyi-165">&#x5728;&#x8FD9;&#x4E9B;&#x60C5;&#x51B5;&#x4E0B;&#x4F9D;&#x9760;Python&#x5783;&#x573E;&#x56DE;&#x6536;&#x6765;&#x53D1;&#x751F;&#x8FD9;&#x79CD;&#x60C5;&#x51B5;&#x901A;&#x5E38;&#x4E0D;&#x662F;&#x4E00;&#x4E2A;&#x597D;&#x4E3B;&#x610F;&#xFF1B;&#x76F8;&#x53CD;&#xFF0C;&#x53EF;&#x4EE5;&#x4F7F;&#x7528;<a class="reference internal" href="#sqlalchemy.engine.Engine.dispose" title="sqlalchemy.engine.Engine.dispose"><code class="xref py py-meth docutils literal"><span class="pre">Engine.dispose()</span></code></a>&#x65B9;&#x6CD5;&#x663E;&#x5F0F;&#x5730;&#x5904;&#x7406;<a class="reference internal" href="#sqlalchemy.engine.Engine" title="sqlalchemy.engine.Engine"><code class="xref py py-class docutils literal"><span class="pre">Engine</span></code></a>&#x3002;</span><span class="yiyi-st" id="yiyi-166">&#x8FD9;&#x5C06;&#x5904;&#x7406;&#x5F15;&#x64CE;&#x7684;&#x5E95;&#x5C42;&#x8FDE;&#x63A5;&#x6C60;&#xFF0C;&#x5E76;&#x5C06;&#x5176;&#x66FF;&#x6362;&#x4E3A;&#x7A7A;&#x7684;&#x65B0;&#x8FDE;&#x63A5;&#x6C60;&#x3002;</span><span class="yiyi-st" id="yiyi-167">&#x5982;&#x679C;<a class="reference internal" href="#sqlalchemy.engine.Engine" title="sqlalchemy.engine.Engine"><code class="xref py py-class docutils literal"><span class="pre">Engine</span></code></a>&#x5728;&#x6B64;&#x5904;&#x88AB;&#x4E22;&#x5F03;&#x5E76;&#x4E14;&#x4E0D;&#x518D;&#x4F7F;&#x7528;&#xFF0C;&#x90A3;&#x4E48;&#x5B83;&#x5F15;&#x7528;&#x7684;&#x6240;&#x6709;<strong>&#x7B7E;&#x5165;</strong>&#x8FDE;&#x63A5;&#x4E5F;&#x5C06;&#x5B8C;&#x5168;&#x5173;&#x95ED;&#x3002;</span></p><p><span class="yiyi-st" id="yiyi-168">&#x8C03;&#x7528;<a class="reference internal" href="#sqlalchemy.engine.Engine.dispose" title="sqlalchemy.engine.Engine.dispose"><code class="xref py py-meth docutils literal"><span class="pre">Engine.dispose()</span></code></a>&#x7684;&#x6709;&#x6548;&#x7528;&#x4F8B;&#x5305;&#x62EC;&#xFF1A;</span></p><ul class="simple"><li><span class="yiyi-st" id="yiyi-169">&#x5F53;&#x4E00;&#x4E2A;&#x7A0B;&#x5E8F;&#x60F3;&#x8981;&#x91CA;&#x653E;&#x8FDE;&#x63A5;&#x6C60;&#x4FDD;&#x7559;&#x7684;&#x4EFB;&#x4F55;&#x5269;&#x4F59;&#x7684;&#x68C0;&#x5165;&#x8FDE;&#x63A5;&#xFF0C;&#x5E76;&#x4E14;&#x671F;&#x671B;&#x4E0D;&#x518D;&#x8FDE;&#x63A5;&#x5230;&#x8BE5;&#x6570;&#x636E;&#x5E93;&#x4EE5;&#x7528;&#x4E8E;&#x5C06;&#x6765;&#x7684;&#x4EFB;&#x4F55;&#x64CD;&#x4F5C;&#x3002;</span></li><li><span class="yiyi-st" id="yiyi-170">&#x5F53;&#x7A0B;&#x5E8F;&#x4F7F;&#x7528;&#x591A;&#x5904;&#x7406;&#x6216;<code class="docutils literal"><span class="pre">fork()</span></code>&#xFF0C;&#x5E76;&#x4E14;<a class="reference internal" href="#sqlalchemy.engine.Engine" title="sqlalchemy.engine.Engine"><code class="xref py py-class docutils literal"><span class="pre">Engine</span></code></a>&#x5BF9;&#x8C61;&#x88AB;&#x590D;&#x5236;&#x5230;&#x5B50;&#x8FDB;&#x7A0B;&#x65F6;&#xFF0C;&#x5E94;&#x8C03;&#x7528;<a class="reference internal" href="#sqlalchemy.engine.Engine.dispose" title="sqlalchemy.engine.Engine.dispose"><code class="xref py py-meth docutils literal"><span class="pre">Engine.dispose()</span></code></a>&#x8FD9;&#x6837;&#x5F15;&#x64CE;&#x4F1A;&#x5728;&#x8BE5;&#x53C9;&#x4E0A;&#x521B;&#x5EFA;&#x5168;&#x65B0;&#x7684;&#x6570;&#x636E;&#x5E93;&#x8FDE;&#x63A5;&#x3002;</span><span class="yiyi-st" id="yiyi-171">&#x6570;&#x636E;&#x5E93;&#x8FDE;&#x63A5;&#x901A;&#x5E38;&#x4E0D;&#x8DE8;&#x8D8A;&#x8FDB;&#x7A0B;&#x8FB9;&#x754C;&#x4F20;&#x9012;<strong>&#x800C;&#x4E0D;&#x662F;</strong>&#x3002;</span></li><li><span class="yiyi-st" id="yiyi-172">&#x5728;&#x6D4B;&#x8BD5;&#x5957;&#x4EF6;&#x6216;&#x591A;&#x79DF;&#x6237;&#x65B9;&#x6848;&#x4E2D;&#xFF0C;&#x53EF;&#x80FD;&#x4F1A;&#x521B;&#x5EFA;&#x548C;&#x5904;&#x7406;&#x8BB8;&#x591A;&#x7279;&#x5B9A;&#x7684;&#xFF0C;&#x77ED;&#x6682;&#x7684;<a class="reference internal" href="#sqlalchemy.engine.Engine" title="sqlalchemy.engine.Engine"><code class="xref py py-class docutils literal"><span class="pre">Engine</span></code></a>&#x5BF9;&#x8C61;&#x3002;</span></li></ul><p><span class="yiyi-st" id="yiyi-173">Connections that are <strong>checked out</strong> are <strong>not</strong> discarded when the engine is disposed or garbage collected, as these connections are still strongly referenced elsewhere by the application. </span><span class="yiyi-st" id="yiyi-174">However, after <a class="reference internal" href="#sqlalchemy.engine.Engine.dispose" title="sqlalchemy.engine.Engine.dispose"><code class="xref py py-meth docutils literal"><span class="pre">Engine.dispose()</span></code></a> is called, those connections are no longer associated with that <a class="reference internal" href="#sqlalchemy.engine.Engine" title="sqlalchemy.engine.Engine"><code class="xref py py-class docutils literal"><span class="pre">Engine</span></code></a>; when they are closed, they will be returned to their now-orphaned connection pool which will ultimately be garbage collected, once all connections which refer to it are also no longer referenced anywhere. </span><span class="yiyi-st" id="yiyi-175">&#x7531;&#x4E8E;&#x8FD9;&#x4E2A;&#x8FC7;&#x7A0B;&#x4E0D;&#x5BB9;&#x6613;&#x63A7;&#x5236;&#xFF0C;&#x5F3A;&#x70C8;&#x5EFA;&#x8BAE;&#x53EA;&#x6709;&#x5728;&#x6240;&#x6709;&#x7B7E;&#x51FA;&#x7684;&#x8FDE;&#x63A5;&#x88AB;&#x7B7E;&#x5165;&#x6216;&#x4EE5;&#x5176;&#x4ED6;&#x65B9;&#x5F0F;&#x53D6;&#x6D88;&#x5173;&#x8054;&#x540E;&#xFF0C;<a class="reference internal" href="#sqlalchemy.engine.Engine.dispose" title="sqlalchemy.engine.Engine.dispose"><code class="xref py py-meth docutils literal"><span class="pre">Engine.dispose()</span></code></a>&#x624D;&#x4F1A;&#x88AB;&#x8C03;&#x7528;&#x3002;</span></p><p><span class="yiyi-st" id="yiyi-176">&#x5BF9;<a class="reference internal" href="#sqlalchemy.engine.Engine" title="sqlalchemy.engine.Engine"><code class="xref py py-class docutils literal"><span class="pre">Engine</span></code></a>&#x5BF9;&#x8C61;&#x4F7F;&#x7528;&#x8FDE;&#x63A5;&#x6C60;&#x4EA7;&#x751F;&#x8D1F;&#x9762;&#x5F71;&#x54CD;&#x7684;&#x5E94;&#x7528;&#x7A0B;&#x5E8F;&#x7684;&#x66FF;&#x4EE3;&#x65B9;&#x6CD5;&#x662F;&#x5B8C;&#x5168;&#x7981;&#x7528;&#x6C60;&#x3002;</span><span class="yiyi-st" id="yiyi-177">&#x8FD9;&#x5BF9;&#x4E8E;&#x4F7F;&#x7528;&#x65B0;&#x7684;&#x8FDE;&#x63A5;&#x53EA;&#x4F1A;&#x4EA7;&#x751F;&#x9002;&#x5EA6;&#x7684;&#x6027;&#x80FD;&#x5F71;&#x54CD;&#xFF0C;&#x5E76;&#x4E14;&#x610F;&#x5473;&#x7740;&#x5F53;&#x8FDE;&#x63A5;&#x88AB;&#x7B7E;&#x5165;&#x65F6;&#xFF0C;&#x5B83;&#x88AB;&#x5B8C;&#x5168;&#x5C01;&#x95ED;&#x5E76;&#x4E14;&#x4E0D;&#x88AB;&#x4FDD;&#x5B58;&#x5728;&#x5185;&#x5B58;&#x4E2D;&#x3002;</span><span class="yiyi-st" id="yiyi-178">&#x6709;&#x5173;&#x5982;&#x4F55;&#x7981;&#x7528;&#x6C60;&#x7684;&#x51C6;&#x5219;&#xFF0C;&#x8BF7;&#x53C2;&#x89C1;<a class="reference internal" href="pooling.html#pool-switching"><span>Switching Pool Implementations</span></a>&#x3002;</span></p></div><div class="section" id="using-the-threadlocal-execution-strategy"><h2><span class="yiyi-st" id="yiyi-179">&#x4F7F;&#x7528;Threadlocal&#x6267;&#x884C;&#x7B56;&#x7565;<a class="headerlink" href="#using-the-threadlocal-execution-strategy" title="Permalink to this headline">&#xB6;</a></span></h2><p><span class="yiyi-st" id="yiyi-180">&#x201C;threadlocal&#x201D;&#x5F15;&#x64CE;&#x7B56;&#x7565;&#x662F;&#x4E00;&#x4E2A;&#x53EF;&#x9009;&#x529F;&#x80FD;&#xFF0C;&#x975E;ORM&#x5E94;&#x7528;&#x7A0B;&#x5E8F;&#x53EF;&#x4EE5;&#x4F7F;&#x7528;&#x8BE5;&#x529F;&#x80FD;&#x5C06;&#x4E8B;&#x52A1;&#x4E0E;&#x5F53;&#x524D;&#x7EBF;&#x7A0B;&#x5173;&#x8054;&#xFF0C;&#x4EE5;&#x4FBF;&#x5E94;&#x7528;&#x7A0B;&#x5E8F;&#x7684;&#x6240;&#x6709;&#x90E8;&#x5206;&#x90FD;&#x53EF;&#x4EE5;&#x9690;&#x5F0F;&#x5730;&#x53C2;&#x4E0E;&#x8BE5;&#x4E8B;&#x52A1;&#xFF0C;&#x800C;&#x65E0;&#x9700;&#x663E;&#x5F0F;&#x5F15;&#x7528;<a class="reference internal" href="#sqlalchemy.engine.Connection" title="sqlalchemy.engine.Connection"><code class="xref py py-class docutils literal"><span class="pre">Connection</span></code></a></span></p><div class="admonition note"><p class="first admonition-title"><span class="yiyi-st" id="yiyi-181">&#x6CE8;&#x610F;</span></p><p class="last"><span class="yiyi-st" id="yiyi-182">&#x901A;&#x5E38;&#x4E0D;&#x9F13;&#x52B1;&#x201C;threadlocal&#x201D;&#x529F;&#x80FD;&#x3002;</span><span class="yiyi-st" id="yiyi-183">&#x5B83;&#x88AB;&#x8BBE;&#x8BA1;&#x7528;&#x4E8E;&#x901A;&#x5E38;&#x88AB;&#x8BA4;&#x4E3A;&#x662F;&#x9057;&#x7559;&#x6A21;&#x5F0F;&#x7684;&#x7279;&#x5B9A;&#x4F7F;&#x7528;&#x6A21;&#x5F0F;&#x3002;</span><span class="yiyi-st" id="yiyi-184">It has <strong>no impact</strong> on the &#x201C;thread safety&#x201D; of SQLAlchemy components or one&#x2019;s application. </span><span class="yiyi-st" id="yiyi-185">&#x5B83;&#x4E5F;&#x4E0D;&#x5E94;&#x8BE5;&#x5728;&#x4F7F;&#x7528;ORM <a class="reference internal" href="orm_session_api.html#sqlalchemy.orm.session.Session" title="sqlalchemy.orm.session.Session"><code class="xref py py-class docutils literal"><span class="pre">Session</span></code></a>&#x5BF9;&#x8C61;&#x65F6;&#x4F7F;&#x7528;&#xFF0C;&#x56E0;&#x4E3A;<a class="reference internal" href="orm_session_api.html#sqlalchemy.orm.session.Session" title="sqlalchemy.orm.session.Session"><code class="xref py py-class docutils literal"><span class="pre">Session</span></code></a>&#x672C;&#x8EAB;&#x4EE3;&#x8868;&#x4E00;&#x4E2A;&#x6B63;&#x5728;&#x8FDB;&#x884C;&#x7684;&#x4E8B;&#x52A1;&#xFF0C;&#x5E76;&#x4E14;&#x5B83;&#x672C;&#x8EAB;&#x5904;&#x7406;&#x7EF4;&#x62A4;&#x8FDE;&#x63A5;&#x548C;&#x4E8B;&#x52A1;&#x8D44;&#x6E90;&#x7684;&#x5DE5;&#x4F5C;&#x3002;</span></p></div><p><span class="yiyi-st" id="yiyi-186">&#x542F;&#x7528;<code class="docutils literal"><span class="pre">threadlocal</span></code>&#x7684;&#x6B65;&#x9AA4;&#x5982;&#x4E0B;&#xFF1A;</span></p><div class="highlight-python"><div class="highlight"><pre><span></span><span class="n">db</span> <span class="o">=</span> <span class="n">create_engine</span><span class="p">(</span><span class="s1">&apos;mysql://localhost/test&apos;</span><span class="p">,</span> <span class="n">strategy</span><span class="o">=</span><span class="s1">&apos;threadlocal&apos;</span><span class="p">)</span></pre></div></div><p><span class="yiyi-st" id="yiyi-187">The above <a class="reference internal" href="#sqlalchemy.engine.Engine" title="sqlalchemy.engine.Engine"><code class="xref py py-class docutils literal"><span class="pre">Engine</span></code></a> will now acquire a <a class="reference internal" href="#sqlalchemy.engine.Connection" title="sqlalchemy.engine.Connection"><code class="xref py py-class docutils literal"><span class="pre">Connection</span></code></a> using connection resources derived from a thread-local variable whenever <a class="reference internal" href="#sqlalchemy.engine.Engine.execute" title="sqlalchemy.engine.Engine.execute"><code class="xref py py-meth docutils literal"><span class="pre">Engine.execute()</span></code></a> or <a class="reference internal" href="#sqlalchemy.engine.Engine.contextual_connect" title="sqlalchemy.engine.Engine.contextual_connect"><code class="xref py py-meth docutils literal"><span class="pre">Engine.contextual_connect()</span></code></a> is called. </span><span class="yiyi-st" id="yiyi-188">&#x53EA;&#x8981;&#x5F15;&#x7528;&#x8BE5;&#x8FDE;&#x63A5;&#x8D44;&#x6E90;&#xFF0C;&#x8BE5;&#x8FDE;&#x63A5;&#x8D44;&#x6E90;&#x5C31;&#x4F1A;&#x88AB;&#x7EF4;&#x62A4;&#xFF0C;&#x8FD9;&#x5141;&#x8BB8;&#x5E94;&#x7528;&#x7A0B;&#x5E8F;&#x7684;&#x591A;&#x4E2A;&#x70B9;&#x5728;&#x4F7F;&#x7528;&#x65E0;&#x8FDE;&#x63A5;&#x6267;&#x884C;&#x65F6;&#x5171;&#x4EAB;&#x4E8B;&#x52A1;&#xFF1A;</span></p><div class="highlight-python"><div class="highlight"><pre><span></span><span class="k">def</span> <span class="nf">call_operation1</span><span class="p">():</span>
    <span class="n">engine</span><span class="o">.</span><span class="n">execute</span><span class="p">(</span><span class="s2">&quot;insert into users values (?, ?)&quot;</span><span class="p">,</span> <span class="mi">1</span><span class="p">,</span> <span class="s2">&quot;john&quot;</span><span class="p">)</span>

<span class="k">def</span> <span class="nf">call_operation2</span><span class="p">():</span>
    <span class="n">users</span><span class="o">.</span><span class="n">update</span><span class="p">(</span><span class="n">users</span><span class="o">.</span><span class="n">c</span><span class="o">.</span><span class="n">user_id</span><span class="o">==</span><span class="mi">5</span><span class="p">)</span><span class="o">.</span><span class="n">execute</span><span class="p">(</span><span class="n">name</span><span class="o">=</span><span class="s1">&apos;ed&apos;</span><span class="p">)</span>

<span class="n">db</span><span class="o">.</span><span class="n">begin</span><span class="p">()</span>
<span class="k">try</span><span class="p">:</span>
    <span class="n">call_operation1</span><span class="p">()</span>
    <span class="n">call_operation2</span><span class="p">()</span>
    <span class="n">db</span><span class="o">.</span><span class="n">commit</span><span class="p">()</span>
<span class="k">except</span><span class="p">:</span>
    <span class="n">db</span><span class="o">.</span><span class="n">rollback</span><span class="p">()</span></pre></div></div><p><span class="yiyi-st" id="yiyi-189">&#x901A;&#x8FC7;&#x4F7F;&#x7528;<a class="reference internal" href="#sqlalchemy.engine.Engine.connect" title="sqlalchemy.engine.Engine.connect"><code class="xref py py-meth docutils literal"><span class="pre">Engine.connect()</span></code></a>&#x65B9;&#x6CD5;&#x83B7;&#x53D6;&#x4E0D;&#x5C5E;&#x4E8E;threadlocal&#x8303;&#x56F4;&#x7684;<a class="reference internal" href="#sqlalchemy.engine.Connection" title="sqlalchemy.engine.Connection"><code class="xref py py-class docutils literal"><span class="pre">Connection</span></code></a>&#xFF0C;&#x53EF;&#x4EE5;&#x5C06;&#x663E;&#x5F0F;&#x6267;&#x884C;&#x4E0E;&#x65E0;&#x8FDE;&#x63A5;&#x6267;&#x884C;&#x6DF7;&#x5408;&#x5728;&#x4E00;&#x8D77;&#xFF1A;</span></p><div class="highlight-python"><div class="highlight"><pre><span></span><span class="n">db</span><span class="o">.</span><span class="n">begin</span><span class="p">()</span>
<span class="n">conn</span> <span class="o">=</span> <span class="n">db</span><span class="o">.</span><span class="n">connect</span><span class="p">()</span>
<span class="k">try</span><span class="p">:</span>
    <span class="n">conn</span><span class="o">.</span><span class="n">execute</span><span class="p">(</span><span class="n">log_table</span><span class="o">.</span><span class="n">insert</span><span class="p">(),</span> <span class="n">message</span><span class="o">=</span><span class="s2">&quot;Operation started&quot;</span><span class="p">)</span>
    <span class="n">call_operation1</span><span class="p">()</span>
    <span class="n">call_operation2</span><span class="p">()</span>
    <span class="n">db</span><span class="o">.</span><span class="n">commit</span><span class="p">()</span>
    <span class="n">conn</span><span class="o">.</span><span class="n">execute</span><span class="p">(</span><span class="n">log_table</span><span class="o">.</span><span class="n">insert</span><span class="p">(),</span> <span class="n">message</span><span class="o">=</span><span class="s2">&quot;Operation succeeded&quot;</span><span class="p">)</span>
<span class="k">except</span><span class="p">:</span>
    <span class="n">db</span><span class="o">.</span><span class="n">rollback</span><span class="p">()</span>
    <span class="n">conn</span><span class="o">.</span><span class="n">execute</span><span class="p">(</span><span class="n">log_table</span><span class="o">.</span><span class="n">insert</span><span class="p">(),</span> <span class="n">message</span><span class="o">=</span><span class="s2">&quot;Operation failed&quot;</span><span class="p">)</span>
<span class="k">finally</span><span class="p">:</span>
    <span class="n">conn</span><span class="o">.</span><span class="n">close</span><span class="p">()</span></pre></div></div><p><span class="yiyi-st" id="yiyi-190">&#x8981;&#x8BBF;&#x95EE;&#x7ED1;&#x5B9A;&#x5230;threadlocal&#x4F5C;&#x7528;&#x57DF;&#x7684;<a class="reference internal" href="#sqlalchemy.engine.Connection" title="sqlalchemy.engine.Connection"><code class="xref py py-class docutils literal"><span class="pre">Connection</span></code></a>&#xFF0C;&#x8BF7;&#x8C03;&#x7528;<a class="reference internal" href="#sqlalchemy.engine.Engine.contextual_connect" title="sqlalchemy.engine.Engine.contextual_connect"><code class="xref py py-meth docutils literal"><span class="pre">Engine.contextual_connect()</span></code></a>&#xFF1A;</span></p><div class="highlight-python"><div class="highlight"><pre><span></span><span class="n">conn</span> <span class="o">=</span> <span class="n">db</span><span class="o">.</span><span class="n">contextual_connect</span><span class="p">()</span>
<span class="n">call_operation3</span><span class="p">(</span><span class="n">conn</span><span class="p">)</span>
<span class="n">conn</span><span class="o">.</span><span class="n">close</span><span class="p">()</span></pre></div></div><p><span class="yiyi-st" id="yiyi-191">Calling <a class="reference internal" href="#sqlalchemy.engine.Connection.close" title="sqlalchemy.engine.Connection.close"><code class="xref py py-meth docutils literal"><span class="pre">close()</span></code></a> on the &#x201C;contextual&#x201D; connection does not <a class="reference internal" href="glossary.html#term-release"><span class="xref std std-term">release</span></a> its resources until all other usages of that resource are closed as well, including that any ongoing transactions are rolled back or committed.</span></p></div><div class="section" id="working-with-raw-dbapi-connections"><h2><span class="yiyi-st" id="yiyi-192">&#x4F7F;&#x7528;&#x539F;&#x59CB;DBAPI&#x8FDE;&#x63A5;<a class="headerlink" href="#working-with-raw-dbapi-connections" title="Permalink to this headline">&#xB6;</a></span></h2><p><span class="yiyi-st" id="yiyi-193">&#x5728;&#x67D0;&#x4E9B;&#x60C5;&#x51B5;&#x4E0B;&#xFF0C;SQLAlchemy&#x4E0D;&#x63D0;&#x4F9B;&#x8BBF;&#x95EE;&#x67D0;&#x4E9B;<a class="reference internal" href="glossary.html#term-dbapi"><span class="xref std std-term">DBAPI</span></a>&#x51FD;&#x6570;&#x7684;&#x901A;&#x7528;&#x65B9;&#x6CD5;&#xFF0C;&#x4F8B;&#x5982;&#x8C03;&#x7528;&#x5B58;&#x50A8;&#x8FC7;&#x7A0B;&#x4EE5;&#x53CA;&#x5904;&#x7406;&#x591A;&#x4E2A;&#x7ED3;&#x679C;&#x96C6;&#x3002;</span><span class="yiyi-st" id="yiyi-194">&#x5728;&#x8FD9;&#x4E9B;&#x60C5;&#x51B5;&#x4E0B;&#xFF0C;&#x76F4;&#x63A5;&#x5904;&#x7406;&#x539F;&#x59CB;DBAPI&#x8FDE;&#x63A5;&#x4E5F;&#x662F;&#x9002;&#x5B9C;&#x7684;&#x3002;</span></p><p><span class="yiyi-st" id="yiyi-195">&#x8BBF;&#x95EE;&#x539F;&#x59CB;DBAPI&#x8FDE;&#x63A5;&#x7684;&#x6700;&#x5E38;&#x89C1;&#x65B9;&#x5F0F;&#x662F;&#x76F4;&#x63A5;&#x4ECE;&#x5DF2;&#x5B58;&#x5728;&#x7684;<a class="reference internal" href="#sqlalchemy.engine.Connection" title="sqlalchemy.engine.Connection"><code class="xref py py-class docutils literal"><span class="pre">Connection</span></code></a>&#x5BF9;&#x8C61;&#x4E2D;&#x83B7;&#x53D6;&#x5B83;&#x3002;</span><span class="yiyi-st" id="yiyi-196">&#x5B83;&#x4F7F;&#x7528;<a class="reference internal" href="#sqlalchemy.engine.Connection.connection" title="sqlalchemy.engine.Connection.connection"><code class="xref py py-attr docutils literal"><span class="pre">Connection.connection</span></code></a>&#x5C5E;&#x6027;&#x5B58;&#x5728;&#xFF1A;</span></p><div class="highlight-python"><div class="highlight"><pre><span></span><span class="n">connection</span> <span class="o">=</span> <span class="n">engine</span><span class="o">.</span><span class="n">connect</span><span class="p">()</span>
<span class="n">dbapi_conn</span> <span class="o">=</span> <span class="n">connection</span><span class="o">.</span><span class="n">connection</span></pre></div></div><p><span class="yiyi-st" id="yiyi-197">&#x8FD9;&#x91CC;&#x7684;DBAPI&#x8FDE;&#x63A5;&#x5B9E;&#x9645;&#x4E0A;&#x662F;&#x6E90;&#x4E8E;&#x8FDE;&#x63A5;&#x6C60;&#x7684;&#x201C;&#x4EE3;&#x7406;&#x201D;&#xFF0C;&#x4F46;&#x8FD9;&#x662F;&#x4E00;&#x4E2A;&#x5B9E;&#x73B0;&#x7EC6;&#x8282;&#xFF0C;&#x5728;&#x5927;&#x591A;&#x6570;&#x60C5;&#x51B5;&#x4E0B;&#x53EF;&#x4EE5;&#x5FFD;&#x7565;&#x3002;</span><span class="yiyi-st" id="yiyi-198">As this DBAPI connection is still contained within the scope of an owning <a class="reference internal" href="#sqlalchemy.engine.Connection" title="sqlalchemy.engine.Connection"><code class="xref py py-class docutils literal"><span class="pre">Connection</span></code></a> object, it is best to make use of the <a class="reference internal" href="#sqlalchemy.engine.Connection" title="sqlalchemy.engine.Connection"><code class="xref py py-class docutils literal"><span class="pre">Connection</span></code></a> object for most features such as transaction control as well as calling the <a class="reference internal" href="#sqlalchemy.engine.Connection.close" title="sqlalchemy.engine.Connection.close"><code class="xref py py-meth docutils literal"><span class="pre">Connection.close()</span></code></a> method; if these operations are performed on the DBAPI connection directly, the owning <a class="reference internal" href="#sqlalchemy.engine.Connection" title="sqlalchemy.engine.Connection"><code class="xref py py-class docutils literal"><span class="pre">Connection</span></code></a> will not be aware of these changes in state.</span></p><p><span class="yiyi-st" id="yiyi-199">To overcome the limitations imposed by the DBAPI connection that is maintained by an owning <a class="reference internal" href="#sqlalchemy.engine.Connection" title="sqlalchemy.engine.Connection"><code class="xref py py-class docutils literal"><span class="pre">Connection</span></code></a>, a DBAPI connection is also available without the need to procure a <a class="reference internal" href="#sqlalchemy.engine.Connection" title="sqlalchemy.engine.Connection"><code class="xref py py-class docutils literal"><span class="pre">Connection</span></code></a> first, using the <a class="reference internal" href="#sqlalchemy.engine.Engine.raw_connection" title="sqlalchemy.engine.Engine.raw_connection"><code class="xref py py-meth docutils literal"><span class="pre">Engine.raw_connection()</span></code></a> method of <a class="reference internal" href="#sqlalchemy.engine.Engine" title="sqlalchemy.engine.Engine"><code class="xref py py-class docutils literal"><span class="pre">Engine</span></code></a>:</span></p><div class="highlight-python"><div class="highlight"><pre><span></span><span class="n">dbapi_conn</span> <span class="o">=</span> <span class="n">engine</span><span class="o">.</span><span class="n">raw_connection</span><span class="p">()</span></pre></div></div><p><span class="yiyi-st" id="yiyi-200">&#x8FD9;&#x4E2A;DBAPI&#x8FDE;&#x63A5;&#x53C8;&#x662F;&#x4E00;&#x4E2A;&#x201C;&#x4EE3;&#x7406;&#x201D;&#x5F62;&#x5F0F;&#xFF0C;&#x5C31;&#x50CF;&#x4EE5;&#x524D;&#x4E00;&#x6837;&#x3002;</span><span class="yiyi-st" id="yiyi-201">&#x8FD9;&#x4E2A;&#x4EE3;&#x7406;&#x7684;&#x76EE;&#x7684;&#x662F;&#x663E;&#x800C;&#x6613;&#x89C1;&#x7684;&#xFF0C;&#x56E0;&#x4E3A;&#x5F53;&#x6211;&#x4EEC;&#x8C03;&#x7528;&#x8FD9;&#x4E2A;&#x8FDE;&#x63A5;&#x7684;<code class="docutils literal"><span class="pre">.close()</span></code>&#x65B9;&#x6CD5;&#x65F6;&#xFF0C;DBAPI&#x8FDE;&#x63A5;&#x901A;&#x5E38;&#x5E76;&#x4E0D;&#x5B9E;&#x9645;&#x5173;&#x95ED;&#xFF0C;&#x800C;&#x662F;<a class="reference internal" href="glossary.html#term-released"><span class="xref std std-term">released</span></a>&#x5230;&#x5F15;&#x64CE;&#x7684;&#x8FDE;&#x63A5;&#x6C60;&#xFF1A;</span></p><div class="highlight-python"><div class="highlight"><pre><span></span><span class="n">dbapi_conn</span><span class="o">.</span><span class="n">close</span><span class="p">()</span></pre></div></div><p><span class="yiyi-st" id="yiyi-202">&#x5C3D;&#x7BA1;SQLAlchemy&#x672A;&#x6765;&#x53EF;&#x80FD;&#x4F1A;&#x4E3A;&#x66F4;&#x591A;DBAPI&#x7528;&#x4F8B;&#x6DFB;&#x52A0;&#x5185;&#x7F6E;&#x6A21;&#x5F0F;&#xFF0C;&#x4F46;&#x7531;&#x4E8E;&#x8FD9;&#x4E9B;&#x60C5;&#x51B5;&#x5F80;&#x5F80;&#x5F88;&#x5C11;&#x9700;&#x8981;&#xFF0C;&#x5E76;&#x4E14;&#x5B83;&#x4EEC;&#x4E5F;&#x9AD8;&#x5EA6;&#x4F9D;&#x8D56;&#x4E8E;&#x6240;&#x4F7F;&#x7528;&#x7684;DBAPI&#x7684;&#x7C7B;&#x578B;&#x800C;&#x6709;&#x6240;&#x4E0D;&#x540C;&#xFF0C;&#x6240;&#x4EE5;&#x65E0;&#x8BBA;&#x5982;&#x4F55;&#xFF0C;&#x76F4;&#x63A5;DBAPI&#x5BF9;&#x4E8E;&#x90A3;&#x4E9B;&#x9700;&#x8981;&#x7684;&#x60C5;&#x51B5;&#xFF0C;&#x8C03;&#x7528;&#x6A21;&#x5F0F;&#x603B;&#x662F;&#x5B58;&#x5728;&#x7684;&#x3002;</span></p><p><span class="yiyi-st" id="yiyi-203">&#x4EE5;&#x4E0B;&#x662F;&#x4E00;&#x4E9B;DBAPI&#x8FDE;&#x63A5;&#x4F7F;&#x7528;&#x7684;&#x914D;&#x65B9;&#x3002;</span></p><div class="section" id="calling-stored-procedures"><h3><span class="yiyi-st" id="yiyi-204">&#x8C03;&#x7528;&#x5B58;&#x50A8;&#x8FC7;&#x7A0B;<a class="headerlink" href="#calling-stored-procedures" title="Permalink to this headline">&#xB6;</a></span></h3><p><span class="yiyi-st" id="yiyi-205">&#x5BF9;&#x4E8E;&#x5177;&#x6709;&#x7279;&#x6B8A;&#x8BED;&#x6CD5;&#x6216;&#x53C2;&#x6570;&#x5173;&#x6CE8;&#x7684;&#x5B58;&#x50A8;&#x8FC7;&#x7A0B;&#xFF0C;&#x53EF;&#x4EE5;&#x4F7F;&#x7528;DBAPI&#x7EA7;&#x522B;<a class="reference external" href="http://legacy.python.org/dev/peps/pep-0249/#callproc">callproc</a>&#xFF1A;</span></p><div class="highlight-python"><div class="highlight"><pre><span></span><span class="n">connection</span> <span class="o">=</span> <span class="n">engine</span><span class="o">.</span><span class="n">raw_connection</span><span class="p">()</span>
<span class="k">try</span><span class="p">:</span>
    <span class="n">cursor</span> <span class="o">=</span> <span class="n">connection</span><span class="o">.</span><span class="n">cursor</span><span class="p">()</span>
    <span class="n">cursor</span><span class="o">.</span><span class="n">callproc</span><span class="p">(</span><span class="s2">&quot;my_procedure&quot;</span><span class="p">,</span> <span class="p">[</span><span class="s1">&apos;x&apos;</span><span class="p">,</span> <span class="s1">&apos;y&apos;</span><span class="p">,</span> <span class="s1">&apos;z&apos;</span><span class="p">])</span>
    <span class="n">results</span> <span class="o">=</span> <span class="nb">list</span><span class="p">(</span><span class="n">cursor</span><span class="o">.</span><span class="n">fetchall</span><span class="p">())</span>
    <span class="n">cursor</span><span class="o">.</span><span class="n">close</span><span class="p">()</span>
    <span class="n">connection</span><span class="o">.</span><span class="n">commit</span><span class="p">()</span>
<span class="k">finally</span><span class="p">:</span>
    <span class="n">connection</span><span class="o">.</span><span class="n">close</span><span class="p">()</span></pre></div></div></div><div class="section" id="multiple-result-sets"><h3><span class="yiyi-st" id="yiyi-206">&#x591A;&#x4E2A;&#x7ED3;&#x679C;&#x96C6;<a class="headerlink" href="#multiple-result-sets" title="Permalink to this headline">&#xB6;</a></span></h3><p><span class="yiyi-st" id="yiyi-207">&#x4F7F;&#x7528;<a class="reference external" href="http://legacy.python.org/dev/peps/pep-0249/#nextset">nextset</a>&#x65B9;&#x6CD5;&#x4ECE;&#x539F;&#x59CB;DBAPI&#x6E38;&#x6807;&#x63D0;&#x4F9B;&#x591A;&#x4E2A;&#x7ED3;&#x679C;&#x96C6;&#x652F;&#x6301;&#xFF1A;</span></p><div class="highlight-python"><div class="highlight"><pre><span></span><span class="n">connection</span> <span class="o">=</span> <span class="n">engine</span><span class="o">.</span><span class="n">raw_connection</span><span class="p">()</span>
<span class="k">try</span><span class="p">:</span>
    <span class="n">cursor</span> <span class="o">=</span> <span class="n">connection</span><span class="o">.</span><span class="n">cursor</span><span class="p">()</span>
    <span class="n">cursor</span><span class="o">.</span><span class="n">execute</span><span class="p">(</span><span class="s2">&quot;select * from table1; select * from table2&quot;</span><span class="p">)</span>
    <span class="n">results_one</span> <span class="o">=</span> <span class="n">cursor</span><span class="o">.</span><span class="n">fetchall</span><span class="p">()</span>
    <span class="n">cursor</span><span class="o">.</span><span class="n">nextset</span><span class="p">()</span>
    <span class="n">results_two</span> <span class="o">=</span> <span class="n">cursor</span><span class="o">.</span><span class="n">fetchall</span><span class="p">()</span>
    <span class="n">cursor</span><span class="o">.</span><span class="n">close</span><span class="p">()</span>
<span class="k">finally</span><span class="p">:</span>
    <span class="n">connection</span><span class="o">.</span><span class="n">close</span><span class="p">()</span></pre></div></div></div></div><div class="section" id="registering-new-dialects"><h2><span class="yiyi-st" id="yiyi-208">&#x6CE8;&#x518C;&#x65B0;&#x65B9;&#x8A00;<a class="headerlink" href="#registering-new-dialects" title="Permalink to this headline">&#xB6;</a></span></h2><p><span class="yiyi-st" id="yiyi-209"><a class="reference internal" href="engines.html#sqlalchemy.create_engine" title="sqlalchemy.create_engine"><code class="xref py py-func docutils literal"><span class="pre">create_engine()</span></code></a>&#x51FD;&#x6570;&#x8C03;&#x7528;&#x4F7F;&#x7528;setuptools&#x5165;&#x53E3;&#x70B9;&#x5B9A;&#x4F4D;&#x7ED9;&#x5B9A;&#x7684;&#x65B9;&#x8A00;&#x3002;</span><span class="yiyi-st" id="yiyi-210">&#x8FD9;&#x4E9B;&#x5165;&#x53E3;&#x70B9;&#x53EF;&#x4EE5;&#x5728;setup.py&#x811A;&#x672C;&#x4E2D;&#x4E3A;&#x7B2C;&#x4E09;&#x65B9;&#x65B9;&#x8A00;&#x5EFA;&#x7ACB;&#x3002;</span><span class="yiyi-st" id="yiyi-211">&#x4F8B;&#x5982;&#xFF0C;&#x8981;&#x521B;&#x5EFA;&#x4E00;&#x4E2A;&#x65B0;&#x7684;&#x65B9;&#x8A00;&#x201C;foodialect&#xFF1A;//&#x201D;&#xFF0C;&#x6B65;&#x9AA4;&#x5982;&#x4E0B;&#xFF1A;</span></p><ol class="arabic"><li><p class="first"><span class="yiyi-st" id="yiyi-212">&#x521B;&#x5EFA;&#x4E00;&#x4E2A;&#x540D;&#x4E3A;<code class="docutils literal"><span class="pre">foodialect</span></code>&#x7684;&#x5305;&#x3002;</span></p></li><li><p class="first"><span class="yiyi-st" id="yiyi-213">&#x8BE5;&#x5305;&#x5E94;&#x8BE5;&#x6709;&#x4E00;&#x4E2A;&#x5305;&#x542B;dialect&#x7C7B;&#x7684;&#x6A21;&#x5757;&#xFF0C;&#x8BE5;&#x7C7B;&#x901A;&#x5E38;&#x662F;<a class="reference internal" href="internals.html#sqlalchemy.engine.default.DefaultDialect" title="sqlalchemy.engine.default.DefaultDialect"><code class="xref py py-class docutils literal"><span class="pre">sqlalchemy.engine.default.DefaultDialect</span></code></a>&#x7684;&#x5B50;&#x7C7B;&#x3002;</span><span class="yiyi-st" id="yiyi-214">&#x5728;&#x8FD9;&#x4E2A;&#x4F8B;&#x5B50;&#x4E2D;&#xFF0C;&#x6211;&#x4EEC;&#x5047;&#x8BBE;&#x5B83;&#x53EB;&#x505A;<code class="docutils literal"><span class="pre">FooDialect</span></code>&#xFF0C;&#x5B83;&#x7684;&#x6A21;&#x5757;&#x901A;&#x8FC7;<code class="docutils literal"><span class="pre">foodialect.dialect</span></code>&#x8BBF;&#x95EE;&#x3002;</span></p></li><li><p class="first"><span class="yiyi-st" id="yiyi-215">&#x5165;&#x53E3;&#x70B9;&#x53EF;&#x4EE5;&#x5728;setup.py&#x4E2D;&#x5EFA;&#x7ACB;&#xFF0C;&#x5982;&#x4E0B;&#x6240;&#x793A;&#xFF1A;</span></p><div class="highlight-python"><div class="highlight"><pre><span></span><span class="n">entry_points</span><span class="o">=</span><span class="s2">&quot;&quot;&quot;</span>
<span class="s2">[sqlalchemy.dialects]</span>
<span class="s2">foodialect = foodialect.dialect:FooDialect</span>
<span class="s2">&quot;&quot;&quot;</span></pre></div></div></li></ol><p><span class="yiyi-st" id="yiyi-216">&#x5982;&#x679C;&#x65B9;&#x8A00;&#x5728;&#x73B0;&#x6709;&#x7684;SQLAlchemy&#x652F;&#x6301;&#x7684;&#x6570;&#x636E;&#x5E93;&#x4E4B;&#x4E0A;&#x4E3A;&#x7279;&#x5B9A;&#x7684;DBAPI&#x63D0;&#x4F9B;&#x652F;&#x6301;&#xFF0C;&#x5219;&#x53EF;&#x4EE5;&#x7ED9;&#x51FA;&#x540D;&#x79F0;&#xFF0C;&#x5305;&#x62EC;&#x6570;&#x636E;&#x5E93;&#x9650;&#x5B9A;&#x3002;</span><span class="yiyi-st" id="yiyi-217">&#x4F8B;&#x5982;&#xFF0C;&#x5982;&#x679C;<code class="docutils literal"><span class="pre">FooDialect</span></code>&#x5B9E;&#x9645;&#x4E0A;&#x662F;&#x4E00;&#x4E2A;MySQL&#x65B9;&#x8A00;&#xFF0C;&#x90A3;&#x4E48;&#x53EF;&#x4EE5;&#x50CF;&#x8FD9;&#x6837;&#x5EFA;&#x7ACB;&#x5165;&#x53E3;&#x70B9;&#xFF1A;</span></p><div class="highlight-python"><div class="highlight"><pre><span></span><span class="n">entry_points</span><span class="o">=</span><span class="s2">&quot;&quot;&quot;</span>
<span class="s2">[sqlalchemy.dialects]</span>
<span class="s2">mysql.foodialect = foodialect.dialect:FooDialect</span>
<span class="s2">&quot;&quot;&quot;</span></pre></div></div><p><span class="yiyi-st" id="yiyi-218">&#x4E0A;&#x9762;&#x7684;&#x5165;&#x53E3;&#x70B9;&#x5C06;&#x4F5C;&#x4E3A;<code class="docutils literal"><span class="pre">create_engine(&quot;mysql+foodialect://&quot;)</span></code>&#x8BBF;&#x95EE;&#x3002;</span></p><div class="section" id="registering-dialects-in-process"><h3><span class="yiyi-st" id="yiyi-219">&#x5728;&#x7EBF;&#x6CE8;&#x518C;&#x65B9;&#x8A00;<a class="headerlink" href="#registering-dialects-in-process" title="Permalink to this headline">&#xB6;</a></span></h3><p><span class="yiyi-st" id="yiyi-220">SQLAlchemy&#x8FD8;&#x5141;&#x8BB8;&#x5728;&#x5F53;&#x524D;&#x8FDB;&#x7A0B;&#x4E2D;&#x6CE8;&#x518C;&#x4E00;&#x4E2A;&#x65B9;&#x8A00;&#xFF0C;&#x800C;&#x4E0D;&#x9700;&#x8981;&#x5355;&#x72EC;&#x5B89;&#x88C5;&#x3002;</span><span class="yiyi-st" id="yiyi-221">&#x4F7F;&#x7528;<code class="docutils literal"><span class="pre">register()</span></code>&#x51FD;&#x6570;&#x5982;&#x4E0B;&#xFF1A;</span></p><div class="highlight-python"><div class="highlight"><pre><span></span><span class="kn">from</span> <span class="nn">sqlalchemy.dialects</span> <span class="kn">import</span> <span class="n">registry</span>
<span class="n">registry</span><span class="o">.</span><span class="n">register</span><span class="p">(</span><span class="s2">&quot;mysql.foodialect&quot;</span><span class="p">,</span> <span class="s2">&quot;myapp.dialect&quot;</span><span class="p">,</span> <span class="s2">&quot;MyMySQLDialect&quot;</span><span class="p">)</span></pre></div></div><p><span class="yiyi-st" id="yiyi-222">The above will respond to <code class="docutils literal"><span class="pre">create_engine(&quot;mysql+foodialect://&quot;)</span></code> and load the <code class="docutils literal"><span class="pre">MyMySQLDialect</span></code> class from the <code class="docutils literal"><span class="pre">myapp.dialect</span></code> module.</span></p><div class="versionadded"><p><span class="yiyi-st" id="yiyi-223"><span class="versionmodified">0.8&#x7248;&#x672C;&#x4E2D;&#x7684;&#x65B0;&#x529F;&#x80FD;</span></span></p></div></div></div><div class="section" id="connection-engine-api"><h2><span class="yiyi-st" id="yiyi-224">&#x8FDE;&#x63A5;/&#x5F15;&#x64CE;API <a class="headerlink" href="#connection-engine-api" title="Permalink to this headline">&#xB6;</a></span></h2><dl class="class"><dt id="sqlalchemy.engine.Connection"><span class="yiyi-st" id="yiyi-225"> <em class="property">class </em><code class="descclassname">sqlalchemy.engine.</code><code class="descname">Connection</code><span class="sig-paren">(</span><em>engine</em>, <em>connection=None</em>, <em>close_with_result=False</em>, <em>_branch_from=None</em>, <em>_execution_options=None</em>, <em>_dispatch=None</em>, <em>_has_events=None</em><span class="sig-paren">)</span><a class="headerlink" href="#sqlalchemy.engine.Connection" title="Permalink to this definition">&#xB6;</a></span></dt><dd><p><span class="yiyi-st" id="yiyi-226">&#x57FA;&#x7840;&#xFF1A;<a class="reference internal" href="#sqlalchemy.engine.Connectable" title="sqlalchemy.engine.Connectable"><code class="xref py py-class docutils literal"><span class="pre">sqlalchemy.engine.Connectable</span></code></a></span></p><p><span class="yiyi-st" id="yiyi-227">&#x4E3A;&#x5305;&#x88C5;&#x7684;DB-API&#x8FDE;&#x63A5;&#x63D0;&#x4F9B;&#x9AD8;&#x7EA7;&#x529F;&#x80FD;&#x3002;</span></p><p><span class="yiyi-st" id="yiyi-228">&#x4E3A;&#x57FA;&#x4E8E;&#x5B57;&#x7B26;&#x4E32;&#x7684;SQL&#x8BED;&#x53E5;&#x4EE5;&#x53CA;<a class="reference internal" href="sqlelement.html#sqlalchemy.sql.expression.ClauseElement" title="sqlalchemy.sql.expression.ClauseElement"><code class="xref py py-class docutils literal"><span class="pre">ClauseElement</span></code></a>&#xFF0C;<a class="reference internal" href="internals.html#sqlalchemy.engine.interfaces.Compiled" title="sqlalchemy.engine.interfaces.Compiled"><code class="xref py py-class docutils literal"><span class="pre">Compiled</span></code></a>&#x548C;<a class="reference internal" href="defaults.html#sqlalchemy.schema.DefaultGenerator" title="sqlalchemy.schema.DefaultGenerator"><code class="xref py py-class docutils literal"><span class="pre">DefaultGenerator</span></code></a>&#x5BF9;&#x8C61;&#x63D0;&#x4F9B;&#x6267;&#x884C;&#x652F;&#x6301;&#x3002;</span><span class="yiyi-st" id="yiyi-229">Provides a <a class="reference internal" href="#sqlalchemy.engine.Connection.begin" title="sqlalchemy.engine.Connection.begin"><code class="xref py py-meth docutils literal"><span class="pre">begin()</span></code></a> method to return <a class="reference internal" href="#sqlalchemy.engine.Transaction" title="sqlalchemy.engine.Transaction"><code class="xref py py-class docutils literal"><span class="pre">Transaction</span></code></a> objects.</span></p><p><span class="yiyi-st" id="yiyi-230">Connection&#x5BF9;&#x8C61;&#x662F;<strong>&#x4E0D;&#x662F;</strong>&#x7EBF;&#x7A0B;&#x5B89;&#x5168;&#x7684;&#x3002;</span><span class="yiyi-st" id="yiyi-231">&#x867D;&#x7136;&#x53EF;&#x4EE5;&#x5728;&#x4F7F;&#x7528;&#x6B63;&#x786E;&#x540C;&#x6B65;&#x8BBF;&#x95EE;&#x7684;&#x7EBF;&#x7A0B;&#x4E4B;&#x95F4;&#x5171;&#x4EAB;Connection&#xFF0C;&#x4F46;&#x5E95;&#x5C42;DBAPI&#x8FDE;&#x63A5;&#x4ECD;&#x53EF;&#x80FD;&#x4E0D;&#x652F;&#x6301;&#x7EBF;&#x7A0B;&#x4E4B;&#x95F4;&#x7684;&#x5171;&#x4EAB;&#x8BBF;&#x95EE;&#x3002;</span><span class="yiyi-st" id="yiyi-232">&#x6709;&#x5173;&#x8BE6;&#x7EC6;&#x4FE1;&#x606F;&#xFF0C;&#x8BF7;&#x67E5;&#x9605;DBAPI&#x6587;&#x6863;&#x3002;</span></p><p><span class="yiyi-st" id="yiyi-233">Connection&#x5BF9;&#x8C61;&#x8868;&#x793A;&#x4ECE;&#x8FDE;&#x63A5;&#x6C60;&#x68C0;&#x51FA;&#x7684;&#x5355;&#x4E2A;dbapi&#x8FDE;&#x63A5;&#x3002;</span><span class="yiyi-st" id="yiyi-234">&#x5728;&#x6B64;&#x72B6;&#x6001;&#x4E0B;&#xFF0C;&#x8FDE;&#x63A5;&#x6C60;&#x4E0D;&#x4F1A;&#x5F71;&#x54CD;&#x8FDE;&#x63A5;&#xFF0C;&#x5305;&#x62EC;&#x8FDE;&#x63A5;&#x7684;&#x5230;&#x671F;&#x6216;&#x8D85;&#x65F6;&#x72B6;&#x6001;&#x3002;</span><span class="yiyi-st" id="yiyi-235">&#x4E3A;&#x4E86;&#x4F7F;&#x8FDE;&#x63A5;&#x6C60;&#x6B63;&#x786E;&#x7BA1;&#x7406;&#x8FDE;&#x63A5;&#xFF0C;&#x53EA;&#x8981;&#x8FDE;&#x63A5;&#x672A;&#x88AB;&#x4F7F;&#x7528;&#xFF0C;&#x8FDE;&#x63A5;&#x5E94;&#x8BE5;&#x8FD4;&#x56DE;&#x5230;&#x8FDE;&#x63A5;&#x6C60;&#xFF08;&#x5373;<code class="docutils literal"><span class="pre">connection.close()</span></code>&#xFF09;&#x3002;</span></p><dl class="method"><dt id="sqlalchemy.engine.Connection.__init__"><span class="yiyi-st" id="yiyi-236"> <code class="descname">__init__</code><span class="sig-paren">(</span><em>engine</em>, <em>connection=None</em>, <em>close_with_result=False</em>, <em>_branch_from=None</em>, <em>_execution_options=None</em>, <em>_dispatch=None</em>, <em>_has_events=None</em><span class="sig-paren">)</span><a class="headerlink" href="#sqlalchemy.engine.Connection.__init__" title="Permalink to this definition">&#xB6;</a></span></dt><dd><p><span class="yiyi-st" id="yiyi-237">&#x6784;&#x5EFA;&#x4E00;&#x4E2A;&#x65B0;&#x7684;&#x8FDE;&#x63A5;&#x3002;</span></p><p><span class="yiyi-st" id="yiyi-238">&#x8FD9;&#x91CC;&#x7684;&#x6784;&#x9020;&#x51FD;&#x6570;&#x4E0D;&#x662F;&#x516C;&#x5171;&#x7684;&#xFF0C;&#x53EA;&#x80FD;&#x7531;<a class="reference internal" href="#sqlalchemy.engine.Engine" title="sqlalchemy.engine.Engine"><code class="xref py py-class docutils literal"><span class="pre">Engine</span></code></a>&#x8C03;&#x7528;&#x3002;</span><span class="yiyi-st" id="yiyi-239">&#x8BF7;&#x53C2;&#x9605;<a class="reference internal" href="#sqlalchemy.engine.Engine.connect" title="sqlalchemy.engine.Engine.connect"><code class="xref py py-meth docutils literal"><span class="pre">Engine.connect()</span></code></a>&#x548C;<a class="reference internal" href="#sqlalchemy.engine.Engine.contextual_connect" title="sqlalchemy.engine.Engine.contextual_connect"><code class="xref py py-meth docutils literal"><span class="pre">Engine.contextual_connect()</span></code></a>&#x65B9;&#x6CD5;&#x3002;</span></p></dd></dl><dl class="method"><dt id="sqlalchemy.engine.Connection.begin"><span class="yiyi-st" id="yiyi-240"><code class="descname">&#x5F00;&#x59CB; T0&gt; <span class="sig-paren">&#xFF08; T1&gt; <span class="sig-paren">&#xFF09; T2&gt; <a class="headerlink" href="#sqlalchemy.engine.Connection.begin" title="Permalink to this definition">&#xB6; T3&gt;</a></span></span></code></span></dt><dd><p><span class="yiyi-st" id="yiyi-241">&#x5F00;&#x59CB;&#x4E00;&#x4E2A;&#x4E8B;&#x52A1;&#x5E76;&#x8FD4;&#x56DE;&#x4E00;&#x4E2A;&#x4E8B;&#x52A1;&#x53E5;&#x67C4;&#x3002;</span></p><p><span class="yiyi-st" id="yiyi-242">&#x8FD4;&#x56DE;&#x7684;&#x5BF9;&#x8C61;&#x662F;<a class="reference internal" href="#sqlalchemy.engine.Transaction" title="sqlalchemy.engine.Transaction"><code class="xref py py-class docutils literal"><span class="pre">Transaction</span></code></a>&#x7684;&#x4E00;&#x4E2A;&#x5B9E;&#x4F8B;&#x3002;</span><span class="yiyi-st" id="yiyi-243">&#x8BE5;&#x5BF9;&#x8C61;&#x8868;&#x793A;&#x4E8B;&#x52A1;&#x7684;&#x201C;&#x8303;&#x56F4;&#x201D;&#xFF0C;&#x5F53;&#x8C03;&#x7528;<a class="reference internal" href="#sqlalchemy.engine.Transaction.rollback" title="sqlalchemy.engine.Transaction.rollback"><code class="xref py py-meth docutils literal"><span class="pre">Transaction.rollback()</span></code></a>&#x6216;<a class="reference internal" href="#sqlalchemy.engine.Transaction.commit" title="sqlalchemy.engine.Transaction.commit"><code class="xref py py-meth docutils literal"><span class="pre">Transaction.commit()</span></code></a>&#x65B9;&#x6CD5;&#x65F6;&#xFF0C;&#x8BE5;&#x8303;&#x56F4;&#x5B8C;&#x6210;&#x3002;</span></p><p><span class="yiyi-st" id="yiyi-244">Nested calls to <a class="reference internal" href="#sqlalchemy.engine.Connection.begin" title="sqlalchemy.engine.Connection.begin"><code class="xref py py-meth docutils literal"><span class="pre">begin()</span></code></a> on the same <a class="reference internal" href="#sqlalchemy.engine.Connection" title="sqlalchemy.engine.Connection"><code class="xref py py-class docutils literal"><span class="pre">Connection</span></code></a> will return new <a class="reference internal" href="#sqlalchemy.engine.Transaction" title="sqlalchemy.engine.Transaction"><code class="xref py py-class docutils literal"><span class="pre">Transaction</span></code></a> objects that represent an emulated transaction within the scope of the enclosing transaction, that is:</span></p><div class="highlight-python"><div class="highlight"><pre><span></span><span class="n">trans</span> <span class="o">=</span> <span class="n">conn</span><span class="o">.</span><span class="n">begin</span><span class="p">()</span>   <span class="c1"># outermost transaction</span>
<span class="n">trans2</span> <span class="o">=</span> <span class="n">conn</span><span class="o">.</span><span class="n">begin</span><span class="p">()</span>  <span class="c1"># &quot;nested&quot;</span>
<span class="n">trans2</span><span class="o">.</span><span class="n">commit</span><span class="p">()</span>        <span class="c1"># does nothing</span>
<span class="n">trans</span><span class="o">.</span><span class="n">commit</span><span class="p">()</span>         <span class="c1"># actually commits</span></pre></div></div><p><span class="yiyi-st" id="yiyi-245">Calls to <a class="reference internal" href="#sqlalchemy.engine.Transaction.commit" title="sqlalchemy.engine.Transaction.commit"><code class="xref py py-meth docutils literal"><span class="pre">Transaction.commit()</span></code></a> only have an effect when invoked via the outermost <a class="reference internal" href="#sqlalchemy.engine.Transaction" title="sqlalchemy.engine.Transaction"><code class="xref py py-class docutils literal"><span class="pre">Transaction</span></code></a> object, though the <a class="reference internal" href="#sqlalchemy.engine.Transaction.rollback" title="sqlalchemy.engine.Transaction.rollback"><code class="xref py py-meth docutils literal"><span class="pre">Transaction.rollback()</span></code></a> method of any of the <a class="reference internal" href="#sqlalchemy.engine.Transaction" title="sqlalchemy.engine.Transaction"><code class="xref py py-class docutils literal"><span class="pre">Transaction</span></code></a> objects will roll back the transaction.</span></p><p><span class="yiyi-st" id="yiyi-246">&#x4E5F;&#x53EF;&#x4EE5;&#x770B;&#x770B;&#xFF1A;</span></p><p><span class="yiyi-st" id="yiyi-247"><a class="reference internal" href="#sqlalchemy.engine.Connection.begin_nested" title="sqlalchemy.engine.Connection.begin_nested"><code class="xref py py-meth docutils literal"><span class="pre">Connection.begin_nested()</span></code></a>  - &#x4F7F;&#x7528;SAVEPOINT</span></p><p><span class="yiyi-st" id="yiyi-248"><a class="reference internal" href="#sqlalchemy.engine.Connection.begin_twophase" title="sqlalchemy.engine.Connection.begin_twophase"><code class="xref py py-meth docutils literal"><span class="pre">Connection.begin_twophase()</span></code></a>  - &#x4F7F;&#x7528;&#x4E24;&#x9636;&#x6BB5;/ XID&#x4E8B;&#x52A1;</span></p><p><span class="yiyi-st" id="yiyi-249"><a class="reference internal" href="#sqlalchemy.engine.Engine.begin" title="sqlalchemy.engine.Engine.begin"><code class="xref py py-meth docutils literal"><span class="pre">Engine.begin()</span></code></a>  - &#x53EF;&#x4ECE;<a class="reference internal" href="#sqlalchemy.engine.Engine" title="sqlalchemy.engine.Engine"><code class="xref py py-class docutils literal"><span class="pre">Engine</span></code></a>&#x4F7F;&#x7528;&#x7684;&#x4E0A;&#x4E0B;&#x6587;&#x7BA1;&#x7406;&#x5668;&#x3002;</span></p></dd></dl><dl class="method"><dt id="sqlalchemy.engine.Connection.begin_nested"><span class="yiyi-st" id="yiyi-250"><code class="descname"> begin_nested  T0&gt; <span class="sig-paren">&#xFF08; T1&gt; <span class="sig-paren">&#xFF09; T2&gt; <a class="headerlink" href="#sqlalchemy.engine.Connection.begin_nested" title="Permalink to this definition">&#xB6; T3&gt;</a></span></span></code></span></dt><dd><p><span class="yiyi-st" id="yiyi-251">&#x5F00;&#x59CB;&#x4E00;&#x4E2A;&#x5D4C;&#x5957;&#x4E8B;&#x52A1;&#x5E76;&#x8FD4;&#x56DE;&#x4E00;&#x4E2A;&#x4E8B;&#x52A1;&#x53E5;&#x67C4;&#x3002;</span></p><p><span class="yiyi-st" id="yiyi-252">&#x8FD4;&#x56DE;&#x7684;&#x5BF9;&#x8C61;&#x662F;<a class="reference internal" href="#sqlalchemy.engine.NestedTransaction" title="sqlalchemy.engine.NestedTransaction"><code class="xref py py-class docutils literal"><span class="pre">NestedTransaction</span></code></a>&#x7684;&#x4E00;&#x4E2A;&#x5B9E;&#x4F8B;&#x3002;</span></p><p><span class="yiyi-st" id="yiyi-253">&#x5D4C;&#x5957;&#x4E8B;&#x52A1;&#x9700;&#x8981;&#x5E95;&#x5C42;&#x6570;&#x636E;&#x5E93;&#x4E2D;&#x7684;SAVEPOINT&#x652F;&#x6301;&#x3002;</span><span class="yiyi-st" id="yiyi-254">&#x5C42;&#x6B21;&#x7ED3;&#x6784;&#x4E2D;&#x7684;&#x4EFB;&#x4F55;&#x4E8B;&#x52A1;&#x90FD;&#x53EF;&#x4EE5;<code class="docutils literal"><span class="pre">commit</span></code>&#x548C;<code class="docutils literal"><span class="pre">rollback</span></code>&#xFF0C;&#x4F46;&#x6700;&#x5916;&#x5C42;&#x7684;&#x4E8B;&#x52A1;&#x4ECD;&#x7136;&#x63A7;&#x5236;&#x6574;&#x4E2A;<code class="docutils literal"><span class="pre">commit</span></code>&#x6216;<code class="docutils literal"><span class="pre">rollback</span></code>&#x4E00;&#x4E2A;&#x6574;&#x4F53;&#x7684;&#x4EA4;&#x6613;&#x3002;</span></p><p><span class="yiyi-st" id="yiyi-255">&#x53E6;&#x89C1;<a class="reference internal" href="#sqlalchemy.engine.Connection.begin" title="sqlalchemy.engine.Connection.begin"><code class="xref py py-meth docutils literal"><span class="pre">Connection.begin()</span></code></a>&#xFF0C;<a class="reference internal" href="#sqlalchemy.engine.Connection.begin_twophase" title="sqlalchemy.engine.Connection.begin_twophase"><code class="xref py py-meth docutils literal"><span class="pre">Connection.begin_twophase()</span></code></a>&#x3002;</span></p></dd></dl><dl class="method"><dt id="sqlalchemy.engine.Connection.begin_twophase"><span class="yiyi-st" id="yiyi-256"><code class="descname"> begin_twophase  T0&gt; <span class="sig-paren">&#xFF08; T1&gt; <em> XID =&#x65E0; T2&gt; <span class="sig-paren">&#xFF09; T3&gt; <a class="headerlink" href="#sqlalchemy.engine.Connection.begin_twophase" title="Permalink to this definition">&#xB6; T4&gt;</a></span></em></span></code></span></dt><dd><p><span class="yiyi-st" id="yiyi-257">&#x5F00;&#x59CB;&#x4E00;&#x4E2A;&#x4E24;&#x9636;&#x6BB5;&#x6216;XA&#x4E8B;&#x52A1;&#x5E76;&#x8FD4;&#x56DE;&#x4E00;&#x4E2A;&#x4E8B;&#x52A1;&#x53E5;&#x67C4;&#x3002;</span></p><p><span class="yiyi-st" id="yiyi-258">&#x8FD4;&#x56DE;&#x7684;&#x5BF9;&#x8C61;&#x662F;<a class="reference internal" href="#sqlalchemy.engine.TwoPhaseTransaction" title="sqlalchemy.engine.TwoPhaseTransaction"><code class="xref py py-class docutils literal"><span class="pre">TwoPhaseTransaction</span></code></a>&#x7684;&#x4E00;&#x4E2A;&#x5B9E;&#x4F8B;&#xFF0C;&#x5B83;&#x9664;&#x4E86;&#x7531;<a class="reference internal" href="#sqlalchemy.engine.Transaction" title="sqlalchemy.engine.Transaction"><code class="xref py py-class docutils literal"><span class="pre">Transaction</span></code></a>&#x63D0;&#x4F9B;&#x7684;&#x65B9;&#x6CD5;&#x4E4B;&#x5916;&#xFF0C;&#x8FD8;&#x63D0;&#x4F9B;&#x4E86;&#x4E00;&#x4E2A;<a class="reference internal" href="#sqlalchemy.engine.TwoPhaseTransaction.prepare" title="sqlalchemy.engine.TwoPhaseTransaction.prepare"><code class="xref py py-meth docutils literal"><span class="pre">prepare()</span></code></a>&#x65B9;&#x6CD5;&#x3002;</span></p><table class="docutils field-list" frame="void" rules="none"><tbody valign="top"><tr class="field-odd field"><th class="field-name"><span class="yiyi-st" id="yiyi-259">&#x53C2;&#x6570;&#xFF1A;</span></th><td class="field-body"><span class="yiyi-st" id="yiyi-260"><span class="target" id="sqlalchemy.engine.Connection.begin_twophase.params.xid"></span> <strong>xid</strong> <a class="paramlink headerlink reference internal" href="#sqlalchemy.engine.Connection.begin_twophase.params.xid">&#xB6;</a>  - &#x4E24;&#x9636;&#x6BB5;&#x4E8B;&#x52A1;ID&#x3002;</span><span class="yiyi-st" id="yiyi-261">&#x5982;&#x679C;&#x672A;&#x63D0;&#x4F9B;&#xFF0C;&#x5219;&#x4F1A;&#x751F;&#x6210;&#x968F;&#x673A;ID&#x3002;</span></td></tr></tbody></table><p><span class="yiyi-st" id="yiyi-262">&#x53E6;&#x89C1;<a class="reference internal" href="#sqlalchemy.engine.Connection.begin" title="sqlalchemy.engine.Connection.begin"><code class="xref py py-meth docutils literal"><span class="pre">Connection.begin()</span></code></a>&#xFF0C;<a class="reference internal" href="#sqlalchemy.engine.Connection.begin_twophase" title="sqlalchemy.engine.Connection.begin_twophase"><code class="xref py py-meth docutils literal"><span class="pre">Connection.begin_twophase()</span></code></a>&#x3002;</span></p></dd></dl><dl class="method"><dt id="sqlalchemy.engine.Connection.close"><span class="yiyi-st" id="yiyi-263"><code class="descname">&#x9760;&#x8FD1; T0&gt; <span class="sig-paren">&#xFF08; T1&gt; <span class="sig-paren">&#xFF09; T2&gt; <a class="headerlink" href="#sqlalchemy.engine.Connection.close" title="Permalink to this definition">&#xB6; T3&gt;</a></span></span></code></span></dt><dd><p><span class="yiyi-st" id="yiyi-264">&#x5173;&#x95ED;&#x8FD9;&#x4E2A;<a class="reference internal" href="#sqlalchemy.engine.Connection" title="sqlalchemy.engine.Connection"><code class="xref py py-class docutils literal"><span class="pre">Connection</span></code></a>&#x3002;</span></p><p><span class="yiyi-st" id="yiyi-265">&#x8FD9;&#x4F1A;&#x5BFC;&#x81F4;&#x91CA;&#x653E;&#x57FA;&#x7840;&#x6570;&#x636E;&#x5E93;&#x8D44;&#x6E90;&#xFF0C;&#x5373;&#x5185;&#x90E8;&#x5F15;&#x7528;&#x7684;DBAPI&#x8FDE;&#x63A5;&#x3002;</span><span class="yiyi-st" id="yiyi-266">The DBAPI connection is typically restored back to the connection-holding <a class="reference internal" href="pooling.html#sqlalchemy.pool.Pool" title="sqlalchemy.pool.Pool"><code class="xref py py-class docutils literal"><span class="pre">Pool</span></code></a> referenced by the <a class="reference internal" href="#sqlalchemy.engine.Engine" title="sqlalchemy.engine.Engine"><code class="xref py py-class docutils literal"><span class="pre">Engine</span></code></a> that produced this <a class="reference internal" href="#sqlalchemy.engine.Connection" title="sqlalchemy.engine.Connection"><code class="xref py py-class docutils literal"><span class="pre">Connection</span></code></a>. </span><span class="yiyi-st" id="yiyi-267">&#x65E0;&#x8BBA;&#x4EFB;&#x4F55;<a class="reference internal" href="#sqlalchemy.engine.Transaction" title="sqlalchemy.engine.Transaction"><code class="xref py py-class docutils literal"><span class="pre">Transaction</span></code></a>&#x5BF9;&#x8C61;&#x5728;DBAPI&#x8FDE;&#x63A5;&#x4E0A;&#x5B58;&#x5728;&#x7684;&#x4EFB;&#x4F55;&#x4E8B;&#x52A1;&#x72B6;&#x6001;&#x90FD;&#x901A;&#x8FC7;DBAPI&#x8FDE;&#x63A5;&#x7684;<code class="docutils literal"><span class="pre">rollback()</span></code>&#x65B9;&#x6CD5;&#x65E0;&#x6761;&#x4EF6;&#x91CA;&#x653E;&#xFF0C;&#x8FD9;&#x53EF;&#x80FD;&#x4E0E;<a class="reference internal" href="#sqlalchemy.engine.Connection" title="sqlalchemy.engine.Connection"><code class="xref py py-class docutils literal"><span class="pre">Connection</span></code></a></span></p><p><span class="yiyi-st" id="yiyi-268"><a class="reference internal" href="#sqlalchemy.engine.Connection.close" title="sqlalchemy.engine.Connection.close"><code class="xref py py-meth docutils literal"><span class="pre">close()</span></code></a>&#x88AB;&#x8C03;&#x7528;&#x540E;&#xFF0C;<a class="reference internal" href="#sqlalchemy.engine.Connection" title="sqlalchemy.engine.Connection"><code class="xref py py-class docutils literal"><span class="pre">Connection</span></code></a>&#x6C38;&#x4E45;&#x5904;&#x4E8E;&#x5173;&#x95ED;&#x72B6;&#x6001;&#xFF0C;&#x5E76;&#x4E14;&#x4E0D;&#x5141;&#x8BB8;&#x8FDB;&#x4E00;&#x6B65;&#x7684;&#x64CD;&#x4F5C;&#x3002;</span></p></dd></dl><dl class="attribute"><dt id="sqlalchemy.engine.Connection.closed"><span class="yiyi-st" id="yiyi-269"><code class="descname">&#x5173;&#x95ED; T0&gt; <a class="headerlink" href="#sqlalchemy.engine.Connection.closed" title="Permalink to this definition">&#xB6; T1&gt;</a></code></span></dt><dd><p><span class="yiyi-st" id="yiyi-270">&#x5982;&#x679C;&#x6B64;&#x8FDE;&#x63A5;&#x5DF2;&#x5173;&#x95ED;&#xFF0C;&#x5219;&#x8FD4;&#x56DE;True&#x3002;</span></p></dd></dl><dl class="method"><dt id="sqlalchemy.engine.Connection.connect"><span class="yiyi-st" id="yiyi-271"><code class="descname">&#x8FDE;&#x63A5; T0&gt; <span class="sig-paren">&#xFF08; T1&gt; <span class="sig-paren">&#xFF09; T2&gt; <a class="headerlink" href="#sqlalchemy.engine.Connection.connect" title="Permalink to this definition">&#xB6; T3&gt;</a></span></span></code></span></dt><dd><p><span class="yiyi-st" id="yiyi-272">&#x8FD4;&#x56DE;&#x6B64;<a class="reference internal" href="#sqlalchemy.engine.Connection" title="sqlalchemy.engine.Connection"><code class="xref py py-class docutils literal"><span class="pre">Connection</span></code></a>&#x7684;&#x5206;&#x652F;&#x7248;&#x672C;&#x3002;</span></p><p><span class="yiyi-st" id="yiyi-273">&#x53EF;&#x4EE5;&#x8C03;&#x7528;&#x8FD4;&#x56DE;&#x7684;<a class="reference internal" href="#sqlalchemy.engine.Connection" title="sqlalchemy.engine.Connection"><code class="xref py py-class docutils literal"><span class="pre">Connection</span></code></a>&#x4E0A;&#x7684;<a class="reference internal" href="#sqlalchemy.engine.Connection.close" title="sqlalchemy.engine.Connection.close"><code class="xref py py-meth docutils literal"><span class="pre">Connection.close()</span></code></a>&#x65B9;&#x6CD5;&#xFF0C;&#x5E76;&#x4E14;&#x8BE5;<a class="reference internal" href="#sqlalchemy.engine.Connection" title="sqlalchemy.engine.Connection"><code class="xref py py-class docutils literal"><span class="pre">Connection</span></code></a></span></p><p><span class="yiyi-st" id="yiyi-274">&#x6B64;&#x65B9;&#x6CD5;&#x901A;&#x8FC7;<a class="reference internal" href="#sqlalchemy.engine.Engine.connect" title="sqlalchemy.engine.Engine.connect"><code class="xref py py-meth docutils literal"><span class="pre">Engine.connect()</span></code></a>&#x63D0;&#x4F9B;&#x4F7F;&#x7528;&#x5BF9;&#x79F0;&#x6027;&#xFF0C;&#x5305;&#x62EC;&#x4E0E;&#x4E0A;&#x4E0B;&#x6587;&#x7BA1;&#x7406;&#x5668;&#x4E00;&#x8D77;&#x4F7F;&#x7528;&#x3002;</span></p></dd></dl><dl class="attribute"><dt id="sqlalchemy.engine.Connection.connection"><span class="yiyi-st" id="yiyi-275"><code class="descname">&#x8FDE;&#x63A5; T0&gt; <a class="headerlink" href="#sqlalchemy.engine.Connection.connection" title="Permalink to this definition">&#xB6; T1&gt;</a></code></span></dt><dd><p><span class="yiyi-st" id="yiyi-276">&#x7531;&#x6B64;Connection&#x7BA1;&#x7406;&#x7684;&#x5E95;&#x5C42;DB-API&#x8FDE;&#x63A5;&#x3002;</span></p><div class="admonition seealso"><p class="first admonition-title"><span class="yiyi-st" id="yiyi-277">&#x4E5F;&#x53EF;&#x4EE5;&#x770B;&#x770B;</span></p><p class="last"><span class="yiyi-st" id="yiyi-278"><a class="reference internal" href="#dbapi-connections"><span>Working with Raw DBAPI Connections</span></a></span></p></div></dd></dl><dl class="method"><dt id="sqlalchemy.engine.Connection.contextual_connect"><span class="yiyi-st" id="yiyi-279"><code class="descname"> contextual_connect  T0&gt; <span class="sig-paren">&#xFF08; T1&gt; <em> ** kwargs  T2&gt; <span class="sig-paren">&#xFF09; T3&gt; <a class="headerlink" href="#sqlalchemy.engine.Connection.contextual_connect" title="Permalink to this definition">&#xB6; T4&gt;</a></span></em></span></code></span></dt><dd><p><span class="yiyi-st" id="yiyi-280">&#x8FD4;&#x56DE;&#x6B64;<a class="reference internal" href="#sqlalchemy.engine.Connection" title="sqlalchemy.engine.Connection"><code class="xref py py-class docutils literal"><span class="pre">Connection</span></code></a>&#x7684;&#x5206;&#x652F;&#x7248;&#x672C;&#x3002;</span></p><p><span class="yiyi-st" id="yiyi-281">&#x53EF;&#x4EE5;&#x8C03;&#x7528;&#x8FD4;&#x56DE;&#x7684;<a class="reference internal" href="#sqlalchemy.engine.Connection" title="sqlalchemy.engine.Connection"><code class="xref py py-class docutils literal"><span class="pre">Connection</span></code></a>&#x4E0A;&#x7684;<a class="reference internal" href="#sqlalchemy.engine.Connection.close" title="sqlalchemy.engine.Connection.close"><code class="xref py py-meth docutils literal"><span class="pre">Connection.close()</span></code></a>&#x65B9;&#x6CD5;&#xFF0C;&#x5E76;&#x4E14;&#x8BE5;<a class="reference internal" href="#sqlalchemy.engine.Connection" title="sqlalchemy.engine.Connection"><code class="xref py py-class docutils literal"><span class="pre">Connection</span></code></a></span></p><p><span class="yiyi-st" id="yiyi-282">&#x6B64;&#x65B9;&#x6CD5;&#x4F7F;&#x7528;<a class="reference internal" href="#sqlalchemy.engine.Engine.contextual_connect" title="sqlalchemy.engine.Engine.contextual_connect"><code class="xref py py-meth docutils literal"><span class="pre">Engine.contextual_connect()</span></code></a>&#x63D0;&#x4F9B;&#x4F7F;&#x7528;&#x5BF9;&#x79F0;&#x6027;&#xFF0C;&#x5305;&#x62EC;&#x4E0E;&#x4E0A;&#x4E0B;&#x6587;&#x7BA1;&#x7406;&#x5668;&#x4E00;&#x8D77;&#x4F7F;&#x7528;&#x3002;</span></p></dd></dl><dl class="attribute"><dt id="sqlalchemy.engine.Connection.default_isolation_level"><span class="yiyi-st" id="yiyi-283"><code class="descname"> default_isolation_level  T0&gt; <a class="headerlink" href="#sqlalchemy.engine.Connection.default_isolation_level" title="Permalink to this definition">&#xB6; T1&gt;</a></code></span></dt><dd><p><span class="yiyi-st" id="yiyi-284">&#x5206;&#x914D;&#x7ED9;<a class="reference internal" href="#sqlalchemy.engine.Connection" title="sqlalchemy.engine.Connection"><code class="xref py py-class docutils literal"><span class="pre">Connection</span></code></a>&#x7684;&#x9ED8;&#x8BA4;&#x9694;&#x79BB;&#x7EA7;&#x522B;&#x3002;</span></p><p><span class="yiyi-st" id="yiyi-285">&#x8FD9;&#x662F;&#x901A;&#x8FC7;<a class="reference internal" href="#sqlalchemy.engine.Engine.connect" title="sqlalchemy.engine.Engine.connect"><code class="xref py py-meth docutils literal"><span class="pre">Engine.connect()</span></code></a>&#x65B9;&#x6CD5;&#x9996;&#x6B21;&#x91C7;&#x8D2D;&#x65F6;<a class="reference internal" href="#sqlalchemy.engine.Connection" title="sqlalchemy.engine.Connection"><code class="xref py py-class docutils literal"><span class="pre">Connection</span></code></a>&#x6240;&#x5177;&#x6709;&#x7684;&#x9694;&#x79BB;&#x7EA7;&#x522B;&#x8BBE;&#x7F6E;&#x3002;</span><span class="yiyi-st" id="yiyi-286">&#x8BE5;&#x7EA7;&#x522B;&#x4FDD;&#x6301;&#x4E0D;&#x53D8;&#xFF0C;&#x76F4;&#x5230;<a class="reference internal" href="#sqlalchemy.engine.Connection.execution_options.params.isolation_level" title="sqlalchemy.engine.Connection.execution_options"><code class="xref py py-paramref docutils literal"><span class="pre">Connection.execution_options.isolation_level</span></code></a>&#x7528;&#x4E8E;&#x66F4;&#x6539;&#x6BCF;&#x4E2A;<a class="reference internal" href="#sqlalchemy.engine.Connection" title="sqlalchemy.engine.Connection"><code class="xref py py-class docutils literal"><span class="pre">Connection</span></code></a>&#x7684;&#x8BBE;&#x7F6E;&#x4E3A;&#x6B62;&#x3002;</span></p><p><span class="yiyi-st" id="yiyi-287">&#x4E0E;<a class="reference internal" href="#sqlalchemy.engine.Connection.get_isolation_level" title="sqlalchemy.engine.Connection.get_isolation_level"><code class="xref py py-meth docutils literal"><span class="pre">Connection.get_isolation_level()</span></code></a>&#x4E0D;&#x540C;&#xFF0C;&#x6B64;&#x5C5E;&#x6027;&#x662F;&#x4ECE;&#x65B9;&#x8A00;&#x83B7;&#x5F97;&#x7684;&#x7B2C;&#x4E00;&#x4E2A;&#x8FDE;&#x63A5;&#x63D0;&#x524D;&#x8BBE;&#x7F6E;&#x7684;&#xFF0C;&#x56E0;&#x6B64;&#x5728;&#x8C03;&#x7528;&#x6B64;&#x5B58;&#x53D6;&#x5668;&#x65F6;&#x4E0D;&#x4F1A;&#x8C03;&#x7528;SQL&#x67E5;&#x8BE2;&#x3002;</span></p><div class="versionadded"><p><span class="yiyi-st" id="yiyi-288"><span class="versionmodified">&#x7248;&#x672C;0.9.9&#x4E2D;&#x7684;&#x65B0;&#x529F;&#x80FD;</span></span></p></div><div class="admonition seealso"><p class="first admonition-title"><span class="yiyi-st" id="yiyi-289">&#x4E5F;&#x53EF;&#x4EE5;&#x770B;&#x770B;</span></p><p><span class="yiyi-st" id="yiyi-290"><a class="reference internal" href="#sqlalchemy.engine.Connection.get_isolation_level" title="sqlalchemy.engine.Connection.get_isolation_level"><code class="xref py py-meth docutils literal"><span class="pre">Connection.get_isolation_level()</span></code></a>  - &#x67E5;&#x770B;&#x5F53;&#x524D;&#x7EA7;&#x522B;</span></p><p><span class="yiyi-st" id="yiyi-291"><a class="reference internal" href="engines.html#sqlalchemy.create_engine.params.isolation_level" title="sqlalchemy.create_engine"><code class="xref py py-paramref docutils literal"><span class="pre">create_engine.isolation_level</span></code></a>  - &#x6839;&#x636E;<a class="reference internal" href="#sqlalchemy.engine.Engine" title="sqlalchemy.engine.Engine"><code class="xref py py-class docutils literal"><span class="pre">Engine</span></code></a>&#x8BBE;&#x7F6E;&#x9694;&#x79BB;&#x7EA7;&#x522B;</span></p><p class="last"><span class="yiyi-st" id="yiyi-292"><a class="reference internal" href="#sqlalchemy.engine.Connection.execution_options.params.isolation_level" title="sqlalchemy.engine.Connection.execution_options"><code class="xref py py-paramref docutils literal"><span class="pre">Connection.execution_options.isolation_level</span></code></a>  - &#x6839;&#x636E;<a class="reference internal" href="#sqlalchemy.engine.Connection" title="sqlalchemy.engine.Connection"><code class="xref py py-class docutils literal"><span class="pre">Connection</span></code></a>&#x8BBE;&#x7F6E;&#x9694;&#x79BB;&#x7EA7;&#x522B;</span></p></div></dd></dl><dl class="method"><dt id="sqlalchemy.engine.Connection.detach"><span class="yiyi-st" id="yiyi-293"><code class="descname">&#x5206;&#x79BB; T0&gt; <span class="sig-paren">&#xFF08; T1&gt; <span class="sig-paren">&#xFF09; T2&gt; <a class="headerlink" href="#sqlalchemy.engine.Connection.detach" title="Permalink to this definition">&#xB6; T3&gt;</a></span></span></code></span></dt><dd><p><span class="yiyi-st" id="yiyi-294">&#x4ECE;&#x8FDE;&#x63A5;&#x6C60;&#x4E2D;&#x5206;&#x79BB;&#x5E95;&#x5C42;&#x7684;DB-API&#x8FDE;&#x63A5;&#x3002;</span></p><p><span class="yiyi-st" id="yiyi-295">&#x4F8B;&#x5982;&#x3002;&#xFF1A;</span></p><div class="highlight-python"><div class="highlight"><pre><span></span><span class="k">with</span> <span class="n">engine</span><span class="o">.</span><span class="n">connect</span><span class="p">()</span> <span class="k">as</span> <span class="n">conn</span><span class="p">:</span>
    <span class="n">conn</span><span class="o">.</span><span class="n">detach</span><span class="p">()</span>
    <span class="n">conn</span><span class="o">.</span><span class="n">execute</span><span class="p">(</span><span class="s2">&quot;SET search_path TO schema1, schema2&quot;</span><span class="p">)</span>

    <span class="c1"># work with connection</span>

<span class="c1"># connection is fully closed (since we used &quot;with:&quot;, can</span>
<span class="c1"># also call .close())</span></pre></div></div><p><span class="yiyi-st" id="yiyi-296">&#x8FD9;&#x4E2A;<a class="reference internal" href="#sqlalchemy.engine.Connection" title="sqlalchemy.engine.Connection"><code class="xref py py-class docutils literal"><span class="pre">Connection</span></code></a>&#x5B9E;&#x4F8B;&#x5C06;&#x4FDD;&#x6301;&#x53EF;&#x7528;&#x3002;</span><span class="yiyi-st" id="yiyi-297">&#x5F53;&#x5173;&#x95ED;&#xFF08;&#x6216;&#x5982;&#x4E0A;&#x6240;&#x8FF0;&#x4ECE;&#x4E0A;&#x4E0B;&#x6587;&#x7BA1;&#x7406;&#x5668;&#x4E0A;&#x4E0B;&#x6587;&#x9000;&#x51FA;&#xFF09;&#x65F6;&#xFF0C;DB-API&#x8FDE;&#x63A5;&#x5C06;&#x88AB;&#x9010;&#x5B57;&#x5173;&#x95ED;&#x5E76;&#x4E14;&#x4E0D;&#x8FD4;&#x56DE;&#x5230;&#x5176;&#x6E90;&#x6C60;&#x3002;</span></p><p><span class="yiyi-st" id="yiyi-298">&#x6B64;&#x65B9;&#x6CD5;&#x53EF;&#x7528;&#x4E8E;&#x5C06;&#x5E94;&#x7528;&#x7A0B;&#x5E8F;&#x7684;&#x5176;&#x4F59;&#x90E8;&#x5206;&#x4E0E;&#x8FDE;&#x63A5;&#x4E0A;&#x7684;&#x5DF2;&#x4FEE;&#x6539;&#x72B6;&#x6001;&#xFF08;&#x4F8B;&#x5982;&#x4E8B;&#x52A1;&#x9694;&#x79BB;&#x7EA7;&#x522B;&#x6216;&#x7C7B;&#x4F3C;&#x4E8B;&#x4EF6;&#xFF09;&#x9694;&#x79BB;&#x3002;</span></p></dd></dl><dl class="method"><dt id="sqlalchemy.engine.Connection.execute"><span class="yiyi-st" id="yiyi-299"><code class="descname">&#x6267;&#x884C; tt&gt; <span class="sig-paren">&#xFF08;</span> <em>object</em>&#xFF0C;<em>* multiparams</em>&#xFF0C;<em>** params</em> <span class="sig-paren">/ T5&gt; <a class="headerlink" href="#sqlalchemy.engine.Connection.execute" title="Permalink to this definition">&#xB6; T6&gt;</a></span></code></span></dt><dd><p><span class="yiyi-st" id="yiyi-300">&#x6267;&#x884C;&#x4E00;&#x4E2A;SQL&#x8BED;&#x53E5;&#x7ED3;&#x6784;&#x5E76;&#x8FD4;&#x56DE;&#x4E00;&#x4E2A;<a class="reference internal" href="#sqlalchemy.engine.ResultProxy" title="sqlalchemy.engine.ResultProxy"><code class="xref py py-class docutils literal"><span class="pre">ResultProxy</span></code></a>&#x3002;</span></p><table class="docutils field-list" frame="void" rules="none"><tbody valign="top"><tr class="field-odd field"><th class="field-name"><span class="yiyi-st" id="yiyi-301">&#x53C2;&#x6570;&#xFF1A;</span></th><td class="field-body"><ul class="first last simple"><li><span class="yiyi-st" id="yiyi-310"><span class="target" id="sqlalchemy.engine.Connection.execute.params.object"></span> <strong>&#x5BF9;&#x8C61;</strong> <a class="paramlink headerlink reference internal" href="#sqlalchemy.engine.Connection.execute.params.object">&#xB6;</a>  - </span><p><span class="yiyi-st" id="yiyi-302">&#x8981;&#x6267;&#x884C;&#x7684;&#x58F0;&#x660E;&#x3002;</span><span class="yiyi-st" id="yiyi-303">&#x53EF;&#x80FD;&#x662F;&#x4EE5;&#x4E0B;&#x4E4B;&#x4E00;&#xFF1A;</span></p><ul><li><span class="yiyi-st" id="yiyi-304">&#x4E00;&#x4E2A;&#x7EAF;&#x5B57;&#x7B26;&#x4E32;</span></li><li><span class="yiyi-st" id="yiyi-305">&#x4EFB;&#x4F55;<a class="reference internal" href="sqlelement.html#sqlalchemy.sql.expression.ClauseElement" title="sqlalchemy.sql.expression.ClauseElement"><code class="xref py py-class docutils literal"><span class="pre">ClauseElement</span></code></a>&#x7ED3;&#x6784;&#x4E5F;&#x662F;<a class="reference internal" href="selectable.html#sqlalchemy.sql.expression.Executable" title="sqlalchemy.sql.expression.Executable"><code class="xref py py-class docutils literal"><span class="pre">Executable</span></code></a>&#x7684;&#x5B50;&#x7C7B;&#xFF0C;&#x5982;<a class="reference internal" href="selectable.html#sqlalchemy.sql.expression.select" title="sqlalchemy.sql.expression.select"><code class="xref py py-func docutils literal"><span class="pre">select()</span></code></a>&#x7ED3;&#x6784;</span></li><li><span class="yiyi-st" id="yiyi-306">&#x4E00;&#x4E2A;<a class="reference internal" href="functions.html#sqlalchemy.sql.functions.FunctionElement" title="sqlalchemy.sql.functions.FunctionElement"><code class="xref py py-class docutils literal"><span class="pre">FunctionElement</span></code></a>&#xFF08;&#x4F8B;&#x5982;&#x7531;<a class="reference internal" href="sqlelement.html#sqlalchemy.sql.expression.func" title="sqlalchemy.sql.expression.func"><code class="xref py py-data docutils literal"><span class="pre">func</span></code></a>&#x751F;&#x6210;&#x7684;&#xFF09;&#x5C06;&#x81EA;&#x52A8;&#x5305;&#x88C5;&#x5728;SELECT&#x8BED;&#x53E5;&#x4E2D;&#xFF0C;&#x7136;&#x540E;&#x6267;&#x884C;&#x8BE5;&#x8BED;&#x53E5;&#x3002;</span></li><li><span class="yiyi-st" id="yiyi-307">&#x4E00;&#x4E2A;<a class="reference internal" href="ddl.html#sqlalchemy.schema.DDLElement" title="sqlalchemy.schema.DDLElement"><code class="xref py py-class docutils literal"><span class="pre">DDLElement</span></code></a>&#x5BF9;&#x8C61;</span></li><li><span class="yiyi-st" id="yiyi-308">&#x4E00;&#x4E2A;<a class="reference internal" href="defaults.html#sqlalchemy.schema.DefaultGenerator" title="sqlalchemy.schema.DefaultGenerator"><code class="xref py py-class docutils literal"><span class="pre">DefaultGenerator</span></code></a>&#x5BF9;&#x8C61;</span></li><li><span class="yiyi-st" id="yiyi-309">&#x4E00;&#x4E2A;<a class="reference internal" href="internals.html#sqlalchemy.engine.interfaces.Compiled" title="sqlalchemy.engine.interfaces.Compiled"><code class="xref py py-class docutils literal"><span class="pre">Compiled</span></code></a>&#x5BF9;&#x8C61;</span></li></ul></li><li><span class="yiyi-st" id="yiyi-318"><span class="target" id="sqlalchemy.engine.Connection.execute.params.*multiparams/**params"></span> <strong>* multiparams / ** params</strong> <a class="paramlink headerlink reference internal" href="#sqlalchemy.engine.Connection.execute.params.*multiparams/**params">&#xB6;</a>  - </span><p><span class="yiyi-st" id="yiyi-311">&#x8868;&#x793A;&#x8981;&#x5728;&#x6267;&#x884C;&#x4E2D;&#x4F7F;&#x7528;&#x7684;&#x7ED1;&#x5B9A;&#x53C2;&#x6570;&#x503C;&#x3002;</span><span class="yiyi-st" id="yiyi-312">&#x901A;&#x5E38;&#xFF0C;&#x683C;&#x5F0F;&#x662F;&#x4F20;&#x9012;&#x7ED9;* multiparams&#x7684;&#x4E00;&#x4E2A;&#x6216;&#x591A;&#x4E2A;&#x5B57;&#x5178;&#x7684;&#x96C6;&#x5408;&#xFF1A;</span></p><div class="highlight-python"><div class="highlight"><pre><span></span><span class="n">conn</span><span class="o">.</span><span class="n">execute</span><span class="p">(</span>
    <span class="n">table</span><span class="o">.</span><span class="n">insert</span><span class="p">(),</span>
    <span class="p">{</span><span class="s2">&quot;id&quot;</span><span class="p">:</span><span class="mi">1</span><span class="p">,</span> <span class="s2">&quot;value&quot;</span><span class="p">:</span><span class="s2">&quot;v1&quot;</span><span class="p">},</span>
    <span class="p">{</span><span class="s2">&quot;id&quot;</span><span class="p">:</span><span class="mi">2</span><span class="p">,</span> <span class="s2">&quot;value&quot;</span><span class="p">:</span><span class="s2">&quot;v2&quot;</span><span class="p">}</span>
<span class="p">)</span></pre></div></div><p><span class="yiyi-st" id="yiyi-313">...&#x6216;** params&#x89E3;&#x91CA;&#x7684;&#x4E2A;&#x522B;&#x952E;/&#x503C;&#xFF1A;</span></p><div class="highlight-python"><div class="highlight"><pre><span></span><span class="n">conn</span><span class="o">.</span><span class="n">execute</span><span class="p">(</span>
    <span class="n">table</span><span class="o">.</span><span class="n">insert</span><span class="p">(),</span> <span class="nb">id</span><span class="o">=</span><span class="mi">1</span><span class="p">,</span> <span class="n">value</span><span class="o">=</span><span class="s2">&quot;v1&quot;</span>
<span class="p">)</span></pre></div></div><p><span class="yiyi-st" id="yiyi-314">&#x5728;&#x4F20;&#x9012;&#x666E;&#x901A;SQL&#x5B57;&#x7B26;&#x4E32;&#x5E76;&#x4E14;&#x5E95;&#x5C42;DBAPI&#x63A5;&#x53D7;&#x4F4D;&#x7F6E;&#x7ED1;&#x5B9A;&#x53C2;&#x6570;&#x7684;&#x60C5;&#x51B5;&#x4E0B;&#xFF0C;&#x53EF;&#x4EE5;&#x4F20;&#x9012;* multiparams&#x4E2D;&#x7684;&#x5143;&#x7EC4;&#x6216;&#x96C6;&#x5408;&#x4E2D;&#x7684;&#x5355;&#x4E2A;&#x503C;&#xFF1A;</span></p><div class="highlight-python"><div class="highlight"><pre><span></span><span class="n">conn</span><span class="o">.</span><span class="n">execute</span><span class="p">(</span>
    <span class="s2">&quot;INSERT INTO table (id, value) VALUES (?, ?)&quot;</span><span class="p">,</span>
    <span class="p">(</span><span class="mi">1</span><span class="p">,</span> <span class="s2">&quot;v1&quot;</span><span class="p">),</span> <span class="p">(</span><span class="mi">2</span><span class="p">,</span> <span class="s2">&quot;v2&quot;</span><span class="p">)</span>
<span class="p">)</span>

<span class="n">conn</span><span class="o">.</span><span class="n">execute</span><span class="p">(</span>
    <span class="s2">&quot;INSERT INTO table (id, value) VALUES (?, ?)&quot;</span><span class="p">,</span>
    <span class="mi">1</span><span class="p">,</span> <span class="s2">&quot;v1&quot;</span>
<span class="p">)</span></pre></div></div><p><span class="yiyi-st" id="yiyi-315">&#x8BF7;&#x6CE8;&#x610F;&#xFF0C;&#x95EE;&#x53F7;&#x201C;&#xFF1F;&#x201D;&#x6216;&#x5176;&#x4ED6;&#x7B26;&#x53F7;&#x7684;&#x4F7F;&#x7528;&#x53D6;&#x51B3;&#x4E8E;DBAPI&#x6240;&#x4F7F;&#x7528;&#x7684;&#x201C;&#x53C2;&#x6570;&#x6837;&#x5F0F;&#x201D;&#xFF0C;&#x5B83;&#x53EF;&#x4EE5;&#x662F;&#x201C;qmark&#x201D;&#xFF0C;&#x201C;named&#x201D;&#xFF0C;&#x201C;pyformat&#x201D;&#xFF0C;&#x201C;format&#x201D;&#xFF0C;&#x201C; &#x201C;&#x6570;&#x5B57;&#x201D;&#x3002;</span><span class="yiyi-st" id="yiyi-316">&#x6709;&#x5173;&#x53C2;&#x6570;&#x6837;&#x5F0F;&#x7684;&#x8BE6;&#x7EC6;&#x4FE1;&#x606F;&#xFF0C;&#x8BF7;&#x53C2;&#x89C1;<a class="reference external" href="http://www.python.org/dev/peps/pep-0249/">pep-249</a>&#x3002;</span></p><p><span class="yiyi-st" id="yiyi-317">&#x8981;&#x4F7F;&#x7528;DBAPI&#x4E0D;&#x53EF;&#x77E5;&#x7684;&#x65B9;&#x5F0F;&#x4F7F;&#x7528;&#x7ED1;&#x5B9A;&#x53C2;&#x6570;&#x7684;&#x6587;&#x672C;SQL&#x8BED;&#x53E5;&#xFF0C;&#x8BF7;&#x4F7F;&#x7528;<a class="reference internal" href="sqlelement.html#sqlalchemy.sql.expression.text" title="sqlalchemy.sql.expression.text"><code class="xref py py-func docutils literal"><span class="pre">text()</span></code></a>&#x7ED3;&#x6784;&#x3002;</span></p></li></ul></td></tr></tbody></table></dd></dl><dl class="method"><dt id="sqlalchemy.engine.Connection.execution_options"><span class="yiyi-st" id="yiyi-319"><code class="descname"> execution_options  T0&gt; <span class="sig-paren">&#xFF08; T1&gt; <em> **&#x9009;&#x62E9; T2&gt; <span class="sig-paren">&#xFF09; T3&gt; <a class="headerlink" href="#sqlalchemy.engine.Connection.execution_options" title="Permalink to this definition">&#xB6; T4&gt;</a></span></em></span></code></span></dt><dd><p><span class="yiyi-st" id="yiyi-320">&#x4E3A;&#x6267;&#x884C;&#x671F;&#x95F4;&#x751F;&#x6548;&#x7684;&#x8FDE;&#x63A5;&#x8BBE;&#x7F6E;&#x975E;SQL&#x9009;&#x9879;&#x3002;</span></p><p><span class="yiyi-st" id="yiyi-321">The method returns a copy of this <a class="reference internal" href="#sqlalchemy.engine.Connection" title="sqlalchemy.engine.Connection"><code class="xref py py-class docutils literal"><span class="pre">Connection</span></code></a> which references the same underlying DBAPI connection, but also defines the given execution options which will take effect for a call to <a class="reference internal" href="#sqlalchemy.engine.Connection.execute" title="sqlalchemy.engine.Connection.execute"><code class="xref py py-meth docutils literal"><span class="pre">execute()</span></code></a>. </span><span class="yiyi-st" id="yiyi-322">&#x7531;&#x4E8E;&#x65B0;&#x7684;<a class="reference internal" href="#sqlalchemy.engine.Connection" title="sqlalchemy.engine.Connection"><code class="xref py py-class docutils literal"><span class="pre">Connection</span></code></a>&#x5F15;&#x7528;&#x4E86;&#x76F8;&#x540C;&#x7684;&#x5E95;&#x5C42;&#x8D44;&#x6E90;&#xFF0C;&#x56E0;&#x6B64;&#x786E;&#x4FDD;&#x7ACB;&#x5373;&#x4E22;&#x5F03;&#x526F;&#x672C;&#x901A;&#x5E38;&#x662F;&#x4E00;&#x4E2A;&#x597D;&#x4E3B;&#x610F;&#xFF0C;&#x5982;&#x679C;&#x5728;&#x4EE5;&#x4E0B;&#x60C5;&#x51B5;&#x4E0B;&#x4F7F;&#x7528;&#xFF0C;&#x5219;&#x9690;&#x542B;&#x8FD9;&#x4E9B;&#x526F;&#x672C;&#xFF1A;</span></p><div class="highlight-python"><div class="highlight"><pre><span></span><span class="n">result</span> <span class="o">=</span> <span class="n">connection</span><span class="o">.</span><span class="n">execution_options</span><span class="p">(</span><span class="n">stream_results</span><span class="o">=</span><span class="bp">True</span><span class="p">)</span><span class="o">.</span>\
                    <span class="n">execute</span><span class="p">(</span><span class="n">stmt</span><span class="p">)</span></pre></div></div><p><span class="yiyi-st" id="yiyi-323">&#x8BF7;&#x6CE8;&#x610F;&#xFF0C;&#x4EFB;&#x4F55;&#x952E;/&#x503C;&#x90FD;&#x53EF;&#x4EE5;&#x4F20;&#x9012;&#x7ED9;<a class="reference internal" href="#sqlalchemy.engine.Connection.execution_options" title="sqlalchemy.engine.Connection.execution_options"><code class="xref py py-meth docutils literal"><span class="pre">Connection.execution_options()</span></code></a>&#xFF0C;&#x5E76;&#x5B58;&#x50A8;&#x5728;<a class="reference internal" href="#sqlalchemy.engine.Connection" title="sqlalchemy.engine.Connection"><code class="xref py py-class docutils literal"><span class="pre">Connection</span></code></a>&#x7684;<code class="docutils literal"><span class="pre">_execution_options</span></code>&#x5B57;&#x5178;&#x4E2D;&#x3002;</span><span class="yiyi-st" id="yiyi-324">&#x4F8B;&#x5982;&#xFF0C;&#x5B83;&#x9002;&#x7528;&#x4E8E;&#x7EC8;&#x7AEF;&#x7528;&#x6237;&#x65B9;&#x6848;&#x4E0E;&#x4E8B;&#x4EF6;&#x76D1;&#x542C;&#x5668;&#x8FDB;&#x884C;&#x901A;&#x4FE1;&#x3002;</span></p><p><span class="yiyi-st" id="yiyi-325">&#x5F53;&#x524D;&#x7531;SQLAlchemy&#x8BC6;&#x522B;&#x7684;&#x5173;&#x952E;&#x5B57;&#x5305;&#x62EC;<a class="reference internal" href="selectable.html#sqlalchemy.sql.expression.Executable.execution_options" title="sqlalchemy.sql.expression.Executable.execution_options"><code class="xref py py-meth docutils literal"><span class="pre">Executable.execution_options()</span></code></a>&#x4E2D;&#x5217;&#x51FA;&#x7684;&#x6240;&#x6709;&#x5173;&#x952E;&#x5B57;&#xFF0C;&#x4EE5;&#x53CA;<a class="reference internal" href="#sqlalchemy.engine.Connection" title="sqlalchemy.engine.Connection"><code class="xref py py-class docutils literal"><span class="pre">Connection</span></code></a>&#x7279;&#x5B9A;&#x7684;&#x5173;&#x952E;&#x5B57;&#x3002;</span></p><table class="docutils field-list" frame="void" rules="none"><tbody valign="top"><tr class="field-odd field"><th class="field-name"><span class="yiyi-st" id="yiyi-326">&#x53C2;&#x6570;&#xFF1A;</span></th><td class="field-body"><ul class="first last simple"><li><span class="yiyi-st" id="yiyi-327"><span class="target" id="sqlalchemy.engine.Connection.execution_options.params.autocommit"></span> <strong>autocommit</strong> <a class="paramlink headerlink reference internal" href="#sqlalchemy.engine.Connection.execution_options.params.autocommit">&#xB6;</a>  - &#x9002;&#x7528;&#x4E8E;&#xFF1A;Connection&#xFF0C;&#x8BED;&#x53E5;&#x3002;</span><span class="yiyi-st" id="yiyi-328">&#x5982;&#x679C;&#x4E3A;True&#xFF0C;&#x5219;&#x5728;&#x6267;&#x884C;&#x201C;&#x81EA;&#x52A8;&#x63D0;&#x4EA4;&#x201D;&#x6A21;&#x5F0F;&#x65F6;&#xFF0C;&#x5373;&#x6267;&#x884C;&#x663E;&#x5F0F;&#x4E8B;&#x52A1;&#x65F6;&#xFF0C;COMMIT&#x5C06;&#x5728;&#x6267;&#x884C;&#x540E;&#x8C03;&#x7528;&#x3002;</span><span class="yiyi-st" id="yiyi-329">&#x8BF7;&#x6CE8;&#x610F;&#xFF0C;&#x9ED8;&#x8BA4;&#x60C5;&#x51B5;&#x4E0B;&#xFF0C;DBAPI&#x8FDE;&#x63A5;&#x59CB;&#x7EC8;&#x5904;&#x4E8E;&#x4E8B;&#x52A1;&#x4E2D; -  SQLAlchemy&#x4F7F;&#x7528;&#x5E94;&#x7528;&#x4E8E;&#x4E0D;&#x540C;&#x7C7B;&#x578B;&#x8BED;&#x53E5;&#x7684;&#x89C4;&#x5219;&#x6765;&#x786E;&#x5B9A;&#x662F;&#x5426;&#x8C03;&#x7528;COMMIT&#x4EE5;&#x63D0;&#x4F9B;&#x5176;&#x201C;&#x81EA;&#x52A8;&#x63D0;&#x4EA4;&#x201D;&#x529F;&#x80FD;&#x3002;</span><span class="yiyi-st" id="yiyi-330">&#x901A;&#x5E38;&#xFF0C;&#x6240;&#x6709;INSERT / UPDATE / DELETE&#x8BED;&#x53E5;&#x4EE5;&#x53CA;CREATE / DROP&#x8BED;&#x53E5;&#x90FD;&#x542F;&#x7528;&#x4E86;&#x81EA;&#x52A8;&#x63D0;&#x4EA4;&#x884C;&#x4E3A;&#xFF1B; SELECT&#x6784;&#x9020;&#x4E0D;&#x3002;</span><span class="yiyi-st" id="yiyi-331">&#x5F53;&#x8C03;&#x7528;&#x9700;&#x8981;COMMIT&#x7684;SELECT&#x6216;&#x5176;&#x4ED6;&#x7279;&#x5B9A;&#x7684;SQL&#x6784;&#x9020;&#x65F6;&#xFF08;&#x901A;&#x5E38;&#x5728;&#x8C03;&#x7528;&#x5B58;&#x50A8;&#x8FC7;&#x7A0B;&#x7B49;&#x65F6;&#xFF09;&#x4F7F;&#x7528;&#x6B64;&#x9009;&#x9879;&#xFF0C;&#x5E76;&#x4E14;&#x663E;&#x5F0F;&#x4E8B;&#x52A1;&#x672A;&#x5904;&#x4E8E;&#x8FDB;&#x884C;&#x4E2D;&#x3002;</span></li><li><span class="yiyi-st" id="yiyi-338"><span class="target" id="sqlalchemy.engine.Connection.execution_options.params.compiled_cache"></span> <strong>compiled_cache</strong> <a class="paramlink headerlink reference internal" href="#sqlalchemy.engine.Connection.execution_options.params.compiled_cache">&#xB6;</a>  - </span><p><span class="yiyi-st" id="yiyi-332">&#x9002;&#x7528;&#x4E8E;&#xFF1A;&#x8FDE;&#x63A5;&#x3002;</span><span class="yiyi-st" id="yiyi-333">&#x5F53;<a class="reference internal" href="#sqlalchemy.engine.Connection" title="sqlalchemy.engine.Connection"><code class="xref py py-class docutils literal"><span class="pre">Connection</span></code></a>&#x5C06;&#x4E00;&#x4E2A;&#x5B50;&#x53E5;&#x8868;&#x8FBE;&#x5F0F;&#x7F16;&#x8BD1;&#x6210;&#x4E00;&#x4E2A;<a class="reference internal" href="internals.html#sqlalchemy.engine.interfaces.Compiled" title="sqlalchemy.engine.interfaces.Compiled"><code class="xref py py-class docutils literal"><span class="pre">Compiled</span></code></a>&#x5BF9;&#x8C61;&#x65F6;&#xFF0C;&#x5C06;&#x4F1A;&#x7F13;&#x5B58;<a class="reference internal" href="internals.html#sqlalchemy.engine.interfaces.Compiled" title="sqlalchemy.engine.interfaces.Compiled"><code class="xref py py-class docutils literal"><span class="pre">Compiled</span></code></a>&#x5BF9;&#x8C61;&#x7684;&#x5B57;&#x5178;&#x3002;</span><span class="yiyi-st" id="yiyi-334">&#x7528;&#x6237;&#x6709;&#x8D23;&#x4EFB;&#x7BA1;&#x7406;&#x8BE5;&#x5B57;&#x5178;&#x7684;&#x5927;&#x5C0F;&#xFF0C;&#x8BE5;&#x5B57;&#x5178;&#x5C06;&#x5177;&#x6709;&#x4E0E;&#x65B9;&#x8A00;&#xFF0C;&#x5B50;&#x53E5;&#x5143;&#x7D20;&#xFF0C;INSERT&#x6216;UPDATE&#x7684;VALUES&#x6216;SET&#x5B50;&#x53E5;&#x4E2D;&#x7684;&#x5217;&#x540D;&#x76F8;&#x5BF9;&#x5E94;&#x7684;&#x952E;&#xFF0C;&#x4EE5;&#x53CA;&#x7528;&#x4E8E;INSERT&#x6216;UPDATE&#x8BED;&#x53E5;&#x3002;</span><span class="yiyi-st" id="yiyi-335">&#x672C;&#x5B57;&#x5178;&#x7684;&#x683C;&#x5F0F;&#x4E0D;&#x4FDD;&#x8BC1;&#x5728;&#x672A;&#x6765;&#x7248;&#x672C;&#x4E2D;&#x4FDD;&#x6301;&#x4E0D;&#x53D8;&#x3002;</span></p><p><span class="yiyi-st" id="yiyi-336">&#x8BF7;&#x6CE8;&#x610F;&#xFF0C;ORM&#x4F7F;&#x7528;&#x5176;&#x81EA;&#x5DF1;&#x7684;&#x201C;&#x5DF2;&#x7F16;&#x8BD1;&#x201D;&#x7F13;&#x5B58;&#x6765;&#x6267;&#x884C;&#x67D0;&#x4E9B;&#x64CD;&#x4F5C;&#xFF0C;&#x5305;&#x62EC;&#x5237;&#x65B0;&#x64CD;&#x4F5C;&#x3002;</span><span class="yiyi-st" id="yiyi-337">ORM&#x4F7F;&#x7528;&#x7684;&#x7F13;&#x5B58;&#x5185;&#x90E8;&#x53D6;&#x4EE3;&#x4E86;&#x6B64;&#x5904;&#x6307;&#x5B9A;&#x7684;&#x7F13;&#x5B58;&#x5B57;&#x5178;&#x3002;</span></p></li><li><span class="yiyi-st" id="yiyi-360"><span class="target" id="sqlalchemy.engine.Connection.execution_options.params.isolation_level"></span> <strong>isolation_level</strong> <a class="paramlink headerlink reference internal" href="#sqlalchemy.engine.Connection.execution_options.params.isolation_level">&#xB6;</a>  - </span><p><span class="yiyi-st" id="yiyi-339">&#x9002;&#x7528;&#x4E8E;&#xFF1A;<a class="reference internal" href="#sqlalchemy.engine.Connection" title="sqlalchemy.engine.Connection"><code class="xref py py-class docutils literal"><span class="pre">Connection</span></code></a>&#x3002;</span><span class="yiyi-st" id="yiyi-340">&#x4E3A;<a class="reference internal" href="#sqlalchemy.engine.Connection" title="sqlalchemy.engine.Connection"><code class="xref py py-class docutils literal"><span class="pre">Connection</span></code></a>&#x5BF9;&#x8C61;&#x7684;&#x751F;&#x547D;&#x5468;&#x671F;&#x8BBE;&#x7F6E;&#x4E8B;&#x52A1;&#x9694;&#x79BB;&#x7EA7;&#x522B;&#xFF08;<em>&#x4E0D;&#x662F;</em>&#x89E3;&#x9664;&#x7ED1;&#x5B9A;DBAPI&#x8FDE;&#x63A5;&#xFF0C;&#x5728;&#x6B64;<a class="reference internal" href="#sqlalchemy.engine.Connection" title="sqlalchemy.engine.Connection"><code class="xref py py-class docutils literal"><span class="pre">Connection</span></code></a>&#x5BF9;&#x8C61;&#xFF09;&#x3002;</span></p><p><span class="yiyi-st" id="yiyi-341">&#x6709;&#x6548;&#x503C;&#x5305;&#x62EC;&#x4F20;&#x9012;&#x7ED9;<a class="reference internal" href="engines.html#sqlalchemy.create_engine" title="sqlalchemy.create_engine"><code class="xref py py-func docutils literal"><span class="pre">create_engine()</span></code></a>&#x7684;<a class="reference internal" href="engines.html#sqlalchemy.create_engine.params.isolation_level" title="sqlalchemy.create_engine"><code class="xref py py-paramref docutils literal"><span class="pre">create_engine.isolation_level</span></code></a>&#x53C2;&#x6570;&#x63A5;&#x53D7;&#x7684;&#x5B57;&#x7B26;&#x4E32;&#x503C;&#x3002;</span><span class="yiyi-st" id="yiyi-342">&#x8FD9;&#x4E9B;&#x7EA7;&#x522B;&#x662F;&#x534A;&#x6570;&#x636E;&#x5E93;&#x7279;&#x5B9A;&#x7684;&#xFF1B;&#x8BF7;&#x53C2;&#x9605;&#x6709;&#x5173;&#x7EA7;&#x522B;&#x7684;&#x4E2A;&#x4EBA;&#x65B9;&#x8A00;&#x6587;&#x6863;&#x3002;</span></p><p><span class="yiyi-st" id="yiyi-343">&#x8BF7;&#x6CE8;&#x610F;&#xFF0C;&#x8BE5;&#x9009;&#x9879;&#x5FC5;&#x7136;&#x4F1A;&#x5F71;&#x54CD;&#x6E90;<a class="reference internal" href="#sqlalchemy.engine.Connection" title="sqlalchemy.engine.Connection"><code class="xref py py-class docutils literal"><span class="pre">Connection</span></code></a>&#x751F;&#x547D;&#x5468;&#x671F;&#x7684;&#x5E95;&#x5C42;DBAPI&#x8FDE;&#x63A5;&#xFF0C;&#x5E76;&#x4E14;&#x4E0D;&#x662F;&#x6BCF;&#x6B21;&#x6267;&#x884C;&#x3002;</span><span class="yiyi-st" id="yiyi-344">&#x76F4;&#x5230;&#x5E95;&#x5C42;DBAPI&#x8FDE;&#x63A5;&#x8FD4;&#x56DE;&#x5230;&#x8FDE;&#x63A5;&#x6C60;&#xFF0C;&#x5373;&#x8C03;&#x7528;<a class="reference internal" href="#sqlalchemy.engine.Connection.close" title="sqlalchemy.engine.Connection.close"><code class="xref py py-meth docutils literal"><span class="pre">Connection.close()</span></code></a>&#x65B9;&#x6CD5;&#x65F6;&#xFF0C;&#x624D;&#x4F1A;&#x5220;&#x9664;&#x6B64;&#x8BBE;&#x7F6E;&#x3002;</span></p><div class="admonition warning"><p class="first admonition-title"><span class="yiyi-st" id="yiyi-345">&#x8B66;&#x544A;</span></p><p><span class="yiyi-st" id="yiyi-346">The <code class="docutils literal"><span class="pre">isolation_level</span></code> execution option should <strong>not</strong> be used when a transaction is already established, that is, the <a class="reference internal" href="#sqlalchemy.engine.Connection.begin" title="sqlalchemy.engine.Connection.begin"><code class="xref py py-meth docutils literal"><span class="pre">Connection.begin()</span></code></a> method or similar has been called. </span><span class="yiyi-st" id="yiyi-347">&#x6570;&#x636E;&#x5E93;&#x65E0;&#x6CD5;&#x66F4;&#x6539;&#x6B63;&#x5728;&#x8FDB;&#x884C;&#x7684;&#x4E8B;&#x52A1;&#x7684;&#x9694;&#x79BB;&#x7EA7;&#x522B;&#xFF0C;&#x5E76;&#x4E14;&#x4E0D;&#x540C;&#x7684;DBAPI&#x548C;/&#x6216;SQLAlchemy&#x65B9;&#x8A00;&#x53EF;&#x80FD;&#x9690;&#x5F0F;&#x56DE;&#x6EDA;&#x6216;&#x63D0;&#x4EA4;&#x4E8B;&#x52A1;&#xFF0C;&#x6216;&#x6839;&#x672C;&#x4E0D;&#x5F71;&#x54CD;&#x8FDE;&#x63A5;&#x3002;</span></p><div class="last versionchanged"><p><span class="yiyi-st" id="yiyi-348"><span class="versionmodified">Changed in version 0.9.9: </span>A warning is emitted when the <code class="docutils literal"><span class="pre">isolation_level</span></code> execution option is used after a transaction has been started with <a class="reference internal" href="#sqlalchemy.engine.Connection.begin" title="sqlalchemy.engine.Connection.begin"><code class="xref py py-meth docutils literal"><span class="pre">Connection.begin()</span></code></a> or similar.</span></p></div></div><div class="admonition note"><p class="first admonition-title"><span class="yiyi-st" id="yiyi-349">&#x6CE8;&#x610F;</span></p><p class="last"><span class="yiyi-st" id="yiyi-350">&#x5982;&#x679C;<a class="reference internal" href="#sqlalchemy.engine.Connection" title="sqlalchemy.engine.Connection"><code class="xref py py-class docutils literal"><span class="pre">Connection</span></code></a>&#x65E0;&#x6548;&#xFF0C;&#x5219;<code class="docutils literal"><span class="pre">isolation_level</span></code>&#x6267;&#x884C;&#x9009;&#x9879;&#x9690;&#x5F0F;&#x91CD;&#x7F6E;&#xFF0C;&#x4F8B;&#x5982;&#xFF0C;&#x901A;&#x8FC7;<a class="reference internal" href="#sqlalchemy.engine.Connection.invalidate" title="sqlalchemy.engine.Connection.invalidate"><code class="xref py py-meth docutils literal"><span class="pre">Connection.invalidate()</span></code></a>&#x65B9;&#x6CD5;&#xFF0C;&#x6216;&#x8005;&#x53D1;&#x751F;&#x65AD;&#x5F00;&#x8FDE;&#x63A5;&#x9519;&#x8BEF;&#x3002;</span><span class="yiyi-st" id="yiyi-351">&#x5931;&#x6548;&#x540E;&#x4EA7;&#x751F;&#x7684;&#x65B0;&#x8FDE;&#x63A5;&#x5C06;&#x4E0D;&#x4F1A;&#x81EA;&#x52A8;&#x91CD;&#x65B0;&#x5E94;&#x7528;&#x9694;&#x79BB;&#x7EA7;&#x522B;&#x3002;</span></p></div><div class="admonition seealso"><p class="first admonition-title"><span class="yiyi-st" id="yiyi-352">&#x4E5F;&#x53EF;&#x4EE5;&#x770B;&#x770B;</span></p><p><span class="yiyi-st" id="yiyi-353"><a class="reference internal" href="engines.html#sqlalchemy.create_engine.params.isolation_level" title="sqlalchemy.create_engine"><code class="xref py py-paramref docutils literal"><span class="pre">create_engine.isolation_level</span></code></a>  - &#x6839;&#x636E;<a class="reference internal" href="#sqlalchemy.engine.Engine" title="sqlalchemy.engine.Engine"><code class="xref py py-class docutils literal"><span class="pre">Engine</span></code></a>&#x8BBE;&#x7F6E;&#x9694;&#x79BB;&#x7EA7;&#x522B;</span></p><p><span class="yiyi-st" id="yiyi-354"><a class="reference internal" href="#sqlalchemy.engine.Connection.get_isolation_level" title="sqlalchemy.engine.Connection.get_isolation_level"><code class="xref py py-meth docutils literal"><span class="pre">Connection.get_isolation_level()</span></code></a>  - &#x67E5;&#x770B;&#x5F53;&#x524D;&#x7EA7;&#x522B;</span></p><p><span class="yiyi-st" id="yiyi-355"><a class="reference internal" href="dialects_sqlite.html#sqlite-isolation-level"><span>SQLite Transaction Isolation</span></a></span></p><p><span class="yiyi-st" id="yiyi-356"><a class="reference internal" href="dialects_postgresql.html#postgresql-isolation-level"><span>Postgresql Transaction Isolation</span></a></span></p><p><span class="yiyi-st" id="yiyi-357"><a class="reference internal" href="dialects_mysql.html#mysql-isolation-level"><span>MySQL Transaction Isolation</span></a></span></p><p><span class="yiyi-st" id="yiyi-358"><a class="reference internal" href="dialects_mssql.html#mssql-isolation-level"><span>SQL Server Transaction Isolation</span></a></span></p><p class="last"><span class="yiyi-st" id="yiyi-359"><a class="reference internal" href="orm_session_transaction.html#session-transaction-isolation"><span>Setting Transaction Isolation Levels</span></a> - for the ORM</span></p></div></li><li><span class="yiyi-st" id="yiyi-364"><span class="target" id="sqlalchemy.engine.Connection.execution_options.params.no_parameters"></span> <strong>no_parameters</strong> <a class="paramlink headerlink reference internal" href="#sqlalchemy.engine.Connection.execution_options.params.no_parameters">&#xB6;</a>  - </span><p><span class="yiyi-st" id="yiyi-361">&#x5F53;<code class="docutils literal"><span class="pre">True</span></code>&#x65F6;&#xFF0C;&#x5982;&#x679C;&#x6700;&#x7EC8;&#x53C2;&#x6570;&#x5217;&#x8868;&#x6216;&#x5B57;&#x5178;&#x5B8C;&#x5168;&#x4E3A;&#x7A7A;&#xFF0C;&#x5219;&#x5C06;&#x8C03;&#x7528;&#x5149;&#x6807;&#x4E0A;&#x7684;&#x8BED;&#x53E5;&#x4F5C;&#x4E3A;<code class="docutils literal"><span class="pre">cursor.execute(statement)</span></code>&#xFF0C;&#x800C;&#x4E0D;&#x662F;&#x6839;&#x672C;&#x4E0D;&#x4F20;&#x9012;&#x53C2;&#x6570;&#x96C6;&#x5408;&#x3002;</span><span class="yiyi-st" id="yiyi-362">&#x4E00;&#x4E9B;DBAPI&#x5982;psycopg2&#x548C;mysql-python&#x53EA;&#x6709;&#x5728;&#x53C2;&#x6570;&#x5B58;&#x5728;&#x65F6;&#x624D;&#x5C06;&#x767E;&#x5206;&#x53F7;&#x89C6;&#x4E3A;&#x91CD;&#x8981;&#x7B26;&#x53F7;&#xFF1B;&#x6B64;&#x9009;&#x9879;&#x5141;&#x8BB8;&#x4EE3;&#x7801;&#x751F;&#x6210;&#x5305;&#x542B;&#x767E;&#x5206;&#x53F7;&#xFF08;&#x53EF;&#x80FD;&#x8FD8;&#x6709;&#x5176;&#x4ED6;&#x5B57;&#x7B26;&#xFF09;&#x7684;SQL&#xFF0C;&#x8FD9;&#x4E9B;&#x7B26;&#x53F7;&#x662F;&#x7531;DBAPI&#x6267;&#x884C;&#x8FD8;&#x662F;&#x901A;&#x8FC7;&#x7BA1;&#x7406;&#x540E;&#x6765;&#x7531;&#x547D;&#x4EE4;&#x884C;&#x5DE5;&#x5177;&#x8C03;&#x7528;&#x7684;&#x811A;&#x672C;&#x4F20;&#x9012;&#x3002;</span></p><div class="versionadded"><p><span class="yiyi-st" id="yiyi-363"><span class="versionmodified">New in version 0.7.6.</span></span></p></div></li><li><span class="yiyi-st" id="yiyi-365"><span class="target" id="sqlalchemy.engine.Connection.execution_options.params.stream_results"></span> <strong>stream_results</strong> <a class="paramlink headerlink reference internal" href="#sqlalchemy.engine.Connection.execution_options.params.stream_results">&#xB6;</a>  - &#x9002;&#x7528;&#x4E8E;&#xFF1A;Connection&#xFF0C;&#x8BED;&#x53E5;&#x3002;</span><span class="yiyi-st" id="yiyi-366">&#x5982;&#x679C;&#x53EF;&#x80FD;&#x7684;&#x8BDD;&#xFF0C;&#x5BF9;&#x65B9;&#x8A00;&#x8868;&#x793A;&#x7ED3;&#x679C;&#x5E94;&#x8BE5;&#x662F;&#x201C;&#x6D41;&#x5F0F;&#x201D;&#x800C;&#x4E0D;&#x662F;&#x9884;&#x5148;&#x7F13;&#x51B2;&#x7684;&#x3002;</span><span class="yiyi-st" id="yiyi-367">&#x8FD9;&#x662F;&#x8BB8;&#x591A;DBAPI&#x7684;&#x9650;&#x5236;&#x3002;</span><span class="yiyi-st" id="yiyi-368">&#x56FD;&#x65D7;&#x76EE;&#x524D;&#x53EA;&#x80FD;&#x901A;&#x8FC7;psycopg2&#x65B9;&#x8A00;&#x6765;&#x7406;&#x89E3;&#x3002;</span></li><li><span class="yiyi-st" id="yiyi-374"><span class="target" id="sqlalchemy.engine.Connection.execution_options.params.schema_translate_map"></span> <strong>schema_translate_map</strong> <a class="paramlink headerlink reference internal" href="#sqlalchemy.engine.Connection.execution_options.params.schema_translate_map">&#xB6;</a>  - </span><p><span class="yiyi-st" id="yiyi-369">&#x9002;&#x7528;&#x4E8E;&#xFF1A;&#x8FDE;&#x63A5;&#xFF0C;&#x5F15;&#x64CE;&#x3002;</span><span class="yiyi-st" id="yiyi-370">&#x5C06;&#x6A21;&#x5F0F;&#x540D;&#x6620;&#x5C04;&#x5230;&#x6A21;&#x5F0F;&#x540D;&#x79F0;&#x7684;&#x5B57;&#x5178;&#xFF0C;&#x5C06;SQL&#x6216;DDL&#x8868;&#x8FBE;&#x5F0F;&#x5143;&#x7D20;&#x7F16;&#x8BD1;&#x4E3A;&#x5B57;&#x7B26;&#x4E32;&#x65F6;&#x9047;&#x5230;&#x7684;&#x6BCF;&#x4E2A;<a class="reference internal" href="metadata.html#sqlalchemy.schema.Table" title="sqlalchemy.schema.Table"><code class="xref py py-class docutils literal"><span class="pre">Table</span></code></a>&#x5143;&#x7D20;&#x7684;<a class="reference internal" href="metadata.html#sqlalchemy.schema.Table.params.schema" title="sqlalchemy.schema.Table"><code class="xref py py-paramref docutils literal"><span class="pre">Table.schema</span></code></a>&#x5F97;&#x5230;&#x7684;&#x6A21;&#x5F0F;&#x540D;&#x79F0;&#x5C06;&#x6839;&#x636E;&#x539F;&#x59CB;&#x540D;&#x79F0;&#x7684;&#x6620;&#x5C04;&#x4E2D;&#x7684;&#x5B58;&#x5728;&#x8FDB;&#x884C;&#x8F6C;&#x6362;&#x3002;</span></p><div class="versionadded"><p><span class="yiyi-st" id="yiyi-371"><span class="versionmodified">&#x7248;&#x672C;1.1&#x4E2D;&#x7684;&#x65B0;&#x529F;&#x80FD;</span></span></p></div><div class="admonition seealso"><p class="first admonition-title"><span class="yiyi-st" id="yiyi-372">&#x4E5F;&#x53EF;&#x4EE5;&#x770B;&#x770B;</span></p><p class="last"><span class="yiyi-st" id="yiyi-373"><a class="reference internal" href="#schema-translating"><span>Translation of Schema Names</span></a></span></p></div></li></ul></td></tr></tbody></table></dd></dl><dl class="method"><dt id="sqlalchemy.engine.Connection.get_isolation_level"><span class="yiyi-st" id="yiyi-375"><code class="descname"> get_isolation_level  T0&gt; <span class="sig-paren">&#xFF08; T1&gt; <span class="sig-paren">&#xFF09; T2&gt; <a class="headerlink" href="#sqlalchemy.engine.Connection.get_isolation_level" title="Permalink to this definition">&#xB6; T3&gt;</a></span></span></code></span></dt><dd><p><span class="yiyi-st" id="yiyi-376">&#x8FD4;&#x56DE;&#x5206;&#x914D;&#x7ED9;<a class="reference internal" href="#sqlalchemy.engine.Connection" title="sqlalchemy.engine.Connection"><code class="xref py py-class docutils literal"><span class="pre">Connection</span></code></a>&#x7684;&#x5F53;&#x524D;&#x9694;&#x79BB;&#x7EA7;&#x522B;&#x3002;</span></p><p><span class="yiyi-st" id="yiyi-377">&#x8FD9;&#x901A;&#x5E38;&#x662F;&#x7531;&#x65B9;&#x8A00;&#x786E;&#x5B9A;&#x7684;&#x9ED8;&#x8BA4;&#x9694;&#x79BB;&#x7EA7;&#x522B;&#xFF0C;&#x9664;&#x975E;&#x5DF2;&#x7ECF;&#x4F7F;&#x7528;<a class="reference internal" href="#sqlalchemy.engine.Connection.execution_options.params.isolation_level" title="sqlalchemy.engine.Connection.execution_options"><code class="xref py py-paramref docutils literal"><span class="pre">Connection.execution_options.isolation_level</span></code></a>&#x529F;&#x80FD;&#x6765;&#x6539;&#x53D8;&#x6BCF;&#x4E2A;<a class="reference internal" href="#sqlalchemy.engine.Connection" title="sqlalchemy.engine.Connection"><code class="xref py py-class docutils literal"><span class="pre">Connection</span></code></a>&#x7684;&#x9694;&#x79BB;&#x7EA7;&#x522B;&#x57FA;&#x7840;&#x3002;</span></p><p><span class="yiyi-st" id="yiyi-378">&#x6B64;&#x5C5E;&#x6027;&#x901A;&#x5E38;&#x4F1A;&#x6267;&#x884C;&#x5B9E;&#x65F6;SQL&#x64CD;&#x4F5C;&#x4EE5;&#x83B7;&#x53D6;&#x5F53;&#x524D;&#x9694;&#x79BB;&#x7EA7;&#x522B;&#xFF0C;&#x56E0;&#x6B64;&#x8FD4;&#x56DE;&#x7684;&#x503C;&#x662F;&#x5E95;&#x5C42;DBAPI&#x8FDE;&#x63A5;&#x4E0A;&#x7684;&#x5B9E;&#x9645;&#x7EA7;&#x522B;&#xFF0C;&#x65E0;&#x8BBA;&#x6B64;&#x72B6;&#x6001;&#x662F;&#x5982;&#x4F55;&#x8BBE;&#x7F6E;&#x7684;&#x3002;</span><span class="yiyi-st" id="yiyi-379">&#x4E0E;<a class="reference internal" href="#sqlalchemy.engine.Connection.default_isolation_level" title="sqlalchemy.engine.Connection.default_isolation_level"><code class="xref py py-attr docutils literal"><span class="pre">Connection.default_isolation_level</span></code></a>&#x8BBF;&#x95EE;&#x5668;&#x6BD4;&#x8F83;&#xFF0C;&#x8BE5;&#x8BBF;&#x95EE;&#x5668;&#x8FD4;&#x56DE;&#x65B9;&#x8A00;&#x7EA7;&#x8BBE;&#x7F6E;&#x800C;&#x4E0D;&#x6267;&#x884C;SQL&#x67E5;&#x8BE2;&#x3002;</span></p><div class="versionadded"><p><span class="yiyi-st" id="yiyi-380"><span class="versionmodified">&#x7248;&#x672C;0.9.9&#x4E2D;&#x7684;&#x65B0;&#x529F;&#x80FD;</span></span></p></div><div class="admonition seealso"><p class="first admonition-title"><span class="yiyi-st" id="yiyi-381">&#x4E5F;&#x53EF;&#x4EE5;&#x770B;&#x770B;</span></p><p><span class="yiyi-st" id="yiyi-382"><a class="reference internal" href="#sqlalchemy.engine.Connection.default_isolation_level" title="sqlalchemy.engine.Connection.default_isolation_level"><code class="xref py py-attr docutils literal"><span class="pre">Connection.default_isolation_level</span></code></a>  - &#x67E5;&#x770B;&#x9ED8;&#x8BA4;&#x7EA7;&#x522B;</span></p><p><span class="yiyi-st" id="yiyi-383"><a class="reference internal" href="engines.html#sqlalchemy.create_engine.params.isolation_level" title="sqlalchemy.create_engine"><code class="xref py py-paramref docutils literal"><span class="pre">create_engine.isolation_level</span></code></a>  - &#x6839;&#x636E;<a class="reference internal" href="#sqlalchemy.engine.Engine" title="sqlalchemy.engine.Engine"><code class="xref py py-class docutils literal"><span class="pre">Engine</span></code></a>&#x8BBE;&#x7F6E;&#x9694;&#x79BB;&#x7EA7;&#x522B;</span></p><p class="last"><span class="yiyi-st" id="yiyi-384"><a class="reference internal" href="#sqlalchemy.engine.Connection.execution_options.params.isolation_level" title="sqlalchemy.engine.Connection.execution_options"><code class="xref py py-paramref docutils literal"><span class="pre">Connection.execution_options.isolation_level</span></code></a>  - &#x6839;&#x636E;<a class="reference internal" href="#sqlalchemy.engine.Connection" title="sqlalchemy.engine.Connection"><code class="xref py py-class docutils literal"><span class="pre">Connection</span></code></a>&#x8BBE;&#x7F6E;&#x9694;&#x79BB;&#x7EA7;&#x522B;</span></p></div></dd></dl><dl class="method"><dt id="sqlalchemy.engine.Connection.in_transaction"><span class="yiyi-st" id="yiyi-385"><code class="descname"> in_transaction  T0&gt; <span class="sig-paren">&#xFF08; T1&gt; <span class="sig-paren">&#xFF09; T2&gt; <a class="headerlink" href="#sqlalchemy.engine.Connection.in_transaction" title="Permalink to this definition">&#xB6; T3&gt;</a></span></span></code></span></dt><dd><p><span class="yiyi-st" id="yiyi-386">&#x5982;&#x679C;&#x4E8B;&#x52A1;&#x6B63;&#x5728;&#x8FDB;&#x884C;&#xFF0C;&#x5219;&#x8FD4;&#x56DE;True&#x3002;</span></p></dd></dl><dl class="attribute"><dt id="sqlalchemy.engine.Connection.info"><span class="yiyi-st" id="yiyi-387"><code class="descname">&#x4FE1;&#x606F; T0&gt; <a class="headerlink" href="#sqlalchemy.engine.Connection.info" title="Permalink to this definition">&#xB6; T1&gt;</a></code></span></dt><dd><p><span class="yiyi-st" id="yiyi-388">&#x4E0E;&#x6B64;<a class="reference internal" href="#sqlalchemy.engine.Connection" title="sqlalchemy.engine.Connection"><code class="xref py py-class docutils literal"><span class="pre">Connection</span></code></a>&#x5F15;&#x7528;&#x7684;&#x5E95;&#x5C42;DBAPI&#x8FDE;&#x63A5;&#x5173;&#x8054;&#x7684;&#x4FE1;&#x606F;&#x5B57;&#x5178;&#xFF0C;&#x5141;&#x8BB8;&#x7528;&#x6237;&#x5B9A;&#x4E49;&#x7684;&#x6570;&#x636E;&#x4E0E;&#x8FDE;&#x63A5;&#x76F8;&#x5173;&#x8054;&#x3002;</span></p><p><span class="yiyi-st" id="yiyi-389">&#x8FD9;&#x91CC;&#x7684;&#x6570;&#x636E;&#x5C06;&#x4E0E;DBAPI&#x8FDE;&#x63A5;&#x4E00;&#x8D77;&#x8FDB;&#x884C;&#xFF0C;&#x5305;&#x62EC;&#x8FD4;&#x56DE;&#x5230;&#x8FDE;&#x63A5;&#x6C60;&#x4E4B;&#x540E;&#xFF0C;&#x5E76;&#x5728;<a class="reference internal" href="#sqlalchemy.engine.Connection" title="sqlalchemy.engine.Connection"><code class="xref py py-class docutils literal"><span class="pre">Connection</span></code></a>&#x7684;&#x540E;&#x7EED;&#x5B9E;&#x4F8B;&#x4E2D;&#x518D;&#x6B21;&#x4F7F;&#x7528;&#x3002;</span></p></dd></dl><dl class="method"><dt id="sqlalchemy.engine.Connection.invalidate"><span class="yiyi-st" id="yiyi-390"><code class="descname">&#x65E0;&#x6548; T0&gt; <span class="sig-paren">&#xFF08; T1&gt; <em>&#x4F8B;&#x5916;=&#x65E0; T2&gt; <span class="sig-paren">&#xFF09; T3&gt; <a class="headerlink" href="#sqlalchemy.engine.Connection.invalidate" title="Permalink to this definition">&#xB6; T4&gt;</a></span></em></span></code></span></dt><dd><p><span class="yiyi-st" id="yiyi-391">&#x4F7F;&#x4E0E;<a class="reference internal" href="#sqlalchemy.engine.Connection" title="sqlalchemy.engine.Connection"><code class="xref py py-class docutils literal"><span class="pre">Connection</span></code></a>&#x5173;&#x8054;&#x7684;&#x57FA;&#x7840;DBAPI&#x8FDE;&#x63A5;&#x5931;&#x6548;&#x3002;</span></p><p><span class="yiyi-st" id="yiyi-392">&#x5E95;&#x5C42;&#x7684;DBAPI&#x8FDE;&#x63A5;&#x5B9E;&#x9645;&#x4E0A;&#x662F;&#x5173;&#x95ED;&#x7684;&#xFF08;&#x5982;&#x679C;&#x53EF;&#x80FD;&#x7684;&#x8BDD;&#xFF09;&#xFF0C;&#x5E76;&#x4E14;&#x88AB;&#x4E22;&#x5F03;&#x3002;</span><span class="yiyi-st" id="yiyi-393">&#x5B83;&#x7684;&#x6E90;&#x8FDE;&#x63A5;&#x6C60;&#x901A;&#x5E38;&#x4F1A;&#x61D2;&#x60F0;&#x5730;&#x521B;&#x5EFA;&#x4E00;&#x4E2A;&#x65B0;&#x7684;&#x8FDE;&#x63A5;&#x6765;&#x66FF;&#x6362;&#x5B83;&#x3002;</span></p><p><span class="yiyi-st" id="yiyi-394">Upon the next use (where &#x201C;use&#x201D; typically means using the <a class="reference internal" href="#sqlalchemy.engine.Connection.execute" title="sqlalchemy.engine.Connection.execute"><code class="xref py py-meth docutils literal"><span class="pre">Connection.execute()</span></code></a> method or similar), this <a class="reference internal" href="#sqlalchemy.engine.Connection" title="sqlalchemy.engine.Connection"><code class="xref py py-class docutils literal"><span class="pre">Connection</span></code></a> will attempt to procure a new DBAPI connection using the services of the <a class="reference internal" href="pooling.html#sqlalchemy.pool.Pool" title="sqlalchemy.pool.Pool"><code class="xref py py-class docutils literal"><span class="pre">Pool</span></code></a> as a source of connectivty (e.g. a &#x201C;reconnection&#x201D;).</span></p><p><span class="yiyi-st" id="yiyi-395">If a transaction was in progress (e.g. the <a class="reference internal" href="#sqlalchemy.engine.Connection.begin" title="sqlalchemy.engine.Connection.begin"><code class="xref py py-meth docutils literal"><span class="pre">Connection.begin()</span></code></a> method has been called) when <a class="reference internal" href="#sqlalchemy.engine.Connection.invalidate" title="sqlalchemy.engine.Connection.invalidate"><code class="xref py py-meth docutils literal"><span class="pre">Connection.invalidate()</span></code></a> method is called, at the DBAPI level all state associated with this transaction is lost, as the DBAPI connection is closed. </span><span class="yiyi-st" id="yiyi-396">&#x901A;&#x8FC7;&#x8C03;&#x7528;<a class="reference internal" href="#sqlalchemy.engine.Transaction.rollback" title="sqlalchemy.engine.Transaction.rollback"><code class="xref py py-meth docutils literal"><span class="pre">Transaction.rollback()</span></code></a>&#x65B9;&#x6CD5;&#xFF0C;<a class="reference internal" href="#sqlalchemy.engine.Connection" title="sqlalchemy.engine.Connection"><code class="xref py py-class docutils literal"><span class="pre">Connection</span></code></a>&#x4E0D;&#x4F1A;&#x5141;&#x8BB8;&#x91CD;&#x65B0;&#x8FDE;&#x63A5;&#x7EE7;&#x7EED;&#xFF0C;&#x76F4;&#x5230;<a class="reference internal" href="#sqlalchemy.engine.Transaction" title="sqlalchemy.engine.Transaction"><code class="xref py py-class docutils literal"><span class="pre">Transaction</span></code></a>&#x5BF9;&#x8C61;&#x7ED3;&#x675F;&#x3002;&#x5728;&#x6B64;&#x4E4B;&#x524D;&#xFF0C;&#x4EFB;&#x4F55;&#x7EE7;&#x7EED;&#x4F7F;&#x7528;<a class="reference internal" href="#sqlalchemy.engine.Connection" title="sqlalchemy.engine.Connection"><code class="xref py py-class docutils literal"><span class="pre">Connection</span></code></a>&#x7684;&#x5C1D;&#x8BD5;&#x90FD;&#x4F1A;&#x5F15;&#x53D1;&#x4E00;&#x4E2A;<a class="reference internal" href="exceptions.html#sqlalchemy.exc.InvalidRequestError" title="sqlalchemy.exc.InvalidRequestError"><code class="xref py py-class docutils literal"><span class="pre">InvalidRequestError</span></code></a>&#x3002;</span><span class="yiyi-st" id="yiyi-397">&#x8FD9;&#x662F;&#x4E3A;&#x4E86;&#x9632;&#x6B62;&#x5E94;&#x7528;&#x7A0B;&#x5E8F;&#x610F;&#x5916;&#x5730;&#x7EE7;&#x7EED;&#x6B63;&#x5728;&#x8FDB;&#x884C;&#x7684;&#x4E8B;&#x52A1;&#x64CD;&#x4F5C;&#xFF0C;&#x5C3D;&#x7BA1;&#x4E8B;&#x52A1;&#x7531;&#x4E8E;&#x5931;&#x6548;&#x800C;&#x4E22;&#x5931;&#x3002;</span></p><p><span class="yiyi-st" id="yiyi-398">The <a class="reference internal" href="#sqlalchemy.engine.Connection.invalidate" title="sqlalchemy.engine.Connection.invalidate"><code class="xref py py-meth docutils literal"><span class="pre">Connection.invalidate()</span></code></a> method, just like auto-invalidation, will at the connection pool level invoke the <a class="reference internal" href="events.html#sqlalchemy.events.PoolEvents.invalidate" title="sqlalchemy.events.PoolEvents.invalidate"><code class="xref py py-meth docutils literal"><span class="pre">PoolEvents.invalidate()</span></code></a> event.</span></p><div class="admonition seealso"><p class="first admonition-title"><span class="yiyi-st" id="yiyi-399">&#x4E5F;&#x53EF;&#x4EE5;&#x770B;&#x770B;</span></p><p class="last"><span class="yiyi-st" id="yiyi-400"><a class="reference internal" href="pooling.html#pool-connection-invalidation"><span>More on Invalidation</span></a></span></p></div></dd></dl><dl class="attribute"><dt id="sqlalchemy.engine.Connection.invalidated"><span class="yiyi-st" id="yiyi-401"><code class="descname">&#x65E0;&#x6548; T0&gt; <a class="headerlink" href="#sqlalchemy.engine.Connection.invalidated" title="Permalink to this definition">&#xB6; T1&gt;</a></code></span></dt><dd><p><span class="yiyi-st" id="yiyi-402">&#x5982;&#x679C;&#x6B64;&#x8FDE;&#x63A5;&#x5931;&#x6548;&#xFF0C;&#x5219;&#x8FD4;&#x56DE;True&#x3002;</span></p></dd></dl><dl class="method"><dt id="sqlalchemy.engine.Connection.run_callable"><span class="yiyi-st" id="yiyi-403"><code class="descname">run_callable</code> <span class="sig-paren">&#xFF08;</span> <em>callable _</em>&#xFF0C;<em>* args</em>&#xFF0C;<em>** kwargs</em> <span class="sig-paren">/ T5&gt; <a class="headerlink" href="#sqlalchemy.engine.Connection.run_callable" title="Permalink to this definition">&#xB6; T6&gt;</a></span></span></dt><dd><p><span class="yiyi-st" id="yiyi-404">&#x7ED9;&#x5B9A;&#x4E00;&#x4E2A;&#x53EF;&#x8C03;&#x7528;&#x7684;&#x5BF9;&#x8C61;&#x6216;&#x51FD;&#x6570;&#xFF0C;&#x6267;&#x884C;&#x5B83;&#xFF0C;&#x4F20;&#x9012;&#x4E00;&#x4E2A;<a class="reference internal" href="#sqlalchemy.engine.Connection" title="sqlalchemy.engine.Connection"><code class="xref py py-class docutils literal"><span class="pre">Connection</span></code></a>&#x4F5C;&#x4E3A;&#x7B2C;&#x4E00;&#x4E2A;&#x53C2;&#x6570;&#x3002;</span></p><p><span class="yiyi-st" id="yiyi-405">&#x7ED9;&#x5B9A;&#x7684;* args&#x548C;** kwargs&#x5728;<a class="reference internal" href="#sqlalchemy.engine.Connection" title="sqlalchemy.engine.Connection"><code class="xref py py-class docutils literal"><span class="pre">Connection</span></code></a>&#x53C2;&#x6570;&#x540E;&#x4F20;&#x9012;&#x3002;</span></p><p><span class="yiyi-st" id="yiyi-406">&#x8BE5;&#x51FD;&#x6570;&#x4E0E;<a class="reference internal" href="#sqlalchemy.engine.Engine.run_callable" title="sqlalchemy.engine.Engine.run_callable"><code class="xref py py-meth docutils literal"><span class="pre">Engine.run_callable()</span></code></a>&#x4E00;&#x8D77;&#x5141;&#x8BB8;&#x51FD;&#x6570;&#x4E0E;<a class="reference internal" href="#sqlalchemy.engine.Connection" title="sqlalchemy.engine.Connection"><code class="xref py py-class docutils literal"><span class="pre">Connection</span></code></a>&#x6216;<a class="reference internal" href="#sqlalchemy.engine.Engine" title="sqlalchemy.engine.Engine"><code class="xref py py-class docutils literal"><span class="pre">Engine</span></code></a>&#x5BF9;&#x8C61;&#x4E00;&#x8D77;&#x8FD0;&#x884C;&#xFF0C;&#x800C;&#x65E0;&#x9700;&#x77E5;&#x9053;&#x54EA;&#x4E2A;&#x4E00;&#x4E2A;&#x6B63;&#x5728;&#x5904;&#x7406;&#x3002;</span></p></dd></dl><dl class="method"><dt id="sqlalchemy.engine.Connection.scalar"><span class="yiyi-st" id="yiyi-407"><code class="descname">&#x6807;&#x91CF;</code> <span class="sig-paren">&#xFF08;</span> <em>object</em>&#xFF0C;<em>* multiparams</em>&#xFF0C;<em>** params</em> <span class="sig-paren">/ T5&gt; <a class="headerlink" href="#sqlalchemy.engine.Connection.scalar" title="Permalink to this definition">&#xB6; T6&gt;</a></span></span></dt><dd><p><span class="yiyi-st" id="yiyi-408">&#x6267;&#x884C;&#x5E76;&#x8FD4;&#x56DE;&#x7B2C;&#x4E00;&#x884C;&#x7684;&#x7B2C;&#x4E00;&#x5217;&#x3002;</span></p><p><span class="yiyi-st" id="yiyi-409">&#x6267;&#x884C;&#x540E;&#x5173;&#x95ED;&#x57FA;&#x7840;&#x7ED3;&#x679C;/&#x6E38;&#x6807;&#x3002;</span></p></dd></dl><dl class="attribute"><dt id="sqlalchemy.engine.Connection.schema_for_object"><span class="yiyi-st" id="yiyi-410"><code class="descname">schema_for_object</code> <em class="property">=&#xFF06;lt&#xFF1B; sqlalchemy.sql.schema._SchemaTranslateMap&#x5BF9;&#x8C61;&#xFF06;gt&#xFF1B;</em> <a class="headerlink" href="#sqlalchemy.engine.Connection.schema_for_object" title="Permalink to this definition">&#xB6;</a></span></dt><dd><p><span class="yiyi-st" id="yiyi-411">&#x8FD4;&#x56DE;&#x5BF9;&#x8C61;&#x7684;&#x201C;.schema&#x201D;&#x5C5E;&#x6027;&#x3002;</span></p><p><span class="yiyi-st" id="yiyi-412">&#x7528;&#x4E8E;<a class="reference internal" href="metadata.html#sqlalchemy.schema.Table" title="sqlalchemy.schema.Table"><code class="xref py py-class docutils literal"><span class="pre">Table</span></code></a>&#xFF0C;<a class="reference internal" href="defaults.html#sqlalchemy.schema.Sequence" title="sqlalchemy.schema.Sequence"><code class="xref py py-class docutils literal"><span class="pre">Sequence</span></code></a>&#x548C;&#x7C7B;&#x4F3C;&#x5BF9;&#x8C61;&#xFF0C;&#x5E76;&#x8003;&#x8651;<a class="reference internal" href="#sqlalchemy.engine.Connection.execution_options.params.schema_translate_map" title="sqlalchemy.engine.Connection.execution_options"><code class="xref py py-paramref docutils literal"><span class="pre">Connection.execution_options.schema_translate_map</span></code></a>&#x53C2;&#x6570;&#x3002;</span></p><blockquote><div><div class="versionadded"><p><span class="yiyi-st" id="yiyi-413"><span class="versionmodified">&#x7248;&#x672C;1.1&#x4E2D;&#x7684;&#x65B0;&#x529F;&#x80FD;</span></span></p></div><div class="admonition seealso"><p class="first admonition-title"><span class="yiyi-st" id="yiyi-414">&#x4E5F;&#x53EF;&#x4EE5;&#x770B;&#x770B;</span></p><p class="last"><span class="yiyi-st" id="yiyi-415"><a class="reference internal" href="#schema-translating"><span>Translation of Schema Names</span></a></span></p></div></div></blockquote></dd></dl><dl class="method"><dt id="sqlalchemy.engine.Connection.transaction"><span class="yiyi-st" id="yiyi-416"><code class="descname">&#x4E8B;&#x52A1;</code> <span class="sig-paren">&#xFF08;</span> <em>callable _</em>&#xFF0C;<em>* args</em>&#xFF0C;<em>** kwargs</em> <span class="sig-paren">/ T5&gt; <a class="headerlink" href="#sqlalchemy.engine.Connection.transaction" title="Permalink to this definition">&#xB6; T6&gt;</a></span></span></dt><dd><p><span class="yiyi-st" id="yiyi-417">&#x5728;&#x4E8B;&#x52A1;&#x8FB9;&#x754C;&#x5185;&#x6267;&#x884C;&#x7ED9;&#x5B9A;&#x7684;&#x529F;&#x80FD;&#x3002;</span></p><p><span class="yiyi-st" id="yiyi-418">&#x51FD;&#x6570;&#x4F20;&#x9012;&#x8FD9;&#x4E2A;<a class="reference internal" href="#sqlalchemy.engine.Connection" title="sqlalchemy.engine.Connection"><code class="xref py py-class docutils literal"><span class="pre">Connection</span></code></a>&#x4F5C;&#x4E3A;&#x7B2C;&#x4E00;&#x4E2A;&#x53C2;&#x6570;&#xFF0C;&#x63A5;&#x4E0B;&#x6765;&#x662F;&#x7ED9;&#x5B9A;&#x7684;* args&#x548C;** kwargs&#xFF0C;&#x4F8B;&#x5982;&#xFF1A;</span></p><div class="highlight-python"><div class="highlight"><pre><span></span><span class="k">def</span> <span class="nf">do_something</span><span class="p">(</span><span class="n">conn</span><span class="p">,</span> <span class="n">x</span><span class="p">,</span> <span class="n">y</span><span class="p">):</span>
    <span class="n">conn</span><span class="o">.</span><span class="n">execute</span><span class="p">(</span><span class="s2">&quot;some statement&quot;</span><span class="p">,</span> <span class="p">{</span><span class="s1">&apos;x&apos;</span><span class="p">:</span><span class="n">x</span><span class="p">,</span> <span class="s1">&apos;y&apos;</span><span class="p">:</span><span class="n">y</span><span class="p">})</span>

<span class="n">conn</span><span class="o">.</span><span class="n">transaction</span><span class="p">(</span><span class="n">do_something</span><span class="p">,</span> <span class="mi">5</span><span class="p">,</span> <span class="mi">10</span><span class="p">)</span></pre></div></div><p><span class="yiyi-st" id="yiyi-419">&#x51FD;&#x6570;&#x5185;&#x90E8;&#x7684;&#x64CD;&#x4F5C;&#x90FD;&#x5728;&#x5355;&#x4E2A;<a class="reference internal" href="#sqlalchemy.engine.Transaction" title="sqlalchemy.engine.Transaction"><code class="xref py py-class docutils literal"><span class="pre">Transaction</span></code></a>&#x7684;&#x4E0A;&#x4E0B;&#x6587;&#x4E2D;&#x8C03;&#x7528;&#x3002;</span><span class="yiyi-st" id="yiyi-420">&#x6210;&#x529F;&#x540E;&#xFF0C;&#x4EA4;&#x6613;&#x5373;&#x544A;&#x627F;&#x8BFA;&#x3002;</span><span class="yiyi-st" id="yiyi-421">&#x5982;&#x679C;&#x5F15;&#x53D1;&#x5F02;&#x5E38;&#xFF0C;&#x5219;&#x5728;&#x4F20;&#x64AD;&#x5F02;&#x5E38;&#x4E4B;&#x524D;&#x56DE;&#x6EDA;&#x8BE5;&#x4E8B;&#x52A1;&#x3002;</span></p><div class="admonition note"><p class="first admonition-title"><span class="yiyi-st" id="yiyi-422">&#x6CE8;&#x610F;</span></p><p><span class="yiyi-st" id="yiyi-423"><a class="reference internal" href="#sqlalchemy.engine.Connection.transaction" title="sqlalchemy.engine.Connection.transaction"><code class="xref py py-meth docutils literal"><span class="pre">transaction()</span></code></a>&#x65B9;&#x6CD5;&#x88AB;Python <code class="docutils literal"><span class="pre">with:</span></code>&#x8BED;&#x53E5;&#x7684;&#x4F7F;&#x7528;&#x6240;&#x53D6;&#x4EE3;&#xFF1A;&#x8BED;&#x53E5;&#x53EF;&#x4E0E;<a class="reference internal" href="#sqlalchemy.engine.Connection.begin" title="sqlalchemy.engine.Connection.begin"><code class="xref py py-meth docutils literal"><span class="pre">Connection.begin()</span></code></a>&#x4E00;&#x8D77;&#x4F7F;&#x7528;&#xFF1A;</span></p><div class="highlight-python"><div class="highlight"><pre><span></span><span class="k">with</span> <span class="n">conn</span><span class="o">.</span><span class="n">begin</span><span class="p">():</span>
    <span class="n">conn</span><span class="o">.</span><span class="n">execute</span><span class="p">(</span><span class="s2">&quot;some statement&quot;</span><span class="p">,</span> <span class="p">{</span><span class="s1">&apos;x&apos;</span><span class="p">:</span><span class="mi">5</span><span class="p">,</span> <span class="s1">&apos;y&apos;</span><span class="p">:</span><span class="mi">10</span><span class="p">})</span></pre></div></div><p><span class="yiyi-st" id="yiyi-424">&#x4E0E;<a class="reference internal" href="#sqlalchemy.engine.Engine.begin" title="sqlalchemy.engine.Engine.begin"><code class="xref py py-meth docutils literal"><span class="pre">Engine.begin()</span></code></a>&#x4E00;&#x6837;&#xFF1A;</span></p><div class="last highlight-python"><div class="highlight"><pre><span></span><span class="k">with</span> <span class="n">engine</span><span class="o">.</span><span class="n">begin</span><span class="p">()</span> <span class="k">as</span> <span class="n">conn</span><span class="p">:</span>
    <span class="n">conn</span><span class="o">.</span><span class="n">execute</span><span class="p">(</span><span class="s2">&quot;some statement&quot;</span><span class="p">,</span> <span class="p">{</span><span class="s1">&apos;x&apos;</span><span class="p">:</span><span class="mi">5</span><span class="p">,</span> <span class="s1">&apos;y&apos;</span><span class="p">:</span><span class="mi">10</span><span class="p">})</span></pre></div></div></div><p><span class="yiyi-st" id="yiyi-425">&#x4E5F;&#x53EF;&#x4EE5;&#x770B;&#x770B;&#xFF1A;</span></p><blockquote><div><p><span class="yiyi-st" id="yiyi-426"><a class="reference internal" href="#sqlalchemy.engine.Engine.begin" title="sqlalchemy.engine.Engine.begin"><code class="xref py py-meth docutils literal"><span class="pre">Engine.begin()</span></code></a>  - &#x5F15;&#x64CE;&#x7EA7;&#x4E8B;&#x52A1;&#x4E0A;&#x4E0B;&#x6587;</span></p><p><span class="yiyi-st" id="yiyi-427"><a class="reference internal" href="#sqlalchemy.engine.Engine.transaction" title="sqlalchemy.engine.Engine.transaction"><code class="xref py py-meth docutils literal"><span class="pre">Engine.transaction()</span></code></a>  -  <a class="reference internal" href="#sqlalchemy.engine.Connection.transaction" title="sqlalchemy.engine.Connection.transaction"><code class="xref py py-meth docutils literal"><span class="pre">Connection.transaction()</span></code></a></span></p></div></blockquote></dd></dl></dd></dl><dl class="class"><dt id="sqlalchemy.engine.Connectable"><span class="yiyi-st" id="yiyi-428"><em class="property">class</em> <code class="descclassname">sqlalchemy.engine&#x3002;</code> <code class="descname">Connectable</code> <a class="headerlink" href="#sqlalchemy.engine.Connectable" title="Permalink to this definition">&#xB6;</a></span></dt><dd><p><span class="yiyi-st" id="yiyi-429">&#x652F;&#x6301;&#x6267;&#x884C;SQL&#x6784;&#x9020;&#x7684;&#x5BF9;&#x8C61;&#x7684;&#x63A5;&#x53E3;&#x3002;</span></p><p><span class="yiyi-st" id="yiyi-430"><a class="reference internal" href="#sqlalchemy.engine.Connectable" title="sqlalchemy.engine.Connectable"><code class="xref py py-class docutils literal"><span class="pre">Connectable</span></code></a>&#x7684;&#x4E24;&#x4E2A;&#x5B9E;&#x73B0;&#x662F;<a class="reference internal" href="#sqlalchemy.engine.Connection" title="sqlalchemy.engine.Connection"><code class="xref py py-class docutils literal"><span class="pre">Connection</span></code></a>&#x548C;<a class="reference internal" href="#sqlalchemy.engine.Engine" title="sqlalchemy.engine.Engine"><code class="xref py py-class docutils literal"><span class="pre">Engine</span></code></a>&#x3002;</span></p><p><span class="yiyi-st" id="yiyi-431">Connectable must also implement the &#x2018;dialect&#x2019; member which references a <a class="reference internal" href="internals.html#sqlalchemy.engine.interfaces.Dialect" title="sqlalchemy.engine.interfaces.Dialect"><code class="xref py py-class docutils literal"><span class="pre">Dialect</span></code></a> instance.</span></p><dl class="method"><dt id="sqlalchemy.engine.Connectable.connect"><span class="yiyi-st" id="yiyi-432"><code class="descname">&#x8FDE;&#x63A5; T0&gt; <span class="sig-paren">&#xFF08; T1&gt; <em> ** kwargs  T2&gt; <span class="sig-paren">&#xFF09; T3&gt; <a class="headerlink" href="#sqlalchemy.engine.Connectable.connect" title="Permalink to this definition">&#xB6; T4&gt;</a></span></em></span></code></span></dt><dd><p><span class="yiyi-st" id="yiyi-433">&#x8FD4;&#x56DE;&#x4E00;&#x4E2A;<a class="reference internal" href="#sqlalchemy.engine.Connection" title="sqlalchemy.engine.Connection"><code class="xref py py-class docutils literal"><span class="pre">Connection</span></code></a>&#x5BF9;&#x8C61;&#x3002;</span></p><p><span class="yiyi-st" id="yiyi-434">Depending on context, this may be <code class="docutils literal"><span class="pre">self</span></code> if this object is already an instance of <a class="reference internal" href="#sqlalchemy.engine.Connection" title="sqlalchemy.engine.Connection"><code class="xref py py-class docutils literal"><span class="pre">Connection</span></code></a>, or a newly procured <a class="reference internal" href="#sqlalchemy.engine.Connection" title="sqlalchemy.engine.Connection"><code class="xref py py-class docutils literal"><span class="pre">Connection</span></code></a> if this object is an instance of <a class="reference internal" href="#sqlalchemy.engine.Engine" title="sqlalchemy.engine.Engine"><code class="xref py py-class docutils literal"><span class="pre">Engine</span></code></a>.</span></p></dd></dl><dl class="method"><dt id="sqlalchemy.engine.Connectable.contextual_connect"><span class="yiyi-st" id="yiyi-435"><code class="descname"> contextual_connect  T0&gt; <span class="sig-paren">&#xFF08; T1&gt; <span class="sig-paren">&#xFF09; T2&gt; <a class="headerlink" href="#sqlalchemy.engine.Connectable.contextual_connect" title="Permalink to this definition">&#xB6; T3&gt;</a></span></span></code></span></dt><dd><p><span class="yiyi-st" id="yiyi-436">&#x8FD4;&#x56DE;&#x4E00;&#x4E2A;<a class="reference internal" href="#sqlalchemy.engine.Connection" title="sqlalchemy.engine.Connection"><code class="xref py py-class docutils literal"><span class="pre">Connection</span></code></a>&#x5BF9;&#x8C61;&#xFF0C;&#x8BE5;&#x5BF9;&#x8C61;&#x53EF;&#x80FD;&#x662F;&#x6B63;&#x5728;&#x8FDB;&#x884C;&#x7684;&#x4E0A;&#x4E0B;&#x6587;&#x7684;&#x4E00;&#x90E8;&#x5206;&#x3002;</span></p><p><span class="yiyi-st" id="yiyi-437">Depending on context, this may be <code class="docutils literal"><span class="pre">self</span></code> if this object is already an instance of <a class="reference internal" href="#sqlalchemy.engine.Connection" title="sqlalchemy.engine.Connection"><code class="xref py py-class docutils literal"><span class="pre">Connection</span></code></a>, or a newly procured <a class="reference internal" href="#sqlalchemy.engine.Connection" title="sqlalchemy.engine.Connection"><code class="xref py py-class docutils literal"><span class="pre">Connection</span></code></a> if this object is an instance of <a class="reference internal" href="#sqlalchemy.engine.Engine" title="sqlalchemy.engine.Engine"><code class="xref py py-class docutils literal"><span class="pre">Engine</span></code></a>.</span></p></dd></dl><dl class="method"><dt id="sqlalchemy.engine.Connectable.create"><span class="yiyi-st" id="yiyi-438"><code class="descname">&#x521B;&#x5EFA;</code> <span class="sig-paren">&#xFF08;</span> <em>&#x5B9E;&#x4F53;</em>&#xFF0C;<em>** kwargs</em> <span class="sig-paren">&#xFF09;</span> <a class="headerlink" href="#sqlalchemy.engine.Connectable.create" title="Permalink to this definition"> t5 &gt;</a></span></dt><dd><p><span class="yiyi-st" id="yiyi-439">&#x4E3A;&#x7ED9;&#x5B9A;&#x7684;&#x6A21;&#x5F0F;&#x5B9E;&#x4F53;&#x53D1;&#x51FA;CREATE&#x8BED;&#x53E5;&#x3002;</span></p><div class="deprecated"><p><span class="yiyi-st" id="yiyi-440"><span class="versionmodified">Deprecated since version 0.7: </span>Use the create() method on the given schema object directly, i.e. <a class="reference internal" href="metadata.html#sqlalchemy.schema.Table.create" title="sqlalchemy.schema.Table.create"><code class="xref py py-meth docutils literal"><span class="pre">Table.create()</span></code></a>, <a class="reference internal" href="constraints.html#sqlalchemy.schema.Index.create" title="sqlalchemy.schema.Index.create"><code class="xref py py-meth docutils literal"><span class="pre">Index.create()</span></code></a>, <a class="reference internal" href="metadata.html#sqlalchemy.schema.MetaData.create_all" title="sqlalchemy.schema.MetaData.create_all"><code class="xref py py-meth docutils literal"><span class="pre">MetaData.create_all()</span></code></a></span></p></div></dd></dl><dl class="method"><dt id="sqlalchemy.engine.Connectable.drop"><span class="yiyi-st" id="yiyi-441"><code class="descname">drop</code> <span class="sig-paren">&#xFF08;</span> <em>entity</em>&#xFF0C;<em>** kwargs</em> <span class="sig-paren">&#xFF09;</span> <a class="headerlink" href="#sqlalchemy.engine.Connectable.drop" title="Permalink to this definition"> t5 &gt;</a></span></dt><dd><p><span class="yiyi-st" id="yiyi-442">&#x53D1;&#x51FA;&#x7ED9;&#x5B9A;&#x6A21;&#x5F0F;&#x5B9E;&#x4F53;&#x7684;DROP&#x8BED;&#x53E5;&#x3002;</span></p><div class="deprecated"><p><span class="yiyi-st" id="yiyi-443"><span class="versionmodified">Deprecated since version 0.7: </span>Use the drop() method on the given schema object directly, i.e. <a class="reference internal" href="metadata.html#sqlalchemy.schema.Table.drop" title="sqlalchemy.schema.Table.drop"><code class="xref py py-meth docutils literal"><span class="pre">Table.drop()</span></code></a>, <a class="reference internal" href="constraints.html#sqlalchemy.schema.Index.drop" title="sqlalchemy.schema.Index.drop"><code class="xref py py-meth docutils literal"><span class="pre">Index.drop()</span></code></a>, <a class="reference internal" href="metadata.html#sqlalchemy.schema.MetaData.drop_all" title="sqlalchemy.schema.MetaData.drop_all"><code class="xref py py-meth docutils literal"><span class="pre">MetaData.drop_all()</span></code></a></span></p></div></dd></dl><dl class="method"><dt id="sqlalchemy.engine.Connectable.execute"><span class="yiyi-st" id="yiyi-444"><code class="descname">&#x6267;&#x884C; tt&gt; <span class="sig-paren">&#xFF08;</span> <em>object</em>&#xFF0C;<em>* multiparams</em>&#xFF0C;<em>** params</em> <span class="sig-paren">/ T5&gt; <a class="headerlink" href="#sqlalchemy.engine.Connectable.execute" title="Permalink to this definition">&#xB6; T6&gt;</a></span></code></span></dt><dd><p><span class="yiyi-st" id="yiyi-445">&#x6267;&#x884C;&#x7ED9;&#x5B9A;&#x7684;&#x7ED3;&#x6784;&#x5E76;&#x8FD4;&#x56DE;&#x4E00;&#x4E2A;<a class="reference internal" href="#sqlalchemy.engine.ResultProxy" title="sqlalchemy.engine.ResultProxy"><code class="xref py py-class docutils literal"><span class="pre">ResultProxy</span></code></a>&#x3002;</span></p></dd></dl><dl class="method"><dt id="sqlalchemy.engine.Connectable.scalar"><span class="yiyi-st" id="yiyi-446"><code class="descname">&#x6807;&#x91CF;</code> <span class="sig-paren">&#xFF08;</span> <em>object</em>&#xFF0C;<em>* multiparams</em>&#xFF0C;<em>** params</em> <span class="sig-paren">/ T5&gt; <a class="headerlink" href="#sqlalchemy.engine.Connectable.scalar" title="Permalink to this definition">&#xB6; T6&gt;</a></span></span></dt><dd><p><span class="yiyi-st" id="yiyi-447">&#x6267;&#x884C;&#x5E76;&#x8FD4;&#x56DE;&#x7B2C;&#x4E00;&#x884C;&#x7684;&#x7B2C;&#x4E00;&#x5217;&#x3002;</span></p><p><span class="yiyi-st" id="yiyi-448">&#x5E95;&#x5C42;&#x6E38;&#x6807;&#x5728;&#x6267;&#x884C;&#x540E;&#x5173;&#x95ED;&#x3002;</span></p></dd></dl></dd></dl><dl class="class"><dt id="sqlalchemy.engine.CreateEnginePlugin"><span class="yiyi-st" id="yiyi-449"> <em class="property">class </em><code class="descclassname">sqlalchemy.engine.</code><code class="descname">CreateEnginePlugin</code><span class="sig-paren">(</span><em>url</em>, <em>kwargs</em><span class="sig-paren">)</span><a class="headerlink" href="#sqlalchemy.engine.CreateEnginePlugin" title="Permalink to this definition">&#xB6;</a></span></dt><dd><p><span class="yiyi-st" id="yiyi-450">&#x4E00;&#x7EC4;&#x6302;&#x94A9;&#xFF0C;&#x65E8;&#x5728;&#x6839;&#x636E;URL&#x4E2D;&#x7684;&#x5165;&#x53E3;&#x70B9;&#x540D;&#x79F0;&#x6765;&#x6269;&#x5145;<a class="reference internal" href="#sqlalchemy.engine.Engine" title="sqlalchemy.engine.Engine"><code class="xref py py-class docutils literal"><span class="pre">Engine</span></code></a>&#x5BF9;&#x8C61;&#x7684;&#x6784;&#x9020;&#x3002;</span></p><p><span class="yiyi-st" id="yiyi-451"><a class="reference internal" href="#sqlalchemy.engine.CreateEnginePlugin" title="sqlalchemy.engine.CreateEnginePlugin"><code class="xref py py-class docutils literal"><span class="pre">CreateEnginePlugin</span></code></a>&#x7684;&#x7528;&#x9014;&#x662F;&#x5141;&#x8BB8;&#x7B2C;&#x4E09;&#x65B9;&#x7CFB;&#x7EDF;&#x5E94;&#x7528;&#x5F15;&#x64CE;&#xFF0C;&#x6C60;&#x548C;&#x65B9;&#x8A00;&#x7EA7;&#x4E8B;&#x4EF6;&#x4FA6;&#x542C;&#x5668;&#xFF0C;&#x800C;&#x4E0D;&#x9700;&#x8981;&#x4FEE;&#x6539;&#x76EE;&#x6807;&#x5E94;&#x7528;&#x7A0B;&#x5E8F;&#xFF1B;&#x76F8;&#x53CD;&#xFF0C;&#x63D2;&#x4EF6;&#x540D;&#x79F0;&#x53EF;&#x4EE5;&#x6DFB;&#x52A0;&#x5230;&#x6570;&#x636E;&#x5E93;URL&#x4E2D;&#x3002;</span><span class="yiyi-st" id="yiyi-452"><a class="reference internal" href="#sqlalchemy.engine.CreateEnginePlugin" title="sqlalchemy.engine.CreateEnginePlugin"><code class="xref py py-class docutils literal"><span class="pre">CreateEnginePlugin</span></code></a>&#x7684;&#x76EE;&#x6807;&#x5E94;&#x7528;&#x7A0B;&#x5E8F;&#x5305;&#x62EC;&#xFF1A;</span></p><ul class="simple"><li><span class="yiyi-st" id="yiyi-453">&#x8FDE;&#x63A5;&#x548C;SQL&#x6027;&#x80FD;&#x5DE5;&#x5177;&#xFF0C;&#x4F8B;&#x5982;&#x5B83;&#x4F7F;&#x7528;&#x4E8B;&#x4EF6;&#x6765;&#x8DDF;&#x8E2A;&#x7ED3;&#x8D26;&#x7684;&#x6B21;&#x6570;&#x548C;/&#x6216;&#x82B1;&#x5728;&#x8BED;&#x53E5;&#x4E0A;&#x7684;&#x65F6;&#x95F4;</span></li><li><span class="yiyi-st" id="yiyi-454">&#x8FDE;&#x63A5;&#x63D2;&#x4EF6;&#xFF0C;&#x5982;&#x4EE3;&#x7406;</span></li></ul><p><span class="yiyi-st" id="yiyi-455">&#x63D2;&#x4EF6;&#x4EE5;&#x4E0E;&#x65B9;&#x8A00;&#x7C7B;&#x4F3C;&#x7684;&#x65B9;&#x5F0F;&#x4F7F;&#x7528;&#x5165;&#x53E3;&#x70B9;&#x8FDB;&#x884C;&#x6CE8;&#x518C;&#xFF1A;</span></p><div class="highlight-python"><div class="highlight"><pre><span></span>entry_points={
    &apos;sqlalchemy.plugins&apos;: [
        &apos;myplugin = myapp.plugins:MyPlugin&apos;
    ]</pre></div></div><p><span class="yiyi-st" id="yiyi-456">&#x4F7F;&#x7528;&#x4E0A;&#x8FF0;&#x540D;&#x79F0;&#x7684;&#x63D2;&#x4EF6;&#x5C06;&#x4ECE;&#x6570;&#x636E;&#x5E93;URL&#x4E2D;&#x8C03;&#x7528;&#xFF0C;&#x5982;&#x4E0B;&#x6240;&#x793A;&#xFF1A;</span></p><div class="highlight-python"><div class="highlight"><pre><span></span><span class="kn">from</span> <span class="nn">sqlalchemy</span> <span class="kn">import</span> <span class="n">create_engine</span>

<span class="n">engine</span> <span class="o">=</span> <span class="n">create_engine</span><span class="p">(</span>
  <span class="s2">&quot;mysql+pymysql://scott:tiger@localhost/test?plugin=myplugin&quot;</span><span class="p">)</span></pre></div></div><p><span class="yiyi-st" id="yiyi-457"><code class="docutils literal"><span class="pre">plugin</span></code>&#x53C2;&#x6570;&#x652F;&#x6301;&#x591A;&#x4E2A;&#x5B9E;&#x4F8B;&#xFF0C;&#x4EE5;&#x4FBF;URL&#x53EF;&#x4EE5;&#x6307;&#x5B9A;&#x591A;&#x4E2A;&#x63D2;&#x4EF6;&#xFF1B;&#x5B83;&#x4EEC;&#x6309;URL&#x4E2D;&#x7684;&#x987A;&#x5E8F;&#x52A0;&#x8F7D;&#xFF1A;</span></p><div class="highlight-python"><div class="highlight"><pre><span></span><span class="n">engine</span> <span class="o">=</span> <span class="n">create_engine</span><span class="p">(</span>
  <span class="s2">&quot;mysql+pymysql://scott:tiger@localhost/&quot;</span>
  <span class="s2">&quot;test?plugin=plugin_one&amp;plugin=plugin_twp&amp;plugin=plugin_three&quot;</span><span class="p">)</span></pre></div></div><p><span class="yiyi-st" id="yiyi-458">&#x63D2;&#x4EF6;&#x53EF;&#x4EE5;&#x63A5;&#x6536;&#x6765;&#x81EA;URL&#x5B57;&#x7B26;&#x4E32;&#x7684;&#x9644;&#x52A0;&#x53C2;&#x6570;&#x4EE5;&#x53CA;&#x4F20;&#x9012;&#x7ED9;<a class="reference internal" href="engines.html#sqlalchemy.create_engine" title="sqlalchemy.create_engine"><code class="xref py py-func docutils literal"><span class="pre">create_engine()</span></code></a>&#x7684;&#x5173;&#x952E;&#x5B57;&#x53C2;&#x6570;&#x3002;</span><span class="yiyi-st" id="yiyi-459">&#x5C06;<a class="reference internal" href="engines.html#sqlalchemy.engine.url.URL" title="sqlalchemy.engine.url.URL"><code class="xref py py-class docutils literal"><span class="pre">URL</span></code></a>&#x5BF9;&#x8C61;&#x548C;&#x5173;&#x952E;&#x5B57;&#x5B57;&#x5178;&#x4F20;&#x9012;&#x7ED9;&#x6784;&#x9020;&#x51FD;&#x6570;&#xFF0C;&#x4EE5;&#x4FBF;&#x53EF;&#x4EE5;&#x4ECE;url&#x7684;<code class="xref py py-attr docutils literal"><span class="pre">URL.query</span></code>&#x96C6;&#x5408;&#x4EE5;&#x53CA;&#x5B57;&#x5178;&#x4E2D;&#x63D0;&#x53D6;&#x8FD9;&#x4E9B;&#x53C2;&#x6570;&#xFF1A;</span></p><div class="highlight-python"><div class="highlight"><pre><span></span><span class="k">class</span> <span class="nc">MyPlugin</span><span class="p">(</span><span class="n">CreateEnginePlugin</span><span class="p">):</span>
    <span class="k">def</span> <span class="nf">__init__</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">url</span><span class="p">,</span> <span class="n">kwargs</span><span class="p">):</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">my_argument_one</span> <span class="o">=</span> <span class="n">url</span><span class="o">.</span><span class="n">query</span><span class="o">.</span><span class="n">pop</span><span class="p">(</span><span class="s1">&apos;my_argument_one&apos;</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">my_argument_two</span> <span class="o">=</span> <span class="n">url</span><span class="o">.</span><span class="n">query</span><span class="o">.</span><span class="n">pop</span><span class="p">(</span><span class="s1">&apos;my_argument_two&apos;</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">my_argument_three</span> <span class="o">=</span> <span class="n">kwargs</span><span class="o">.</span><span class="n">pop</span><span class="p">(</span><span class="s1">&apos;my_argument_three&apos;</span><span class="p">,</span> <span class="bp">None</span><span class="p">)</span></pre></div></div><p><span class="yiyi-st" id="yiyi-460">&#x5982;&#x4E0A;&#x6240;&#x8FF0;&#x7684;&#x53C2;&#x6570;&#x5C06;&#x4ECE;&#x4EE5;&#x4E0B;&#x5185;&#x5BB9;&#x4E2D;&#x6D88;&#x8017;&#xFF1A;</span></p><div class="highlight-python"><div class="highlight"><pre><span></span><span class="kn">from</span> <span class="nn">sqlalchemy</span> <span class="kn">import</span> <span class="n">create_engine</span>

<span class="n">engine</span> <span class="o">=</span> <span class="n">create_engine</span><span class="p">(</span>
  <span class="s2">&quot;mysql+pymysql://scott:tiger@localhost/&quot;</span>
  <span class="s2">&quot;test?plugin=myplugin&amp;my_argument_one=foo&amp;my_argument_two=bar&quot;</span><span class="p">,</span>
  <span class="n">my_argument_three</span><span class="o">=</span><span class="s1">&apos;bat&apos;</span><span class="p">)</span></pre></div></div><p><span class="yiyi-st" id="yiyi-461">URL&#x548C;&#x5B57;&#x5178;&#x7528;&#x4E8E;&#x5F15;&#x64CE;&#x7684;&#x540E;&#x7EED;&#x8BBE;&#x7F6E;&#xFF0C;&#x56E0;&#x6B64;&#x63D2;&#x4EF6;&#x53EF;&#x4EE5;&#x5728;&#x539F;&#x5730;&#x4FEE;&#x6539;&#x5B83;&#x4EEC;&#x7684;&#x53C2;&#x6570;&#x3002;</span><span class="yiyi-st" id="yiyi-462">&#x53EA;&#x6709;&#x63D2;&#x4EF6;&#x624D;&#x80FD;&#x7406;&#x89E3;&#x7684;&#x53C2;&#x6570;&#x5E94;&#x8BE5;&#x88AB;&#x5F39;&#x51FA;&#x6216;&#x4EE5;&#x5176;&#x4ED6;&#x65B9;&#x5F0F;&#x79FB;&#x9664;&#xFF0C;&#x4EE5;&#x4FBF;&#x4E4B;&#x540E;&#x4E0D;&#x4F1A;&#x5C06;&#x5176;&#x89E3;&#x91CA;&#x4E3A;&#x9519;&#x8BEF;&#x53C2;&#x6570;&#x3002;</span></p><p><span class="yiyi-st" id="yiyi-463">&#x5F53;&#x5F15;&#x64CE;&#x521B;&#x5EFA;&#x8FC7;&#x7A0B;&#x5B8C;&#x6210;&#x5E76;&#x751F;&#x6210;<a class="reference internal" href="#sqlalchemy.engine.Engine" title="sqlalchemy.engine.Engine"><code class="xref py py-class docutils literal"><span class="pre">Engine</span></code></a>&#x5BF9;&#x8C61;&#x65F6;&#xFF0C;&#x5B83;&#x5C06;&#x518D;&#x6B21;&#x901A;&#x8FC7;<a class="reference internal" href="#sqlalchemy.engine.CreateEnginePlugin.engine_created" title="sqlalchemy.engine.CreateEnginePlugin.engine_created"><code class="xref py py-meth docutils literal"><span class="pre">CreateEnginePlugin.engine_created()</span></code></a>&#x94A9;&#x5B50;&#x4F20;&#x9012;&#x7ED9;&#x63D2;&#x4EF6;&#x3002;</span><span class="yiyi-st" id="yiyi-464">&#x5728;&#x8FD9;&#x4E2A;&#x94A9;&#x5B50;&#x4E2D;&#xFF0C;&#x53EF;&#x4EE5;&#x5BF9;&#x5F15;&#x64CE;&#x8FDB;&#x884C;&#x989D;&#x5916;&#x7684;&#x6539;&#x53D8;&#xFF0C;&#x901A;&#x5E38;&#x6D89;&#x53CA;&#x4E8B;&#x4EF6;&#x7684;&#x8BBE;&#x7F6E;&#xFF08;&#x4F8B;&#x5982;&#x5728;<a class="reference internal" href="events.html"><span>Core Events</span></a>&#x4E2D;&#x5B9A;&#x4E49;&#x7684;&#x90A3;&#x4E9B;&#x4E8B;&#x4EF6;&#xFF09;&#x3002;</span></p><div class="versionadded"><p><span class="yiyi-st" id="yiyi-465"><span class="versionmodified">&#x7248;&#x672C;1.1&#x4E2D;&#x7684;&#x65B0;&#x529F;&#x80FD;</span></span></p></div><dl class="method"><dt id="sqlalchemy.engine.CreateEnginePlugin.__init__"><span class="yiyi-st" id="yiyi-466"><code class="descname">__ init __</code> <span class="sig-paren">&#xFF08;</span> <em>url</em>&#xFF0C;<em>kwargs</em> <span class="sig-paren">&#xFF09;</span> <a class="headerlink" href="#sqlalchemy.engine.CreateEnginePlugin.__init__" title="Permalink to this definition"></a></span></dt><dd><p><span class="yiyi-st" id="yiyi-467">&#x6784;&#x5EFA;&#x4E00;&#x4E2A;&#x65B0;&#x7684;<a class="reference internal" href="#sqlalchemy.engine.CreateEnginePlugin" title="sqlalchemy.engine.CreateEnginePlugin"><code class="xref py py-class docutils literal"><span class="pre">CreateEnginePlugin</span></code></a>&#x3002;</span></p><p><span class="yiyi-st" id="yiyi-468">&#x6BCF;&#x6B21;&#x8C03;&#x7528;<a class="reference internal" href="engines.html#sqlalchemy.create_engine" title="sqlalchemy.create_engine"><code class="xref py py-func docutils literal"><span class="pre">create_engine()</span></code></a>&#x65F6;&#xFF0C;&#x90FD;&#x4F1A;&#x5355;&#x72EC;&#x5B9E;&#x4F8B;&#x5316;&#x63D2;&#x4EF6;&#x5BF9;&#x8C61;&#x3002;</span><span class="yiyi-st" id="yiyi-469">&#x4E00;&#x4E2A;<a class="reference internal" href="#sqlalchemy.engine.Engine" title="sqlalchemy.engine.Engine"><code class="xref py py-class docutils literal"><span class="pre">Engine</span></code></a>&#x5C06;&#x88AB;&#x4F20;&#x9012;&#x7ED9;&#x4E0E;&#x6B64;URL&#x5BF9;&#x5E94;&#x7684;<a class="reference internal" href="#sqlalchemy.engine.CreateEnginePlugin.engine_created" title="sqlalchemy.engine.CreateEnginePlugin.engine_created"><code class="xref py py-meth docutils literal"><span class="pre">CreateEnginePlugin.engine_created()</span></code></a>&#x65B9;&#x6CD5;&#x3002;</span></p><table class="docutils field-list" frame="void" rules="none"><tbody valign="top"><tr class="field-odd field"><th class="field-name"><span class="yiyi-st" id="yiyi-470">&#x53C2;&#x6570;&#xFF1A;</span></th><td class="field-body"><ul class="first last simple"><li><span class="yiyi-st" id="yiyi-471"><span class="target" id="sqlalchemy.engine.CreateEnginePlugin.params.url"></span><strong>url</strong><a class="paramlink headerlink reference internal" href="#sqlalchemy.engine.CreateEnginePlugin.params.url">&#xB6;</a> &#x2013; the <a class="reference internal" href="engines.html#sqlalchemy.engine.url.URL" title="sqlalchemy.engine.url.URL"><code class="xref py py-class docutils literal"><span class="pre">URL</span></code></a> object. </span><span class="yiyi-st" id="yiyi-472">&#x63D2;&#x4EF6;&#x5E94;&#x8BE5;&#x68C0;&#x67E5;&#x200B;&#x200B;&#x5B83;&#x5728;&#x8FD9;&#x91CC;&#x7684;&#x9700;&#x6C42;&#xFF0C;&#x5E76;&#x4ECE;<code class="xref py py-attr docutils literal"><span class="pre">URL.query</span></code>&#x96C6;&#x5408;&#x4E2D;&#x79FB;&#x9664;&#x5B83;&#x7684;&#x81EA;&#x5B9A;&#x4E49;&#x53C2;&#x6570;&#x3002;</span><span class="yiyi-st" id="yiyi-473">URL&#x4E5F;&#x53EF;&#x4EE5;&#x4EE5;&#x5176;&#x4ED6;&#x4EFB;&#x4F55;&#x65B9;&#x5F0F;&#x5C31;&#x5730;&#x4FEE;&#x6539;&#x3002;</span></li><li><span class="yiyi-st" id="yiyi-474"><span class="target" id="sqlalchemy.engine.CreateEnginePlugin.params.kwargs"></span> <strong>kwargs</strong> <a class="paramlink headerlink reference internal" href="#sqlalchemy.engine.CreateEnginePlugin.params.kwargs">&#xB6;</a>  - &#x5C06;&#x5173;&#x952E;&#x5B57;&#x53C2;&#x6570;&#x4F20;&#x9012;&#x7ED9;&#xFF1A;func`.create_engine`&#x3002;</span><span class="yiyi-st" id="yiyi-475">&#x8BE5;&#x63D2;&#x4EF6;&#x53EF;&#x4EE5;&#x5728;&#x539F;&#x5730;&#x8BFB;&#x53D6;&#x548C;&#x4FEE;&#x6539;&#x8BE5;&#x5B57;&#x5178;&#xFF0C;&#x4EE5;&#x5F71;&#x54CD;&#x7528;&#x4E8E;&#x521B;&#x5EFA;&#x5F15;&#x64CE;&#x7684;&#x6700;&#x7EC8;&#x53C2;&#x6570;&#x3002;</span><span class="yiyi-st" id="yiyi-476">&#x5B83;&#x5E94;&#x8BE5;&#x4ECE;&#x5B57;&#x5178;&#x4E2D;&#x5220;&#x9664;&#x5B83;&#x7684;&#x81EA;&#x5B9A;&#x4E49;&#x53C2;&#x6570;&#x3002;</span></li></ul></td></tr></tbody></table></dd></dl><dl class="method"><dt id="sqlalchemy.engine.CreateEnginePlugin.engine_created"><span class="yiyi-st" id="yiyi-477"><code class="descname"> engine_created  T0&gt; <span class="sig-paren">&#xFF08; T1&gt; <em>&#x53D1;&#x52A8;&#x673A; T2&gt; <span class="sig-paren">&#xFF09; T3&gt; <a class="headerlink" href="#sqlalchemy.engine.CreateEnginePlugin.engine_created" title="Permalink to this definition">&#xB6; T4&gt;</a></span></em></span></code></span></dt><dd><p><span class="yiyi-st" id="yiyi-478">&#x5B8C;&#x5168;&#x6784;&#x5EFA;&#x65F6;&#x63A5;&#x6536;<a class="reference internal" href="#sqlalchemy.engine.Engine" title="sqlalchemy.engine.Engine"><code class="xref py py-class docutils literal"><span class="pre">Engine</span></code></a>&#x5BF9;&#x8C61;&#x3002;</span></p><p><span class="yiyi-st" id="yiyi-479">&#x63D2;&#x4EF6;&#x53EF;&#x80FD;&#x4F1A;&#x5BF9;&#x5F15;&#x64CE;&#x8FDB;&#x884C;&#x5176;&#x4ED6;&#x66F4;&#x6539;&#xFF0C;&#x4F8B;&#x5982;&#x6CE8;&#x518C;&#x5F15;&#x64CE;&#x6216;&#x8FDE;&#x63A5;&#x6C60;&#x4E8B;&#x4EF6;&#x3002;</span></p></dd></dl></dd></dl><dl class="class"><dt id="sqlalchemy.engine.Engine"><span class="yiyi-st" id="yiyi-480"> <em class="property">class </em><code class="descclassname">sqlalchemy.engine.</code><code class="descname">Engine</code><span class="sig-paren">(</span><em>pool</em>, <em>dialect</em>, <em>url</em>, <em>logging_name=None</em>, <em>echo=None</em>, <em>proxy=None</em>, <em>execution_options=None</em><span class="sig-paren">)</span><a class="headerlink" href="#sqlalchemy.engine.Engine" title="Permalink to this definition">&#xB6;</a></span></dt><dd><p><span class="yiyi-st" id="yiyi-481">&#x57FA;&#x7840;&#xFF1A;<a class="reference internal" href="#sqlalchemy.engine.Connectable" title="sqlalchemy.engine.Connectable"><code class="xref py py-class docutils literal"><span class="pre">sqlalchemy.engine.Connectable</span></code></a>&#xFF0C;<a class="reference internal" href="internals.html#sqlalchemy.log.Identified" title="sqlalchemy.log.Identified"><code class="xref py py-class docutils literal"><span class="pre">sqlalchemy.log.Identified</span></code></a></span></p><p><span class="yiyi-st" id="yiyi-482">&#x5C06;<a class="reference internal" href="pooling.html#sqlalchemy.pool.Pool" title="sqlalchemy.pool.Pool"><code class="xref py py-class docutils literal"><span class="pre">Pool</span></code></a>&#x548C;<a class="reference internal" href="internals.html#sqlalchemy.engine.interfaces.Dialect" title="sqlalchemy.engine.interfaces.Dialect"><code class="xref py py-class docutils literal"><span class="pre">Dialect</span></code></a>&#x8FDE;&#x63A5;&#x5728;&#x4E00;&#x8D77;&#xFF0C;&#x4EE5;&#x63D0;&#x4F9B;&#x6570;&#x636E;&#x5E93;&#x8FDE;&#x63A5;&#x548C;&#x884C;&#x4E3A;&#x7684;&#x6765;&#x6E90;&#x3002;</span></p><p><span class="yiyi-st" id="yiyi-483">&#x4E00;&#x4E2A;<a class="reference internal" href="#sqlalchemy.engine.Engine" title="sqlalchemy.engine.Engine"><code class="xref py py-class docutils literal"><span class="pre">Engine</span></code></a>&#x5BF9;&#x8C61;&#x4F7F;&#x7528;<a class="reference internal" href="engines.html#sqlalchemy.create_engine" title="sqlalchemy.create_engine"><code class="xref py py-func docutils literal"><span class="pre">create_engine()</span></code></a>&#x51FD;&#x6570;&#x516C;&#x5F00;&#x5B9E;&#x4F8B;&#x5316;&#x3002;</span></p><p><span class="yiyi-st" id="yiyi-484">&#x4E5F;&#x53EF;&#x4EE5;&#x770B;&#x770B;&#xFF1A;</span></p><p><span class="yiyi-st" id="yiyi-485"><a class="reference internal" href="engines.html"><em>Engine Configuration</em></a></span></p><p><span class="yiyi-st" id="yiyi-486"><a class="reference internal" href="#"><span>Working with Engines and Connections</span></a></span></p><dl class="method"><dt id="sqlalchemy.engine.Engine.begin"><span class="yiyi-st" id="yiyi-487"><code class="descname">&#x5F00;&#x59CB; T0&gt; <span class="sig-paren">&#xFF08; T1&gt; <em> close_with_result =&#x5047; T2&gt; <span class="sig-paren">&#xFF09; T3&gt; <a class="headerlink" href="#sqlalchemy.engine.Engine.begin" title="Permalink to this definition">&#xB6; T4&gt;</a></span></em></span></code></span></dt><dd><p><span class="yiyi-st" id="yiyi-488">&#x8FD4;&#x56DE;&#x4E00;&#x4E2A;&#x4E0A;&#x4E0B;&#x6587;&#x7BA1;&#x7406;&#x5668;&#xFF0C;&#x5B83;&#x63D0;&#x4F9B;&#x4E00;&#x4E2A;<a class="reference internal" href="#sqlalchemy.engine.Connection" title="sqlalchemy.engine.Connection"><code class="xref py py-class docutils literal"><span class="pre">Connection</span></code></a>&#x548C;&#x4E00;&#x4E2A;<a class="reference internal" href="#sqlalchemy.engine.Transaction" title="sqlalchemy.engine.Transaction"><code class="xref py py-class docutils literal"><span class="pre">Transaction</span></code></a>&#x5EFA;&#x7ACB;&#x7684;&#x3002;</span></p><p><span class="yiyi-st" id="yiyi-489">&#x4F8B;&#x5982;&#x3002;&#xFF1A;</span></p><div class="highlight-python"><div class="highlight"><pre><span></span><span class="k">with</span> <span class="n">engine</span><span class="o">.</span><span class="n">begin</span><span class="p">()</span> <span class="k">as</span> <span class="n">conn</span><span class="p">:</span>
    <span class="n">conn</span><span class="o">.</span><span class="n">execute</span><span class="p">(</span><span class="s2">&quot;insert into table (x, y, z) values (1, 2, 3)&quot;</span><span class="p">)</span>
    <span class="n">conn</span><span class="o">.</span><span class="n">execute</span><span class="p">(</span><span class="s2">&quot;my_special_procedure(5)&quot;</span><span class="p">)</span></pre></div></div><p><span class="yiyi-st" id="yiyi-490">&#x5728;&#x6210;&#x529F;&#x64CD;&#x4F5C;&#x540E;&#xFF0C;<a class="reference internal" href="#sqlalchemy.engine.Transaction" title="sqlalchemy.engine.Transaction"><code class="xref py py-class docutils literal"><span class="pre">Transaction</span></code></a>&#x88AB;&#x63D0;&#x4EA4;&#x3002;</span><span class="yiyi-st" id="yiyi-491">&#x5982;&#x679C;&#x53D1;&#x751F;&#x9519;&#x8BEF;&#xFF0C;&#x5219;&#x56DE;&#x6EDA;<a class="reference internal" href="#sqlalchemy.engine.Transaction" title="sqlalchemy.engine.Transaction"><code class="xref py py-class docutils literal"><span class="pre">Transaction</span></code></a>&#x3002;</span></p><p><span class="yiyi-st" id="yiyi-492"><code class="docutils literal"><span class="pre">close_with_result</span></code>&#x6807;&#x5FD7;&#x901A;&#x5E38;&#x662F;<code class="docutils literal"><span class="pre">False</span></code>&#xFF0C;&#x5E76;&#x4E14;&#x8868;&#x793A;&#x5F53;&#x64CD;&#x4F5C;&#x5B8C;&#x6210;&#x65F6;<a class="reference internal" href="#sqlalchemy.engine.Connection" title="sqlalchemy.engine.Connection"><code class="xref py py-class docutils literal"><span class="pre">Connection</span></code></a>&#x5C06;&#x88AB;&#x5173;&#x95ED;&#x3002;</span><span class="yiyi-st" id="yiyi-493">When set to <code class="docutils literal"><span class="pre">True</span></code>, it indicates the <a class="reference internal" href="#sqlalchemy.engine.Connection" title="sqlalchemy.engine.Connection"><code class="xref py py-class docutils literal"><span class="pre">Connection</span></code></a> is in &#x201C;single use&#x201D; mode, where the <a class="reference internal" href="#sqlalchemy.engine.ResultProxy" title="sqlalchemy.engine.ResultProxy"><code class="xref py py-class docutils literal"><span class="pre">ResultProxy</span></code></a> returned by the first call to <a class="reference internal" href="#sqlalchemy.engine.Connection.execute" title="sqlalchemy.engine.Connection.execute"><code class="xref py py-meth docutils literal"><span class="pre">Connection.execute()</span></code></a> will close the <a class="reference internal" href="#sqlalchemy.engine.Connection" title="sqlalchemy.engine.Connection"><code class="xref py py-class docutils literal"><span class="pre">Connection</span></code></a> when that <a class="reference internal" href="#sqlalchemy.engine.ResultProxy" title="sqlalchemy.engine.ResultProxy"><code class="xref py py-class docutils literal"><span class="pre">ResultProxy</span></code></a> has exhausted all result rows.</span></p><div class="versionadded"><p><span class="yiyi-st" id="yiyi-494"><span class="versionmodified">New in version 0.7.6.</span></span></p></div><p><span class="yiyi-st" id="yiyi-495">&#x4E5F;&#x53EF;&#x4EE5;&#x770B;&#x770B;&#xFF1A;</span></p><p><span class="yiyi-st" id="yiyi-496"><a class="reference internal" href="#sqlalchemy.engine.Engine.connect" title="sqlalchemy.engine.Engine.connect"><code class="xref py py-meth docutils literal"><span class="pre">Engine.connect()</span></code></a>  - &#x4ECE;<a class="reference internal" href="#sqlalchemy.engine.Engine" title="sqlalchemy.engine.Engine"><code class="xref py py-class docutils literal"><span class="pre">Engine</span></code></a>&#x83B7;&#x53D6;<a class="reference internal" href="#sqlalchemy.engine.Connection" title="sqlalchemy.engine.Connection"><code class="xref py py-class docutils literal"><span class="pre">Connection</span></code></a>&#x3002;</span></p><p><span class="yiyi-st" id="yiyi-497"><a class="reference internal" href="#sqlalchemy.engine.Connection.begin" title="sqlalchemy.engine.Connection.begin"><code class="xref py py-meth docutils literal"><span class="pre">Connection.begin()</span></code></a>  - &#x4E3A;&#x7279;&#x5B9A;&#x7684;<a class="reference internal" href="#sqlalchemy.engine.Connection" title="sqlalchemy.engine.Connection"><code class="xref py py-class docutils literal"><span class="pre">Connection</span></code></a>&#x542F;&#x52A8;&#x4E00;&#x4E2A;<a class="reference internal" href="#sqlalchemy.engine.Transaction" title="sqlalchemy.engine.Transaction"><code class="xref py py-class docutils literal"><span class="pre">Transaction</span></code></a>&#x3002;</span></p></dd></dl><dl class="method"><dt id="sqlalchemy.engine.Engine.connect"><span class="yiyi-st" id="yiyi-498"><code class="descname">&#x8FDE;&#x63A5; T0&gt; <span class="sig-paren">&#xFF08; T1&gt; <em> ** kwargs  T2&gt; <span class="sig-paren">&#xFF09; T3&gt; <a class="headerlink" href="#sqlalchemy.engine.Engine.connect" title="Permalink to this definition">&#xB6; T4&gt;</a></span></em></span></code></span></dt><dd><p><span class="yiyi-st" id="yiyi-499">&#x8FD4;&#x56DE;&#x4E00;&#x4E2A;&#x65B0;&#x7684;<a class="reference internal" href="#sqlalchemy.engine.Connection" title="sqlalchemy.engine.Connection"><code class="xref py py-class docutils literal"><span class="pre">Connection</span></code></a>&#x5BF9;&#x8C61;&#x3002;</span></p><p><span class="yiyi-st" id="yiyi-500"><a class="reference internal" href="#sqlalchemy.engine.Connection" title="sqlalchemy.engine.Connection"><code class="xref py py-class docutils literal"><span class="pre">Connection</span></code></a>&#x5BF9;&#x8C61;&#x662F;&#x4E00;&#x4E2A;&#x5728;&#x5185;&#x90E8;&#x4F7F;&#x7528;DBAPI&#x8FDE;&#x63A5;&#x4EE5;&#x4E0E;&#x6570;&#x636E;&#x5E93;&#x901A;&#x4FE1;&#x7684;Facade&#x3002;</span><span class="yiyi-st" id="yiyi-501">&#x8BE5;&#x8FDE;&#x63A5;&#x662F;&#x4ECE;<a class="reference internal" href="#sqlalchemy.engine.Engine" title="sqlalchemy.engine.Engine"><code class="xref py py-class docutils literal"><span class="pre">Engine</span></code></a>&#x5F15;&#x7528;&#x7684;&#x8FDE;&#x63A5;&#x6301;&#x6709;<a class="reference internal" href="pooling.html#sqlalchemy.pool.Pool" title="sqlalchemy.pool.Pool"><code class="xref py py-class docutils literal"><span class="pre">Pool</span></code></a>&#x4E2D;&#x83B7;&#x53D6;&#x7684;&#x3002;</span><span class="yiyi-st" id="yiyi-502">&#x5F53;<a class="reference internal" href="#sqlalchemy.engine.Connection" title="sqlalchemy.engine.Connection"><code class="xref py py-class docutils literal"><span class="pre">Connection</span></code></a>&#x5BF9;&#x8C61;&#x7684;<a class="reference internal" href="#sqlalchemy.engine.Connection.close" title="sqlalchemy.engine.Connection.close"><code class="xref py py-meth docutils literal"><span class="pre">close()</span></code></a>&#x65B9;&#x6CD5;&#x88AB;&#x8C03;&#x7528;&#x65F6;&#xFF0C;&#x5E95;&#x5C42;&#x7684;DBAPI&#x8FDE;&#x63A5;&#x5C06;&#x88AB;&#x8FD4;&#x56DE;&#x5230;&#x8FDE;&#x63A5;&#x6C60;&#xFF0C;&#x5E76;&#x5728;&#x968F;&#x540E;&#x7684;&#x8C03;&#x7528;&#x4E2D;&#x518D;&#x6B21;&#x4F7F;&#x7528;&#x5B83;<a class="reference internal" href="#sqlalchemy.engine.Engine.connect" title="sqlalchemy.engine.Engine.connect"><code class="xref py py-meth docutils literal"><span class="pre">connect()</span></code></a></span></p></dd></dl><dl class="method"><dt id="sqlalchemy.engine.Engine.contextual_connect"><span class="yiyi-st" id="yiyi-503"><code class="descname">contextual_connect</code> <span class="sig-paren">&#xFF08;</span> <em>close_with_result = False</em>&#xFF0C;<em>** kwargs</em> <span class="sig-paren">&#xFF09;</span> <a class="headerlink" href="#sqlalchemy.engine.Engine.contextual_connect" title="Permalink to this definition">/ T5&gt;</a></span></dt><dd><p><span class="yiyi-st" id="yiyi-504">&#x8FD4;&#x56DE;&#x4E00;&#x4E2A;<a class="reference internal" href="#sqlalchemy.engine.Connection" title="sqlalchemy.engine.Connection"><code class="xref py py-class docutils literal"><span class="pre">Connection</span></code></a>&#x5BF9;&#x8C61;&#xFF0C;&#x8BE5;&#x5BF9;&#x8C61;&#x53EF;&#x80FD;&#x662F;&#x67D0;&#x4E2A;&#x6B63;&#x5728;&#x8FDB;&#x884C;&#x7684;&#x4E0A;&#x4E0B;&#x6587;&#x7684;&#x4E00;&#x90E8;&#x5206;&#x3002;</span></p><p><span class="yiyi-st" id="yiyi-505">&#x9ED8;&#x8BA4;&#x60C5;&#x51B5;&#x4E0B;&#xFF0C;&#x6B64;&#x65B9;&#x6CD5;&#x4E0E;<a class="reference internal" href="#sqlalchemy.engine.Engine.connect" title="sqlalchemy.engine.Engine.connect"><code class="xref py py-meth docutils literal"><span class="pre">Engine.connect()</span></code></a>&#x6267;&#x884C;&#x76F8;&#x540C;&#x7684;&#x64CD;&#x4F5C;&#x3002;</span><span class="yiyi-st" id="yiyi-506"><a class="reference internal" href="#sqlalchemy.engine.Engine" title="sqlalchemy.engine.Engine"><code class="xref py py-class docutils literal"><span class="pre">Engine</span></code></a>&#x7684;&#x5B50;&#x7C7B;&#x53EF;&#x4EE5;&#x91CD;&#x5199;&#x6B64;&#x65B9;&#x6CD5;&#x4EE5;&#x63D0;&#x4F9B;&#x4E0A;&#x4E0B;&#x6587;&#x884C;&#x4E3A;&#x3002;</span></p><table class="docutils field-list" frame="void" rules="none"><tbody valign="top"><tr class="field-odd field"><th class="field-name"><span class="yiyi-st" id="yiyi-507">&#x53C2;&#x6570;&#xFF1A;</span></th><td class="field-body"><span class="yiyi-st" id="yiyi-508"><span class="target" id="sqlalchemy.engine.Engine.contextual_connect.params.close_with_result"></span><strong>close_with_result</strong><a class="paramlink headerlink reference internal" href="#sqlalchemy.engine.Engine.contextual_connect.params.close_with_result">&#xB6;</a> &#x2013; When True, the first <a class="reference internal" href="#sqlalchemy.engine.ResultProxy" title="sqlalchemy.engine.ResultProxy"><code class="xref py py-class docutils literal"><span class="pre">ResultProxy</span></code></a> created by the <a class="reference internal" href="#sqlalchemy.engine.Connection" title="sqlalchemy.engine.Connection"><code class="xref py py-class docutils literal"><span class="pre">Connection</span></code></a> will call the <a class="reference internal" href="#sqlalchemy.engine.Connection.close" title="sqlalchemy.engine.Connection.close"><code class="xref py py-meth docutils literal"><span class="pre">Connection.close()</span></code></a> method of that connection as soon as any pending result rows are exhausted. </span><span class="yiyi-st" id="yiyi-509">&#x8FD9;&#x7528;&#x4E8E;&#x63D0;&#x4F9B;&#x7531;<a class="reference internal" href="#sqlalchemy.engine.Engine.execute" title="sqlalchemy.engine.Engine.execute"><code class="xref py py-meth docutils literal"><span class="pre">Engine.execute()</span></code></a>&#x65B9;&#x6CD5;&#x63D0;&#x4F9B;&#x7684;&#x201C;&#x65E0;&#x8FDE;&#x63A5;&#x6267;&#x884C;&#x201D;&#x884C;&#x4E3A;&#x3002;</span></td></tr></tbody></table></dd></dl><dl class="method"><dt id="sqlalchemy.engine.Engine.dispose"><span class="yiyi-st" id="yiyi-510"><code class="descname">&#x5904;&#x7F6E; T0&gt; <span class="sig-paren">&#xFF08; T1&gt; <span class="sig-paren">&#xFF09; T2&gt; <a class="headerlink" href="#sqlalchemy.engine.Engine.dispose" title="Permalink to this definition">&#xB6; T3&gt;</a></span></span></code></span></dt><dd><p><span class="yiyi-st" id="yiyi-511">&#x5904;&#x7F6E;&#x6B64;<a class="reference internal" href="#sqlalchemy.engine.Engine" title="sqlalchemy.engine.Engine"><code class="xref py py-class docutils literal"><span class="pre">Engine</span></code></a>&#x4F7F;&#x7528;&#x7684;&#x8FDE;&#x63A5;&#x6C60;&#x3002;</span></p><p><span class="yiyi-st" id="yiyi-512">&#x8FD9;&#x5177;&#x6709;&#x5B8C;&#x5168;&#x5173;&#x95ED;&#x5F53;&#x524D;&#x5728;&#x6570;&#x636E;&#x5E93;&#x8FDE;&#x63A5;&#x4E2D;&#x68C0;&#x5165;&#x7684;&#x6240;&#x6709;<strong>&#x7684;&#x6548;&#x679C;&#x3002;</strong></span><span class="yiyi-st" id="yiyi-513">&#x4ECD;&#x7136;&#x68C0;&#x51FA;&#x7684;&#x8FDE;&#x63A5;&#x5C06;<strong>&#x4E0D;</strong>&#x5173;&#x95ED;&#xFF0C;&#x4F46;&#x5B83;&#x4EEC;&#x5C06;&#x4E0D;&#x518D;&#x4E0E;&#x6B64;<a class="reference internal" href="#sqlalchemy.engine.Engine" title="sqlalchemy.engine.Engine"><code class="xref py py-class docutils literal"><span class="pre">Engine</span></code></a>&#x5173;&#x8054;&#xFF0C;&#x56E0;&#x6B64;&#xFF0C;&#x5F53;&#x5B83;&#x4EEC;&#x5355;&#x72EC;&#x5173;&#x95ED;&#x65F6;&#xFF0C;&#x6700;&#x7EC8;&#x4F1A;&#x5BFC;&#x81F4;<a class="reference internal" href="pooling.html#sqlalchemy.pool.Pool" title="sqlalchemy.pool.Pool"><code class="xref py py-class docutils literal"><span class="pre">Pool</span></code></a></span></p><p><span class="yiyi-st" id="yiyi-514">&#x5728;&#x5904;&#x7406;&#x65E7;&#x7684;&#x8FDE;&#x63A5;&#x6C60;&#x540E;&#x7ACB;&#x5373;&#x521B;&#x5EFA;&#x65B0;&#x7684;&#x8FDE;&#x63A5;&#x6C60;&#x3002;</span><span class="yiyi-st" id="yiyi-515">&#x4E0E;&#x6240;&#x6709;SQLAlchemy&#x8FDE;&#x63A5;&#x6C60;&#x4E00;&#x6837;&#xFF0C;&#x8FD9;&#x4E2A;&#x65B0;&#x6C60;&#x5728;&#x7B2C;&#x4E00;&#x6B21;&#x8BF7;&#x6C42;&#x4E4B;&#x524D;&#x4E0D;&#x4F1A;&#x4E0E;&#x6570;&#x636E;&#x5E93;&#x5EFA;&#x7ACB;&#x4EFB;&#x4F55;&#x5B9E;&#x9645;&#x8FDE;&#x63A5;&#xFF0C;&#x56E0;&#x6B64;&#x53EA;&#x8981;&#x4E0D;&#x518D;&#x4F7F;&#x7528;<a class="reference internal" href="#sqlalchemy.engine.Engine" title="sqlalchemy.engine.Engine"><code class="xref py py-class docutils literal"><span class="pre">Engine</span></code></a>&#xFF0C;&#x5C06;&#x4E0D;&#x4F1A;&#x521B;&#x5EFA;&#x65B0;&#x8FDE;&#x63A5;&#x3002;</span></p><div class="admonition seealso"><p class="first admonition-title"><span class="yiyi-st" id="yiyi-516">&#x4E5F;&#x53EF;&#x4EE5;&#x770B;&#x770B;</span></p><p class="last"><span class="yiyi-st" id="yiyi-517"><a class="reference internal" href="#engine-disposal"><span>Engine Disposal</span></a></span></p></div></dd></dl><dl class="attribute"><dt id="sqlalchemy.engine.Engine.driver"><span class="yiyi-st" id="yiyi-518"><code class="descname">&#x9A71;&#x52A8;&#x5668; T0&gt; <a class="headerlink" href="#sqlalchemy.engine.Engine.driver" title="Permalink to this definition">&#xB6; T1&gt;</a></code></span></dt><dd><p><span class="yiyi-st" id="yiyi-519">&#x6B64;<a class="reference internal" href="#sqlalchemy.engine.Engine" title="sqlalchemy.engine.Engine"><code class="xref py py-class docutils literal"><span class="pre">Engine</span></code></a>&#x4F7F;&#x7528;&#x7684;<a class="reference internal" href="internals.html#sqlalchemy.engine.interfaces.Dialect" title="sqlalchemy.engine.interfaces.Dialect"><code class="xref py py-class docutils literal"><span class="pre">Dialect</span></code></a>&#x7684;&#x9A71;&#x52A8;&#x7A0B;&#x5E8F;&#x540D;&#x79F0;&#x3002;</span></p></dd></dl><dl class="method"><dt id="sqlalchemy.engine.Engine.execute"><span class="yiyi-st" id="yiyi-520"> <code class="descname">execute</code><span class="sig-paren">(</span><em>statement</em>, <em>*multiparams</em>, <em>**params</em><span class="sig-paren">)</span><a class="headerlink" href="#sqlalchemy.engine.Engine.execute" title="Permalink to this definition">&#xB6;</a></span></dt><dd><p><span class="yiyi-st" id="yiyi-521">&#x6267;&#x884C;&#x7ED9;&#x5B9A;&#x7684;&#x7ED3;&#x6784;&#x5E76;&#x8FD4;&#x56DE;&#x4E00;&#x4E2A;<a class="reference internal" href="#sqlalchemy.engine.ResultProxy" title="sqlalchemy.engine.ResultProxy"><code class="xref py py-class docutils literal"><span class="pre">ResultProxy</span></code></a>&#x3002;</span></p><p><span class="yiyi-st" id="yiyi-522">&#x53C2;&#x6570;&#x4E0E;<a class="reference internal" href="#sqlalchemy.engine.Connection.execute" title="sqlalchemy.engine.Connection.execute"><code class="xref py py-meth docutils literal"><span class="pre">Connection.execute()</span></code></a>&#x4F7F;&#x7528;&#x7684;&#x53C2;&#x6570;&#x76F8;&#x540C;&#x3002;</span></p><p><span class="yiyi-st" id="yiyi-523">&#x8FD9;&#x91CC;&#xFF0C;&#x4F7F;&#x7528;<a class="reference internal" href="#sqlalchemy.engine.Engine.contextual_connect" title="sqlalchemy.engine.Engine.contextual_connect"><code class="xref py py-meth docutils literal"><span class="pre">contextual_connect()</span></code></a>&#x65B9;&#x6CD5;&#x83B7;&#x53D6;<a class="reference internal" href="#sqlalchemy.engine.Connection" title="sqlalchemy.engine.Connection"><code class="xref py py-class docutils literal"><span class="pre">Connection</span></code></a>&#xFF0C;&#x5E76;&#x4F7F;&#x7528;&#x8BE5;&#x8FDE;&#x63A5;&#x6267;&#x884C;&#x8BED;&#x53E5;&#x3002;</span><span class="yiyi-st" id="yiyi-524">&#x8FD4;&#x56DE;&#x7684;<a class="reference internal" href="#sqlalchemy.engine.ResultProxy" title="sqlalchemy.engine.ResultProxy"><code class="xref py py-class docutils literal"><span class="pre">ResultProxy</span></code></a>&#x88AB;&#x6807;&#x8BB0;&#xFF0C;&#x4EE5;&#x4FBF;&#x5F53;<a class="reference internal" href="#sqlalchemy.engine.ResultProxy" title="sqlalchemy.engine.ResultProxy"><code class="xref py py-class docutils literal"><span class="pre">ResultProxy</span></code></a>&#x8017;&#x5C3D;&#x4E14;&#x5176;&#x5E95;&#x5C42;&#x6E38;&#x6807;&#x5173;&#x95ED;&#x65F6;&#xFF0C;&#x6B64;&#x5904;&#x521B;&#x5EFA;&#x7684;<a class="reference internal" href="#sqlalchemy.engine.Connection" title="sqlalchemy.engine.Connection"><code class="xref py py-class docutils literal"><span class="pre">Connection</span></code></a>&#x4E5F;&#x5C06;&#x88AB;&#x5173;&#x95ED;&#xFF0C;&#x5141;&#x8BB8;&#x5C06;&#x5176;&#x5173;&#x8054;&#x7684;DBAPI&#x8FDE;&#x63A5;&#x8D44;&#x6E90;&#x8FD4;&#x56DE;&#x5230;&#x8FDE;&#x63A5;&#x6C60;&#x3002;</span></p></dd></dl><dl class="method"><dt id="sqlalchemy.engine.Engine.execution_options"><span class="yiyi-st" id="yiyi-525"><code class="descname"> execution_options  T0&gt; <span class="sig-paren">&#xFF08; T1&gt; <em> **&#x9009;&#x62E9; T2&gt; <span class="sig-paren">&#xFF09; T3&gt; <a class="headerlink" href="#sqlalchemy.engine.Engine.execution_options" title="Permalink to this definition">&#xB6; T4&gt;</a></span></em></span></code></span></dt><dd><p><span class="yiyi-st" id="yiyi-526">&#x8FD4;&#x56DE;&#x4E00;&#x4E2A;&#x65B0;&#x7684;<a class="reference internal" href="#sqlalchemy.engine.Engine" title="sqlalchemy.engine.Engine"><code class="xref py py-class docutils literal"><span class="pre">Engine</span></code></a>&#xFF0C;&#x5B83;&#x5C06;&#x63D0;&#x4F9B;<a class="reference internal" href="#sqlalchemy.engine.Connection" title="sqlalchemy.engine.Connection"><code class="xref py py-class docutils literal"><span class="pre">Connection</span></code></a>&#x5BF9;&#x8C61;&#x7ED9;&#x5B9A;&#x7684;&#x6267;&#x884C;&#x9009;&#x9879;&#x3002;</span></p><p><span class="yiyi-st" id="yiyi-527">&#x8FD4;&#x56DE;&#x7684;<a class="reference internal" href="#sqlalchemy.engine.Engine" title="sqlalchemy.engine.Engine"><code class="xref py py-class docutils literal"><span class="pre">Engine</span></code></a>&#x4FDD;&#x6301;&#x4E0E;&#x539F;&#x59CB;<a class="reference internal" href="#sqlalchemy.engine.Engine" title="sqlalchemy.engine.Engine"><code class="xref py py-class docutils literal"><span class="pre">Engine</span></code></a>&#x7684;&#x76F8;&#x5173;&#x6027;&#xFF0C;&#x56E0;&#x4E3A;&#x5B83;&#x5171;&#x4EAB;&#x76F8;&#x540C;&#x7684;&#x8FDE;&#x63A5;&#x6C60;&#x548C;&#x5176;&#x4ED6;&#x72B6;&#x6001;&#xFF1A;</span></p><ul class="simple"><li><span class="yiyi-st" id="yiyi-528">&#x65B0;&#x7684;<a class="reference internal" href="#sqlalchemy.engine.Engine" title="sqlalchemy.engine.Engine"><code class="xref py py-class docutils literal"><span class="pre">Engine</span></code></a>&#x4F7F;&#x7528;&#x7684;<a class="reference internal" href="pooling.html#sqlalchemy.pool.Pool" title="sqlalchemy.pool.Pool"><code class="xref py py-class docutils literal"><span class="pre">Pool</span></code></a>&#x662F;&#x76F8;&#x540C;&#x7684;&#x5B9E;&#x4F8B;&#x3002;</span><span class="yiyi-st" id="yiyi-529"><a class="reference internal" href="#sqlalchemy.engine.Engine.dispose" title="sqlalchemy.engine.Engine.dispose"><code class="xref py py-meth docutils literal"><span class="pre">Engine.dispose()</span></code></a>&#x65B9;&#x6CD5;&#x5C06;&#x66FF;&#x4EE3;&#x7236;&#x5F15;&#x64CE;&#x7684;&#x8FDE;&#x63A5;&#x6C60;&#x5B9E;&#x4F8B;&#x4EE5;&#x53CA;&#x6B64;&#x5F15;&#x64CE;&#x3002;</span></li><li><span class="yiyi-st" id="yiyi-530">&#x4E8B;&#x4EF6;&#x4FA6;&#x542C;&#x5668;&#x662F;&#x201C;&#x7EA7;&#x8054;&#x7684;&#x201D;&#xFF0C;&#x4E5F;&#x5C31;&#x662F;&#x8BF4;&#xFF0C;&#x65B0;&#x7684;<a class="reference internal" href="#sqlalchemy.engine.Engine" title="sqlalchemy.engine.Engine"><code class="xref py py-class docutils literal"><span class="pre">Engine</span></code></a>&#x7EE7;&#x627F;&#x7236;&#x7EA7;&#x7684;&#x4E8B;&#x4EF6;&#xFF0C;&#x65B0;&#x7684;&#x4E8B;&#x4EF6;&#x53EF;&#x4EE5;&#x4E0E;&#x65B0;&#x7684;<a class="reference internal" href="#sqlalchemy.engine.Engine" title="sqlalchemy.engine.Engine"><code class="xref py py-class docutils literal"><span class="pre">Engine</span></code></a>&#x5206;&#x522B;&#x5173;&#x8054;&#x3002;</span></li><li><span class="yiyi-st" id="yiyi-531">&#x65E5;&#x5FD7;&#x8BB0;&#x5F55;&#x914D;&#x7F6E;&#x548C;logging_name&#x4ECE;&#x7236;&#x8282;&#x70B9;<a class="reference internal" href="#sqlalchemy.engine.Engine" title="sqlalchemy.engine.Engine"><code class="xref py py-class docutils literal"><span class="pre">Engine</span></code></a>&#x590D;&#x5236;&#x3002;</span></li></ul><p><span class="yiyi-st" id="yiyi-532"><a class="reference internal" href="#sqlalchemy.engine.Engine.execution_options" title="sqlalchemy.engine.Engine.execution_options"><code class="xref py py-meth docutils literal"><span class="pre">Engine.execution_options()</span></code></a>&#x65B9;&#x6CD5;&#x7684;&#x76EE;&#x7684;&#x662F;&#x5B9E;&#x73B0;&#x201C;&#x5206;&#x7247;&#x201D;&#x65B9;&#x6848;&#xFF0C;&#x5176;&#x4E2D;&#x591A;&#x4E2A;<a class="reference internal" href="#sqlalchemy.engine.Engine" title="sqlalchemy.engine.Engine"><code class="xref py py-class docutils literal"><span class="pre">Engine</span></code></a>&#x5BF9;&#x8C61;&#x5F15;&#x7528;&#x540C;&#x4E00;&#x4E2A;&#x8FDE;&#x63A5;&#x6C60;&#xFF0C;&#x4F46;&#x901A;&#x8FC7;&#x9009;&#x9879;&#x7531;&#x81EA;&#x5B9A;&#x4E49;&#x4E8B;&#x4EF6;&#x6D88;&#x8017;&#xFF1A;</span></p><div class="highlight-python"><div class="highlight"><pre><span></span><span class="n">primary_engine</span> <span class="o">=</span> <span class="n">create_engine</span><span class="p">(</span><span class="s2">&quot;mysql://&quot;</span><span class="p">)</span>
<span class="n">shard1</span> <span class="o">=</span> <span class="n">primary_engine</span><span class="o">.</span><span class="n">execution_options</span><span class="p">(</span><span class="n">shard_id</span><span class="o">=</span><span class="s2">&quot;shard1&quot;</span><span class="p">)</span>
<span class="n">shard2</span> <span class="o">=</span> <span class="n">primary_engine</span><span class="o">.</span><span class="n">execution_options</span><span class="p">(</span><span class="n">shard_id</span><span class="o">=</span><span class="s2">&quot;shard2&quot;</span><span class="p">)</span></pre></div></div><p><span class="yiyi-st" id="yiyi-533">Above, the <code class="docutils literal"><span class="pre">shard1</span></code> engine serves as a factory for <a class="reference internal" href="#sqlalchemy.engine.Connection" title="sqlalchemy.engine.Connection"><code class="xref py py-class docutils literal"><span class="pre">Connection</span></code></a> objects that will contain the execution option <code class="docutils literal"><span class="pre">shard_id=shard1</span></code>, and <code class="docutils literal"><span class="pre">shard2</span></code> will produce <a class="reference internal" href="#sqlalchemy.engine.Connection" title="sqlalchemy.engine.Connection"><code class="xref py py-class docutils literal"><span class="pre">Connection</span></code></a> objects that contain the execution option <code class="docutils literal"><span class="pre">shard_id=shard2</span></code>.</span></p><p><span class="yiyi-st" id="yiyi-534">&#x7ED9;&#x5B9A;&#x8FDE;&#x63A5;&#x65F6;&#xFF0C;&#x4E8B;&#x4EF6;&#x5904;&#x7406;&#x7A0B;&#x5E8F;&#x53EF;&#x4EE5;&#x4F7F;&#x7528;&#x4E0A;&#x8FF0;&#x6267;&#x884C;&#x9009;&#x9879;&#x6765;&#x6267;&#x884C;&#x6A21;&#x5F0F;&#x5207;&#x6362;&#x6216;&#x5176;&#x4ED6;&#x64CD;&#x4F5C;&#x3002;</span><span class="yiyi-st" id="yiyi-535">&#x4E0B;&#x9762;&#x6211;&#x4EEC;&#x53D1;&#x51FA;&#x4E00;&#x4E2A;MySQL <code class="docutils literal"><span class="pre">use</span></code>&#x8BED;&#x53E5;&#x6765;&#x5207;&#x6362;&#x6570;&#x636E;&#x5E93;&#xFF0C;&#x540C;&#x65F6;&#x4F7F;&#x7528;<a class="reference internal" href="#sqlalchemy.engine.Connection.info" title="sqlalchemy.engine.Connection.info"><code class="xref py py-attr docutils literal"><span class="pre">Connection.info</span></code></a>&#x5B57;&#x5178;&#x8DDF;&#x8E2A;&#x6211;&#x4EEC;&#x5EFA;&#x7ACB;&#x7684;&#x6570;&#x636E;&#x5E93;&#xFF0C;&#x4ECE;&#x800C;&#x4E3A;&#x6211;&#x4EEC;&#x63D0;&#x4F9B;&#x4E86;&#x4E00;&#x4E2A;&#x6301;&#x4E45;&#x6027;&#x5B58;&#x50A8;&#x7A7A;&#x95F4;&#x9075;&#x5FAA;DBAPI&#x8FDE;&#x63A5;&#xFF1A;</span></p><div class="highlight-python"><div class="highlight"><pre><span></span><span class="kn">from</span> <span class="nn">sqlalchemy</span> <span class="kn">import</span> <span class="n">event</span>
<span class="kn">from</span> <span class="nn">sqlalchemy.engine</span> <span class="kn">import</span> <span class="n">Engine</span>

<span class="n">shards</span> <span class="o">=</span> <span class="p">{</span><span class="s2">&quot;default&quot;</span><span class="p">:</span> <span class="s2">&quot;base&quot;</span><span class="p">,</span> <span class="n">shard_1</span><span class="p">:</span> <span class="s2">&quot;db1&quot;</span><span class="p">,</span> <span class="s2">&quot;shard_2&quot;</span><span class="p">:</span> <span class="s2">&quot;db2&quot;</span><span class="p">}</span>

<span class="nd">@event.listens_for</span><span class="p">(</span><span class="n">Engine</span><span class="p">,</span> <span class="s2">&quot;before_cursor_execute&quot;</span><span class="p">)</span>
<span class="k">def</span> <span class="nf">_switch_shard</span><span class="p">(</span><span class="n">conn</span><span class="p">,</span> <span class="n">cursor</span><span class="p">,</span> <span class="n">stmt</span><span class="p">,</span>
        <span class="n">params</span><span class="p">,</span> <span class="n">context</span><span class="p">,</span> <span class="n">executemany</span><span class="p">):</span>
    <span class="n">shard_id</span> <span class="o">=</span> <span class="n">conn</span><span class="o">.</span><span class="n">_execution_options</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="s1">&apos;shard_id&apos;</span><span class="p">,</span> <span class="s2">&quot;default&quot;</span><span class="p">)</span>
    <span class="n">current_shard</span> <span class="o">=</span> <span class="n">conn</span><span class="o">.</span><span class="n">info</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="s2">&quot;current_shard&quot;</span><span class="p">,</span> <span class="bp">None</span><span class="p">)</span>

    <span class="k">if</span> <span class="n">current_shard</span> <span class="o">!=</span> <span class="n">shard_id</span><span class="p">:</span>
        <span class="n">cursor</span><span class="o">.</span><span class="n">execute</span><span class="p">(</span><span class="s2">&quot;use </span><span class="si">%s</span><span class="s2">&quot;</span> <span class="o">%</span> <span class="n">shards</span><span class="p">[</span><span class="n">shard_id</span><span class="p">])</span>
        <span class="n">conn</span><span class="o">.</span><span class="n">info</span><span class="p">[</span><span class="s2">&quot;current_shard&quot;</span><span class="p">]</span> <span class="o">=</span> <span class="n">shard_id</span></pre></div></div><div class="versionadded"><p><span class="yiyi-st" id="yiyi-536"><span class="versionmodified">0.8&#x7248;&#x672C;&#x4E2D;&#x7684;&#x65B0;&#x529F;&#x80FD;</span></span></p></div><div class="admonition seealso"><p class="first admonition-title"><span class="yiyi-st" id="yiyi-537">&#x4E5F;&#x53EF;&#x4EE5;&#x770B;&#x770B;</span></p><p><span class="yiyi-st" id="yiyi-538"><a class="reference internal" href="#sqlalchemy.engine.Connection.execution_options" title="sqlalchemy.engine.Connection.execution_options"><code class="xref py py-meth docutils literal"><span class="pre">Connection.execution_options()</span></code></a> - update execution options on a <a class="reference internal" href="#sqlalchemy.engine.Connection" title="sqlalchemy.engine.Connection"><code class="xref py py-class docutils literal"><span class="pre">Connection</span></code></a> object.</span></p><p class="last"><span class="yiyi-st" id="yiyi-539"><a class="reference internal" href="#sqlalchemy.engine.Engine.update_execution_options" title="sqlalchemy.engine.Engine.update_execution_options"><code class="xref py py-meth docutils literal"><span class="pre">Engine.update_execution_options()</span></code></a> - update the execution options for a given <a class="reference internal" href="#sqlalchemy.engine.Engine" title="sqlalchemy.engine.Engine"><code class="xref py py-class docutils literal"><span class="pre">Engine</span></code></a> in place.</span></p></div></dd></dl><dl class="method"><dt id="sqlalchemy.engine.Engine.has_table"><span class="yiyi-st" id="yiyi-540"><code class="descname">has_table</code> <span class="sig-paren">&#xFF08;</span> <em>table_name</em>&#xFF0C;<em>schema =&#x65E0;</em> <span class="sig-paren">&#xFF09;</span> <a class="headerlink" href="#sqlalchemy.engine.Engine.has_table" title="Permalink to this definition"> t5 &gt;</a></span></dt><dd><p><span class="yiyi-st" id="yiyi-541">&#x5982;&#x679C;&#x7ED9;&#x5B9A;&#x7684;&#x540E;&#x7AEF;&#x5177;&#x6709;&#x7ED9;&#x5B9A;&#x540D;&#x79F0;&#x7684;&#x8868;&#xFF0C;&#x5219;&#x8FD4;&#x56DE;True&#x3002;</span></p><div class="admonition seealso"><p class="first admonition-title"><span class="yiyi-st" id="yiyi-542">&#x4E5F;&#x53EF;&#x4EE5;&#x770B;&#x770B;</span></p><p><span class="yiyi-st" id="yiyi-543"><a class="reference internal" href="reflection.html#metadata-reflection-inspector"><span>Fine Grained Reflection with Inspector</span></a> - detailed schema inspection using the <a class="reference internal" href="reflection.html#sqlalchemy.engine.reflection.Inspector" title="sqlalchemy.engine.reflection.Inspector"><code class="xref py py-class docutils literal"><span class="pre">Inspector</span></code></a> interface.</span></p><p class="last"><span class="yiyi-st" id="yiyi-544"><a class="reference internal" href="sqlelement.html#sqlalchemy.sql.elements.quoted_name" title="sqlalchemy.sql.elements.quoted_name"><code class="xref py py-class docutils literal"><span class="pre">quoted_name</span></code></a>  - &#x7528;&#x4E8E;&#x5C06;&#x5F15;&#x7528;&#x4FE1;&#x606F;&#x4E0E;&#x67B6;&#x6784;&#x6807;&#x8BC6;&#x7B26;&#x4E00;&#x8D77;&#x4F20;&#x9012;&#x3002;</span></p></div></dd></dl><dl class="attribute"><dt id="sqlalchemy.engine.Engine.name"><span class="yiyi-st" id="yiyi-545"><code class="descname">&#x540D;&#x79F0; T0&gt; <a class="headerlink" href="#sqlalchemy.engine.Engine.name" title="Permalink to this definition">&#xB6; T1&gt;</a></code></span></dt><dd><p><span class="yiyi-st" id="yiyi-546"><a class="reference internal" href="#sqlalchemy.engine.Engine" title="sqlalchemy.engine.Engine"><code class="xref py py-class docutils literal"><span class="pre">Engine</span></code></a>&#x4F7F;&#x7528;&#x7684;<a class="reference internal" href="internals.html#sqlalchemy.engine.interfaces.Dialect" title="sqlalchemy.engine.interfaces.Dialect"><code class="xref py py-class docutils literal"><span class="pre">Dialect</span></code></a>&#x7684;&#x5B57;&#x7B26;&#x4E32;&#x540D;&#x79F0;&#x3002;</span></p></dd></dl><dl class="method"><dt id="sqlalchemy.engine.Engine.raw_connection"><span class="yiyi-st" id="yiyi-547"><code class="descname"> raw_connection  T0&gt; <span class="sig-paren">&#xFF08; T1&gt; <em> _connection =&#x65E0; T2&gt; <span class="sig-paren">&#xFF09; T3&gt; <a class="headerlink" href="#sqlalchemy.engine.Engine.raw_connection" title="Permalink to this definition">&#xB6; T4&gt;</a></span></em></span></code></span></dt><dd><p><span class="yiyi-st" id="yiyi-548">&#x4ECE;&#x8FDE;&#x63A5;&#x6C60;&#x4E2D;&#x8FD4;&#x56DE;&#x4E00;&#x4E2A;&#x201C;&#x539F;&#x59CB;&#x201D;DBAPI&#x8FDE;&#x63A5;&#x3002;</span></p><p><span class="yiyi-st" id="yiyi-549">&#x8FD4;&#x56DE;&#x7684;&#x5BF9;&#x8C61;&#x662F;&#x6B63;&#x5728;&#x4F7F;&#x7528;&#x7684;&#x5E95;&#x5C42;&#x9A71;&#x52A8;&#x7A0B;&#x5E8F;&#x4F7F;&#x7528;&#x7684;DBAPI&#x8FDE;&#x63A5;&#x5BF9;&#x8C61;&#x7684;&#x4EE3;&#x7406;&#x7248;&#x672C;&#x3002;</span><span class="yiyi-st" id="yiyi-550">&#x8BE5;&#x5BF9;&#x8C61;&#x4E0E;&#x771F;&#x5B9E;&#x7684;DBAPI&#x8FDE;&#x63A5;&#x5177;&#x6709;&#x5B8C;&#x5168;&#x76F8;&#x540C;&#x7684;&#x884C;&#x4E3A;&#xFF0C;&#x53EA;&#x662F;&#x5B83;&#x7684;<code class="docutils literal"><span class="pre">close()</span></code>&#x65B9;&#x6CD5;&#x5C06;&#x5BFC;&#x81F4;&#x8FDE;&#x63A5;&#x8FD4;&#x56DE;&#x5230;&#x6C60;&#x4E2D;&#xFF0C;&#x800C;&#x4E0D;&#x662F;&#x5B9E;&#x9645;&#x5173;&#x95ED;&#x3002;</span></p><p><span class="yiyi-st" id="yiyi-551">&#x5F53;&#x4E0D;&#x9700;&#x8981;&#x7531;<a class="reference internal" href="#sqlalchemy.engine.Connection" title="sqlalchemy.engine.Connection"><code class="xref py py-class docutils literal"><span class="pre">Connection</span></code></a>&#x63D0;&#x4F9B;&#x7684;API&#x65F6;&#xFF0C;&#x8BE5;&#x65B9;&#x6CD5;&#x4E3A;&#x7279;&#x6B8A;&#x60C5;&#x51B5;&#x63D0;&#x4F9B;&#x76F4;&#x63A5;&#x7684;DBAPI&#x8FDE;&#x63A5;&#x8BBF;&#x95EE;&#x3002;</span><span class="yiyi-st" id="yiyi-552">&#x5F53;<a class="reference internal" href="#sqlalchemy.engine.Connection" title="sqlalchemy.engine.Connection"><code class="xref py py-class docutils literal"><span class="pre">Connection</span></code></a>&#x5BF9;&#x8C61;&#x5DF2;&#x7ECF;&#x5B58;&#x5728;&#x65F6;&#xFF0C;DBAPI&#x8FDE;&#x63A5;&#x53EF;&#x4EE5;&#x4F7F;&#x7528;<a class="reference internal" href="#sqlalchemy.engine.Connection.connection" title="sqlalchemy.engine.Connection.connection"><code class="xref py py-attr docutils literal"><span class="pre">Connection.connection</span></code></a>&#x8BBF;&#x95EE;&#x5668;&#x3002;</span></p><div class="admonition seealso"><p class="first admonition-title"><span class="yiyi-st" id="yiyi-553">&#x4E5F;&#x53EF;&#x4EE5;&#x770B;&#x770B;</span></p><p class="last"><span class="yiyi-st" id="yiyi-554"><a class="reference internal" href="#dbapi-connections"><span>Working with Raw DBAPI Connections</span></a></span></p></div></dd></dl><dl class="method"><dt id="sqlalchemy.engine.Engine.run_callable"><span class="yiyi-st" id="yiyi-555"><code class="descname">run_callable</code> <span class="sig-paren">&#xFF08;</span> <em>callable _</em>&#xFF0C;<em>* args</em>&#xFF0C;<em>** kwargs</em> <span class="sig-paren">/ T5&gt; <a class="headerlink" href="#sqlalchemy.engine.Engine.run_callable" title="Permalink to this definition">&#xB6; T6&gt;</a></span></span></dt><dd><p><span class="yiyi-st" id="yiyi-556">&#x7ED9;&#x5B9A;&#x4E00;&#x4E2A;&#x53EF;&#x8C03;&#x7528;&#x7684;&#x5BF9;&#x8C61;&#x6216;&#x51FD;&#x6570;&#xFF0C;&#x6267;&#x884C;&#x5B83;&#xFF0C;&#x4F20;&#x9012;&#x4E00;&#x4E2A;<a class="reference internal" href="#sqlalchemy.engine.Connection" title="sqlalchemy.engine.Connection"><code class="xref py py-class docutils literal"><span class="pre">Connection</span></code></a>&#x4F5C;&#x4E3A;&#x7B2C;&#x4E00;&#x4E2A;&#x53C2;&#x6570;&#x3002;</span></p><p><span class="yiyi-st" id="yiyi-557">&#x7ED9;&#x5B9A;&#x7684;* args&#x548C;** kwargs&#x5728;<a class="reference internal" href="#sqlalchemy.engine.Connection" title="sqlalchemy.engine.Connection"><code class="xref py py-class docutils literal"><span class="pre">Connection</span></code></a>&#x53C2;&#x6570;&#x540E;&#x4F20;&#x9012;&#x3002;</span></p><p><span class="yiyi-st" id="yiyi-558">&#x8BE5;&#x51FD;&#x6570;&#x4E0E;<a class="reference internal" href="#sqlalchemy.engine.Connection.run_callable" title="sqlalchemy.engine.Connection.run_callable"><code class="xref py py-meth docutils literal"><span class="pre">Connection.run_callable()</span></code></a>&#x4E00;&#x8D77;&#x5141;&#x8BB8;&#x51FD;&#x6570;&#x4E0E;<a class="reference internal" href="#sqlalchemy.engine.Connection" title="sqlalchemy.engine.Connection"><code class="xref py py-class docutils literal"><span class="pre">Connection</span></code></a>&#x6216;<a class="reference internal" href="#sqlalchemy.engine.Engine" title="sqlalchemy.engine.Engine"><code class="xref py py-class docutils literal"><span class="pre">Engine</span></code></a>&#x5BF9;&#x8C61;&#x4E00;&#x8D77;&#x8FD0;&#x884C;&#xFF0C;&#x800C;&#x65E0;&#x9700;&#x77E5;&#x9053;&#x54EA;&#x4E2A;&#x4E00;&#x4E2A;&#x6B63;&#x5728;&#x5904;&#x7406;&#x3002;</span></p></dd></dl><dl class="attribute"><dt id="sqlalchemy.engine.Engine.schema_for_object"><span class="yiyi-st" id="yiyi-559"><code class="descname">schema_for_object</code> <em class="property">=&#xFF06;lt&#xFF1B; sqlalchemy.sql.schema._SchemaTranslateMap&#x5BF9;&#x8C61;&#xFF06;gt&#xFF1B;</em> <a class="headerlink" href="#sqlalchemy.engine.Engine.schema_for_object" title="Permalink to this definition">&#xB6;</a></span></dt><dd><p><span class="yiyi-st" id="yiyi-560">&#x8FD4;&#x56DE;&#x5BF9;&#x8C61;&#x7684;&#x201C;.schema&#x201D;&#x5C5E;&#x6027;&#x3002;</span></p><p><span class="yiyi-st" id="yiyi-561">&#x7528;&#x4E8E;<a class="reference internal" href="metadata.html#sqlalchemy.schema.Table" title="sqlalchemy.schema.Table"><code class="xref py py-class docutils literal"><span class="pre">Table</span></code></a>&#xFF0C;<a class="reference internal" href="defaults.html#sqlalchemy.schema.Sequence" title="sqlalchemy.schema.Sequence"><code class="xref py py-class docutils literal"><span class="pre">Sequence</span></code></a>&#x548C;&#x7C7B;&#x4F3C;&#x5BF9;&#x8C61;&#xFF0C;&#x5E76;&#x8003;&#x8651;<a class="reference internal" href="#sqlalchemy.engine.Connection.execution_options.params.schema_translate_map" title="sqlalchemy.engine.Connection.execution_options"><code class="xref py py-paramref docutils literal"><span class="pre">Connection.execution_options.schema_translate_map</span></code></a>&#x53C2;&#x6570;&#x3002;</span></p><blockquote><div><div class="versionadded"><p><span class="yiyi-st" id="yiyi-562"><span class="versionmodified">&#x7248;&#x672C;1.1&#x4E2D;&#x7684;&#x65B0;&#x529F;&#x80FD;</span></span></p></div><div class="admonition seealso"><p class="first admonition-title"><span class="yiyi-st" id="yiyi-563">&#x4E5F;&#x53EF;&#x4EE5;&#x770B;&#x770B;</span></p><p class="last"><span class="yiyi-st" id="yiyi-564"><a class="reference internal" href="#schema-translating"><span>Translation of Schema Names</span></a></span></p></div></div></blockquote></dd></dl><dl class="method"><dt id="sqlalchemy.engine.Engine.table_names"><span class="yiyi-st" id="yiyi-565"> <code class="descname">table_names</code><span class="sig-paren">(</span><em>schema=None</em>, <em>connection=None</em><span class="sig-paren">)</span><a class="headerlink" href="#sqlalchemy.engine.Engine.table_names" title="Permalink to this definition">&#xB6;</a></span></dt><dd><p><span class="yiyi-st" id="yiyi-566">&#x8FD4;&#x56DE;&#x6570;&#x636E;&#x5E93;&#x4E2D;&#x53EF;&#x7528;&#x7684;&#x6240;&#x6709;&#x8868;&#x540D;&#x79F0;&#x7684;&#x5217;&#x8868;&#x3002;</span></p><table class="docutils field-list" frame="void" rules="none"><tbody valign="top"><tr class="field-odd field"><th class="field-name"><span class="yiyi-st" id="yiyi-567">&#x53C2;&#x6570;&#xFF1A;</span></th><td class="field-body"><ul class="first last simple"><li><span class="yiyi-st" id="yiyi-568"><span class="target" id="sqlalchemy.engine.Engine.table_names.params.schema"></span><strong>schema</strong><a class="paramlink headerlink reference internal" href="#sqlalchemy.engine.Engine.table_names.params.schema">&#xB6;</a> &#x2013; Optional, retrieve names from a non-default schema.</span></li><li><span class="yiyi-st" id="yiyi-569"><span class="target" id="sqlalchemy.engine.Engine.table_names.params.connection"></span> <strong>&#x8FDE;&#x63A5;</strong> <a class="paramlink headerlink reference internal" href="#sqlalchemy.engine.Engine.table_names.params.connection">&#xB6;</a>  - &#x53EF;&#x9009;&#xFF0C;&#x4F7F;&#x7528;&#x6307;&#x5B9A;&#x7684;&#x8FDE;&#x63A5;&#x3002;</span><span class="yiyi-st" id="yiyi-570">&#x9ED8;&#x8BA4;&#x503C;&#x662F;<code class="docutils literal"><span class="pre">Engine</span></code>&#x7684;<code class="docutils literal"><span class="pre">contextual_connect</span></code>&#x3002;</span></li></ul></td></tr></tbody></table></dd></dl><dl class="method"><dt id="sqlalchemy.engine.Engine.transaction"><span class="yiyi-st" id="yiyi-571"><code class="descname">&#x4E8B;&#x52A1;</code> <span class="sig-paren">&#xFF08;</span> <em>callable _</em>&#xFF0C;<em>* args</em>&#xFF0C;<em>** kwargs</em> <span class="sig-paren">/ T5&gt; <a class="headerlink" href="#sqlalchemy.engine.Engine.transaction" title="Permalink to this definition">&#xB6; T6&gt;</a></span></span></dt><dd><p><span class="yiyi-st" id="yiyi-572">&#x5728;&#x4E8B;&#x52A1;&#x8FB9;&#x754C;&#x5185;&#x6267;&#x884C;&#x7ED9;&#x5B9A;&#x7684;&#x529F;&#x80FD;&#x3002;</span></p><p><span class="yiyi-st" id="yiyi-573">&#x8BE5;&#x51FD;&#x6570;&#x4F20;&#x9012;&#x4E00;&#x4E2A;&#x4ECE;<a class="reference internal" href="#sqlalchemy.engine.Engine.contextual_connect" title="sqlalchemy.engine.Engine.contextual_connect"><code class="xref py py-meth docutils literal"><span class="pre">Engine.contextual_connect()</span></code></a>&#x65B0;&#x83B7;&#x5F97;&#x7684;<a class="reference internal" href="#sqlalchemy.engine.Connection" title="sqlalchemy.engine.Connection"><code class="xref py py-class docutils literal"><span class="pre">Connection</span></code></a>&#x4F5C;&#x4E3A;&#x7B2C;&#x4E00;&#x4E2A;&#x53C2;&#x6570;&#xFF0C;&#x63A5;&#x4E0B;&#x6765;&#x662F;&#x7ED9;&#x5B9A;&#x7684;* args&#x548C;** kwargs&#x3002;</span></p><p><span class="yiyi-st" id="yiyi-574">&#x4F8B;&#x5982;&#x3002;&#xFF1A;</span></p><div class="highlight-python"><div class="highlight"><pre><span></span><span class="k">def</span> <span class="nf">do_something</span><span class="p">(</span><span class="n">conn</span><span class="p">,</span> <span class="n">x</span><span class="p">,</span> <span class="n">y</span><span class="p">):</span>
    <span class="n">conn</span><span class="o">.</span><span class="n">execute</span><span class="p">(</span><span class="s2">&quot;some statement&quot;</span><span class="p">,</span> <span class="p">{</span><span class="s1">&apos;x&apos;</span><span class="p">:</span><span class="n">x</span><span class="p">,</span> <span class="s1">&apos;y&apos;</span><span class="p">:</span><span class="n">y</span><span class="p">})</span>

<span class="n">engine</span><span class="o">.</span><span class="n">transaction</span><span class="p">(</span><span class="n">do_something</span><span class="p">,</span> <span class="mi">5</span><span class="p">,</span> <span class="mi">10</span><span class="p">)</span></pre></div></div><p><span class="yiyi-st" id="yiyi-575">&#x51FD;&#x6570;&#x5185;&#x90E8;&#x7684;&#x64CD;&#x4F5C;&#x90FD;&#x5728;&#x5355;&#x4E2A;<a class="reference internal" href="#sqlalchemy.engine.Transaction" title="sqlalchemy.engine.Transaction"><code class="xref py py-class docutils literal"><span class="pre">Transaction</span></code></a>&#x7684;&#x4E0A;&#x4E0B;&#x6587;&#x4E2D;&#x8C03;&#x7528;&#x3002;</span><span class="yiyi-st" id="yiyi-576">&#x6210;&#x529F;&#x540E;&#xFF0C;&#x4EA4;&#x6613;&#x5373;&#x544A;&#x627F;&#x8BFA;&#x3002;</span><span class="yiyi-st" id="yiyi-577">&#x5982;&#x679C;&#x5F15;&#x53D1;&#x5F02;&#x5E38;&#xFF0C;&#x5219;&#x5728;&#x4F20;&#x64AD;&#x5F02;&#x5E38;&#x4E4B;&#x524D;&#x56DE;&#x6EDA;&#x8BE5;&#x4E8B;&#x52A1;&#x3002;</span></p><div class="admonition note"><p class="first admonition-title"><span class="yiyi-st" id="yiyi-578">&#x6CE8;&#x610F;</span></p><p><span class="yiyi-st" id="yiyi-579"><a class="reference internal" href="#sqlalchemy.engine.Engine.transaction" title="sqlalchemy.engine.Engine.transaction"><code class="xref py py-meth docutils literal"><span class="pre">transaction()</span></code></a>&#x65B9;&#x6CD5;&#x88AB;Python <code class="docutils literal"><span class="pre">with:</span></code>&#x8BED;&#x53E5;&#xFF0C;&#x53EF;&#x7528;&#x4E8E;<a class="reference internal" href="#sqlalchemy.engine.Engine.begin" title="sqlalchemy.engine.Engine.begin"><code class="xref py py-meth docutils literal"><span class="pre">Engine.begin()</span></code></a>&#xFF1A;</span></p><div class="last highlight-python"><div class="highlight"><pre><span></span><span class="k">with</span> <span class="n">engine</span><span class="o">.</span><span class="n">begin</span><span class="p">()</span> <span class="k">as</span> <span class="n">conn</span><span class="p">:</span>
    <span class="n">conn</span><span class="o">.</span><span class="n">execute</span><span class="p">(</span><span class="s2">&quot;some statement&quot;</span><span class="p">,</span> <span class="p">{</span><span class="s1">&apos;x&apos;</span><span class="p">:</span><span class="mi">5</span><span class="p">,</span> <span class="s1">&apos;y&apos;</span><span class="p">:</span><span class="mi">10</span><span class="p">})</span></pre></div></div></div><p><span class="yiyi-st" id="yiyi-580">&#x4E5F;&#x53EF;&#x4EE5;&#x770B;&#x770B;&#xFF1A;</span></p><blockquote><div><p><span class="yiyi-st" id="yiyi-581"><a class="reference internal" href="#sqlalchemy.engine.Engine.begin" title="sqlalchemy.engine.Engine.begin"><code class="xref py py-meth docutils literal"><span class="pre">Engine.begin()</span></code></a>  - &#x5F15;&#x64CE;&#x7EA7;&#x4E8B;&#x52A1;&#x4E0A;&#x4E0B;&#x6587;</span></p><p><span class="yiyi-st" id="yiyi-582"><a class="reference internal" href="#sqlalchemy.engine.Connection.transaction" title="sqlalchemy.engine.Connection.transaction"><code class="xref py py-meth docutils literal"><span class="pre">Connection.transaction()</span></code></a>  -  <a class="reference internal" href="#sqlalchemy.engine.Engine.transaction" title="sqlalchemy.engine.Engine.transaction"><code class="xref py py-meth docutils literal"><span class="pre">Engine.transaction()</span></code></a></span></p></div></blockquote></dd></dl><dl class="method"><dt id="sqlalchemy.engine.Engine.update_execution_options"><span class="yiyi-st" id="yiyi-583"><code class="descname"> update_execution_options  T0&gt; <span class="sig-paren">&#xFF08; T1&gt; <em> **&#x9009;&#x62E9; T2&gt; <span class="sig-paren">&#xFF09; T3&gt; <a class="headerlink" href="#sqlalchemy.engine.Engine.update_execution_options" title="Permalink to this definition">&#xB6; T4&gt;</a></span></em></span></code></span></dt><dd><p><span class="yiyi-st" id="yiyi-584">&#x66F4;&#x65B0;&#x6B64;<a class="reference internal" href="#sqlalchemy.engine.Engine" title="sqlalchemy.engine.Engine"><code class="xref py py-class docutils literal"><span class="pre">Engine</span></code></a>&#x7684;&#x9ED8;&#x8BA4;execution_options&#x5B57;&#x5178;&#x3002;</span></p><p><span class="yiyi-st" id="yiyi-585">** opt&#x4E2D;&#x7684;&#x7ED9;&#x5B9A;&#x952E;/&#x503C;&#x5C06;&#x88AB;&#x6DFB;&#x52A0;&#x5230;&#x5C06;&#x7528;&#x4E8E;&#x6240;&#x6709;&#x8FDE;&#x63A5;&#x7684;&#x9ED8;&#x8BA4;&#x6267;&#x884C;&#x9009;&#x9879;&#x3002;</span><span class="yiyi-st" id="yiyi-586">&#x8BE5;&#x5B57;&#x5178;&#x7684;&#x521D;&#x59CB;&#x5185;&#x5BB9;&#x53EF;&#x4EE5;&#x901A;&#x8FC7;<code class="docutils literal"><span class="pre">execution_options</span></code>&#x53C2;&#x6570;&#x53D1;&#x9001;&#x5230;<a class="reference internal" href="engines.html#sqlalchemy.create_engine" title="sqlalchemy.create_engine"><code class="xref py py-func docutils literal"><span class="pre">create_engine()</span></code></a>&#x3002;</span></p><div class="admonition seealso"><p class="first admonition-title"><span class="yiyi-st" id="yiyi-587">&#x4E5F;&#x53EF;&#x4EE5;&#x770B;&#x770B;</span></p><p><span class="yiyi-st" id="yiyi-588"><a class="reference internal" href="#sqlalchemy.engine.Connection.execution_options" title="sqlalchemy.engine.Connection.execution_options"><code class="xref py py-meth docutils literal"><span class="pre">Connection.execution_options()</span></code></a></span></p><p class="last"><span class="yiyi-st" id="yiyi-589"><a class="reference internal" href="#sqlalchemy.engine.Engine.execution_options" title="sqlalchemy.engine.Engine.execution_options"><code class="xref py py-meth docutils literal"><span class="pre">Engine.execution_options()</span></code></a></span></p></div></dd></dl></dd></dl><dl class="class"><dt id="sqlalchemy.engine.ExceptionContext"><span class="yiyi-st" id="yiyi-590"><em class="property">class</em> <code class="descclassname">sqlalchemy.engine&#x3002;</code> <code class="descname">ExceptionContext</code> <a class="headerlink" href="#sqlalchemy.engine.ExceptionContext" title="Permalink to this definition">&#xB6;</a></span></dt><dd><p><span class="yiyi-st" id="yiyi-591">&#x5C01;&#x88C5;&#x6709;&#x5173;&#x6B63;&#x5728;&#x8FDB;&#x884C;&#x7684;&#x9519;&#x8BEF;&#x60C5;&#x51B5;&#x7684;&#x4FE1;&#x606F;&#x3002;</span></p><p><span class="yiyi-st" id="yiyi-592">&#x8BE5;&#x5BF9;&#x8C61;&#x4EC5;&#x7528;&#x4E8E;&#x4F20;&#x9012;&#x7ED9;<a class="reference internal" href="events.html#sqlalchemy.events.ConnectionEvents.handle_error" title="sqlalchemy.events.ConnectionEvents.handle_error"><code class="xref py py-meth docutils literal"><span class="pre">ConnectionEvents.handle_error()</span></code></a>&#x4E8B;&#x4EF6;&#xFF0C;&#x652F;&#x6301;&#x53EF;&#x4EE5;&#x6269;&#x5C55;&#x800C;&#x6CA1;&#x6709;&#x5411;&#x540E;&#x4E0D;&#x517C;&#x5BB9;&#x7684;&#x63A5;&#x53E3;&#x3002;</span></p><div class="versionadded"><p><span class="yiyi-st" id="yiyi-593"><span class="versionmodified">&#x7248;&#x672C;0.9.7&#x4E2D;&#x7684;&#x65B0;&#x529F;&#x80FD;</span></span></p></div><dl class="attribute"><dt id="sqlalchemy.engine.ExceptionContext.chained_exception"><span class="yiyi-st" id="yiyi-594"><code class="descname">chained_exception</code> <em class="property">=&#x65E0;</em> <a class="headerlink" href="#sqlalchemy.engine.ExceptionContext.chained_exception" title="Permalink to this definition">&#xB6;</a></span></dt><dd><p><span class="yiyi-st" id="yiyi-595">&#x524D;&#x9762;&#x7684;&#x5904;&#x7406;&#x7A0B;&#x5E8F;&#x5728;&#x5F02;&#x5E38;&#x94FE;&#x4E2D;&#x8FD4;&#x56DE;&#x7684;&#x5F02;&#x5E38;&#xFF08;&#x5982;&#x679C;&#x6709;&#xFF09;&#x3002;</span></p><p><span class="yiyi-st" id="yiyi-596">&#x5982;&#x679C;&#x5B58;&#x5728;&#xFF0C;&#x8FD9;&#x4E2A;&#x5F02;&#x5E38;&#x5C06;&#x662F;&#x6700;&#x7EC8;&#x7531;SQLAlchemy&#x5F15;&#x53D1;&#x7684;&#x5F02;&#x5E38;&#xFF0C;&#x9664;&#x975E;&#x540E;&#x7EED;&#x7684;&#x5904;&#x7406;&#x7A0B;&#x5E8F;&#x66FF;&#x6362;&#x5B83;&#x3002;</span></p><p><span class="yiyi-st" id="yiyi-597">&#x53EF;&#x80FD;&#x662F;&#x65E0;&#x3002;</span></p></dd></dl><dl class="attribute"><dt id="sqlalchemy.engine.ExceptionContext.connection"><span class="yiyi-st" id="yiyi-598"><code class="descname">&#x8FDE;&#x63A5;</code> <em class="property">=&#x65E0;</em> <a class="headerlink" href="#sqlalchemy.engine.ExceptionContext.connection" title="Permalink to this definition">&#xB6;</a></span></dt><dd><p><span class="yiyi-st" id="yiyi-599">&#x5F02;&#x5E38;&#x671F;&#x95F4;&#x4F7F;&#x7528;&#x7684;<a class="reference internal" href="#sqlalchemy.engine.Connection" title="sqlalchemy.engine.Connection"><code class="xref py py-class docutils literal"><span class="pre">Connection</span></code></a>&#x3002;</span></p><p><span class="yiyi-st" id="yiyi-600">&#x9664;&#x7B2C;&#x4E00;&#x6B21;&#x8FDE;&#x63A5;&#x5931;&#x8D25;&#x7684;&#x60C5;&#x51B5;&#x5916;&#xFF0C;&#x8BE5;&#x6210;&#x5458;&#x5728;&#x573A;&#x3002;</span></p><div class="admonition seealso"><p class="first admonition-title"><span class="yiyi-st" id="yiyi-601">&#x4E5F;&#x53EF;&#x4EE5;&#x770B;&#x770B;</span></p><p class="last"><span class="yiyi-st" id="yiyi-602"><a class="reference internal" href="#sqlalchemy.engine.ExceptionContext.engine" title="sqlalchemy.engine.ExceptionContext.engine"><code class="xref py py-attr docutils literal"><span class="pre">ExceptionContext.engine</span></code></a></span></p></div></dd></dl><dl class="attribute"><dt id="sqlalchemy.engine.ExceptionContext.cursor"><span class="yiyi-st" id="yiyi-603"><code class="descname">&#x6E38;&#x6807;</code> <em class="property">=&#x65E0;</em> <a class="headerlink" href="#sqlalchemy.engine.ExceptionContext.cursor" title="Permalink to this definition">&#xB6;</a></span></dt><dd><p><span class="yiyi-st" id="yiyi-604">DBAPI&#x6E38;&#x6807;&#x5BF9;&#x8C61;&#x3002;</span></p><p><span class="yiyi-st" id="yiyi-605">&#x53EF;&#x80FD;&#x662F;&#x65E0;&#x3002;</span></p></dd></dl><dl class="attribute"><dt id="sqlalchemy.engine.ExceptionContext.engine"><span class="yiyi-st" id="yiyi-606"><code class="descname">&#x5F15;&#x64CE;</code> <em class="property">=&#x65E0;</em> <a class="headerlink" href="#sqlalchemy.engine.ExceptionContext.engine" title="Permalink to this definition">&#xB6;</a></span></dt><dd><p><span class="yiyi-st" id="yiyi-607">&#x5F02;&#x5E38;&#x671F;&#x95F4;&#x4F7F;&#x7528;&#x7684;<a class="reference internal" href="#sqlalchemy.engine.Engine" title="sqlalchemy.engine.Engine"><code class="xref py py-class docutils literal"><span class="pre">Engine</span></code></a>&#x3002;</span></p><p><span class="yiyi-st" id="yiyi-608">&#x5373;&#x4F7F;&#x5728;&#x9996;&#x6B21;&#x8FDE;&#x63A5;&#x5931;&#x8D25;&#x7684;&#x60C5;&#x51B5;&#x4E0B;&#xFF0C;&#x8BE5;&#x6210;&#x5458;&#x4E5F;&#x5E94;&#x59CB;&#x7EC8;&#x5B58;&#x5728;&#x3002;</span></p><div class="versionadded"><p><span class="yiyi-st" id="yiyi-609"><span class="versionmodified">&#x7248;&#x672C;1.0.0&#x4E2D;&#x7684;&#x65B0;&#x529F;&#x80FD;</span></span></p></div></dd></dl><dl class="attribute"><dt id="sqlalchemy.engine.ExceptionContext.execution_context"><span class="yiyi-st" id="yiyi-610"><code class="descname">execution_context</code> <em class="property">=&#x65E0;</em> <a class="headerlink" href="#sqlalchemy.engine.ExceptionContext.execution_context" title="Permalink to this definition">&#xB6;</a></span></dt><dd><p><span class="yiyi-st" id="yiyi-611">&#x4E0E;&#x6B63;&#x5728;&#x6267;&#x884C;&#x7684;&#x6267;&#x884C;&#x64CD;&#x4F5C;&#x76F8;&#x5BF9;&#x5E94;&#x7684;<a class="reference internal" href="internals.html#sqlalchemy.engine.interfaces.ExecutionContext" title="sqlalchemy.engine.interfaces.ExecutionContext"><code class="xref py py-class docutils literal"><span class="pre">ExecutionContext</span></code></a>&#x3002;</span></p><p><span class="yiyi-st" id="yiyi-612">&#x8FD9;&#x662F;&#x7528;&#x4E8E;&#x8BED;&#x53E5;&#x6267;&#x884C;&#x64CD;&#x4F5C;&#xFF0C;&#x4F46;&#x4E0D;&#x9002;&#x7528;&#x4E8E;&#x4E8B;&#x52A1;&#x5F00;&#x59CB;/&#x7ED3;&#x675F;&#x7B49;&#x64CD;&#x4F5C;&#x3002;</span><span class="yiyi-st" id="yiyi-613">&#x5728;&#x6784;&#x9020;<a class="reference internal" href="internals.html#sqlalchemy.engine.interfaces.ExecutionContext" title="sqlalchemy.engine.interfaces.ExecutionContext"><code class="xref py py-class docutils literal"><span class="pre">ExecutionContext</span></code></a>&#x4E4B;&#x524D;&#x5F15;&#x53D1;&#x5F02;&#x5E38;&#x65F6;&#xFF0C;&#x5B83;&#x4E5F;&#x4E0D;&#x5B58;&#x5728;&#x3002;</span></p><p><span class="yiyi-st" id="yiyi-614">Note that the <a class="reference internal" href="#sqlalchemy.engine.ExceptionContext.statement" title="sqlalchemy.engine.ExceptionContext.statement"><code class="xref py py-attr docutils literal"><span class="pre">ExceptionContext.statement</span></code></a> and <a class="reference internal" href="#sqlalchemy.engine.ExceptionContext.parameters" title="sqlalchemy.engine.ExceptionContext.parameters"><code class="xref py py-attr docutils literal"><span class="pre">ExceptionContext.parameters</span></code></a> members may represent a different value than that of the <a class="reference internal" href="internals.html#sqlalchemy.engine.interfaces.ExecutionContext" title="sqlalchemy.engine.interfaces.ExecutionContext"><code class="xref py py-class docutils literal"><span class="pre">ExecutionContext</span></code></a>, potentially in the case where a <a class="reference internal" href="events.html#sqlalchemy.events.ConnectionEvents.before_cursor_execute" title="sqlalchemy.events.ConnectionEvents.before_cursor_execute"><code class="xref py py-meth docutils literal"><span class="pre">ConnectionEvents.before_cursor_execute()</span></code></a> event or similar modified the statement/parameters to be sent.</span></p><p><span class="yiyi-st" id="yiyi-615">&#x53EF;&#x80FD;&#x662F;&#x65E0;&#x3002;</span></p></dd></dl><dl class="attribute"><dt id="sqlalchemy.engine.ExceptionContext.invalidate_pool_on_disconnect"><span class="yiyi-st" id="yiyi-616"><code class="descname">invalidate_pool_on_disconnect</code> <em class="property">= True</em> <a class="headerlink" href="#sqlalchemy.engine.ExceptionContext.invalidate_pool_on_disconnect" title="Permalink to this definition">&#xB6;</a></span></dt><dd><p><span class="yiyi-st" id="yiyi-617">&#x8868;&#x793A;&#x5F53;&#x201C;&#x65AD;&#x5F00;&#x201D;&#x6761;&#x4EF6;&#x751F;&#x6548;&#x65F6;&#xFF0C;&#x6C60;&#x4E2D;&#x7684;&#x6240;&#x6709;&#x8FDE;&#x63A5;&#x662F;&#x5426;&#x5E94;&#x8BE5;&#x5931;&#x6548;&#x3002;</span></p><p><span class="yiyi-st" id="yiyi-618">&#x5728;<a class="reference internal" href="events.html#sqlalchemy.events.ConnectionEvents.handle_error" title="sqlalchemy.events.ConnectionEvents.handle_error"><code class="xref py py-meth docutils literal"><span class="pre">ConnectionEvents.handle_error()</span></code></a>&#x4E8B;&#x4EF6;&#x7684;&#x8303;&#x56F4;&#x5185;&#x5C06;&#x6B64;&#x6807;&#x5FD7;&#x8BBE;&#x7F6E;&#x4E3A;False&#x5C06;&#x4F1A;&#x4EA7;&#x751F;&#x8FD9;&#x6837;&#x7684;&#x6548;&#x679C;&#xFF0C;&#x5373;&#x5728;&#x65AD;&#x5F00;&#x8FDE;&#x63A5;&#x671F;&#x95F4;&#x6C60;&#x4E2D;&#x7684;&#x5B8C;&#x6574;&#x8FDE;&#x63A5;&#x96C6;&#x5408;&#x4E0D;&#x4F1A;&#x5931;&#x6548;&#xFF1B;&#x53EA;&#x6709;&#x5F53;&#x524D;&#x8FDE;&#x63A5;&#x662F;&#x9519;&#x8BEF;&#x7684;&#x4E3B;&#x9898;&#xFF0C;&#x5B9E;&#x9645;&#x4E0A;&#x4F1A;&#x5931;&#x6548;&#x3002;</span></p><p><span class="yiyi-st" id="yiyi-619">&#x6B64;&#x6807;&#x5FD7;&#x7684;&#x7528;&#x9014;&#x662F;&#x7528;&#x4E8E;&#x81EA;&#x5B9A;&#x4E49;&#x65AD;&#x5F00;&#x8FDE;&#x63A5;&#x5904;&#x7406;&#x65B9;&#x6848;&#xFF0C;&#x5176;&#x4E2D;&#x6C60;&#x4E2D;&#x5176;&#x4ED6;&#x8FDE;&#x63A5;&#x7684;&#x5931;&#x6548;&#x5C06;&#x57FA;&#x4E8E;&#x5176;&#x4ED6;&#x6761;&#x4EF6;&#x6267;&#x884C;&#xFF0C;&#x6216;&#x8005;&#x751A;&#x81F3;&#x57FA;&#x4E8E;&#x6BCF;&#x4E2A;&#x8FDE;&#x63A5;&#x6267;&#x884C;&#x3002;</span></p><div class="versionadded"><p><span class="yiyi-st" id="yiyi-620"><span class="versionmodified">&#x7248;&#x672C;1.0.3&#x4E2D;&#x7684;&#x65B0;&#x529F;&#x80FD;</span></span></p></div></dd></dl><dl class="attribute"><dt id="sqlalchemy.engine.ExceptionContext.is_disconnect"><span class="yiyi-st" id="yiyi-621"><code class="descname">is_disconnect</code> <em class="property">=&#x65E0;</em> <a class="headerlink" href="#sqlalchemy.engine.ExceptionContext.is_disconnect" title="Permalink to this definition">&#xB6;</a></span></dt><dd><p><span class="yiyi-st" id="yiyi-622">&#x8868;&#x793A;&#x53D1;&#x751F;&#x7684;&#x5F02;&#x5E38;&#x662F;&#x5426;&#x8868;&#x793A;&#x201C;&#x65AD;&#x5F00;&#x201D;&#x72B6;&#x51B5;&#x3002;</span></p><p><span class="yiyi-st" id="yiyi-623">&#x8BE5;&#x6807;&#x5FD7;&#x5728;<a class="reference internal" href="events.html#sqlalchemy.events.ConnectionEvents.handle_error" title="sqlalchemy.events.ConnectionEvents.handle_error"><code class="xref py py-meth docutils literal"><span class="pre">ConnectionEvents.handle_error()</span></code></a>&#x5904;&#x7406;&#x7A0B;&#x5E8F;&#x7684;&#x8303;&#x56F4;&#x5185;&#x5C06;&#x59CB;&#x7EC8;&#x4E3A;True&#x6216;False&#x3002;</span></p><p><span class="yiyi-st" id="yiyi-624">SQLAlchemy&#x5C06;&#x4F1A;&#x6839;&#x636E;&#x8FD9;&#x4E2A;&#x6807;&#x5FD7;&#x6765;&#x786E;&#x5B9A;&#x8FDE;&#x63A5;&#x662F;&#x5426;&#x5E94;&#x8BE5;&#x968F;&#x540E;&#x5931;&#x6548;&#x3002;</span><span class="yiyi-st" id="yiyi-625">&#x4E5F;&#x5C31;&#x662F;&#x8BF4;&#xFF0C;&#x901A;&#x8FC7;&#x5206;&#x914D;&#x6B64;&#x6807;&#x5FD7;&#xFF0C;&#x53EF;&#x4EE5;&#x901A;&#x8FC7;&#x66F4;&#x6539;&#x6B64;&#x6807;&#x5FD7;&#x6765;&#x8C03;&#x7528;&#x6216;&#x963B;&#x6B62;&#x5BFC;&#x81F4;&#x8FDE;&#x63A5;&#x548C;&#x6C60;&#x65E0;&#x6548;&#x7684;&#x201C;&#x65AD;&#x5F00;&#x201D;&#x4E8B;&#x4EF6;&#x3002;</span></p></dd></dl><dl class="attribute"><dt id="sqlalchemy.engine.ExceptionContext.original_exception"><span class="yiyi-st" id="yiyi-626"><code class="descname">original_exception</code> <em class="property">=&#x65E0;</em> <a class="headerlink" href="#sqlalchemy.engine.ExceptionContext.original_exception" title="Permalink to this definition">&#xB6;</a></span></dt><dd><p><span class="yiyi-st" id="yiyi-627">&#x88AB;&#x6355;&#x83B7;&#x7684;&#x5F02;&#x5E38;&#x5BF9;&#x8C61;&#x3002;</span></p><p><span class="yiyi-st" id="yiyi-628">&#x6B64;&#x4F1A;&#x5458;&#x59CB;&#x7EC8;&#x5728;&#x573A;&#x3002;</span></p></dd></dl><dl class="attribute"><dt id="sqlalchemy.engine.ExceptionContext.parameters"><span class="yiyi-st" id="yiyi-629"><code class="descname">&#x53C2;&#x6570;</code> <em class="property">=&#x65E0;</em> <a class="headerlink" href="#sqlalchemy.engine.ExceptionContext.parameters" title="Permalink to this definition">&#xB6;</a></span></dt><dd><p><span class="yiyi-st" id="yiyi-630">&#x76F4;&#x63A5;&#x53D1;&#x9001;&#x5230;DBAPI&#x7684;&#x53C2;&#x6570;&#x96C6;&#x5408;&#x3002;</span></p><p><span class="yiyi-st" id="yiyi-631">&#x53EF;&#x80FD;&#x662F;&#x65E0;&#x3002;</span></p></dd></dl><dl class="attribute"><dt id="sqlalchemy.engine.ExceptionContext.sqlalchemy_exception"><span class="yiyi-st" id="yiyi-632"><code class="descname">sqlalchemy_exception</code> <em class="property">=&#x65E0;</em> <a class="headerlink" href="#sqlalchemy.engine.ExceptionContext.sqlalchemy_exception" title="Permalink to this definition">&#xB6;</a></span></dt><dd><p><span class="yiyi-st" id="yiyi-633">&#x5305;&#x542B;&#x539F;&#x59CB;&#x6587;&#x4EF6;&#x7684;<a class="reference internal" href="exceptions.html#sqlalchemy.exc.StatementError" title="sqlalchemy.exc.StatementError"><code class="xref py py-class docutils literal"><span class="pre">sqlalchemy.exc.StatementError</span></code></a>&#xFF0C;&#x5E76;&#x4E14;&#x5982;&#x679C;&#x5F02;&#x5E38;&#x5904;&#x7406;&#x6CA1;&#x6709;&#x88AB;&#x4E8B;&#x4EF6;&#x7ED5;&#x8FC7;&#xFF0C;&#x5C06;&#x4F1A;&#x5F15;&#x53D1;&#x8BE5;&#x6587;&#x4EF6;&#x3002;</span></p><p><span class="yiyi-st" id="yiyi-634">&#x53EF;&#x80FD;&#x4E3A;&#x65E0;&#xFF0C;&#x56E0;&#x4E3A;&#x5E76;&#x975E;&#x6240;&#x6709;&#x5F02;&#x5E38;&#x7C7B;&#x578B;&#x90FD;&#x7531;SQLAlchemy&#x5305;&#x88C5;&#x3002;</span><span class="yiyi-st" id="yiyi-635">&#x5BF9;&#x4E8E;&#x7EE7;&#x627F;dbapi&#x7684;Error&#x7C7B;&#x7684;DBAPI&#x7EA7;&#x5F02;&#x5E38;&#xFF0C;&#x6B64;&#x5B57;&#x6BB5;&#x5C06;&#x59CB;&#x7EC8;&#x5B58;&#x5728;&#x3002;</span></p></dd></dl><dl class="attribute"><dt id="sqlalchemy.engine.ExceptionContext.statement"><span class="yiyi-st" id="yiyi-636"><code class="descname">&#x8BED;&#x53E5;</code> <em class="property">=&#x65E0;</em> <a class="headerlink" href="#sqlalchemy.engine.ExceptionContext.statement" title="Permalink to this definition">&#xB6;</a></span></dt><dd><p><span class="yiyi-st" id="yiyi-637">&#x76F4;&#x63A5;&#x53D1;&#x9001;&#x5230;DBAPI&#x7684;&#x5B57;&#x7B26;&#x4E32;SQL&#x8BED;&#x53E5;&#x3002;</span></p><p><span class="yiyi-st" id="yiyi-638">&#x53EF;&#x80FD;&#x662F;&#x65E0;&#x3002;</span></p></dd></dl></dd></dl><dl class="class"><dt id="sqlalchemy.engine.NestedTransaction"><span class="yiyi-st" id="yiyi-639"><em class="property">class</em> <code class="descclassname">sqlalchemy.engine&#x3002;</code> <code class="descname">NestedTransaction</code> <span class="sig-paren">&#xFF08;</span> <em>connection</em>&#xFF0C;<em>T5&gt; <span class="sig-paren">&#xFF09; T6&gt; <a class="headerlink" href="#sqlalchemy.engine.NestedTransaction" title="Permalink to this definition">&#xB6; T7&gt;</a></span></em></span></dt><dd><p><span class="yiyi-st" id="yiyi-640">&#x57FA;&#x7840;&#xFF1A;<a class="reference internal" href="#sqlalchemy.engine.Transaction" title="sqlalchemy.engine.Transaction"><code class="xref py py-class docutils literal"><span class="pre">sqlalchemy.engine.Transaction</span></code></a></span></p><p><span class="yiyi-st" id="yiyi-641">&#x8868;&#x793A;&#x201C;&#x5D4C;&#x5957;&#x201D;&#x6216;SAVEPOINT&#x4E8B;&#x52A1;&#x3002;</span></p><p><span class="yiyi-st" id="yiyi-642">&#x53EF;&#x4EE5;&#x4F7F;&#x7528;<a class="reference internal" href="#sqlalchemy.engine.Connection.begin_nested" title="sqlalchemy.engine.Connection.begin_nested"><code class="xref py py-meth docutils literal"><span class="pre">Connection.begin_nested()</span></code></a>&#x65B9;&#x6CD5;&#x83B7;&#x53D6;&#x65B0;&#x7684;<a class="reference internal" href="#sqlalchemy.engine.NestedTransaction" title="sqlalchemy.engine.NestedTransaction"><code class="xref py py-class docutils literal"><span class="pre">NestedTransaction</span></code></a>&#x5BF9;&#x8C61;&#x3002;</span></p><p><span class="yiyi-st" id="yiyi-643">&#x8BE5;&#x754C;&#x9762;&#x4E0E;<a class="reference internal" href="#sqlalchemy.engine.Transaction" title="sqlalchemy.engine.Transaction"><code class="xref py py-class docutils literal"><span class="pre">Transaction</span></code></a>&#x7684;&#x754C;&#x9762;&#x76F8;&#x540C;&#x3002;</span></p></dd></dl><dl class="class"><dt id="sqlalchemy.engine.ResultProxy"><span class="yiyi-st" id="yiyi-644"> <em class="property">class </em><code class="descclassname">sqlalchemy.engine.</code><code class="descname">ResultProxy</code><span class="sig-paren">(</span><em>context</em><span class="sig-paren">)</span><a class="headerlink" href="#sqlalchemy.engine.ResultProxy" title="Permalink to this definition">&#xB6;</a></span></dt><dd><p><span class="yiyi-st" id="yiyi-645">&#x5305;&#x88C5;&#x4E00;&#x4E2A;DB-API&#x6E38;&#x6807;&#x5BF9;&#x8C61;&#xFF0C;&#x4EE5;&#x4FBF;&#x66F4;&#x5BB9;&#x6613;&#x5730;&#x8BBF;&#x95EE;&#x884C;&#x5217;&#x3002;</span></p><p><span class="yiyi-st" id="yiyi-646">&#x5355;&#x4E2A;&#x5217;&#x53EF;&#x4EE5;&#x901A;&#x8FC7;&#x5B83;&#x4EEC;&#x7684;&#x6574;&#x6570;&#x4F4D;&#x7F6E;&#xFF0C;&#x4E0D;&#x533A;&#x5206;&#x5927;&#x5C0F;&#x5199;&#x7684;&#x5217;&#x540D;&#x79F0;&#x6216;&#x901A;&#x8FC7;<code class="docutils literal"><span class="pre">schema.Column</span></code>&#x5BF9;&#x8C61;&#x6765;&#x8BBF;&#x95EE;&#x3002;</span><span class="yiyi-st" id="yiyi-647">&#x4F8B;&#x5982;&#x3002;&#xFF1A;</span></p><div class="highlight-python"><div class="highlight"><pre><span></span><span class="n">row</span> <span class="o">=</span> <span class="n">fetchone</span><span class="p">()</span>

<span class="n">col1</span> <span class="o">=</span> <span class="n">row</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span>    <span class="c1"># access via integer position</span>

<span class="n">col2</span> <span class="o">=</span> <span class="n">row</span><span class="p">[</span><span class="s1">&apos;col2&apos;</span><span class="p">]</span>   <span class="c1"># access via name</span>

<span class="n">col3</span> <span class="o">=</span> <span class="n">row</span><span class="p">[</span><span class="n">mytable</span><span class="o">.</span><span class="n">c</span><span class="o">.</span><span class="n">mycol</span><span class="p">]</span> <span class="c1"># access via Column object.</span></pre></div></div><p><span class="yiyi-st" id="yiyi-648"><code class="docutils literal"><span class="pre">ResultProxy</span></code> also handles post-processing of result column data using <code class="docutils literal"><span class="pre">TypeEngine</span></code> objects, which are referenced from the originating SQL statement that produced this result set.</span></p><dl class="method"><dt id="sqlalchemy.engine.ResultProxy._cursor_description"><span class="yiyi-st" id="yiyi-649"><code class="descname"> _cursor_description  T0&gt; <span class="sig-paren">&#xFF08; T1&gt; <span class="sig-paren">&#xFF09; T2&gt; <a class="headerlink" href="#sqlalchemy.engine.ResultProxy._cursor_description" title="Permalink to this definition">&#xB6; T3&gt;</a></span></span></code></span></dt><dd><p><span class="yiyi-st" id="yiyi-650">&#x53EF;&#x80FD;&#x88AB;&#x5B50;&#x7C7B;&#x8986;&#x76D6;&#x3002;</span></p></dd></dl><dl class="attribute"><dt id="sqlalchemy.engine.ResultProxy._process_row"><span class="yiyi-st" id="yiyi-651"><code class="descname"> _process_row  T0&gt; <a class="headerlink" href="#sqlalchemy.engine.ResultProxy._process_row" title="Permalink to this definition">&#xB6; T1&gt;</a></code></span></dt><dd><p><span class="yiyi-st" id="yiyi-652"><a class="reference internal" href="#sqlalchemy.engine.RowProxy" title="sqlalchemy.engine.RowProxy"><code class="xref py py-class docutils literal"><span class="pre">RowProxy</span></code></a>&#x7684;&#x522B;&#x540D;</span></p></dd></dl><dl class="method"><dt id="sqlalchemy.engine.ResultProxy._soft_close"><span class="yiyi-st" id="yiyi-653"><code class="descname"> _soft_close  T0&gt; <span class="sig-paren">&#xFF08; T1&gt; <em> _autoclose_connection =&#x771F; T2&gt; <span class="sig-paren">&#xFF09; T3&gt; <a class="headerlink" href="#sqlalchemy.engine.ResultProxy._soft_close" title="Permalink to this definition">&#xB6; T4&gt;</a></span></em></span></code></span></dt><dd><p><span class="yiyi-st" id="yiyi-654">&#x8F6F;&#x5173;&#x95ED;&#x8FD9;&#x4E2A;<a class="reference internal" href="#sqlalchemy.engine.ResultProxy" title="sqlalchemy.engine.ResultProxy"><code class="xref py py-class docutils literal"><span class="pre">ResultProxy</span></code></a>&#x3002;</span></p><p><span class="yiyi-st" id="yiyi-655">&#x8FD9;&#x5C06;&#x91CA;&#x653E;&#x6240;&#x6709;&#x7684;DBAPI&#x6E38;&#x6807;&#x8D44;&#x6E90;&#xFF0C;&#x4F46;&#x662F;&#x4ECE;&#x8BED;&#x4E49;&#x7684;&#x89D2;&#x5EA6;&#x6765;&#x770B;ResultProxy&#x662F;&#x201C;open&#x201D;&#x7684;&#xFF0C;&#x610F;&#x5473;&#x7740;fetchXXX()&#x65B9;&#x6CD5;&#x5C06;&#x7EE7;&#x7EED;&#x8FD4;&#x56DE;&#x7A7A;&#x7ED3;&#x679C;&#x3002;</span></p><p><span class="yiyi-st" id="yiyi-656">&#x6B64;&#x65B9;&#x6CD5;&#x5728;&#x4EE5;&#x4E0B;&#x60C5;&#x51B5;&#x4E0B;&#x81EA;&#x52A8;&#x8C03;&#x7528;&#xFF1A;</span></p><ul class="simple"><li><span class="yiyi-st" id="yiyi-657">&#x6240;&#x6709;&#x7ED3;&#x679C;&#x884C;&#x90FD;&#x4F7F;&#x7528;fetchXXX()&#x65B9;&#x6CD5;&#x8017;&#x5C3D;&#x3002;</span></li><li><span class="yiyi-st" id="yiyi-658">cursor.description&#x662F;None&#x3002;</span></li></ul><p><span class="yiyi-st" id="yiyi-659">&#x6B64;&#x65B9;&#x6CD5;<strong>&#x4E0D;&#x516C;&#x5F00;</strong>&#xFF0C;&#x4F46;&#x4E3A;&#x4E86;&#x9610;&#x660E;&#x6240;&#x4F7F;&#x7528;&#x7684;&#x201C;autoclose&#x201D;&#x8FC7;&#x7A0B;&#x800C;&#x8FDB;&#x884C;&#x4E86;&#x8BB0;&#x5F55;&#x3002;</span></p><div class="versionadded"><p><span class="yiyi-st" id="yiyi-660"><span class="versionmodified">&#x7248;&#x672C;1.0.0&#x4E2D;&#x7684;&#x65B0;&#x529F;&#x80FD;</span></span></p></div><div class="admonition seealso"><p class="first admonition-title"><span class="yiyi-st" id="yiyi-661">&#x4E5F;&#x53EF;&#x4EE5;&#x770B;&#x770B;</span></p><p class="last"><span class="yiyi-st" id="yiyi-662"><a class="reference internal" href="#sqlalchemy.engine.ResultProxy.close" title="sqlalchemy.engine.ResultProxy.close"><code class="xref py py-meth docutils literal"><span class="pre">ResultProxy.close()</span></code></a></span></p></div></dd></dl><dl class="method"><dt id="sqlalchemy.engine.ResultProxy.close"><span class="yiyi-st" id="yiyi-663"><code class="descname">&#x9760;&#x8FD1; T0&gt; <span class="sig-paren">&#xFF08; T1&gt; <span class="sig-paren">&#xFF09; T2&gt; <a class="headerlink" href="#sqlalchemy.engine.ResultProxy.close" title="Permalink to this definition">&#xB6; T3&gt;</a></span></span></code></span></dt><dd><p><span class="yiyi-st" id="yiyi-664">&#x5173;&#x95ED;&#x8FD9;&#x4E2A;ResultProxy&#x3002;</span></p><p><span class="yiyi-st" id="yiyi-665">&#x8FD9;&#x5C06;&#x5173;&#x95ED;&#x4E0E;&#x8BED;&#x53E5;&#x6267;&#x884C;&#x76F8;&#x5173;&#x7684;&#x5E95;&#x5C42;DBAPI&#x6E38;&#x6807;&#xFF0C;&#x5982;&#x679C;&#x4ECD;&#x7136;&#x5B58;&#x5728;&#x7684;&#x8BDD;&#x3002;</span><span class="yiyi-st" id="yiyi-666">&#x8BF7;&#x6CE8;&#x610F;&#xFF0C;&#x5F53;<a class="reference internal" href="#sqlalchemy.engine.ResultProxy" title="sqlalchemy.engine.ResultProxy"><code class="xref py py-class docutils literal"><span class="pre">ResultProxy</span></code></a>&#x8017;&#x5C3D;&#x6240;&#x6709;&#x53EF;&#x7528;&#x884C;&#x65F6;&#xFF0C;DBAPI&#x6E38;&#x6807;&#x4F1A;&#x81EA;&#x52A8;&#x91CA;&#x653E;&#x3002;</span><span class="yiyi-st" id="yiyi-667"><a class="reference internal" href="#sqlalchemy.engine.ResultProxy.close" title="sqlalchemy.engine.ResultProxy.close"><code class="xref py py-meth docutils literal"><span class="pre">ResultProxy.close()</span></code></a> is generally an optional method except in the case when discarding a <a class="reference internal" href="#sqlalchemy.engine.ResultProxy" title="sqlalchemy.engine.ResultProxy"><code class="xref py py-class docutils literal"><span class="pre">ResultProxy</span></code></a> that still has additional rows pending for fetch.</span></p><p><span class="yiyi-st" id="yiyi-668">&#x5728;&#x7ED3;&#x679C;&#x662F;<a class="reference internal" href="#dbengine-implicit"><span>connectionless execution</span></a>&#x7684;&#x7ED3;&#x679C;&#x7684;&#x60C5;&#x51B5;&#x4E0B;&#xFF0C;&#x89E3;&#x9664;&#x7ED1;&#x5B9A;<a class="reference internal" href="#sqlalchemy.engine.Connection" title="sqlalchemy.engine.Connection"><code class="xref py py-class docutils literal"><span class="pre">Connection</span></code></a>&#x5BF9;&#x8C61;&#x4E5F;&#x88AB;&#x5173;&#x95ED;&#xFF0C;&#x8BE5;<a class="reference internal" href="glossary.html#term-releases"><span class="xref std std-term">releases</span></a> DBAPI&#x8FDE;&#x63A5;&#x8D44;&#x6E90;&#x3002;</span></p><p><span class="yiyi-st" id="yiyi-669">&#x5728;&#x8C03;&#x7528;&#x6B64;&#x65B9;&#x6CD5;&#x540E;&#xFF0C;&#x8C03;&#x7528;fetch&#x65B9;&#x6CD5;&#x5C06;&#x4E0D;&#x518D;&#x6709;&#x6548;&#xFF0C;&#x8FD9;&#x4F1A;&#x5728;&#x968F;&#x540E;&#x7684;&#x4F7F;&#x7528;&#x4E2D;&#x5F15;&#x53D1;<a class="reference internal" href="exceptions.html#sqlalchemy.exc.ResourceClosedError" title="sqlalchemy.exc.ResourceClosedError"><code class="xref py py-class docutils literal"><span class="pre">ResourceClosedError</span></code></a>&#x3002;</span></p><div class="versionchanged"><p><span class="yiyi-st" id="yiyi-670"><span class="versionmodified">&#x7248;&#x672C;1.0.0&#x4E2D;&#x5DF2;&#x66F4;&#x6539;&#xFF1A;</span>  -  <a class="reference internal" href="#sqlalchemy.engine.ResultProxy.close" title="sqlalchemy.engine.ResultProxy.close"><code class="xref py py-meth docutils literal"><span class="pre">ResultProxy.close()</span></code></a>&#x65B9;&#x6CD5;&#x5DF2;&#x4ECE;&#x91CA;&#x653E;&#x57FA;&#x7840;DBAPI&#x6E38;&#x6807;&#x8D44;&#x6E90;&#x7684;&#x8FDB;&#x7A0B;&#x4E2D;&#x5206;&#x79BB;&#x51FA;&#x6765;&#x3002;</span><span class="yiyi-st" id="yiyi-671"><a class="reference internal" href="#sqlalchemy.engine.Connection" title="sqlalchemy.engine.Connection"><code class="xref py py-class docutils literal"><span class="pre">Connection</span></code></a>&#x7684;&#x201C;&#x81EA;&#x52A8;&#x5173;&#x95ED;&#x201D;&#x529F;&#x80FD;&#x73B0;&#x5728;&#x6267;&#x884C;&#x6240;&#x8C13;&#x7684;&#x201C;&#x8F6F;&#x5173;&#x95ED;&#x201D;&#xFF0C;&#x5B83;&#x91CA;&#x653E;&#x5E95;&#x5C42;&#x7684;DBAPI&#x6E38;&#x6807;&#xFF0C;&#x4F46;&#x5141;&#x8BB8;<a class="reference internal" href="#sqlalchemy.engine.ResultProxy" title="sqlalchemy.engine.ResultProxy"><code class="xref py py-class docutils literal"><span class="pre">ResultProxy</span></code></a>&#x4ECD;&#x7136;&#x8868;&#x73B0;&#x4E3A;&#x5F00;&#x653E;&#x4F46;&#x8017;&#x5C3D;&#x7684;&#x7ED3;&#x679C;&#x96C6;&#xFF1B;&#x5B9E;&#x9645;&#x7684;<a class="reference internal" href="#sqlalchemy.engine.ResultProxy.close" title="sqlalchemy.engine.ResultProxy.close"><code class="xref py py-meth docutils literal"><span class="pre">ResultProxy.close()</span></code></a>&#x65B9;&#x6CD5;&#x6C38;&#x8FDC;&#x4E0D;&#x4F1A;&#x88AB;&#x8C03;&#x7528;&#x3002;</span><span class="yiyi-st" id="yiyi-672">&#x5728;&#x4E0D;&#x8C03;&#x7528;&#x6B64;&#x65B9;&#x6CD5;&#x7684;&#x60C5;&#x51B5;&#x4E0B;&#x653E;&#x5F03;&#x5DF2;&#x7ECF;&#x5B8C;&#x5168;&#x8017;&#x5C3D;&#x7684;<a class="reference internal" href="#sqlalchemy.engine.ResultProxy" title="sqlalchemy.engine.ResultProxy"><code class="xref py py-class docutils literal"><span class="pre">ResultProxy</span></code></a>&#x4ECD;&#x662F;&#x5B89;&#x5168;&#x7684;&#x3002;</span></p></div><div class="admonition seealso"><p class="first admonition-title"><span class="yiyi-st" id="yiyi-673">&#x4E5F;&#x53EF;&#x4EE5;&#x770B;&#x770B;</span></p><p><span class="yiyi-st" id="yiyi-674"><a class="reference internal" href="#"><span>Working with Engines and Connections</span></a></span></p><p class="last"><span class="yiyi-st" id="yiyi-675"><a class="reference internal" href="#sqlalchemy.engine.ResultProxy._soft_close" title="sqlalchemy.engine.ResultProxy._soft_close"><code class="xref py py-meth docutils literal"><span class="pre">ResultProxy._soft_close()</span></code></a></span></p></div></dd></dl><dl class="method"><dt id="sqlalchemy.engine.ResultProxy.fetchall"><span class="yiyi-st" id="yiyi-676"><code class="descname">&#x4F7F;&#x7528;fetchall  T0&gt; <span class="sig-paren">&#xFF08; T1&gt; <span class="sig-paren">&#xFF09; T2&gt; <a class="headerlink" href="#sqlalchemy.engine.ResultProxy.fetchall" title="Permalink to this definition">&#xB6; T3&gt;</a></span></span></code></span></dt><dd><p><span class="yiyi-st" id="yiyi-677">&#x83B7;&#x53D6;&#x6240;&#x6709;&#x884C;&#xFF0C;&#x5C31;&#x50CF;DB-API <code class="docutils literal"><span class="pre">cursor.fetchall()</span></code>&#x4E00;&#x6837;&#x3002;</span></p><p><span class="yiyi-st" id="yiyi-678">&#x5728;&#x6240;&#x6709;&#x884C;&#x8017;&#x5C3D;&#x540E;&#xFF0C;&#x91CA;&#x653E;&#x57FA;&#x7840;DBAPI&#x6E38;&#x6807;&#x8D44;&#x6E90;&#xFF0C;&#x5E76;&#x53EF;&#x4EE5;&#x5B89;&#x5168;&#x5730;&#x4E22;&#x5F03;&#x8BE5;&#x5BF9;&#x8C61;&#x3002;</span></p><p><span class="yiyi-st" id="yiyi-679">&#x968F;&#x540E;&#x5BF9;<a class="reference internal" href="#sqlalchemy.engine.ResultProxy.fetchall" title="sqlalchemy.engine.ResultProxy.fetchall"><code class="xref py py-meth docutils literal"><span class="pre">ResultProxy.fetchall()</span></code></a>&#x7684;&#x8C03;&#x7528;&#x5C06;&#x8FD4;&#x56DE;&#x4E00;&#x4E2A;&#x7A7A;&#x5217;&#x8868;&#x3002;</span><span class="yiyi-st" id="yiyi-680">After the <a class="reference internal" href="#sqlalchemy.engine.ResultProxy.close" title="sqlalchemy.engine.ResultProxy.close"><code class="xref py py-meth docutils literal"><span class="pre">ResultProxy.close()</span></code></a> method is called, the method will raise <a class="reference internal" href="exceptions.html#sqlalchemy.exc.ResourceClosedError" title="sqlalchemy.exc.ResourceClosedError"><code class="xref py py-class docutils literal"><span class="pre">ResourceClosedError</span></code></a>.</span></p><div class="versionchanged"><p><span class="yiyi-st" id="yiyi-681"><span class="versionmodified">&#x5728;&#x7248;&#x672C;1.0.0&#x4E2D;&#x66F4;&#x6539;&#xFF1A;</span>  - &#x589E;&#x52A0;&#x4E86;&#x201C;&#x8F6F;&#x5173;&#x95ED;&#x201D;&#x884C;&#x4E3A;&#xFF0C;&#x5141;&#x8BB8;&#x5728;&#x8C03;&#x7528;<a class="reference internal" href="#sqlalchemy.engine.ResultProxy.close" title="sqlalchemy.engine.ResultProxy.close"><code class="xref py py-meth docutils literal"><span class="pre">ResultProxy.close()</span></code></a>&#x4E4B;&#x524D;&#x5C06;&#x7ED3;&#x679C;&#x7528;&#x4E8E;&#x201C;&#x8017;&#x5C3D;&#x201D;&#x65B9;&#x6CD5;&#x3002;</span></p></div></dd></dl><dl class="method"><dt id="sqlalchemy.engine.ResultProxy.fetchmany"><span class="yiyi-st" id="yiyi-682"><code class="descname">&#x652F;&#x6301;fetchmany  T0&gt; <span class="sig-paren">&#xFF08; T1&gt; <em>&#x5927;&#x5C0F;=&#x65E0; T2&gt; <span class="sig-paren">&#xFF09; T3&gt; <a class="headerlink" href="#sqlalchemy.engine.ResultProxy.fetchmany" title="Permalink to this definition">&#xB6; T4&gt;</a></span></em></span></code></span></dt><dd><p><span class="yiyi-st" id="yiyi-683">&#x53D6;&#x591A;&#x884C;&#xFF0C;&#x5C31;&#x50CF;DB-API <code class="docutils literal"><span class="pre">cursor.fetchmany(size=cursor.arraysize)</span></code>&#x3002;</span></p><p><span class="yiyi-st" id="yiyi-684">&#x5728;&#x6240;&#x6709;&#x884C;&#x8017;&#x5C3D;&#x540E;&#xFF0C;&#x91CA;&#x653E;&#x57FA;&#x7840;DBAPI&#x6E38;&#x6807;&#x8D44;&#x6E90;&#xFF0C;&#x5E76;&#x53EF;&#x4EE5;&#x5B89;&#x5168;&#x5730;&#x4E22;&#x5F03;&#x8BE5;&#x5BF9;&#x8C61;&#x3002;</span></p><p><span class="yiyi-st" id="yiyi-685">&#x6240;&#x6709;&#x884C;&#x88AB;&#x62BD;&#x53D6;&#x540E;&#x8C03;&#x7528;<a class="reference internal" href="#sqlalchemy.engine.ResultProxy.fetchmany" title="sqlalchemy.engine.ResultProxy.fetchmany"><code class="xref py py-meth docutils literal"><span class="pre">ResultProxy.fetchmany()</span></code></a>&#x5C06;&#x8FD4;&#x56DE;&#x4E00;&#x4E2A;&#x7A7A;&#x5217;&#x8868;&#x3002;</span><span class="yiyi-st" id="yiyi-686">After the <a class="reference internal" href="#sqlalchemy.engine.ResultProxy.close" title="sqlalchemy.engine.ResultProxy.close"><code class="xref py py-meth docutils literal"><span class="pre">ResultProxy.close()</span></code></a> method is called, the method will raise <a class="reference internal" href="exceptions.html#sqlalchemy.exc.ResourceClosedError" title="sqlalchemy.exc.ResourceClosedError"><code class="xref py py-class docutils literal"><span class="pre">ResourceClosedError</span></code></a>.</span></p><div class="versionchanged"><p><span class="yiyi-st" id="yiyi-687"><span class="versionmodified">&#x5728;&#x7248;&#x672C;1.0.0&#x4E2D;&#x66F4;&#x6539;&#xFF1A;</span>  - &#x589E;&#x52A0;&#x4E86;&#x201C;&#x8F6F;&#x5173;&#x95ED;&#x201D;&#x884C;&#x4E3A;&#xFF0C;&#x5141;&#x8BB8;&#x5728;&#x8C03;&#x7528;<a class="reference internal" href="#sqlalchemy.engine.ResultProxy.close" title="sqlalchemy.engine.ResultProxy.close"><code class="xref py py-meth docutils literal"><span class="pre">ResultProxy.close()</span></code></a>&#x4E4B;&#x524D;&#x5C06;&#x7ED3;&#x679C;&#x7528;&#x4E8E;&#x201C;&#x8017;&#x5C3D;&#x201D;&#x65B9;&#x6CD5;&#x3002;</span></p></div></dd></dl><dl class="method"><dt id="sqlalchemy.engine.ResultProxy.fetchone"><span class="yiyi-st" id="yiyi-688"><code class="descname"> fetchone  T0&gt; <span class="sig-paren">&#xFF08; T1&gt; <span class="sig-paren">&#xFF09; T2&gt; <a class="headerlink" href="#sqlalchemy.engine.ResultProxy.fetchone" title="Permalink to this definition">&#xB6; T3&gt;</a></span></span></code></span></dt><dd><p><span class="yiyi-st" id="yiyi-689">&#x83B7;&#x53D6;&#x4E00;&#x884C;&#xFF0C;&#x5C31;&#x50CF;DB-API <code class="docutils literal"><span class="pre">cursor.fetchone()</span></code>&#x4E00;&#x6837;&#x3002;</span></p><p><span class="yiyi-st" id="yiyi-690">&#x5728;&#x6240;&#x6709;&#x884C;&#x8017;&#x5C3D;&#x540E;&#xFF0C;&#x91CA;&#x653E;&#x57FA;&#x7840;DBAPI&#x6E38;&#x6807;&#x8D44;&#x6E90;&#xFF0C;&#x5E76;&#x53EF;&#x4EE5;&#x5B89;&#x5168;&#x5730;&#x4E22;&#x5F03;&#x8BE5;&#x5BF9;&#x8C61;&#x3002;</span></p><p><span class="yiyi-st" id="yiyi-691">&#x6240;&#x6709;&#x884C;&#x8017;&#x5C3D;&#x540E;&#x8C03;&#x7528;<a class="reference internal" href="#sqlalchemy.engine.ResultProxy.fetchone" title="sqlalchemy.engine.ResultProxy.fetchone"><code class="xref py py-meth docutils literal"><span class="pre">ResultProxy.fetchone()</span></code></a>&#x5C06;&#x8FD4;&#x56DE;<code class="docutils literal"><span class="pre">None</span></code>&#x3002;</span><span class="yiyi-st" id="yiyi-692">After the <a class="reference internal" href="#sqlalchemy.engine.ResultProxy.close" title="sqlalchemy.engine.ResultProxy.close"><code class="xref py py-meth docutils literal"><span class="pre">ResultProxy.close()</span></code></a> method is called, the method will raise <a class="reference internal" href="exceptions.html#sqlalchemy.exc.ResourceClosedError" title="sqlalchemy.exc.ResourceClosedError"><code class="xref py py-class docutils literal"><span class="pre">ResourceClosedError</span></code></a>.</span></p><div class="versionchanged"><p><span class="yiyi-st" id="yiyi-693"><span class="versionmodified">&#x5728;&#x7248;&#x672C;1.0.0&#x4E2D;&#x66F4;&#x6539;&#xFF1A;</span>  - &#x589E;&#x52A0;&#x4E86;&#x201C;&#x8F6F;&#x5173;&#x95ED;&#x201D;&#x884C;&#x4E3A;&#xFF0C;&#x5141;&#x8BB8;&#x5728;&#x8C03;&#x7528;<a class="reference internal" href="#sqlalchemy.engine.ResultProxy.close" title="sqlalchemy.engine.ResultProxy.close"><code class="xref py py-meth docutils literal"><span class="pre">ResultProxy.close()</span></code></a>&#x4E4B;&#x524D;&#x5C06;&#x7ED3;&#x679C;&#x7528;&#x4E8E;&#x201C;&#x8017;&#x5C3D;&#x201D;&#x65B9;&#x6CD5;&#x3002;</span></p></div></dd></dl><dl class="method"><dt id="sqlalchemy.engine.ResultProxy.first"><span class="yiyi-st" id="yiyi-694"><code class="descname">&#x7B2C;&#x4E00; T0&gt; <span class="sig-paren">&#xFF08; T1&gt; <span class="sig-paren">&#xFF09; T2&gt; <a class="headerlink" href="#sqlalchemy.engine.ResultProxy.first" title="Permalink to this definition">&#xB6; T3&gt;</a></span></span></code></span></dt><dd><p><span class="yiyi-st" id="yiyi-695">&#x53D6;&#x51FA;&#x7B2C;&#x4E00;&#x884C;&#xFF0C;&#x7136;&#x540E;&#x65E0;&#x6761;&#x4EF6;&#x5173;&#x95ED;&#x7ED3;&#x679C;&#x96C6;&#x3002;</span></p><p><span class="yiyi-st" id="yiyi-696">&#x5982;&#x679C;&#x6CA1;&#x6709;&#x884C;&#x5B58;&#x5728;&#xFF0C;&#x5219;&#x8FD4;&#x56DE;None&#x3002;</span></p><p><span class="yiyi-st" id="yiyi-697">&#x8C03;&#x7528;&#x6B64;&#x65B9;&#x6CD5;&#x540E;&#xFF0C;&#x5BF9;&#x8C61;&#x5B8C;&#x5168;&#x5173;&#x95ED;&#xFF0C;&#x4F8B;&#x5982;<a class="reference internal" href="#sqlalchemy.engine.ResultProxy.close" title="sqlalchemy.engine.ResultProxy.close"><code class="xref py py-meth docutils literal"><span class="pre">ResultProxy.close()</span></code></a>&#x65B9;&#x6CD5;&#x5C06;&#x88AB;&#x8C03;&#x7528;&#x3002;</span></p></dd></dl><dl class="attribute"><dt id="sqlalchemy.engine.ResultProxy.inserted_primary_key"><span class="yiyi-st" id="yiyi-698"><code class="descname"> inserted_primary_key  T0&gt; <a class="headerlink" href="#sqlalchemy.engine.ResultProxy.inserted_primary_key" title="Permalink to this definition">&#xB6; T1&gt;</a></code></span></dt><dd><p><span class="yiyi-st" id="yiyi-699">&#x8FD4;&#x56DE;&#x521A;&#x521A;&#x63D2;&#x5165;&#x7684;&#x884C;&#x7684;&#x4E3B;&#x952E;&#x3002;</span></p><p><span class="yiyi-st" id="yiyi-700">&#x8FD4;&#x56DE;&#x503C;&#x662F;&#x4E0E;&#x76EE;&#x6807;&#x8868;&#x4E2D;&#x4E3B;&#x952E;&#x5217;&#x5217;&#x8868;&#x5BF9;&#x5E94;&#x7684;&#x6807;&#x91CF;&#x503C;&#x5217;&#x8868;&#x3002;</span></p><p><span class="yiyi-st" id="yiyi-701">&#x8FD9;&#x4EC5;&#x9002;&#x7528;&#x4E8E;&#x6CA1;&#x6709;&#x660E;&#x786E;&#x6307;&#x5B9A;<a class="reference internal" href="dml.html#sqlalchemy.sql.expression.Insert.returning" title="sqlalchemy.sql.expression.Insert.returning"><code class="xref py py-meth docutils literal"><span class="pre">Insert.returning()</span></code></a>&#x7684;&#x5355;&#x884C;<a class="reference internal" href="dialects_postgresql.html#sqlalchemy.dialects.postgresql.dml.insert" title="sqlalchemy.dialects.postgresql.dml.insert"><code class="xref py py-func docutils literal"><span class="pre">insert()</span></code></a>&#x7ED3;&#x6784;&#x3002;</span></p><p><span class="yiyi-st" id="yiyi-702">&#x8BF7;&#x6CE8;&#x610F;&#xFF0C;&#x6307;&#x5B9A;server_default&#x5B50;&#x53E5;&#x6216;&#x8005;&#x4E0D;&#x7B26;&#x5408;&#x201C;&#x81EA;&#x52A8;&#x589E;&#x91CF;&#x201D;&#x5217;&#x7684;&#x4E3B;&#x952E;&#x5217;&#xFF08;&#x8BF7;&#x53C2;&#x89C1;<a class="reference internal" href="metadata.html#sqlalchemy.schema.Column" title="sqlalchemy.schema.Column"><code class="xref py py-class docutils literal"><span class="pre">Column</span></code></a>&#x4E2D;&#x7684;&#x6CE8;&#x91CA;&#xFF09;&#x5E76;&#x4E14;&#x4F7F;&#x7528;&#x6570;&#x636E;&#x5E93;&#x7AEF;&#x9ED8;&#x8BA4;&#x503C;&#x751F;&#x6210;&#x7684;&#x4E3B;&#x952E;&#x5217;&#x5C06;&#x51FA;&#x73B0;&#x5728;&#x6B64;&#x5904;&#x5217;&#x8868;&#x4E3A;<code class="docutils literal"><span class="pre">None</span></code>&#xFF0C;&#x9664;&#x975E;&#x540E;&#x7AEF;&#x652F;&#x6301;&#x201C;&#x8FD4;&#x56DE;&#x201D;&#x5E76;&#x4E14;&#x542F;&#x7528;&#x4E86;&#x4F7F;&#x7528;&#x201C;&#x9690;&#x5F0F;&#x8FD4;&#x56DE;&#x201D;&#x6267;&#x884C;&#x7684;&#x63D2;&#x5165;&#x8BED;&#x53E5;&#x3002;</span></p><p><span class="yiyi-st" id="yiyi-703">&#x5982;&#x679C;&#x6267;&#x884C;&#x8BED;&#x53E5;&#x4E0D;&#x662F;&#x7F16;&#x8BD1;&#x7684;&#x8868;&#x8FBE;&#x5F0F;&#x7ED3;&#x6784;&#x6216;&#x4E0D;&#x662F;insert()&#x7ED3;&#x6784;&#xFF0C;&#x5219;&#x5F15;&#x53D1;<a class="reference internal" href="exceptions.html#sqlalchemy.exc.InvalidRequestError" title="sqlalchemy.exc.InvalidRequestError"><code class="xref py py-class docutils literal"><span class="pre">InvalidRequestError</span></code></a>&#x3002;</span></p></dd></dl><dl class="attribute"><dt id="sqlalchemy.engine.ResultProxy.is_insert"><span class="yiyi-st" id="yiyi-704"><code class="descname"> is_insert  T0&gt; <a class="headerlink" href="#sqlalchemy.engine.ResultProxy.is_insert" title="Permalink to this definition">&#xB6; T1&gt;</a></code></span></dt><dd><p><span class="yiyi-st" id="yiyi-705">True if this <a class="reference internal" href="#sqlalchemy.engine.ResultProxy" title="sqlalchemy.engine.ResultProxy"><code class="xref py py-class docutils literal"><span class="pre">ResultProxy</span></code></a> is the result of a executing an expression language compiled <a class="reference internal" href="dml.html#sqlalchemy.sql.expression.insert" title="sqlalchemy.sql.expression.insert"><code class="xref py py-func docutils literal"><span class="pre">expression.insert()</span></code></a> construct.</span></p><p><span class="yiyi-st" id="yiyi-706">&#x5F53;&#x4E3A;True&#x65F6;&#xFF0C;&#x8FD9;&#x610F;&#x5473;&#x7740;&#x53EF;&#x4EE5;&#x8BBF;&#x95EE;<a class="reference internal" href="#sqlalchemy.engine.ResultProxy.inserted_primary_key" title="sqlalchemy.engine.ResultProxy.inserted_primary_key"><code class="xref py py-attr docutils literal"><span class="pre">inserted_primary_key</span></code></a>&#x5C5E;&#x6027;&#xFF0C;&#x5047;&#x5B9A;&#x8BE5;&#x8BED;&#x53E5;&#x4E0D;&#x5305;&#x542B;&#x7528;&#x6237;&#x5B9A;&#x4E49;&#x7684;&#x201C;&#x8FD4;&#x56DE;&#x201D;&#x7ED3;&#x6784;&#x3002;</span></p></dd></dl><dl class="method"><dt id="sqlalchemy.engine.ResultProxy.keys"><span class="yiyi-st" id="yiyi-707"><code class="descname">&#x952E; T0&gt; <span class="sig-paren">&#xFF08; T1&gt; <span class="sig-paren">&#xFF09; T2&gt; <a class="headerlink" href="#sqlalchemy.engine.ResultProxy.keys" title="Permalink to this definition">&#xB6; T3&gt;</a></span></span></code></span></dt><dd><p><span class="yiyi-st" id="yiyi-708">&#x8FD4;&#x56DE;&#x884C;&#x7684;&#x5F53;&#x524D;&#x5B57;&#x7B26;&#x4E32;&#x96C6;&#x5408;&#x3002;</span></p></dd></dl><dl class="method"><dt id="sqlalchemy.engine.ResultProxy.last_inserted_params"><span class="yiyi-st" id="yiyi-709"><code class="descname"> last_inserted_pa&#x200B;&#x200B;rams  T0&gt; <span class="sig-paren">&#xFF08; T1&gt; <span class="sig-paren">&#xFF09; T2&gt; <a class="headerlink" href="#sqlalchemy.engine.ResultProxy.last_inserted_params" title="Permalink to this definition">&#xB6; T3&gt;</a></span></span></code></span></dt><dd><p><span class="yiyi-st" id="yiyi-710">&#x4ECE;&#x8BE5;&#x6267;&#x884C;&#x4E2D;&#x8FD4;&#x56DE;&#x63D2;&#x5165;&#x53C2;&#x6570;&#x7684;&#x96C6;&#x5408;&#x3002;</span></p><p><span class="yiyi-st" id="yiyi-711">&#x5982;&#x679C;&#x6267;&#x884C;&#x8BED;&#x53E5;&#x4E0D;&#x662F;&#x7F16;&#x8BD1;&#x7684;&#x8868;&#x8FBE;&#x5F0F;&#x7ED3;&#x6784;&#x6216;&#x4E0D;&#x662F;insert()&#x7ED3;&#x6784;&#xFF0C;&#x5219;&#x5F15;&#x53D1;<a class="reference internal" href="exceptions.html#sqlalchemy.exc.InvalidRequestError" title="sqlalchemy.exc.InvalidRequestError"><code class="xref py py-class docutils literal"><span class="pre">InvalidRequestError</span></code></a>&#x3002;</span></p></dd></dl><dl class="method"><dt id="sqlalchemy.engine.ResultProxy.last_updated_params"><span class="yiyi-st" id="yiyi-712"><code class="descname"> last_updated_pa&#x200B;&#x200B;rams  T0&gt; <span class="sig-paren">&#xFF08; T1&gt; <span class="sig-paren">&#xFF09; T2&gt; <a class="headerlink" href="#sqlalchemy.engine.ResultProxy.last_updated_params" title="Permalink to this definition">&#xB6; T3&gt;</a></span></span></code></span></dt><dd><p><span class="yiyi-st" id="yiyi-713">&#x4ECE;&#x6B64;&#x6267;&#x884C;&#x4E2D;&#x8FD4;&#x56DE;&#x66F4;&#x65B0;&#x53C2;&#x6570;&#x7684;&#x96C6;&#x5408;&#x3002;</span></p><p><span class="yiyi-st" id="yiyi-714">&#x5982;&#x679C;&#x6267;&#x884C;&#x8BED;&#x53E5;&#x4E0D;&#x662F;&#x7F16;&#x8BD1;&#x8868;&#x8FBE;&#x5F0F;&#x7ED3;&#x6784;&#x6216;&#x4E0D;&#x662F;update()&#x7ED3;&#x6784;&#xFF0C;&#x5219;&#x5F15;&#x53D1;<a class="reference internal" href="exceptions.html#sqlalchemy.exc.InvalidRequestError" title="sqlalchemy.exc.InvalidRequestError"><code class="xref py py-class docutils literal"><span class="pre">InvalidRequestError</span></code></a>&#x3002;</span></p></dd></dl><dl class="method"><dt id="sqlalchemy.engine.ResultProxy.lastrow_has_defaults"><span class="yiyi-st" id="yiyi-715"><code class="descname"> lastrow_has_defaults  T0&gt; <span class="sig-paren">&#xFF08; T1&gt; <span class="sig-paren">&#xFF09; T2&gt; <a class="headerlink" href="#sqlalchemy.engine.ResultProxy.lastrow_has_defaults" title="Permalink to this definition">&#xB6; T3&gt;</a></span></span></code></span></dt><dd><p><span class="yiyi-st" id="yiyi-716">&#x4ECE;&#x5E95;&#x5C42;&#x7684;<a class="reference internal" href="internals.html#sqlalchemy.engine.interfaces.ExecutionContext" title="sqlalchemy.engine.interfaces.ExecutionContext"><code class="xref py py-class docutils literal"><span class="pre">ExecutionContext</span></code></a>&#x8FD4;&#x56DE;<code class="docutils literal"><span class="pre">lastrow_has_defaults()</span></code>&#x3002;</span></p><p><span class="yiyi-st" id="yiyi-717">&#x6709;&#x5173;&#x8BE6;&#x7EC6;&#x4FE1;&#x606F;&#xFF0C;&#x8BF7;&#x53C2;&#x9605;<a class="reference internal" href="internals.html#sqlalchemy.engine.interfaces.ExecutionContext" title="sqlalchemy.engine.interfaces.ExecutionContext"><code class="xref py py-class docutils literal"><span class="pre">ExecutionContext</span></code></a>&#x3002;</span></p></dd></dl><dl class="attribute"><dt id="sqlalchemy.engine.ResultProxy.lastrowid"><span class="yiyi-st" id="yiyi-718"><code class="descname"> lastrowid  T0&gt; <a class="headerlink" href="#sqlalchemy.engine.ResultProxy.lastrowid" title="Permalink to this definition">&#xB6; T1&gt;</a></code></span></dt><dd><p><span class="yiyi-st" id="yiyi-719">&#x8FD4;&#x56DE;DBAPI&#x6E38;&#x6807;&#x4E0A;&#x7684;&apos;lastrowid&apos;&#x8BBF;&#x95EE;&#x5668;&#x3002;</span></p><p><span class="yiyi-st" id="yiyi-720">&#x8FD9;&#x662F;&#x4E00;&#x4E2A;&#x7279;&#x5B9A;&#x4E8E;DBAPI&#x7684;&#x65B9;&#x6CD5;&#xFF0C;&#x4EC5;&#x9002;&#x7528;&#x4E8E;&#x652F;&#x6301;&#x5B83;&#x7684;&#x540E;&#x7AEF;&#xFF0C;&#x9002;&#x7528;&#x4E8E;&#x9002;&#x5F53;&#x7684;&#x8BED;&#x53E5;&#x3002;</span><span class="yiyi-st" id="yiyi-721">&#x5B83;&#x7684;&#x884C;&#x4E3A;&#x5728;&#x540E;&#x7AEF;&#x4E0D;&#x4E00;&#x81F4;&#x3002;</span></p><p><span class="yiyi-st" id="yiyi-722">&#x4F7F;&#x7528;insert()&#x8868;&#x8FBE;&#x5F0F;&#x7ED3;&#x6784;&#x65F6;&#xFF0C;&#x901A;&#x5E38;&#x4E0D;&#x9700;&#x8981;&#x4F7F;&#x7528;&#x6B64;&#x65B9;&#x6CD5;&#xFF1B;&#x65E0;&#x8BBA;&#x6570;&#x636E;&#x5E93;&#x540E;&#x7AEF;&#x5982;&#x4F55;&#xFF0C;<a class="reference internal" href="#sqlalchemy.engine.ResultProxy.inserted_primary_key" title="sqlalchemy.engine.ResultProxy.inserted_primary_key"><code class="xref py py-attr docutils literal"><span class="pre">inserted_primary_key</span></code></a>&#x5C5E;&#x6027;&#x90FD;&#x4E3A;&#x65B0;&#x63D2;&#x5165;&#x7684;&#x884C;&#x63D0;&#x4F9B;&#x4E3B;&#x952E;&#x503C;&#x7684;&#x5143;&#x7EC4;&#x3002;</span></p></dd></dl><dl class="method"><dt id="sqlalchemy.engine.ResultProxy.postfetch_cols"><span class="yiyi-st" id="yiyi-723"><code class="descname"> postfetch_cols  T0&gt; <span class="sig-paren">&#xFF08; T1&gt; <span class="sig-paren">&#xFF09; T2&gt; <a class="headerlink" href="#sqlalchemy.engine.ResultProxy.postfetch_cols" title="Permalink to this definition">&#xB6; T3&gt;</a></span></span></code></span></dt><dd><p><span class="yiyi-st" id="yiyi-724">&#x4ECE;&#x5E95;&#x5C42;&#x7684;<a class="reference internal" href="internals.html#sqlalchemy.engine.interfaces.ExecutionContext" title="sqlalchemy.engine.interfaces.ExecutionContext"><code class="xref py py-class docutils literal"><span class="pre">ExecutionContext</span></code></a>&#x8FD4;&#x56DE;<code class="docutils literal"><span class="pre">postfetch_cols()</span></code>&#x3002;</span></p><p><span class="yiyi-st" id="yiyi-725">&#x6709;&#x5173;&#x8BE6;&#x7EC6;&#x4FE1;&#x606F;&#xFF0C;&#x8BF7;&#x53C2;&#x9605;<a class="reference internal" href="internals.html#sqlalchemy.engine.interfaces.ExecutionContext" title="sqlalchemy.engine.interfaces.ExecutionContext"><code class="xref py py-class docutils literal"><span class="pre">ExecutionContext</span></code></a>&#x3002;</span></p><p><span class="yiyi-st" id="yiyi-726">&#x5982;&#x679C;&#x6267;&#x884C;&#x7684;&#x8BED;&#x53E5;&#x4E0D;&#x662F;&#x7F16;&#x8BD1;&#x7684;&#x8868;&#x8FBE;&#x5F0F;&#x7ED3;&#x6784;&#xFF0C;&#x6216;&#x8005;&#x4E0D;&#x662F;insert()&#x6216;update()&#x7ED3;&#x6784;&#xFF0C;&#x5219;&#x5F15;&#x53D1;<a class="reference internal" href="exceptions.html#sqlalchemy.exc.InvalidRequestError" title="sqlalchemy.exc.InvalidRequestError"><code class="xref py py-class docutils literal"><span class="pre">InvalidRequestError</span></code></a>&#x3002;</span></p></dd></dl><dl class="method"><dt id="sqlalchemy.engine.ResultProxy.prefetch_cols"><span class="yiyi-st" id="yiyi-727"><code class="descname"> prefetch_cols  T0&gt; <span class="sig-paren">&#xFF08; T1&gt; <span class="sig-paren">&#xFF09; T2&gt; <a class="headerlink" href="#sqlalchemy.engine.ResultProxy.prefetch_cols" title="Permalink to this definition">&#xB6; T3&gt;</a></span></span></code></span></dt><dd><p><span class="yiyi-st" id="yiyi-728">&#x4ECE;&#x5E95;&#x5C42;&#x7684;<a class="reference internal" href="internals.html#sqlalchemy.engine.interfaces.ExecutionContext" title="sqlalchemy.engine.interfaces.ExecutionContext"><code class="xref py py-class docutils literal"><span class="pre">ExecutionContext</span></code></a>&#x8FD4;&#x56DE;<code class="docutils literal"><span class="pre">prefetch_cols()</span></code>&#x3002;</span></p><p><span class="yiyi-st" id="yiyi-729">&#x6709;&#x5173;&#x8BE6;&#x7EC6;&#x4FE1;&#x606F;&#xFF0C;&#x8BF7;&#x53C2;&#x9605;<a class="reference internal" href="internals.html#sqlalchemy.engine.interfaces.ExecutionContext" title="sqlalchemy.engine.interfaces.ExecutionContext"><code class="xref py py-class docutils literal"><span class="pre">ExecutionContext</span></code></a>&#x3002;</span></p><p><span class="yiyi-st" id="yiyi-730">&#x5982;&#x679C;&#x6267;&#x884C;&#x7684;&#x8BED;&#x53E5;&#x4E0D;&#x662F;&#x7F16;&#x8BD1;&#x7684;&#x8868;&#x8FBE;&#x5F0F;&#x7ED3;&#x6784;&#xFF0C;&#x6216;&#x8005;&#x4E0D;&#x662F;insert()&#x6216;update()&#x7ED3;&#x6784;&#xFF0C;&#x5219;&#x5F15;&#x53D1;<a class="reference internal" href="exceptions.html#sqlalchemy.exc.InvalidRequestError" title="sqlalchemy.exc.InvalidRequestError"><code class="xref py py-class docutils literal"><span class="pre">InvalidRequestError</span></code></a>&#x3002;</span></p></dd></dl><dl class="attribute"><dt id="sqlalchemy.engine.ResultProxy.returned_defaults"><span class="yiyi-st" id="yiyi-731"><code class="descname"> returned_defaults  T0&gt; <a class="headerlink" href="#sqlalchemy.engine.ResultProxy.returned_defaults" title="Permalink to this definition">&#xB6; T1&gt;</a></code></span></dt><dd><p><span class="yiyi-st" id="yiyi-732">&#x8FD4;&#x56DE;&#x4F7F;&#x7528;<a class="reference internal" href="dml.html#sqlalchemy.sql.expression.ValuesBase.return_defaults" title="sqlalchemy.sql.expression.ValuesBase.return_defaults"><code class="xref py py-meth docutils literal"><span class="pre">ValuesBase.return_defaults()</span></code></a>&#x7279;&#x5F81;&#x83B7;&#x53D6;&#x7684;&#x9ED8;&#x8BA4;&#x5217;&#x7684;&#x503C;&#x3002;</span></p><p><span class="yiyi-st" id="yiyi-733">&#x5982;&#x679C;&#x4E0D;&#x4F7F;&#x7528;<a class="reference internal" href="dml.html#sqlalchemy.sql.expression.ValuesBase.return_defaults" title="sqlalchemy.sql.expression.ValuesBase.return_defaults"><code class="xref py py-meth docutils literal"><span class="pre">ValuesBase.return_defaults()</span></code></a>&#x6216;&#x8005;&#x540E;&#x7AEF;&#x4E0D;&#x652F;&#x6301;RETURNING&#xFF0C;&#x5219;&#x8BE5;&#x503C;&#x4E3A;<a class="reference internal" href="#sqlalchemy.engine.RowProxy" title="sqlalchemy.engine.RowProxy"><code class="xref py py-class docutils literal"><span class="pre">RowProxy</span></code></a>&#x7684;&#x5B9E;&#x4F8B;&#xFF0C;&#x6216;<code class="docutils literal"><span class="pre">None</span></code>&#x3002;</span></p><div class="versionadded"><p><span class="yiyi-st" id="yiyi-734"><span class="versionmodified">&#x7248;&#x672C;0.9.0&#x4E2D;&#x7684;&#x65B0;&#x529F;&#x80FD;</span></span></p></div><div class="admonition seealso"><p class="first admonition-title"><span class="yiyi-st" id="yiyi-735">&#x4E5F;&#x53EF;&#x4EE5;&#x770B;&#x770B;</span></p><p class="last"><span class="yiyi-st" id="yiyi-736"><a class="reference internal" href="dml.html#sqlalchemy.sql.expression.ValuesBase.return_defaults" title="sqlalchemy.sql.expression.ValuesBase.return_defaults"><code class="xref py py-meth docutils literal"><span class="pre">ValuesBase.return_defaults()</span></code></a></span></p></div></dd></dl><dl class="attribute"><dt id="sqlalchemy.engine.ResultProxy.returns_rows"><span class="yiyi-st" id="yiyi-737"><code class="descname"> returns_rows  T0&gt; <a class="headerlink" href="#sqlalchemy.engine.ResultProxy.returns_rows" title="Permalink to this definition">&#xB6; T1&gt;</a></code></span></dt><dd><p><span class="yiyi-st" id="yiyi-738">&#x5982;&#x679C;&#x8FD9;&#x4E2A;<a class="reference internal" href="#sqlalchemy.engine.ResultProxy" title="sqlalchemy.engine.ResultProxy"><code class="xref py py-class docutils literal"><span class="pre">ResultProxy</span></code></a>&#x8FD4;&#x56DE;&#x884C;&#xFF0C;&#x5219;&#x4E3A;&#x771F;&#x3002;</span></p><p><span class="yiyi-st" id="yiyi-739">&#x5373;&#x5982;&#x679C;&#x8C03;&#x7528;&#x65B9;&#x6CD5;<a class="reference internal" href="#sqlalchemy.engine.ResultProxy.fetchone" title="sqlalchemy.engine.ResultProxy.fetchone"><code class="xref py py-meth docutils literal"><span class="pre">fetchone()</span></code></a>&#xFF0C;<a class="reference internal" href="#sqlalchemy.engine.ResultProxy.fetchmany" title="sqlalchemy.engine.ResultProxy.fetchmany"><code class="xref py py-meth docutils literal"><span class="pre">fetchmany()</span></code></a> <a class="reference internal" href="#sqlalchemy.engine.ResultProxy.fetchall" title="sqlalchemy.engine.ResultProxy.fetchall"><code class="xref py py-meth docutils literal"><span class="pre">fetchall()</span></code></a>&#x662F;&#x5408;&#x6CD5;&#x7684;&#x3002;</span></p></dd></dl><dl class="attribute"><dt id="sqlalchemy.engine.ResultProxy.rowcount"><span class="yiyi-st" id="yiyi-740"><code class="descname">&#x884C;&#x8BA1;&#x6570; T0&gt; <a class="headerlink" href="#sqlalchemy.engine.ResultProxy.rowcount" title="Permalink to this definition">&#xB6; T1&gt;</a></code></span></dt><dd><p><span class="yiyi-st" id="yiyi-741">&#x4E3A;&#x6B64;&#x7ED3;&#x679C;&#x8FD4;&#x56DE;&apos;rowcount&apos;&#x3002;</span></p><p><span class="yiyi-st" id="yiyi-742">&apos;rowcount&apos;&#x901A;&#x8FC7;UPDATE&#x6216;DELETE&#x8BED;&#x53E5;&#x7684;WHERE&#x6807;&#x51C6;&#x62A5;&#x544A;<em>&#x5339;&#x914D;</em>&#x7684;&#x884C;&#x6570;&#x3002;</span></p><div class="admonition note"><p class="first admonition-title"><span class="yiyi-st" id="yiyi-743">&#x6CE8;&#x610F;</span></p><p><span class="yiyi-st" id="yiyi-744">&#x5173;&#x4E8E;<a class="reference internal" href="#sqlalchemy.engine.ResultProxy.rowcount" title="sqlalchemy.engine.ResultProxy.rowcount"><code class="xref py py-attr docutils literal"><span class="pre">ResultProxy.rowcount</span></code></a>&#x7684;&#x8BF4;&#x660E;&#xFF1A;</span></p><ul class="last simple"><li><span class="yiyi-st" id="yiyi-745">&#x8BE5;&#x5C5E;&#x6027;&#x8FD4;&#x56DE;<em>&#x5339;&#x914D;</em>&#x7684;&#x884C;&#x6570;&#xFF0C;&#x5B83;&#x4E0D;&#x4E00;&#x5B9A;&#x4E0E;&#x5B9E;&#x9645;<em>&#x4FEE;&#x6539;&#x7684;&#x884C;&#x6570;&#x76F8;&#x540C; - &#x4F8B;&#x5982;&#xFF0C;UPDATE&#x8BED;&#x53E5;&#x53EF;&#x80FD;&#x6CA1;&#x6709;&#x7F51;&#x7EDC;&#x5982;&#x679C;&#x7ED9;&#x5B9A;&#x7684;SET&#x503C;&#x4E0E;&#x5DF2;&#x5B58;&#x5728;&#x7684;&#x884C;&#x503C;&#x76F8;&#x540C;&#xFF0C;&#x5219;&#x5728;&#x7ED9;&#x5B9A;&#x884C;&#x4E0A;&#x8FDB;&#x884C;&#x66F4;&#x6539;&#x3002;</em></span><span class="yiyi-st" id="yiyi-746">&#x8FD9;&#x6837;&#x7684;&#x884C;&#x53EF;&#x4EE5;&#x5339;&#x914D;&#x4F46;&#x4E0D;&#x80FD;&#x4FEE;&#x6539;&#x3002;</span><span class="yiyi-st" id="yiyi-747">&#x5728;&#x5177;&#x6709;&#x4E24;&#x79CD;&#x6837;&#x5F0F;&#xFF08;&#x4F8B;&#x5982;MySQL&#xFF09;&#x7684;&#x540E;&#x7AEF;&#x4E0A;&#xFF0C;&#x9ED8;&#x8BA4;&#x60C5;&#x51B5;&#x4E0B;&#x4F1A;&#x914D;&#x7F6E;rowcount&#x4EE5;&#x5728;&#x6240;&#x6709;&#x60C5;&#x51B5;&#x4E0B;&#x8FD4;&#x56DE;&#x5339;&#x914D;&#x8BA1;&#x6570;&#x3002;</span></li><li><span class="yiyi-st" id="yiyi-748"><a class="reference internal" href="#sqlalchemy.engine.ResultProxy.rowcount" title="sqlalchemy.engine.ResultProxy.rowcount"><code class="xref py py-attr docutils literal"><span class="pre">ResultProxy.rowcount</span></code></a> is <em>only</em> useful in conjunction with an UPDATE or DELETE statement. </span><span class="yiyi-st" id="yiyi-749">Contrary to what the Python DBAPI says, it does <em>not</em> return the number of rows available from the results of a SELECT statement as DBAPIs cannot support this functionality when rows are unbuffered.</span></li><li><span class="yiyi-st" id="yiyi-750"><a class="reference internal" href="#sqlalchemy.engine.ResultProxy.rowcount" title="sqlalchemy.engine.ResultProxy.rowcount"><code class="xref py py-attr docutils literal"><span class="pre">ResultProxy.rowcount</span></code></a> may not be fully implemented by all dialects. </span><span class="yiyi-st" id="yiyi-751">&#x7279;&#x522B;&#x662F;&#xFF0C;&#x5927;&#x591A;&#x6570;DBAPI&#x4E0D;&#x652F;&#x6301;executemany&#x8C03;&#x7528;&#x7684;&#x805A;&#x5408;&#x884C;&#x8BA1;&#x6570;&#x7ED3;&#x679C;&#x3002;</span><span class="yiyi-st" id="yiyi-752">&#x5982;&#x679C;&#x5DF2;&#x77E5;&#x652F;&#x6301;&#x6BCF;&#x79CD;&#x7528;&#x6CD5;&#xFF0C;&#x5219;&#x65B9;&#x6CD5;&#x5C06;&#x4ECE;&#x65B9;&#x8A00;&#x62A5;&#x544A;<a class="reference internal" href="#sqlalchemy.engine.ResultProxy.supports_sane_rowcount" title="sqlalchemy.engine.ResultProxy.supports_sane_rowcount"><code class="xref py py-meth docutils literal"><span class="pre">ResultProxy.supports_sane_rowcount()</span></code></a>&#x548C;<a class="reference internal" href="#sqlalchemy.engine.ResultProxy.supports_sane_multi_rowcount" title="sqlalchemy.engine.ResultProxy.supports_sane_multi_rowcount"><code class="xref py py-meth docutils literal"><span class="pre">ResultProxy.supports_sane_multi_rowcount()</span></code></a>&#x65B9;&#x6CD5;&#x3002;</span></li><li><span class="yiyi-st" id="yiyi-753">&#x4F7F;&#x7528;RETURNING&#x7684;&#x8BED;&#x53E5;&#x53EF;&#x80FD;&#x4E0D;&#x4F1A;&#x8FD4;&#x56DE;&#x6B63;&#x786E;&#x7684;rowcount&#x3002;</span></li></ul></div></dd></dl><dl class="method"><dt id="sqlalchemy.engine.ResultProxy.scalar"><span class="yiyi-st" id="yiyi-754"><code class="descname">&#x6807;&#x91CF; T0&gt; <span class="sig-paren">&#xFF08; T1&gt; <span class="sig-paren">&#xFF09; T2&gt; <a class="headerlink" href="#sqlalchemy.engine.ResultProxy.scalar" title="Permalink to this definition">&#xB6; T3&gt;</a></span></span></code></span></dt><dd><p><span class="yiyi-st" id="yiyi-755">&#x83B7;&#x53D6;&#x7B2C;&#x4E00;&#x884C;&#x7684;&#x7B2C;&#x4E00;&#x5217;&#xFF0C;&#x7136;&#x540E;&#x5173;&#x95ED;&#x7ED3;&#x679C;&#x96C6;&#x3002;</span></p><p><span class="yiyi-st" id="yiyi-756">&#x5982;&#x679C;&#x6CA1;&#x6709;&#x884C;&#x5B58;&#x5728;&#xFF0C;&#x5219;&#x8FD4;&#x56DE;None&#x3002;</span></p><p><span class="yiyi-st" id="yiyi-757">&#x8C03;&#x7528;&#x6B64;&#x65B9;&#x6CD5;&#x540E;&#xFF0C;&#x5BF9;&#x8C61;&#x5B8C;&#x5168;&#x5173;&#x95ED;&#xFF0C;&#x4F8B;&#x5982;<a class="reference internal" href="#sqlalchemy.engine.ResultProxy.close" title="sqlalchemy.engine.ResultProxy.close"><code class="xref py py-meth docutils literal"><span class="pre">ResultProxy.close()</span></code></a>&#x65B9;&#x6CD5;&#x5C06;&#x88AB;&#x8C03;&#x7528;&#x3002;</span></p></dd></dl><dl class="method"><dt id="sqlalchemy.engine.ResultProxy.supports_sane_multi_rowcount"><span class="yiyi-st" id="yiyi-758"><code class="descname"> supports_sane_multi_rowcount  T0&gt; <span class="sig-paren">&#xFF08; T1&gt; <span class="sig-paren">&#xFF09; T2&gt; <a class="headerlink" href="#sqlalchemy.engine.ResultProxy.supports_sane_multi_rowcount" title="Permalink to this definition">&#xB6; T3&gt;</a></span></span></code></span></dt><dd><p><span class="yiyi-st" id="yiyi-759">&#x4ECE;&#x65B9;&#x8A00;&#x8FD4;&#x56DE;<code class="docutils literal"><span class="pre">supports_sane_multi_rowcount</span></code>&#x3002;</span></p><p><span class="yiyi-st" id="yiyi-760">&#x6709;&#x5173;&#x80CC;&#x666F;&#xFF0C;&#x8BF7;&#x53C2;&#x9605;<a class="reference internal" href="#sqlalchemy.engine.ResultProxy.rowcount" title="sqlalchemy.engine.ResultProxy.rowcount"><code class="xref py py-attr docutils literal"><span class="pre">ResultProxy.rowcount</span></code></a>&#x3002;</span></p></dd></dl><dl class="method"><dt id="sqlalchemy.engine.ResultProxy.supports_sane_rowcount"><span class="yiyi-st" id="yiyi-761"><code class="descname"> supports_sane_rowcount  T0&gt; <span class="sig-paren">&#xFF08; T1&gt; <span class="sig-paren">&#xFF09; T2&gt; <a class="headerlink" href="#sqlalchemy.engine.ResultProxy.supports_sane_rowcount" title="Permalink to this definition">&#xB6; T3&gt;</a></span></span></code></span></dt><dd><p><span class="yiyi-st" id="yiyi-762">&#x4ECE;&#x65B9;&#x8A00;&#x8FD4;&#x56DE;<code class="docutils literal"><span class="pre">supports_sane_rowcount</span></code>&#x3002;</span></p><p><span class="yiyi-st" id="yiyi-763">&#x6709;&#x5173;&#x80CC;&#x666F;&#xFF0C;&#x8BF7;&#x53C2;&#x9605;<a class="reference internal" href="#sqlalchemy.engine.ResultProxy.rowcount" title="sqlalchemy.engine.ResultProxy.rowcount"><code class="xref py py-attr docutils literal"><span class="pre">ResultProxy.rowcount</span></code></a>&#x3002;</span></p></dd></dl></dd></dl><dl class="class"><dt id="sqlalchemy.engine.RowProxy"><span class="yiyi-st" id="yiyi-764"> <em class="property">class </em><code class="descclassname">sqlalchemy.engine.</code><code class="descname">RowProxy</code><span class="sig-paren">(</span><em>parent</em>, <em>row</em>, <em>processors</em>, <em>keymap</em><span class="sig-paren">)</span><a class="headerlink" href="#sqlalchemy.engine.RowProxy" title="Permalink to this definition">&#xB6;</a></span></dt><dd><p><span class="yiyi-st" id="yiyi-765">&#x57FA;&#x7840;&#xFF1A;<code class="xref py py-class docutils literal"><span class="pre">sqlalchemy.engine.BaseRowProxy</span></code></span></p><p><span class="yiyi-st" id="yiyi-766">&#x6765;&#x81EA;&#x5355;&#x4E2A;&#x6E38;&#x6807;&#x884C;&#x7684;&#x4EE3;&#x7406;&#x503C;&#x3002;</span></p><p><span class="yiyi-st" id="yiyi-767">&#x4E3B;&#x8981;&#x9075;&#x5FAA;&#x201C;&#x6709;&#x5E8F;&#x5B57;&#x5178;&#x201D;&#x884C;&#x4E3A;&#xFF0C;&#x5C06;&#x7ED3;&#x679C;&#x503C;&#x6620;&#x5C04;&#x5230;&#x57FA;&#x4E8E;&#x5B57;&#x7B26;&#x4E32;&#x7684;&#x5217;&#x540D;&#x79F0;&#xFF0C;&#x884C;&#x4E2D;&#x7ED3;&#x679C;&#x7684;&#x6574;&#x6570;&#x4F4D;&#x7F6E;&#x4EE5;&#x53CA;&#x53EF;&#x4EE5;&#x6620;&#x5C04;&#x5230;&#x751F;&#x6210;&#x6B64;&#x7ED3;&#x679C;&#x96C6;&#x7684;&#x539F;&#x59CB;&#x5217;&#x7684;Column&#x5B9E;&#x4F8B;&#xFF08;&#x7528;&#x4E8E;&#x7ED3;&#x679C;&#x5BF9;&#x5E94;&#x4E8E;&#x6784;&#x9020;&#x7684;SQL&#x8868;&#x8FBE;&#x5F0F;&#xFF09;&#x3002;</span></p><dl class="method"><dt id="sqlalchemy.engine.RowProxy.has_key"><span class="yiyi-st" id="yiyi-768"><code class="descname">&#x5BF9;&#x8C61;&#x7684;has_key  T0&gt; <span class="sig-paren">&#xFF08; T1&gt; <em>&#x952E; T2&gt; <span class="sig-paren">&#xFF09; T3&gt; <a class="headerlink" href="#sqlalchemy.engine.RowProxy.has_key" title="Permalink to this definition">&#xB6; T4&gt;</a></span></em></span></code></span></dt><dd><p><span class="yiyi-st" id="yiyi-769">&#x5982;&#x679C;&#x6B64;RowProxy&#x5305;&#x542B;&#x7ED9;&#x5B9A;&#x7684;&#x952E;&#xFF0C;&#x5219;&#x8FD4;&#x56DE;True&#x3002;</span></p></dd></dl><dl class="method"><dt id="sqlalchemy.engine.RowProxy.items"><span class="yiyi-st" id="yiyi-770"><code class="descname">&#x9879; T0&gt; <span class="sig-paren">&#xFF08; T1&gt; <span class="sig-paren">&#xFF09; T2&gt; <a class="headerlink" href="#sqlalchemy.engine.RowProxy.items" title="Permalink to this definition">&#xB6; T3&gt;</a></span></span></code></span></dt><dd><p><span class="yiyi-st" id="yiyi-771">&#x8FD4;&#x56DE;&#x4E00;&#x4E2A;&#x5143;&#x7EC4;&#x5217;&#x8868;&#xFF0C;&#x6BCF;&#x4E2A;&#x5143;&#x7EC4;&#x5305;&#x542B;&#x4E00;&#x4E2A;&#x952E;/&#x503C;&#x5BF9;&#x3002;</span></p></dd></dl><dl class="method"><dt id="sqlalchemy.engine.RowProxy.keys"><span class="yiyi-st" id="yiyi-772"><code class="descname">&#x952E; T0&gt; <span class="sig-paren">&#xFF08; T1&gt; <span class="sig-paren">&#xFF09; T2&gt; <a class="headerlink" href="#sqlalchemy.engine.RowProxy.keys" title="Permalink to this definition">&#xB6; T3&gt;</a></span></span></code></span></dt><dd><p><span class="yiyi-st" id="yiyi-773">&#x4EE5;RowProxy&#x8868;&#x793A;&#x7684;&#x5B57;&#x7B26;&#x4E32;&#x5F62;&#x5F0F;&#x8FD4;&#x56DE;&#x952E;&#x5217;&#x8868;&#x3002;</span></p></dd></dl></dd></dl><dl class="class"><dt id="sqlalchemy.engine.Transaction"><span class="yiyi-st" id="yiyi-774"> <em class="property">class </em><code class="descclassname">sqlalchemy.engine.</code><code class="descname">Transaction</code><span class="sig-paren">(</span><em>connection</em>, <em>parent</em><span class="sig-paren">)</span><a class="headerlink" href="#sqlalchemy.engine.Transaction" title="Permalink to this definition">&#xB6;</a></span></dt><dd><p><span class="yiyi-st" id="yiyi-775">&#x8868;&#x793A;&#x6B63;&#x5728;&#x8FDB;&#x884C;&#x7684;&#x6570;&#x636E;&#x5E93;&#x4E8B;&#x52A1;&#x3002;</span></p><p><span class="yiyi-st" id="yiyi-776"><a class="reference internal" href="#sqlalchemy.engine.Transaction" title="sqlalchemy.engine.Transaction"><code class="xref py py-class docutils literal"><span class="pre">Transaction</span></code></a>&#x5BF9;&#x8C61;&#x662F;&#x901A;&#x8FC7;&#x8C03;&#x7528;<a class="reference internal" href="#sqlalchemy.engine.Connection" title="sqlalchemy.engine.Connection"><code class="xref py py-class docutils literal"><span class="pre">Connection</span></code></a>&#x7684;<a class="reference internal" href="#sqlalchemy.engine.Connection.begin" title="sqlalchemy.engine.Connection.begin"><code class="xref py py-meth docutils literal"><span class="pre">begin()</span></code></a>&#x65B9;&#x6CD5;&#x6765;&#x83B7;&#x53D6;&#x7684;&#xFF1A;</span></p><div class="highlight-python"><div class="highlight"><pre><span></span><span class="kn">from</span> <span class="nn">sqlalchemy</span> <span class="kn">import</span> <span class="n">create_engine</span>
<span class="n">engine</span> <span class="o">=</span> <span class="n">create_engine</span><span class="p">(</span><span class="s2">&quot;postgresql://scott:tiger@localhost/test&quot;</span><span class="p">)</span>
<span class="n">connection</span> <span class="o">=</span> <span class="n">engine</span><span class="o">.</span><span class="n">connect</span><span class="p">()</span>
<span class="n">trans</span> <span class="o">=</span> <span class="n">connection</span><span class="o">.</span><span class="n">begin</span><span class="p">()</span>
<span class="n">connection</span><span class="o">.</span><span class="n">execute</span><span class="p">(</span><span class="s2">&quot;insert into x (a, b) values (1, 2)&quot;</span><span class="p">)</span>
<span class="n">trans</span><span class="o">.</span><span class="n">commit</span><span class="p">()</span></pre></div></div><p><span class="yiyi-st" id="yiyi-777">&#x8BE5;&#x5BF9;&#x8C61;&#x63D0;&#x4F9B;&#x4E86;<a class="reference internal" href="#sqlalchemy.engine.Transaction.rollback" title="sqlalchemy.engine.Transaction.rollback"><code class="xref py py-meth docutils literal"><span class="pre">rollback()</span></code></a>&#x548C;<a class="reference internal" href="#sqlalchemy.engine.Transaction.commit" title="sqlalchemy.engine.Transaction.commit"><code class="xref py py-meth docutils literal"><span class="pre">commit()</span></code></a>&#x65B9;&#x6CD5;&#x6765;&#x63A7;&#x5236;&#x4E8B;&#x52A1;&#x8FB9;&#x754C;&#x3002;</span><span class="yiyi-st" id="yiyi-778">&#x5B83;&#x8FD8;&#x5B9E;&#x73B0;&#x4E86;&#x4E00;&#x4E2A;&#x4E0A;&#x4E0B;&#x6587;&#x7BA1;&#x7406;&#x5668;&#x63A5;&#x53E3;&#xFF0C;&#x4EE5;&#x4FBF;Python <code class="docutils literal"><span class="pre">with</span></code>&#x8BED;&#x53E5;&#x53EF;&#x4EE5;&#x4E0E;<a class="reference internal" href="#sqlalchemy.engine.Connection.begin" title="sqlalchemy.engine.Connection.begin"><code class="xref py py-meth docutils literal"><span class="pre">Connection.begin()</span></code></a>&#x65B9;&#x6CD5;&#x4E00;&#x8D77;&#x4F7F;&#x7528;&#xFF1A;</span></p><div class="highlight-python"><div class="highlight"><pre><span></span><span class="k">with</span> <span class="n">connection</span><span class="o">.</span><span class="n">begin</span><span class="p">():</span>
    <span class="n">connection</span><span class="o">.</span><span class="n">execute</span><span class="p">(</span><span class="s2">&quot;insert into x (a, b) values (1, 2)&quot;</span><span class="p">)</span></pre></div></div><p><span class="yiyi-st" id="yiyi-779">&#x4E8B;&#x52A1;&#x5BF9;&#x8C61;&#x662F;<strong>&#x4E0D;&#x662F;</strong>&#x7EBF;&#x7A0B;&#x5B89;&#x5168;&#x3002;</span></p><p><span class="yiyi-st" id="yiyi-780">&#x53E6;&#x89C1;&#xFF1A;<a class="reference internal" href="#sqlalchemy.engine.Connection.begin" title="sqlalchemy.engine.Connection.begin"><code class="xref py py-meth docutils literal"><span class="pre">Connection.begin()</span></code></a>&#xFF0C;<a class="reference internal" href="#sqlalchemy.engine.Connection.begin_twophase" title="sqlalchemy.engine.Connection.begin_twophase"><code class="xref py py-meth docutils literal"><span class="pre">Connection.begin_twophase()</span></code></a>&#xFF0C;<a class="reference internal" href="#sqlalchemy.engine.Connection.begin_nested" title="sqlalchemy.engine.Connection.begin_nested"><code class="xref py py-meth docutils literal"><span class="pre">Connection.begin_nested()</span></code></a>&#x3002;</span></p><dl class="method"><dt id="sqlalchemy.engine.Transaction.close"><span class="yiyi-st" id="yiyi-781"><code class="descname">&#x9760;&#x8FD1; T0&gt; <span class="sig-paren">&#xFF08; T1&gt; <span class="sig-paren">&#xFF09; T2&gt; <a class="headerlink" href="#sqlalchemy.engine.Transaction.close" title="Permalink to this definition">&#xB6; T3&gt;</a></span></span></code></span></dt><dd><p><span class="yiyi-st" id="yiyi-782">&#x5173;&#x95ED;&#x8FD9;&#x4E2A;<a class="reference internal" href="#sqlalchemy.engine.Transaction" title="sqlalchemy.engine.Transaction"><code class="xref py py-class docutils literal"><span class="pre">Transaction</span></code></a>&#x3002;</span></p><p><span class="yiyi-st" id="yiyi-783">&#x5982;&#x679C;&#x6B64;&#x4E8B;&#x52A1;&#x662F;&#x5F00;&#x59CB;/&#x63D0;&#x4EA4;&#x5D4C;&#x5957;&#x4E2D;&#x7684;&#x57FA;&#x672C;&#x4E8B;&#x52A1;&#xFF0C;&#x5219;&#x4E8B;&#x52A1;&#x5C06;&#x56DE;&#x6EDA;()&#x3002;</span><span class="yiyi-st" id="yiyi-784">&#x5426;&#x5219;&#xFF0C;&#x8BE5;&#x65B9;&#x6CD5;&#x8FD4;&#x56DE;&#x3002;</span></p><p><span class="yiyi-st" id="yiyi-785">&#x8FD9;&#x7528;&#x4E8E;&#x53D6;&#x6D88;&#x4EA4;&#x6613;&#x800C;&#x4E0D;&#x5F71;&#x54CD;&#x5C01;&#x95ED;&#x4EA4;&#x6613;&#x7684;&#x8303;&#x56F4;&#x3002;</span></p></dd></dl><dl class="method"><dt id="sqlalchemy.engine.Transaction.commit"><span class="yiyi-st" id="yiyi-786"><code class="descname">&#x63D0;&#x4EA4; T0&gt; <span class="sig-paren">&#xFF08; T1&gt; <span class="sig-paren">&#xFF09; T2&gt; <a class="headerlink" href="#sqlalchemy.engine.Transaction.commit" title="Permalink to this definition">&#xB6; T3&gt;</a></span></span></code></span></dt><dd><p><span class="yiyi-st" id="yiyi-787">&#x63D0;&#x4EA4;&#x8FD9;&#x4E2A;<a class="reference internal" href="#sqlalchemy.engine.Transaction" title="sqlalchemy.engine.Transaction"><code class="xref py py-class docutils literal"><span class="pre">Transaction</span></code></a>&#x3002;</span></p></dd></dl><dl class="method"><dt id="sqlalchemy.engine.Transaction.rollback"><span class="yiyi-st" id="yiyi-788"><code class="descname">&#x56DE;&#x6EDA; T0&gt; <span class="sig-paren">&#xFF08; T1&gt; <span class="sig-paren">&#xFF09; T2&gt; <a class="headerlink" href="#sqlalchemy.engine.Transaction.rollback" title="Permalink to this definition">&#xB6; T3&gt;</a></span></span></code></span></dt><dd><p><span class="yiyi-st" id="yiyi-789">&#x56DE;&#x6EDA;&#x8FD9;&#x4E2A;<a class="reference internal" href="#sqlalchemy.engine.Transaction" title="sqlalchemy.engine.Transaction"><code class="xref py py-class docutils literal"><span class="pre">Transaction</span></code></a>&#x3002;</span></p></dd></dl></dd></dl><dl class="class"><dt id="sqlalchemy.engine.TwoPhaseTransaction"><span class="yiyi-st" id="yiyi-790"> <em class="property">class </em><code class="descclassname">sqlalchemy.engine.</code><code class="descname">TwoPhaseTransaction</code><span class="sig-paren">(</span><em>connection</em>, <em>xid</em><span class="sig-paren">)</span><a class="headerlink" href="#sqlalchemy.engine.TwoPhaseTransaction" title="Permalink to this definition">&#xB6;</a></span></dt><dd><p><span class="yiyi-st" id="yiyi-791">&#x57FA;&#x7840;&#xFF1A;<a class="reference internal" href="#sqlalchemy.engine.Transaction" title="sqlalchemy.engine.Transaction"><code class="xref py py-class docutils literal"><span class="pre">sqlalchemy.engine.Transaction</span></code></a></span></p><p><span class="yiyi-st" id="yiyi-792">&#x4EE3;&#x8868;&#x4E24;&#x9636;&#x6BB5;&#x4EA4;&#x6613;&#x3002;</span></p><p><span class="yiyi-st" id="yiyi-793">&#x53EF;&#x4EE5;&#x4F7F;&#x7528;<a class="reference internal" href="#sqlalchemy.engine.Connection.begin_twophase" title="sqlalchemy.engine.Connection.begin_twophase"><code class="xref py py-meth docutils literal"><span class="pre">Connection.begin_twophase()</span></code></a>&#x65B9;&#x6CD5;&#x83B7;&#x53D6;&#x65B0;&#x7684;<a class="reference internal" href="#sqlalchemy.engine.TwoPhaseTransaction" title="sqlalchemy.engine.TwoPhaseTransaction"><code class="xref py py-class docutils literal"><span class="pre">TwoPhaseTransaction</span></code></a>&#x5BF9;&#x8C61;&#x3002;</span></p><p><span class="yiyi-st" id="yiyi-794">&#x8BE5;&#x63A5;&#x53E3;&#x4E0E;<a class="reference internal" href="#sqlalchemy.engine.Transaction" title="sqlalchemy.engine.Transaction"><code class="xref py py-class docutils literal"><span class="pre">Transaction</span></code></a>&#x7684;&#x63A5;&#x53E3;&#x76F8;&#x540C;&#xFF0C;&#x5E76;&#x589E;&#x52A0;&#x4E86;<a class="reference internal" href="#sqlalchemy.engine.TwoPhaseTransaction.prepare" title="sqlalchemy.engine.TwoPhaseTransaction.prepare"><code class="xref py py-meth docutils literal"><span class="pre">prepare()</span></code></a>&#x65B9;&#x6CD5;&#x3002;</span></p><dl class="method"><dt id="sqlalchemy.engine.TwoPhaseTransaction.prepare"><span class="yiyi-st" id="yiyi-795"><code class="descname">&#x5236;&#x5907; T0&gt; <span class="sig-paren">&#xFF08; T1&gt; <span class="sig-paren">&#xFF09; T2&gt; <a class="headerlink" href="#sqlalchemy.engine.TwoPhaseTransaction.prepare" title="Permalink to this definition">&#xB6; T3&gt;</a></span></span></code></span></dt><dd><p><span class="yiyi-st" id="yiyi-796">&#x51C6;&#x5907;&#x8FD9;&#x4E2A;<a class="reference internal" href="#sqlalchemy.engine.TwoPhaseTransaction" title="sqlalchemy.engine.TwoPhaseTransaction"><code class="xref py py-class docutils literal"><span class="pre">TwoPhaseTransaction</span></code></a>&#x3002;</span></p><p><span class="yiyi-st" id="yiyi-797">&#x5728;PREPARE&#x4E4B;&#x540E;&#xFF0C;&#x4EA4;&#x6613;&#x53EF;&#x4EE5;&#x88AB;&#x63D0;&#x4EA4;&#x3002;</span></p></dd></dl></dd></dl></div>