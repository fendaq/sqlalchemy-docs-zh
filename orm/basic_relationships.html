<h1><span class="yiyi-st" id="yiyi-49">&#x57FA;&#x672C;&#x5173;&#x7CFB;&#x6A21;&#x5F0F;<a class="headerlink" href="#basic-relationship-patterns" title="Permalink to this headline">&#xB6;</a></span></h1><p><span class="yiyi-st" id="yiyi-50">&#x5FEB;&#x901F;&#x9884;&#x89C8;&#x57FA;&#x672C;&#x5173;&#x7CFB;&#x6A21;&#x5F0F;&#x3002;</span></p><p><span class="yiyi-st" id="yiyi-51">&#x7528;&#x4E8E;&#x4EE5;&#x4E0B;&#x5404;&#x8282;&#x7684;&#x5BFC;&#x5165;&#x5982;&#x4E0B;&#xFF1A;</span></p><div class="highlight-python"><div class="highlight"><pre><span></span><span class="kn">from</span> <span class="nn">sqlalchemy</span> <span class="kn">import</span> <span class="n">Table</span><span class="p">,</span> <span class="n">Column</span><span class="p">,</span> <span class="n">Integer</span><span class="p">,</span> <span class="n">ForeignKey</span>
<span class="kn">from</span> <span class="nn">sqlalchemy.orm</span> <span class="kn">import</span> <span class="n">relationship</span>
<span class="kn">from</span> <span class="nn">sqlalchemy.ext.declarative</span> <span class="kn">import</span> <span class="n">declarative_base</span>

<span class="n">Base</span> <span class="o">=</span> <span class="n">declarative_base</span><span class="p">()</span></pre></div></div><div class="section" id="one-to-many"><h2><span class="yiyi-st" id="yiyi-52">&#x4E00;&#x5BF9;&#x591A;<a class="headerlink" href="#one-to-many" title="Permalink to this headline">&#xB6;</a></span></h2><p><span class="yiyi-st" id="yiyi-53">&#x4E00;&#x5BF9;&#x591A;&#x5173;&#x7CFB;&#x4E2D;&#xFF0C;&#x5728;&#x5F15;&#x7528;parent&#x8868;&#x7684;child&#x8868;&#x4E2D;&#x914D;&#x7F6E;&#x4E00;&#x4E2A;&#x5916;&#x952E;&#x3002;</span><span class="yiyi-st" id="yiyi-54"><a class="reference internal" href="relationship_api.html#sqlalchemy.orm.relationship" title="sqlalchemy.orm.relationship"><code class="xref py py-func docutils literal"><span class="pre">relationship()</span></code></a> &#x6307;&#x5B9A;parent&#x8868;,&#x4F5C;&#x4E3A;&#x4EE3;&#x8868;child&#x8868;&#x7684;&#x9879;&#x76EE;&#x96C6;&#x5408;&#x7684;&#x5F15;&#x7528;</span></p><div class="highlight-python"><div class="highlight"><pre><span></span><span class="k">class</span> <span class="nc">Parent</span><span class="p">(</span><span class="n">Base</span><span class="p">):</span>
    <span class="n">__tablename__</span> <span class="o">=</span> <span class="s1">&apos;parent&apos;</span>
    <span class="nb">id</span> <span class="o">=</span> <span class="n">Column</span><span class="p">(</span><span class="n">Integer</span><span class="p">,</span> <span class="n">primary_key</span><span class="o">=</span><span class="bp">True</span><span class="p">)</span>
    <span class="n">children</span> <span class="o">=</span> <span class="n">relationship</span><span class="p">(</span><span class="s2">&quot;Child&quot;</span><span class="p">)</span>

<span class="k">class</span> <span class="nc">Child</span><span class="p">(</span><span class="n">Base</span><span class="p">):</span>
    <span class="n">__tablename__</span> <span class="o">=</span> <span class="s1">&apos;child&apos;</span>
    <span class="nb">id</span> <span class="o">=</span> <span class="n">Column</span><span class="p">(</span><span class="n">Integer</span><span class="p">,</span> <span class="n">primary_key</span><span class="o">=</span><span class="bp">True</span><span class="p">)</span>
    <span class="n">parent_id</span> <span class="o">=</span> <span class="n">Column</span><span class="p">(</span><span class="n">Integer</span><span class="p">,</span> <span class="n">ForeignKey</span><span class="p">(</span><span class="s1">&apos;parent.id&apos;</span><span class="p">))</span></pre></div></div><p><span class="yiyi-st" id="yiyi-55">&#x4E3A;&#x4E86;&#x5728;&#x4E00;&#x5BF9;&#x591A;&#x4E2D;&#x5EFA;&#x7ACB;&#x53CC;&#x5411;&#x5173;&#x7CFB;&#xFF0C;&#x5176;&#x4E2D;&#x201C;&#x53CD;&#x5411;&#x201D;&#x4FA7;&#xFF08;child&#x8868;&#xFF09;&#x662F;&#x591A;&#x5BF9;&#x4E00;, &#x6307;&#x5B9A;&#x9644;&#x52A0;<a class="reference internal" href="relationship_api.html#sqlalchemy.orm.relationship" title="sqlalchemy.orm.relationship"><code class="xref py py-func docutils literal"><span class="pre">relationship()</span></code></a> &#x548C;&#x7528; <a class="reference internal" href="relationship_api.html#sqlalchemy.orm.relationship.params.back_populates" title="sqlalchemy.orm.relationship"><code class="xref py py-paramref docutils literal"><span class="pre">relationship.back_populates</span></code></a> &#x53C2;&#x6570;&#x8FDE;&#x63A5;&#x4FE9;&#x4E2A;&#x8868;:</span></p><div class="highlight-python"><div class="highlight"><pre><span></span><span class="k">class</span> <span class="nc">Parent</span><span class="p">(</span><span class="n">Base</span><span class="p">):</span>
    <span class="n">__tablename__</span> <span class="o">=</span> <span class="s1">&apos;parent&apos;</span>
    <span class="nb">id</span> <span class="o">=</span> <span class="n">Column</span><span class="p">(</span><span class="n">Integer</span><span class="p">,</span> <span class="n">primary_key</span><span class="o">=</span><span class="bp">True</span><span class="p">)</span>
    <span class="n">children</span> <span class="o">=</span> <span class="n">relationship</span><span class="p">(</span><span class="s2">&quot;Child&quot;</span><span class="p">,</span> <span class="n">back_populates</span><span class="o">=</span><span class="s2">&quot;parent&quot;</span><span class="p">)</span>

<span class="k">class</span> <span class="nc">Child</span><span class="p">(</span><span class="n">Base</span><span class="p">):</span>
    <span class="n">__tablename__</span> <span class="o">=</span> <span class="s1">&apos;child&apos;</span>
    <span class="nb">id</span> <span class="o">=</span> <span class="n">Column</span><span class="p">(</span><span class="n">Integer</span><span class="p">,</span> <span class="n">primary_key</span><span class="o">=</span><span class="bp">True</span><span class="p">)</span>
    <span class="n">parent_id</span> <span class="o">=</span> <span class="n">Column</span><span class="p">(</span><span class="n">Integer</span><span class="p">,</span> <span class="n">ForeignKey</span><span class="p">(</span><span class="s1">&apos;parent.id&apos;</span><span class="p">))</span>
    <span class="n">parent</span> <span class="o">=</span> <span class="n">relationship</span><span class="p">(</span><span class="s2">&quot;Parent&quot;</span><span class="p">,</span> <span class="n">back_populates</span><span class="o">=</span><span class="s2">&quot;children&quot;</span><span class="p">)</span></pre></div></div><p><span class="yiyi-st" id="yiyi-56"><code class="docutils literal"><span class="pre">child</span></code>&#x5C06;&#x83B7;&#x5F97;&#x5177;&#x6709;&#x591A;&#x5BF9;&#x4E00;&#x8BED;&#x4E49;&#x7684;<code class="docutils literal"><span class="pre">parent</span></code>&#x5C5E;&#x6027;&#x3002;</span></p><p><span class="yiyi-st" id="yiyi-57">&#x6216;&#x8005;&#xFF0C;&#x53EF;&#x4EE5;&#x5728;&#x5355;&#x4E2A;<a class="reference internal" href="relationship_api.html#sqlalchemy.orm.relationship" title="sqlalchemy.orm.relationship"><code class="xref py py-func docutils literal"><span class="pre">relationship()</span></code></a>&#x4E0A;&#x4F7F;&#x7528;<a class="reference internal" href="relationship_api.html#sqlalchemy.orm.relationship.params.backref" title="sqlalchemy.orm.relationship"><code class="xref py py-paramref docutils literal"><span class="pre">backref</span></code></a>&#x9009;&#x9879;&#xFF0C;&#x800C;&#x4E0D;&#x4F7F;&#x7528;<a class="reference internal" href="relationship_api.html#sqlalchemy.orm.relationship.params.back_populates" title="sqlalchemy.orm.relationship"><code class="xref py py-paramref docutils literal"><span class="pre">back_populates</span></code></a>&#x3002;</span></p><div class="highlight-python"><div class="highlight"><pre><span></span><span class="k">class</span> <span class="nc">Parent</span><span class="p">(</span><span class="n">Base</span><span class="p">):</span>
    <span class="n">__tablename__</span> <span class="o">=</span> <span class="s1">&apos;parent&apos;</span>
    <span class="nb">id</span> <span class="o">=</span> <span class="n">Column</span><span class="p">(</span><span class="n">Integer</span><span class="p">,</span> <span class="n">primary_key</span><span class="o">=</span><span class="bp">True</span><span class="p">)</span>
    <span class="n">children</span> <span class="o">=</span> <span class="n">relationship</span><span class="p">(</span><span class="s2">&quot;Child&quot;</span><span class="p">,</span> <span class="n">backref</span><span class="o">=</span><span class="s2">&quot;parent&quot;</span><span class="p">)</span></pre></div></div></div><div class="section" id="many-to-one"><h2><span class="yiyi-st" id="yiyi-58">&#x591A;&#x5BF9;&#x4E00;<a class="headerlink" href="#many-to-one" title="Permalink to this headline">&#xB6;</a></span></h2><p><span class="yiyi-st" id="yiyi-59">&#x591A;&#x5BF9;&#x4E00;&#x4E2D;&#xFF0C;&#x5728;&#x5F15;&#x7528;child&#x8868;&#x7684;parent&#x8868;&#x4E2D;&#x653E;&#x7F6E;&#x5916;&#x952E;&#x3002;</span><span class="yiyi-st" id="yiyi-60"><a class="reference internal" href="relationship_api.html#sqlalchemy.orm.relationship" title="sqlalchemy.orm.relationship"><code class="xref py py-func docutils literal"><span class="pre">relationship()</span></code></a> &#x5728;paren&#x8868;&#x4E0A;&#x58F0;&#x660E;&#xFF0C;&#x5C06;&#x521B;&#x5EFA;&#x4E00;&#x4E2A;&#x65B0;&#x7684;&#x6807;&#x91CF;&#x4FDD;&#x6301;&#x5C5E;&#x6027;&#xFF1A;</span></p><div class="highlight-python"><div class="highlight"><pre><span></span><span class="k">class</span> <span class="nc">Parent</span><span class="p">(</span><span class="n">Base</span><span class="p">):</span>
    <span class="n">__tablename__</span> <span class="o">=</span> <span class="s1">&apos;parent&apos;</span>
    <span class="nb">id</span> <span class="o">=</span> <span class="n">Column</span><span class="p">(</span><span class="n">Integer</span><span class="p">,</span> <span class="n">primary_key</span><span class="o">=</span><span class="bp">True</span><span class="p">)</span>
    <span class="n">child_id</span> <span class="o">=</span> <span class="n">Column</span><span class="p">(</span><span class="n">Integer</span><span class="p">,</span> <span class="n">ForeignKey</span><span class="p">(</span><span class="s1">&apos;child.id&apos;</span><span class="p">))</span>
    <span class="n">child</span> <span class="o">=</span> <span class="n">relationship</span><span class="p">(</span><span class="s2">&quot;Child&quot;</span><span class="p">)</span>

<span class="k">class</span> <span class="nc">Child</span><span class="p">(</span><span class="n">Base</span><span class="p">):</span>
    <span class="n">__tablename__</span> <span class="o">=</span> <span class="s1">&apos;child&apos;</span>
    <span class="nb">id</span> <span class="o">=</span> <span class="n">Column</span><span class="p">(</span><span class="n">Integer</span><span class="p">,</span> <span class="n">primary_key</span><span class="o">=</span><span class="bp">True</span><span class="p">)</span></pre></div></div><p><span class="yiyi-st" id="yiyi-61">&#x5728;&#x4FE9;&#x8FB9;&#x901A;&#x8FC7;&#x589E;&#x52A0;&#x7B2C;&#x4E8C;&#x4E2A;<a class="reference internal" href="relationship_api.html#sqlalchemy.orm.relationship" title="sqlalchemy.orm.relationship"><code class="xref py py-func docutils literal"><span class="pre">relationship()</span></code></a> &#x5E76;&#x5E94;&#x7528; <a class="reference internal" href="relationship_api.html#sqlalchemy.orm.relationship.params.back_populates" title="sqlalchemy.orm.relationship"><code class="xref py py-paramref docutils literal"><span class="pre">relationship.back_populates</span></code></a> &#x53C2;&#x6570; &#x6765;&#x8FBE;&#x5230;&#x53CC;&#x5411;&#x884C;&#x4E3A;</span></p><div class="highlight-python"><div class="highlight"><pre><span></span><span class="k">class</span> <span class="nc">Parent</span><span class="p">(</span><span class="n">Base</span><span class="p">):</span>
    <span class="n">__tablename__</span> <span class="o">=</span> <span class="s1">&apos;parent&apos;</span>
    <span class="nb">id</span> <span class="o">=</span> <span class="n">Column</span><span class="p">(</span><span class="n">Integer</span><span class="p">,</span> <span class="n">primary_key</span><span class="o">=</span><span class="bp">True</span><span class="p">)</span>
    <span class="n">child_id</span> <span class="o">=</span> <span class="n">Column</span><span class="p">(</span><span class="n">Integer</span><span class="p">,</span> <span class="n">ForeignKey</span><span class="p">(</span><span class="s1">&apos;child.id&apos;</span><span class="p">))</span>
    <span class="n">child</span> <span class="o">=</span> <span class="n">relationship</span><span class="p">(</span><span class="s2">&quot;Child&quot;</span><span class="p">,</span> <span class="n">back_populates</span><span class="o">=</span><span class="s2">&quot;parents&quot;</span><span class="p">)</span>

<span class="k">class</span> <span class="nc">Child</span><span class="p">(</span><span class="n">Base</span><span class="p">):</span>
    <span class="n">__tablename__</span> <span class="o">=</span> <span class="s1">&apos;child&apos;</span>
    <span class="nb">id</span> <span class="o">=</span> <span class="n">Column</span><span class="p">(</span><span class="n">Integer</span><span class="p">,</span> <span class="n">primary_key</span><span class="o">=</span><span class="bp">True</span><span class="p">)</span>
    <span class="n">parents</span> <span class="o">=</span> <span class="n">relationship</span><span class="p">(</span><span class="s2">&quot;Parent&quot;</span><span class="p">,</span> <span class="n">back_populates</span><span class="o">=</span><span class="s2">&quot;child&quot;</span><span class="p">)</span></pre></div></div><p><span class="yiyi-st" id="yiyi-62">&#x6216;&#x8005;&#xFF0C;&#x53EF;&#x4EE5;&#x5728;&#x5355;&#x4E2A;<a class="reference internal" href="relationship_api.html#sqlalchemy.orm.relationship" title="sqlalchemy.orm.relationship"><code class="xref py py-func docutils literal"><span class="pre">relationship()</span></code></a>&#x4E0A;&#x4F7F;&#x7528;<a class="reference internal" href="relationship_api.html#sqlalchemy.orm.relationship.params.backref" title="sqlalchemy.orm.relationship"><code class="xref py py-paramref docutils literal"><span class="pre">backref</span></code></a>&#x53C2;&#x6570;&#xFF0C;&#x4F8B;&#x5982;<code class="docutils literal"><span class="pre">Parent.child</span></code>&#x3002;</span></p><div class="highlight-python"><div class="highlight"><pre><span></span><span class="k">class</span> <span class="nc">Parent</span><span class="p">(</span><span class="n">Base</span><span class="p">):</span>
    <span class="n">__tablename__</span> <span class="o">=</span> <span class="s1">&apos;parent&apos;</span>
    <span class="nb">id</span> <span class="o">=</span> <span class="n">Column</span><span class="p">(</span><span class="n">Integer</span><span class="p">,</span> <span class="n">primary_key</span><span class="o">=</span><span class="bp">True</span><span class="p">)</span>
    <span class="n">child_id</span> <span class="o">=</span> <span class="n">Column</span><span class="p">(</span><span class="n">Integer</span><span class="p">,</span> <span class="n">ForeignKey</span><span class="p">(</span><span class="s1">&apos;child.id&apos;</span><span class="p">))</span>
    <span class="n">child</span> <span class="o">=</span> <span class="n">relationship</span><span class="p">(</span><span class="s2">&quot;Child&quot;</span><span class="p">,</span> <span class="n">backref</span><span class="o">=</span><span class="s2">&quot;parents&quot;</span><span class="p">)</span></pre></div></div></div><div class="section" id="one-to-one"><h2><span class="yiyi-st" id="yiyi-63">&#x4E00;&#x5BF9;&#x4E00;<a class="headerlink" href="#one-to-one" title="Permalink to this headline">&#xB6;</a></span></h2><p><span class="yiyi-st" id="yiyi-64">&#x4E00;&#x5BF9;&#x4E00;&#x672C;&#x8D28;&#x4E0A;&#x662F;&#x5728;&#x4E24;&#x8FB9;&#x90FD;&#x662F;&#x6807;&#x91CF;&#x5C5E;&#x6027;&#x7684;&#x53CC;&#x5411;&#x5173;&#x7CFB;&#x3002;</span><span class="yiyi-st" id="yiyi-65">&#x4E3A;&#x4E86;&#x5B9E;&#x73B0;&#x8FD9;&#x4E00;&#x70B9;&#xFF0C;&#x653E;&#x7F6E;&#x6307;&#x793A;&#x6807;&#x91CF;&#x5C5E;&#x6027;&#x7684;<a class="reference internal" href="relationship_api.html#sqlalchemy.orm.relationship.params.uselist" title="sqlalchemy.orm.relationship"><code class="xref py py-paramref docutils literal"><span class="pre">uselist</span></code></a>&#x6807;&#x5FD7;&#xFF0C;&#x6765;&#x4EE3;&#x66FF;&#x201C;&#x591A;&#x201D;&#x4FA7;&#x5173;&#x7CFB;&#x7684;&#x96C6;&#x5408;&#x3002;</span><span class="yiyi-st" id="yiyi-66">&#x6765;&#x5C06;&#x4E00;&#x5BF9;&#x591A;&#x8F6C;&#x6362;&#x4E3A;&#x4E00;&#x5BF9;&#x4E00;&#xFF1A;</span></p><div class="highlight-python"><div class="highlight"><pre><span></span><span class="k">class</span> <span class="nc">Parent</span><span class="p">(</span><span class="n">Base</span><span class="p">):</span>
    <span class="n">__tablename__</span> <span class="o">=</span> <span class="s1">&apos;parent&apos;</span>
    <span class="nb">id</span> <span class="o">=</span> <span class="n">Column</span><span class="p">(</span><span class="n">Integer</span><span class="p">,</span> <span class="n">primary_key</span><span class="o">=</span><span class="bp">True</span><span class="p">)</span>
    <span class="n">child</span> <span class="o">=</span> <span class="n">relationship</span><span class="p">(</span><span class="s2">&quot;Child&quot;</span><span class="p">,</span> <span class="n">uselist</span><span class="o">=</span><span class="bp">False</span><span class="p">,</span> <span class="n">back_populates</span><span class="o">=</span><span class="s2">&quot;parent&quot;</span><span class="p">)</span>

<span class="k">class</span> <span class="nc">Child</span><span class="p">(</span><span class="n">Base</span><span class="p">):</span>
    <span class="n">__tablename__</span> <span class="o">=</span> <span class="s1">&apos;child&apos;</span>
    <span class="nb">id</span> <span class="o">=</span> <span class="n">Column</span><span class="p">(</span><span class="n">Integer</span><span class="p">,</span> <span class="n">primary_key</span><span class="o">=</span><span class="bp">True</span><span class="p">)</span>
    <span class="n">parent_id</span> <span class="o">=</span> <span class="n">Column</span><span class="p">(</span><span class="n">Integer</span><span class="p">,</span> <span class="n">ForeignKey</span><span class="p">(</span><span class="s1">&apos;parent.id&apos;</span><span class="p">))</span>
    <span class="n">parent</span> <span class="o">=</span> <span class="n">relationship</span><span class="p">(</span><span class="s2">&quot;Parent&quot;</span><span class="p">,</span> <span class="n">back_populates</span><span class="o">=</span><span class="s2">&quot;child&quot;</span><span class="p">)</span></pre></div></div><p><span class="yiyi-st" id="yiyi-67">&#x6216;&#x8005;&#x591A;&#x5BF9;&#x4E00;&#xFF1A;</span></p><div class="highlight-python"><div class="highlight"><pre><span></span><span class="k">class</span> <span class="nc">Parent</span><span class="p">(</span><span class="n">Base</span><span class="p">):</span>
    <span class="n">__tablename__</span> <span class="o">=</span> <span class="s1">&apos;parent&apos;</span>
    <span class="nb">id</span> <span class="o">=</span> <span class="n">Column</span><span class="p">(</span><span class="n">Integer</span><span class="p">,</span> <span class="n">primary_key</span><span class="o">=</span><span class="bp">True</span><span class="p">)</span>
    <span class="n">child_id</span> <span class="o">=</span> <span class="n">Column</span><span class="p">(</span><span class="n">Integer</span><span class="p">,</span> <span class="n">ForeignKey</span><span class="p">(</span><span class="s1">&apos;child.id&apos;</span><span class="p">))</span>
    <span class="n">child</span> <span class="o">=</span> <span class="n">relationship</span><span class="p">(</span><span class="s2">&quot;Child&quot;</span><span class="p">,</span> <span class="n">back_populates</span><span class="o">=</span><span class="s2">&quot;parent&quot;</span><span class="p">)</span>

<span class="k">class</span> <span class="nc">Child</span><span class="p">(</span><span class="n">Base</span><span class="p">):</span>
    <span class="n">__tablename__</span> <span class="o">=</span> <span class="s1">&apos;child&apos;</span>
    <span class="nb">id</span> <span class="o">=</span> <span class="n">Column</span><span class="p">(</span><span class="n">Integer</span><span class="p">,</span> <span class="n">primary_key</span><span class="o">=</span><span class="bp">True</span><span class="p">)</span>
    <span class="n">parent</span> <span class="o">=</span> <span class="n">relationship</span><span class="p">(</span><span class="s2">&quot;Parent&quot;</span><span class="p">,</span> <span class="n">back_populates</span><span class="o">=</span><span class="s2">&quot;child&quot;</span><span class="p">,</span> <span class="n">uselist</span><span class="o">=</span><span class="bp">False</span><span class="p">)</span></pre></div></div><p><span class="yiyi-st" id="yiyi-68">&#x603B;&#x4E4B;&#xFF0C;&#x53EF;&#x4EE5;&#x4F7F;&#x7528;<a class="reference internal" href="relationship_api.html#sqlalchemy.orm.relationship.params.backref" title="sqlalchemy.orm.relationship"><code class="xref py py-paramref docutils literal"><span class="pre">relationship.backref</span></code></a>&#x548C;<a class="reference internal" href="relationship_api.html#sqlalchemy.orm.backref" title="sqlalchemy.orm.backref"><code class="xref py py-func docutils literal"><span class="pre">backref()</span></code></a>&#x51FD;&#x6570;&#x6765;&#x4EE3;&#x66FF;<a class="reference internal" href="relationship_api.html#sqlalchemy.orm.relationship.params.back_populates" title="sqlalchemy.orm.relationship"><code class="xref py py-paramref docutils literal"><span class="pre">relationship.back_populates</span></code></a>&#x65B9;&#x6CD5;&#xFF1B;&#x8981;&#x5728;&#x53CD;&#x5411;&#x5F15;&#x7528;&#x4E0A;&#x6307;&#x5B9A;<code class="docutils literal"><span class="pre">uselist</span></code>&#xFF0C;&#x8BF7;&#x4F7F;&#x7528;<a class="reference internal" href="relationship_api.html#sqlalchemy.orm.backref" title="sqlalchemy.orm.backref"><code class="xref py py-func docutils literal"><span class="pre">backref()</span></code></a>&#x51FD;&#x6570;&#xFF1A;</span></p><div class="highlight-python"><div class="highlight"><pre><span></span><span class="kn">from</span> <span class="nn">sqlalchemy.orm</span> <span class="kn">import</span> <span class="n">backref</span>

<span class="k">class</span> <span class="nc">Parent</span><span class="p">(</span><span class="n">Base</span><span class="p">):</span>
    <span class="n">__tablename__</span> <span class="o">=</span> <span class="s1">&apos;parent&apos;</span>
    <span class="nb">id</span> <span class="o">=</span> <span class="n">Column</span><span class="p">(</span><span class="n">Integer</span><span class="p">,</span> <span class="n">primary_key</span><span class="o">=</span><span class="bp">True</span><span class="p">)</span>
    <span class="n">child_id</span> <span class="o">=</span> <span class="n">Column</span><span class="p">(</span><span class="n">Integer</span><span class="p">,</span> <span class="n">ForeignKey</span><span class="p">(</span><span class="s1">&apos;child.id&apos;</span><span class="p">))</span>
    <span class="n">child</span> <span class="o">=</span> <span class="n">relationship</span><span class="p">(</span><span class="s2">&quot;Child&quot;</span><span class="p">,</span> <span class="n">backref</span><span class="o">=</span><span class="n">backref</span><span class="p">(</span><span class="s2">&quot;parent&quot;</span><span class="p">,</span> <span class="n">uselist</span><span class="o">=</span><span class="bp">False</span><span class="p">))</span></pre></div></div></div><div class="section" id="many-to-many"><h2><span class="yiyi-st" id="yiyi-69">&#x591A;&#x5BF9;&#x591A;<a class="headerlink" href="#many-to-many" title="Permalink to this headline">&#xB6;</a></span></h2><p><span class="yiyi-st" id="yiyi-70">&#x5728;&#x201C;&#x591A;&#x5BF9;&#x591A;&#x201D;&#x4E2D;&#xFF0C;&#x9700;&#x8981;&#x5728;&#x4E24;&#x4E2A;&#x7C7B;&#x4E4B;&#x95F4;&#x6DFB;&#x52A0;&#x4E86;&#x4E00;&#x4E2A;&#x5173;&#x8054;&#x8868;&#x3002;</span><span class="yiyi-st" id="yiyi-71">&#x5173;&#x8054;&#x8868;&#x7531;<a class="reference internal" href="relationship_api.html#sqlalchemy.orm.relationship" title="sqlalchemy.orm.relationship"><code class="xref py py-func docutils literal"><span class="pre">relationship()</span></code></a>&#x7684;<a class="reference internal" href="relationship_api.html#sqlalchemy.orm.relationship.params.secondary" title="sqlalchemy.orm.relationship"><code class="xref py py-paramref docutils literal"><span class="pre">secondary</span></code></a>&#x53C2;&#x6570;&#x6307;&#x793A;&#x3002;</span><span class="yiyi-st" id="yiyi-72">&#x901A;&#x5E38;&#xFF0C;<a class="reference internal" href="core_metadata.html#sqlalchemy.schema.Table" title="sqlalchemy.schema.Table"><code class="xref py py-class docutils literal"><span class="pre">Table</span></code></a>&#x4F7F;&#x7528;&#x4E0E;&#x58F0;&#x660E;&#x6027;&#x57FA;&#x7C7B;&#x5173;&#x8054;&#x7684;<a class="reference internal" href="core_metadata.html#sqlalchemy.schema.MetaData" title="sqlalchemy.schema.MetaData"><code class="xref py py-class docutils literal"><span class="pre">MetaData</span></code></a>&#x5BF9;&#x8C61;&#xFF0C;&#x4EE5;&#x4FBF;<a class="reference internal" href="core_constraints.html#sqlalchemy.schema.ForeignKey" title="sqlalchemy.schema.ForeignKey"><code class="xref py py-class docutils literal"><span class="pre">ForeignKey</span></code></a>&#x6307;&#x4EE4;&#x53EF;&#x4EE5;&#x5B9A;&#x4F4D;&#x8981;&#x94FE;&#x63A5;&#x7684;&#x8FDC;&#x7A0B;&#x8868;&#xFF1A;</span></p><div class="highlight-python"><div class="highlight"><pre><span></span><span class="n">association_table</span> <span class="o">=</span> <span class="n">Table</span><span class="p">(</span><span class="s1">&apos;association&apos;</span><span class="p">,</span> <span class="n">Base</span><span class="o">.</span><span class="n">metadata</span><span class="p">,</span>
    <span class="n">Column</span><span class="p">(</span><span class="s1">&apos;left_id&apos;</span><span class="p">,</span> <span class="n">Integer</span><span class="p">,</span> <span class="n">ForeignKey</span><span class="p">(</span><span class="s1">&apos;left.id&apos;</span><span class="p">)),</span>
    <span class="n">Column</span><span class="p">(</span><span class="s1">&apos;right_id&apos;</span><span class="p">,</span> <span class="n">Integer</span><span class="p">,</span> <span class="n">ForeignKey</span><span class="p">(</span><span class="s1">&apos;right.id&apos;</span><span class="p">))</span>
<span class="p">)</span>

<span class="k">class</span> <span class="nc">Parent</span><span class="p">(</span><span class="n">Base</span><span class="p">):</span>
    <span class="n">__tablename__</span> <span class="o">=</span> <span class="s1">&apos;left&apos;</span>
    <span class="nb">id</span> <span class="o">=</span> <span class="n">Column</span><span class="p">(</span><span class="n">Integer</span><span class="p">,</span> <span class="n">primary_key</span><span class="o">=</span><span class="bp">True</span><span class="p">)</span>
    <span class="n">children</span> <span class="o">=</span> <span class="n">relationship</span><span class="p">(</span><span class="s2">&quot;Child&quot;</span><span class="p">,</span>
                    <span class="n">secondary</span><span class="o">=</span><span class="n">association_table</span><span class="p">)</span>

<span class="k">class</span> <span class="nc">Child</span><span class="p">(</span><span class="n">Base</span><span class="p">):</span>
    <span class="n">__tablename__</span> <span class="o">=</span> <span class="s1">&apos;right&apos;</span>
    <span class="nb">id</span> <span class="o">=</span> <span class="n">Column</span><span class="p">(</span><span class="n">Integer</span><span class="p">,</span> <span class="n">primary_key</span><span class="o">=</span><span class="bp">True</span><span class="p">)</span></pre></div></div><p><span class="yiyi-st" id="yiyi-73">&#x5BF9;&#x4E8E;&#x53CC;&#x5411;&#x5173;&#x7CFB;&#xFF0C;&#x5173;&#x7CFB;&#x7684;&#x4E24;&#x4FA7;&#x90FD;&#x5305;&#x542B;&#x96C6;&#x5408;&#x3002;</span><span class="yiyi-st" id="yiyi-74">&#x4F7F;&#x7528;<a class="reference internal" href="relationship_api.html#sqlalchemy.orm.relationship.params.back_populates" title="sqlalchemy.orm.relationship"><code class="xref py py-paramref docutils literal"><span class="pre">relationship.back_populates</span></code></a>&#x6307;&#x5B9A;&#xFF0C;&#x5E76;&#x4E3A;&#x6BCF;&#x4E2A;<a class="reference internal" href="relationship_api.html#sqlalchemy.orm.relationship" title="sqlalchemy.orm.relationship"><code class="xref py py-func docutils literal"><span class="pre">&#x5173;&#x7CFB;()</span></code></a>&#x6307;&#x5B9A;&#x516C;&#x5171;&#x5173;&#x8054;&#x8868;&#xFF1A;</span></p><div class="highlight-python"><div class="highlight"><pre><span></span><span class="n">association_table</span> <span class="o">=</span> <span class="n">Table</span><span class="p">(</span><span class="s1">&apos;association&apos;</span><span class="p">,</span> <span class="n">Base</span><span class="o">.</span><span class="n">metadata</span><span class="p">,</span>
    <span class="n">Column</span><span class="p">(</span><span class="s1">&apos;left_id&apos;</span><span class="p">,</span> <span class="n">Integer</span><span class="p">,</span> <span class="n">ForeignKey</span><span class="p">(</span><span class="s1">&apos;left.id&apos;</span><span class="p">)),</span>
    <span class="n">Column</span><span class="p">(</span><span class="s1">&apos;right_id&apos;</span><span class="p">,</span> <span class="n">Integer</span><span class="p">,</span> <span class="n">ForeignKey</span><span class="p">(</span><span class="s1">&apos;right.id&apos;</span><span class="p">))</span>
<span class="p">)</span>

<span class="k">class</span> <span class="nc">Parent</span><span class="p">(</span><span class="n">Base</span><span class="p">):</span>
    <span class="n">__tablename__</span> <span class="o">=</span> <span class="s1">&apos;left&apos;</span>
    <span class="nb">id</span> <span class="o">=</span> <span class="n">Column</span><span class="p">(</span><span class="n">Integer</span><span class="p">,</span> <span class="n">primary_key</span><span class="o">=</span><span class="bp">True</span><span class="p">)</span>
    <span class="n">children</span> <span class="o">=</span> <span class="n">relationship</span><span class="p">(</span>
        <span class="s2">&quot;Child&quot;</span><span class="p">,</span>
        <span class="n">secondary</span><span class="o">=</span><span class="n">association_table</span><span class="p">,</span>
        <span class="n">back_populates</span><span class="o">=</span><span class="s2">&quot;parents&quot;</span><span class="p">)</span>

<span class="k">class</span> <span class="nc">Child</span><span class="p">(</span><span class="n">Base</span><span class="p">):</span>
    <span class="n">__tablename__</span> <span class="o">=</span> <span class="s1">&apos;right&apos;</span>
    <span class="nb">id</span> <span class="o">=</span> <span class="n">Column</span><span class="p">(</span><span class="n">Integer</span><span class="p">,</span> <span class="n">primary_key</span><span class="o">=</span><span class="bp">True</span><span class="p">)</span>
    <span class="n">parents</span> <span class="o">=</span> <span class="n">relationship</span><span class="p">(</span>
        <span class="s2">&quot;Parent&quot;</span><span class="p">,</span>
        <span class="n">secondary</span><span class="o">=</span><span class="n">association_table</span><span class="p">,</span>
        <span class="n">back_populates</span><span class="o">=</span><span class="s2">&quot;children&quot;</span><span class="p">)</span></pre></div></div><p><span class="yiyi-st" id="yiyi-75">&#x5F53;&#x4F7F;&#x7528;<a class="reference internal" href="relationship_api.html#sqlalchemy.orm.relationship.params.backref" title="sqlalchemy.orm.relationship"><code class="xref py py-paramref docutils literal"><span class="pre">backref</span></code></a>&#x53C2;&#x6570;&#x800C;&#x4E0D;&#x662F;<a class="reference internal" href="relationship_api.html#sqlalchemy.orm.relationship.params.back_populates" title="sqlalchemy.orm.relationship"><code class="xref py py-paramref docutils literal"><span class="pre">relationship.back_populates</span></code></a>&#x65F6;&#xFF0C;&#x53CD;&#x5411;&#x5F15;&#x7528;&#x5C06;&#x81EA;&#x52A8;&#x5BF9;&#x53CD;&#x5411;&#x5173;&#x7CFB;&#x4F7F;&#x7528;&#x76F8;&#x540C;&#x7684;<a class="reference internal" href="relationship_api.html#sqlalchemy.orm.relationship.params.secondary" title="sqlalchemy.orm.relationship"><code class="xref py py-paramref docutils literal"><span class="pre">secondary</span></code></a>&#x53C2;&#x6570;&#xFF1A;</span></p><div class="highlight-python"><div class="highlight"><pre><span></span><span class="n">association_table</span> <span class="o">=</span> <span class="n">Table</span><span class="p">(</span><span class="s1">&apos;association&apos;</span><span class="p">,</span> <span class="n">Base</span><span class="o">.</span><span class="n">metadata</span><span class="p">,</span>
    <span class="n">Column</span><span class="p">(</span><span class="s1">&apos;left_id&apos;</span><span class="p">,</span> <span class="n">Integer</span><span class="p">,</span> <span class="n">ForeignKey</span><span class="p">(</span><span class="s1">&apos;left.id&apos;</span><span class="p">)),</span>
    <span class="n">Column</span><span class="p">(</span><span class="s1">&apos;right_id&apos;</span><span class="p">,</span> <span class="n">Integer</span><span class="p">,</span> <span class="n">ForeignKey</span><span class="p">(</span><span class="s1">&apos;right.id&apos;</span><span class="p">))</span>
<span class="p">)</span>

<span class="k">class</span> <span class="nc">Parent</span><span class="p">(</span><span class="n">Base</span><span class="p">):</span>
    <span class="n">__tablename__</span> <span class="o">=</span> <span class="s1">&apos;left&apos;</span>
    <span class="nb">id</span> <span class="o">=</span> <span class="n">Column</span><span class="p">(</span><span class="n">Integer</span><span class="p">,</span> <span class="n">primary_key</span><span class="o">=</span><span class="bp">True</span><span class="p">)</span>
    <span class="n">children</span> <span class="o">=</span> <span class="n">relationship</span><span class="p">(</span><span class="s2">&quot;Child&quot;</span><span class="p">,</span>
                    <span class="n">secondary</span><span class="o">=</span><span class="n">association_table</span><span class="p">,</span>
                    <span class="n">backref</span><span class="o">=</span><span class="s2">&quot;parents&quot;</span><span class="p">)</span>

<span class="k">class</span> <span class="nc">Child</span><span class="p">(</span><span class="n">Base</span><span class="p">):</span>
    <span class="n">__tablename__</span> <span class="o">=</span> <span class="s1">&apos;right&apos;</span>
    <span class="nb">id</span> <span class="o">=</span> <span class="n">Column</span><span class="p">(</span><span class="n">Integer</span><span class="p">,</span> <span class="n">primary_key</span><span class="o">=</span><span class="bp">True</span><span class="p">)</span></pre></div></div><p><span class="yiyi-st" id="yiyi-76"><a class="reference internal" href="relationship_api.html#sqlalchemy.orm.relationship" title="sqlalchemy.orm.relationship"><code class="xref py py-func docutils literal"><span class="pre">relationship()</span></code></a>&#x7684;<a class="reference internal" href="relationship_api.html#sqlalchemy.orm.relationship.params.secondary" title="sqlalchemy.orm.relationship"><code class="xref py py-paramref docutils literal"><span class="pre">secondary</span></code></a>&#x53C2;&#x6570;&#x4E5F;&#x63A5;&#x53D7;&#x4E00;&#x4E2A;&#x53EF;&#x8FD4;&#x56DE;&#x6700;&#x7EC8;&#x53C2;&#x6570;&#x7684;callable&#xFF0C;&#x53EA;&#x6709;&#x5728;&#x9996;&#x6B21;&#x4F7F;&#x7528;mappers&#x65F6;&#x624D;&#x4F1A;&#x8BA1;&#x7B97;&#x3002;.</span><span class="yiyi-st" id="yiyi-77">&#x4F7F;&#x7528;&#x5B83;&#xFF0C;&#x7A0D;&#x540E;&#x6211;&#x4EEC;&#x53EF;&#x4EE5;&#x5B9A;&#x4E49;<code class="docutils literal"><span class="pre">association_table</span></code>&#xFF0C;&#x53EA;&#x8981;&#x5728;&#x6240;&#x6709;&#x6A21;&#x5757;&#x521D;&#x59CB;&#x5316;&#x5B8C;&#x6210;&#x540E;&#x4FBF;&#x53EF;&#x8C03;&#x7528;&#x3002;</span></p><div class="highlight-python"><div class="highlight"><pre><span></span><span class="k">class</span> <span class="nc">Parent</span><span class="p">(</span><span class="n">Base</span><span class="p">):</span>
    <span class="n">__tablename__</span> <span class="o">=</span> <span class="s1">&apos;left&apos;</span>
    <span class="nb">id</span> <span class="o">=</span> <span class="n">Column</span><span class="p">(</span><span class="n">Integer</span><span class="p">,</span> <span class="n">primary_key</span><span class="o">=</span><span class="bp">True</span><span class="p">)</span>
    <span class="n">children</span> <span class="o">=</span> <span class="n">relationship</span><span class="p">(</span><span class="s2">&quot;Child&quot;</span><span class="p">,</span>
                    <span class="n">secondary</span><span class="o">=</span><span class="k">lambda</span><span class="p">:</span> <span class="n">association_table</span><span class="p">,</span>
                    <span class="n">backref</span><span class="o">=</span><span class="s2">&quot;parents&quot;</span><span class="p">)</span></pre></div></div><p><span class="yiyi-st" id="yiyi-78">&#x4F7F;&#x7528;&#x58F0;&#x660E;&#x5F0F;&#x6269;&#x5C55;&#xFF0C;&#x4F20;&#x7EDF;&#x7684;&#x201C;&#x8868;&#x7684;&#x5B57;&#x7B26;&#x4E32;&#x540D;&#x79F0;&#x201D;&#x4E5F;&#x88AB;&#x63A5;&#x53D7;&#xFF0C;&#x4E0E;&#x5B58;&#x50A8;&#x5728;<code class="docutils literal"><span class="pre">Base.metadata.tables</span></code>&#x4E2D;&#x7684;&#x8868;&#x7684;&#x540D;&#x79F0;&#x5339;&#x914D;&#xFF1A;</span></p><div class="highlight-python"><div class="highlight"><pre><span></span><span class="k">class</span> <span class="nc">Parent</span><span class="p">(</span><span class="n">Base</span><span class="p">):</span>
    <span class="n">__tablename__</span> <span class="o">=</span> <span class="s1">&apos;left&apos;</span>
    <span class="nb">id</span> <span class="o">=</span> <span class="n">Column</span><span class="p">(</span><span class="n">Integer</span><span class="p">,</span> <span class="n">primary_key</span><span class="o">=</span><span class="bp">True</span><span class="p">)</span>
    <span class="n">children</span> <span class="o">=</span> <span class="n">relationship</span><span class="p">(</span><span class="s2">&quot;Child&quot;</span><span class="p">,</span>
                    <span class="n">secondary</span><span class="o">=</span><span class="s2">&quot;association&quot;</span><span class="p">,</span>
                    <span class="n">backref</span><span class="o">=</span><span class="s2">&quot;parents&quot;</span><span class="p">)</span></pre></div></div><div class="section" id="deleting-rows-from-the-many-to-many-table"><h3><span class="yiyi-st" id="yiyi-79">&#x4ECE;&#x591A;&#x5BF9;&#x591A;&#x8868;&#x4E2D;&#x5220;&#x9664;&#x884C;<a class="headerlink" href="#deleting-rows-from-the-many-to-many-table" title="Permalink to this headline">&#xB6;</a></span></h3><p><span class="yiyi-st" id="yiyi-80">&#x5BF9;&#x4E8E;<a class="reference internal" href="relationship_api.html#sqlalchemy.orm.relationship" title="sqlalchemy.orm.relationship"><code class="xref py py-func docutils literal"><span class="pre">relationship()</span></code></a>&#x7684;<a class="reference internal" href="relationship_api.html#sqlalchemy.orm.relationship.params.secondary" title="sqlalchemy.orm.relationship"><code class="xref py py-paramref docutils literal"><span class="pre">secondary</span></code></a>&#x53C2;&#x6570;&#x552F;&#x4E00;&#x7684;&#x884C;&#x4E3A;&#x662F;&#x6307;&#x5B9A;&#x8FD9;&#x91CC;&#x7684;<a class="reference internal" href="core_metadata.html#sqlalchemy.schema.Table" title="sqlalchemy.schema.Table"><code class="xref py py-class docutils literal"><span class="pre">Table</span></code></a>&#x81EA;&#x52A8;&#x53D7;&#x9650;&#x4E8E;INSERT&#x548C;DELETE&#x8BED;&#x53E5;&#xFF0C;&#x56E0;&#x4E3A;&#x5BF9;&#x8C61;&#x4ECE;&#x96C6;&#x5408;&#x4E2D;&#x6DFB;&#x52A0;&#x6216;&#x5220;&#x9664;&#x3002;</span><span class="yiyi-st" id="yiyi-81">&#x8FD9;&#x91CC;<strong>&#x4E0D;&#x9700;&#x8981;&#x624B;&#x52A8;&#x4ECE;&#x6B64;&#x8868;&#x4E2D;&#x5220;&#x9664;</strong>&#x3002;</span><span class="yiyi-st" id="yiyi-82">&#x4ECE;&#x96C6;&#x5408;&#x4E2D;&#x5220;&#x9664;&#x8BB0;&#x5F55;&#x7684;&#x64CD;&#x4F5C;&#x5C06;&#x5F71;&#x54CD;&#x6B63;&#x5728;&#x5220;&#x9664;&#x7684;&#x884C;&#xFF1A;</span></p><div class="highlight-python"><div class="highlight"><pre><span></span><span class="c1"># row will be deleted from the &quot;secondary&quot; table</span>
<span class="c1"># automatically</span>
<span class="n">myparent</span><span class="o">.</span><span class="n">children</span><span class="o">.</span><span class="n">remove</span><span class="p">(</span><span class="n">somechild</span><span class="p">)</span></pre></div></div><p><span class="yiyi-st" id="yiyi-83">&#x7ECF;&#x5E38;&#x51FA;&#x73B0;&#x7684;&#x4E00;&#x4E2A;&#x95EE;&#x9898;&#x662F;&#xFF0C;&#x5F53;&#x5B50;&#x5BF9;&#x8C61;&#x76F4;&#x63A5;&#x4F20;&#x9012;&#x7ED9;<a class="reference internal" href="session_api.html#sqlalchemy.orm.session.Session.delete" title="sqlalchemy.orm.session.Session.delete"><code class="xref py py-meth docutils literal"><span class="pre">Session.delete()</span></code></a>&#x65F6;&#xFF0C;&#x201C;secondary&#x201D;&#x8868;&#x4E2D;&#x7684;&#x884C;&#x662F;&#x5982;&#x4F55;&#x5220;&#x9664;&#x7684;&#xFF1A;</span></p><div class="highlight-python"><div class="highlight"><pre><span></span><span class="n">session</span><span class="o">.</span><span class="n">delete</span><span class="p">(</span><span class="n">somechild</span><span class="p">)</span></pre></div></div><p><span class="yiyi-st" id="yiyi-84">&#x8FD9;&#x91CC;&#x6709;&#x51E0;&#x79CD;&#x53EF;&#x80FD;&#x6027;&#xFF1A;</span></p><ul class="simple"><li><span class="yiyi-st" id="yiyi-85">&#x5982;&#x679C;&#x4ECE;<code class="docutils literal"><span class="pre">parent</span></code>&#x5230;<code class="docutils literal"><span class="pre">child</span></code>&#x6709;<a class="reference internal" href="relationship_api.html#sqlalchemy.orm.relationship" title="sqlalchemy.orm.relationship"><code class="xref py py-func docutils literal"><span class="pre">relationship()</span></code></a>&#xFF0C;&#x4F46;<strong>&#x6CA1;&#x6709;</strong>&#x53CD;&#x5411;&#x5173;&#x7CFB;&#x5BF9;&#x4E8E;&#x8FDE;&#x63A5;&#x7279;&#x5B9A;&#x7684;<code class="docutils literal"><span class="pre">Child</span></code>&#x548C;&#x6BCF;&#x4E2A;<code class="docutils literal"><span class="pre">Parent</span></code>&#xFF0C;SQLAlchemy&#x5C06;&#x4E0D;&#x4F1A;&#x6709;&#x4EFB;&#x4F55;&#x610F;&#x8BC6;&#x5230;&#x5728;&#x5220;&#x9664;&#x6B64;&#x7279;&#x5B9A;<code class="docutils literal"><span class="pre">Child</span></code>&#x5BF9;&#x8C61;&#x65F6;&#xFF0C;&#x5B83;&#x9700;&#x8981;&#x7EF4;&#x62A4;&#x201C;secondary&#x201D;&#x8868;&#x683C;&#xFF0C;&#x5C06;&#x5176;&#x94FE;&#x63A5;&#x5230;<code class="docutils literal"><span class="pre">Parent</span></code>&#x3002;</span><span class="yiyi-st" id="yiyi-86">&#x5C06;&#x4E0D;&#x4F1A;&#x5220;&#x9664;&#x201C;secondary&#x201D;&#x8868;</span></li><li><span class="yiyi-st" id="yiyi-87">&#x5982;&#x679C;&#x5B58;&#x5728;&#x5C06;&#x7279;&#x5B9A; <code class="docutils literal"><span class="pre">Child</span></code>&#x94FE;&#x63A5;&#x5230;&#x6BCF;&#x4E2A;<code class="docutils literal"><span class="pre">Parent</span></code>&#x7684;&#x5173;&#x7CFB;&#xFF0C;&#x5047;&#x8BBE;&#x5B83;&#x88AB;&#x79F0;&#x4E3A;<code class="docutils literal"><span class="pre">Child.parents</span></code>&#xFF0C;SQLAlchemy&#x5C06;&#x9ED8;&#x8BA4;&#x52A0;&#x8F7D;<code class="docutils literal"><span class="pre">Child.parents</span></code>&#x96C6;&#x5408;&#x4EE5;&#x5B9A;&#x4F4D;&#x6240;&#x6709;<code class="docutils literal"><span class="pre">Parent</span></code>&#x5BF9;&#x8C61;&#xFF0C;&#x5E76;&#x4ECE;&#x5EFA;&#x7ACB;&#x6B64;&#x94FE;&#x63A5;&#x7684;&#x201C;secondary&#x201D;&#x8868;&#x4E2D;&#x5220;&#x9664;&#x6BCF;&#x4E00;&#x884C;&#x3002;</span><span class="yiyi-st" id="yiyi-88">&#x6CE8;&#x610F;&#xFF0C;&#x8FD9;&#x79CD;&#x5173;&#x7CFB;&#x4E0D;&#x9700;&#x8981;&#x662F;&#x6B63;&#x5F0F;&#x7684;&#x3002; SQLAlchemy&#x4E25;&#x683C;&#x5730;&#x5173;&#x6CE8;&#x4E0E;&#x6B63;&#x5728;&#x5220;&#x9664;&#x7684;<code class="docutils literal"><span class="pre">Child</span></code>&#x5BF9;&#x8C61;&#x76F8;&#x5173;&#x8054;&#x7684;&#x6BCF;&#x4E2A;<a class="reference internal" href="relationship_api.html#sqlalchemy.orm.relationship" title="sqlalchemy.orm.relationship"><code class="xref py py-func docutils literal"><span class="pre">&#x5173;&#x7CFB;()</span></code></a>&#x3002;</span></li><li><span class="yiyi-st" id="yiyi-89">&#x8FD9;&#x91CC;&#x66F4;&#x9AD8;&#x6027;&#x80FD;&#x7684;&#x9009;&#x62E9;&#x662F;&#x4F7F;&#x7528;ON DELETE CASCADE&#x6307;&#x4EE4;&#x4E0E;&#x6570;&#x636E;&#x5E93;&#x4F7F;&#x7528;&#x7684;&#x5916;&#x952E;&#x3002;</span><span class="yiyi-st" id="yiyi-90">&#x5047;&#x8BBE;&#x6570;&#x636E;&#x5E93;&#x652F;&#x6301;&#x6B64;&#x529F;&#x80FD;&#xFF0C;&#x5219;&#x53EF;&#x4EE5;&#x4F7F;&#x6570;&#x636E;&#x5E93;&#x672C;&#x8EAB;&#x81EA;&#x52A8;&#x5220;&#x9664;&#x201C;&#x8F85;&#x52A9;&#x201D;&#x8868;&#x4E2D;&#x7684;&#x884C;&#xFF0C;&#x4F5C;&#x4E3A;&#x5F15;&#x7528;&#x201C;child&#x201D;&#x4E2D;&#x7684;&#x884C;&#x5C06;&#x88AB;&#x5220;&#x9664;&#x3002;</span><span class="yiyi-st" id="yiyi-91">&#x53EF;&#x4EE5;&#x6307;&#x793A;SQLAlchemy&#x4F7F;&#x7528;<a class="reference internal" href="relationship_api.html#sqlalchemy.orm.relationship" title="sqlalchemy.orm.relationship"><code class="xref py py-func docutils literal"><span class="pre">relationship()</span></code></a>&#x4E0A;&#x7684;<a class="reference internal" href="relationship_api.html#sqlalchemy.orm.relationship.params.passive_deletes" title="sqlalchemy.orm.relationship"><code class="xref py py-paramref docutils literal"><span class="pre">passive_deletes</span></code></a>&#x6307;&#x4EE4;&#xFF0C;&#x5728;<code class="docutils literal"><span class="pre">Child.parents</span></code>&#x96C6;&#x5408;&#x4E2D;&#x653E;&#x5F03;&#x4E3B;&#x52A8;&#x52A0;&#x8F7D;&#xFF1B;&#x6709;&#x5173;&#x8BE6;&#x7EC6;&#x4FE1;&#x606F;&#xFF0C;&#x8BF7;&#x53C2;&#x9605;<a class="reference internal" href="collections.html#passive-deletes"><span>&#x4F7F;&#x7528;&#x88AB;&#x52A8;&#x5220;&#x9664;</span></a>&#x3002;</span></li></ul><p><span class="yiyi-st" id="yiyi-92">&#x518D;&#x6B21;&#x6CE8;&#x610F;&#xFF0C;&#x8FD9;&#x4E9B;&#x884C;&#x4E3A;&#x4EC5;<em></em>&#x4E0E;<a class="reference internal" href="relationship_api.html#sqlalchemy.orm.relationship" title="sqlalchemy.orm.relationship"><code class="xref py py-func docutils literal"><span class="pre">relationship()</span></code></a>&#x4E2D;&#x4F7F;&#x7528;&#x7684;<a class="reference internal" href="relationship_api.html#sqlalchemy.orm.relationship.params.secondary" title="sqlalchemy.orm.relationship"><code class="xref py py-paramref docutils literal"><span class="pre">secondary</span></code></a>&#x9009;&#x9879;&#x76F8;&#x5173;&#x3002;</span><span class="yiyi-st" id="yiyi-93">&#x5982;&#x679C;&#x5904;&#x7406;&#x663E;&#x5F0F;&#x5730;&#x6620;&#x5C04;&#x4E14;&#x5728;&#x76F8;&#x5173;<a class="reference internal" href="relationship_api.html#sqlalchemy.orm.relationship" title="sqlalchemy.orm.relationship"><code class="xref py py-func docutils literal"><span class="pre">relationship()</span></code></a>&#x7684;<a class="reference internal" href="relationship_api.html#sqlalchemy.orm.relationship.params.secondary" title="sqlalchemy.orm.relationship"><code class="xref py py-paramref docutils literal"><span class="pre">secondary</span></code></a> &#x9009;&#x9879;&#x4E2D; <em>&#x4E0D;</em>&#x5B58;&#x5728;&#x7684;&#x5173;&#x8054;&#x8868;&#xFF0C;&#x53EF;&#x4EE5;&#x4F7F;&#x7528;&#x7EA7;&#x8054;&#x89C4;&#x5219;&#x6765;&#x81EA;&#x52A8;&#x5220;&#x9664;&#x5BF9;&#x6B63;&#x5728;&#x5220;&#x9664;&#x7684;&#x76F8;&#x5173;&#x5B9E;&#x4F53;&#x4F5C;&#x51FA;&#x53CD;&#x5E94;&#x7684;&#x5B9E;&#x4F53; - &#x6709;&#x5173;&#x6B64;&#x529F;&#x80FD;&#x7684;&#x4FE1;&#x606F;&#xFF0C;&#x8BF7;&#x53C2;&#x9605;<a class="reference internal" href="cascades.html#unitofwork-cascades"><span>Cascades</span></a>&#x3002;</span></p></div></div><div class="section" id="association-object"><h2><span class="yiyi-st" id="yiyi-94">&#x5173;&#x8054;&#x5BF9;&#x8C61;<a class="headerlink" href="#association-object" title="Permalink to this headline">&#xB6;</a></span></h2><p><span class="yiyi-st" id="yiyi-95">&#x5173;&#x8054;&#x5BF9;&#x8C61;&#x6A21;&#x5F0F;&#x662F;&#x591A;&#x5BF9;&#x591A;&#x7684;&#x53D8;&#x4F53;&#xFF1A;&#x5F53;&#x5173;&#x8054;&#x8868;&#x5305;&#x542B;&#x9664;&#x5DE6;&#x8868;&#x548C;&#x53F3;&#x8868;&#x5916;&#x952E;&#x4E4B;&#x5916;&#x7684;&#x5176;&#x4ED6;&#x5217;&#x65F6;&#x4F7F;&#x7528;&#x3002;</span><span class="yiyi-st" id="yiyi-96">&#x800C;&#x4E0D;&#x662F;&#x4F7F;&#x7528;<a class="reference internal" href="relationship_api.html#sqlalchemy.orm.relationship.params.secondary" title="sqlalchemy.orm.relationship"><code class="xref py py-paramref docutils literal"><span class="pre">secondary</span></code></a>&#x53C2;&#x6570;&#xFF0C;&#x5C06;&#x4E00;&#x4E2A;&#x65B0;&#x7C7B;&#x76F4;&#x63A5;&#x6620;&#x5C04;&#x5230;&#x5173;&#x8054;&#x8868;&#x3002;</span><span class="yiyi-st" id="yiyi-97">&#x5173;&#x7CFB;&#x7684;&#x5DE6;&#x4FA7;&#x901A;&#x8FC7;&#x4E00;&#x5BF9;&#x591A;&#x5F15;&#x7528;&#x5173;&#x8054;&#x5BF9;&#x8C61;&#xFF0C;&#x5173;&#x8054;&#x7C7B;&#x901A;&#x8FC7;&#x591A;&#x5BF9;&#x4E00;&#x5F15;&#x7528;&#x53F3;&#x4FA7;&#x3002;</span><span class="yiyi-st" id="yiyi-98">&#x4E0B;&#x9762;&#x6211;&#x4EEC;&#x793A;&#x51FA;&#x6620;&#x5C04;&#x5230;<code class="docutils literal"><span class="pre">Association</span></code>&#x7C7B;&#x7684;&#x5173;&#x8054;&#x8868;&#xFF0C;&#x8FD9;&#x5305;&#x62EC;&#x88AB;&#x79F0;&#x4E3A;<code class="docutils literal"><span class="pre">extra_data</span></code>&#x7684;&#x5217;&#xFF0C;&#x5B83;&#x662F;&#x4E00;&#x4E2A;&#x50A8;&#x5B58;&#x5728;&#x76F8;&#x4E92;&#x5173;&#x8054;<code class="docutils literal"><span class="pre">Parent</span></code>&#x548C; <code class="docutils literal"><span class="pre">Child</span></code>&#x4E2D;&#x7684;string&#x503C;&#x3002;</span></p><div class="highlight-python"><div class="highlight"><pre><span></span><span class="k">class</span> <span class="nc">Association</span><span class="p">(</span><span class="n">Base</span><span class="p">):</span>
    <span class="n">__tablename__</span> <span class="o">=</span> <span class="s1">&apos;association&apos;</span>
    <span class="n">left_id</span> <span class="o">=</span> <span class="n">Column</span><span class="p">(</span><span class="n">Integer</span><span class="p">,</span> <span class="n">ForeignKey</span><span class="p">(</span><span class="s1">&apos;left.id&apos;</span><span class="p">),</span> <span class="n">primary_key</span><span class="o">=</span><span class="bp">True</span><span class="p">)</span>
    <span class="n">right_id</span> <span class="o">=</span> <span class="n">Column</span><span class="p">(</span><span class="n">Integer</span><span class="p">,</span> <span class="n">ForeignKey</span><span class="p">(</span><span class="s1">&apos;right.id&apos;</span><span class="p">),</span> <span class="n">primary_key</span><span class="o">=</span><span class="bp">True</span><span class="p">)</span>
    <span class="n">extra_data</span> <span class="o">=</span> <span class="n">Column</span><span class="p">(</span><span class="n">String</span><span class="p">(</span><span class="mi">50</span><span class="p">))</span>
    <span class="n">child</span> <span class="o">=</span> <span class="n">relationship</span><span class="p">(</span><span class="s2">&quot;Child&quot;</span><span class="p">)</span>

<span class="k">class</span> <span class="nc">Parent</span><span class="p">(</span><span class="n">Base</span><span class="p">):</span>
    <span class="n">__tablename__</span> <span class="o">=</span> <span class="s1">&apos;left&apos;</span>
    <span class="nb">id</span> <span class="o">=</span> <span class="n">Column</span><span class="p">(</span><span class="n">Integer</span><span class="p">,</span> <span class="n">primary_key</span><span class="o">=</span><span class="bp">True</span><span class="p">)</span>
    <span class="n">children</span> <span class="o">=</span> <span class="n">relationship</span><span class="p">(</span><span class="s2">&quot;Association&quot;</span><span class="p">)</span>

<span class="k">class</span> <span class="nc">Child</span><span class="p">(</span><span class="n">Base</span><span class="p">):</span>
    <span class="n">__tablename__</span> <span class="o">=</span> <span class="s1">&apos;right&apos;</span>
    <span class="nb">id</span> <span class="o">=</span> <span class="n">Column</span><span class="p">(</span><span class="n">Integer</span><span class="p">,</span> <span class="n">primary_key</span><span class="o">=</span><span class="bp">True</span><span class="p">)</span></pre></div></div><p><span class="yiyi-st" id="yiyi-99">&#x4E00;&#x5982;&#x65E2;&#x5F80;&#xFF0C;&#x53CC;&#x5411;&#x5173;&#x7CFB;&#x4F7F;&#x7528;<a class="reference internal" href="relationship_api.html#sqlalchemy.orm.relationship.params.back_populates" title="sqlalchemy.orm.relationship"><code class="xref py py-paramref docutils literal"><span class="pre">relationship.back_populates</span></code></a>&#x6216;<a class="reference internal" href="relationship_api.html#sqlalchemy.orm.relationship.params.backref" title="sqlalchemy.orm.relationship"><code class="xref py py-paramref docutils literal"><span class="pre">relationship.backref</span></code></a>&#xFF1A;</span></p><div class="highlight-python"><div class="highlight"><pre><span></span><span class="k">class</span> <span class="nc">Association</span><span class="p">(</span><span class="n">Base</span><span class="p">):</span>
    <span class="n">__tablename__</span> <span class="o">=</span> <span class="s1">&apos;association&apos;</span>
    <span class="n">left_id</span> <span class="o">=</span> <span class="n">Column</span><span class="p">(</span><span class="n">Integer</span><span class="p">,</span> <span class="n">ForeignKey</span><span class="p">(</span><span class="s1">&apos;left.id&apos;</span><span class="p">),</span> <span class="n">primary_key</span><span class="o">=</span><span class="bp">True</span><span class="p">)</span>
    <span class="n">right_id</span> <span class="o">=</span> <span class="n">Column</span><span class="p">(</span><span class="n">Integer</span><span class="p">,</span> <span class="n">ForeignKey</span><span class="p">(</span><span class="s1">&apos;right.id&apos;</span><span class="p">),</span> <span class="n">primary_key</span><span class="o">=</span><span class="bp">True</span><span class="p">)</span>
    <span class="n">extra_data</span> <span class="o">=</span> <span class="n">Column</span><span class="p">(</span><span class="n">String</span><span class="p">(</span><span class="mi">50</span><span class="p">))</span>
    <span class="n">child</span> <span class="o">=</span> <span class="n">relationship</span><span class="p">(</span><span class="s2">&quot;Child&quot;</span><span class="p">,</span> <span class="n">back_populates</span><span class="o">=</span><span class="s2">&quot;parents&quot;</span><span class="p">)</span>
    <span class="n">parent</span> <span class="o">=</span> <span class="n">relationship</span><span class="p">(</span><span class="s2">&quot;Parent&quot;</span><span class="p">,</span> <span class="n">back_populates</span><span class="o">=</span><span class="s2">&quot;children&quot;</span><span class="p">)</span>

<span class="k">class</span> <span class="nc">Parent</span><span class="p">(</span><span class="n">Base</span><span class="p">):</span>
    <span class="n">__tablename__</span> <span class="o">=</span> <span class="s1">&apos;left&apos;</span>
    <span class="nb">id</span> <span class="o">=</span> <span class="n">Column</span><span class="p">(</span><span class="n">Integer</span><span class="p">,</span> <span class="n">primary_key</span><span class="o">=</span><span class="bp">True</span><span class="p">)</span>
    <span class="n">children</span> <span class="o">=</span> <span class="n">relationship</span><span class="p">(</span><span class="s2">&quot;Association&quot;</span><span class="p">,</span> <span class="n">back_populates</span><span class="o">=</span><span class="s2">&quot;parent&quot;</span><span class="p">)</span>

<span class="k">class</span> <span class="nc">Child</span><span class="p">(</span><span class="n">Base</span><span class="p">):</span>
    <span class="n">__tablename__</span> <span class="o">=</span> <span class="s1">&apos;right&apos;</span>
    <span class="nb">id</span> <span class="o">=</span> <span class="n">Column</span><span class="p">(</span><span class="n">Integer</span><span class="p">,</span> <span class="n">primary_key</span><span class="o">=</span><span class="bp">True</span><span class="p">)</span>
    <span class="n">parents</span> <span class="o">=</span> <span class="n">relationship</span><span class="p">(</span><span class="s2">&quot;Association&quot;</span><span class="p">,</span> <span class="n">back_populates</span><span class="o">=</span><span class="s2">&quot;child&quot;</span><span class="p">)</span></pre></div></div><p><span class="yiyi-st" id="yiyi-100">&#x4EE5;&#x76F4;&#x63A5;&#x5F62;&#x5F0F;&#x4F7F;&#x7528;&#x5173;&#x8054;&#x6A21;&#x5F0F;&#x8981;&#x6C42;&#x5B50;&#x5BF9;&#x8C61;&#x5728;&#x5173;&#x8054;&#x5230;&#x5173;&#x8054;&#x5B9E;&#x4F8B;&#x4E4B;&#x524D;&#x9644;&#x52A0;&#x5230;&#x7236;&#x5BF9;&#x8C61;&#xFF1B;&#x7C7B;&#x4F3C;&#x5730;&#xFF0C;&#x4ECE;parent&#x5230;child&#x7684;&#x8BBF;&#x95EE;&#x901A;&#x8FC7;&#x5173;&#x8054;&#x5BF9;&#x8C61;&#xFF1A;</span></p><div class="highlight-python"><div class="highlight"><pre><span></span><span class="c1"># create parent, append a child via association</span>
<span class="n">p</span> <span class="o">=</span> <span class="n">Parent</span><span class="p">()</span>
<span class="n">a</span> <span class="o">=</span> <span class="n">Association</span><span class="p">(</span><span class="n">extra_data</span><span class="o">=</span><span class="s2">&quot;some data&quot;</span><span class="p">)</span>
<span class="n">a</span><span class="o">.</span><span class="n">child</span> <span class="o">=</span> <span class="n">Child</span><span class="p">()</span>
<span class="n">p</span><span class="o">.</span><span class="n">children</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="n">a</span><span class="p">)</span>

<span class="c1"># iterate through child objects via association, including association</span>
<span class="c1"># attributes</span>
<span class="k">for</span> <span class="n">assoc</span> <span class="ow">in</span> <span class="n">p</span><span class="o">.</span><span class="n">children</span><span class="p">:</span>
    <span class="k">print</span><span class="p">(</span><span class="n">assoc</span><span class="o">.</span><span class="n">extra_data</span><span class="p">)</span>
    <span class="k">print</span><span class="p">(</span><span class="n">assoc</span><span class="o">.</span><span class="n">child</span><span class="p">)</span></pre></div></div><p><span class="yiyi-st" id="yiyi-101">&#x4E3A;&#x4E86;&#x589E;&#x5F3A;&#x5173;&#x8054;&#x5BF9;&#x8C61;&#x6A21;&#x5F0F;&#xFF0C;&#x4EE5;&#x4FBF;&#x76F4;&#x63A5;&#x8BBF;&#x95EE;<code class="docutils literal"><span class="pre">Association</span></code>&#x5BF9;&#x8C61;&#x662F;&#x53EF;&#x9009;&#x7684;&#xFF0C;SQLAlchemy&#x63D0;&#x4F9B;<a class="reference internal" href="extensions_associationproxy.html"><span>&#xFF08;Association Proxy&#xFF09;&#x5173;&#x8054;&#x4EE3;&#x7406;</span></a>&#x6269;&#x5C55;&#x3002;</span><span class="yiyi-st" id="yiyi-102">&#x6B64;&#x6269;&#x5C55;&#x5141;&#x8BB8;&#x914D;&#x7F6E;&#x5C5E;&#x6027;&#xFF0C;&#x8FD9;&#x4E9B;&#x5C5E;&#x6027;&#x5C06;&#x901A;&#x8FC7;&#x5355;&#x4E2A;&#x8BBF;&#x95EE;&#x8BBF;&#x95EE;&#x4E24;&#x4E2A;&#x201C;hops&#x201D;&#xFF0C;&#x4E00;&#x4E2A;hop&#x201D;&#x5230;&#x5173;&#x8054;&#x7684;&#x5BF9;&#x8C61;&#xFF0C;&#x7B2C;&#x4E8C;&#x4E2A;&#x8BBF;&#x95EE;&#x76EE;&#x6807;&#x5C5E;&#x6027;&#x3002;</span></p><div class="admonition warning"><p class="first admonition-title"><span class="yiyi-st" id="yiyi-103">&#x8B66;&#x544A;</span></p><p><span class="yiyi-st" id="yiyi-104">&#x5173;&#x8054;&#x5BF9;&#x8C61;&#x6A21;&#x5F0F;<strong>&#x4E0D;&#x4EE5;&#x5C06;&#x5173;&#x8054;&#x8868;&#x6620;&#x5C04;&#x4E3A; &#x201C;secondary&#x201D;</strong>&#x7684;&#x5355;&#x72EC;&#x5173;&#x7CFB;&#x6765;&#x534F;&#x8C03;&#x53D8;&#x5316;&#x3002;</span></p><p><span class="yiyi-st" id="yiyi-105">&#x4EE5;&#x4E0B;&#xFF0C;&#x5BF9;<code class="docutils literal"><span class="pre">Parent.children</span></code>&#x6240;&#x505A;&#x7684;&#x66F4;&#x6539;&#x4E0D;&#x4F1A;&#x4E0E;&#x5728;Python&#x4E2D;&#x5BF9;<code class="docutils literal"><span class="pre">Parent.child_associations</span></code>&#x6216;<code class="docutils literal"><span class="pre">Child.parent_associations</span></code>&#x6240;&#x505A;&#x7684;&#x66F4;&#x6539;&#x534F;&#x8C03;&#xFF1B;&#x800C;&#x6240;&#x6709;&#x8FD9;&#x4E9B;&#x5173;&#x7CFB;&#x5C06;&#x81EA;&#x5DF1;&#x7EE7;&#x7EED;&#x6B63;&#x5E38;&#x5DE5;&#x4F5C;&#xFF0C;&#x5728;<a class="reference internal" href="session_api.html#sqlalchemy.orm.session.Session" title="sqlalchemy.orm.session.Session"><code class="xref py py-class docutils literal"><span class="pre">&#x4F1A;&#x8BDD;</span></code></a>&#x8FC7;&#x671F;&#x4E4B;&#x524D;&#xFF0C;&#x5728;&#x4E00;&#x4E2A;&#x4E0A;&#x7684;&#x66F4;&#x6539;&#x4E0D;&#x4F1A;&#x663E;&#x793A;&#x5728;&#x53E6;&#x4E00;&#x4E2A;&#x4E2D;&#xFF0C;&#x901A;&#x5E38;&#x53D1;&#x751F;&#x5728;<a class="reference internal" href="session_api.html#sqlalchemy.orm.session.Session.commit" title="sqlalchemy.orm.session.Session.commit"><code class="xref py py-meth docutils literal"><span class="pre">Session.commit()</span></code></a>:</span></p><div class="highlight-python"><div class="highlight"><pre><span></span><span class="k">class</span> <span class="nc">Association</span><span class="p">(</span><span class="n">Base</span><span class="p">):</span>
    <span class="n">__tablename__</span> <span class="o">=</span> <span class="s1">&apos;association&apos;</span>

    <span class="n">left_id</span> <span class="o">=</span> <span class="n">Column</span><span class="p">(</span><span class="n">Integer</span><span class="p">,</span> <span class="n">ForeignKey</span><span class="p">(</span><span class="s1">&apos;left.id&apos;</span><span class="p">),</span> <span class="n">primary_key</span><span class="o">=</span><span class="bp">True</span><span class="p">)</span>
    <span class="n">right_id</span> <span class="o">=</span> <span class="n">Column</span><span class="p">(</span><span class="n">Integer</span><span class="p">,</span> <span class="n">ForeignKey</span><span class="p">(</span><span class="s1">&apos;right.id&apos;</span><span class="p">),</span> <span class="n">primary_key</span><span class="o">=</span><span class="bp">True</span><span class="p">)</span>
    <span class="n">extra_data</span> <span class="o">=</span> <span class="n">Column</span><span class="p">(</span><span class="n">String</span><span class="p">(</span><span class="mi">50</span><span class="p">))</span>

    <span class="n">child</span> <span class="o">=</span> <span class="n">relationship</span><span class="p">(</span><span class="s2">&quot;Child&quot;</span><span class="p">,</span> <span class="n">back_populates</span><span class="o">=</span><span class="s2">&quot;parent_associations&quot;</span><span class="p">)</span>
    <span class="n">parent</span> <span class="o">=</span> <span class="n">relationship</span><span class="p">(</span><span class="s2">&quot;Parent&quot;</span><span class="p">,</span> <span class="n">back_populates</span><span class="o">=</span><span class="s2">&quot;child_associations&quot;</span><span class="p">)</span>

<span class="k">class</span> <span class="nc">Parent</span><span class="p">(</span><span class="n">Base</span><span class="p">):</span>
    <span class="n">__tablename__</span> <span class="o">=</span> <span class="s1">&apos;left&apos;</span>
    <span class="nb">id</span> <span class="o">=</span> <span class="n">Column</span><span class="p">(</span><span class="n">Integer</span><span class="p">,</span> <span class="n">primary_key</span><span class="o">=</span><span class="bp">True</span><span class="p">)</span>

    <span class="n">children</span> <span class="o">=</span> <span class="n">relationship</span><span class="p">(</span><span class="s2">&quot;Child&quot;</span><span class="p">,</span> <span class="n">secondary</span><span class="o">=</span><span class="s2">&quot;association&quot;</span><span class="p">)</span>

<span class="k">class</span> <span class="nc">Child</span><span class="p">(</span><span class="n">Base</span><span class="p">):</span>
    <span class="n">__tablename__</span> <span class="o">=</span> <span class="s1">&apos;right&apos;</span>
    <span class="nb">id</span> <span class="o">=</span> <span class="n">Column</span><span class="p">(</span><span class="n">Integer</span><span class="p">,</span> <span class="n">primary_key</span><span class="o">=</span><span class="bp">True</span><span class="p">)</span></pre></div></div><p><span class="yiyi-st" id="yiyi-106">&#x6B64;&#x5916;&#xFF0C;&#x6B63;&#x5982;&#x4E00;&#x4E2A;&#x5173;&#x7CFB;&#x7684;&#x66F4;&#x6539;&#x4E0D;&#x4F1A;&#x81EA;&#x52A8;&#x53CD;&#x6620;&#x5728;&#x5176;&#x4ED6;&#x5173;&#x7CFB;&#x4E2D;&#x4E00;&#x6837;&#xFF0C;&#x5C06;&#x76F8;&#x540C;&#x7684;&#x6570;&#x636E;&#x5199;&#x5165;&#x8FD9;&#x4E24;&#x4E2A;&#x5173;&#x7CFB;&#x4E5F;&#x4F1A;&#x5BFC;&#x81F4;&#x51B2;&#x7A81;&#x7684;INSERT&#x6216;DELETE&#x8BED;&#x53E5;&#xFF0C;&#x4F8B;&#x5982;&#x4E0B;&#x9762;&#x7684;&#x793A;&#x4F8B;&#x4E2D;&#xFF0C;&#x6211;&#x4EEC;&#x5728;<code class="docutils literal"><span class="pre">Parent</span></code>&#x548C;<code class="docutils literal"><span class="pre">Child</span></code>&#x5BF9;&#x8C61;&#x5EFA;&#x7ACB;&#x4E24;&#x6B21;&#x76F8;&#x540C;&#x7684;&#x5173;&#x7CFB;&#xFF1A;</span></p><div class="highlight-python"><div class="highlight"><pre><span></span><span class="n">p1</span> <span class="o">=</span> <span class="n">Parent</span><span class="p">()</span>
<span class="n">c1</span> <span class="o">=</span> <span class="n">Child</span><span class="p">()</span>
<span class="n">p1</span><span class="o">.</span><span class="n">children</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="n">c1</span><span class="p">)</span>

<span class="c1"># redundant, will cause a duplicate INSERT on Association</span>
<span class="n">p1</span><span class="o">.</span><span class="n">parent_associations</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="n">Association</span><span class="p">(</span><span class="n">child</span><span class="o">=</span><span class="n">c1</span><span class="p">))</span></pre></div></div><p class="last"><span class="yiyi-st" id="yiyi-107">&#x5982;&#x679C;&#x4F60;&#x77E5;&#x9053;&#x4F60;&#x5728;&#x505A;&#x4EC0;&#x4E48;&#xFF0C;&#x90A3;&#x4E48;&#x4F7F;&#x7528;&#x4E0A;&#x9762;&#x7684;&#x6620;&#x5C04;&#x662F;&#x5F88;&#x597D;&#x7684;&#xFF0C;&#x5C3D;&#x7BA1;&#x5C06;<code class="docutils literal"><span class="pre">viewonly = True</span></code>&#x53C2;&#x6570;&#x5E94;&#x7528;&#x5230;&#x201C;secondary&#x201D;&#x5173;&#x7CFB;&#x53EF;&#x80FD;&#x662F;&#x4E2A;&#x597D;&#x4E3B;&#x610F;&#xFF0C;&#x4EE5;&#x907F;&#x514D;&#x5197;&#x4F59;&#x66F4;&#x6539;&#x88AB;&#x8BB0;&#x5F55;&#x3002;</span><span class="yiyi-st" id="yiyi-108">&#x7136;&#x800C;&#xFF0C;&#x4E3A;&#x4E86;&#x83B7;&#x5F97;&#x4E00;&#x4E2A;&#x4E07;&#x80FD;&#x6A21;&#x5F0F;&#xFF0C;&#x5141;&#x8BB8;&#x4E00;&#x4E2A;&#x7B80;&#x5355;&#x7684;&#x4E24;&#x4E2A;&#x5BF9;&#x8C61;<code class="docutils literal"><span class="pre">Parent-&gt;Child</span></code>&#x5173;&#x7CFB;&#xFF0C;&#x540C;&#x65F6;&#x4ECD;&#x7136;&#x4F7F;&#x7528;&#x5173;&#x8054;&#x5BF9;&#x8C61;&#x6A21;&#x5F0F;&#xFF0C;&#x8BF7;&#x4F7F;&#x7528;&#x5173;&#x8054;&#x4EE3;&#x7406;&#x6269;&#x5C55;&#xFF0C;&#x5982;<a class="reference internal" href="extensions_associationproxy.html"><span>Association Proxy</span></a>&#x6240;&#x8FF0;&#x3002;</span></p></div></div>