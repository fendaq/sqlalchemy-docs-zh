<h1><span class="yiyi-st" id="yiyi-52">&#x70D8;&#x7119;&#x67E5;&#x8BE2;<a class="headerlink" href="#module-sqlalchemy.ext.baked" title="Permalink to this headline">&#xB6;</a></span></h1><p><span class="yiyi-st" id="yiyi-53"><code class="docutils literal"><span class="pre">baked</span></code>&#x4E3A;<a class="reference internal" href="query.html#sqlalchemy.orm.query.Query" title="sqlalchemy.orm.query.Query"><code class="xref py py-class docutils literal"><span class="pre">Query</span></code></a>&#x5BF9;&#x8C61;&#x63D0;&#x4F9B;&#x4E86;&#x66FF;&#x4EE3;&#x7684;&#x521B;&#x5EFA;&#x6A21;&#x5F0F;&#xFF0C;&#x53EF;&#x4EE5;&#x7F13;&#x5B58;&#x5BF9;&#x8C61;&#x7684;&#x6784;&#x9020;&#x548C;&#x5B57;&#x7B26;&#x4E32;&#x7F16;&#x8BD1;&#x6B65;&#x9AA4;&#x3002;</span><span class="yiyi-st" id="yiyi-54">&#x8FD9;&#x610F;&#x5473;&#x7740;&#x5BF9;&#x4E8E;&#x4E0D;&#x6B62;&#x4E00;&#x6B21;&#x4F7F;&#x7528;&#x7684;&#x7279;&#x5B9A;<a class="reference internal" href="query.html#sqlalchemy.orm.query.Query" title="sqlalchemy.orm.query.Query"><code class="xref py py-class docutils literal"><span class="pre">Query</span></code></a>&#x6784;&#x5EFA;&#x573A;&#x666F;&#xFF0C;&#x4ECE;&#x6784;&#x5EFA;&#x67E5;&#x8BE2;&#x7684;&#x521D;&#x59CB;&#x6784;&#x5EFA;&#x5230;&#x751F;&#x6210;SQL&#x5B57;&#x7B26;&#x4E32;&#x7684;&#x6240;&#x6709;Python&#x51FD;&#x6570;&#x8C03;&#x7528;&#x90FD;&#x5C06;&#x4EC5;&#x53D1;&#x751F;<strong>&#x4E00;&#x6B21;</strong>&#xFF0C;&#x800C;&#x4E0D;&#x662F;&#x6BCF;&#x6B21;&#x67E5;&#x8BE2;&#x5EFA;&#x7ACB;&#x548C;&#x6267;&#x884C;&#x3002;</span></p><p><span class="yiyi-st" id="yiyi-55">The rationale for this system is to greatly reduce Python interpreter overhead for everything that occurs <strong>before the SQL is emitted</strong>. </span><span class="yiyi-st" id="yiyi-56">&#x201C;&#x70D8;&#x7119;&#x201D;&#x7CFB;&#x7EDF;&#x7684;&#x7F13;&#x5B58;&#x4EE5;&#x4EFB;&#x4F55;&#x65B9;&#x5F0F;&#x51CF;&#x5C11;SQL&#x8C03;&#x7528;&#x6216;&#x7F13;&#x5B58;&#x6765;&#x81EA;&#x6570;&#x636E;&#x5E93;&#x7684;<strong>&#x8FD4;&#x56DE;&#x7ED3;&#x679C;</strong>&#x3002;<strong>&#x4E0D;&#x662F;</strong>&#x3002;</span><span class="yiyi-st" id="yiyi-57">&#x5728;<a class="reference internal" href="examples.html#examples-caching"><span>Dogpile Caching</span></a>&#x4E2D;&#x63D0;&#x4F9B;&#x4E86;&#x4E00;&#x79CD;&#x6F14;&#x793A;SQL&#x8C03;&#x7528;&#x548C;&#x7ED3;&#x679C;&#x96C6;&#x672C;&#x8EAB;&#x7F13;&#x5B58;&#x7684;&#x6280;&#x672F;&#x3002;</span></p><div class="versionadded"><p><span class="yiyi-st" id="yiyi-58"><span class="versionmodified">&#x7248;&#x672C;1.0.0&#x4E2D;&#x7684;&#x65B0;&#x529F;&#x80FD;</span></span></p></div><div class="admonition note"><p class="first admonition-title"><span class="yiyi-st" id="yiyi-59">&#x6CE8;&#x610F;</span></p><p class="last"><span class="yiyi-st" id="yiyi-60">&#x4ECE;1.0.0&#x5F00;&#x59CB;&#xFF0C;<a class="reference internal" href="#module-sqlalchemy.ext.baked" title="sqlalchemy.ext.baked"><code class="xref py py-mod docutils literal"><span class="pre">sqlalchemy.ext.baked</span></code></a>&#x6269;&#x5C55;&#x540D;&#x5E94;&#x8BE5;&#x88AB;&#x8BA4;&#x4E3A;&#x662F;<strong>&#x5B9E;&#x9A8C;</strong>&#x3002;</span><span class="yiyi-st" id="yiyi-61">&#x5B83;&#x63D0;&#x4F9B;&#x4E86;&#x4E00;&#x4E2A;&#x663E;&#x7740;&#x4E0D;&#x540C;&#x7684;&#x67E5;&#x8BE2;&#x7CFB;&#x7EDF;&#xFF0C;&#x4F46;&#x5C1A;&#x672A;&#x5F97;&#x5230;&#x5927;&#x89C4;&#x6A21;&#x7684;&#x8BC1;&#x660E;&#x3002;</span></p></div><div class="section" id="synopsis"><h2><span class="yiyi-st" id="yiyi-62">&#x6982;&#x8981;<a class="headerlink" href="#synopsis" title="Permalink to this headline">&#xB6; T0&gt;</a></span></h2><p><span class="yiyi-st" id="yiyi-63">&#x70D8;&#x7119;&#x7CFB;&#x7EDF;&#x7684;&#x4F7F;&#x7528;&#x5F00;&#x59CB;&#x4E8E;&#x751F;&#x6210;&#x6240;&#x8C13;&#x7684;&#x201C;&#x9762;&#x5305;&#x5E97;&#x201D;&#xFF0C;&#x8BE5;&#x9762;&#x5305;&#x5E97;&#x4EE3;&#x8868;&#x7279;&#x5B9A;&#x7CFB;&#x5217;&#x67E5;&#x8BE2;&#x5BF9;&#x8C61;&#x7684;&#x5B58;&#x50A8;&#xFF1A;</span></p><div class="highlight-python"><div class="highlight"><pre><span></span><span class="kn">from</span> <span class="nn">sqlalchemy.ext</span> <span class="kn">import</span> <span class="n">baked</span>

<span class="n">bakery</span> <span class="o">=</span> <span class="n">baked</span><span class="o">.</span><span class="n">bakery</span><span class="p">()</span></pre></div></div><p><span class="yiyi-st" id="yiyi-64">&#x4E0A;&#x8FF0;&#x201C;&#x9762;&#x5305;&#x5E97;&#x201D;&#x5C06;&#x9AD8;&#x901F;&#x7F13;&#x5B58;&#x7684;&#x6570;&#x636E;&#x5B58;&#x50A8;&#x5728;&#x9ED8;&#x8BA4;&#x4E3A;200&#x4E2A;&#x5143;&#x7D20;&#x7684;LRU&#x7F13;&#x5B58;&#x4E2D;&#xFF0C;&#x6CE8;&#x610F;&#x5230;ORM&#x67E5;&#x8BE2;&#x901A;&#x5E38;&#x5305;&#x542B;&#x4E00;&#x4E2A;ORM&#x67E5;&#x8BE2;&#x6761;&#x76EE;&#x4EE5;&#x53CA;&#x4E00;&#x4E2A;SQL&#x6570;&#x636E;&#x5E93;&#x6BCF;&#x4E2A;&#x6570;&#x636E;&#x5E93;&#x65B9;&#x8A00;&#x6761;&#x76EE;&#x3002;</span></p><p><span class="yiyi-st" id="yiyi-65">&#x9762;&#x5305;&#x5E97;&#x5141;&#x8BB8;&#x6211;&#x4EEC;&#x5EFA;&#x7ACB;&#x4E00;&#x4E2A;<a class="reference internal" href="query.html#sqlalchemy.orm.query.Query" title="sqlalchemy.orm.query.Query"><code class="xref py py-class docutils literal"><span class="pre">Query</span></code></a>&#x5BF9;&#x8C61;&#xFF0C;&#x65B9;&#x6CD5;&#x662F;&#x5C06;&#x5176;&#x6784;&#x9020;&#x6307;&#x5B9A;&#x4E3A;&#x4E00;&#x7CFB;&#x5217;Python&#x53EF;&#x8C03;&#x7528;&#x5BF9;&#x8C61;&#xFF0C;&#x901A;&#x5E38;&#x662F;lambda&#x8868;&#x8FBE;&#x5F0F;&#x3002;</span><span class="yiyi-st" id="yiyi-66">&#x4E3A;&#x7B80;&#x6D01;&#x8D77;&#x89C1;&#xFF0C;&#x5B83;&#x4F1A;&#x8986;&#x76D6;<code class="docutils literal"><span class="pre">+=</span></code>&#x8FD0;&#x7B97;&#x7B26;&#xFF0C;&#x4EE5;&#x4FBF;&#x5178;&#x578B;&#x7684;&#x67E5;&#x8BE2;&#x6784;&#x5EFA;&#x5982;&#x4E0B;&#x6240;&#x793A;&#xFF1A;</span></p><div class="highlight-python"><div class="highlight"><pre><span></span><span class="kn">from</span> <span class="nn">sqlalchemy</span> <span class="kn">import</span> <span class="n">bindparam</span>

<span class="k">def</span> <span class="nf">search_for_user</span><span class="p">(</span><span class="n">session</span><span class="p">,</span> <span class="n">username</span><span class="p">,</span> <span class="n">email</span><span class="o">=</span><span class="bp">None</span><span class="p">):</span>

    <span class="n">baked_query</span> <span class="o">=</span> <span class="n">bakery</span><span class="p">(</span><span class="k">lambda</span> <span class="n">session</span><span class="p">:</span> <span class="n">session</span><span class="o">.</span><span class="n">query</span><span class="p">(</span><span class="n">User</span><span class="p">))</span>
    <span class="n">baked_query</span> <span class="o">+=</span> <span class="k">lambda</span> <span class="n">q</span><span class="p">:</span> <span class="n">q</span><span class="o">.</span><span class="n">filter</span><span class="p">(</span><span class="n">User</span><span class="o">.</span><span class="n">name</span> <span class="o">==</span> <span class="n">bindparam</span><span class="p">(</span><span class="s1">&apos;username&apos;</span><span class="p">))</span>

    <span class="n">baked_query</span> <span class="o">+=</span> <span class="k">lambda</span> <span class="n">q</span><span class="p">:</span> <span class="n">q</span><span class="o">.</span><span class="n">order_by</span><span class="p">(</span><span class="n">User</span><span class="o">.</span><span class="n">id</span><span class="p">)</span>

    <span class="k">if</span> <span class="n">email</span><span class="p">:</span>
        <span class="n">baked_query</span> <span class="o">+=</span> <span class="k">lambda</span> <span class="n">q</span><span class="p">:</span> <span class="n">q</span><span class="o">.</span><span class="n">filter</span><span class="p">(</span><span class="n">User</span><span class="o">.</span><span class="n">email</span> <span class="o">==</span> <span class="n">bindparam</span><span class="p">(</span><span class="s1">&apos;email&apos;</span><span class="p">))</span>

    <span class="n">result</span> <span class="o">=</span> <span class="n">baked_query</span><span class="p">(</span><span class="n">session</span><span class="p">)</span><span class="o">.</span><span class="n">params</span><span class="p">(</span><span class="n">username</span><span class="o">=</span><span class="n">username</span><span class="p">,</span> <span class="n">email</span><span class="o">=</span><span class="n">email</span><span class="p">)</span><span class="o">.</span><span class="n">all</span><span class="p">()</span>

    <span class="k">return</span> <span class="n">result</span></pre></div></div><p><span class="yiyi-st" id="yiyi-67">&#x4EE5;&#x4E0B;&#x662F;&#x5173;&#x4E8E;&#x4E0A;&#x8FF0;&#x4EE3;&#x7801;&#x7684;&#x4E00;&#x4E9B;&#x89C2;&#x5BDF;&#x7ED3;&#x679C;&#xFF1A;</span></p><ol class="arabic simple"><li><span class="yiyi-st" id="yiyi-68"><code class="docutils literal"><span class="pre">baked_query</span></code>&#x5BF9;&#x8C61;&#x662F;<a class="reference internal" href="#sqlalchemy.ext.baked.BakedQuery" title="sqlalchemy.ext.baked.BakedQuery"><code class="xref py py-class docutils literal"><span class="pre">BakedQuery</span></code></a>&#x7684;&#x4E00;&#x4E2A;&#x5B9E;&#x4F8B;&#x3002;</span><span class="yiyi-st" id="yiyi-69">This object is essentially the &#x201C;builder&#x201D; for a real orm <a class="reference internal" href="query.html#sqlalchemy.orm.query.Query" title="sqlalchemy.orm.query.Query"><code class="xref py py-class docutils literal"><span class="pre">Query</span></code></a> object, but it is not itself the <em>actual</em> <a class="reference internal" href="query.html#sqlalchemy.orm.query.Query" title="sqlalchemy.orm.query.Query"><code class="xref py py-class docutils literal"><span class="pre">Query</span></code></a> object.</span></li><li><span class="yiyi-st" id="yiyi-70">&#x5B9E;&#x9645;&#x7684;<a class="reference internal" href="query.html#sqlalchemy.orm.query.Query" title="sqlalchemy.orm.query.Query"><code class="xref py py-class docutils literal"><span class="pre">Query</span></code></a>&#x5BF9;&#x8C61;&#x6839;&#x672C;&#x4E0D;&#x4F1A;&#x88AB;&#x6784;&#x5EFA;&#xFF0C;&#x76F4;&#x5230;&#x8C03;&#x7528;<a class="reference internal" href="#sqlalchemy.ext.baked.Result.all" title="sqlalchemy.ext.baked.Result.all"><code class="xref py py-meth docutils literal"><span class="pre">Result.all()</span></code></a>&#x65F6;&#x51FD;&#x6570;&#x7684;&#x7ED3;&#x5C3E;&#x3002;</span></li><li><span class="yiyi-st" id="yiyi-71">&#x6DFB;&#x52A0;&#x5230;<code class="docutils literal"><span class="pre">baked_query</span></code>&#x5BF9;&#x8C61;&#x7684;&#x6B65;&#x9AA4;&#x5168;&#x90E8;&#x8868;&#x793A;&#x4E3A;Python&#x51FD;&#x6570;&#xFF0C;&#x901A;&#x5E38;&#x662F;lambda&#x8868;&#x8FBE;&#x5F0F;&#x3002;</span><span class="yiyi-st" id="yiyi-72">&#x8D4B;&#x7ED9;<a class="reference internal" href="#sqlalchemy.ext.baked.bakery" title="sqlalchemy.ext.baked.bakery"><code class="xref py py-func docutils literal"><span class="pre">bakery()</span></code></a>&#x51FD;&#x6570;&#x7684;&#x7B2C;&#x4E00;&#x4E2A;lambda&#x8868;&#x8FBE;&#x5F0F;&#x63A5;&#x6536;&#x4E00;&#x4E2A;<a class="reference internal" href="session_api.html#sqlalchemy.orm.session.Session" title="sqlalchemy.orm.session.Session"><code class="xref py py-class docutils literal"><span class="pre">Session</span></code></a>&#x4F5C;&#x4E3A;&#x5B83;&#x7684;&#x53C2;&#x6570;&#x3002;</span><span class="yiyi-st" id="yiyi-73">&#x5176;&#x4F59;&#x7684;lambda&#x6BCF;&#x4E2A;&#x90FD;&#x63A5;&#x6536;&#x4E00;&#x4E2A;<a class="reference internal" href="query.html#sqlalchemy.orm.query.Query" title="sqlalchemy.orm.query.Query"><code class="xref py py-class docutils literal"><span class="pre">Query</span></code></a>&#x4F5C;&#x4E3A;&#x5B83;&#x4EEC;&#x7684;&#x53C2;&#x6570;&#x3002;</span></li><li><span class="yiyi-st" id="yiyi-74">In the above code, even though our application may call upon <code class="docutils literal"><span class="pre">search_for_user()</span></code> many times, and even though within each invocation we build up an entirely new <a class="reference internal" href="#sqlalchemy.ext.baked.BakedQuery" title="sqlalchemy.ext.baked.BakedQuery"><code class="xref py py-class docutils literal"><span class="pre">BakedQuery</span></code></a> object, <em>all of the lambdas are only called once</em>. </span><span class="yiyi-st" id="yiyi-75">&#x53EA;&#x8981;&#x8FD9;&#x4E2A;&#x67E5;&#x8BE2;&#x88AB;&#x7F13;&#x5B58;&#x5728;&#x9762;&#x5305;&#x623F;&#x4E2D;&#xFF0C;&#x6BCF;&#x4E2A;lambda&#x90FD;&#x662F;<strong>&#x4ECE;&#x4E0D;</strong>&#x8C03;&#x7528;&#x7684;&#x7B2C;&#x4E8C;&#x6B21;&#x3002;</span></li><li><span class="yiyi-st" id="yiyi-76">&#x901A;&#x8FC7;&#x5B58;&#x50A8;&#x5BF9;<strong>lambda&#x5BF9;&#x8C61;&#x672C;&#x8EAB;&#x7684;&#x5F15;&#x7528;</strong>&#x6765;&#x5B9E;&#x73B0;&#x9AD8;&#x901F;&#x7F13;&#x5B58;&#xFF0C;&#x4EE5;&#x4FBF;&#x5236;&#x5B9A;&#x9AD8;&#x901F;&#x7F13;&#x5B58;&#x5BC6;&#x94A5;&#xFF1B;&#x4E5F;&#x5C31;&#x662F;&#x8BF4;&#xFF0C;Python&#x89E3;&#x91CA;&#x5668;&#x4E3A;&#x8FD9;&#x4E9B;&#x51FD;&#x6570;&#x5206;&#x914D;&#x4E00;&#x4E2A;Python&#x5185;&#x90E8;&#x8EAB;&#x4EFD;&#x7684;&#x4E8B;&#x5B9E;&#x51B3;&#x5B9A;&#x4E86;&#x5982;&#x4F55;&#x5728;&#x8FDE;&#x7EED;&#x8FD0;&#x884C;&#x4E2D;&#x8BC6;&#x522B;&#x67E5;&#x8BE2;&#x3002;</span><span class="yiyi-st" id="yiyi-77">For those invocations of <code class="docutils literal"><span class="pre">search_for_user()</span></code> where the <code class="docutils literal"><span class="pre">email</span></code> parameter is specified, the callable <code class="docutils literal"><span class="pre">lambda</span> <span class="pre">q:</span> <span class="pre">q.filter(User.email</span> <span class="pre">==</span> <span class="pre">bindparam(&apos;email&apos;))</span></code> will be part of the cache key that&#x2019;s retrieved; when <code class="docutils literal"><span class="pre">email</span></code> is <code class="docutils literal"><span class="pre">None</span></code>, this callable is not part of the cache key.</span></li><li><span class="yiyi-st" id="yiyi-78">&#x56E0;&#x4E3A;lambda&#x53EA;&#x88AB;&#x8C03;&#x7528;&#x4E00;&#x6B21;&#xFF0C;&#x6240;&#x4EE5;&#x5FC5;&#x987B;&#x4FDD;&#x8BC1;&#x5728;lambda&#x8868;&#x8FBE;&#x5F0F;&#x4E2D;<strong>&#x5185;&#x6CA1;&#x6709;&#x5F15;&#x7528;&#x53EF;&#x80FD;&#x4F1A;&#x6539;&#x53D8;&#x7684;&#x53D8;&#x91CF;&#xFF1B;&#x76F8;&#x53CD;&#xFF0C;&#x5047;&#x8BBE;&#x8FD9;&#x4E9B;&#x503C;&#x662F;&#x7ED1;&#x5B9A;&#x5230;SQL&#x5B57;&#x7B26;&#x4E32;&#x4E2D;&#x7684;&#xFF0C;&#x6211;&#x4EEC;&#x4F7F;&#x7528;<a class="reference internal" href="core_sqlelement.html#sqlalchemy.sql.expression.bindparam" title="sqlalchemy.sql.expression.bindparam"><code class="xref py py-func docutils literal"><span class="pre">bindparam()</span></code></a>&#x6765;&#x6784;&#x9020;&#x547D;&#x540D;&#x53C2;&#x6570;&#xFF0C;&#x5176;&#x4E2D;&#x6211;&#x4EEC;&#x7A0D;&#x540E;&#x4F7F;&#x7528;<a class="reference internal" href="#sqlalchemy.ext.baked.Result.params" title="sqlalchemy.ext.baked.Result.params"><code class="xref py py-meth docutils literal"><span class="pre">Result.params()</span></code></a></strong></span></li></ol></div><div class="section" id="performance"><h2><span class="yiyi-st" id="yiyi-79">&#x6027;&#x80FD;<a class="headerlink" href="#performance" title="Permalink to this headline">&#xB6; T0&gt;</a></span></h2><p><span class="yiyi-st" id="yiyi-80">&#x70D8;&#x7119;&#x7684;&#x67E5;&#x8BE2;&#x53EF;&#x80FD;&#x770B;&#x8D77;&#x6765;&#x6709;&#x70B9;&#x5947;&#x602A;&#xFF0C;&#x6709;&#x70B9;&#x5C34;&#x5C2C;&#xFF0C;&#x6709;&#x70B9;&#x5197;&#x957F;&#x3002;</span><span class="yiyi-st" id="yiyi-81">&#x4F46;&#x662F;&#xFF0C;&#x5728;&#x5E94;&#x7528;&#x7A0B;&#x5E8F;&#x4E2D;&#x591A;&#x6B21;&#x8C03;&#x7528;&#x7684;&#x67E5;&#x8BE2;&#x6240;&#x8282;&#x7701;&#x7684;Python&#x6027;&#x80FD;&#x975E;&#x5E38;&#x663E;&#x7740;&#x3002;</span><span class="yiyi-st" id="yiyi-82">&#x5728;<a class="reference internal" href="examples.html#examples-performance"><span>Performance</span></a>&#x4E2D;&#x6F14;&#x793A;&#x7684;&#x793A;&#x4F8B;&#x5957;&#x4EF6;<code class="docutils literal"><span class="pre">short_selects</span></code>&#x6F14;&#x793A;&#x4E86;&#x6BCF;&#x4E2A;&#x53EA;&#x8FD4;&#x56DE;&#x4E00;&#x884C;&#x7684;&#x67E5;&#x8BE2;&#x7684;&#x6BD4;&#x8F83;&#xFF0C;&#x4F8B;&#x5982;&#x4EE5;&#x4E0B;&#x5E38;&#x89C4;&#x67E5;&#x8BE2;&#xFF1A;</span></p><div class="highlight-python"><div class="highlight"><pre><span></span><span class="n">session</span> <span class="o">=</span> <span class="n">Session</span><span class="p">(</span><span class="n">bind</span><span class="o">=</span><span class="n">engine</span><span class="p">)</span>
<span class="k">for</span> <span class="n">id_</span> <span class="ow">in</span> <span class="n">random</span><span class="o">.</span><span class="n">sample</span><span class="p">(</span><span class="n">ids</span><span class="p">,</span> <span class="n">n</span><span class="p">):</span>
    <span class="n">session</span><span class="o">.</span><span class="n">query</span><span class="p">(</span><span class="n">Customer</span><span class="p">)</span><span class="o">.</span><span class="n">filter</span><span class="p">(</span><span class="n">Customer</span><span class="o">.</span><span class="n">id</span> <span class="o">==</span> <span class="n">id_</span><span class="p">)</span><span class="o">.</span><span class="n">one</span><span class="p">()</span></pre></div></div><p><span class="yiyi-st" id="yiyi-83">&#x4E0E;&#x540C;&#x7B49;&#x7684;&#x201C;&#x70D8;&#x7119;&#x201D;&#x67E5;&#x8BE2;&#x76F8;&#x6BD4;&#xFF1A;</span></p><div class="highlight-python"><div class="highlight"><pre><span></span><span class="n">bakery</span> <span class="o">=</span> <span class="n">baked</span><span class="o">.</span><span class="n">bakery</span><span class="p">()</span>
<span class="n">s</span> <span class="o">=</span> <span class="n">Session</span><span class="p">(</span><span class="n">bind</span><span class="o">=</span><span class="n">engine</span><span class="p">)</span>
<span class="k">for</span> <span class="n">id_</span> <span class="ow">in</span> <span class="n">random</span><span class="o">.</span><span class="n">sample</span><span class="p">(</span><span class="n">ids</span><span class="p">,</span> <span class="n">n</span><span class="p">):</span>
    <span class="n">q</span> <span class="o">=</span> <span class="n">bakery</span><span class="p">(</span><span class="k">lambda</span> <span class="n">s</span><span class="p">:</span> <span class="n">s</span><span class="o">.</span><span class="n">query</span><span class="p">(</span><span class="n">Customer</span><span class="p">))</span>
    <span class="n">q</span> <span class="o">+=</span> <span class="k">lambda</span> <span class="n">q</span><span class="p">:</span> <span class="n">q</span><span class="o">.</span><span class="n">filter</span><span class="p">(</span><span class="n">Customer</span><span class="o">.</span><span class="n">id</span> <span class="o">==</span> <span class="n">bindparam</span><span class="p">(</span><span class="s1">&apos;id&apos;</span><span class="p">))</span>
    <span class="n">q</span><span class="p">(</span><span class="n">s</span><span class="p">)</span><span class="o">.</span><span class="n">params</span><span class="p">(</span><span class="nb">id</span><span class="o">=</span><span class="n">id_</span><span class="p">)</span><span class="o">.</span><span class="n">one</span><span class="p">()</span></pre></div></div><p><span class="yiyi-st" id="yiyi-84">&#x5BF9;&#x6BCF;&#x4E2A;&#x5757;&#x8C03;&#x7528;10000&#x6B21;&#x8FED;&#x4EE3;&#x7684;Python&#x51FD;&#x6570;&#x8C03;&#x7528;&#x8BA1;&#x6570;&#x7684;&#x533A;&#x522B;&#x5982;&#x4E0B;&#xFF1A;</span></p><div class="highlight-python"><div class="highlight"><pre><span></span>test_baked_query : test a baked query of the full entity.
                   (10000 iterations); total fn calls 1951294

test_orm_query :   test a straight ORM query of the full entity.
                   (10000 iterations); total fn calls 7900535</pre></div></div><p><span class="yiyi-st" id="yiyi-85">&#x5C31;&#x529F;&#x80FD;&#x5F3A;&#x5927;&#x7684;&#x7B14;&#x8BB0;&#x672C;&#x7535;&#x8111;&#x800C;&#x8A00;&#xFF0C;&#x8FD9;&#x4E2A;&#x6570;&#x5B57;&#x8868;&#x793A;&#x4E3A;&#xFF1A;</span></p><div class="highlight-python"><div class="highlight"><pre><span></span>test_baked_query : test a baked query of the full entity.
                   (10000 iterations); total time 2.174126 sec

test_orm_query :   test a straight ORM query of the full entity.
                   (10000 iterations); total time 7.958516 sec</pre></div></div><p><span class="yiyi-st" id="yiyi-86">&#x8BF7;&#x6CE8;&#x610F;&#xFF0C;&#x6B64;&#x6D4B;&#x8BD5;&#x975E;&#x5E38;&#x6709;&#x610F;&#x5730;&#x4F7F;&#x7528;&#x53EA;&#x8FD4;&#x56DE;&#x4E00;&#x884C;&#x7684;&#x67E5;&#x8BE2;&#x3002;</span><span class="yiyi-st" id="yiyi-87">&#x5BF9;&#x4E8E;&#x8FD4;&#x56DE;&#x5F88;&#x591A;&#x884C;&#x7684;&#x67E5;&#x8BE2;&#xFF0C;&#x70D8;&#x7119;&#x67E5;&#x8BE2;&#x7684;&#x6027;&#x80FD;&#x4F18;&#x52BF;&#x5C06;&#x4F1A;&#x4EA7;&#x751F;&#x8D8A;&#x6765;&#x8D8A;&#x5C0F;&#x7684;&#x5F71;&#x54CD;&#xFF0C;&#x4E0E;&#x83B7;&#x53D6;&#x884C;&#x6240;&#x82B1;&#x8D39;&#x7684;&#x65F6;&#x95F4;&#x6210;&#x6B63;&#x6BD4;&#x3002;</span><span class="yiyi-st" id="yiyi-88">&#x8BF7;&#x8BB0;&#x4F4F;&#xFF0C;<strong>&#x70D8;&#x7119;&#x67E5;&#x8BE2;&#x529F;&#x80FD;&#x4EC5;&#x9002;&#x7528;&#x4E8E;&#x6784;&#x5EFA;&#x67E5;&#x8BE2;&#x672C;&#x8EAB;&#xFF0C;&#x800C;&#x4E0D;&#x662F;&#x7ED3;&#x679C;&#x63D0;&#x53D6;</strong>&#x3002;</span><span class="yiyi-st" id="yiyi-89">&#x4F7F;&#x7528;&#x70D8;&#x7119;&#x7684;&#x529F;&#x80FD;&#x7EDD;&#x4E0D;&#x80FD;&#x4FDD;&#x8BC1;&#x66F4;&#x5FEB;&#x7684;&#x5E94;&#x7528;&#x7A0B;&#x5E8F;&#xFF1B;&#x5BF9;&#x4E8E;&#x90A3;&#x4E9B;&#x88AB;&#x6D4B;&#x91CF;&#x4E3A;&#x53D7;&#x5230;&#x8FD9;&#x79CD;&#x7279;&#x5B9A;&#x5F62;&#x5F0F;&#x7684;&#x5F00;&#x9500;&#x5F71;&#x54CD;&#x7684;&#x5E94;&#x7528;&#x7A0B;&#x5E8F;&#xFF0C;&#x5B83;&#x53EA;&#x662F;&#x4E00;&#x4E2A;&#x6F5C;&#x5728;&#x7684;&#x6709;&#x7528;&#x529F;&#x80FD;&#x3002;</span></p><div class="topic"><p class="topic-title first"><span class="yiyi-st" id="yiyi-90">&#x6D4B;&#x91CF;&#x4E24;&#x6B21;&#xFF0C;&#x5207;&#x4E00;&#x6B21;</span></p><p><span class="yiyi-st" id="yiyi-91">&#x6709;&#x5173;&#x5982;&#x4F55;&#x914D;&#x7F6E;SQLAlchemy&#x5E94;&#x7528;&#x7A0B;&#x5E8F;&#x7684;&#x80CC;&#x666F;&#x4FE1;&#x606F;&#xFF0C;&#x8BF7;&#x53C2;&#x9605;<a class="reference internal" href="faq_performance.html#faq-performance"><span>Performance</span></a>&#x90E8;&#x5206;&#x3002;</span><span class="yiyi-st" id="yiyi-92">&#x5728;&#x5C1D;&#x8BD5;&#x63D0;&#x9AD8;&#x5E94;&#x7528;&#x7A0B;&#x5E8F;&#x7684;&#x6027;&#x80FD;&#x65F6;&#xFF0C;&#x4F7F;&#x7528;&#x6027;&#x80FD;&#x6D4B;&#x91CF;&#x6280;&#x672F;&#x662F;&#x975E;&#x5E38;&#x91CD;&#x8981;&#x7684;&#x3002;</span></p></div></div><div class="section" id="rationale"><h2><span class="yiyi-st" id="yiyi-93">&#x7406;<a class="headerlink" href="#rationale" title="Permalink to this headline">&#xB6; T0&gt;</a></span></h2><p><span class="yiyi-st" id="yiyi-94">&#x4E0A;&#x9762;&#x7684;&#x201C;lambda&#x201D;&#x65B9;&#x6CD5;&#x662F;&#x66F4;&#x4F20;&#x7EDF;&#x7684;&#x201C;&#x53C2;&#x6570;&#x5316;&#x201D;&#x65B9;&#x6CD5;&#x7684;&#x8D85;&#x96C6;&#x3002;</span><span class="yiyi-st" id="yiyi-95">&#x5047;&#x8BBE;&#x6211;&#x4EEC;&#x5E0C;&#x671B;&#x6784;&#x5EFA;&#x4E00;&#x4E2A;&#x7B80;&#x5355;&#x7684;&#x7CFB;&#x7EDF;&#xFF0C;&#x6211;&#x4EEC;&#x53EA;&#x9700;&#x6784;&#x5EFA;&#x4E00;&#x6B21;<a class="reference internal" href="query.html#sqlalchemy.orm.query.Query" title="sqlalchemy.orm.query.Query"><code class="xref py py-class docutils literal"><span class="pre">Query</span></code></a>&#xFF0C;&#x7136;&#x540E;&#x5C06;&#x5176;&#x5B58;&#x50A8;&#x5728;&#x5B57;&#x5178;&#x4E2D;&#x4F9B;&#x91CD;&#x590D;&#x4F7F;&#x7528;&#x3002;</span><span class="yiyi-st" id="yiyi-96">&#x8FD9;&#x53EF;&#x4EE5;&#x901A;&#x8FC7;&#x6784;&#x5EFA;&#x67E5;&#x8BE2;&#x5E76;&#x901A;&#x8FC7;&#x8C03;&#x7528;<code class="docutils literal"><span class="pre">my_cached_query</span> <span class="pre">=</span> <span class="pre">query.with_session&#x6765;&#x79FB;&#x9664;<a class="reference internal" href="session_api.html#sqlalchemy.orm.session.Session" title="sqlalchemy.orm.session.Session"><code class="xref py py-class docutils literal"><span class="pre">Session</span></code></a> &#xFF08;&#x65E0;&#xFF09; T6&gt;  T3&gt;&#xFF1A;</span></code></span></p><div class="highlight-python"><div class="highlight"><pre><span></span><span class="n">my_simple_cache</span> <span class="o">=</span> <span class="p">{}</span>

<span class="k">def</span> <span class="nf">lookup</span><span class="p">(</span><span class="n">session</span><span class="p">,</span> <span class="n">id_argument</span><span class="p">):</span>
    <span class="k">if</span> <span class="s2">&quot;my_key&quot;</span> <span class="ow">not</span> <span class="ow">in</span> <span class="n">my_simple_cache</span><span class="p">:</span>
        <span class="n">query</span> <span class="o">=</span> <span class="n">session</span><span class="o">.</span><span class="n">query</span><span class="p">(</span><span class="n">Model</span><span class="p">)</span><span class="o">.</span><span class="n">filter</span><span class="p">(</span><span class="n">Model</span><span class="o">.</span><span class="n">id</span> <span class="o">==</span> <span class="n">bindparam</span><span class="p">(</span><span class="s1">&apos;id&apos;</span><span class="p">))</span>
        <span class="n">my_simple_cache</span><span class="p">[</span><span class="s2">&quot;my_key&quot;</span><span class="p">]</span> <span class="o">=</span> <span class="n">query</span><span class="o">.</span><span class="n">with_session</span><span class="p">(</span><span class="bp">None</span><span class="p">)</span>
    <span class="k">else</span><span class="p">:</span>
        <span class="n">query</span> <span class="o">=</span> <span class="n">my_simple_cache</span><span class="p">[</span><span class="s2">&quot;my_key&quot;</span><span class="p">]</span><span class="o">.</span><span class="n">with_session</span><span class="p">(</span><span class="n">session</span><span class="p">)</span>

    <span class="k">return</span> <span class="n">query</span><span class="o">.</span><span class="n">params</span><span class="p">(</span><span class="nb">id</span><span class="o">=</span><span class="n">id_argument</span><span class="p">)</span><span class="o">.</span><span class="n">all</span><span class="p">()</span></pre></div></div><p><span class="yiyi-st" id="yiyi-97">&#x4E0A;&#x8FF0;&#x65B9;&#x6CD5;&#x4F7F;&#x6211;&#x4EEC;&#x83B7;&#x5F97;&#x4E86;&#x975E;&#x5E38;&#x5C0F;&#x7684;&#x6027;&#x80FD;&#x4F18;&#x52BF;&#x3002;</span><span class="yiyi-st" id="yiyi-98">&#x901A;&#x8FC7;&#x91CD;&#x65B0;&#x4F7F;&#x7528;<a class="reference internal" href="query.html#sqlalchemy.orm.query.Query" title="sqlalchemy.orm.query.Query"><code class="xref py py-class docutils literal"><span class="pre">Query</span></code></a>&#xFF0C;&#x6211;&#x4EEC;&#x4FDD;&#x5B58;&#x4E86;<code class="docutils literal"><span class="pre">session.query(Model)</span></code>&#x6784;&#x9020;&#x51FD;&#x6570;&#x4E2D;&#x7684;Python&#x5DE5;&#x4F5C;&#xFF0C;&#x5E76;&#x8C03;&#x7528;<code class="docutils literal"><span class="pre">&#x8FC7;&#x6EE4;&#x5668;&#xFF08;Model .id</span> <span class="pre">==</span> <span class="pre">bindparam&#xFF08;&apos;id&apos;&#xFF09;&#xFF09;</span></code>&#xFF0C;&#x5B83;&#x4F1A;&#x8DF3;&#x8FC7;&#x6211;&#x4EEC;&#x6784;&#x5EFA;Core&#x8868;&#x8FBE;&#x5F0F;&#x4EE5;&#x53CA;&#x53D1;&#x9001;&#x5B83;&#x5230;<a class="reference internal" href="query.html#sqlalchemy.orm.query.Query.filter" title="sqlalchemy.orm.query.Query.filter"><code class="xref py py-meth docutils literal"><span class="pre">Query.filter()</span></code></a>&#x3002;</span><span class="yiyi-st" id="yiyi-99">&#x4F46;&#x662F;&#xFF0C;&#x6BCF;&#x6B21;&#x8C03;&#x7528;<a class="reference internal" href="query.html#sqlalchemy.orm.query.Query.all" title="sqlalchemy.orm.query.Query.all"><code class="xref py py-meth docutils literal"><span class="pre">Query.all()</span></code></a>&#x65F6;&#xFF0C;&#x8BE5;&#x65B9;&#x6CD5;&#x4ECD;&#x7136;&#x4F1A;&#x91CD;&#x65B0;&#x751F;&#x6210;&#x5B8C;&#x6574;&#x7684;<a class="reference internal" href="core_selectable.html#sqlalchemy.sql.expression.Select" title="sqlalchemy.sql.expression.Select"><code class="xref py py-class docutils literal"><span class="pre">Select</span></code></a>&#x5BF9;&#x8C61;&#xFF0C;&#x5E76;&#x4E14;&#x8FD8;&#x4F1A;&#x53D1;&#x9001;&#x6B64;&#x5168;&#x65B0;&#x7684;<a class="reference internal" href="core_selectable.html#sqlalchemy.sql.expression.Select" title="sqlalchemy.sql.expression.Select"><code class="xref py py-class docutils literal"><span class="pre">Select</span></code></a>&#x5230;&#x6BCF;&#x6B21;&#x7684;&#x5B57;&#x7B26;&#x4E32;&#x7F16;&#x8BD1;&#x6B65;&#x9AA4;&#xFF0C;&#x5BF9;&#x4E8E;&#x50CF;&#x4E0A;&#x9762;&#x8FD9;&#x6837;&#x7684;&#x7B80;&#x5355;&#x60C5;&#x51B5;&#xFF0C;&#x8FD9;&#x53EF;&#x80FD;&#x662F;&#x5927;&#x7EA6;70&#xFF05;&#x7684;&#x5F00;&#x9500;&#x3002;</span></p><p><span class="yiyi-st" id="yiyi-100">&#x4E3A;&#x4E86;&#x51CF;&#x5C11;&#x989D;&#x5916;&#x7684;&#x5F00;&#x9500;&#xFF0C;&#x6211;&#x4EEC;&#x9700;&#x8981;&#x4E00;&#x4E9B;&#x66F4;&#x4E13;&#x95E8;&#x7684;&#x903B;&#x8F91;&#xFF0C;&#x4E00;&#x4E9B;&#x65B9;&#x6CD5;&#x6765;&#x8BB0;&#x5FC6;&#x9009;&#x62E9;&#x5BF9;&#x8C61;&#x7684;&#x6784;&#x9020;&#x548C;SQL&#x7684;&#x6784;&#x9020;&#x3002;</span><span class="yiyi-st" id="yiyi-101">Wiki&#x4E2D;&#x6709;&#x4E00;&#x4E2A;&#x4F8B;&#x5B50;&#x662F;<a class="reference external" href="https://bitbucket.org/zzzeek/sqlalchemy/wiki/UsageRecipes/BakedQuery">BakedQuery</a>&#xFF0C;&#x5B83;&#x662F;&#x8BE5;&#x529F;&#x80FD;&#x7684;&#x5148;&#x9A71;&#xFF0C;&#x4F46;&#x662F;&#x5728;&#x8BE5;&#x7CFB;&#x7EDF;&#x4E2D;&#xFF0C;&#x6211;&#x4EEC;&#x6CA1;&#x6709;&#x7F13;&#x5B58;&#x67E5;&#x8BE2;&#x7684;<em>&#x6784;&#x9020;</em>&#x3002;</span><span class="yiyi-st" id="yiyi-102">&#x4E3A;&#x4E86;&#x6D88;&#x9664;&#x6240;&#x6709;&#x7684;&#x5F00;&#x9500;&#xFF0C;&#x6211;&#x4EEC;&#x9700;&#x8981;&#x7F13;&#x5B58;&#x67E5;&#x8BE2;&#x7684;&#x6784;&#x9020;&#x4EE5;&#x53CA;SQL&#x7F16;&#x8BD1;&#x3002;</span><span class="yiyi-st" id="yiyi-103">Let&#x2019;s assume we adapted the recipe in this way and made ourselves a method <code class="docutils literal"><span class="pre">.bake()</span></code> that pre-compiles the SQL for the query, producing a new object that can be invoked with minimal overhead. </span><span class="yiyi-st" id="yiyi-104">&#x6211;&#x4EEC;&#x7684;&#x4F8B;&#x5B50;&#x53D8;&#x6210;&#xFF1A;</span></p><div class="highlight-python"><div class="highlight"><pre><span></span><span class="n">my_simple_cache</span> <span class="o">=</span> <span class="p">{}</span>

<span class="k">def</span> <span class="nf">lookup</span><span class="p">(</span><span class="n">session</span><span class="p">,</span> <span class="n">id_argument</span><span class="p">):</span>

    <span class="k">if</span> <span class="s2">&quot;my_key&quot;</span> <span class="ow">not</span> <span class="ow">in</span> <span class="n">my_simple_cache</span><span class="p">:</span>
        <span class="n">query</span> <span class="o">=</span> <span class="n">session</span><span class="o">.</span><span class="n">query</span><span class="p">(</span><span class="n">Model</span><span class="p">)</span><span class="o">.</span><span class="n">filter</span><span class="p">(</span><span class="n">Model</span><span class="o">.</span><span class="n">id</span> <span class="o">==</span> <span class="n">bindparam</span><span class="p">(</span><span class="s1">&apos;id&apos;</span><span class="p">))</span>
        <span class="n">my_simple_cache</span><span class="p">[</span><span class="s2">&quot;my_key&quot;</span><span class="p">]</span> <span class="o">=</span> <span class="n">query</span><span class="o">.</span><span class="n">with_session</span><span class="p">(</span><span class="bp">None</span><span class="p">)</span><span class="o">.</span><span class="n">bake</span><span class="p">()</span>
    <span class="k">else</span><span class="p">:</span>
        <span class="n">query</span> <span class="o">=</span> <span class="n">my_simple_cache</span><span class="p">[</span><span class="s2">&quot;my_key&quot;</span><span class="p">]</span><span class="o">.</span><span class="n">with_session</span><span class="p">(</span><span class="n">session</span><span class="p">)</span>

    <span class="k">return</span> <span class="n">query</span><span class="o">.</span><span class="n">params</span><span class="p">(</span><span class="nb">id</span><span class="o">=</span><span class="n">id_argument</span><span class="p">)</span><span class="o">.</span><span class="n">all</span><span class="p">()</span></pre></div></div><p><span class="yiyi-st" id="yiyi-105">&#x4E0A;&#x9762;&#xFF0C;&#x6211;&#x4EEC;&#x5DF2;&#x7ECF;&#x89E3;&#x51B3;&#x4E86;&#x6027;&#x80FD;&#x95EE;&#x9898;&#xFF0C;&#x4F46;&#x6211;&#x4EEC;&#x4ECD;&#x7136;&#x6709;&#x8FD9;&#x4E2A;&#x5B57;&#x7B26;&#x4E32;&#x7F13;&#x5B58;&#x952E;&#x6765;&#x5904;&#x7406;&#x3002;</span></p><p><span class="yiyi-st" id="yiyi-106">&#x6211;&#x4EEC;&#x53EF;&#x4EE5;&#x4F7F;&#x7528;&#x201C;&#x9762;&#x5305;&#x5E97;&#x201D;&#x7684;&#x65B9;&#x6CD5;&#x6765;&#x91CD;&#x65B0;&#x6784;&#x5EFA;&#x4E0A;&#x8FF0;&#x65B9;&#x6CD5;&#xFF0C;&#x8FD9;&#x79CD;&#x65B9;&#x5F0F;&#x770B;&#x8D77;&#x6765;&#x6BD4;&#x201C;&#x6784;&#x5EFA;lambda&#x201D;&#x65B9;&#x6CD5;&#x66F4;&#x4E0D;&#x5BFB;&#x5E38;&#xFF0C;&#x66F4;&#x50CF;&#x662F;&#x5BF9;&#x7B80;&#x5355;&#x7684;&#x201C;&#x91CD;&#x7528;&#x67E5;&#x8BE2;&#x201D;&#x65B9;&#x6CD5;&#x7684;&#x7B80;&#x5355;&#x6539;&#x8FDB;&#xFF1A;</span></p><div class="highlight-python"><div class="highlight"><pre><span></span><span class="n">bakery</span> <span class="o">=</span> <span class="n">baked</span><span class="o">.</span><span class="n">bakery</span><span class="p">()</span>

<span class="k">def</span> <span class="nf">lookup</span><span class="p">(</span><span class="n">session</span><span class="p">,</span> <span class="n">id_argument</span><span class="p">):</span>
    <span class="k">def</span> <span class="nf">create_model_query</span><span class="p">(</span><span class="n">session</span><span class="p">):</span>
        <span class="k">return</span> <span class="n">session</span><span class="o">.</span><span class="n">query</span><span class="p">(</span><span class="n">Model</span><span class="p">)</span><span class="o">.</span><span class="n">filter</span><span class="p">(</span><span class="n">Model</span><span class="o">.</span><span class="n">id</span> <span class="o">==</span> <span class="n">bindparam</span><span class="p">(</span><span class="s1">&apos;id&apos;</span><span class="p">))</span>

    <span class="n">parameterized_query</span> <span class="o">=</span> <span class="n">bakery</span><span class="o">.</span><span class="n">bake</span><span class="p">(</span><span class="n">create_model_query</span><span class="p">)</span>
    <span class="k">return</span> <span class="n">parameterized_query</span><span class="p">(</span><span class="n">session</span><span class="p">)</span><span class="o">.</span><span class="n">params</span><span class="p">(</span><span class="nb">id</span><span class="o">=</span><span class="n">id_argument</span><span class="p">)</span><span class="o">.</span><span class="n">all</span><span class="p">()</span></pre></div></div><p><span class="yiyi-st" id="yiyi-107">&#x5728;&#x4E0A;&#x9762;&#xFF0C;&#x6211;&#x4EEC;&#x4F7F;&#x7528;&#x201C;&#x70D8;&#x7119;&#x201D;&#x7CFB;&#x7EDF;&#xFF0C;&#x5176;&#x65B9;&#x5F0F;&#x4E0E;&#x7B80;&#x5355;&#x5316;&#x7684;&#x201C;&#x7F13;&#x5B58;&#x67E5;&#x8BE2;&#x201D;&#x7CFB;&#x7EDF;&#x975E;&#x5E38;&#x76F8;&#x4F3C;&#x3002;</span><span class="yiyi-st" id="yiyi-108">&#x7136;&#x800C;&#xFF0C;&#x5B83;&#x4F7F;&#x7528;&#x4E86;&#x5C11;&#x4E24;&#x884C;&#x4EE3;&#x7801;&#xFF0C;&#x4E0D;&#x9700;&#x8981;&#x5236;&#x4F5C;&#x201C;my_key&#x201D;&#x7684;&#x7F13;&#x5B58;&#x952E;&#xFF0C;&#x800C;&#x4E14;&#x8FD8;&#x5305;&#x542B;&#x4E86;&#x4E0E;&#x6211;&#x4EEC;&#x81EA;&#x5B9A;&#x4E49;&#x7684;&#x201C;&#x70D8;&#x7119;&#x201D;&#x529F;&#x80FD;&#x76F8;&#x540C;&#x7684;&#x529F;&#x80FD;&#xFF0C;&#x53EF;&#x4EE5;&#x4ECE;&#x6784;&#x5EFA;&#x5668;&#x7F13;&#x5B58;100&#xFF05;&#x7684;Python&#x8C03;&#x7528;&#x5DE5;&#x4F5C;&#x67E5;&#x8BE2;&#x8FC7;&#x6EE4;&#x5668;&#x8C03;&#x7528;&#xFF0C;&#x4EE5;&#x751F;&#x6210;<a class="reference internal" href="core_selectable.html#sqlalchemy.sql.expression.Select" title="sqlalchemy.sql.expression.Select"><code class="xref py py-class docutils literal"><span class="pre">Select</span></code></a>&#x5BF9;&#x8C61;&#x5230;&#x5B57;&#x7B26;&#x4E32;&#x7F16;&#x8BD1;&#x6B65;&#x9AA4;&#x3002;</span></p><p><span class="yiyi-st" id="yiyi-109">&#x4ECE;&#x4EE5;&#x4E0A;&#x6240;&#x8FF0;&#xFF0C;&#x5982;&#x679C;&#x6211;&#x4EEC;&#x95EE;&#x81EA;&#x5DF1;&#xFF0C;&#x201C;&#x5982;&#x679C;&#x67E5;&#x8BE2;&#x9700;&#x8981;&#x5BF9;&#x67E5;&#x8BE2;&#x7ED3;&#x6784;&#x505A;&#x51FA;&#x6761;&#x4EF6;&#x6027;&#x51B3;&#x5B9A;&#x4F1A;&#x600E;&#x6837;&#xFF1F;&#x201D;&#xFF0C;&#x8FD9;&#x5C31;&#x662F;&#x5E0C;&#x671B;&#x53D8;&#x5F97;&#x660E;&#x663E;&#xFF0C;&#x4E3A;&#x4EC0;&#x4E48;&#x201C;&#x70D8;&#x7119;&#x201D;&#x5C31;&#x662F;&#x8FD9;&#x6837;&#x3002;</span><span class="yiyi-st" id="yiyi-110">&#x6211;&#x4EEC;&#x53EF;&#x4EE5;&#x4ECE;<em>&#x4E2D;&#x7684;&#x4EFB;&#x610F;&#x6570;&#x91CF;&#x7684;</em>&#x51FD;&#x6570;&#x6784;&#x5EFA;&#x5B83;&#xFF0C;&#x800C;&#x4E0D;&#x662F;&#x4ECE;&#x4E00;&#x4E2A;&#x51FD;&#x6570;&#x6784;&#x5EFA;&#x53C2;&#x6570;&#x5316;&#x67E5;&#x8BE2;&#xFF08;&#x8FD9;&#x662F;&#x6211;&#x4EEC;&#x8BA4;&#x4E3A;&#x70D8;&#x7119;&#x6700;&#x521D;&#x53EF;&#x80FD;&#x5DE5;&#x4F5C;&#x7684;&#x65B9;&#x5F0F;&#xFF09;&#x3002;</span><span class="yiyi-st" id="yiyi-111">&#x8003;&#x8651;&#x6211;&#x4EEC;&#x7684;&#x5929;&#x771F;&#x793A;&#x4F8B;&#xFF0C;&#x5982;&#x679C;&#x6211;&#x4EEC;&#x9700;&#x8981;&#x5728;&#x6761;&#x4EF6;&#x57FA;&#x7840;&#x4E0A;&#x5728;&#x67E5;&#x8BE2;&#x4E2D;&#x6DFB;&#x52A0;&#x9644;&#x52A0;&#x5B50;&#x53E5;&#xFF1A;</span></p><div class="highlight-python"><div class="highlight"><pre><span></span><span class="n">my_simple_cache</span> <span class="o">=</span> <span class="p">{}</span>

<span class="k">def</span> <span class="nf">lookup</span><span class="p">(</span><span class="n">session</span><span class="p">,</span> <span class="n">id_argument</span><span class="p">,</span> <span class="n">include_frobnizzle</span><span class="o">=</span><span class="bp">False</span><span class="p">):</span>
    <span class="k">if</span> <span class="n">include_frobnizzle</span><span class="p">:</span>
        <span class="n">cache_key</span> <span class="o">=</span> <span class="s2">&quot;my_key_with_frobnizzle&quot;</span>
    <span class="k">else</span><span class="p">:</span>
        <span class="n">cache_key</span> <span class="o">=</span> <span class="s2">&quot;my_key_without_frobnizzle&quot;</span>

    <span class="k">if</span> <span class="n">cache_key</span> <span class="ow">not</span> <span class="ow">in</span> <span class="n">my_simple_cache</span><span class="p">:</span>
        <span class="n">query</span> <span class="o">=</span> <span class="n">session</span><span class="o">.</span><span class="n">query</span><span class="p">(</span><span class="n">Model</span><span class="p">)</span><span class="o">.</span><span class="n">filter</span><span class="p">(</span><span class="n">Model</span><span class="o">.</span><span class="n">id</span> <span class="o">==</span> <span class="n">bindparam</span><span class="p">(</span><span class="s1">&apos;id&apos;</span><span class="p">))</span>
        <span class="k">if</span> <span class="n">include_frobnizzle</span><span class="p">:</span>
            <span class="n">query</span> <span class="o">=</span> <span class="n">query</span><span class="o">.</span><span class="n">filter</span><span class="p">(</span><span class="n">Model</span><span class="o">.</span><span class="n">frobnizzle</span> <span class="o">==</span> <span class="bp">True</span><span class="p">)</span>

        <span class="n">my_simple_cache</span><span class="p">[</span><span class="n">cache_key</span><span class="p">]</span> <span class="o">=</span> <span class="n">query</span><span class="o">.</span><span class="n">with_session</span><span class="p">(</span><span class="bp">None</span><span class="p">)</span><span class="o">.</span><span class="n">bake</span><span class="p">()</span>
    <span class="k">else</span><span class="p">:</span>
        <span class="n">query</span> <span class="o">=</span> <span class="n">my_simple_cache</span><span class="p">[</span><span class="n">cache_key</span><span class="p">]</span><span class="o">.</span><span class="n">with_session</span><span class="p">(</span><span class="n">session</span><span class="p">)</span>

    <span class="k">return</span> <span class="n">query</span><span class="o">.</span><span class="n">params</span><span class="p">(</span><span class="nb">id</span><span class="o">=</span><span class="n">id_argument</span><span class="p">)</span><span class="o">.</span><span class="n">all</span><span class="p">()</span></pre></div></div><p><span class="yiyi-st" id="yiyi-112">&#x6211;&#x4EEC;&#x7684;&#x201C;&#x7B80;&#x5355;&#x201D;&#x53C2;&#x6570;&#x5316;&#x7CFB;&#x7EDF;&#x73B0;&#x5728;&#x5FC5;&#x987B;&#x8D1F;&#x8D23;&#x751F;&#x6210;&#x7F13;&#x5B58;&#x952E;&#xFF0C;&#x8FD9;&#x4E2A;&#x7F13;&#x5B58;&#x952E;&#x8003;&#x8651;&#x4E86;&#x662F;&#x5426;&#x4F20;&#x9012;&#x4E86;&#x201C;include_frobnizzle&#x201D;&#x6807;&#x5FD7;&#xFF0C;&#x56E0;&#x4E3A;&#x8FD9;&#x4E2A;&#x6807;&#x5FD7;&#x7684;&#x5B58;&#x5728;&#x610F;&#x5473;&#x7740;&#x751F;&#x6210;&#x7684;SQL&#x5C06;&#x5B8C;&#x5168;&#x4E0D;&#x540C;&#x3002;</span><span class="yiyi-st" id="yiyi-113">&#x5F88;&#x660E;&#x663E;&#xFF0C;&#x968F;&#x7740;&#x67E5;&#x8BE2;&#x6784;&#x5EFA;&#x7684;&#x590D;&#x6742;&#x6027;&#x63D0;&#x9AD8;&#xFF0C;&#x7F13;&#x5B58;&#x8FD9;&#x4E9B;&#x67E5;&#x8BE2;&#x7684;&#x4EFB;&#x52A1;&#x53D8;&#x5F97;&#x975E;&#x5E38;&#x5FEB;&#x901F;&#x3002;</span><span class="yiyi-st" id="yiyi-114">&#x6211;&#x4EEC;&#x53EF;&#x4EE5;&#x5C06;&#x4E0A;&#x9762;&#x7684;&#x4F8B;&#x5B50;&#x8F6C;&#x6362;&#x4E3A;&#x76F4;&#x63A5;&#x4F7F;&#x7528;&#x201C;&#x9762;&#x5305;&#x5E97;&#x201D;&#xFF0C;&#x5982;&#x4E0B;&#x6240;&#x793A;&#xFF1A;</span></p><div class="highlight-python"><div class="highlight"><pre><span></span><span class="n">bakery</span> <span class="o">=</span> <span class="n">baked</span><span class="o">.</span><span class="n">bakery</span><span class="p">()</span>

<span class="k">def</span> <span class="nf">lookup</span><span class="p">(</span><span class="n">session</span><span class="p">,</span> <span class="n">id_argument</span><span class="p">,</span> <span class="n">include_frobnizzle</span><span class="o">=</span><span class="bp">False</span><span class="p">):</span>
    <span class="k">def</span> <span class="nf">create_model_query</span><span class="p">(</span><span class="n">session</span><span class="p">):</span>
        <span class="k">return</span> <span class="n">session</span><span class="o">.</span><span class="n">query</span><span class="p">(</span><span class="n">Model</span><span class="p">)</span><span class="o">.</span><span class="n">filter</span><span class="p">(</span><span class="n">Model</span><span class="o">.</span><span class="n">id</span> <span class="o">==</span> <span class="n">bindparam</span><span class="p">(</span><span class="s1">&apos;id&apos;</span><span class="p">))</span>

    <span class="n">parameterized_query</span> <span class="o">=</span> <span class="n">bakery</span><span class="o">.</span><span class="n">bake</span><span class="p">(</span><span class="n">create_model_query</span><span class="p">)</span>

    <span class="k">if</span> <span class="n">include_frobnizzle</span><span class="p">:</span>
        <span class="k">def</span> <span class="nf">include_frobnizzle_in_query</span><span class="p">(</span><span class="n">query</span><span class="p">):</span>
            <span class="k">return</span> <span class="n">query</span><span class="o">.</span><span class="n">filter</span><span class="p">(</span><span class="n">Model</span><span class="o">.</span><span class="n">frobnizzle</span> <span class="o">==</span> <span class="bp">True</span><span class="p">)</span>

        <span class="n">parameterized_query</span> <span class="o">=</span> <span class="n">parameterized_query</span><span class="o">.</span><span class="n">with_criteria</span><span class="p">(</span>
            <span class="n">include_frobnizzle_in_query</span><span class="p">)</span>

    <span class="k">return</span> <span class="n">parameterized_query</span><span class="p">(</span><span class="n">session</span><span class="p">)</span><span class="o">.</span><span class="n">params</span><span class="p">(</span><span class="nb">id</span><span class="o">=</span><span class="n">id_argument</span><span class="p">)</span><span class="o">.</span><span class="n">all</span><span class="p">()</span></pre></div></div><p><span class="yiyi-st" id="yiyi-115">&#x5728;&#x4E0A;&#x9762;&#xFF0C;&#x6211;&#x4EEC;&#x4E0D;&#x4EC5;&#x7F13;&#x5B58;&#x67E5;&#x8BE2;&#x5BF9;&#x8C61;&#xFF0C;&#x8FD8;&#x7F13;&#x5B58;&#x4E3A;&#x4E86;&#x751F;&#x6210;SQL&#x800C;&#x9700;&#x8981;&#x6267;&#x884C;&#x7684;&#x6240;&#x6709;&#x5DE5;&#x4F5C;&#x3002;</span><span class="yiyi-st" id="yiyi-116">&#x6211;&#x4EEC;&#x4E5F;&#x4E0D;&#x518D;&#x9700;&#x8981;&#x5904;&#x7406;&#x786E;&#x4FDD;&#x6211;&#x4EEC;&#x751F;&#x6210;&#x4E00;&#x4E2A;&#x7F13;&#x5B58;&#x952E;&#xFF0C;&#x8BE5;&#x7F13;&#x5B58;&#x952E;&#x51C6;&#x786E;&#x5730;&#x8003;&#x8651;&#x4E86;&#x6211;&#x4EEC;&#x6240;&#x505A;&#x7684;&#x6240;&#x6709;&#x7ED3;&#x6784;&#x4FEE;&#x6539;&#xFF1B;&#x8FD9;&#x73B0;&#x5728;&#x53EF;&#x4EE5;&#x81EA;&#x52A8;&#x5904;&#x7406;&#xFF0C;&#x5E76;&#x4E14;&#x4E0D;&#x4F1A;&#x51FA;&#x9519;&#x3002;</span></p><p><span class="yiyi-st" id="yiyi-117">&#x6B64;&#x4EE3;&#x7801;&#x793A;&#x4F8B;&#x6BD4;&#x7B80;&#x5355;&#x793A;&#x4F8B;&#x77ED;&#x51E0;&#x884C;&#xFF0C;&#x65E0;&#x9700;&#x5904;&#x7406;&#x7F13;&#x5B58;&#x952E;&#xFF0C;&#x5E76;&#x4E14;&#x5177;&#x6709;&#x5B8C;&#x6574;&#x7684;&#x6240;&#x8C13;&#x201C;&#x70D8;&#x7119;&#x201D;&#x529F;&#x80FD;&#x7684;&#x5DE8;&#x5927;&#x6027;&#x80FD;&#x4F18;&#x52BF;&#x3002;</span><span class="yiyi-st" id="yiyi-118">&#x4F46;&#x4ECD;&#x7136;&#x6709;&#x70B9;&#x5197;&#x957F;&#xFF01;</span><span class="yiyi-st" id="yiyi-119">&#x56E0;&#x6B64;&#xFF0C;&#x6211;&#x4EEC;&#x91C7;&#x7528;&#x50CF;<a class="reference internal" href="#sqlalchemy.ext.baked.BakedQuery.add_criteria" title="sqlalchemy.ext.baked.BakedQuery.add_criteria"><code class="xref py py-meth docutils literal"><span class="pre">BakedQuery.add_criteria()</span></code></a>&#x548C;<a class="reference internal" href="#sqlalchemy.ext.baked.BakedQuery.with_criteria" title="sqlalchemy.ext.baked.BakedQuery.with_criteria"><code class="xref py py-meth docutils literal"><span class="pre">BakedQuery.with_criteria()</span></code></a>&#x8FD9;&#x6837;&#x7684;&#x65B9;&#x6CD5;&#x5E76;&#x5C06;&#x5B83;&#x4EEC;&#x7F29;&#x77ED;&#x4E3A;&#x8FD0;&#x7B97;&#x7B26;&#xFF0C;&#x5E76;&#x9F13;&#x52B1;&#xFF08;&#x5C3D;&#x7BA1;&#x80AF;&#x5B9A;&#x4E0D;&#x9700;&#x8981;&#xFF01;&#xFF09;</span><span class="yiyi-st" id="yiyi-120">&#x4F7F;&#x7528;&#x7B80;&#x5355;&#x7684;lambda&#x8868;&#x8FBE;&#x5F0F;&#xFF0C;&#x53EA;&#x662F;&#x4E3A;&#x4E86;&#x51CF;&#x5C11;&#x5197;&#x957F;&#xFF1A;</span></p><div class="highlight-python"><div class="highlight"><pre><span></span><span class="n">bakery</span> <span class="o">=</span> <span class="n">baked</span><span class="o">.</span><span class="n">bakery</span><span class="p">()</span>

<span class="k">def</span> <span class="nf">lookup</span><span class="p">(</span><span class="n">session</span><span class="p">,</span> <span class="n">id_argument</span><span class="p">,</span> <span class="n">include_frobnizzle</span><span class="o">=</span><span class="bp">False</span><span class="p">):</span>
    <span class="n">parameterized_query</span> <span class="o">=</span> <span class="n">bakery</span><span class="o">.</span><span class="n">bake</span><span class="p">(</span>
        <span class="k">lambda</span> <span class="n">s</span><span class="p">:</span> <span class="n">s</span><span class="o">.</span><span class="n">query</span><span class="p">(</span><span class="n">Model</span><span class="p">)</span><span class="o">.</span><span class="n">filter</span><span class="p">(</span><span class="n">Model</span><span class="o">.</span><span class="n">id</span> <span class="o">==</span> <span class="n">bindparam</span><span class="p">(</span><span class="s1">&apos;id&apos;</span><span class="p">))</span>
      <span class="p">)</span>

    <span class="k">if</span> <span class="n">include_frobnizzle</span><span class="p">:</span>
        <span class="n">parameterized_query</span> <span class="o">+=</span> <span class="k">lambda</span> <span class="n">q</span><span class="p">:</span> <span class="n">q</span><span class="o">.</span><span class="n">filter</span><span class="p">(</span><span class="n">Model</span><span class="o">.</span><span class="n">frobnizzle</span> <span class="o">==</span> <span class="bp">True</span><span class="p">)</span>

    <span class="k">return</span> <span class="n">parameterized_query</span><span class="p">(</span><span class="n">session</span><span class="p">)</span><span class="o">.</span><span class="n">params</span><span class="p">(</span><span class="nb">id</span><span class="o">=</span><span class="n">id_argument</span><span class="p">)</span><span class="o">.</span><span class="n">all</span><span class="p">()</span></pre></div></div><p><span class="yiyi-st" id="yiyi-121">&#x5982;&#x4E0A;&#x6240;&#x8FF0;&#xFF0C;&#x8BE5;&#x65B9;&#x6CD5;&#x5B9E;&#x73B0;&#x8D77;&#x6765;&#x8F83;&#x4E3A;&#x7B80;&#x5355;&#xFF0C;&#x4EE3;&#x7801;&#x6D41;&#x4E0E;&#x975E;&#x7F13;&#x5B58;&#x67E5;&#x8BE2;&#x51FD;&#x6570;&#x770B;&#x8D77;&#x6765;&#x66F4;&#x76F8;&#x4F3C;&#xFF0C;&#x56E0;&#x6B64;&#x4F7F;&#x4EE3;&#x7801;&#x66F4;&#x6613;&#x4E8E;&#x79FB;&#x690D;&#x3002;</span></p><p><span class="yiyi-st" id="yiyi-122">&#x4EE5;&#x4E0A;&#x63CF;&#x8FF0;&#x57FA;&#x672C;&#x4E0A;&#x662F;&#x7528;&#x4E8E;&#x8FBE;&#x5230;&#x5F53;&#x524D;&#x201C;&#x70D8;&#x7119;&#x201D;&#x65B9;&#x6CD5;&#x7684;&#x8BBE;&#x8BA1;&#x8FC7;&#x7A0B;&#x7684;&#x603B;&#x7ED3;&#x3002;</span><span class="yiyi-st" id="yiyi-123">&#x4ECE;&#x201C;&#x5E38;&#x89C4;&#x201D;&#x65B9;&#x6CD5;&#x5F00;&#x59CB;&#xFF0C;&#x9700;&#x8981;&#x89E3;&#x51B3;&#x9AD8;&#x901F;&#x7F13;&#x5B58;&#x5BC6;&#x94A5;&#x6784;&#x5EFA;&#x548C;&#x7BA1;&#x7406;&#xFF0C;&#x5220;&#x9664;&#x6240;&#x6709;&#x5197;&#x4F59;Python&#x6267;&#x884C;&#x4EE5;&#x53CA;&#x4F7F;&#x7528;&#x6761;&#x4EF6;&#x6784;&#x5EFA;&#x7684;&#x67E5;&#x8BE2;&#x7B49;&#x9644;&#x52A0;&#x95EE;&#x9898;&#xFF0C;&#x4ECE;&#x800C;&#x5F62;&#x6210;&#x6700;&#x7EC8;&#x65B9;&#x6CD5;&#x3002;</span></p></div><div class="section" id="lazy-loading-integration"><h2><span class="yiyi-st" id="yiyi-124">&#x5EF6;&#x8FDF;&#x52A0;&#x8F7D;&#x6574;&#x5408;<a class="headerlink" href="#lazy-loading-integration" title="Permalink to this headline">&#xB6;</a></span></h2><p><span class="yiyi-st" id="yiyi-125">&#x5DF2;&#x70D8;&#x7119;&#x7684;&#x67E5;&#x8BE2;&#x53EF;&#x4EE5;&#x900F;&#x660E;&#x5730;&#x4E0E;SQLAlchemy&#x7684;&#x61D2;&#x52A0;&#x8F7D;&#x7A0B;&#x5E8F;&#x529F;&#x80FD;&#x96C6;&#x6210;&#x3002;</span><span class="yiyi-st" id="yiyi-126">&#x672A;&#x6765;&#x7248;&#x672C;&#x7684;SQLAlchemy&#x53EF;&#x80FD;&#x9ED8;&#x8BA4;&#x542F;&#x7528;&#x6B64;&#x529F;&#x80FD;&#xFF0C;&#x56E0;&#x4E3A;&#x5B83;&#x5728;&#x5EF6;&#x8FDF;&#x52A0;&#x8F7D;&#x4E2D;&#x7684;&#x4F7F;&#x7528;&#x662F;&#x5B8C;&#x5168;&#x900F;&#x660E;&#x7684;&#x3002;</span><span class="yiyi-st" id="yiyi-127">&#x73B0;&#x5728;&#xFF0C;&#x8981;&#x4E3A;&#x5168;&#x7CFB;&#x7EDF;&#x7684;&#x6240;&#x6709;lazyloader&#x542F;&#x7528;&#x70D8;&#x7119;&#x52A0;&#x8F7D;&#xFF0C;&#x8BF7;&#x8C03;&#x7528;<a class="reference internal" href="#sqlalchemy.ext.baked.bake_lazy_loaders" title="sqlalchemy.ext.baked.bake_lazy_loaders"><code class="xref py py-func docutils literal"><span class="pre">bake_lazy_loaders()</span></code></a>&#x51FD;&#x6570;&#x3002;</span><span class="yiyi-st" id="yiyi-128">&#x8FD9;&#x5C06;&#x5F71;&#x54CD;&#x6240;&#x6709;&#x4F7F;&#x7528;<code class="docutils literal"><span class="pre">lazy=&apos;select&apos;</span></code>&#x7B56;&#x7565;&#x7684;&#x5173;&#x7CFB;&#x4EE5;&#x53CA;&#x6240;&#x6709;&#x4F7F;&#x7528;<a class="reference internal" href="loading_relationships.html#sqlalchemy.orm.lazyload" title="sqlalchemy.orm.lazyload"><code class="xref py py-func docutils literal"><span class="pre">lazyload()</span></code></a>&#x7684;&#x6BCF;&#x4E2A;&#x67E5;&#x8BE2;&#x7B56;&#x7565;&#x3002;</span></p><p><span class="yiyi-st" id="yiyi-129">&#x53EF;&#x4EE5;&#x4F7F;&#x7528;<code class="docutils literal"><span class="pre">baked_select</span></code>&#x52A0;&#x8F7D;&#x5668;&#x7B56;&#x7565;&#x5728;&#x6BCF;&#x4E2A;<a class="reference internal" href="relationship_api.html#sqlalchemy.orm.relationship" title="sqlalchemy.orm.relationship"><code class="xref py py-func docutils literal"><span class="pre">relationship()</span></code></a>&#x57FA;&#x7840;&#x4E0A;&#x542F;&#x7528;&#x201C;&#x70D8;&#x7119;&#x201D;&#x5EF6;&#x8FDF;&#x52A0;&#x8F7D;&#xFF1A;</span></p><div class="highlight-python"><div class="highlight"><pre><span></span><span class="k">class</span> <span class="nc">MyClass</span><span class="p">(</span><span class="n">Base</span><span class="p">):</span>
    <span class="c1"># ...</span>

    <span class="n">widgets</span> <span class="o">=</span> <span class="n">relationship</span><span class="p">(</span><span class="s2">&quot;Widget&quot;</span><span class="p">,</span> <span class="n">lazy</span><span class="o">=</span><span class="s2">&quot;baked_select&quot;</span><span class="p">)</span></pre></div></div><p><span class="yiyi-st" id="yiyi-130">&#x53EA;&#x8981;&#x5E94;&#x7528;&#x7A0B;&#x5E8F;&#x7684;&#x4EFB;&#x4F55;&#x90E8;&#x5206;&#x5BFC;&#x5165;&#x4E86;<code class="docutils literal"><span class="pre">sqlalchemy.ext.baked</span></code>&#x6A21;&#x5757;&#xFF0C;&#x5C31;&#x53EF;&#x4EE5;&#x4F7F;&#x7528;<code class="docutils literal"><span class="pre">baked_select</span></code>&#x7B56;&#x7565;&#x3002;</span><span class="yiyi-st" id="yiyi-131">&#x6B64;&#x529F;&#x80FD;&#x4F7F;&#x7528;&#x7684;&#x201C;&#x9762;&#x5305;&#x623F;&#x201D;&#x5BF9;&#x4E8E;<code class="docutils literal"><span class="pre">MyClass</span></code>&#x7684;&#x6620;&#x5C04;&#x5668;&#x662F;&#x672C;&#x5730;&#x7684;&#x3002;</span></p><p><span class="yiyi-st" id="yiyi-132">&#x5BF9;&#x4E8E;&#x6BCF;&#x4E2A;&#x67E5;&#x8BE2;&#x4F7F;&#x7528;&#xFF0C;&#x53EF;&#x4EE5;&#x4F7F;&#x7528;<a class="reference internal" href="#sqlalchemy.ext.baked.baked_lazyload" title="sqlalchemy.ext.baked.baked_lazyload"><code class="xref py py-func docutils literal"><span class="pre">baked_lazyload()</span></code></a>&#x7B56;&#x7565;&#xFF0C;&#x8BE5;&#x7B56;&#x7565;&#x4E0E;&#x4EFB;&#x4F55;&#x5176;&#x4ED6;&#x52A0;&#x8F7D;&#x7A0B;&#x5E8F;&#x9009;&#x9879;&#x4E00;&#x6837;&#x3002;</span></p><div class="section" id="opting-out-with-the-bake-queries-flag"><h3><span class="yiyi-st" id="yiyi-133">&#x9009;&#x62E9;&#x4E0E;bake_queries&#x6807;&#x5FD7;<a class="headerlink" href="#opting-out-with-the-bake-queries-flag" title="Permalink to this headline">&#xB6;</a></span></h3><p><span class="yiyi-st" id="yiyi-134"><a class="reference internal" href="relationship_api.html#sqlalchemy.orm.relationship" title="sqlalchemy.orm.relationship"><code class="xref py py-func docutils literal"><span class="pre">relationship()</span></code></a>&#x7ED3;&#x6784;&#x5305;&#x542B;&#x4E00;&#x4E2A;&#x6807;&#x5FD7;<a class="reference internal" href="relationship_api.html#sqlalchemy.orm.relationship.params.bake_queries" title="sqlalchemy.orm.relationship"><code class="xref py py-paramref docutils literal"><span class="pre">relationship.bake_queries</span></code></a>&#xFF0C;&#x5F53;&#x8BBE;&#x7F6E;&#x4E3A;False&#x65F6;&#xFF0C;&#x4F1A;&#x5BFC;&#x81F4;&#x8BE5;&#x5173;&#x7CFB;&#x9000;&#x51FA;&#x70D8;&#x7119;&#x67E5;&#x8BE2;&#x7CFB;&#x7EDF;&#xFF0C;&#x5F53;&#x5E94;&#x7528;&#x7A0B;&#x5E8F;&#x8303;&#x56F4;<a class="reference internal" href="#sqlalchemy.ext.baked.bake_lazy_loaders" title="sqlalchemy.ext.baked.bake_lazy_loaders"><code class="xref py py-func docutils literal"><span class="pre">bake_lazy_loaders()</span></code></a>&#x51FD;&#x6570;&#x6765;&#x542F;&#x7528;&#x70D8;&#x7119;&#x67E5;&#x8BE2;&#x52A0;&#x8F7D;&#x5668;&#x3002;</span></p></div></div><div class="section" id="api-documentation"><h2><span class="yiyi-st" id="yiyi-135">API&#x6587;&#x6863;<a class="headerlink" href="#api-documentation" title="Permalink to this headline">&#xB6;</a></span></h2><dl class="function"><dt id="sqlalchemy.ext.baked.bakery"><span class="yiyi-st" id="yiyi-136"> <code class="descclassname">sqlalchemy.ext.baked.</code><code class="descname">bakery</code><span class="sig-paren">(</span><em>cls</em>, <em>size=200</em><span class="sig-paren">)</span><a class="headerlink" href="#sqlalchemy.ext.baked.bakery" title="Permalink to this definition">&#xB6;</a></span></dt><dd><p><span class="yiyi-st" id="yiyi-137">&#x5EFA;&#x9020;&#x4E00;&#x4E2A;&#x65B0;&#x7684;&#x9762;&#x5305;&#x5E97;&#x3002;</span></p></dd></dl><dl class="class"><dt id="sqlalchemy.ext.baked.BakedQuery"><span class="yiyi-st" id="yiyi-138"><em class="property">class</em> <code class="descclassname">sqlalchemy.ext.baked&#x3002;</code> <code class="descname">BakedQuery</code> <span class="sig-paren">&#xFF08;</span> <em>&#x9762;&#x5305;&#x5E97;</em>&#xFF0C;<em>initial_fn </em>&#xFF0C;<em>args =()</em> <span class="sig-paren">&#xFF09;</span> <a class="headerlink" href="#sqlalchemy.ext.baked.BakedQuery" title="Permalink to this definition">&#xB6;</a></span></dt><dd><p><span class="yiyi-st" id="yiyi-139"><a class="reference internal" href="query.html#sqlalchemy.orm.query.Query" title="sqlalchemy.orm.query.Query"><code class="xref py py-class docutils literal"><span class="pre">query.Query</span></code></a>&#x5BF9;&#x8C61;&#x7684;&#x6784;&#x5EFA;&#x5668;&#x5BF9;&#x8C61;&#x3002;</span></p><dl class="method"><dt id="sqlalchemy.ext.baked.BakedQuery.add_criteria"><span class="yiyi-st" id="yiyi-140"><code class="descname">add_criteria</code> <span class="sig-paren">&#xFF08;</span> <em>fn</em>&#xFF0C;<em>* args</em> <span class="sig-paren">&#xFF09;</span> <a class="headerlink" href="#sqlalchemy.ext.baked.BakedQuery.add_criteria" title="Permalink to this definition"></a></span></dt><dd><p><span class="yiyi-st" id="yiyi-141">&#x5C06;&#x6807;&#x51C6;&#x51FD;&#x6570;&#x6DFB;&#x52A0;&#x5230;&#x6B64;<a class="reference internal" href="#sqlalchemy.ext.baked.BakedQuery" title="sqlalchemy.ext.baked.BakedQuery"><code class="xref py py-class docutils literal"><span class="pre">BakedQuery</span></code></a>&#x4E2D;&#x3002;</span></p><p><span class="yiyi-st" id="yiyi-142">&#x8FD9;&#x76F8;&#x5F53;&#x4E8E;&#x4F7F;&#x7528;<code class="docutils literal"><span class="pre">+=</span></code>&#x8FD0;&#x7B97;&#x7B26;&#x5C31;&#x5730;&#x4FEE;&#x6539;<a class="reference internal" href="#sqlalchemy.ext.baked.BakedQuery" title="sqlalchemy.ext.baked.BakedQuery"><code class="xref py py-class docutils literal"><span class="pre">BakedQuery</span></code></a>&#x3002;</span></p></dd></dl><dl class="classmethod"><dt id="sqlalchemy.ext.baked.BakedQuery.bakery"><span class="yiyi-st" id="yiyi-143"><em class="property">classmethod</em> <code class="descname">&#x9762;&#x5305;&#x5E97;</code> <span class="sig-paren">&#xFF08;</span> <em>size = 200</em> <span class="sig-paren">&#xFF09;</span> <a class="headerlink" href="#sqlalchemy.ext.baked.BakedQuery.bakery" title="Permalink to this definition"></a></span></dt><dd><p><span class="yiyi-st" id="yiyi-144">&#x5EFA;&#x9020;&#x4E00;&#x4E2A;&#x65B0;&#x7684;&#x9762;&#x5305;&#x5E97;&#x3002;</span></p></dd></dl><dl class="method"><dt id="sqlalchemy.ext.baked.BakedQuery.for_session"><span class="yiyi-st" id="yiyi-145"><code class="descname"> for_session  T0&gt; <span class="sig-paren">&#xFF08; T1&gt; <em>&#x4F1A;&#x8BDD; T2&gt; <span class="sig-paren">&#xFF09; T3&gt; <a class="headerlink" href="#sqlalchemy.ext.baked.BakedQuery.for_session" title="Permalink to this definition">&#xB6; T4&gt;</a></span></em></span></code></span></dt><dd><p><span class="yiyi-st" id="yiyi-146">&#x4E3A;&#x8FD9;&#x4E2A;<a class="reference internal" href="#sqlalchemy.ext.baked.BakedQuery" title="sqlalchemy.ext.baked.BakedQuery"><code class="xref py py-class docutils literal"><span class="pre">BakedQuery</span></code></a>&#x8FD4;&#x56DE;&#x4E00;&#x4E2A;<a class="reference internal" href="#sqlalchemy.ext.baked.Result" title="sqlalchemy.ext.baked.Result"><code class="xref py py-class docutils literal"><span class="pre">Result</span></code></a>&#x5BF9;&#x8C61;&#x3002;</span></p><p><span class="yiyi-st" id="yiyi-147">&#x8FD9;&#x76F8;&#x5F53;&#x4E8E;&#x5C06;<a class="reference internal" href="#sqlalchemy.ext.baked.BakedQuery" title="sqlalchemy.ext.baked.BakedQuery"><code class="xref py py-class docutils literal"><span class="pre">BakedQuery</span></code></a>&#x4F5C;&#x4E3A;Python&#x53EF;&#x8C03;&#x7528;&#x5BF9;&#x8C61;&#x6765;&#x8C03;&#x7528;&#x3002; <code class="docutils literal"><span class="pre">&#x7ED3;&#x679C;</span> <span class="pre">=</span> <span class="pre">my_baked_query&#xFF08;&#x4F1A;&#x8BDD;&#xFF09;</span></code>&#x3002;</span></p></dd></dl><dl class="method"><dt id="sqlalchemy.ext.baked.BakedQuery.spoil"><span class="yiyi-st" id="yiyi-148"><code class="descname">&#x5F03;&#x571F; T0&gt; <span class="sig-paren">&#xFF08; T1&gt; <em>&#x6EE1;=&#x5047; T2&gt; <span class="sig-paren">&#xFF09; T3&gt; <a class="headerlink" href="#sqlalchemy.ext.baked.BakedQuery.spoil" title="Permalink to this definition">&#xB6; T4&gt;</a></span></em></span></code></span></dt><dd><p><span class="yiyi-st" id="yiyi-149">&#x53D6;&#x6D88;&#x5C06;&#x5728;&#x6B64;BakedQuery&#x5BF9;&#x8C61;&#x4E0A;&#x53D1;&#x751F;&#x7684;&#x4EFB;&#x4F55;&#x67E5;&#x8BE2;&#x7F13;&#x5B58;&#x3002;</span></p><p><span class="yiyi-st" id="yiyi-150">BakedQuery&#x53EF;&#x4EE5;&#x7EE7;&#x7EED;&#x6B63;&#x5E38;&#x4F7F;&#x7528;&#xFF0C;&#x4F46;&#x662F;&#x5176;&#x4ED6;&#x521B;&#x5EFA;&#x51FD;&#x6570;&#x4E0D;&#x4F1A;&#x88AB;&#x7F13;&#x5B58;&#xFF1B;&#x4ED6;&#x4EEC;&#x5C06;&#x5728;&#x6BCF;&#x6B21;&#x8C03;&#x7528;&#x65F6;&#x88AB;&#x8C03;&#x7528;&#x3002;</span></p><p><span class="yiyi-st" id="yiyi-151">&#x8FD9;&#x662F;&#x4E3A;&#x4E86;&#x652F;&#x6301;&#x6784;&#x5EFA;&#x70D8;&#x7119;&#x67E5;&#x8BE2;&#x7684;&#x7279;&#x5B9A;&#x6B65;&#x9AA4;&#x4F7F;&#x67E5;&#x8BE2;&#x65E0;&#x6CD5;&#x7F13;&#x5B58;&#x7684;&#x60C5;&#x51B5;&#xFF0C;&#x4F8B;&#x5982;&#x4F9D;&#x8D56;&#x4E8E;&#x67D0;&#x4E9B;&#x4E0D;&#x53EF;&#x7F13;&#x5B58;&#x503C;&#x7684;&#x53D8;&#x4F53;&#x3002;</span></p><table class="docutils field-list" frame="void" rules="none"><tbody valign="top"><tr class="field-odd field"><th class="field-name"><span class="yiyi-st" id="yiyi-152">&#x53C2;&#x6570;&#xFF1A;</span></th><td class="field-body"><span class="yiyi-st" id="yiyi-153"><span class="target" id="sqlalchemy.ext.baked.BakedQuery.spoil.params.full"></span><strong>full</strong><a class="paramlink headerlink reference internal" href="#sqlalchemy.ext.baked.BakedQuery.spoil.params.full">&#xB6;</a> &#x2013; if False, only functions added to this <a class="reference internal" href="#sqlalchemy.ext.baked.BakedQuery" title="sqlalchemy.ext.baked.BakedQuery"><code class="xref py py-class docutils literal"><span class="pre">BakedQuery</span></code></a> object subsequent to the spoil step will be non-cached; the state of the <a class="reference internal" href="#sqlalchemy.ext.baked.BakedQuery" title="sqlalchemy.ext.baked.BakedQuery"><code class="xref py py-class docutils literal"><span class="pre">BakedQuery</span></code></a> up until this point will be pulled from the cache. </span><span class="yiyi-st" id="yiyi-154">&#x5982;&#x679C;&#x4E3A;True&#xFF0C;&#x5219;&#x6BCF;&#x6B21;&#x4ECE;&#x5934;&#x521B;&#x5EFA;&#x6574;&#x4E2A;<a class="reference internal" href="query.html#sqlalchemy.orm.query.Query" title="sqlalchemy.orm.query.Query"><code class="xref py py-class docutils literal"><span class="pre">Query</span></code></a>&#x5BF9;&#x8C61;&#xFF0C;&#x5E76;&#x5728;&#x6BCF;&#x6B21;&#x8C03;&#x7528;&#x65F6;&#x8C03;&#x7528;&#x6240;&#x6709;&#x521B;&#x5EFA;&#x51FD;&#x6570;&#x3002;</span></td></tr></tbody></table></dd></dl><dl class="method"><dt id="sqlalchemy.ext.baked.BakedQuery.with_criteria"><span class="yiyi-st" id="yiyi-155"> <code class="descname">with_criteria</code><span class="sig-paren">(</span><em>fn</em>, <em>*args</em><span class="sig-paren">)</span><a class="headerlink" href="#sqlalchemy.ext.baked.BakedQuery.with_criteria" title="Permalink to this definition">&#xB6;</a></span></dt><dd><p><span class="yiyi-st" id="yiyi-156">&#x5411;&#x8FD9;&#x4E2A;&#x514B;&#x9686;&#x7684;<a class="reference internal" href="#sqlalchemy.ext.baked.BakedQuery" title="sqlalchemy.ext.baked.BakedQuery"><code class="xref py py-class docutils literal"><span class="pre">BakedQuery</span></code></a>&#x6DFB;&#x52A0;&#x4E00;&#x4E2A;&#x6807;&#x51C6;&#x51FD;&#x6570;&#x3002;</span></p><p><span class="yiyi-st" id="yiyi-157">&#x8FD9;&#x76F8;&#x5F53;&#x4E8E;&#x4F7F;&#x7528;<code class="docutils literal"><span class="pre">+</span></code>&#x8FD0;&#x7B97;&#x7B26;&#x751F;&#x6210;&#x65B0;&#x7684;&#x5E26;&#x6709;&#x4FEE;&#x6539;&#x7684;<a class="reference internal" href="#sqlalchemy.ext.baked.BakedQuery" title="sqlalchemy.ext.baked.BakedQuery"><code class="xref py py-class docutils literal"><span class="pre">BakedQuery</span></code></a>&#x3002;</span></p></dd></dl></dd></dl><dl class="class"><dt id="sqlalchemy.ext.baked.Result"><span class="yiyi-st" id="yiyi-158"> <em class="property">class </em><code class="descclassname">sqlalchemy.ext.baked.</code><code class="descname">Result</code><span class="sig-paren">(</span><em>bq</em>, <em>session</em><span class="sig-paren">)</span><a class="headerlink" href="#sqlalchemy.ext.baked.Result" title="Permalink to this definition">&#xB6;</a></span></dt><dd><p><span class="yiyi-st" id="yiyi-159">&#x9488;&#x5BF9;<a class="reference internal" href="session_api.html#sqlalchemy.orm.session.Session" title="sqlalchemy.orm.session.Session"><code class="xref py py-class docutils literal"><span class="pre">Session</span></code></a>&#x8C03;&#x7528;<a class="reference internal" href="#sqlalchemy.ext.baked.BakedQuery" title="sqlalchemy.ext.baked.BakedQuery"><code class="xref py py-class docutils literal"><span class="pre">BakedQuery</span></code></a>&#x3002;</span></p><p><span class="yiyi-st" id="yiyi-160"><a class="reference internal" href="#sqlalchemy.ext.baked.Result" title="sqlalchemy.ext.baked.Result"><code class="xref py py-class docutils literal"><span class="pre">Result</span></code></a>&#x5BF9;&#x8C61;&#x662F;&#x5B9E;&#x9645;&#x7684;<a class="reference internal" href="query.html#sqlalchemy.orm.query.Query" title="sqlalchemy.orm.query.Query"><code class="xref py py-class docutils literal"><span class="pre">query.Query</span></code></a>&#x5BF9;&#x8C61;&#x88AB;&#x521B;&#x5EFA;&#x6216;&#x4ECE;&#x7F13;&#x5B58;&#x4E2D;&#x68C0;&#x7D22;&#xFF0C;&#x9488;&#x5BF9;&#x76EE;&#x6807;<a class="reference internal" href="session_api.html#sqlalchemy.orm.session.Session" title="sqlalchemy.orm.session.Session"><code class="xref py py-class docutils literal"><span class="pre">Session</span></code></a>&#xFF0C;&#x7136;&#x540E;&#x88AB;&#x8C03;&#x7528;&#x4E3A;&#x7ED3;&#x679C;&#x3002;</span></p><dl class="method"><dt id="sqlalchemy.ext.baked.Result.all"><span class="yiyi-st" id="yiyi-161"><code class="descname">&#x6240;&#x6709; T0&gt; <span class="sig-paren">&#xFF08; T1&gt; <span class="sig-paren">&#xFF09; T2&gt; <a class="headerlink" href="#sqlalchemy.ext.baked.Result.all" title="Permalink to this definition">&#xB6; T3&gt;</a></span></span></code></span></dt><dd><p><span class="yiyi-st" id="yiyi-162">&#x8FD4;&#x56DE;&#x6240;&#x6709;&#x884C;&#x3002;</span></p><p><span class="yiyi-st" id="yiyi-163">&#x76F8;&#x5F53;&#x4E8E;<a class="reference internal" href="query.html#sqlalchemy.orm.query.Query.all" title="sqlalchemy.orm.query.Query.all"><code class="xref py py-meth docutils literal"><span class="pre">Query.all()</span></code></a>&#x3002;</span></p></dd></dl><dl class="method"><dt id="sqlalchemy.ext.baked.Result.first"><span class="yiyi-st" id="yiyi-164"><code class="descname">&#x7B2C;&#x4E00; T0&gt; <span class="sig-paren">&#xFF08; T1&gt; <span class="sig-paren">&#xFF09; T2&gt; <a class="headerlink" href="#sqlalchemy.ext.baked.Result.first" title="Permalink to this definition">&#xB6; T3&gt;</a></span></span></code></span></dt><dd><p><span class="yiyi-st" id="yiyi-165">&#x8FD4;&#x56DE;&#x7B2C;&#x4E00;&#x884C;&#x3002;</span></p><p><span class="yiyi-st" id="yiyi-166">&#x76F8;&#x5F53;&#x4E8E;<a class="reference internal" href="query.html#sqlalchemy.orm.query.Query.first" title="sqlalchemy.orm.query.Query.first"><code class="xref py py-meth docutils literal"><span class="pre">Query.first()</span></code></a>&#x3002;</span></p></dd></dl><dl class="method"><dt id="sqlalchemy.ext.baked.Result.get"><span class="yiyi-st" id="yiyi-167"><code class="descname">&#x83B7;&#x5F97; T0&gt; <span class="sig-paren">&#xFF08; T1&gt; <em> IDENT  T2&gt; <span class="sig-paren">&#xFF09; T3&gt; <a class="headerlink" href="#sqlalchemy.ext.baked.Result.get" title="Permalink to this definition">&#xB6; T4&gt;</a></span></em></span></code></span></dt><dd><p><span class="yiyi-st" id="yiyi-168">&#x57FA;&#x4E8E;&#x8EAB;&#x4EFD;&#x68C0;&#x7D22;&#x5BF9;&#x8C61;&#x3002;</span></p><p><span class="yiyi-st" id="yiyi-169">&#x76F8;&#x5F53;&#x4E8E;<a class="reference internal" href="query.html#sqlalchemy.orm.query.Query.get" title="sqlalchemy.orm.query.Query.get"><code class="xref py py-meth docutils literal"><span class="pre">Query.get()</span></code></a>&#x3002;</span></p></dd></dl><dl class="method"><dt id="sqlalchemy.ext.baked.Result.one"><span class="yiyi-st" id="yiyi-170"><code class="descname">&#x4E00;&#x4E2A; T0&gt; <span class="sig-paren">&#xFF08; T1&gt; <span class="sig-paren">&#xFF09; T2&gt; <a class="headerlink" href="#sqlalchemy.ext.baked.Result.one" title="Permalink to this definition">&#xB6; T3&gt;</a></span></span></code></span></dt><dd><p><span class="yiyi-st" id="yiyi-171">&#x53EA;&#x8FD4;&#x56DE;&#x4E00;&#x4E2A;&#x7ED3;&#x679C;&#x6216;&#x5F15;&#x53D1;&#x5F02;&#x5E38;&#x3002;</span></p><p><span class="yiyi-st" id="yiyi-172">&#x7B49;&#x540C;&#x4E8E;<a class="reference internal" href="query.html#sqlalchemy.orm.query.Query.one" title="sqlalchemy.orm.query.Query.one"><code class="xref py py-meth docutils literal"><span class="pre">Query.one()</span></code></a>&#x3002;</span></p></dd></dl><dl class="method"><dt id="sqlalchemy.ext.baked.Result.one_or_none"><span class="yiyi-st" id="yiyi-173"><code class="descname"> one_or_none  T0&gt; <span class="sig-paren">&#xFF08; T1&gt; <span class="sig-paren">&#xFF09; T2&gt; <a class="headerlink" href="#sqlalchemy.ext.baked.Result.one_or_none" title="Permalink to this definition">&#xB6; T3&gt;</a></span></span></code></span></dt><dd><p><span class="yiyi-st" id="yiyi-174">&#x8FD4;&#x56DE;&#x4E00;&#x4E2A;&#x6216;&#x96F6;&#x4E2A;&#x7ED3;&#x679C;&#xFF0C;&#x6216;&#x5F15;&#x53D1;&#x591A;&#x884C;&#x5F02;&#x5E38;&#x3002;</span></p><p><span class="yiyi-st" id="yiyi-175">&#x7B49;&#x540C;&#x4E8E;<a class="reference internal" href="query.html#sqlalchemy.orm.query.Query.one_or_none" title="sqlalchemy.orm.query.Query.one_or_none"><code class="xref py py-meth docutils literal"><span class="pre">Query.one_or_none()</span></code></a>&#x3002;</span></p><div class="versionadded"><p><span class="yiyi-st" id="yiyi-176"><span class="versionmodified">&#x7248;&#x672C;1.0.9&#x4E2D;&#x7684;&#x65B0;&#x529F;&#x80FD;</span></span></p></div></dd></dl><dl class="method"><dt id="sqlalchemy.ext.baked.Result.params"><span class="yiyi-st" id="yiyi-177"><code class="descname">params</code> <span class="sig-paren">&#xFF08;</span> <em>* args</em>&#xFF0C;<em>** kw</em> <span class="sig-paren">&#xFF09;</span> <a class="headerlink" href="#sqlalchemy.ext.baked.Result.params" title="Permalink to this definition">T5&gt;</a></span></dt><dd><p><span class="yiyi-st" id="yiyi-178">&#x6307;&#x5B9A;&#x8981;&#x66FF;&#x6362;&#x5230;&#x5B57;&#x7B26;&#x4E32;SQL&#x8BED;&#x53E5;&#x4E2D;&#x7684;&#x53C2;&#x6570;&#x3002;</span></p></dd></dl></dd></dl><dl class="function"><dt id="sqlalchemy.ext.baked.bake_lazy_loaders"><span class="yiyi-st" id="yiyi-179"><code class="descclassname"> sqlalchemy.ext.baked&#x3002; T0&gt; <code class="descname"> bake_lazy_loaders  T1&gt; <span class="sig-paren">&#xFF08; T2&gt; <span class="sig-paren">&#xFF09; T3&gt; <a class="headerlink" href="#sqlalchemy.ext.baked.bake_lazy_loaders" title="Permalink to this definition">&#xB6; T4&gt;</a></span></span></code></code></span></dt><dd><p><span class="yiyi-st" id="yiyi-180">&#x4E3A;&#x5168;&#x7CFB;&#x7EDF;&#x7684;&#x6240;&#x6709;lazyloaders&#x542F;&#x7528;&#x70D8;&#x7119;&#x67E5;&#x8BE2;&#x3002;</span></p><p><span class="yiyi-st" id="yiyi-181">&#x8FD9;&#x4E2A;&#x64CD;&#x4F5C;&#x5BF9;&#x4E8E;&#x6240;&#x6709;&#x61D2;&#x60F0;&#x7684;&#x52A0;&#x8F7D;&#x5668;&#x5E94;&#x8BE5;&#x662F;&#x5B89;&#x5168;&#x7684;&#xFF0C;&#x5E76;&#x4E14;&#x4F1A;&#x51CF;&#x5C11;&#x8FD9;&#x4E9B;&#x64CD;&#x4F5C;&#x7684;Python&#x5F00;&#x9500;&#x3002;</span></p></dd></dl><dl class="function"><dt id="sqlalchemy.ext.baked.unbake_lazy_loaders"><span class="yiyi-st" id="yiyi-182"><code class="descclassname"> sqlalchemy.ext.baked&#x3002; T0&gt; <code class="descname"> unbake_lazy_loaders  T1&gt; <span class="sig-paren">&#xFF08; T2&gt; <span class="sig-paren">&#xFF09; T3&gt; <a class="headerlink" href="#sqlalchemy.ext.baked.unbake_lazy_loaders" title="Permalink to this definition">&#xB6; T4&gt;</a></span></span></code></code></span></dt><dd><p><span class="yiyi-st" id="yiyi-183">&#x7981;&#x6B62;&#x5728;&#x7CFB;&#x7EDF;&#x8303;&#x56F4;&#x5185;&#x4E3A;&#x6240;&#x6709;lazyloaders&#x4F7F;&#x7528;&#x70D8;&#x7119;&#x67E5;&#x8BE2;&#x3002;</span></p><p><span class="yiyi-st" id="yiyi-184">&#x8BE5;&#x64CD;&#x4F5C;&#x5C06;&#x6062;&#x590D;<a class="reference internal" href="#sqlalchemy.ext.baked.bake_lazy_loaders" title="sqlalchemy.ext.baked.bake_lazy_loaders"><code class="xref py py-func docutils literal"><span class="pre">bake_lazy_loaders()</span></code></a>&#x4EA7;&#x751F;&#x7684;&#x66F4;&#x6539;&#x3002;</span></p></dd></dl><dl class="function"><dt id="sqlalchemy.ext.baked.baked_lazyload"><span class="yiyi-st" id="yiyi-185"><code class="descclassname"> sqlalchemy.ext.baked&#x3002; T0&gt; <code class="descname"> baked_lazyload  T1&gt; <span class="sig-paren">&#xFF08; T2&gt; <em> *&#x952E; T3&gt; <span class="sig-paren">&#xFF09; T4&gt; <a class="headerlink" href="#sqlalchemy.ext.baked.baked_lazyload" title="Permalink to this definition">&#xB6;  T5&gt;</a></span></em></span></code></code></span></dt><dd><p><span class="yiyi-st" id="yiyi-186">&#x6307;&#x793A;&#x5E94;&#x8BE5;&#x4F7F;&#x7528;&#x52A0;&#x8F7D;&#x4E2D;&#x4F7F;&#x7528;&#x7684;&#x201C;&#x70D8;&#x7119;&#x201D;&#x67E5;&#x8BE2;&#x4F7F;&#x7528;&#x201C;&#x5EF6;&#x8FDF;&#x201D;&#x52A0;&#x8F7D;&#x6765;&#x52A0;&#x8F7D;&#x7ED9;&#x5B9A;&#x5C5E;&#x6027;&#x3002;</span></p></dd></dl><dl class="function"><dt id="sqlalchemy.ext.baked.baked_lazyload_all"><span class="yiyi-st" id="yiyi-187"><code class="descclassname"> sqlalchemy.ext.baked&#x3002; T0&gt; <code class="descname"> baked_lazyload_all  T1&gt; <span class="sig-paren">&#xFF08; T2&gt; <em> *&#x952E; T3&gt; <span class="sig-paren">&#xFF09; T4&gt; <a class="headerlink" href="#sqlalchemy.ext.baked.baked_lazyload_all" title="Permalink to this definition">&#xB6;  T5&gt;</a></span></em></span></code></code></span></dt><dd><p><span class="yiyi-st" id="yiyi-188">&#x4E3A;<code class="xref py py-func docutils literal"><span class="pre">orm.baked_lazyload()</span></code>&#x751F;&#x6210;&#x4E00;&#x4E2A;&#x72EC;&#x7ACB;&#x7684;&#x201C;&#x5168;&#x90E8;&#x201D;&#x9009;&#x9879;&#x3002;</span></p><div class="deprecated"><p><span class="yiyi-st" id="yiyi-189"><span class="versionmodified">&#x4ECE;&#x7248;&#x672C;0.9.0&#x5F00;&#x59CB;&#x5F03;&#x7528;&#xFF1A;</span>&#x201C;_all()&#x201D;&#x6837;&#x5F0F;&#x88AB;&#x65B9;&#x6CD5;&#x94FE;&#x63A5;&#x53D6;&#x4EE3;&#xFF0C;&#x4F8B;&#x5982;&#xFF1A;</span></p><div class="highlight-python"><div class="highlight"><pre><span></span><span class="n">session</span><span class="o">.</span><span class="n">query</span><span class="p">(</span><span class="n">MyClass</span><span class="p">)</span><span class="o">.</span><span class="n">options</span><span class="p">(</span>
    <span class="n">baked_lazyload</span><span class="p">(</span><span class="s2">&quot;someattribute&quot;</span><span class="p">)</span><span class="o">.</span><span class="n">baked_lazyload</span><span class="p">(</span><span class="s2">&quot;anotherattribute&quot;</span><span class="p">)</span>
<span class="p">)</span></pre></div></div></div></dd></dl></div>