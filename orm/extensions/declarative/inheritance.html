<h1><span class="yiyi-st" id="yiyi-56">&#x7EE7;&#x627F;&#x914D;&#x7F6E;<a class="headerlink" href="#inheritance-configuration" title="Permalink to this headline">&#xB6;</a></span></h1><p><span class="yiyi-st" id="yiyi-57">&#x58F0;&#x660E;&#x5F0F;&#x652F;&#x6301;&#x5C3D;&#x53EF;&#x80FD;&#x76F4;&#x89C2;&#x7684;&#x6240;&#x6709;&#x4E09;&#x79CD;&#x5F62;&#x5F0F;&#x7684;&#x7EE7;&#x627F;&#x3002;</span><span class="yiyi-st" id="yiyi-58"><code class="docutils literal"><span class="pre">inherits</span></code> mapper&#x5173;&#x952E;&#x5B57;&#x53C2;&#x6570;&#x4E0D;&#x662F;&#x5FC5;&#x9700;&#x7684;&#xFF0C;&#x56E0;&#x4E3A;&#x58F0;&#x660E;&#x5C06;&#x4ECE;&#x7C7B;&#x672C;&#x8EAB;&#x786E;&#x5B9A;&#x5B83;&#x3002;</span><span class="yiyi-st" id="yiyi-59">&#x5404;&#x79CD;&#x201C;&#x591A;&#x6001;&#x201D;&#x5173;&#x952E;&#x5B57;&#x53C2;&#x6570;&#x4F7F;&#x7528;<code class="docutils literal"><span class="pre">__mapper_args__</span></code>&#x6307;&#x5B9A;&#x3002;</span></p><div class="admonition seealso"><p class="first admonition-title"><span class="yiyi-st" id="yiyi-60">&#x4E5F;&#x53EF;&#x4EE5;&#x770B;&#x770B;</span></p><p class="last"><span class="yiyi-st" id="yiyi-61"><a class="reference internal" href="inheritance.html"><span>Mapping Class Inheritance Hierarchies</span></a>  - &#x4F7F;&#x7528;Declarative&#x7EE7;&#x627F;&#x6620;&#x5C04;&#x7684;&#x4E00;&#x822C;&#x4ECB;&#x7ECD;&#x3002;</span></p></div><div class="section" id="joined-table-inheritance"><h2><span class="yiyi-st" id="yiyi-62">&#x8FDE;&#x63A5;&#x8868;&#x7EE7;&#x627F;<a class="headerlink" href="#joined-table-inheritance" title="Permalink to this headline">&#xB6;</a></span></h2><p><span class="yiyi-st" id="yiyi-63">&#x8054;&#x5408;&#x8868;&#x7EE7;&#x627F;&#x88AB;&#x5B9A;&#x4E49;&#x4E3A;&#x5B9A;&#x4E49;&#x5176;&#x81EA;&#x5DF1;&#x7684;&#x8868;&#x7684;&#x5B50;&#x7C7B;&#xFF1A;</span></p><div class="highlight-python"><div class="highlight"><pre><span></span><span class="k">class</span> <span class="nc">Person</span><span class="p">(</span><span class="n">Base</span><span class="p">):</span>
    <span class="n">__tablename__</span> <span class="o">=</span> <span class="s1">&apos;people&apos;</span>
    <span class="nb">id</span> <span class="o">=</span> <span class="n">Column</span><span class="p">(</span><span class="n">Integer</span><span class="p">,</span> <span class="n">primary_key</span><span class="o">=</span><span class="bp">True</span><span class="p">)</span>
    <span class="n">discriminator</span> <span class="o">=</span> <span class="n">Column</span><span class="p">(</span><span class="s1">&apos;type&apos;</span><span class="p">,</span> <span class="n">String</span><span class="p">(</span><span class="mi">50</span><span class="p">))</span>
    <span class="n">__mapper_args__</span> <span class="o">=</span> <span class="p">{</span><span class="s1">&apos;polymorphic_on&apos;</span><span class="p">:</span> <span class="n">discriminator</span><span class="p">}</span>

<span class="k">class</span> <span class="nc">Engineer</span><span class="p">(</span><span class="n">Person</span><span class="p">):</span>
    <span class="n">__tablename__</span> <span class="o">=</span> <span class="s1">&apos;engineers&apos;</span>
    <span class="n">__mapper_args__</span> <span class="o">=</span> <span class="p">{</span><span class="s1">&apos;polymorphic_identity&apos;</span><span class="p">:</span> <span class="s1">&apos;engineer&apos;</span><span class="p">}</span>
    <span class="nb">id</span> <span class="o">=</span> <span class="n">Column</span><span class="p">(</span><span class="n">Integer</span><span class="p">,</span> <span class="n">ForeignKey</span><span class="p">(</span><span class="s1">&apos;people.id&apos;</span><span class="p">),</span> <span class="n">primary_key</span><span class="o">=</span><span class="bp">True</span><span class="p">)</span>
    <span class="n">primary_language</span> <span class="o">=</span> <span class="n">Column</span><span class="p">(</span><span class="n">String</span><span class="p">(</span><span class="mi">50</span><span class="p">))</span></pre></div></div><p><span class="yiyi-st" id="yiyi-64">Note that above, the <code class="docutils literal"><span class="pre">Engineer.id</span></code> attribute, since it shares the same attribute name as the <code class="docutils literal"><span class="pre">Person.id</span></code> attribute, will in fact represent the <code class="docutils literal"><span class="pre">people.id</span></code> and <code class="docutils literal"><span class="pre">engineers.id</span></code> columns together, with the &#x201C;Engineer.id&#x201D; column taking precedence if queried directly. </span><span class="yiyi-st" id="yiyi-65">&#x8981;&#x4E3A;<code class="docutils literal"><span class="pre">Engineer</span></code>&#x7C7B;&#x63D0;&#x4F9B;&#x4EC5;&#x8868;&#x793A;<code class="docutils literal"><span class="pre">engineers.id</span></code>&#x5217;&#x7684;&#x5C5E;&#x6027;&#xFF0C;&#x8BF7;&#x4E3A;&#x5176;&#x6307;&#x5B9A;&#x4E00;&#x4E2A;&#x4E0D;&#x540C;&#x7684;&#x5C5E;&#x6027;&#x540D;&#x79F0;&#xFF1A;</span></p><div class="highlight-python"><div class="highlight"><pre><span></span><span class="k">class</span> <span class="nc">Engineer</span><span class="p">(</span><span class="n">Person</span><span class="p">):</span>
    <span class="n">__tablename__</span> <span class="o">=</span> <span class="s1">&apos;engineers&apos;</span>
    <span class="n">__mapper_args__</span> <span class="o">=</span> <span class="p">{</span><span class="s1">&apos;polymorphic_identity&apos;</span><span class="p">:</span> <span class="s1">&apos;engineer&apos;</span><span class="p">}</span>
    <span class="n">engineer_id</span> <span class="o">=</span> <span class="n">Column</span><span class="p">(</span><span class="s1">&apos;id&apos;</span><span class="p">,</span> <span class="n">Integer</span><span class="p">,</span> <span class="n">ForeignKey</span><span class="p">(</span><span class="s1">&apos;people.id&apos;</span><span class="p">),</span>
                                                <span class="n">primary_key</span><span class="o">=</span><span class="bp">True</span><span class="p">)</span>
    <span class="n">primary_language</span> <span class="o">=</span> <span class="n">Column</span><span class="p">(</span><span class="n">String</span><span class="p">(</span><span class="mi">50</span><span class="p">))</span></pre></div></div></div><div class="section" id="single-table-inheritance"><h2><span class="yiyi-st" id="yiyi-66">&#x5355;&#x8868;&#x7EE7;&#x627F;<a class="headerlink" href="#single-table-inheritance" title="Permalink to this headline">&#xB6;</a></span></h2><p><span class="yiyi-st" id="yiyi-67">&#x5355;&#x8868;&#x7EE7;&#x627F;&#x88AB;&#x5B9A;&#x4E49;&#x4E3A;&#x6CA1;&#x6709;&#x81EA;&#x5DF1;&#x7684;&#x8868;&#x7684;&#x5B50;&#x7C7B;&#xFF1B;&#x60A8;&#x53EA;&#x9700;&#x7701;&#x7565;<code class="docutils literal"><span class="pre">__table__</span></code>&#x548C;<code class="docutils literal"><span class="pre">__tablename__</span></code>&#x5C5E;&#x6027;&#xFF1A;</span></p><div class="highlight-python"><div class="highlight"><pre><span></span><span class="k">class</span> <span class="nc">Person</span><span class="p">(</span><span class="n">Base</span><span class="p">):</span>
    <span class="n">__tablename__</span> <span class="o">=</span> <span class="s1">&apos;people&apos;</span>
    <span class="nb">id</span> <span class="o">=</span> <span class="n">Column</span><span class="p">(</span><span class="n">Integer</span><span class="p">,</span> <span class="n">primary_key</span><span class="o">=</span><span class="bp">True</span><span class="p">)</span>
    <span class="n">discriminator</span> <span class="o">=</span> <span class="n">Column</span><span class="p">(</span><span class="s1">&apos;type&apos;</span><span class="p">,</span> <span class="n">String</span><span class="p">(</span><span class="mi">50</span><span class="p">))</span>
    <span class="n">__mapper_args__</span> <span class="o">=</span> <span class="p">{</span><span class="s1">&apos;polymorphic_on&apos;</span><span class="p">:</span> <span class="n">discriminator</span><span class="p">}</span>

<span class="k">class</span> <span class="nc">Engineer</span><span class="p">(</span><span class="n">Person</span><span class="p">):</span>
    <span class="n">__mapper_args__</span> <span class="o">=</span> <span class="p">{</span><span class="s1">&apos;polymorphic_identity&apos;</span><span class="p">:</span> <span class="s1">&apos;engineer&apos;</span><span class="p">}</span>
    <span class="n">primary_language</span> <span class="o">=</span> <span class="n">Column</span><span class="p">(</span><span class="n">String</span><span class="p">(</span><span class="mi">50</span><span class="p">))</span></pre></div></div><p><span class="yiyi-st" id="yiyi-68">&#x5F53;&#x914D;&#x7F6E;&#x4E0A;&#x8FF0;&#x6620;&#x5C04;&#x5668;&#x65F6;&#xFF0C;&#x5728;&#x5B9A;&#x4E49;<code class="docutils literal"><span class="pre">primary_language</span></code>&#x5217;&#x4E4B;&#x524D;&#xFF0C;&#x5C06;<code class="docutils literal"><span class="pre">Person</span></code>&#x7C7B;&#x6620;&#x5C04;&#x5230;<code class="docutils literal"><span class="pre">people</span></code>&#x8868;<em>&#xFF0C;&#x800C;&#x8FD9;&#x4E00;&#x5217;&#x5C06;&#x4E0D;&#x4F1A;&#x5305;&#x542B;&#x5728;&#x5B83;&#x81EA;&#x5DF1;&#x7684;&#x6620;&#x5C04;&#x4E2D;&#x3002;</em></span><span class="yiyi-st" id="yiyi-69">&#x5F53;<code class="docutils literal"><span class="pre">Engineer</span></code>&#x7136;&#x540E;&#x5B9A;&#x4E49;<code class="docutils literal"><span class="pre">primary_language</span></code>&#x5217;&#x65F6;&#xFF0C;&#x8BE5;&#x5217;&#x5C06;&#x6DFB;&#x52A0;&#x5230;<code class="docutils literal"><span class="pre">people</span></code>&#x8868;&#x4E2D;&#xFF0C;&#x4EE5;&#x4FBF;&#x5B83;&#x5305;&#x542B;&#x5728;<code class="docutils literal"><span class="pre">Engineer</span></code>&#x4E5F;&#x662F;&#x8868;&#x683C;&#x5168;&#x90E8;&#x5217;&#x7684;&#x4E00;&#x90E8;&#x5206;&#x3002;</span><span class="yiyi-st" id="yiyi-70">&#x672A;&#x6620;&#x5C04;&#x5230;<code class="docutils literal"><span class="pre">Person</span></code>&#x7684;&#x5217;&#x4E5F;&#x4F7F;&#x7528;<code class="docutils literal"><span class="pre">exclude_properties</span></code>&#x6620;&#x5C04;&#x5668;&#x53C2;&#x6570;&#x4ECE;&#x4EFB;&#x4F55;&#x5176;&#x4ED6;&#x5355;&#x4E2A;&#x6216;&#x5DF2;&#x52A0;&#x5165;&#x7684;&#x7EE7;&#x627F;&#x7C7B;&#x4E2D;&#x6392;&#x9664;&#x3002;</span><span class="yiyi-st" id="yiyi-71">Below, <code class="docutils literal"><span class="pre">Manager</span></code> will have all the attributes of <code class="docutils literal"><span class="pre">Person</span></code> and <code class="docutils literal"><span class="pre">Manager</span></code> but <em>not</em> the <code class="docutils literal"><span class="pre">primary_language</span></code> attribute of <code class="docutils literal"><span class="pre">Engineer</span></code>:</span></p><div class="highlight-python"><div class="highlight"><pre><span></span><span class="k">class</span> <span class="nc">Manager</span><span class="p">(</span><span class="n">Person</span><span class="p">):</span>
    <span class="n">__mapper_args__</span> <span class="o">=</span> <span class="p">{</span><span class="s1">&apos;polymorphic_identity&apos;</span><span class="p">:</span> <span class="s1">&apos;manager&apos;</span><span class="p">}</span>
    <span class="n">golf_swing</span> <span class="o">=</span> <span class="n">Column</span><span class="p">(</span><span class="n">String</span><span class="p">(</span><span class="mi">50</span><span class="p">))</span></pre></div></div><p><span class="yiyi-st" id="yiyi-72">The attribute exclusion logic is provided by the <code class="docutils literal"><span class="pre">exclude_properties</span></code> mapper argument, and declarative&#x2019;s default behavior can be disabled by passing an explicit <code class="docutils literal"><span class="pre">exclude_properties</span></code> collection (empty or otherwise) to the <code class="docutils literal"><span class="pre">__mapper_args__</span></code>.</span></p><div class="section" id="resolving-column-conflicts"><h3><span class="yiyi-st" id="yiyi-73">&#x89E3;&#x51B3;&#x5217;&#x51B2;&#x7A81;<a class="headerlink" href="#resolving-column-conflicts" title="Permalink to this headline">&#xB6;</a></span></h3><p><span class="yiyi-st" id="yiyi-74">&#x8BF7;&#x6CE8;&#x610F;&#xFF0C;<code class="docutils literal"><span class="pre">primary_language</span></code>&#x548C;<code class="docutils literal"><span class="pre">golf_swing</span></code>&#x5217;&#x88AB;&#x201C;&#x5411;&#x4E0A;&#x79FB;&#x52A8;&#x201D;&#x4EE5;&#x5E94;&#x7528;&#x4E8E;<code class="docutils literal"><span class="pre">Person.__table__</span></code>&#xFF0C;&#x56E0;&#x4E3A;&#x5B83;&#x4EEC;&#x5728;&#x6CA1;&#x6709;&#x81EA;&#x5DF1;&#x7684;&#x8868;&#x7684;&#x5B50;&#x7C7B;&#x3002;</span><span class="yiyi-st" id="yiyi-75">&#x5F53;&#x4E24;&#x4E2A;&#x5B50;&#x7C7B;&#x60F3;&#x8981;&#x6307;&#x5B9A;<em>&#x76F8;&#x540C;&#x7684;</em>&#x5217;&#x65F6;&#x51FA;&#x73B0;&#x4E00;&#x4E2A;&#x68D8;&#x624B;&#x7684;&#x60C5;&#x51B5;&#xFF0C;&#x5982;&#x4E0B;&#x6240;&#x793A;&#xFF1A;</span></p><div class="highlight-python"><div class="highlight"><pre><span></span><span class="k">class</span> <span class="nc">Person</span><span class="p">(</span><span class="n">Base</span><span class="p">):</span>
    <span class="n">__tablename__</span> <span class="o">=</span> <span class="s1">&apos;people&apos;</span>
    <span class="nb">id</span> <span class="o">=</span> <span class="n">Column</span><span class="p">(</span><span class="n">Integer</span><span class="p">,</span> <span class="n">primary_key</span><span class="o">=</span><span class="bp">True</span><span class="p">)</span>
    <span class="n">discriminator</span> <span class="o">=</span> <span class="n">Column</span><span class="p">(</span><span class="s1">&apos;type&apos;</span><span class="p">,</span> <span class="n">String</span><span class="p">(</span><span class="mi">50</span><span class="p">))</span>
    <span class="n">__mapper_args__</span> <span class="o">=</span> <span class="p">{</span><span class="s1">&apos;polymorphic_on&apos;</span><span class="p">:</span> <span class="n">discriminator</span><span class="p">}</span>

<span class="k">class</span> <span class="nc">Engineer</span><span class="p">(</span><span class="n">Person</span><span class="p">):</span>
    <span class="n">__mapper_args__</span> <span class="o">=</span> <span class="p">{</span><span class="s1">&apos;polymorphic_identity&apos;</span><span class="p">:</span> <span class="s1">&apos;engineer&apos;</span><span class="p">}</span>
    <span class="n">start_date</span> <span class="o">=</span> <span class="n">Column</span><span class="p">(</span><span class="n">DateTime</span><span class="p">)</span>

<span class="k">class</span> <span class="nc">Manager</span><span class="p">(</span><span class="n">Person</span><span class="p">):</span>
    <span class="n">__mapper_args__</span> <span class="o">=</span> <span class="p">{</span><span class="s1">&apos;polymorphic_identity&apos;</span><span class="p">:</span> <span class="s1">&apos;manager&apos;</span><span class="p">}</span>
    <span class="n">start_date</span> <span class="o">=</span> <span class="n">Column</span><span class="p">(</span><span class="n">DateTime</span><span class="p">)</span></pre></div></div><p><span class="yiyi-st" id="yiyi-76">&#x4E0A;&#x9762;&#xFF0C;&#x5728;<code class="docutils literal"><span class="pre">Engineer</span></code>&#x548C;<code class="docutils literal"><span class="pre">Manager</span></code>&#x4E0A;&#x58F0;&#x660E;&#x7684;<code class="docutils literal"><span class="pre">start_date</span></code>&#x5217;&#x5C06;&#x5BFC;&#x81F4;&#x9519;&#x8BEF;&#xFF1A;</span></p><div class="highlight-python"><div class="highlight"><pre><span></span>sqlalchemy.exc.ArgumentError: Column &apos;start_date&apos; on class
&lt;class &apos;__main__.Manager&apos;&gt; conflicts with existing
column &apos;people.start_date&apos;</pre></div></div><p><span class="yiyi-st" id="yiyi-77">&#x5728;&#x8FD9;&#x79CD;&#x60C5;&#x51B5;&#x4E0B;&#xFF0C;Declarative&#x65E0;&#x6CD5;&#x786E;&#x5B9A;&#x610F;&#x56FE;&#xFF0C;&#x7279;&#x522B;&#x662F;&#x5982;&#x679C;<code class="docutils literal"><span class="pre">start_date</span></code>&#x5217;&#x5305;&#x542B;&#x4E0D;&#x540C;&#x7684;&#x7C7B;&#x578B;&#x3002;</span><span class="yiyi-st" id="yiyi-78">A situation like this can be resolved by using <a class="reference internal" href="api.html#sqlalchemy.ext.declarative.declared_attr" title="sqlalchemy.ext.declarative.declared_attr"><code class="xref py py-class docutils literal"><span class="pre">declared_attr</span></code></a> to define the <a class="reference internal" href="core_metadata.html#sqlalchemy.schema.Column" title="sqlalchemy.schema.Column"><code class="xref py py-class docutils literal"><span class="pre">Column</span></code></a> conditionally, taking care to return the <strong>existing column</strong> via the parent <code class="docutils literal"><span class="pre">__table__</span></code> if it already exists:</span></p><div class="highlight-python"><div class="highlight"><pre><span></span><span class="kn">from</span> <span class="nn">sqlalchemy.ext.declarative</span> <span class="kn">import</span> <span class="n">declared_attr</span>

<span class="k">class</span> <span class="nc">Person</span><span class="p">(</span><span class="n">Base</span><span class="p">):</span>
    <span class="n">__tablename__</span> <span class="o">=</span> <span class="s1">&apos;people&apos;</span>
    <span class="nb">id</span> <span class="o">=</span> <span class="n">Column</span><span class="p">(</span><span class="n">Integer</span><span class="p">,</span> <span class="n">primary_key</span><span class="o">=</span><span class="bp">True</span><span class="p">)</span>
    <span class="n">discriminator</span> <span class="o">=</span> <span class="n">Column</span><span class="p">(</span><span class="s1">&apos;type&apos;</span><span class="p">,</span> <span class="n">String</span><span class="p">(</span><span class="mi">50</span><span class="p">))</span>
    <span class="n">__mapper_args__</span> <span class="o">=</span> <span class="p">{</span><span class="s1">&apos;polymorphic_on&apos;</span><span class="p">:</span> <span class="n">discriminator</span><span class="p">}</span>

<span class="k">class</span> <span class="nc">Engineer</span><span class="p">(</span><span class="n">Person</span><span class="p">):</span>
    <span class="n">__mapper_args__</span> <span class="o">=</span> <span class="p">{</span><span class="s1">&apos;polymorphic_identity&apos;</span><span class="p">:</span> <span class="s1">&apos;engineer&apos;</span><span class="p">}</span>

    <span class="nd">@declared_attr</span>
    <span class="k">def</span> <span class="nf">start_date</span><span class="p">(</span><span class="n">cls</span><span class="p">):</span>
        <span class="s2">&quot;Start date column, if not present already.&quot;</span>
        <span class="k">return</span> <span class="n">Person</span><span class="o">.</span><span class="n">__table__</span><span class="o">.</span><span class="n">c</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="s1">&apos;start_date&apos;</span><span class="p">,</span> <span class="n">Column</span><span class="p">(</span><span class="n">DateTime</span><span class="p">))</span>

<span class="k">class</span> <span class="nc">Manager</span><span class="p">(</span><span class="n">Person</span><span class="p">):</span>
    <span class="n">__mapper_args__</span> <span class="o">=</span> <span class="p">{</span><span class="s1">&apos;polymorphic_identity&apos;</span><span class="p">:</span> <span class="s1">&apos;manager&apos;</span><span class="p">}</span>

    <span class="nd">@declared_attr</span>
    <span class="k">def</span> <span class="nf">start_date</span><span class="p">(</span><span class="n">cls</span><span class="p">):</span>
        <span class="s2">&quot;Start date column, if not present already.&quot;</span>
        <span class="k">return</span> <span class="n">Person</span><span class="o">.</span><span class="n">__table__</span><span class="o">.</span><span class="n">c</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="s1">&apos;start_date&apos;</span><span class="p">,</span> <span class="n">Column</span><span class="p">(</span><span class="n">DateTime</span><span class="p">))</span></pre></div></div><p><span class="yiyi-st" id="yiyi-79">&#x5728;&#x4E0A;&#x9762;&#xFF0C;&#x5F53;&#x6620;&#x5C04;<code class="docutils literal"><span class="pre">Manager</span></code>&#x65F6;&#xFF0C;<code class="docutils literal"><span class="pre">start_date</span></code>&#x5217;&#x5DF2;&#x7ECF;&#x5B58;&#x5728;&#x4E8E;<code class="docutils literal"><span class="pre">Person</span></code>&#x7C7B;&#x4E2D;&#x3002;</span><span class="yiyi-st" id="yiyi-80">&#x5728;&#x8FD9;&#x79CD;&#x60C5;&#x51B5;&#x4E0B;&#xFF0C;Declarative&#x8BA9;&#x6211;&#x4EEC;&#x8FD4;&#x56DE;<a class="reference internal" href="core_metadata.html#sqlalchemy.schema.Column" title="sqlalchemy.schema.Column"><code class="xref py py-class docutils literal"><span class="pre">Column</span></code></a>&#xFF0C;&#x56E0;&#x4E3A;&#x5B83;&#x77E5;&#x9053;&#x8DF3;&#x8FC7;&#x91CD;&#x65B0;&#x5206;&#x914D;&#x540C;&#x4E00;&#x5217;&#x3002;</span><span class="yiyi-st" id="yiyi-81">If the mapping is mis-configured such that the <code class="docutils literal"><span class="pre">start_date</span></code> column is accidentally re-assigned to a different table (such as, if we changed <code class="docutils literal"><span class="pre">Manager</span></code> to be joined inheritance without fixing <code class="docutils literal"><span class="pre">start_date</span></code>), an error is raised which indicates an existing <a class="reference internal" href="core_metadata.html#sqlalchemy.schema.Column" title="sqlalchemy.schema.Column"><code class="xref py py-class docutils literal"><span class="pre">Column</span></code></a> is trying to be re-assigned to a different owning <a class="reference internal" href="core_metadata.html#sqlalchemy.schema.Table" title="sqlalchemy.schema.Table"><code class="xref py py-class docutils literal"><span class="pre">Table</span></code></a>.</span></p><div class="versionadded"><p><span class="yiyi-st" id="yiyi-82"><span class="versionmodified">0.8&#x7248;&#x4E2D;&#x7684;&#x65B0;&#x529F;&#x80FD;</span> <a class="reference internal" href="api.html#sqlalchemy.ext.declarative.declared_attr" title="sqlalchemy.ext.declarative.declared_attr"><code class="xref py py-class docutils literal"><span class="pre">declared_attr</span></code></a>&#x53EF;&#x7528;&#x4E8E;&#x975E;mixin&#x7C7B;&#xFF0C;&#x5E76;&#x4E14;&#x8FD4;&#x56DE;&#x7684;<a class="reference internal" href="core_metadata.html#sqlalchemy.schema.Column" title="sqlalchemy.schema.Column"><code class="xref py py-class docutils literal"><span class="pre">Column</span></code></a>&#x6216;&#x5176;&#x4ED6;&#x6620;&#x5C04;&#x5C5E;&#x6027;&#x5C06;&#x5E94;&#x7528;&#x4E8E;&#x6620;&#x5C04;&#x4E3A;&#x5176;&#x4ED6;&#x4EFB;&#x4F55;&#x5C5E;&#x6027;&#x3002;</span><span class="yiyi-st" id="yiyi-83">&#x4EE5;&#x524D;&#xFF0C;&#x7ED3;&#x679C;&#x5C5E;&#x6027;&#x5C06;&#x88AB;&#x5FFD;&#x7565;&#xFF0C;&#x5E76;&#x4E14;&#x8FD8;&#x4F1A;&#x5728;&#x521B;&#x5EFA;&#x5B50;&#x7C7B;&#x65F6;&#x5BFC;&#x81F4;&#x53D1;&#x51FA;&#x8B66;&#x544A;&#x3002;</span></p></div><div class="versionadded"><p><span class="yiyi-st" id="yiyi-84"><span class="versionmodified">New in version 0.8: </span><a class="reference internal" href="api.html#sqlalchemy.ext.declarative.declared_attr" title="sqlalchemy.ext.declarative.declared_attr"><code class="xref py py-class docutils literal"><span class="pre">declared_attr</span></code></a>, when used either with a mixin or non-mixin declarative class, can return an existing <a class="reference internal" href="core_metadata.html#sqlalchemy.schema.Column" title="sqlalchemy.schema.Column"><code class="xref py py-class docutils literal"><span class="pre">Column</span></code></a> already assigned to the parent <a class="reference internal" href="core_metadata.html#sqlalchemy.schema.Table" title="sqlalchemy.schema.Table"><code class="xref py py-class docutils literal"><span class="pre">Table</span></code></a>, to indicate that the re-assignment of the <a class="reference internal" href="core_metadata.html#sqlalchemy.schema.Column" title="sqlalchemy.schema.Column"><code class="xref py py-class docutils literal"><span class="pre">Column</span></code></a> should be skipped, however should still be mapped on the target class, in order to resolve duplicate column conflicts.</span></p></div><p><span class="yiyi-st" id="yiyi-85">mixin&#x7C7B;&#x53EF;&#x4EE5;&#x4F7F;&#x7528;&#x76F8;&#x540C;&#x7684;&#x6982;&#x5FF5;&#xFF08;&#x8BF7;&#x53C2;&#x9605;<a class="reference internal" href="mixins.html#declarative-mixins"><span>Mixin and Custom Base Classes</span></a>&#xFF09;&#xFF1A;</span></p><div class="highlight-python"><div class="highlight"><pre><span></span><span class="k">class</span> <span class="nc">Person</span><span class="p">(</span><span class="n">Base</span><span class="p">):</span>
    <span class="n">__tablename__</span> <span class="o">=</span> <span class="s1">&apos;people&apos;</span>
    <span class="nb">id</span> <span class="o">=</span> <span class="n">Column</span><span class="p">(</span><span class="n">Integer</span><span class="p">,</span> <span class="n">primary_key</span><span class="o">=</span><span class="bp">True</span><span class="p">)</span>
    <span class="n">discriminator</span> <span class="o">=</span> <span class="n">Column</span><span class="p">(</span><span class="s1">&apos;type&apos;</span><span class="p">,</span> <span class="n">String</span><span class="p">(</span><span class="mi">50</span><span class="p">))</span>
    <span class="n">__mapper_args__</span> <span class="o">=</span> <span class="p">{</span><span class="s1">&apos;polymorphic_on&apos;</span><span class="p">:</span> <span class="n">discriminator</span><span class="p">}</span>

<span class="k">class</span> <span class="nc">HasStartDate</span><span class="p">(</span><span class="nb">object</span><span class="p">):</span>
    <span class="nd">@declared_attr</span>
    <span class="k">def</span> <span class="nf">start_date</span><span class="p">(</span><span class="n">cls</span><span class="p">):</span>
        <span class="k">return</span> <span class="n">cls</span><span class="o">.</span><span class="n">__table__</span><span class="o">.</span><span class="n">c</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="s1">&apos;start_date&apos;</span><span class="p">,</span> <span class="n">Column</span><span class="p">(</span><span class="n">DateTime</span><span class="p">))</span>

<span class="k">class</span> <span class="nc">Engineer</span><span class="p">(</span><span class="n">HasStartDate</span><span class="p">,</span> <span class="n">Person</span><span class="p">):</span>
    <span class="n">__mapper_args__</span> <span class="o">=</span> <span class="p">{</span><span class="s1">&apos;polymorphic_identity&apos;</span><span class="p">:</span> <span class="s1">&apos;engineer&apos;</span><span class="p">}</span>

<span class="k">class</span> <span class="nc">Manager</span><span class="p">(</span><span class="n">HasStartDate</span><span class="p">,</span> <span class="n">Person</span><span class="p">):</span>
    <span class="n">__mapper_args__</span> <span class="o">=</span> <span class="p">{</span><span class="s1">&apos;polymorphic_identity&apos;</span><span class="p">:</span> <span class="s1">&apos;manager&apos;</span><span class="p">}</span></pre></div></div><p><span class="yiyi-st" id="yiyi-86">&#x4E0A;&#x9762;&#x7684;mixin&#x68C0;&#x67E5;&#x5217;&#x7684;&#x672C;&#x5730;<code class="docutils literal"><span class="pre">__table__</span></code>&#x5C5E;&#x6027;&#x3002;</span><span class="yiyi-st" id="yiyi-87">&#x56E0;&#x4E3A;&#x6211;&#x4EEC;&#x4F7F;&#x7528;&#x5355;&#x8868;&#x7EE7;&#x627F;&#xFF0C;&#x6240;&#x4EE5;&#x6211;&#x4EEC;&#x786E;&#x4FE1;&#x5728;&#x8FD9;&#x79CD;&#x60C5;&#x51B5;&#x4E0B;&#xFF0C;<code class="docutils literal"><span class="pre">cls.__table__</span></code>&#x6307;&#x7684;&#x662F;<code class="docutils literal"><span class="pre">Person.__table__</span></code>&#x3002;</span><span class="yiyi-st" id="yiyi-88">&#x5982;&#x679C;&#x6211;&#x4EEC;&#x6DF7;&#x5408;&#x4E86;&#x8FDE;&#x63A5;&#x8868;&#x548C;&#x5355;&#x8868;&#x7EE7;&#x627F;&#xFF0C;&#x90A3;&#x4E48;&#x6211;&#x4EEC;&#x53EF;&#x80FD;&#x5E0C;&#x671B;&#x6211;&#x4EEC;&#x7684;mixin&#x66F4;&#x4ED4;&#x7EC6;&#x5730;&#x68C0;&#x67E5;&#x662F;&#x5426;&#x6211;&#x4EEC;&#x6B63;&#x5728;&#x67E5;&#x627E;<code class="docutils literal"><span class="pre">cls.__table__</span></code>&#x771F;&#x7684;&#x662F;<a class="reference internal" href="core_metadata.html#sqlalchemy.schema.Table" title="sqlalchemy.schema.Table"><code class="xref py py-class docutils literal"><span class="pre">Table</span></code></a>&#x3002;</span></p></div></div><div class="section" id="concrete-table-inheritance"><h2><span class="yiyi-st" id="yiyi-89">&#x5177;&#x4F53;&#x8868;&#x7EE7;&#x627F;<a class="headerlink" href="#concrete-table-inheritance" title="Permalink to this headline">&#xB6;</a></span></h2><p><span class="yiyi-st" id="yiyi-90">&#x6DF7;&#x51DD;&#x571F;&#x5B9A;&#x4E49;&#x4E3A;&#x5177;&#x6709;&#x81EA;&#x5DF1;&#x7684;&#x8868;&#x7684;&#x5B50;&#x7C7B;&#xFF0C;&#x5E76;&#x5C06;<code class="docutils literal"><span class="pre">concrete</span></code>&#x5173;&#x952E;&#x5B57;&#x53C2;&#x6570;&#x8BBE;&#x7F6E;&#x4E3A;<code class="docutils literal"><span class="pre">True</span></code>&#xFF1A;</span></p><div class="highlight-python"><div class="highlight"><pre><span></span><span class="k">class</span> <span class="nc">Person</span><span class="p">(</span><span class="n">Base</span><span class="p">):</span>
    <span class="n">__tablename__</span> <span class="o">=</span> <span class="s1">&apos;people&apos;</span>
    <span class="nb">id</span> <span class="o">=</span> <span class="n">Column</span><span class="p">(</span><span class="n">Integer</span><span class="p">,</span> <span class="n">primary_key</span><span class="o">=</span><span class="bp">True</span><span class="p">)</span>
    <span class="n">name</span> <span class="o">=</span> <span class="n">Column</span><span class="p">(</span><span class="n">String</span><span class="p">(</span><span class="mi">50</span><span class="p">))</span>

<span class="k">class</span> <span class="nc">Engineer</span><span class="p">(</span><span class="n">Person</span><span class="p">):</span>
    <span class="n">__tablename__</span> <span class="o">=</span> <span class="s1">&apos;engineers&apos;</span>
    <span class="n">__mapper_args__</span> <span class="o">=</span> <span class="p">{</span><span class="s1">&apos;concrete&apos;</span><span class="p">:</span><span class="bp">True</span><span class="p">}</span>
    <span class="nb">id</span> <span class="o">=</span> <span class="n">Column</span><span class="p">(</span><span class="n">Integer</span><span class="p">,</span> <span class="n">primary_key</span><span class="o">=</span><span class="bp">True</span><span class="p">)</span>
    <span class="n">primary_language</span> <span class="o">=</span> <span class="n">Column</span><span class="p">(</span><span class="n">String</span><span class="p">(</span><span class="mi">50</span><span class="p">))</span>
    <span class="n">name</span> <span class="o">=</span> <span class="n">Column</span><span class="p">(</span><span class="n">String</span><span class="p">(</span><span class="mi">50</span><span class="p">))</span></pre></div></div><p><span class="yiyi-st" id="yiyi-91">&#x62BD;&#x8C61;&#x57FA;&#x7C7B;&#x7684;&#x4F7F;&#x7528;&#x4E0D;&#x90A3;&#x4E48;&#x7B80;&#x5355;&#xFF0C;&#x56E0;&#x4E3A;&#x5B83;&#x9700;&#x8981;&#x4F7F;&#x7528;<a class="reference internal" href="mapping_api.html#sqlalchemy.orm.util.polymorphic_union" title="sqlalchemy.orm.util.polymorphic_union"><code class="xref py py-func docutils literal"><span class="pre">polymorphic_union()</span></code></a>&#xFF0C;&#x5B83;&#x9700;&#x8981;&#x5728;&#x6784;&#x5EFA;&#x7C7B;&#x4E4B;&#x524D;&#x4F7F;&#x7528;<a class="reference internal" href="core_metadata.html#sqlalchemy.schema.Table" title="sqlalchemy.schema.Table"><code class="xref py py-class docutils literal"><span class="pre">Table</span></code></a>&#x5BF9;&#x8C61;&#x521B;&#x5EFA;&#xFF1A;</span></p><div class="highlight-python"><div class="highlight"><pre><span></span><span class="n">engineers</span> <span class="o">=</span> <span class="n">Table</span><span class="p">(</span><span class="s1">&apos;engineers&apos;</span><span class="p">,</span> <span class="n">Base</span><span class="o">.</span><span class="n">metadata</span><span class="p">,</span>
                <span class="n">Column</span><span class="p">(</span><span class="s1">&apos;id&apos;</span><span class="p">,</span> <span class="n">Integer</span><span class="p">,</span> <span class="n">primary_key</span><span class="o">=</span><span class="bp">True</span><span class="p">),</span>
                <span class="n">Column</span><span class="p">(</span><span class="s1">&apos;name&apos;</span><span class="p">,</span> <span class="n">String</span><span class="p">(</span><span class="mi">50</span><span class="p">)),</span>
                <span class="n">Column</span><span class="p">(</span><span class="s1">&apos;primary_language&apos;</span><span class="p">,</span> <span class="n">String</span><span class="p">(</span><span class="mi">50</span><span class="p">))</span>
            <span class="p">)</span>
<span class="n">managers</span> <span class="o">=</span> <span class="n">Table</span><span class="p">(</span><span class="s1">&apos;managers&apos;</span><span class="p">,</span> <span class="n">Base</span><span class="o">.</span><span class="n">metadata</span><span class="p">,</span>
                <span class="n">Column</span><span class="p">(</span><span class="s1">&apos;id&apos;</span><span class="p">,</span> <span class="n">Integer</span><span class="p">,</span> <span class="n">primary_key</span><span class="o">=</span><span class="bp">True</span><span class="p">),</span>
                <span class="n">Column</span><span class="p">(</span><span class="s1">&apos;name&apos;</span><span class="p">,</span> <span class="n">String</span><span class="p">(</span><span class="mi">50</span><span class="p">)),</span>
                <span class="n">Column</span><span class="p">(</span><span class="s1">&apos;golf_swing&apos;</span><span class="p">,</span> <span class="n">String</span><span class="p">(</span><span class="mi">50</span><span class="p">))</span>
            <span class="p">)</span>

<span class="n">punion</span> <span class="o">=</span> <span class="n">polymorphic_union</span><span class="p">({</span>
    <span class="s1">&apos;engineer&apos;</span><span class="p">:</span><span class="n">engineers</span><span class="p">,</span>
    <span class="s1">&apos;manager&apos;</span><span class="p">:</span><span class="n">managers</span>
<span class="p">},</span> <span class="s1">&apos;type&apos;</span><span class="p">,</span> <span class="s1">&apos;punion&apos;</span><span class="p">)</span>

<span class="k">class</span> <span class="nc">Person</span><span class="p">(</span><span class="n">Base</span><span class="p">):</span>
    <span class="n">__table__</span> <span class="o">=</span> <span class="n">punion</span>
    <span class="n">__mapper_args__</span> <span class="o">=</span> <span class="p">{</span><span class="s1">&apos;polymorphic_on&apos;</span><span class="p">:</span><span class="n">punion</span><span class="o">.</span><span class="n">c</span><span class="o">.</span><span class="n">type</span><span class="p">}</span>

<span class="k">class</span> <span class="nc">Engineer</span><span class="p">(</span><span class="n">Person</span><span class="p">):</span>
    <span class="n">__table__</span> <span class="o">=</span> <span class="n">engineers</span>
    <span class="n">__mapper_args__</span> <span class="o">=</span> <span class="p">{</span><span class="s1">&apos;polymorphic_identity&apos;</span><span class="p">:</span><span class="s1">&apos;engineer&apos;</span><span class="p">,</span> <span class="s1">&apos;concrete&apos;</span><span class="p">:</span><span class="bp">True</span><span class="p">}</span>

<span class="k">class</span> <span class="nc">Manager</span><span class="p">(</span><span class="n">Person</span><span class="p">):</span>
    <span class="n">__table__</span> <span class="o">=</span> <span class="n">managers</span>
    <span class="n">__mapper_args__</span> <span class="o">=</span> <span class="p">{</span><span class="s1">&apos;polymorphic_identity&apos;</span><span class="p">:</span><span class="s1">&apos;manager&apos;</span><span class="p">,</span> <span class="s1">&apos;concrete&apos;</span><span class="p">:</span><span class="bp">True</span><span class="p">}</span></pre></div></div><p><span class="yiyi-st" id="yiyi-92">&#x5E2E;&#x52A9;&#x7C7B;<a class="reference internal" href="api.html#sqlalchemy.ext.declarative.AbstractConcreteBase" title="sqlalchemy.ext.declarative.AbstractConcreteBase"><code class="xref py py-class docutils literal"><span class="pre">AbstractConcreteBase</span></code></a>&#x548C;<a class="reference internal" href="api.html#sqlalchemy.ext.declarative.ConcreteBase" title="sqlalchemy.ext.declarative.ConcreteBase"><code class="xref py py-class docutils literal"><span class="pre">ConcreteBase</span></code></a>&#x4E3A;&#x4E0A;&#x8FF0;&#x521B;&#x5EFA;&#x591A;&#x6001;&#x8054;&#x5408;&#x7684;&#x7CFB;&#x7EDF;&#x63D0;&#x4F9B;&#x4E86;&#x81EA;&#x52A8;&#x5316;&#x3002;</span><span class="yiyi-st" id="yiyi-93">&#x6709;&#x5173;&#x8BE6;&#x7EC6;&#x4FE1;&#x606F;&#xFF0C;&#x8BF7;&#x53C2;&#x9605;&#x8FD9;&#x4E9B;&#x52A9;&#x624B;&#x7684;&#x6587;&#x6863;&#x4EE5;&#x53CA;&#x6709;&#x5173;&#x5177;&#x4F53;&#x7EE7;&#x627F;&#x7684;&#x4E3B;&#x8981;ORM&#x6587;&#x6863;&#x3002;</span></p><div class="admonition seealso"><p class="first admonition-title"><span class="yiyi-st" id="yiyi-94">&#x4E5F;&#x53EF;&#x4EE5;&#x770B;&#x770B;</span></p><p><span class="yiyi-st" id="yiyi-95"><a class="reference internal" href="inheritance.html#concrete-inheritance"><span>Concrete Table Inheritance</span></a></span></p><p class="last"><span class="yiyi-st" id="yiyi-96"><a class="reference internal" href="inheritance.html#inheritance-concrete-helpers"><span>Using the Declarative Helper Classes</span></a></span></p></div></div>