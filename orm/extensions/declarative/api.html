<h1><span class="yiyi-st" id="yiyi-57">&#x58F0;&#x660E;&#x5F0F;API <a class="headerlink" href="#declarative-api" title="Permalink to this headline">&#xB6;</a></span></h1><div class="section" id="api-reference"><h2><span class="yiyi-st" id="yiyi-58">API&#x53C2;&#x8003;<a class="headerlink" href="#api-reference" title="Permalink to this headline">&#xB6;</a></span></h2><dl class="function"><dt id="sqlalchemy.ext.declarative.declarative_base"><span class="yiyi-st" id="yiyi-59"> <code class="descclassname">sqlalchemy.ext.declarative.</code><code class="descname">declarative_base</code><span class="sig-paren">(</span><em>bind=None</em>, <em>metadata=None</em>, <em>mapper=None</em>, <em>cls=&lt;type &apos;object&apos;&gt;</em>, <em>name=&apos;Base&apos;</em>, <em>constructor=&lt;function __init__&gt;</em>, <em>class_registry=None</em>, <em>metaclass=&lt;class &apos;sqlalchemy.ext.declarative.api.DeclarativeMeta&apos;&gt;</em><span class="sig-paren">)</span><a class="headerlink" href="#sqlalchemy.ext.declarative.declarative_base" title="Permalink to this definition">&#xB6;</a></span></dt><dd><p><span class="yiyi-st" id="yiyi-60">&#x4E3A;&#x58F0;&#x660E;&#x6027;&#x7C7B;&#x5B9A;&#x4E49;&#x6784;&#x9020;&#x4E00;&#x4E2A;&#x57FA;&#x7C7B;&#x3002;</span></p><p><span class="yiyi-st" id="yiyi-61">&#x65B0;&#x7684;&#x57FA;&#x7C7B;&#x5C06;&#x88AB;&#x8D4B;&#x4E88;&#x4E00;&#x4E2A;&#x5143;&#x7C7B;&#xFF0C;&#x8BE5;&#x5143;&#x7C7B;&#x751F;&#x6210;&#x9002;&#x5F53;&#x7684;<a class="reference internal" href="core_metadata.html#sqlalchemy.schema.Table" title="sqlalchemy.schema.Table"><code class="xref py py-class docutils literal"><span class="pre">Table</span></code></a>&#x5BF9;&#x8C61;&#xFF0C;&#x5E76;&#x6839;&#x636E;&#x5728;&#x7C7B;&#x4E2D;&#x58F0;&#x660E;&#x63D0;&#x4F9B;&#x7684;&#x4FE1;&#x606F;&#x4EE5;&#x53CA;&#x8BE5;&#x7C7B;&#x7684;&#x4EFB;&#x4F55;&#x5B50;&#x7C7B;&#x8FDB;&#x884C;&#x76F8;&#x5E94;&#x7684;<a class="reference internal" href="mapping_api.html#sqlalchemy.orm.mapper" title="sqlalchemy.orm.mapper"><code class="xref py py-func docutils literal"><span class="pre">mapper()</span></code></a>&#x8C03;&#x7528;&#x7C7B;&#x3002;</span></p><table class="docutils field-list" frame="void" rules="none"><tbody valign="top"><tr class="field-odd field"><th class="field-name"><span class="yiyi-st" id="yiyi-62">&#x53C2;&#x6570;&#xFF1A;</span></th><td class="field-body"><ul class="first last simple"><li><span class="yiyi-st" id="yiyi-63"><span class="target" id="sqlalchemy.ext.declarative.declarative_base.params.bind"></span><strong>bind</strong><a class="paramlink headerlink reference internal" href="#sqlalchemy.ext.declarative.declarative_base.params.bind">&#xB6;</a> &#x2013; An optional <a class="reference internal" href="core_connections.html#sqlalchemy.engine.Connectable" title="sqlalchemy.engine.Connectable"><code class="xref py py-class docutils literal"><span class="pre">Connectable</span></code></a>, will be assigned the <code class="docutils literal"><span class="pre">bind</span></code> attribute on the <a class="reference internal" href="core_metadata.html#sqlalchemy.schema.MetaData" title="sqlalchemy.schema.MetaData"><code class="xref py py-class docutils literal"><span class="pre">MetaData</span></code></a> instance.</span></li><li><span class="yiyi-st" id="yiyi-64"><span class="target" id="sqlalchemy.ext.declarative.declarative_base.params.metadata"></span><strong>metadata</strong><a class="paramlink headerlink reference internal" href="#sqlalchemy.ext.declarative.declarative_base.params.metadata">&#xB6;</a> &#x2013; An optional <a class="reference internal" href="core_metadata.html#sqlalchemy.schema.MetaData" title="sqlalchemy.schema.MetaData"><code class="xref py py-class docutils literal"><span class="pre">MetaData</span></code></a> instance. </span><span class="yiyi-st" id="yiyi-65">&#x6240;&#x6709;&#x7531;&#x57FA;&#x7C7B;&#x7684;&#x5B50;&#x7C7B;&#x9690;&#x5F0F;&#x58F0;&#x660E;&#x7684;<a class="reference internal" href="core_metadata.html#sqlalchemy.schema.Table" title="sqlalchemy.schema.Table"><code class="xref py py-class docutils literal"><span class="pre">Table</span></code></a>&#x5BF9;&#x8C61;&#x5C06;&#x5171;&#x4EAB;&#x6B64;&#x5143;&#x6570;&#x636E;&#x3002;</span><span class="yiyi-st" id="yiyi-66">&#x5982;&#x679C;&#x6CA1;&#x6709;&#x63D0;&#x4F9B;MetaData&#x5B9E;&#x4F8B;&#xFF0C;&#x5219;&#x4F1A;&#x521B;&#x5EFA;&#x4E00;&#x4E2A;MetaData&#x5B9E;&#x4F8B;&#x3002;</span><span class="yiyi-st" id="yiyi-67">The <a class="reference internal" href="core_metadata.html#sqlalchemy.schema.MetaData" title="sqlalchemy.schema.MetaData"><code class="xref py py-class docutils literal"><span class="pre">MetaData</span></code></a> instance will be available via the <cite>metadata</cite> attribute of the generated declarative base class.</span></li><li><span class="yiyi-st" id="yiyi-68"><span class="target" id="sqlalchemy.ext.declarative.declarative_base.params.mapper"></span><strong>mapper</strong><a class="paramlink headerlink reference internal" href="#sqlalchemy.ext.declarative.declarative_base.params.mapper">&#xB6;</a> &#x2013; An optional callable, defaults to <a class="reference internal" href="mapping_api.html#sqlalchemy.orm.mapper" title="sqlalchemy.orm.mapper"><code class="xref py py-func docutils literal"><span class="pre">mapper()</span></code></a>. </span><span class="yiyi-st" id="yiyi-69">&#x5C06;&#x7528;&#x4E8E;&#x5C06;&#x5B50;&#x7C7B;&#x6620;&#x5C04;&#x5230;&#x5176;&#x8868;&#x3002;</span></li><li><span class="yiyi-st" id="yiyi-70"><span class="target" id="sqlalchemy.ext.declarative.declarative_base.params.cls"></span> <strong>cls</strong> <a class="paramlink headerlink reference internal" href="#sqlalchemy.ext.declarative.declarative_base.params.cls">&#xB6;</a>  - &#x9ED8;&#x8BA4;&#x4E3A;<code class="xref py py-class docutils literal"><span class="pre">object</span></code>&#x3002;</span><span class="yiyi-st" id="yiyi-71">&#x4E00;&#x79CD;&#x7528;&#x4F5C;&#x751F;&#x6210;&#x7684;&#x58F0;&#x660E;&#x5F0F;&#x57FA;&#x7C7B;&#x7684;&#x57FA;&#x7840;&#x7684;&#x7C7B;&#x578B;&#x3002;</span><span class="yiyi-st" id="yiyi-72">&#x53EF;&#x80FD;&#x662F;&#x7C7B;&#x6216;&#x7C7B;&#x7684;&#x5143;&#x7EC4;&#x3002;</span></li><li><span class="yiyi-st" id="yiyi-73"><span class="target" id="sqlalchemy.ext.declarative.declarative_base.params.name"></span> <strong>&#x540D;&#x79F0;</strong> <a class="paramlink headerlink reference internal" href="#sqlalchemy.ext.declarative.declarative_base.params.name">&#xB6;</a>  - &#x9ED8;&#x8BA4;&#x4E3A;<code class="docutils literal"><span class="pre">Base</span></code>&#x3002;</span><span class="yiyi-st" id="yiyi-74">&#x751F;&#x6210;&#x7684;&#x7C7B;&#x7684;&#x663E;&#x793A;&#x540D;&#x79F0;&#x3002;</span><span class="yiyi-st" id="yiyi-75">&#x81EA;&#x5B9A;&#x4E49;&#x8FD9;&#x4E0D;&#x662F;&#x5FC5;&#x9700;&#x7684;&#xFF0C;&#x4F46;&#x53EF;&#x4EE5;&#x63D0;&#x9AD8;&#x56DE;&#x6EAF;&#x548C;&#x8C03;&#x8BD5;&#x7684;&#x6E05;&#x6670;&#x5EA6;&#x3002;</span></li><li><span class="yiyi-st" id="yiyi-76"><span class="target" id="sqlalchemy.ext.declarative.declarative_base.params.constructor"></span><strong>constructor</strong><a class="paramlink headerlink reference internal" href="#sqlalchemy.ext.declarative.declarative_base.params.constructor">&#xB6;</a> &#x2013; Defaults to <code class="xref py py-func docutils literal"><span class="pre">_declarative_constructor()</span></code>, an __init__ implementation that assigns **kwargs for declared fields and relationships to an instance. </span><span class="yiyi-st" id="yiyi-77">&#x5982;&#x679C;&#x63D0;&#x4F9B;<code class="docutils literal"><span class="pre">None</span></code>&#xFF0C;&#x5219;&#x4E0D;&#x4F1A;&#x63D0;&#x4F9B;__init__&#xFF0C;&#x5E76;&#x4E14;&#x6784;&#x9020;&#x4F1A;&#x901A;&#x8FC7;&#x6B63;&#x5E38;&#x7684;Python&#x8BED;&#x4E49;&#x56DE;&#x9000;&#x5230;cls .__ init__&#x3002;</span></li><li><span class="yiyi-st" id="yiyi-78"><span class="target" id="sqlalchemy.ext.declarative.declarative_base.params.class_registry"></span><strong>class_registry</strong><a class="paramlink headerlink reference internal" href="#sqlalchemy.ext.declarative.declarative_base.params.class_registry">&#xB6;</a> &#x2013; optional dictionary that will serve as the registry of class names-&gt; mapped classes when string names are used to identify classes inside of <a class="reference internal" href="relationship_api.html#sqlalchemy.orm.relationship" title="sqlalchemy.orm.relationship"><code class="xref py py-func docutils literal"><span class="pre">relationship()</span></code></a> and others. </span><span class="yiyi-st" id="yiyi-79">&#x5141;&#x8BB8;&#x4E24;&#x4E2A;&#x6216;&#x66F4;&#x591A;&#x58F0;&#x660E;&#x6027;&#x57FA;&#x7C7B;&#x5171;&#x4EAB;&#x76F8;&#x540C;&#x7684;&#x7C7B;&#x540D;&#x79F0;&#x6CE8;&#x518C;&#x8868;&#x4EE5;&#x7B80;&#x5316;&#x57FA;&#x7840;&#x95F4;&#x5173;&#x7CFB;&#x3002;</span></li><li><span class="yiyi-st" id="yiyi-80"><span class="target" id="sqlalchemy.ext.declarative.declarative_base.params.metaclass"></span> <strong>&#x5143;&#x7C7B;</strong> <a class="paramlink headerlink reference internal" href="#sqlalchemy.ext.declarative.declarative_base.params.metaclass">&#xB6;</a>  - &#x9ED8;&#x8BA4;&#x4E3A;<code class="xref py py-class docutils literal"><span class="pre">DeclarativeMeta</span></code>&#x3002;</span><span class="yiyi-st" id="yiyi-81">&#x5143;&#x7C7B;&#x6216;__metaclass__&#x517C;&#x5BB9;&#x7684;callable&#x7528;&#x4F5C;&#x751F;&#x6210;&#x7684;&#x58F0;&#x660E;&#x57FA;&#x7C7B;&#x7684;&#x5143;&#x7C7B;&#x578B;&#x3002;</span></li></ul></td></tr></tbody></table><div class="admonition seealso"><p class="first admonition-title"><span class="yiyi-st" id="yiyi-82">&#x4E5F;&#x53EF;&#x4EE5;&#x770B;&#x770B;</span></p><p class="last"><span class="yiyi-st" id="yiyi-83"><a class="reference internal" href="#sqlalchemy.ext.declarative.as_declarative" title="sqlalchemy.ext.declarative.as_declarative"><code class="xref py py-func docutils literal"><span class="pre">as_declarative()</span></code></a></span></p></div></dd></dl><dl class="function"><dt id="sqlalchemy.ext.declarative.as_declarative"><span class="yiyi-st" id="yiyi-84"><code class="descclassname"> sqlalchemy.ext.declarative&#x3002; T0&gt; <code class="descname"> as_declarative  T1&gt; <span class="sig-paren">&#xFF08; T2&gt; <em> **&#x5343;&#x74E6; T3&gt; <span class="sig-paren">&#xFF09; T4&gt; <a class="headerlink" href="#sqlalchemy.ext.declarative.as_declarative" title="Permalink to this definition"> &#xB6; T5&gt;</a></span></em></span></code></code></span></dt><dd><p><span class="yiyi-st" id="yiyi-85"><a class="reference internal" href="#sqlalchemy.ext.declarative.declarative_base" title="sqlalchemy.ext.declarative.declarative_base"><code class="xref py py-func docutils literal"><span class="pre">declarative_base()</span></code></a>&#x7684;&#x7C7B;&#x88C5;&#x9970;&#x5668;&#x3002;</span></p><p><span class="yiyi-st" id="yiyi-86">&#x4E3A;&#x53D1;&#x9001;&#x7ED9;<a class="reference internal" href="#sqlalchemy.ext.declarative.declarative_base" title="sqlalchemy.ext.declarative.declarative_base"><code class="xref py py-func docutils literal"><span class="pre">declarative_base()</span></code></a>&#x7684;<code class="docutils literal"><span class="pre">cls</span></code>&#x53C2;&#x6570;&#x63D0;&#x4F9B;&#x8BED;&#x6CD5;&#x5FEB;&#x6377;&#x65B9;&#x5F0F;&#xFF0C;&#x5141;&#x8BB8;&#x5C06;&#x57FA;&#x7C7B;&#x5C31;&#x5730;&#x8F6C;&#x6362;&#x4E3A;&#x201C;&#x58F0;&#x660E;&#x5F0F;&#x201D;&#x57FA;&#x7840;&#xFF1A;</span></p><div class="highlight-python"><div class="highlight"><pre><span></span>from sqlalchemy.ext.declarative import as_declarative

@as_declarative()
class Base(object):
    @declared_attr
    def __tablename__(cls):
        return cls.__name__.lower()
    id = Column(Integer, primary_key=True)

class MyMappedClass(Base):
    # ...</pre></div></div><p><span class="yiyi-st" id="yiyi-87">&#x4F20;&#x9012;&#x7ED9;<a class="reference internal" href="#sqlalchemy.ext.declarative.as_declarative" title="sqlalchemy.ext.declarative.as_declarative"><code class="xref py py-func docutils literal"><span class="pre">as_declarative()</span></code></a>&#x7684;&#x6240;&#x6709;&#x5173;&#x952E;&#x5B57;&#x53C2;&#x6570;&#x90FD;&#x4F20;&#x9012;&#x7ED9;<a class="reference internal" href="#sqlalchemy.ext.declarative.declarative_base" title="sqlalchemy.ext.declarative.declarative_base"><code class="xref py py-func docutils literal"><span class="pre">declarative_base()</span></code></a>&#x3002;</span></p><div class="versionadded"><p><span class="yiyi-st" id="yiyi-88"><span class="versionmodified">0.8.3&#x7248;&#x672C;&#x4E2D;&#x7684;&#x65B0;&#x529F;&#x80FD;</span></span></p></div><div class="admonition seealso"><p class="first admonition-title"><span class="yiyi-st" id="yiyi-89">&#x4E5F;&#x53EF;&#x4EE5;&#x770B;&#x770B;</span></p><p class="last"><span class="yiyi-st" id="yiyi-90"><a class="reference internal" href="#sqlalchemy.ext.declarative.declarative_base" title="sqlalchemy.ext.declarative.declarative_base"><code class="xref py py-func docutils literal"><span class="pre">declarative_base()</span></code></a></span></p></div></dd></dl><dl class="class"><dt id="sqlalchemy.ext.declarative.declared_attr"><span class="yiyi-st" id="yiyi-91"><em class="property">&#x7C7B; T0&gt; <code class="descclassname"> sqlalchemy.ext.declarative&#x3002; T1&gt; <code class="descname"> declared_attr  T2&gt; <span class="sig-paren">&#xFF08; T3&gt; <em> fget  T4&gt;&#xFF0C;<em>&#x7EA7;&#x8054;=&#x5047; T5&gt; <span class="sig-paren">&#xFF09; T6&gt; <a class="headerlink" href="#sqlalchemy.ext.declarative.declared_attr" title="Permalink to this definition">&#xB6; T7&gt;</a></span></em></em></span></code></code></em></span></dt><dd><p><span class="yiyi-st" id="yiyi-92">&#x57FA;&#x7840;&#xFF1A;<code class="xref py py-class docutils literal"><span class="pre">sqlalchemy.orm.base._MappedAttribute</span></code>&#xFF0C;<code class="xref py py-class docutils literal"><span class="pre">__builtin__.property</span></code></span></p><p><span class="yiyi-st" id="yiyi-93">&#x5C06;&#x7C7B;&#x7EA7;&#x65B9;&#x6CD5;&#x6807;&#x8BB0;&#x4E3A;&#x8868;&#x793A;&#x6620;&#x5C04;&#x5C5E;&#x6027;&#x6216;&#x7279;&#x6B8A;&#x58F0;&#x660E;&#x6027;&#x6210;&#x5458;&#x540D;&#x79F0;&#x7684;&#x5B9A;&#x4E49;&#x3002;</span></p><p><span class="yiyi-st" id="yiyi-94">@declared_attr&#x5C06;&#x5C5E;&#x6027;&#x8F6C;&#x6362;&#x4E3A;&#x53EF;&#x4EE5;&#x4ECE;&#x672A;&#x88AB;&#x5B9E;&#x4F8B;&#x5316;&#x7684;&#x7C7B;&#x8C03;&#x7528;&#x7684;&#x7C7B;&#x6807;&#x91CF;&#x5C5E;&#x6027;&#x3002;</span><span class="yiyi-st" id="yiyi-95">&#x58F0;&#x660E;&#x5F0F;&#x5C06;&#x7279;&#x522B;&#x6807;&#x8BB0;&#x4E3A;@declared_attr&#x7684;&#x5C5E;&#x6027;&#x89C6;&#x4E3A;&#x8FD4;&#x56DE;&#x7279;&#x5B9A;&#x4E8E;&#x6620;&#x5C04;&#x6216;&#x58F0;&#x660E;&#x5F0F;&#x8868;&#x914D;&#x7F6E;&#x7684;&#x6784;&#x9020;&#x3002;</span><span class="yiyi-st" id="yiyi-96">&#x5C5E;&#x6027;&#x7684;&#x540D;&#x79F0;&#x662F;&#x8BE5;&#x5C5E;&#x6027;&#x7684;&#x975E;&#x52A8;&#x6001;&#x7248;&#x672C;&#x7684;&#x540D;&#x79F0;&#x3002;</span></p><p><span class="yiyi-st" id="yiyi-97">@declared_attr&#x901A;&#x5E38;&#x4E0D;&#x9002;&#x7528;&#x4E8E;mixin&#xFF0C;&#x4EE5;&#x5B9A;&#x4E49;&#x8981;&#x5E94;&#x7528;&#x4E8E;&#x8BE5;&#x7C7B;&#x7684;&#x4E0D;&#x540C;&#x5B9E;&#x73B0;&#x8005;&#x7684;&#x5173;&#x7CFB;&#xFF1A;</span></p><div class="highlight-python"><div class="highlight"><pre><span></span><span class="k">class</span> <span class="nc">ProvidesUser</span><span class="p">(</span><span class="nb">object</span><span class="p">):</span>
    <span class="s2">&quot;A mixin that adds a &apos;user&apos; relationship to classes.&quot;</span>

    <span class="nd">@declared_attr</span>
    <span class="k">def</span> <span class="nf">user</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="k">return</span> <span class="n">relationship</span><span class="p">(</span><span class="s2">&quot;User&quot;</span><span class="p">)</span></pre></div></div><p><span class="yiyi-st" id="yiyi-98">&#x5B83;&#x4E5F;&#x53EF;&#x4EE5;&#x5E94;&#x7528;&#x4E8E;&#x6620;&#x5C04;&#x7C7B;&#xFF0C;&#x4F8B;&#x5982;&#x4E3A;&#x7EE7;&#x627F;&#x63D0;&#x4F9B;&#x201C;&#x591A;&#x6001;&#x201D;&#x65B9;&#x6848;&#xFF1A;</span></p><div class="highlight-python"><div class="highlight"><pre><span></span><span class="k">class</span> <span class="nc">Employee</span><span class="p">(</span><span class="n">Base</span><span class="p">):</span>
    <span class="nb">id</span> <span class="o">=</span> <span class="n">Column</span><span class="p">(</span><span class="n">Integer</span><span class="p">,</span> <span class="n">primary_key</span><span class="o">=</span><span class="bp">True</span><span class="p">)</span>
    <span class="nb">type</span> <span class="o">=</span> <span class="n">Column</span><span class="p">(</span><span class="n">String</span><span class="p">(</span><span class="mi">50</span><span class="p">),</span> <span class="n">nullable</span><span class="o">=</span><span class="bp">False</span><span class="p">)</span>

    <span class="nd">@declared_attr</span>
    <span class="k">def</span> <span class="nf">__tablename__</span><span class="p">(</span><span class="n">cls</span><span class="p">):</span>
        <span class="k">return</span> <span class="n">cls</span><span class="o">.</span><span class="n">__name__</span><span class="o">.</span><span class="n">lower</span><span class="p">()</span>

    <span class="nd">@declared_attr</span>
    <span class="k">def</span> <span class="nf">__mapper_args__</span><span class="p">(</span><span class="n">cls</span><span class="p">):</span>
        <span class="k">if</span> <span class="n">cls</span><span class="o">.</span><span class="n">__name__</span> <span class="o">==</span> <span class="s1">&apos;Employee&apos;</span><span class="p">:</span>
            <span class="k">return</span> <span class="p">{</span>
                    <span class="s2">&quot;polymorphic_on&quot;</span><span class="p">:</span><span class="n">cls</span><span class="o">.</span><span class="n">type</span><span class="p">,</span>
                    <span class="s2">&quot;polymorphic_identity&quot;</span><span class="p">:</span><span class="s2">&quot;Employee&quot;</span>
            <span class="p">}</span>
        <span class="k">else</span><span class="p">:</span>
            <span class="k">return</span> <span class="p">{</span><span class="s2">&quot;polymorphic_identity&quot;</span><span class="p">:</span><span class="n">cls</span><span class="o">.</span><span class="n">__name__</span><span class="p">}</span></pre></div></div><div class="versionchanged"><p><span class="yiyi-st" id="yiyi-99"><span class="versionmodified">&#x7248;&#x672C;0.8&#x4E2D;&#x7684;&#x66F4;&#x6539;</span> <a class="reference internal" href="#sqlalchemy.ext.declarative.declared_attr" title="sqlalchemy.ext.declarative.declared_attr"><code class="xref py py-class docutils literal"><span class="pre">declared_attr</span></code></a>&#x53EF;&#x4EE5;&#x4E0E;&#x975E;ORM&#x6216;&#x6269;&#x5C55;&#x5C5E;&#x6027;&#xFF08;&#x4F8B;&#x5982;&#x7528;&#x6237;&#x5B9A;&#x4E49;&#x7684;&#x5C5E;&#x6027;&#x6216;<a class="reference internal" href="associationproxy.html#sqlalchemy.ext.associationproxy.association_proxy" title="sqlalchemy.ext.associationproxy.association_proxy"><code class="xref py py-func docutils literal"><span class="pre">association_proxy()</span></code></a>&#x5C06;&#x5728;&#x8BFE;&#x5802;&#x4E0A;&#x8BFE;&#x65F6;&#x5206;&#x914D;&#x7ED9;&#x73ED;&#x7EA7;&#x3002;</span></p></div><dl class="attribute"><dt id="sqlalchemy.ext.declarative.declared_attr.cascading"><span class="yiyi-st" id="yiyi-100"><code class="descname">&#x7EA7;&#x8054; T0&gt; <a class="headerlink" href="#sqlalchemy.ext.declarative.declared_attr.cascading" title="Permalink to this definition">&#xB6; T1&gt;</a></code></span></dt><dd><p><span class="yiyi-st" id="yiyi-101">&#x5C06;<a class="reference internal" href="#sqlalchemy.ext.declarative.declared_attr" title="sqlalchemy.ext.declarative.declared_attr"><code class="xref py py-class docutils literal"><span class="pre">declared_attr</span></code></a>&#x6807;&#x8BB0;&#x4E3A;&#x7EA7;&#x8054;&#x3002;</span></p><p><span class="yiyi-st" id="yiyi-102">&#x8FD9;&#x662F;&#x4E00;&#x4E2A;&#x7279;&#x6B8A;&#x7528;&#x9014;&#x4FEE;&#x9970;&#x7B26;&#xFF0C;&#x5B83;&#x6307;&#x793A;&#x57FA;&#x4E8E;&#x5217;&#x6216;MapperProperty&#x7684;&#x58F0;&#x660E;&#x5C5E;&#x6027;&#x5E94;&#x8BE5;&#x5728;&#x6620;&#x5C04;&#x7EE7;&#x627F;&#x65B9;&#x6848;&#x5185;&#x9488;&#x5BF9;&#x6BCF;&#x4E2A;&#x6620;&#x5C04;&#x7684;&#x5B50;&#x7C7B;&#x660E;&#x786E;&#x914D;&#x7F6E;&#x3002;</span></p><p><span class="yiyi-st" id="yiyi-103">&#x4E0B;&#x9762;&#xFF0C;MyClass&#x548C;MySubClass&#x90FD;&#x5C06;&#x5EFA;&#x7ACB;&#x4E00;&#x4E2A;&#x72EC;&#x7ACB;&#x7684;<code class="docutils literal"><span class="pre">id</span></code> Column&#x5BF9;&#x8C61;&#xFF1A;</span></p><div class="highlight-python"><div class="highlight"><pre><span></span><span class="k">class</span> <span class="nc">HasSomeAttribute</span><span class="p">(</span><span class="nb">object</span><span class="p">):</span>
    <span class="nd">@declared_attr.cascading</span>
    <span class="k">def</span> <span class="nf">some_id</span><span class="p">(</span><span class="n">cls</span><span class="p">):</span>
        <span class="k">if</span> <span class="n">has_inherited_table</span><span class="p">(</span><span class="n">cls</span><span class="p">):</span>
            <span class="k">return</span> <span class="n">Column</span><span class="p">(</span>
                <span class="n">ForeignKey</span><span class="p">(</span><span class="s1">&apos;myclass.id&apos;</span><span class="p">),</span> <span class="n">primary_key</span><span class="o">=</span><span class="bp">True</span><span class="p">)</span>
        <span class="k">else</span><span class="p">:</span>
            <span class="k">return</span> <span class="n">Column</span><span class="p">(</span><span class="n">Integer</span><span class="p">,</span> <span class="n">primary_key</span><span class="o">=</span><span class="bp">True</span><span class="p">)</span>

        <span class="k">return</span> <span class="n">Column</span><span class="p">(</span><span class="s1">&apos;id&apos;</span><span class="p">,</span> <span class="n">Integer</span><span class="p">,</span> <span class="n">primary_key</span><span class="o">=</span><span class="bp">True</span><span class="p">)</span>

<span class="k">class</span> <span class="nc">MyClass</span><span class="p">(</span><span class="n">HasSomeAttribute</span><span class="p">,</span> <span class="n">Base</span><span class="p">):</span>
    <span class="s2">&quot;&quot;</span>
    <span class="c1"># ...</span>

<span class="k">class</span> <span class="nc">MySubClass</span><span class="p">(</span><span class="n">MyClass</span><span class="p">):</span>
    <span class="s2">&quot;&quot;</span>
    <span class="c1"># ...</span></pre></div></div><p><span class="yiyi-st" id="yiyi-104">The behavior of the above configuration is that <code class="docutils literal"><span class="pre">MySubClass</span></code> will refer to both its own <code class="docutils literal"><span class="pre">id</span></code> column as well as that of <code class="docutils literal"><span class="pre">MyClass</span></code> underneath the attribute named <code class="docutils literal"><span class="pre">some_id</span></code>.</span></p><div class="admonition seealso"><p class="first admonition-title"><span class="yiyi-st" id="yiyi-105">&#x4E5F;&#x53EF;&#x4EE5;&#x770B;&#x770B;</span></p><p><span class="yiyi-st" id="yiyi-106"><a class="reference internal" href="inheritance.html#declarative-inheritance"><span>Inheritance Configuration</span></a></span></p><p class="last"><span class="yiyi-st" id="yiyi-107"><a class="reference internal" href="mixins.html#mixin-inheritance-columns"><span>Mixing in Columns in Inheritance Scenarios</span></a></span></p></div></dd></dl></dd></dl><dl class="function"><dt id="sqlalchemy.ext.declarative.api._declarative_constructor"><span class="yiyi-st" id="yiyi-108"><code class="descclassname">sqlalchemy.ext.declarative.api&#x3002;</code> <code class="descname">_declarative_constructor</code> <span class="sig-paren">&#xFF08;</span> <em>self</em>&#xFF0C;<em>** kwargs</em> <span class="sig-paren">&#xFF09; T5&gt; <a class="headerlink" href="#sqlalchemy.ext.declarative.api._declarative_constructor" title="Permalink to this definition">&#xB6; T6&gt;</a></span></span></dt><dd><p><span class="yiyi-st" id="yiyi-109">&#x4E00;&#x4E2A;&#x7B80;&#x5355;&#x7684;&#x6784;&#x9020;&#x51FD;&#x6570;&#xFF0C;&#x5141;&#x8BB8;&#x4ECE;kwargs&#x521D;&#x59CB;&#x5316;&#x3002;</span></p><p><span class="yiyi-st" id="yiyi-110">&#x4F7F;&#x7528;<code class="docutils literal"><span class="pre">kwargs</span></code>&#x4E2D;&#x7684;&#x540D;&#x79F0;&#x548C;&#x503C;&#x5728;&#x6784;&#x9020;&#x7684;&#x5B9E;&#x4F8B;&#x4E0A;&#x8BBE;&#x7F6E;&#x5C5E;&#x6027;&#x3002;</span></p><p><span class="yiyi-st" id="yiyi-111">&#x53EA;&#x6709;&#x4F5C;&#x4E3A;&#x5B9E;&#x4F8B;&#x7C7B;&#x7684;&#x5C5E;&#x6027;&#x5B58;&#x5728;&#x7684;&#x952E;&#x624D;&#x88AB;&#x5141;&#x8BB8;&#x3002;</span><span class="yiyi-st" id="yiyi-112">&#x4F8B;&#x5982;&#xFF0C;&#x8FD9;&#x4E9B;&#x53EF;&#x4EE5;&#x662F;&#x4EFB;&#x4F55;&#x6620;&#x5C04;&#x7684;&#x5217;&#x6216;&#x5173;&#x7CFB;&#x3002;</span></p></dd></dl><dl class="function"><dt id="sqlalchemy.ext.declarative.has_inherited_table"><span class="yiyi-st" id="yiyi-113"><code class="descclassname"> sqlalchemy.ext.declarative&#x3002; T0&gt; <code class="descname"> has_inherited_table  T1&gt; <span class="sig-paren">&#xFF08; T2&gt; <em> CLS  T3&gt; <span class="sig-paren">&#xFF09; T4&gt; <a class="headerlink" href="#sqlalchemy.ext.declarative.has_inherited_table" title="Permalink to this definition">&#xB6;&lt; / T5&gt;</a></span></em></span></code></code></span></dt><dd><p><span class="yiyi-st" id="yiyi-114">&#x7ED9;&#x5B9A;&#x4E00;&#x4E2A;&#x7C7B;&#xFF0C;&#x5982;&#x679C;&#x5B83;&#x7EE7;&#x627F;&#x7684;&#x4EFB;&#x4F55;&#x7C7B;&#x6709;&#x4E00;&#x4E2A;&#x6620;&#x5C04;&#x8868;&#xFF0C;&#x5219;&#x8FD4;&#x56DE;True&#xFF0C;&#x5426;&#x5219;&#x8FD4;&#x56DE;False&#x3002;</span></p></dd></dl><dl class="function"><dt id="sqlalchemy.ext.declarative.synonym_for"><span class="yiyi-st" id="yiyi-115"> <code class="descclassname">sqlalchemy.ext.declarative.</code><code class="descname">synonym_for</code><span class="sig-paren">(</span><em>name</em>, <em>map_column=False</em><span class="sig-paren">)</span><a class="headerlink" href="#sqlalchemy.ext.declarative.synonym_for" title="Permalink to this definition">&#xB6;</a></span></dt><dd><p><span class="yiyi-st" id="yiyi-116">&#x88C5;&#x9970;&#x8005;&#xFF0C;&#x4F7F;Python @property&#x6210;&#x4E3A;&#x5217;&#x7684;&#x67E5;&#x8BE2;&#x540C;&#x4E49;&#x8BCD;&#x3002;</span></p><p><span class="yiyi-st" id="yiyi-117"><a class="reference internal" href="mapped_attributes.html#sqlalchemy.orm.synonym" title="sqlalchemy.orm.synonym"><code class="xref py py-func docutils literal"><span class="pre">synonym()</span></code></a>&#x7684;&#x88C5;&#x9970;&#x7248;&#x672C;&#x3002;</span><span class="yiyi-st" id="yiyi-118">&#x6B63;&#x5728;&#x88C5;&#x9970;&#x7684;&#x51FD;&#x6570;&#x662F;&apos;descriptor&apos;&#xFF0C;&#x5426;&#x5219;&#x5C06;&#x5B83;&#x7684;&#x53C2;&#x6570;&#x4F20;&#x9012;&#x7ED9;synonym()&#xFF1A;</span></p><div class="highlight-python"><div class="highlight"><pre><span></span><span class="nd">@synonym_for</span><span class="p">(</span><span class="s1">&apos;col&apos;</span><span class="p">)</span>
<span class="nd">@property</span>
<span class="k">def</span> <span class="nf">prop</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
    <span class="k">return</span> <span class="s1">&apos;special sauce&apos;</span></pre></div></div><p><span class="yiyi-st" id="yiyi-119">&#x5E38;&#x89C4;&#x7684;<code class="docutils literal"><span class="pre">synonym()</span></code>&#x4E5F;&#x53EF;&#x4EE5;&#x5728;&#x58F0;&#x660E;&#x6027;&#x8BBE;&#x7F6E;&#x4E2D;&#x76F4;&#x63A5;&#x4F7F;&#x7528;&#xFF0C;&#x5E76;&#x4E14;&#x53EF;&#x4EE5;&#x65B9;&#x4FBF;&#x8BFB;/&#x5199;&#x5C5E;&#x6027;&#xFF1A;</span></p><div class="highlight-python"><div class="highlight"><pre><span></span><span class="n">prop</span> <span class="o">=</span> <span class="n">synonym</span><span class="p">(</span><span class="s1">&apos;col&apos;</span><span class="p">,</span> <span class="n">descriptor</span><span class="o">=</span><span class="nb">property</span><span class="p">(</span><span class="n">_read_prop</span><span class="p">,</span> <span class="n">_write_prop</span><span class="p">))</span></pre></div></div></dd></dl><dl class="function"><dt id="sqlalchemy.ext.declarative.comparable_using"><span class="yiyi-st" id="yiyi-120"><code class="descclassname"> sqlalchemy.ext.declarative&#x3002; T0&gt; <code class="descname"> comparable_using  T1&gt; <span class="sig-paren">&#xFF08; T2&gt; <em> comparator_factory  T3&gt; <span class="sig-paren">&#xFF09; T4&gt; <a class="headerlink" href="#sqlalchemy.ext.declarative.comparable_using" title="Permalink to this definition">&#xB6;&lt; / T5&gt;</a></span></em></span></code></code></span></dt><dd><p><span class="yiyi-st" id="yiyi-121">&#x88C5;&#x9970;&#x8005;&#xFF0C;&#x5141;&#x8BB8;&#x5728;&#x67E5;&#x8BE2;&#x6807;&#x51C6;&#x4E2D;&#x4F7F;&#x7528;Python @property&#x3002;</span></p><p><span class="yiyi-st" id="yiyi-122">&#x8FD9;&#x662F;&#x901A;&#x8FC7;comparator_factory&#x548C;&#x6B63;&#x5728;&#x88C5;&#x9970;&#x7684;&#x51FD;&#x6570;&#x7684;<code class="xref py py-func docutils literal"><span class="pre">comparable_property()</span></code>&#x7684;&#x88C5;&#x9970;&#x5668;&#x524D;&#x7AEF;&#xFF1A;</span></p><div class="highlight-python"><div class="highlight"><pre><span></span><span class="nd">@comparable_using</span><span class="p">(</span><span class="n">MyComparatorType</span><span class="p">)</span>
<span class="nd">@property</span>
<span class="k">def</span> <span class="nf">prop</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
    <span class="k">return</span> <span class="s1">&apos;special sauce&apos;</span></pre></div></div><p><span class="yiyi-st" id="yiyi-123">&#x5E38;&#x89C4;&#x7684;<code class="docutils literal"><span class="pre">comparable_property()</span></code>&#x4E5F;&#x53EF;&#x4EE5;&#x5728;&#x58F0;&#x660E;&#x6027;&#x8BBE;&#x7F6E;&#x4E2D;&#x76F4;&#x63A5;&#x4F7F;&#x7528;&#xFF0C;&#x5E76;&#x4E14;&#x53EF;&#x4EE5;&#x65B9;&#x4FBF;&#x8BFB;/&#x5199;&#x5C5E;&#x6027;&#xFF1A;</span></p><div class="highlight-python"><div class="highlight"><pre><span></span><span class="n">prop</span> <span class="o">=</span> <span class="n">comparable_property</span><span class="p">(</span><span class="n">MyComparatorType</span><span class="p">)</span></pre></div></div></dd></dl><dl class="function"><dt id="sqlalchemy.ext.declarative.instrument_declarative"><span class="yiyi-st" id="yiyi-124"> <code class="descclassname">sqlalchemy.ext.declarative.</code><code class="descname">instrument_declarative</code><span class="sig-paren">(</span><em>cls</em>, <em>registry</em>, <em>metadata</em><span class="sig-paren">)</span><a class="headerlink" href="#sqlalchemy.ext.declarative.instrument_declarative" title="Permalink to this definition">&#xB6;</a></span></dt><dd><p><span class="yiyi-st" id="yiyi-125">&#x7ED9;&#x5B9A;&#x4E00;&#x4E2A;&#x7C7B;&#xFF0C;&#x4F7F;&#x7528;&#x7ED9;&#x5B9A;&#x7684;&#x6CE8;&#x518C;&#x8868;&#xFF08;&#x58F0;&#x660E;&#x53EF;&#x4EE5;&#x662F;&#x4EFB;&#x4F55;&#x5B57;&#x5178;&#x548C;MetaData&#x5BF9;&#x8C61;&#xFF09;&#x58F0;&#x660E;&#x6027;&#x5730;&#x914D;&#x7F6E;&#x7C7B;&#x3002;</span></p></dd></dl><dl class="class"><dt id="sqlalchemy.ext.declarative.AbstractConcreteBase"><span class="yiyi-st" id="yiyi-126"><em class="property">class</em> <code class="descclassname">sqlalchemy.ext.declarative&#x3002;</code> <code class="descname">AbstractConcreteBase</code> <a class="headerlink" href="#sqlalchemy.ext.declarative.AbstractConcreteBase" title="Permalink to this definition">&#xB6;</a></span></dt><dd><p><span class="yiyi-st" id="yiyi-127">&#x57FA;&#x7840;&#xFF1A;<code class="xref py py-class docutils literal"><span class="pre">sqlalchemy.ext.declarative.api.ConcreteBase</span></code></span></p><p><span class="yiyi-st" id="yiyi-128">&#x201C;&#x5177;&#x4F53;&#x201D;&#x58F0;&#x660E;&#x6620;&#x5C04;&#x7684;&#x52A9;&#x624B;&#x7C7B;&#x3002;</span></p><p><span class="yiyi-st" id="yiyi-129"><a class="reference internal" href="#sqlalchemy.ext.declarative.AbstractConcreteBase" title="sqlalchemy.ext.declarative.AbstractConcreteBase"><code class="xref py py-class docutils literal"><span class="pre">AbstractConcreteBase</span></code></a> will use the <a class="reference internal" href="mapping_api.html#sqlalchemy.orm.util.polymorphic_union" title="sqlalchemy.orm.util.polymorphic_union"><code class="xref py py-func docutils literal"><span class="pre">polymorphic_union()</span></code></a> function automatically, against all tables mapped as a subclass to this class. </span><span class="yiyi-st" id="yiyi-130">&#x8BE5;&#x51FD;&#x6570;&#x901A;&#x8FC7;<code class="docutils literal"><span class="pre">__declare_last__()</span></code>&#x51FD;&#x6570;&#x8C03;&#x7528;&#xFF0C;&#x8BE5;&#x51FD;&#x6570;&#x672C;&#x8D28;&#x4E0A;&#x662F;<a class="reference internal" href="events.html#sqlalchemy.orm.events.MapperEvents.after_configured" title="sqlalchemy.orm.events.MapperEvents.after_configured"><code class="xref py py-meth docutils literal"><span class="pre">after_configured()</span></code></a>&#x4E8B;&#x4EF6;&#x7684;&#x94A9;&#x5B50;&#x3002;</span></p><p><span class="yiyi-st" id="yiyi-131"><a class="reference internal" href="#sqlalchemy.ext.declarative.AbstractConcreteBase" title="sqlalchemy.ext.declarative.AbstractConcreteBase"><code class="xref py py-class docutils literal"><span class="pre">AbstractConcreteBase</span></code></a> does produce a mapped class for the base class, however it is not persisted to any table; it is instead mapped directly to the &#x201C;polymorphic&#x201D; selectable directly and is only used for selecting. </span><span class="yiyi-st" id="yiyi-132">&#x4E0E;<a class="reference internal" href="#sqlalchemy.ext.declarative.ConcreteBase" title="sqlalchemy.ext.declarative.ConcreteBase"><code class="xref py py-class docutils literal"><span class="pre">ConcreteBase</span></code></a>&#x6BD4;&#x8F83;&#xFF0C;&#x5B83;&#x4E3A;&#x57FA;&#x7C7B;&#x521B;&#x5EFA;&#x4E00;&#x4E2A;&#x6301;&#x4E45;&#x8868;&#x3002;</span></p><p><span class="yiyi-st" id="yiyi-133">&#x4F8B;&#xFF1A;</span></p><div class="highlight-python"><div class="highlight"><pre><span></span><span class="kn">from</span> <span class="nn">sqlalchemy.ext.declarative</span> <span class="kn">import</span> <span class="n">AbstractConcreteBase</span>

<span class="k">class</span> <span class="nc">Employee</span><span class="p">(</span><span class="n">AbstractConcreteBase</span><span class="p">,</span> <span class="n">Base</span><span class="p">):</span>
    <span class="k">pass</span>

<span class="k">class</span> <span class="nc">Manager</span><span class="p">(</span><span class="n">Employee</span><span class="p">):</span>
    <span class="n">__tablename__</span> <span class="o">=</span> <span class="s1">&apos;manager&apos;</span>
    <span class="n">employee_id</span> <span class="o">=</span> <span class="n">Column</span><span class="p">(</span><span class="n">Integer</span><span class="p">,</span> <span class="n">primary_key</span><span class="o">=</span><span class="bp">True</span><span class="p">)</span>
    <span class="n">name</span> <span class="o">=</span> <span class="n">Column</span><span class="p">(</span><span class="n">String</span><span class="p">(</span><span class="mi">50</span><span class="p">))</span>
    <span class="n">manager_data</span> <span class="o">=</span> <span class="n">Column</span><span class="p">(</span><span class="n">String</span><span class="p">(</span><span class="mi">40</span><span class="p">))</span>

    <span class="n">__mapper_args__</span> <span class="o">=</span> <span class="p">{</span>
        <span class="s1">&apos;polymorphic_identity&apos;</span><span class="p">:</span><span class="s1">&apos;manager&apos;</span><span class="p">,</span>
        <span class="s1">&apos;concrete&apos;</span><span class="p">:</span><span class="bp">True</span><span class="p">}</span></pre></div></div><p><span class="yiyi-st" id="yiyi-134">&#x62BD;&#x8C61;&#x57FA;&#x7C7B;&#x901A;&#x8FC7;&#x58F0;&#x660E;&#x4EE5;&#x7279;&#x6B8A;&#x65B9;&#x5F0F;&#x5904;&#x7406;&#xFF1B;&#x5728;&#x7C7B;&#x914D;&#x7F6E;&#x65F6;&#xFF0C;&#x5B83;&#x7684;&#x884C;&#x4E3A;&#x5C31;&#x50CF;&#x662F;&#x4E00;&#x4E2A;&#x58F0;&#x660E;&#x5F0F;&#x6DF7;&#x5408;&#x6216;&#x4E00;&#x4E2A;<code class="docutils literal"><span class="pre">__abstract__</span></code>&#x57FA;&#x7C7B;&#x3002;</span><span class="yiyi-st" id="yiyi-135">&#x4E00;&#x65E6;&#x914D;&#x7F6E;&#x4E86;&#x7C7B;&#x5E76;&#x4E14;&#x751F;&#x6210;&#x4E86;&#x6620;&#x5C04;&#xFF0C;&#x5B83;&#x5C31;&#x4F1A;&#x81EA;&#x5DF1;&#x6620;&#x5C04;&#xFF0C;&#x4F46;&#x662F;&#x5728;&#x5B83;&#x7684;&#x6240;&#x6709;&#x540E;&#x7EE7;&#x4E4B;&#x540E;&#x3002;</span><span class="yiyi-st" id="yiyi-136">&#x8FD9;&#x662F;&#x5728;&#x5176;&#x4ED6;SQLAlchemy&#x7CFB;&#x7EDF;&#x4E2D;&#x627E;&#x4E0D;&#x5230;&#x7684;&#x72EC;&#x7279;&#x6620;&#x5C04;&#x7CFB;&#x7EDF;&#x3002;</span></p><p><span class="yiyi-st" id="yiyi-137">&#x4F7F;&#x7528;&#x8FD9;&#x79CD;&#x65B9;&#x6CD5;&#xFF0C;&#x6211;&#x4EEC;&#x53EF;&#x4EE5;&#x6309;&#x7167;&#x6211;&#x4EEC;&#x901A;&#x5E38;&#x5728;<a class="reference internal" href="mixins.html#declarative-mixins"><span>Mixin and Custom Base Classes</span></a>&#x4E2D;&#x6267;&#x884C;&#x7684;&#x65B9;&#x5F0F;&#x6307;&#x5B9A;&#x5C06;&#x5728;&#x6620;&#x5C04;&#x7684;&#x5B50;&#x7C7B;&#x4E0A;&#x8FDB;&#x884C;&#x7684;&#x5217;&#x548C;&#x5C5E;&#x6027;&#xFF1A;</span></p><div class="highlight-python"><div class="highlight"><pre><span></span><span class="k">class</span> <span class="nc">Company</span><span class="p">(</span><span class="n">Base</span><span class="p">):</span>
    <span class="n">__tablename__</span> <span class="o">=</span> <span class="s1">&apos;company&apos;</span>
    <span class="nb">id</span> <span class="o">=</span> <span class="n">Column</span><span class="p">(</span><span class="n">Integer</span><span class="p">,</span> <span class="n">primary_key</span><span class="o">=</span><span class="bp">True</span><span class="p">)</span>

<span class="k">class</span> <span class="nc">Employee</span><span class="p">(</span><span class="n">AbstractConcreteBase</span><span class="p">,</span> <span class="n">Base</span><span class="p">):</span>
    <span class="n">employee_id</span> <span class="o">=</span> <span class="n">Column</span><span class="p">(</span><span class="n">Integer</span><span class="p">,</span> <span class="n">primary_key</span><span class="o">=</span><span class="bp">True</span><span class="p">)</span>

    <span class="nd">@declared_attr</span>
    <span class="k">def</span> <span class="nf">company_id</span><span class="p">(</span><span class="n">cls</span><span class="p">):</span>
        <span class="k">return</span> <span class="n">Column</span><span class="p">(</span><span class="n">ForeignKey</span><span class="p">(</span><span class="s1">&apos;company.id&apos;</span><span class="p">))</span>

    <span class="nd">@declared_attr</span>
    <span class="k">def</span> <span class="nf">company</span><span class="p">(</span><span class="n">cls</span><span class="p">):</span>
        <span class="k">return</span> <span class="n">relationship</span><span class="p">(</span><span class="s2">&quot;Company&quot;</span><span class="p">)</span>

<span class="k">class</span> <span class="nc">Manager</span><span class="p">(</span><span class="n">Employee</span><span class="p">):</span>
    <span class="n">__tablename__</span> <span class="o">=</span> <span class="s1">&apos;manager&apos;</span>

    <span class="n">name</span> <span class="o">=</span> <span class="n">Column</span><span class="p">(</span><span class="n">String</span><span class="p">(</span><span class="mi">50</span><span class="p">))</span>
    <span class="n">manager_data</span> <span class="o">=</span> <span class="n">Column</span><span class="p">(</span><span class="n">String</span><span class="p">(</span><span class="mi">40</span><span class="p">))</span>

    <span class="n">__mapper_args__</span> <span class="o">=</span> <span class="p">{</span>
        <span class="s1">&apos;polymorphic_identity&apos;</span><span class="p">:</span><span class="s1">&apos;manager&apos;</span><span class="p">,</span>
        <span class="s1">&apos;concrete&apos;</span><span class="p">:</span><span class="bp">True</span><span class="p">}</span></pre></div></div><p><span class="yiyi-st" id="yiyi-138">&#x4F46;&#x662F;&#xFF0C;&#x5F53;&#x6211;&#x4EEC;&#x4F7F;&#x7528;&#x6211;&#x4EEC;&#x7684;&#x6620;&#x5C04;&#x65F6;&#xFF0C;<code class="docutils literal"><span class="pre">Manager</span></code>&#x548C;<code class="docutils literal"><span class="pre">Employee</span></code>&#x5C06;&#x5177;&#x6709;&#x53EF;&#x72EC;&#x7ACB;&#x4F7F;&#x7528;&#x7684;<code class="docutils literal"><span class="pre">.company</span></code>&#x5C5E;&#x6027;&#xFF1A;</span></p><div class="highlight-python"><div class="highlight"><pre><span></span><span class="n">session</span><span class="o">.</span><span class="n">query</span><span class="p">(</span><span class="n">Employee</span><span class="p">)</span><span class="o">.</span><span class="n">filter</span><span class="p">(</span><span class="n">Employee</span><span class="o">.</span><span class="n">company</span><span class="o">.</span><span class="n">has</span><span class="p">(</span><span class="nb">id</span><span class="o">=</span><span class="mi">5</span><span class="p">))</span></pre></div></div><div class="versionchanged"><p><span class="yiyi-st" id="yiyi-139"><span class="versionmodified">&#x5728;&#x7248;&#x672C;1.0.0&#x4E2D;&#x8FDB;&#x884C;&#x4E86;&#x66F4;&#x6539;&#xFF1A;</span>  -  <a class="reference internal" href="#sqlalchemy.ext.declarative.AbstractConcreteBase" title="sqlalchemy.ext.declarative.AbstractConcreteBase"><code class="xref py py-class docutils literal"><span class="pre">AbstractConcreteBase</span></code></a>&#x7684;&#x673A;&#x5236;&#x5DF2;&#x7ECF;&#x8FC7;&#x4FEE;&#x6539;&#xFF0C;&#x4EE5;&#x652F;&#x6301;&#x76F4;&#x63A5;&#x5728;&#x62BD;&#x8C61;&#x57FA;&#x7840;&#x4E0A;&#x5EFA;&#x7ACB;&#x7684;&#x5173;&#x7CFB;&#xFF0C;&#x800C;&#x65E0;&#x9700;&#x4EFB;&#x4F55;&#x7279;&#x6B8A;&#x7684;&#x914D;&#x7F6E;&#x6B65;&#x9AA4;&#x3002;</span></p></div><div class="admonition seealso"><p class="first admonition-title"><span class="yiyi-st" id="yiyi-140">&#x4E5F;&#x53EF;&#x4EE5;&#x770B;&#x770B;</span></p><p><span class="yiyi-st" id="yiyi-141"><a class="reference internal" href="#sqlalchemy.ext.declarative.ConcreteBase" title="sqlalchemy.ext.declarative.ConcreteBase"><code class="xref py py-class docutils literal"><span class="pre">ConcreteBase</span></code></a></span></p><p><span class="yiyi-st" id="yiyi-142"><a class="reference internal" href="inheritance.html#concrete-inheritance"><span>Concrete Table Inheritance</span></a></span></p><p class="last"><span class="yiyi-st" id="yiyi-143"><a class="reference internal" href="inheritance.html#inheritance-concrete-helpers"><span>Using the Declarative Helper Classes</span></a></span></p></div></dd></dl><dl class="class"><dt id="sqlalchemy.ext.declarative.ConcreteBase"><span class="yiyi-st" id="yiyi-144"><em class="property">class</em> <code class="descclassname">sqlalchemy.ext.declarative&#x3002;</code> <code class="descname">ConcreteBase</code> <a class="headerlink" href="#sqlalchemy.ext.declarative.ConcreteBase" title="Permalink to this definition">&#xB6;</a></span></dt><dd><p><span class="yiyi-st" id="yiyi-145">&#x201C;&#x5177;&#x4F53;&#x201D;&#x58F0;&#x660E;&#x6620;&#x5C04;&#x7684;&#x52A9;&#x624B;&#x7C7B;&#x3002;</span></p><p><span class="yiyi-st" id="yiyi-146"><a class="reference internal" href="#sqlalchemy.ext.declarative.ConcreteBase" title="sqlalchemy.ext.declarative.ConcreteBase"><code class="xref py py-class docutils literal"><span class="pre">ConcreteBase</span></code></a> will use the <a class="reference internal" href="mapping_api.html#sqlalchemy.orm.util.polymorphic_union" title="sqlalchemy.orm.util.polymorphic_union"><code class="xref py py-func docutils literal"><span class="pre">polymorphic_union()</span></code></a> function automatically, against all tables mapped as a subclass to this class. </span><span class="yiyi-st" id="yiyi-147">&#x8BE5;&#x51FD;&#x6570;&#x901A;&#x8FC7;<code class="docutils literal"><span class="pre">__declare_last__()</span></code>&#x51FD;&#x6570;&#x8C03;&#x7528;&#xFF0C;&#x8BE5;&#x51FD;&#x6570;&#x672C;&#x8D28;&#x4E0A;&#x662F;<a class="reference internal" href="events.html#sqlalchemy.orm.events.MapperEvents.after_configured" title="sqlalchemy.orm.events.MapperEvents.after_configured"><code class="xref py py-meth docutils literal"><span class="pre">after_configured()</span></code></a>&#x4E8B;&#x4EF6;&#x7684;&#x94A9;&#x5B50;&#x3002;</span></p><p><span class="yiyi-st" id="yiyi-148"><a class="reference internal" href="#sqlalchemy.ext.declarative.ConcreteBase" title="sqlalchemy.ext.declarative.ConcreteBase"><code class="xref py py-class docutils literal"><span class="pre">ConcreteBase</span></code></a> produces a mapped table for the class itself. </span><span class="yiyi-st" id="yiyi-149">&#x4E0E;<a class="reference internal" href="#sqlalchemy.ext.declarative.AbstractConcreteBase" title="sqlalchemy.ext.declarative.AbstractConcreteBase"><code class="xref py py-class docutils literal"><span class="pre">AbstractConcreteBase</span></code></a>&#x6BD4;&#x8F83;&#xFF0C;&#x4E0D;&#x662F;&#x3002;</span></p><p><span class="yiyi-st" id="yiyi-150">&#x4F8B;&#xFF1A;</span></p><div class="highlight-python"><div class="highlight"><pre><span></span><span class="kn">from</span> <span class="nn">sqlalchemy.ext.declarative</span> <span class="kn">import</span> <span class="n">ConcreteBase</span>

<span class="k">class</span> <span class="nc">Employee</span><span class="p">(</span><span class="n">ConcreteBase</span><span class="p">,</span> <span class="n">Base</span><span class="p">):</span>
    <span class="n">__tablename__</span> <span class="o">=</span> <span class="s1">&apos;employee&apos;</span>
    <span class="n">employee_id</span> <span class="o">=</span> <span class="n">Column</span><span class="p">(</span><span class="n">Integer</span><span class="p">,</span> <span class="n">primary_key</span><span class="o">=</span><span class="bp">True</span><span class="p">)</span>
    <span class="n">name</span> <span class="o">=</span> <span class="n">Column</span><span class="p">(</span><span class="n">String</span><span class="p">(</span><span class="mi">50</span><span class="p">))</span>
    <span class="n">__mapper_args__</span> <span class="o">=</span> <span class="p">{</span>
                    <span class="s1">&apos;polymorphic_identity&apos;</span><span class="p">:</span><span class="s1">&apos;employee&apos;</span><span class="p">,</span>
                    <span class="s1">&apos;concrete&apos;</span><span class="p">:</span><span class="bp">True</span><span class="p">}</span>

<span class="k">class</span> <span class="nc">Manager</span><span class="p">(</span><span class="n">Employee</span><span class="p">):</span>
    <span class="n">__tablename__</span> <span class="o">=</span> <span class="s1">&apos;manager&apos;</span>
    <span class="n">employee_id</span> <span class="o">=</span> <span class="n">Column</span><span class="p">(</span><span class="n">Integer</span><span class="p">,</span> <span class="n">primary_key</span><span class="o">=</span><span class="bp">True</span><span class="p">)</span>
    <span class="n">name</span> <span class="o">=</span> <span class="n">Column</span><span class="p">(</span><span class="n">String</span><span class="p">(</span><span class="mi">50</span><span class="p">))</span>
    <span class="n">manager_data</span> <span class="o">=</span> <span class="n">Column</span><span class="p">(</span><span class="n">String</span><span class="p">(</span><span class="mi">40</span><span class="p">))</span>
    <span class="n">__mapper_args__</span> <span class="o">=</span> <span class="p">{</span>
                    <span class="s1">&apos;polymorphic_identity&apos;</span><span class="p">:</span><span class="s1">&apos;manager&apos;</span><span class="p">,</span>
                    <span class="s1">&apos;concrete&apos;</span><span class="p">:</span><span class="bp">True</span><span class="p">}</span></pre></div></div><div class="admonition seealso"><p class="first admonition-title"><span class="yiyi-st" id="yiyi-151">&#x4E5F;&#x53EF;&#x4EE5;&#x770B;&#x770B;</span></p><p><span class="yiyi-st" id="yiyi-152"><a class="reference internal" href="#sqlalchemy.ext.declarative.AbstractConcreteBase" title="sqlalchemy.ext.declarative.AbstractConcreteBase"><code class="xref py py-class docutils literal"><span class="pre">AbstractConcreteBase</span></code></a></span></p><p><span class="yiyi-st" id="yiyi-153"><a class="reference internal" href="inheritance.html#concrete-inheritance"><span>Concrete Table Inheritance</span></a></span></p><p class="last"><span class="yiyi-st" id="yiyi-154"><a class="reference internal" href="inheritance.html#inheritance-concrete-helpers"><span>Using the Declarative Helper Classes</span></a></span></p></div></dd></dl><dl class="class"><dt id="sqlalchemy.ext.declarative.DeferredReflection"><span class="yiyi-st" id="yiyi-155"><em class="property">class</em> <code class="descclassname">sqlalchemy.ext.declarative&#x3002;</code> <code class="descname">DeferredReflection</code> <a class="headerlink" href="#sqlalchemy.ext.declarative.DeferredReflection" title="Permalink to this definition">&#xB6;</a></span></dt><dd><p><span class="yiyi-st" id="yiyi-156">&#x57FA;&#x4E8E;&#x5EF6;&#x8FDF;&#x53CD;&#x5C04;&#x6B65;&#x9AA4;&#x6784;&#x5EFA;&#x6620;&#x5C04;&#x7684;&#x8F85;&#x52A9;&#x7C7B;&#x3002;</span></p><p><span class="yiyi-st" id="yiyi-157">&#x901A;&#x5E38;&#xFF0C;&#x901A;&#x8FC7;&#x5728;&#x58F0;&#x660E;&#x5F0F;&#x7C7B;&#x4E2D;&#x4F7F;&#x7528;autoload = True&#x5C06;<a class="reference internal" href="core_metadata.html#sqlalchemy.schema.Table" title="sqlalchemy.schema.Table"><code class="xref py py-class docutils literal"><span class="pre">Table</span></code></a>&#x5BF9;&#x8C61;&#x8BBE;&#x7F6E;&#x4E3A;<code class="docutils literal"><span class="pre">__table__</span></code>&#x5C5E;&#x6027;&#xFF0C;&#x53EF;&#x4EE5;&#x5728;&#x58F0;&#x660E;&#x4E2D;&#x4F7F;&#x7528;&#x58F0;&#x660E;&#x5F0F;&#x547D;&#x4EE4;&#x3002;</span><span class="yiyi-st" id="yiyi-158">The caveat is that the <a class="reference internal" href="core_metadata.html#sqlalchemy.schema.Table" title="sqlalchemy.schema.Table"><code class="xref py py-class docutils literal"><span class="pre">Table</span></code></a> must be fully reflected, or at the very least have a primary key column, at the point at which a normal declarative mapping is constructed, meaning the <a class="reference internal" href="core_connections.html#sqlalchemy.engine.Engine" title="sqlalchemy.engine.Engine"><code class="xref py py-class docutils literal"><span class="pre">Engine</span></code></a> must be available at class declaration time.</span></p><p><span class="yiyi-st" id="yiyi-159">&#x5728;&#x4E00;&#x4E2A;&#x7279;&#x5B9A;&#x7684;&#x65B9;&#x6CD5;&#x88AB;&#x8C03;&#x7528;&#x540E;&#xFF0C;<a class="reference internal" href="#sqlalchemy.ext.declarative.DeferredReflection" title="sqlalchemy.ext.declarative.DeferredReflection"><code class="xref py py-class docutils literal"><span class="pre">DeferredReflection</span></code></a> mixin&#x5C06;&#x6620;&#x5C04;&#x5668;&#x7684;&#x6784;&#x9020;&#x79FB;&#x52A8;&#x5230;&#x7A0D;&#x540E;&#x7684;&#x70B9;&#xFF0C;&#x8BE5;&#x65B9;&#x6CD5;&#x9996;&#x5148;&#x53CD;&#x6620;&#x4E86;&#x8FC4;&#x4ECA;&#x4E3A;&#x6B62;&#x521B;&#x5EFA;&#x7684;&#x6240;&#x6709;<a class="reference internal" href="core_metadata.html#sqlalchemy.schema.Table" title="sqlalchemy.schema.Table"><code class="xref py py-class docutils literal"><span class="pre">Table</span></code></a>&#x5BF9;&#x8C61;&#x3002;</span><span class="yiyi-st" id="yiyi-160">&#x7C7B;&#x53EF;&#x4EE5;&#x8FD9;&#x6837;&#x5B9A;&#x4E49;&#x5B83;&#xFF1A;</span></p><div class="highlight-python"><div class="highlight"><pre><span></span><span class="kn">from</span> <span class="nn">sqlalchemy.ext.declarative</span> <span class="kn">import</span> <span class="n">declarative_base</span>
<span class="kn">from</span> <span class="nn">sqlalchemy.ext.declarative</span> <span class="kn">import</span> <span class="n">DeferredReflection</span>
<span class="n">Base</span> <span class="o">=</span> <span class="n">declarative_base</span><span class="p">()</span>

<span class="k">class</span> <span class="nc">MyClass</span><span class="p">(</span><span class="n">DeferredReflection</span><span class="p">,</span> <span class="n">Base</span><span class="p">):</span>
    <span class="n">__tablename__</span> <span class="o">=</span> <span class="s1">&apos;mytable&apos;</span></pre></div></div><p><span class="yiyi-st" id="yiyi-161">Above, <code class="docutils literal"><span class="pre">MyClass</span></code> is not yet mapped. </span><span class="yiyi-st" id="yiyi-162">&#x5728;&#x4EE5;&#x4E0A;&#x8FF0;&#x65B9;&#x5F0F;&#x5B9A;&#x4E49;&#x4E86;&#x4E00;&#x7CFB;&#x5217;&#x7C7B;&#x4E4B;&#x540E;&#xFF0C;&#x6240;&#x6709;&#x8868;&#x90FD;&#x53EF;&#x4EE5;&#x88AB;&#x6620;&#x5C04;&#xFF0C;&#x5E76;&#x4E14;&#x4F7F;&#x7528;<a class="reference internal" href="#sqlalchemy.ext.declarative.DeferredReflection.prepare" title="sqlalchemy.ext.declarative.DeferredReflection.prepare"><code class="xref py py-meth docutils literal"><span class="pre">prepare()</span></code></a>&#x521B;&#x5EFA;&#x6620;&#x5C04;&#xFF1A;</span></p><div class="highlight-python"><div class="highlight"><pre><span></span><span class="n">engine</span> <span class="o">=</span> <span class="n">create_engine</span><span class="p">(</span><span class="s2">&quot;someengine://...&quot;</span><span class="p">)</span>
<span class="n">DeferredReflection</span><span class="o">.</span><span class="n">prepare</span><span class="p">(</span><span class="n">engine</span><span class="p">)</span></pre></div></div><p><span class="yiyi-st" id="yiyi-163"><a class="reference internal" href="#sqlalchemy.ext.declarative.DeferredReflection" title="sqlalchemy.ext.declarative.DeferredReflection"><code class="xref py py-class docutils literal"><span class="pre">DeferredReflection</span></code></a> mixin&#x53EF;&#x4EE5;&#x5E94;&#x7528;&#x4E8E;&#x5404;&#x4E2A;&#x7C7B;&#xFF0C;&#x7528;&#x4F5C;&#x58F0;&#x660E;&#x6027;&#x57FA;&#x672C;&#x672C;&#x8EAB;&#x7684;&#x57FA;&#x7840;&#xFF0C;&#x6216;&#x8005;&#x7528;&#x4E8E;&#x81EA;&#x5B9A;&#x4E49;&#x62BD;&#x8C61;&#x7C7B;&#x3002;</span><span class="yiyi-st" id="yiyi-164">&#x4F7F;&#x7528;&#x62BD;&#x8C61;&#x57FA;&#x7840;&#x5141;&#x8BB8;&#x4E3A;&#x7279;&#x5B9A;&#x51C6;&#x5907;&#x6B65;&#x9AA4;&#x51C6;&#x5907;&#x53EA;&#x6709;&#x4E00;&#x90E8;&#x5206;&#x7C7B;&#xFF0C;&#x8FD9;&#x5BF9;&#x4E8E;&#x4F7F;&#x7528;&#x591A;&#x4E2A;&#x5F15;&#x64CE;&#x7684;&#x5E94;&#x7528;&#x7A0B;&#x5E8F;&#x662F;&#x5FC5;&#x9700;&#x7684;&#x3002;</span><span class="yiyi-st" id="yiyi-165">&#x4F8B;&#x5982;&#xFF0C;&#x5982;&#x679C;&#x5E94;&#x7528;&#x7A0B;&#x5E8F;&#x6709;&#x4E24;&#x4E2A;&#x5F15;&#x64CE;&#xFF0C;&#x5219;&#x53EF;&#x4EE5;&#x4F7F;&#x7528;&#x4E24;&#x4E2A;&#x57FA;&#x7840;&#xFF0C;&#x5E76;&#x5206;&#x522B;&#x8FDB;&#x884C;&#x51C6;&#x5907;&#xFF0C;&#x4F8B;&#x5982;&#xFF1A;</span></p><div class="highlight-python"><div class="highlight"><pre><span></span><span class="k">class</span> <span class="nc">ReflectedOne</span><span class="p">(</span><span class="n">DeferredReflection</span><span class="p">,</span> <span class="n">Base</span><span class="p">):</span>
    <span class="n">__abstract__</span> <span class="o">=</span> <span class="bp">True</span>

<span class="k">class</span> <span class="nc">ReflectedTwo</span><span class="p">(</span><span class="n">DeferredReflection</span><span class="p">,</span> <span class="n">Base</span><span class="p">):</span>
    <span class="n">__abstract__</span> <span class="o">=</span> <span class="bp">True</span>

<span class="k">class</span> <span class="nc">MyClass</span><span class="p">(</span><span class="n">ReflectedOne</span><span class="p">):</span>
    <span class="n">__tablename__</span> <span class="o">=</span> <span class="s1">&apos;mytable&apos;</span>

<span class="k">class</span> <span class="nc">MyOtherClass</span><span class="p">(</span><span class="n">ReflectedOne</span><span class="p">):</span>
    <span class="n">__tablename__</span> <span class="o">=</span> <span class="s1">&apos;myothertable&apos;</span>

<span class="k">class</span> <span class="nc">YetAnotherClass</span><span class="p">(</span><span class="n">ReflectedTwo</span><span class="p">):</span>
    <span class="n">__tablename__</span> <span class="o">=</span> <span class="s1">&apos;yetanothertable&apos;</span>

<span class="c1"># ... etc.</span></pre></div></div><p><span class="yiyi-st" id="yiyi-166">&#x4EE5;&#x4E0A;&#xFF0C;&#x53EF;&#x4EE5;&#x5206;&#x522B;&#x914D;&#x7F6E;<code class="docutils literal"><span class="pre">ReflectedOne</span></code>&#x548C;<code class="docutils literal"><span class="pre">ReflectedTwo</span></code>&#x7684;&#x7C7B;&#x5C42;&#x6B21;&#x7ED3;&#x6784;&#xFF1A;</span></p><div class="highlight-python"><div class="highlight"><pre><span></span><span class="n">ReflectedOne</span><span class="o">.</span><span class="n">prepare</span><span class="p">(</span><span class="n">engine_one</span><span class="p">)</span>
<span class="n">ReflectedTwo</span><span class="o">.</span><span class="n">prepare</span><span class="p">(</span><span class="n">engine_two</span><span class="p">)</span></pre></div></div><div class="versionadded"><p><span class="yiyi-st" id="yiyi-167"><span class="versionmodified">0.8&#x7248;&#x672C;&#x4E2D;&#x7684;&#x65B0;&#x529F;&#x80FD;</span></span></p></div><dl class="classmethod"><dt id="sqlalchemy.ext.declarative.DeferredReflection.prepare"><span class="yiyi-st" id="yiyi-168"> <em class="property">classmethod </em><code class="descname">prepare</code><span class="sig-paren">(</span><em>engine</em><span class="sig-paren">)</span><a class="headerlink" href="#sqlalchemy.ext.declarative.DeferredReflection.prepare" title="Permalink to this definition">&#xB6;</a></span></dt><dd><p><span class="yiyi-st" id="yiyi-169">&#x4E3A;&#x6240;&#x6709;&#x5F53;&#x524D;&#x7684;<a class="reference internal" href="#sqlalchemy.ext.declarative.DeferredReflection" title="sqlalchemy.ext.declarative.DeferredReflection"><code class="xref py py-class docutils literal"><span class="pre">DeferredReflection</span></code></a>&#x5B50;&#x7C7B;&#x53CD;&#x6620;&#x6240;&#x6709;<a class="reference internal" href="core_metadata.html#sqlalchemy.schema.Table" title="sqlalchemy.schema.Table"><code class="xref py py-class docutils literal"><span class="pre">Table</span></code></a>&#x5BF9;&#x8C61;</span></p></dd></dl></dd></dl><div class="section" id="special-directives"><h3><span class="yiyi-st" id="yiyi-170">&#x7279;&#x6B8A;&#x6307;&#x4EE4;<a class="headerlink" href="#special-directives" title="Permalink to this headline">&#xB6;</a></span></h3><div class="section" id="declare-last"><h4><span class="yiyi-st" id="yiyi-171"><code class="docutils literal"><span class="pre">__declare_last__()</span></code><a class="headerlink" href="#declare-last" title="Permalink to this headline">&#xB6;</a></span></h4><p><span class="yiyi-st" id="yiyi-172"><code class="docutils literal"><span class="pre">__declare_last__()</span></code>&#x94A9;&#x5B50;&#x5141;&#x8BB8;&#x5B9A;&#x4E49;&#x7531;<a class="reference internal" href="events.html#sqlalchemy.orm.events.MapperEvents.after_configured" title="sqlalchemy.orm.events.MapperEvents.after_configured"><code class="xref py py-meth docutils literal"><span class="pre">MapperEvents.after_configured()</span></code></a>&#x4E8B;&#x4EF6;&#x81EA;&#x52A8;&#x8C03;&#x7528;&#x7684;&#x7C7B;&#x7EA7;&#x522B;&#x51FD;&#x6570;&#xFF0C;&#x8BE5;&#x6620;&#x5C04;&#x5047;&#x5B9A;&#x6620;&#x5C04;&#x5DF2;&#x5B8C;&#x6210;&#xFF0C;&#x5E76;&#x4E14;&apos;configure&apos;&#x6B65;&#x9AA4;&#x5DF2;&#x7ECF;&#x5B8C;&#x6210;&#xFF1A;</span></p><div class="highlight-python"><div class="highlight"><pre><span></span><span class="k">class</span> <span class="nc">MyClass</span><span class="p">(</span><span class="n">Base</span><span class="p">):</span>
    <span class="nd">@classmethod</span>
    <span class="k">def</span> <span class="nf">__declare_last__</span><span class="p">(</span><span class="n">cls</span><span class="p">):</span>
        <span class="s2">&quot;&quot;</span>
        <span class="c1"># do something with mappings</span></pre></div></div><div class="versionadded"><p><span class="yiyi-st" id="yiyi-173"><span class="versionmodified">New in version 0.7.3.</span></span></p></div></div><div class="section" id="declare-first"><h4><span class="yiyi-st" id="yiyi-174"><code class="docutils literal"><span class="pre">__declare_first__()</span></code><a class="headerlink" href="#declare-first" title="Permalink to this headline">&#xB6;</a></span></h4><p><span class="yiyi-st" id="yiyi-175">&#x50CF;<code class="docutils literal"><span class="pre">__declare_last__()</span></code>&#xFF0C;&#x4F46;&#x662F;&#x5728;&#x6620;&#x5C04;&#x5668;&#x914D;&#x7F6E;&#x5F00;&#x59CB;&#x65F6;&#x901A;&#x8FC7;<a class="reference internal" href="events.html#sqlalchemy.orm.events.MapperEvents.before_configured" title="sqlalchemy.orm.events.MapperEvents.before_configured"><code class="xref py py-meth docutils literal"><span class="pre">MapperEvents.before_configured()</span></code></a>&#x4E8B;&#x4EF6;&#x8C03;&#x7528;&#xFF1A;</span></p><div class="highlight-python"><div class="highlight"><pre><span></span><span class="k">class</span> <span class="nc">MyClass</span><span class="p">(</span><span class="n">Base</span><span class="p">):</span>
    <span class="nd">@classmethod</span>
    <span class="k">def</span> <span class="nf">__declare_first__</span><span class="p">(</span><span class="n">cls</span><span class="p">):</span>
        <span class="s2">&quot;&quot;</span>
        <span class="c1"># do something before mappings are configured</span></pre></div></div><div class="versionadded"><p><span class="yiyi-st" id="yiyi-176"><span class="versionmodified">&#x7248;&#x672C;0.9.3&#x4E2D;&#x7684;&#x65B0;&#x529F;&#x80FD;</span></span></p></div></div><div class="section" id="abstract"><h4><span class="yiyi-st" id="yiyi-177"><code class="docutils literal"><span class="pre">__abstract__</span></code><a class="headerlink" href="#abstract" title="Permalink to this headline">&#xB6;</a></span></h4><p><span class="yiyi-st" id="yiyi-178"><code class="docutils literal"><span class="pre">__abstract__</span></code>&#x4F1A;&#x5BFC;&#x81F4;&#x58F0;&#x660E;&#x6027;&#x5B8C;&#x5168;&#x8DF3;&#x8FC7;&#x4E3A;&#x8BE5;&#x7C7B;&#x751F;&#x6210;&#x8868;&#x6216;&#x6620;&#x5C04;&#x5668;&#x3002;</span><span class="yiyi-st" id="yiyi-179">&#x4E00;&#x4E2A;&#x7C7B;&#x53EF;&#x4EE5;&#x50CF;mixin&#x4E00;&#x6837;&#x6DFB;&#x52A0;&#x5230;&#x5C42;&#x6B21;&#x7ED3;&#x6784;&#x4E2D;&#xFF08;&#x53C2;&#x89C1;<a class="reference internal" href="mixins.html#declarative-mixins"><span>Mixin and Custom Base Classes</span></a>&#xFF09;&#xFF0C;&#x5141;&#x8BB8;&#x5B50;&#x7C7B;&#x4EC5;&#x4ECE;&#x7279;&#x6B8A;&#x7C7B;&#x6269;&#x5C55;&#xFF1A;</span></p><div class="highlight-python"><div class="highlight"><pre><span></span><span class="k">class</span> <span class="nc">SomeAbstractBase</span><span class="p">(</span><span class="n">Base</span><span class="p">):</span>
    <span class="n">__abstract__</span> <span class="o">=</span> <span class="bp">True</span>

    <span class="k">def</span> <span class="nf">some_helpful_method</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="s2">&quot;&quot;</span>

    <span class="nd">@declared_attr</span>
    <span class="k">def</span> <span class="nf">__mapper_args__</span><span class="p">(</span><span class="n">cls</span><span class="p">):</span>
        <span class="k">return</span> <span class="p">{</span><span class="s2">&quot;helpful mapper arguments&quot;</span><span class="p">:</span><span class="bp">True</span><span class="p">}</span>

<span class="k">class</span> <span class="nc">MyMappedClass</span><span class="p">(</span><span class="n">SomeAbstractBase</span><span class="p">):</span>
    <span class="s2">&quot;&quot;</span></pre></div></div><p><span class="yiyi-st" id="yiyi-180"><code class="docutils literal"><span class="pre">__abstract__</span></code>&#x7684;&#x4E00;&#x4E2A;&#x53EF;&#x80FD;&#x7528;&#x9014;&#x662F;&#x5BF9;&#x4E0D;&#x540C;&#x7684;&#x57FA;&#x7840;&#x4F7F;&#x7528;&#x4E0D;&#x540C;&#x7684;<a class="reference internal" href="core_metadata.html#sqlalchemy.schema.MetaData" title="sqlalchemy.schema.MetaData"><code class="xref py py-class docutils literal"><span class="pre">MetaData</span></code></a>&#xFF1A;</span></p><div class="highlight-python"><div class="highlight"><pre><span></span><span class="n">Base</span> <span class="o">=</span> <span class="n">declarative_base</span><span class="p">()</span>

<span class="k">class</span> <span class="nc">DefaultBase</span><span class="p">(</span><span class="n">Base</span><span class="p">):</span>
    <span class="n">__abstract__</span> <span class="o">=</span> <span class="bp">True</span>
    <span class="n">metadata</span> <span class="o">=</span> <span class="n">MetaData</span><span class="p">()</span>

<span class="k">class</span> <span class="nc">OtherBase</span><span class="p">(</span><span class="n">Base</span><span class="p">):</span>
    <span class="n">__abstract__</span> <span class="o">=</span> <span class="bp">True</span>
    <span class="n">metadata</span> <span class="o">=</span> <span class="n">MetaData</span><span class="p">()</span></pre></div></div><p><span class="yiyi-st" id="yiyi-181">&#x4EE5;&#x4E0A;&#xFF0C;&#x4ECE;<code class="docutils literal"><span class="pre">DefaultBase</span></code>&#x7EE7;&#x627F;&#x7684;&#x7C7B;&#x5C06;&#x4F7F;&#x7528;&#x4E00;&#x4E2A;<a class="reference internal" href="core_metadata.html#sqlalchemy.schema.MetaData" title="sqlalchemy.schema.MetaData"><code class="xref py py-class docutils literal"><span class="pre">MetaData</span></code></a>&#x4F5C;&#x4E3A;&#x8868;&#x7684;&#x6CE8;&#x518C;&#x8868;&#xFF0C;&#x800C;&#x90A3;&#x4E9B;&#x4ECE;<code class="docutils literal"><span class="pre">OtherBase</span></code>&#x7EE7;&#x627F;&#x7684;&#x7C7B;&#x5C06;&#x4F7F;&#x7528;&#x4E0D;&#x540C;&#x7684;&#x8868;&#x3002;</span><span class="yiyi-st" id="yiyi-182">&#x8868;&#x683C;&#x672C;&#x8EAB;&#x53EF;&#x4EE5;&#x5728;&#x4E0D;&#x540C;&#x7684;&#x6570;&#x636E;&#x5E93;&#x4E2D;&#x521B;&#x5EFA;&#xFF1A;</span></p><div class="highlight-python"><div class="highlight"><pre><span></span><span class="n">DefaultBase</span><span class="o">.</span><span class="n">metadata</span><span class="o">.</span><span class="n">create_all</span><span class="p">(</span><span class="n">some_engine</span><span class="p">)</span>
<span class="n">OtherBase</span><span class="o">.</span><span class="n">metadata_create_all</span><span class="p">(</span><span class="n">some_other_engine</span><span class="p">)</span></pre></div></div><div class="versionadded"><p><span class="yiyi-st" id="yiyi-183"><span class="versionmodified">New in version 0.7.3.</span></span></p></div></div></div></div>