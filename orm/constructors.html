<h1><span class="yiyi-st" id="yiyi-40">&#x6784;&#x9020;&#x51FD;&#x6570;&#x548C;&#x5BF9;&#x8C61;&#x521D;&#x59CB;&#x5316;<a class="headerlink" href="#constructors-and-object-initialization" title="Permalink to this headline">&#xB6;</a></span></h1><p><span class="yiyi-st" id="yiyi-41">&#x6620;&#x5C04;&#x4E0D;&#x4F1A;&#x5BF9;&#x8BE5;&#x7C7B;&#x7684;&#x6784;&#x9020;&#x51FD;&#x6570;&#xFF08;<code class="docutils literal"><span class="pre">__init__</span></code>&#xFF09;&#x65B9;&#x6CD5;&#x65BD;&#x52A0;&#x4EFB;&#x4F55;&#x9650;&#x5236;&#x6216;&#x8981;&#x6C42;&#x3002;</span><span class="yiyi-st" id="yiyi-42">&#x60A8;&#x53EF;&#x4EE5;&#x81EA;&#x7531;&#x5730;&#x4E3A;&#x60A8;&#x5E0C;&#x671B;&#x7684;&#x51FD;&#x6570;&#x8BF7;&#x6C42;&#x4EFB;&#x4F55;&#x53C2;&#x6570;&#xFF0C;&#x4E3A;ORM&#x672A;&#x77E5;&#x7684;&#x5B9E;&#x4F8B;&#x5206;&#x914D;&#x5C5E;&#x6027;&#xFF0C;&#x5E76;&#x4E14;&#x901A;&#x5E38;&#x5728;&#x7F16;&#x5199;Python&#x7C7B;&#x7684;&#x6784;&#x9020;&#x51FD;&#x6570;&#x65F6;&#x6267;&#x884C;&#x901A;&#x5E38;&#x8981;&#x505A;&#x7684;&#x4EFB;&#x4F55;&#x5176;&#x4ED6;&#x64CD;&#x4F5C;&#x3002;</span></p><p><span class="yiyi-st" id="yiyi-43">&#x5F53;&#x4ECE;&#x6570;&#x636E;&#x5E93;&#x884C;&#x91CD;&#x65B0;&#x521B;&#x5EFA;&#x5BF9;&#x8C61;&#x65F6;&#xFF0C;SQLAlchemy ORM&#x4E0D;&#x4F1A;&#x8C03;&#x7528;<code class="docutils literal"><span class="pre">__init__</span></code>&#x3002;</span><span class="yiyi-st" id="yiyi-44">ORM&#x7684;&#x8FC7;&#x7A0B;&#x6709;&#x70B9;&#x7C7B;&#x4F3C;&#x4E8E;Python&#x6807;&#x51C6;&#x5E93;&#x7684;<code class="docutils literal"><span class="pre">pickle</span></code>&#x6A21;&#x5757;&#xFF0C;&#x8C03;&#x7528;&#x4F4E;&#x7EA7;&#x522B;&#x7684;<code class="docutils literal"><span class="pre">__new__</span></code>&#x65B9;&#x6CD5;&#xFF0C;&#x7136;&#x540E;&#x76F4;&#x63A5;&#x5728;&#x5B9E;&#x4F8B;&#x4E0A;&#x9759;&#x9759;&#x5730;&#x6062;&#x590D;&#x5C5E;&#x6027;&#xFF0C;&#x800C;&#x4E0D;&#x662F;&#x8C03;&#x7528;<code class="docutils literal"><span class="pre">__init__</span></code></span></p><p><span class="yiyi-st" id="yiyi-45">&#x5982;&#x679C;&#x60A8;&#x9700;&#x8981;&#x5728;&#x6570;&#x636E;&#x5E93;&#x52A0;&#x8F7D;&#x7684;&#x5B9E;&#x4F8B;&#x51C6;&#x5907;&#x5C31;&#x7EEA;&#x4E4B;&#x524D;&#x5BF9;&#x5176;&#x8FDB;&#x884C;&#x8BBE;&#x7F6E;&#xFF0C;&#x90A3;&#x4E48;&#x53EF;&#x4EE5;&#x4F7F;&#x7528;<code class="docutils literal"><span class="pre">@reconstructor</span></code>&#x4FEE;&#x9970;&#x5668;&#x5C06;&#x65B9;&#x6CD5;&#x6807;&#x8BB0;&#x4E3A;<code class="docutils literal"><span class="pre">__init__</span></code></span><span class="yiyi-st" id="yiyi-46">&#x6BCF;&#x6B21;&#x52A0;&#x8F7D;&#x6216;&#x91CD;&#x5EFA;&#x5B9E;&#x4F8B;&#x65F6;&#xFF0C;SQLAlchemy&#x90FD;&#x4F1A;&#x5728;&#x6CA1;&#x6709;&#x53C2;&#x6570;&#x7684;&#x60C5;&#x51B5;&#x4E0B;&#x8C03;&#x7528;&#x6B64;&#x65B9;&#x6CD5;&#x3002;</span><span class="yiyi-st" id="yiyi-47">&#x8FD9;&#x5BF9;&#x4E8E;&#x91CD;&#x65B0;&#x521B;&#x5EFA;&#x901A;&#x5E38;&#x5728;<code class="docutils literal"><span class="pre">__init__</span></code>&#x4E2D;&#x5206;&#x914D;&#x7684;&#x77AC;&#x6001;&#x5C5E;&#x6027;&#x975E;&#x5E38;&#x6709;&#x7528;&#xFF1A;</span></p><div class="highlight-python"><div class="highlight"><pre><span></span><span class="kn">from</span> <span class="nn">sqlalchemy</span> <span class="kn">import</span> <span class="n">orm</span>

<span class="k">class</span> <span class="nc">MyMappedClass</span><span class="p">(</span><span class="nb">object</span><span class="p">):</span>
    <span class="k">def</span> <span class="nf">__init__</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">data</span><span class="p">):</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">data</span> <span class="o">=</span> <span class="n">data</span>
        <span class="c1"># we need stuff on all instances, but not in the database.</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">stuff</span> <span class="o">=</span> <span class="p">[]</span>

    <span class="nd">@orm.reconstructor</span>
    <span class="k">def</span> <span class="nf">init_on_load</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">stuff</span> <span class="o">=</span> <span class="p">[]</span></pre></div></div><p><span class="yiyi-st" id="yiyi-48">&#x5728;&#x6267;&#x884C;<code class="docutils literal"><span class="pre">obj</span> <span class="pre">=</span> <span class="pre">MyMappedClass()</span></code>&#x65F6;&#xFF0C;Python&#x5C06;<code class="docutils literal"><span class="pre">__init__</span></code> normal&#x548C;<code class="docutils literal"><span class="pre">data</span></code>&#x53C2;&#x6570;&#x662F;&#x5FC5;&#x9700;&#x7684;&#x3002;</span><span class="yiyi-st" id="yiyi-49">&#x5F53;&#x50CF;<code class="docutils literal"><span class="pre">query(MyMappedClass).one()</span></code>&#x90A3;&#x6837;&#x5728;<a class="reference internal" href="query.html#sqlalchemy.orm.query.Query" title="sqlalchemy.orm.query.Query"><code class="xref py py-class docutils literal"><span class="pre">Query</span></code></a>&#x64CD;&#x4F5C;&#x671F;&#x95F4;&#x52A0;&#x8F7D;&#x5B9E;&#x4F8B;&#x65F6;&#xFF0C;&#x4F1A;&#x8C03;&#x7528;<code class="docutils literal"><span class="pre">init_on_load</span></code>&#x3002;</span></p><p><span class="yiyi-st" id="yiyi-50">&#x4EFB;&#x4F55;&#x65B9;&#x6CD5;&#x90FD;&#x53EF;&#x4EE5;&#x6807;&#x8BB0;&#x4E3A;<a class="reference internal" href="#sqlalchemy.orm.reconstructor" title="sqlalchemy.orm.reconstructor"><code class="xref py py-func docutils literal"><span class="pre">reconstructor()</span></code></a>&#xFF0C;&#x751A;&#x81F3;&#x53EF;&#x4EE5;&#x6807;&#x8BB0;&#x4E3A;<code class="docutils literal"><span class="pre">__init__</span></code>&#x65B9;&#x6CD5;&#x3002;</span><span class="yiyi-st" id="yiyi-51">SQLAlchemy&#x5C06;&#x8C03;&#x7528;&#x6CA1;&#x6709;&#x53C2;&#x6570;&#x7684;&#x91CD;&#x6784;&#x5668;&#x65B9;&#x6CD5;&#x3002;</span><span class="yiyi-st" id="yiyi-52">&#x8BE5;&#x5B9E;&#x4F8B;&#x7684;&#x6807;&#x91CF;&#xFF08;&#x975E;&#x96C6;&#x5408;&#xFF09;&#x6570;&#x636E;&#x5E93;&#x6620;&#x5C04;&#x5C5E;&#x6027;&#x5C06;&#x53EF;&#x7528;&#x4E8E;&#x8BE5;&#x51FD;&#x6570;&#x4E2D;&#x3002;</span><span class="yiyi-st" id="yiyi-53">&#x6025;&#x5207;&#x52A0;&#x8F7D;&#x7684;&#x96C6;&#x5408;&#x901A;&#x5E38;&#x8FD8;&#x4E0D;&#x53EF;&#x7528;&#xFF0C;&#x901A;&#x5E38;&#x53EA;&#x5305;&#x542B;&#x7B2C;&#x4E00;&#x4E2A;&#x5143;&#x7D20;&#x3002;</span><span class="yiyi-st" id="yiyi-54">&#x5728;&#x6B64;&#x9636;&#x6BB5;&#x5BF9;&#x5BF9;&#x8C61;&#x6240;&#x505A;&#x7684;ORM&#x72B6;&#x6001;&#x66F4;&#x6539;&#x5C06;&#x4E0D;&#x4F1A;&#x8BB0;&#x5F55;&#x4E0B;&#x4E00;&#x6B21;flush()&#x64CD;&#x4F5C;&#xFF0C;&#x56E0;&#x6B64;&#x91CD;&#x6784;&#x5668;&#x4E2D;&#x7684;&#x6D3B;&#x52A8;&#x5E94;&#x4FDD;&#x5B88;&#x3002;</span></p><p><span class="yiyi-st" id="yiyi-55"><a class="reference internal" href="#sqlalchemy.orm.reconstructor" title="sqlalchemy.orm.reconstructor"><code class="xref py py-func docutils literal"><span class="pre">reconstructor()</span></code></a>&#x662F;&#x4E00;&#x4E2A;&#x66F4;&#x5927;&#x7684;&#x201C;&#x5B9E;&#x4F8B;&#x7EA7;&#x201D;&#x4E8B;&#x4EF6;&#x7CFB;&#x7EDF;&#x7684;&#x5FEB;&#x6377;&#x65B9;&#x5F0F;&#xFF0C;&#x53EF;&#x4EE5;&#x4F7F;&#x7528;&#x4E8B;&#x4EF6;API&#x8FDB;&#x884C;&#x8BA2;&#x9605; - &#x8BF7;&#x53C2;&#x9605;<a class="reference internal" href="events.html#sqlalchemy.orm.events.InstanceEvents" title="sqlalchemy.orm.events.InstanceEvents"><code class="xref py py-class docutils literal"><span class="pre">InstanceEvents</span></code></a>&#x4E8B;&#x4EF6;&#x3002;</span></p><dl class="function"><dt id="sqlalchemy.orm.reconstructor"><span class="yiyi-st" id="yiyi-56"><code class="descclassname"> sqlalchemy.orm&#x3002; T0&gt; <code class="descname">&#x91CD;&#x5EFA; T1&gt; <span class="sig-paren">&#xFF08; T2&gt; <em> FN  T3&gt; <span class="sig-paren">&#xFF09; T4&gt; <a class="headerlink" href="#sqlalchemy.orm.reconstructor" title="Permalink to this definition">&#xB6; T5 &gt;</a></span></em></span></code></code></span></dt><dd><p><span class="yiyi-st" id="yiyi-57">&#x88C5;&#x9970;&#x65B9;&#x6CD5;&#x4F5C;&#x4E3A;&apos;&#x91CD;&#x5EFA;&apos;&#x94A9;&#x5B50;&#x3002;</span></p><p><span class="yiyi-st" id="yiyi-58">Designates a method as the &#x201C;reconstructor&#x201D;, an <code class="docutils literal"><span class="pre">__init__</span></code>-like method that will be called by the ORM after the instance has been loaded from the database or otherwise reconstituted.</span></p><p><span class="yiyi-st" id="yiyi-59">&#x91CD;&#x6784;&#x5668;&#x5C06;&#x88AB;&#x8C03;&#x7528;&#xFF0C;&#x4E0D;&#x5E26;&#x4EFB;&#x4F55;&#x53C2;&#x6570;&#x3002;</span><span class="yiyi-st" id="yiyi-60">&#x8BE5;&#x5B9E;&#x4F8B;&#x7684;&#x6807;&#x91CF;&#xFF08;&#x975E;&#x96C6;&#x5408;&#xFF09;&#x6570;&#x636E;&#x5E93;&#x6620;&#x5C04;&#x5C5E;&#x6027;&#x5C06;&#x53EF;&#x7528;&#x4E8E;&#x8BE5;&#x51FD;&#x6570;&#x4E2D;&#x3002;</span><span class="yiyi-st" id="yiyi-61">&#x6025;&#x5207;&#x52A0;&#x8F7D;&#x7684;&#x96C6;&#x5408;&#x901A;&#x5E38;&#x8FD8;&#x4E0D;&#x53EF;&#x7528;&#xFF0C;&#x901A;&#x5E38;&#x53EA;&#x5305;&#x542B;&#x7B2C;&#x4E00;&#x4E2A;&#x5143;&#x7D20;&#x3002;</span><span class="yiyi-st" id="yiyi-62">&#x5728;&#x6B64;&#x9636;&#x6BB5;&#x5BF9;&#x5BF9;&#x8C61;&#x6240;&#x505A;&#x7684;ORM&#x72B6;&#x6001;&#x66F4;&#x6539;&#x5C06;&#x4E0D;&#x4F1A;&#x8BB0;&#x5F55;&#x4E0B;&#x4E00;&#x6B21;flush()&#x64CD;&#x4F5C;&#xFF0C;&#x56E0;&#x6B64;&#x91CD;&#x6784;&#x5668;&#x4E2D;&#x7684;&#x6D3B;&#x52A8;&#x5E94;&#x4FDD;&#x5B88;&#x3002;</span></p></dd></dl>