<h1><span class="yiyi-st" id="yiyi-91">&#x7684;PostgreSQL <a class="headerlink" href="#module-sqlalchemy.dialects.postgresql.base" title="Permalink to this headline">&#xB6; T0&gt;</a></span></h1><div class="section" id="dialect-postgresql"><p><span class="yiyi-st" id="yiyi-92">&#x652F;&#x6301;PostgreSQL&#x6570;&#x636E;&#x5E93;&#x3002;</span></p><h2><span class="yiyi-st" id="yiyi-93">DBAPI&#x652F;&#x6301;<a class="headerlink" href="#dialect-postgresql" title="Permalink to this headline">&#xB6;</a></span></h2><p><span class="yiyi-st" id="yiyi-94">&#x4EE5;&#x4E0B;dialect / DBAPI&#x9009;&#x9879;&#x53EF;&#x7528;&#x3002;</span><span class="yiyi-st" id="yiyi-95">&#x8BF7;&#x53C2;&#x9605;&#x5404;&#x4E2A;DBAPI&#x90E8;&#x5206;&#x7684;&#x8FDE;&#x63A5;&#x4FE1;&#x606F;&#x3002;</span></p><ul class="simple"><li><span class="yiyi-st" id="yiyi-96"><a class="reference external" href="#module-sqlalchemy.dialects.postgresql.psycopg2"> psycopg2  T0&gt;</a></span></li><li><span class="yiyi-st" id="yiyi-97"><a class="reference external" href="#module-sqlalchemy.dialects.postgresql.pg8000"> pg8000  T0&gt;</a></span></li><li><span class="yiyi-st" id="yiyi-98"><a class="reference external" href="#module-sqlalchemy.dialects.postgresql.psycopg2cffi"> psycopg2cffi  T0&gt;</a></span></li><li><span class="yiyi-st" id="yiyi-99"><a class="reference external" href="#module-sqlalchemy.dialects.postgresql.pypostgresql"> PY-&#x7684;PostgreSQL  T0&gt;</a></span></li><li><span class="yiyi-st" id="yiyi-100"><a class="reference external" href="#module-sqlalchemy.dialects.postgresql.pygresql"> pygresql  T0&gt;</a></span></li><li><span class="yiyi-st" id="yiyi-101">Jython&#x7684;<a class="reference external" href="#module-sqlalchemy.dialects.postgresql.zxjdbc">zxJDBC</a></span></li></ul></div><div class="section" id="sequences-serial"><h2><span class="yiyi-st" id="yiyi-102">&#x5E8F;&#x5217;/ SERIAL <a class="headerlink" href="#sequences-serial" title="Permalink to this headline">&#xB6; T0&gt;</a></span></h2><p><span class="yiyi-st" id="yiyi-103">PostgreSQL&#x652F;&#x6301;&#x5E8F;&#x5217;&#xFF0C;SQLAlchemy&#x4F7F;&#x7528;&#x8FD9;&#x4E9B;&#x4F5C;&#x4E3A;&#x4E3A;&#x57FA;&#x4E8E;&#x6574;&#x6570;&#x7684;&#x4E3B;&#x952E;&#x5217;&#x521B;&#x5EFA;&#x65B0;&#x7684;&#x4E3B;&#x952E;&#x503C;&#x7684;&#x9ED8;&#x8BA4;&#x65B9;&#x5F0F;&#x3002;</span><span class="yiyi-st" id="yiyi-104">&#x5728;&#x521B;&#x5EFA;&#x8868;&#x65F6;&#xFF0C;SQLAlchemy&#x5C06;&#x4E3A;&#x57FA;&#x4E8E;&#x6574;&#x6570;&#x7684;&#x4E3B;&#x952E;&#x5217;&#x53D1;&#x5E03;<code class="docutils literal"><span class="pre">SERIAL</span></code>&#x6570;&#x636E;&#x7C7B;&#x578B;&#xFF0C;&#x4ECE;&#x800C;&#x751F;&#x6210;&#x5BF9;&#x5E94;&#x4E8E;&#x8BE5;&#x5217;&#x7684;&#x5E8F;&#x5217;&#x548C;&#x670D;&#x52A1;&#x5668;&#x7AEF;&#x9ED8;&#x8BA4;&#x503C;&#x3002;</span></p><p><span class="yiyi-st" id="yiyi-105">&#x8981;&#x6307;&#x5B9A;&#x8981;&#x7528;&#x4E8E;&#x4E3B;&#x952E;&#x751F;&#x6210;&#x7684;&#x7279;&#x5B9A;&#x547D;&#x540D;&#x5E8F;&#x5217;&#xFF0C;&#x8BF7;&#x4F7F;&#x7528;<a class="reference internal" href="core_defaults.html#sqlalchemy.schema.Sequence" title="sqlalchemy.schema.Sequence"><code class="xref py py-func docutils literal"><span class="pre">Sequence()</span></code></a>&#x7ED3;&#x6784;&#xFF1A;</span></p><div class="highlight-python"><div class="highlight"><pre><span></span><span class="n">Table</span><span class="p">(</span><span class="s1">&apos;sometable&apos;</span><span class="p">,</span> <span class="n">metadata</span><span class="p">,</span>
        <span class="n">Column</span><span class="p">(</span><span class="s1">&apos;id&apos;</span><span class="p">,</span> <span class="n">Integer</span><span class="p">,</span> <span class="n">Sequence</span><span class="p">(</span><span class="s1">&apos;some_id_seq&apos;</span><span class="p">),</span> <span class="n">primary_key</span><span class="o">=</span><span class="bp">True</span><span class="p">)</span>
    <span class="p">)</span></pre></div></div><p><span class="yiyi-st" id="yiyi-106">&#x5F53;SQLAlchemy&#x53D1;&#x51FA;&#x5355;&#x4E2A;INSERT&#x8BED;&#x53E5;&#x65F6;&#xFF0C;&#x4E3A;&#x4E86;&#x5C65;&#x884C;&#x4F7F;&#x201C;&#x6700;&#x540E;&#x4E00;&#x4E2A;&#x63D2;&#x5165;&#x6807;&#x8BC6;&#x7B26;&#x201D;&#x53EF;&#x7528;&#x7684;&#x5408;&#x540C;&#xFF0C;&#x5C06;&#x4E00;&#x4E2A;RETURNING&#x5B50;&#x53E5;&#x6DFB;&#x52A0;&#x5230;INSERT&#x8BED;&#x53E5;&#x4E2D;&#xFF0C;&#x8BE5;&#x8BED;&#x53E5;&#x6307;&#x5B9A;&#x5728;&#x8BED;&#x53E5;&#x5B8C;&#x6210;&#x540E;&#x5E94;&#x8BE5;&#x8FD4;&#x56DE;&#x4E3B;&#x952E;&#x5217;&#x3002;</span><span class="yiyi-st" id="yiyi-107">&#x53EA;&#x6709;&#x5728;&#x4F7F;&#x7528;Postgresql 8.2&#x6216;&#x66F4;&#x9AD8;&#x7248;&#x672C;&#x65F6;&#x624D;&#x4F1A;&#x6267;&#x884C;RETURNING&#x529F;&#x80FD;&#x3002;</span><span class="yiyi-st" id="yiyi-108">&#x4F5C;&#x4E3A;&#x540E;&#x5907;&#x65B9;&#x6CD5;&#xFF0C;&#x65E0;&#x8BBA;&#x662F;&#x901A;&#x8FC7;<code class="docutils literal"><span class="pre">SERIAL</span></code>&#x660E;&#x786E;&#x6307;&#x5B9A;&#x8FD8;&#x662F;&#x9690;&#x5F0F;&#x6307;&#x5B9A;&#xFF0C;&#x5E8F;&#x5217;&#x90FD;&#x662F;&#x4E8B;&#x5148;&#x72EC;&#x7ACB;&#x6267;&#x884C;&#x7684;&#xFF0C;&#x8FD4;&#x56DE;&#x7684;&#x503C;&#x5C06;&#x5728;&#x540E;&#x7EED;&#x63D2;&#x5165;&#x4E2D;&#x4F7F;&#x7528;&#x3002;</span><span class="yiyi-st" id="yiyi-109">&#x8BF7;&#x6CE8;&#x610F;&#xFF0C;&#x5F53;&#x4F7F;&#x7528;&#x201C;executemany&#x201D;&#x8BED;&#x4E49;&#x6267;&#x884C;<a class="reference internal" href="core_dml.html#sqlalchemy.sql.expression.insert" title="sqlalchemy.sql.expression.insert"><code class="xref py py-func docutils literal"><span class="pre">insert()</span></code></a>&#x7ED3;&#x6784;&#x65F6;&#xFF0C;&#x201C;&#x6700;&#x540E;&#x63D2;&#x5165;&#x7684;&#x6807;&#x8BC6;&#x7B26;&#x201D;&#x529F;&#x80FD;&#x4E0D;&#x9002;&#x7528;&#xFF1B;&#x5728;&#x8FD9;&#x79CD;&#x60C5;&#x51B5;&#x4E0B;&#xFF0C;&#x4E0D;&#x4F1A;&#x53D1;&#x5C04;RETURNING&#x5B50;&#x53E5;&#xFF0C;&#x4E5F;&#x4E0D;&#x4F1A;&#x9884;&#x5148;&#x6267;&#x884C;&#x5E8F;&#x5217;&#x3002;</span></p><p><span class="yiyi-st" id="yiyi-110">&#x8981;&#x5728;&#x9ED8;&#x8BA4;&#x60C5;&#x51B5;&#x4E0B;&#x5F3A;&#x5236;&#x4F7F;&#x7528;RETURNING&#xFF0C;&#x8BF7;&#x5C06;&#x6807;&#x5FD7;<code class="docutils literal"><span class="pre">implicit_returning=False</span></code>&#x6307;&#x5B9A;&#x4E3A;<a class="reference internal" href="core_engines.html#sqlalchemy.create_engine" title="sqlalchemy.create_engine"><code class="xref py py-func docutils literal"><span class="pre">create_engine()</span></code></a>&#x3002;</span></p></div><div class="section" id="transaction-isolation-level"><h2><span class="yiyi-st" id="yiyi-111">&#x4E8B;&#x52A1;&#x9694;&#x79BB;&#x7EA7;&#x522B;<a class="headerlink" href="#transaction-isolation-level" title="Permalink to this headline">&#xB6;</a></span></h2><p><span class="yiyi-st" id="yiyi-112">All Postgresql dialects support setting of transaction isolation level both via a dialect-specific parameter <a class="reference internal" href="core_engines.html#sqlalchemy.create_engine.params.isolation_level" title="sqlalchemy.create_engine"><code class="xref py py-paramref docutils literal"><span class="pre">create_engine.isolation_level</span></code></a> accepted by <a class="reference internal" href="core_engines.html#sqlalchemy.create_engine" title="sqlalchemy.create_engine"><code class="xref py py-func docutils literal"><span class="pre">create_engine()</span></code></a>, as well as the <a class="reference internal" href="core_connections.html#sqlalchemy.engine.Connection.execution_options.params.isolation_level" title="sqlalchemy.engine.Connection.execution_options"><code class="xref py py-paramref docutils literal"><span class="pre">Connection.execution_options.isolation_level</span></code></a> argument as passed to <a class="reference internal" href="core_connections.html#sqlalchemy.engine.Connection.execution_options" title="sqlalchemy.engine.Connection.execution_options"><code class="xref py py-meth docutils literal"><span class="pre">Connection.execution_options()</span></code></a>. </span><span class="yiyi-st" id="yiyi-113">When using a non-psycopg2 dialect, this feature works by issuing the command <code class="docutils literal"><span class="pre">SET</span> <span class="pre">SESSION</span> <span class="pre">CHARACTERISTICS</span> <span class="pre">AS</span> <span class="pre">TRANSACTION</span> <span class="pre">ISOLATION</span> <span class="pre">LEVEL</span> <span class="pre">&lt;level&gt;</span></code> for each new connection. </span><span class="yiyi-st" id="yiyi-114">&#x5BF9;&#x4E8E;&#x7279;&#x6B8A;&#x7684;AUTOCOMMIT&#x9694;&#x79BB;&#x7EA7;&#x522B;&#xFF0C;&#x4F7F;&#x7528;&#x4E86;&#x7279;&#x5B9A;&#x4E8E;DBAPI&#x7684;&#x6280;&#x672F;&#x3002;</span></p><p><span class="yiyi-st" id="yiyi-115">&#x4F7F;&#x7528;<a class="reference internal" href="core_engines.html#sqlalchemy.create_engine" title="sqlalchemy.create_engine"><code class="xref py py-func docutils literal"><span class="pre">create_engine()</span></code></a>&#x8BBE;&#x7F6E;&#x9694;&#x79BB;&#x7EA7;&#x522B;&#xFF1A;</span></p><div class="highlight-python"><div class="highlight"><pre><span></span><span class="n">engine</span> <span class="o">=</span> <span class="n">create_engine</span><span class="p">(</span>
    <span class="s2">&quot;postgresql+pg8000://scott:tiger@localhost/test&quot;</span><span class="p">,</span>
    <span class="n">isolation_level</span><span class="o">=</span><span class="s2">&quot;READ UNCOMMITTED&quot;</span>
<span class="p">)</span></pre></div></div><p><span class="yiyi-st" id="yiyi-116">&#x8981;&#x8BBE;&#x7F6E;&#x4F7F;&#x7528;&#x6BCF;&#x4E2A;&#x8FDE;&#x63A5;&#x6267;&#x884C;&#x9009;&#x9879;&#xFF1A;</span></p><div class="highlight-python"><div class="highlight"><pre><span></span><span class="n">connection</span> <span class="o">=</span> <span class="n">engine</span><span class="o">.</span><span class="n">connect</span><span class="p">()</span>
<span class="n">connection</span> <span class="o">=</span> <span class="n">connection</span><span class="o">.</span><span class="n">execution_options</span><span class="p">(</span>
    <span class="n">isolation_level</span><span class="o">=</span><span class="s2">&quot;READ COMMITTED&quot;</span>
<span class="p">)</span></pre></div></div><p><span class="yiyi-st" id="yiyi-117"><code class="docutils literal"><span class="pre">isolation_level</span></code>&#x7684;&#x6709;&#x6548;&#x503C;&#x5305;&#x62EC;&#xFF1A;</span></p><ul class="simple"><li><span class="yiyi-st" id="yiyi-118"><code class="docutils literal"><span class="pre">READ</span> <span class="pre">COMMITTED</span></code></span></li><li><span class="yiyi-st" id="yiyi-119"><code class="docutils literal"><span class="pre">READ</span> <span class="pre">UNCOMMITTED</span></code></span></li><li><span class="yiyi-st" id="yiyi-120"><code class="docutils literal"><span class="pre">REPEATABLE</span> <span class="pre">READ</span></code></span></li><li><span class="yiyi-st" id="yiyi-121"><code class="docutils literal"><span class="pre">SERIALIZABLE</span></code></span></li><li><span class="yiyi-st" id="yiyi-122"><code class="docutils literal"><span class="pre">AUTOCOMMIT</span></code> - on psycopg2 / pg8000 only</span></li></ul><div class="admonition seealso"><p class="first admonition-title"><span class="yiyi-st" id="yiyi-123">&#x4E5F;&#x53EF;&#x4EE5;&#x770B;&#x770B;</span></p><p><span class="yiyi-st" id="yiyi-124"><a class="reference internal" href="#psycopg2-isolation-level"><span>Psycopg2 Transaction Isolation Level</span></a></span></p><p class="last"><span class="yiyi-st" id="yiyi-125"><a class="reference internal" href="#pg8000-isolation-level"><span>pg8000 Transaction Isolation Level</span></a></span></p></div></div><div class="section" id="remote-schema-table-introspection-and-postgresql-search-path"><h2><span class="yiyi-st" id="yiyi-126">Remote-Schema Table Introspection&#x548C;Postgresql search_path <a class="headerlink" href="#remote-schema-table-introspection-and-postgresql-search-path" title="Permalink to this headline">&#xB6;</a></span></h2><p><span class="yiyi-st" id="yiyi-127">Postgresql&#x65B9;&#x8A00;&#x53EF;&#x4EE5;&#x53CD;&#x6620;&#x6765;&#x81EA;&#x4EFB;&#x4F55;&#x6A21;&#x5F0F;&#x7684;&#x8868;&#x683C;&#x3002;</span><span class="yiyi-st" id="yiyi-128"><a class="reference internal" href="core_metadata.html#sqlalchemy.schema.Table.params.schema" title="sqlalchemy.schema.Table"><code class="xref py py-paramref docutils literal"><span class="pre">Table.schema</span></code></a>&#x53C2;&#x6570;&#x6216;&#x8005;<a class="reference internal" href="core_metadata.html#sqlalchemy.schema.MetaData.reflect.params.schema" title="sqlalchemy.schema.MetaData.reflect"><code class="xref py py-paramref docutils literal"><span class="pre">MetaData.reflect.schema</span></code></a>&#x53C2;&#x6570;&#x53EF;&#x786E;&#x5B9A;&#x5C06;&#x4E3A;&#x8BE5;&#x8868;&#x641C;&#x7D22;&#x54EA;&#x4E2A;&#x6A21;&#x5F0F;&#x3002;</span><span class="yiyi-st" id="yiyi-129">&#x53CD;&#x6620;&#x7684;<a class="reference internal" href="core_metadata.html#sqlalchemy.schema.Table" title="sqlalchemy.schema.Table"><code class="xref py py-class docutils literal"><span class="pre">Table</span></code></a>&#x5BF9;&#x8C61;&#x5C06;&#x5728;&#x6240;&#x6709;&#x60C5;&#x51B5;&#x4E0B;&#x4FDD;&#x7559;&#x6B64;<code class="docutils literal"><span class="pre">.schema</span></code>&#x5C5E;&#x6027;&#x3002;</span><span class="yiyi-st" id="yiyi-130">&#x4F46;&#x662F;&#xFF0C;&#x5BF9;&#x4E8E;&#x8FD9;&#x4E9B;<a class="reference internal" href="core_metadata.html#sqlalchemy.schema.Table" title="sqlalchemy.schema.Table"><code class="xref py py-class docutils literal"><span class="pre">Table</span></code></a>&#x5BF9;&#x8C61;&#x901A;&#x8FC7;&#x5916;&#x952E;&#x7EA6;&#x675F;&#x5F15;&#x7528;&#x7684;&#x8868;&#xFF0C;&#x5FC5;&#x987B;&#x786E;&#x5B9A;<code class="docutils literal"><span class="pre">.schema</span></code>&#x5728;&#x8FD9;&#x4E9B;&#x8FDC;&#x7A0B;&#x8868;&#x4E2D;&#x7684;&#x8868;&#x793A;&#x65B9;&#x5F0F;&#xFF0C;&#x8BE5;&#x8FDC;&#x7A0B;&#x6A21;&#x5F0F;&#x540D;&#x79F0;&#x4E5F;&#x662F;&#x5F53;&#x524D;<a class="reference external" href="http://www.postgresql.org/docs/current/static/ddl-schemas.html#DDL-SCHEMAS-PATH">Postgresql&#x641C;&#x7D22;&#x8DEF;&#x5F84;</a>&#x7684;&#x6210;&#x5458;&#x3002;</span></p><p><span class="yiyi-st" id="yiyi-131">&#x9ED8;&#x8BA4;&#x60C5;&#x51B5;&#x4E0B;&#xFF0C;Postgresql&#x65B9;&#x8A00;&#x6A21;&#x4EFF;Postgresql&#x81EA;&#x5DF1;&#x7684;<code class="docutils literal"><span class="pre">pg_get_constraintdef()</span></code>&#x5185;&#x7F6E;&#x8FC7;&#x7A0B;&#x9F13;&#x52B1;&#x7684;&#x884C;&#x4E3A;&#x3002;</span><span class="yiyi-st" id="yiyi-132">&#x6B64;&#x51FD;&#x6570;&#x8FD4;&#x56DE;&#x7279;&#x5B9A;&#x5916;&#x952E;&#x7EA6;&#x675F;&#x7684;&#x6837;&#x672C;&#x5B9A;&#x4E49;&#xFF0C;&#x5F53;&#x8BE5;&#x540D;&#x79F0;&#x4E5F;&#x4F4D;&#x4E8E;Postgresql&#x6A21;&#x5F0F;&#x641C;&#x7D22;&#x8DEF;&#x5F84;&#x4E2D;&#x65F6;&#xFF0C;&#x7701;&#x7565;&#x8BE5;&#x5B9A;&#x4E49;&#x4E2D;&#x5F15;&#x7528;&#x7684;&#x6A21;&#x5F0F;&#x540D;&#x79F0;&#x3002;</span><span class="yiyi-st" id="yiyi-133">&#x4E0B;&#x9762;&#x7684;&#x4EA4;&#x4E92;&#x8BF4;&#x660E;&#x4E86;&#x8FD9;&#x79CD;&#x884C;&#x4E3A;&#xFF1A;</span></p><div class="highlight-python"><div class="highlight"><pre><span></span>test=&gt; CREATE TABLE test_schema.referred(id INTEGER PRIMARY KEY);
CREATE TABLE
test=&gt; CREATE TABLE referring(
test(&gt;         id INTEGER PRIMARY KEY,
test(&gt;         referred_id INTEGER REFERENCES test_schema.referred(id));
CREATE TABLE
test=&gt; SET search_path TO public, test_schema;
test=&gt; SELECT pg_catalog.pg_get_constraintdef(r.oid, true) FROM
test-&gt; pg_catalog.pg_class c JOIN pg_catalog.pg_namespace n
test-&gt; ON n.oid = c.relnamespace
test-&gt; JOIN pg_catalog.pg_constraint r  ON c.oid = r.conrelid
test-&gt; WHERE c.relname=&apos;referring&apos; AND r.contype = &apos;f&apos;
test-&gt; ;
               pg_get_constraintdef
---------------------------------------------------
 FOREIGN KEY (referred_id) REFERENCES referred(id)
(1 row)</pre></div></div><p><span class="yiyi-st" id="yiyi-134">Above, we created a table <code class="docutils literal"><span class="pre">referred</span></code> as a member of the remote schema <code class="docutils literal"><span class="pre">test_schema</span></code>, however when we added <code class="docutils literal"><span class="pre">test_schema</span></code> to the PG <code class="docutils literal"><span class="pre">search_path</span></code> and then asked <code class="docutils literal"><span class="pre">pg_get_constraintdef()</span></code> for the <code class="docutils literal"><span class="pre">FOREIGN</span> <span class="pre">KEY</span></code> syntax, <code class="docutils literal"><span class="pre">test_schema</span></code> was not included in the output of the function.</span></p><p><span class="yiyi-st" id="yiyi-135">&#x53E6;&#x4E00;&#x65B9;&#x9762;&#xFF0C;&#x5982;&#x679C;&#x6211;&#x4EEC;&#x5C06;&#x641C;&#x7D22;&#x8DEF;&#x5F84;&#x8BBE;&#x7F6E;&#x4E3A;<code class="docutils literal"><span class="pre">public</span></code>&#x7684;&#x5178;&#x578B;&#x9ED8;&#x8BA4;&#x503C;&#xFF1A;</span></p><div class="highlight-python"><div class="highlight"><pre><span></span>test=&gt; SET search_path TO public;
SET</pre></div></div><p><span class="yiyi-st" id="yiyi-136">&#x9488;&#x5BF9;<code class="docutils literal"><span class="pre">pg_get_constraintdef()</span></code>&#x7684;&#x76F8;&#x540C;&#x67E5;&#x8BE2;&#x73B0;&#x5728;&#x4F1A;&#x4E3A;&#x6211;&#x4EEC;&#x8FD4;&#x56DE;&#x5B8C;&#x5168;&#x6A21;&#x5F0F;&#x9650;&#x5B9A;&#x7684;&#x540D;&#x79F0;&#xFF1A;</span></p><div class="highlight-python"><div class="highlight"><pre><span></span>test=&gt; SELECT pg_catalog.pg_get_constraintdef(r.oid, true) FROM
test-&gt; pg_catalog.pg_class c JOIN pg_catalog.pg_namespace n
test-&gt; ON n.oid = c.relnamespace
test-&gt; JOIN pg_catalog.pg_constraint r  ON c.oid = r.conrelid
test-&gt; WHERE c.relname=&apos;referring&apos; AND r.contype = &apos;f&apos;;
                     pg_get_constraintdef
---------------------------------------------------------------
 FOREIGN KEY (referred_id) REFERENCES test_schema.referred(id)
(1 row)</pre></div></div><p><span class="yiyi-st" id="yiyi-137">SQLAlchemy&#x5C06;&#x9ED8;&#x8BA4;&#x4F7F;&#x7528;<code class="docutils literal"><span class="pre">pg_get_constraintdef()</span></code>&#x7684;&#x8FD4;&#x56DE;&#x503C;&#x6765;&#x786E;&#x5B9A;&#x8FDC;&#x7A0B;&#x6A21;&#x5F0F;&#x540D;&#x79F0;&#x3002;</span><span class="yiyi-st" id="yiyi-138">&#x4E5F;&#x5C31;&#x662F;&#x8BF4;&#xFF0C;&#x5982;&#x679C;&#x6211;&#x4EEC;&#x7684;<code class="docutils literal"><span class="pre">search_path</span></code>&#x88AB;&#x8BBE;&#x7F6E;&#x4E3A;&#x5305;&#x542B;<code class="docutils literal"><span class="pre">test_schema</span></code>&#xFF0C;&#x5E76;&#x4E14;&#x6211;&#x4EEC;&#x8C03;&#x7528;&#x4E86;&#x4E00;&#x4E2A;&#x8868;&#x53CD;&#x5C04;&#x8FC7;&#x7A0B;&#xFF0C;&#x5982;&#x4E0B;&#x6240;&#x793A;&#xFF1A;</span></p><div class="highlight-python"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="kn">from</span> <span class="nn">sqlalchemy</span> <span class="kn">import</span> <span class="n">Table</span><span class="p">,</span> <span class="n">MetaData</span><span class="p">,</span> <span class="n">create_engine</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">engine</span> <span class="o">=</span> <span class="n">create_engine</span><span class="p">(</span><span class="s2">&quot;postgresql://scott:tiger@localhost/test&quot;</span><span class="p">)</span>
<span class="gp">&gt;&gt;&gt; </span><span class="k">with</span> <span class="n">engine</span><span class="o">.</span><span class="n">connect</span><span class="p">()</span> <span class="k">as</span> <span class="n">conn</span><span class="p">:</span>
<span class="gp">... </span>    <span class="n">conn</span><span class="o">.</span><span class="n">execute</span><span class="p">(</span><span class="s2">&quot;SET search_path TO test_schema, public&quot;</span><span class="p">)</span>
<span class="gp">... </span>    <span class="n">meta</span> <span class="o">=</span> <span class="n">MetaData</span><span class="p">()</span>
<span class="gp">... </span>    <span class="n">referring</span> <span class="o">=</span> <span class="n">Table</span><span class="p">(</span><span class="s1">&apos;referring&apos;</span><span class="p">,</span> <span class="n">meta</span><span class="p">,</span>
<span class="gp">... </span>                      <span class="n">autoload</span><span class="o">=</span><span class="bp">True</span><span class="p">,</span> <span class="n">autoload_with</span><span class="o">=</span><span class="n">conn</span><span class="p">)</span>
<span class="gp">...</span>
<span class="go">&lt;sqlalchemy.engine.result.ResultProxy object at 0x101612ed0&gt;</span></pre></div></div><p><span class="yiyi-st" id="yiyi-139">The above process would deliver to the <a class="reference internal" href="core_metadata.html#sqlalchemy.schema.MetaData.tables" title="sqlalchemy.schema.MetaData.tables"><code class="xref py py-attr docutils literal"><span class="pre">MetaData.tables</span></code></a> collection <code class="docutils literal"><span class="pre">referred</span></code> table named <strong>without</strong> the schema:</span></p><div class="highlight-python"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="n">meta</span><span class="o">.</span><span class="n">tables</span><span class="p">[</span><span class="s1">&apos;referred&apos;</span><span class="p">]</span><span class="o">.</span><span class="n">schema</span> <span class="ow">is</span> <span class="bp">None</span>
<span class="go">True</span></pre></div></div><p><span class="yiyi-st" id="yiyi-140">&#x8981;&#x6539;&#x53D8;&#x53CD;&#x5C04;&#x7684;&#x884C;&#x4E3A;&#xFF0C;&#x4F7F;&#x5F97;&#x4E0D;&#x7BA1;<code class="docutils literal"><span class="pre">search_path</span></code>&#x8BBE;&#x7F6E;&#x5982;&#x4F55;&#x90FD;&#x7EF4;&#x62A4;&#x6240;&#x5F15;&#x7528;&#x7684;&#x6A21;&#x5F0F;&#xFF0C;&#x8BF7;&#x4F7F;&#x7528;<code class="docutils literal"><span class="pre">postgresql_ignore_search_path</span></code>&#x9009;&#x9879;&#xFF0C;&#x8BE5;&#x9009;&#x9879;&#x53EF;&#x4EE5;&#x6307;&#x5B9A;&#x4E3A;&#x4E24;&#x79CD;&#x8BED;&#x8A00;&#x7684;&#x7279;&#x5B9A;&#x4E8E;&#x65B9;&#x8A00;&#x7684;&#x53C2;&#x6570;<a class="reference internal" href="core_metadata.html#sqlalchemy.schema.Table" title="sqlalchemy.schema.Table"><code class="xref py py-class docutils literal"><span class="pre">Table</span></code></a>&#x4EE5;&#x53CA;<a class="reference internal" href="core_metadata.html#sqlalchemy.schema.MetaData.reflect" title="sqlalchemy.schema.MetaData.reflect"><code class="xref py py-meth docutils literal"><span class="pre">MetaData.reflect()</span></code></a>&#xFF1A;</span></p><div class="highlight-python"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="k">with</span> <span class="n">engine</span><span class="o">.</span><span class="n">connect</span><span class="p">()</span> <span class="k">as</span> <span class="n">conn</span><span class="p">:</span>
<span class="gp">... </span>    <span class="n">conn</span><span class="o">.</span><span class="n">execute</span><span class="p">(</span><span class="s2">&quot;SET search_path TO test_schema, public&quot;</span><span class="p">)</span>
<span class="gp">... </span>    <span class="n">meta</span> <span class="o">=</span> <span class="n">MetaData</span><span class="p">()</span>
<span class="gp">... </span>    <span class="n">referring</span> <span class="o">=</span> <span class="n">Table</span><span class="p">(</span><span class="s1">&apos;referring&apos;</span><span class="p">,</span> <span class="n">meta</span><span class="p">,</span> <span class="n">autoload</span><span class="o">=</span><span class="bp">True</span><span class="p">,</span>
<span class="gp">... </span>                      <span class="n">autoload_with</span><span class="o">=</span><span class="n">conn</span><span class="p">,</span>
<span class="gp">... </span>                      <span class="n">postgresql_ignore_search_path</span><span class="o">=</span><span class="bp">True</span><span class="p">)</span>
<span class="gp">...</span>
<span class="go">&lt;sqlalchemy.engine.result.ResultProxy object at 0x1016126d0&gt;</span></pre></div></div><p><span class="yiyi-st" id="yiyi-141">&#x6211;&#x4EEC;&#x73B0;&#x5728;&#x5C06;<code class="docutils literal"><span class="pre">test_schema.referred</span></code>&#x5B58;&#x50A8;&#x4E3A;&#x6A21;&#x5F0F;&#x9650;&#x5B9A;&#x7684;&#xFF1A;</span></p><div class="highlight-python"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="n">meta</span><span class="o">.</span><span class="n">tables</span><span class="p">[</span><span class="s1">&apos;test_schema.referred&apos;</span><span class="p">]</span><span class="o">.</span><span class="n">schema</span>
<span class="go">&apos;test_schema&apos;</span></pre></div></div><div class="sidebar"><p class="first sidebar-title"><span class="yiyi-st" id="yiyi-142">Postgresql Schema&#x53CD;&#x5C04;&#x7684;&#x6700;&#x4F73;&#x5B9E;&#x8DF5;</span></p><p class="last"><span class="yiyi-st" id="yiyi-143">Postgresql&#x6A21;&#x5F0F;&#x53CD;&#x5C04;&#x884C;&#x4E3A;&#x7684;&#x63CF;&#x8FF0;&#x5F88;&#x590D;&#x6742;&#xFF0C;&#x5E76;&#x4E14;&#x662F;&#x591A;&#x5E74;&#x5904;&#x7406;&#x5404;&#x79CD;&#x7528;&#x4F8B;&#x548C;&#x7528;&#x6237;&#x504F;&#x597D;&#x7684;&#x4EA7;&#x7269;&#x3002;</span><span class="yiyi-st" id="yiyi-144">&#x4F46;&#x4E8B;&#x5B9E;&#x4E0A;&#xFF0C;&#x5982;&#x679C;&#x4F60;&#x53EA;&#x662F;&#x575A;&#x6301;&#x6700;&#x7B80;&#x5355;&#x7684;&#x4F7F;&#x7528;&#x6A21;&#x5F0F;&#xFF0C;&#x5C31;&#x6CA1;&#x6709;&#x5FC5;&#x8981;&#x4E86;&#x89E3;&#x5B83;&#xFF1A;&#x53EA;&#x5C06;<code class="docutils literal"><span class="pre">search_path</span></code>&#x8BBE;&#x7F6E;&#x4E3A;&#x9ED8;&#x8BA4;&#x7684;<code class="docutils literal"><span class="pre">public</span></code>&#xFF0C;&#x7EDD;&#x4E0D;&#x4F1A;&#x5F15;&#x7528;&#x540D;&#x79F0;<code class="docutils literal"><span class="pre">public</span></code>&#x4F5C;&#x4E3A;&#x663E;&#x5F0F;&#x6A21;&#x5F0F;&#x540D;&#x79F0;&#xFF0C;&#x5426;&#x5219;&#x5728;&#x6784;&#x5EFA;<a class="reference internal" href="core_metadata.html#sqlalchemy.schema.Table" title="sqlalchemy.schema.Table"><code class="xref py py-class docutils literal"><span class="pre">Table</span></code></a>&#x5BF9;&#x8C61;&#x65F6;&#x663E;&#x5F0F;&#x5F15;&#x7528;&#x6240;&#x6709;&#x5176;&#x4ED6;&#x6A21;&#x5F0F;&#x540D;&#x79F0;&#x3002;</span><span class="yiyi-st" id="yiyi-145">&#x8FD9;&#x91CC;&#x63CF;&#x8FF0;&#x7684;&#x9009;&#x9879;&#x4EC5;&#x9002;&#x7528;&#x4E8E;&#x90A3;&#x4E9B;&#x4E0D;&#x80FD;&#x6216;&#x4E0D;&#x613F;&#x610F;&#x9075;&#x5B88;&#x8FD9;&#x4E9B;&#x51C6;&#x5219;&#x7684;&#x7528;&#x6237;&#x3002;</span></p></div><p><span class="yiyi-st" id="yiyi-146">&#x8BF7;&#x6CE8;&#x610F;&#xFF0C;&#x5728;&#x6240;&#x6709;&#x60C5;&#x51B5;&#x4E0B;<strong>&#xFF0C;&#x201C;&#x9ED8;&#x8BA4;&#x201D;&#x6A21;&#x5F0F;&#x603B;&#x662F;&#x53CD;&#x6620;&#x4E3A;<code class="docutils literal"><span class="pre">None</span></code>&#x3002;</strong></span><span class="yiyi-st" id="yiyi-147">Postgresql&#x4E0A;&#x7684;&#x201C;&#x9ED8;&#x8BA4;&#x201D;&#x6A21;&#x5F0F;&#x662F;&#x7531;Postgresql <code class="docutils literal"><span class="pre">current_schema()</span></code>&#x51FD;&#x6570;&#x8FD4;&#x56DE;&#x7684;&#x6A21;&#x5F0F;&#x3002;</span><span class="yiyi-st" id="yiyi-148">&#x5728;&#x5178;&#x578B;&#x7684;Postgresql&#x5B89;&#x88C5;&#x4E2D;&#xFF0C;&#x8FD9;&#x662F;<code class="docutils literal"><span class="pre">public</span></code>&#x7684;&#x540D;&#x79F0;&#x3002;</span><span class="yiyi-st" id="yiyi-149">&#x56E0;&#x6B64;&#xFF0C;&#x5F15;&#x7528;<code class="docutils literal"><span class="pre">public</span></code>&#xFF08;&#x5373;&#x9ED8;&#x8BA4;&#xFF09;&#x6A21;&#x5F0F;&#x4E2D;&#x7684;&#x53E6;&#x4E00;&#x4E2A;&#x8868;&#x7684;&#x8868;&#x5C06;&#x59CB;&#x7EC8;&#x5C06;<code class="docutils literal"><span class="pre">.schema</span></code>&#x5C5E;&#x6027;&#x8BBE;&#x7F6E;&#x4E3A;<code class="docutils literal"><span class="pre">None</span></code>&#x3002;</span></p><div class="versionadded"><p><span class="yiyi-st" id="yiyi-150"><span class="versionmodified">New in version 0.9.2: </span>Added the <code class="docutils literal"><span class="pre">postgresql_ignore_search_path</span></code> dialect-level option accepted by <a class="reference internal" href="core_metadata.html#sqlalchemy.schema.Table" title="sqlalchemy.schema.Table"><code class="xref py py-class docutils literal"><span class="pre">Table</span></code></a> and <a class="reference internal" href="core_metadata.html#sqlalchemy.schema.MetaData.reflect" title="sqlalchemy.schema.MetaData.reflect"><code class="xref py py-meth docutils literal"><span class="pre">MetaData.reflect()</span></code></a>.</span></p></div><div class="admonition seealso"><p class="first admonition-title"><span class="yiyi-st" id="yiyi-151">&#x4E5F;&#x53EF;&#x4EE5;&#x770B;&#x770B;</span></p><p class="last"><span class="yiyi-st" id="yiyi-152"><a class="reference external" href="http://www.postgresql.org/docs/9.0/static/ddl-schemas.html#DDL-SCHEMAS-PATH">&#x67B6;&#x6784;&#x641C;&#x7D22;&#x8DEF;&#x5F84;</a>  - &#x5728;Postgresql&#x7F51;&#x7AD9;&#x4E0A;&#x3002;</span></p></div></div><div class="section" id="insert-update-returning"><h2><span class="yiyi-st" id="yiyi-153">INSERT / UPDATE ... RETURNING <a class="headerlink" href="#insert-update-returning" title="Permalink to this headline">&#xB6; T0&gt;</a></span></h2><p><span class="yiyi-st" id="yiyi-154">The dialect supports PG 8.2&#x2019;s <code class="docutils literal"><span class="pre">INSERT..RETURNING</span></code>, <code class="docutils literal"><span class="pre">UPDATE..RETURNING</span></code> and <code class="docutils literal"><span class="pre">DELETE..RETURNING</span></code> syntaxes. </span><span class="yiyi-st" id="yiyi-155"><code class="docutils literal"><span class="pre">INSERT..RETURNING</span></code> is used by default for single-row INSERT statements in order to fetch newly generated primary key identifiers. </span><span class="yiyi-st" id="yiyi-156">&#x8981;&#x6307;&#x5B9A;&#x660E;&#x786E;&#x7684;<code class="docutils literal"><span class="pre">RETURNING</span></code>&#x5B50;&#x53E5;&#xFF0C;&#x8BF7;&#x5728;&#x6BCF;&#x4E2A;&#x8BED;&#x53E5;&#x7684;&#x57FA;&#x7840;&#x4E0A;&#x4F7F;&#x7528;<code class="xref py py-meth docutils literal"><span class="pre">_UpdateBase.returning()</span></code>&#x65B9;&#x6CD5;&#xFF1A;</span></p><div class="highlight-python"><div class="highlight"><pre><span></span><span class="c1"># INSERT..RETURNING</span>
<span class="n">result</span> <span class="o">=</span> <span class="n">table</span><span class="o">.</span><span class="n">insert</span><span class="p">()</span><span class="o">.</span><span class="n">returning</span><span class="p">(</span><span class="n">table</span><span class="o">.</span><span class="n">c</span><span class="o">.</span><span class="n">col1</span><span class="p">,</span> <span class="n">table</span><span class="o">.</span><span class="n">c</span><span class="o">.</span><span class="n">col2</span><span class="p">)</span><span class="o">.</span>\
    <span class="n">values</span><span class="p">(</span><span class="n">name</span><span class="o">=</span><span class="s1">&apos;foo&apos;</span><span class="p">)</span>
<span class="k">print</span> <span class="n">result</span><span class="o">.</span><span class="n">fetchall</span><span class="p">()</span>

<span class="c1"># UPDATE..RETURNING</span>
<span class="n">result</span> <span class="o">=</span> <span class="n">table</span><span class="o">.</span><span class="n">update</span><span class="p">()</span><span class="o">.</span><span class="n">returning</span><span class="p">(</span><span class="n">table</span><span class="o">.</span><span class="n">c</span><span class="o">.</span><span class="n">col1</span><span class="p">,</span> <span class="n">table</span><span class="o">.</span><span class="n">c</span><span class="o">.</span><span class="n">col2</span><span class="p">)</span><span class="o">.</span>\
    <span class="n">where</span><span class="p">(</span><span class="n">table</span><span class="o">.</span><span class="n">c</span><span class="o">.</span><span class="n">name</span><span class="o">==</span><span class="s1">&apos;foo&apos;</span><span class="p">)</span><span class="o">.</span><span class="n">values</span><span class="p">(</span><span class="n">name</span><span class="o">=</span><span class="s1">&apos;bar&apos;</span><span class="p">)</span>
<span class="k">print</span> <span class="n">result</span><span class="o">.</span><span class="n">fetchall</span><span class="p">()</span>

<span class="c1"># DELETE..RETURNING</span>
<span class="n">result</span> <span class="o">=</span> <span class="n">table</span><span class="o">.</span><span class="n">delete</span><span class="p">()</span><span class="o">.</span><span class="n">returning</span><span class="p">(</span><span class="n">table</span><span class="o">.</span><span class="n">c</span><span class="o">.</span><span class="n">col1</span><span class="p">,</span> <span class="n">table</span><span class="o">.</span><span class="n">c</span><span class="o">.</span><span class="n">col2</span><span class="p">)</span><span class="o">.</span>\
    <span class="n">where</span><span class="p">(</span><span class="n">table</span><span class="o">.</span><span class="n">c</span><span class="o">.</span><span class="n">name</span><span class="o">==</span><span class="s1">&apos;foo&apos;</span><span class="p">)</span>
<span class="k">print</span> <span class="n">result</span><span class="o">.</span><span class="n">fetchall</span><span class="p">()</span></pre></div></div></div><div class="section" id="insert-on-conflict-upsert"><h2><span class="yiyi-st" id="yiyi-157">INSERT ... ON CONFLICT&#xFF08;Upsert&#xFF09;<a class="headerlink" href="#insert-on-conflict-upsert" title="Permalink to this headline">&#xB6;</a></span></h2><p><span class="yiyi-st" id="yiyi-158">Starting with version 9.5, PostgreSQL allows &#x201C;upserts&#x201D; (update or insert) of rows into a table via the <code class="docutils literal"><span class="pre">ON</span> <span class="pre">CONFLICT</span></code> clause of the <code class="docutils literal"><span class="pre">INSERT</span></code> statement. </span><span class="yiyi-st" id="yiyi-159">&#x53EA;&#x6709;&#x8BE5;&#x884C;&#x4E0D;&#x8FDD;&#x53CD;&#x4EFB;&#x4F55;&#x552F;&#x4E00;&#x7EA6;&#x675F;&#x65F6;&#xFF0C;&#x624D;&#x4F1A;&#x63D2;&#x5165;&#x5019;&#x9009;&#x884C;&#x3002;</span><span class="yiyi-st" id="yiyi-160">&#x5728;&#x8FDD;&#x53CD;&#x552F;&#x4E00;&#x7EA6;&#x675F;&#x7684;&#x60C5;&#x51B5;&#x4E0B;&#xFF0C;&#x53EF;&#x80FD;&#x53D1;&#x751F;&#x7684;&#x6B21;&#x8981;&#x64CD;&#x4F5C;&#x53EF;&#x4EE5;&#x662F;&#x201C;DO UPDATE&#x201D;&#xFF0C;&#x8868;&#x793A;&#x76EE;&#x6807;&#x884C;&#x4E2D;&#x7684;&#x6570;&#x636E;&#x5E94;&#x8BE5;&#x66F4;&#x65B0;&#xFF0C;&#x6216;&#x8005;&#x201C;DO NOTHING&#x201D;&#xFF0C;&#x8868;&#x793A;&#x9759;&#x9ED8;&#x8DF3;&#x8FC7;&#x6B64;&#x884C;&#x3002;</span></p><p><span class="yiyi-st" id="yiyi-161">&#x51B2;&#x7A81;&#x662F;&#x4F7F;&#x7528;&#x73B0;&#x6709;&#x7684;&#x552F;&#x4E00;&#x7EA6;&#x675F;&#x548C;&#x7D22;&#x5F15;&#x6765;&#x786E;&#x5B9A;&#x7684;&#x3002;</span><span class="yiyi-st" id="yiyi-162">These constraints may be identified either using their name as stated in DDL, or they may be <em>inferred</em> by stating the columns and conditions that comprise the indexes.</span></p><p><span class="yiyi-st" id="yiyi-163">SQLAlchemy provides <code class="docutils literal"><span class="pre">ON</span> <span class="pre">CONFLICT</span></code> support via the Postgresql-specific <a class="reference internal" href="#sqlalchemy.dialects.postgresql.dml.insert" title="sqlalchemy.dialects.postgresql.dml.insert"><code class="xref py py-func docutils literal"><span class="pre">postgresql.dml.insert()</span></code></a> function, which provides the generative methods <a class="reference internal" href="#sqlalchemy.dialects.postgresql.dml.Insert.on_conflict_do_update" title="sqlalchemy.dialects.postgresql.dml.Insert.on_conflict_do_update"><code class="xref py py-meth docutils literal"><span class="pre">on_conflict_do_update()</span></code></a> and <a class="reference internal" href="#sqlalchemy.dialects.postgresql.dml.Insert.on_conflict_do_nothing" title="sqlalchemy.dialects.postgresql.dml.Insert.on_conflict_do_nothing"><code class="xref py py-meth docutils literal"><span class="pre">on_conflict_do_nothing()</span></code></a>:</span></p><div class="highlight-python"><div class="highlight"><pre><span></span><span class="kn">from</span> <span class="nn">sqlalchemy.dialects.postgresql</span> <span class="kn">import</span> <span class="n">insert</span>

<span class="n">insert_stmt</span> <span class="o">=</span> <span class="n">insert</span><span class="p">(</span><span class="n">my_table</span><span class="p">)</span><span class="o">.</span><span class="n">values</span><span class="p">(</span>
    <span class="nb">id</span><span class="o">=</span><span class="s1">&apos;some_existing_id&apos;</span><span class="p">,</span>
    <span class="n">data</span><span class="o">=</span><span class="s1">&apos;inserted value&apos;</span><span class="p">)</span>

<span class="n">do_nothing_stmt</span> <span class="o">=</span> <span class="n">insert_stmt</span><span class="o">.</span><span class="n">on_conflict_do_nothing</span><span class="p">(</span>
    <span class="n">index_elements</span><span class="o">=</span><span class="p">[</span><span class="s1">&apos;id&apos;</span><span class="p">]</span>
<span class="p">)</span>

<span class="n">conn</span><span class="o">.</span><span class="n">execute</span><span class="p">(</span><span class="n">do_nothing_stmt</span><span class="p">)</span>

<span class="n">do_update_stmt</span> <span class="o">=</span> <span class="n">insert_stmt</span><span class="o">.</span><span class="n">on_conflict_do_update</span><span class="p">(</span>
    <span class="n">constraint</span><span class="o">=</span><span class="s1">&apos;pk_my_table&apos;</span><span class="p">,</span>
    <span class="n">set_</span><span class="o">=</span><span class="nb">dict</span><span class="p">(</span><span class="n">data</span><span class="o">=</span><span class="s1">&apos;updated value&apos;</span><span class="p">)</span>
<span class="p">)</span>

<span class="n">conn</span><span class="o">.</span><span class="n">execute</span><span class="p">(</span><span class="n">do_update_stmt</span><span class="p">)</span></pre></div></div><p><span class="yiyi-st" id="yiyi-164">&#x4E24;&#x79CD;&#x65B9;&#x6CD5;&#x90FD;&#x4F7F;&#x7528;&#x547D;&#x540D;&#x7EA6;&#x675F;&#x6216;&#x5217;&#x63A8;&#x65AD;&#x6765;&#x63D0;&#x4F9B;&#x51B2;&#x7A81;&#x7684;&#x201C;&#x76EE;&#x6807;&#x201D;&#xFF1A;</span></p><ul><li><p class="first"><span class="yiyi-st" id="yiyi-165">The <a class="reference internal" href="#sqlalchemy.dialects.postgresql.dml.Insert.on_conflict_do_update.params.index_elements" title="sqlalchemy.dialects.postgresql.dml.Insert.on_conflict_do_update"><code class="xref py py-paramref docutils literal"><span class="pre">Insert.on_conflict_do_update.index_elements</span></code></a> argument specifies a sequence containing string column names, <a class="reference internal" href="core_metadata.html#sqlalchemy.schema.Column" title="sqlalchemy.schema.Column"><code class="xref py py-class docutils literal"><span class="pre">Column</span></code></a> objects, and/or SQL expression elements, which would identify a unique index:</span></p><div class="highlight-python"><div class="highlight"><pre><span></span><span class="n">do_update_stmt</span> <span class="o">=</span> <span class="n">insert_stmt</span><span class="o">.</span><span class="n">on_conflict_do_update</span><span class="p">(</span>
    <span class="n">index_elements</span><span class="o">=</span><span class="p">[</span><span class="s1">&apos;id&apos;</span><span class="p">],</span>
    <span class="n">set_</span><span class="o">=</span><span class="nb">dict</span><span class="p">(</span><span class="n">data</span><span class="o">=</span><span class="s1">&apos;updated value&apos;</span><span class="p">)</span>
<span class="p">)</span>

<span class="n">do_update_stmt</span> <span class="o">=</span> <span class="n">insert_stmt</span><span class="o">.</span><span class="n">on_conflict_do_update</span><span class="p">(</span>
    <span class="n">index_elements</span><span class="o">=</span><span class="p">[</span><span class="n">my_table</span><span class="o">.</span><span class="n">c</span><span class="o">.</span><span class="n">id</span><span class="p">],</span>
    <span class="n">set_</span><span class="o">=</span><span class="nb">dict</span><span class="p">(</span><span class="n">data</span><span class="o">=</span><span class="s1">&apos;updated value&apos;</span><span class="p">)</span>
<span class="p">)</span></pre></div></div></li><li><p class="first"><span class="yiyi-st" id="yiyi-166">&#x5F53;&#x4F7F;&#x7528;<a class="reference internal" href="#sqlalchemy.dialects.postgresql.dml.Insert.on_conflict_do_update.params.index_elements" title="sqlalchemy.dialects.postgresql.dml.Insert.on_conflict_do_update"><code class="xref py py-paramref docutils literal"><span class="pre">Insert.on_conflict_do_update.index_elements</span></code></a>&#x63A8;&#x65AD;&#x7D22;&#x5F15;&#x65F6;&#xFF0C;&#x53EF;&#x4EE5;&#x901A;&#x8FC7;&#x6307;&#x5B9A;&#x4F7F;&#x7528;<a class="reference internal" href="#sqlalchemy.dialects.postgresql.dml.Insert.on_conflict_do_update.params.index_where" title="sqlalchemy.dialects.postgresql.dml.Insert.on_conflict_do_update"><code class="xref py py-paramref docutils literal"><span class="pre">Insert.on_conflict_do_update.index_where</span></code></a>&#x53C2;&#x6570;&#x6765;&#x63A8;&#x65AD;&#x90E8;&#x5206;&#x7D22;&#x5F15;&#xFF1A;</span></p><div class="highlight-python"><div class="highlight"><pre><span></span><span class="kn">from</span> <span class="nn">sqlalchemy.dialects.postgresql</span> <span class="kn">import</span> <span class="n">insert</span>

<span class="n">stmt</span> <span class="o">=</span> <span class="n">insert</span><span class="p">(</span><span class="n">my_table</span><span class="p">)</span><span class="o">.</span><span class="n">values</span><span class="p">(</span><span class="n">user_email</span><span class="o">=</span><span class="s1">&apos;a@b.com&apos;</span><span class="p">,</span> <span class="n">data</span><span class="o">=</span><span class="s1">&apos;inserted data&apos;</span><span class="p">)</span>
<span class="n">stmt</span> <span class="o">=</span> <span class="n">stmt</span><span class="o">.</span><span class="n">on_conflict_do_update</span><span class="p">(</span>
    <span class="n">index_elements</span><span class="o">=</span><span class="p">[</span><span class="n">my_table</span><span class="o">.</span><span class="n">c</span><span class="o">.</span><span class="n">user_email</span><span class="p">],</span>
    <span class="n">index_where</span><span class="o">=</span><span class="n">my_table</span><span class="o">.</span><span class="n">c</span><span class="o">.</span><span class="n">user_email</span><span class="o">.</span><span class="n">like</span><span class="p">(</span><span class="s1">&apos;%@gmail.com&apos;</span><span class="p">),</span>
    <span class="n">set_</span><span class="o">=</span><span class="nb">dict</span><span class="p">(</span><span class="n">data</span><span class="o">=</span><span class="n">stmt</span><span class="o">.</span><span class="n">excluded</span><span class="o">.</span><span class="n">data</span><span class="p">)</span>
    <span class="p">)</span>
<span class="n">conn</span><span class="o">.</span><span class="n">execute</span><span class="p">(</span><span class="n">stmt</span><span class="p">)</span></pre></div></div></li><li><p class="first"><span class="yiyi-st" id="yiyi-167"><a class="reference internal" href="#sqlalchemy.dialects.postgresql.dml.Insert.on_conflict_do_update.params.constraint" title="sqlalchemy.dialects.postgresql.dml.Insert.on_conflict_do_update"><code class="xref py py-paramref docutils literal"><span class="pre">Insert.on_conflict_do_update.constraint</span></code></a>&#x53C2;&#x6570;&#x7528;&#x4E8E;&#x76F4;&#x63A5;&#x6307;&#x5B9A;&#x7D22;&#x5F15;&#x800C;&#x4E0D;&#x662F;&#x63A8;&#x65AD;&#x5B83;&#x3002;</span><span class="yiyi-st" id="yiyi-168">&#x8FD9;&#x53EF;&#x4EE5;&#x662F;UNIQUE&#x7EA6;&#x675F;&#xFF0C;PRIMARY KEY&#x7EA6;&#x675F;&#x6216;INDEX&#x7684;&#x540D;&#x79F0;&#xFF1A;</span></p><div class="highlight-python"><div class="highlight"><pre><span></span><span class="n">do_update_stmt</span> <span class="o">=</span> <span class="n">insert_stmt</span><span class="o">.</span><span class="n">on_conflict_do_update</span><span class="p">(</span>
    <span class="n">constraint</span><span class="o">=</span><span class="s1">&apos;my_table_idx_1&apos;</span><span class="p">,</span>
    <span class="n">set_</span><span class="o">=</span><span class="nb">dict</span><span class="p">(</span><span class="n">data</span><span class="o">=</span><span class="s1">&apos;updated value&apos;</span><span class="p">)</span>
<span class="p">)</span>

<span class="n">do_update_stmt</span> <span class="o">=</span> <span class="n">insert_stmt</span><span class="o">.</span><span class="n">on_conflict_do_update</span><span class="p">(</span>
    <span class="n">constraint</span><span class="o">=</span><span class="s1">&apos;my_table_pk&apos;</span><span class="p">,</span>
    <span class="n">set_</span><span class="o">=</span><span class="nb">dict</span><span class="p">(</span><span class="n">data</span><span class="o">=</span><span class="s1">&apos;updated value&apos;</span><span class="p">)</span>
<span class="p">)</span></pre></div></div></li><li><p class="first"><span class="yiyi-st" id="yiyi-169"><a class="reference internal" href="#sqlalchemy.dialects.postgresql.dml.Insert.on_conflict_do_update.params.constraint" title="sqlalchemy.dialects.postgresql.dml.Insert.on_conflict_do_update"><code class="xref py py-paramref docutils literal"><span class="pre">Insert.on_conflict_do_update.constraint</span></code></a>&#x53C2;&#x6570;&#x4E5F;&#x53EF;&#x4EE5;&#x5F15;&#x7528;&#x8868;&#x793A;&#x7EA6;&#x675F;&#x7684;SQLAlchemy&#x6784;&#x9020;&#xFF0C;&#x4F8B;&#x5982;&#xFF0C; <a class="reference internal" href="core_constraints.html#sqlalchemy.schema.UniqueConstraint" title="sqlalchemy.schema.UniqueConstraint"><code class="xref py py-class docutils literal"><span class="pre">UniqueConstraint</span></code></a>&#xFF0C;<a class="reference internal" href="core_constraints.html#sqlalchemy.schema.PrimaryKeyConstraint" title="sqlalchemy.schema.PrimaryKeyConstraint"><code class="xref py py-class docutils literal"><span class="pre">PrimaryKeyConstraint</span></code></a>&#xFF0C;<a class="reference internal" href="core_constraints.html#sqlalchemy.schema.Index" title="sqlalchemy.schema.Index"><code class="xref py py-class docutils literal"><span class="pre">Index</span></code></a>&#x6216;<a class="reference internal" href="#sqlalchemy.dialects.postgresql.ExcludeConstraint" title="sqlalchemy.dialects.postgresql.ExcludeConstraint"><code class="xref py py-class docutils literal"><span class="pre">ExcludeConstraint</span></code></a>&#x3002;</span><span class="yiyi-st" id="yiyi-170">&#x5728;&#x8FD9;&#x79CD;&#x4F7F;&#x7528;&#x4E2D;&#xFF0C;&#x5982;&#x679C;&#x7EA6;&#x675F;&#x5177;&#x6709;&#x540D;&#x79F0;&#xFF0C;&#x5219;&#x76F4;&#x63A5;&#x4F7F;&#x7528;&#x5B83;&#x3002;</span><span class="yiyi-st" id="yiyi-171">&#x5426;&#x5219;&#xFF0C;&#x5982;&#x679C;&#x7EA6;&#x675F;&#x672A;&#x547D;&#x540D;&#xFF0C;&#x5219;&#x5C06;&#x4F7F;&#x7528;&#x63A8;&#x7406;&#xFF0C;&#x5176;&#x4E2D;&#x7EA6;&#x675F;&#x7684;&#x8868;&#x8FBE;&#x5F0F;&#x548C;&#x53EF;&#x9009;&#x7684;WHERE&#x5B50;&#x53E5;&#x5C06;&#x5728;&#x7ED3;&#x6784;&#x4E2D;&#x62FC;&#x5199;&#x51FA;&#x6765;&#x3002;</span><span class="yiyi-st" id="yiyi-172">&#x4F7F;&#x7528;<a class="reference internal" href="core_metadata.html#sqlalchemy.schema.Table.primary_key" title="sqlalchemy.schema.Table.primary_key"><code class="xref py py-attr docutils literal"><span class="pre">Table.primary_key</span></code></a>&#x5C5E;&#x6027;&#x6765;&#x5F15;&#x7528;<a class="reference internal" href="core_metadata.html#sqlalchemy.schema.Table" title="sqlalchemy.schema.Table"><code class="xref py py-class docutils literal"><span class="pre">Table</span></code></a>&#x7684;&#x5DF2;&#x547D;&#x540D;&#x6216;&#x672A;&#x547D;&#x540D;&#x4E3B;&#x952E;&#x65F6;&#xFF0C;&#x6B64;&#x7528;&#x6CD5;&#x7279;&#x522B;&#x65B9;&#x4FBF;&#xFF1A;</span></p><div class="highlight-python"><div class="highlight"><pre><span></span><span class="n">do_update_stmt</span> <span class="o">=</span> <span class="n">insert_stmt</span><span class="o">.</span><span class="n">on_conflict_do_update</span><span class="p">(</span>
    <span class="n">constraint</span><span class="o">=</span><span class="n">my_table</span><span class="o">.</span><span class="n">primary_key</span><span class="p">,</span>
    <span class="n">set_</span><span class="o">=</span><span class="nb">dict</span><span class="p">(</span><span class="n">data</span><span class="o">=</span><span class="s1">&apos;updated value&apos;</span><span class="p">)</span>
<span class="p">)</span></pre></div></div></li></ul><p><span class="yiyi-st" id="yiyi-173"><code class="docutils literal"><span class="pre">ON</span> <span class="pre">CONFLICT...DO</span> <span class="pre">UPDATE</span></code> is used to perform an update of the already existing row, using any combination of new values as well as values from the proposed insertion. </span><span class="yiyi-st" id="yiyi-174">&#x8FD9;&#x4E9B;&#x503C;&#x662F;&#x4F7F;&#x7528;<a class="reference internal" href="#sqlalchemy.dialects.postgresql.dml.Insert.on_conflict_do_update.params.set_" title="sqlalchemy.dialects.postgresql.dml.Insert.on_conflict_do_update"><code class="xref py py-paramref docutils literal"><span class="pre">Insert.on_conflict_do_update.set_</span></code></a>&#x53C2;&#x6570;&#x6307;&#x5B9A;&#x7684;&#x3002;</span><span class="yiyi-st" id="yiyi-175">&#x8BE5;&#x53C2;&#x6570;&#x63A5;&#x53D7;&#x7531;UPDATE&#x7684;&#x76F4;&#x63A5;&#x503C;&#x7EC4;&#x6210;&#x7684;&#x5B57;&#x5178;&#xFF1A;</span></p><div class="highlight-python"><div class="highlight"><pre><span></span><span class="kn">from</span> <span class="nn">sqlalchemy.dialects.postgresql</span> <span class="kn">import</span> <span class="n">insert</span>

<span class="n">stmt</span> <span class="o">=</span> <span class="n">insert</span><span class="p">(</span><span class="n">my_table</span><span class="p">)</span><span class="o">.</span><span class="n">values</span><span class="p">(</span><span class="nb">id</span><span class="o">=</span><span class="s1">&apos;some_id&apos;</span><span class="p">,</span> <span class="n">data</span><span class="o">=</span><span class="s1">&apos;inserted value&apos;</span><span class="p">)</span>
<span class="n">do_update_stmt</span> <span class="o">=</span> <span class="n">stmt</span><span class="o">.</span><span class="n">on_conflict_do_update</span><span class="p">(</span>
    <span class="n">index_elements</span><span class="o">=</span><span class="p">[</span><span class="s1">&apos;id&apos;</span><span class="p">],</span>
    <span class="n">set_</span><span class="o">=</span><span class="nb">dict</span><span class="p">(</span><span class="n">data</span><span class="o">=</span><span class="s1">&apos;updated value&apos;</span><span class="p">)</span>
    <span class="p">)</span>
<span class="n">conn</span><span class="o">.</span><span class="n">execute</span><span class="p">(</span><span class="n">do_update_stmt</span><span class="p">)</span></pre></div></div><div class="admonition warning"><p class="first admonition-title"><span class="yiyi-st" id="yiyi-176">&#x8B66;&#x544A;</span></p><p class="last"><span class="yiyi-st" id="yiyi-177"><a class="reference internal" href="#sqlalchemy.dialects.postgresql.dml.Insert.on_conflict_do_update" title="sqlalchemy.dialects.postgresql.dml.Insert.on_conflict_do_update"><code class="xref py py-meth docutils literal"><span class="pre">Insert.on_conflict_do_update()</span></code></a>&#x65B9;&#x6CD5;&#x4E0D;&#x8003;&#x8651;Python&#x65B9;&#x9762;&#x7684;&#x9ED8;&#x8BA4;UPDATE&#x503C;&#x6216;&#x751F;&#x6210;&#x51FD;&#x6570;&#xFF0C;&#x4F8B;&#x5982;<strong></strong>&#x3002;&#x4F8B;&#x5982;&#x90A3;&#x4E9B;&#x4F7F;&#x7528;<a class="reference internal" href="core_metadata.html#sqlalchemy.schema.Column.params.onupdate" title="sqlalchemy.schema.Column"><code class="xref py py-paramref docutils literal"><span class="pre">Column.onupdate</span></code></a>&#x6307;&#x5B9A;&#x7684;&#x3002;</span><span class="yiyi-st" id="yiyi-178">&#x9664;&#x975E;&#x5728;<a class="reference internal" href="#sqlalchemy.dialects.postgresql.dml.Insert.on_conflict_do_update.params.set_" title="sqlalchemy.dialects.postgresql.dml.Insert.on_conflict_do_update"><code class="xref py py-paramref docutils literal"><span class="pre">Insert.on_conflict_do_update.set_</span></code></a>&#x5B57;&#x5178;&#x4E2D;&#x624B;&#x52A8;&#x6307;&#x5B9A;&#x8FD9;&#x4E9B;&#x503C;&#xFF0C;&#x5426;&#x5219;&#x8FD9;&#x4E9B;&#x503C;&#x4E0D;&#x4F1A;&#x7528;&#x4E8E;ON CONFLICT&#x6837;&#x5F0F;&#x7684;UPDATE&#x3002;</span></p></div><p><span class="yiyi-st" id="yiyi-179">&#x4E3A;&#x4E86;&#x5F15;&#x7528;&#x5EFA;&#x8BAE;&#x7684;&#x63D2;&#x5165;&#x884C;&#xFF0C;&#x7279;&#x6B8A;&#x522B;&#x540D;<a class="reference internal" href="#sqlalchemy.dialects.postgresql.dml.Insert.excluded" title="sqlalchemy.dialects.postgresql.dml.Insert.excluded"><code class="xref py py-attr docutils literal"><span class="pre">excluded</span></code></a>&#x53EF;&#x4F5C;&#x4E3A;<a class="reference internal" href="#sqlalchemy.dialects.postgresql.dml.Insert" title="sqlalchemy.dialects.postgresql.dml.Insert"><code class="xref py py-class docutils literal"><span class="pre">postgresql.dml.Insert</span></code></a>&#x5BF9;&#x8C61;&#x4E0A;&#x7684;&#x5C5E;&#x6027;&#xFF1B;&#x8FD9;&#x4E2A;&#x5BF9;&#x8C61;&#x662F;&#x4E00;&#x4E2A;<a class="reference internal" href="core_sqlelement.html#sqlalchemy.sql.expression.ColumnCollection" title="sqlalchemy.sql.expression.ColumnCollection"><code class="xref py py-class docutils literal"><span class="pre">ColumnCollection</span></code></a>&#xFF0C;&#x8FD9;&#x4E2A;&#x522B;&#x540D;&#x5305;&#x542B;&#x76EE;&#x6807;&#x8868;&#x7684;&#x6240;&#x6709;&#x5217;&#xFF1A;</span></p><div class="highlight-python"><div class="highlight"><pre><span></span><span class="kn">from</span> <span class="nn">sqlalchemy.dialects.postgresql</span> <span class="kn">import</span> <span class="n">insert</span>

<span class="n">stmt</span> <span class="o">=</span> <span class="n">insert</span><span class="p">(</span><span class="n">my_table</span><span class="p">)</span><span class="o">.</span><span class="n">values</span><span class="p">(</span>
    <span class="nb">id</span><span class="o">=</span><span class="s1">&apos;some_id&apos;</span><span class="p">,</span>
    <span class="n">data</span><span class="o">=</span><span class="s1">&apos;inserted value&apos;</span><span class="p">,</span>
    <span class="n">author</span><span class="o">=</span><span class="s1">&apos;jlh&apos;</span><span class="p">)</span>
<span class="n">do_update_stmt</span> <span class="o">=</span> <span class="n">stmt</span><span class="o">.</span><span class="n">on_conflict_do_update</span><span class="p">(</span>
    <span class="n">index_elements</span><span class="o">=</span><span class="p">[</span><span class="s1">&apos;id&apos;</span><span class="p">],</span>
    <span class="n">set_</span><span class="o">=</span><span class="nb">dict</span><span class="p">(</span><span class="n">data</span><span class="o">=</span><span class="s1">&apos;updated value&apos;</span><span class="p">,</span> <span class="n">author</span><span class="o">=</span><span class="n">stmt</span><span class="o">.</span><span class="n">excluded</span><span class="o">.</span><span class="n">author</span><span class="p">)</span>
    <span class="p">)</span>
<span class="n">conn</span><span class="o">.</span><span class="n">execute</span><span class="p">(</span><span class="n">do_update_stmt</span><span class="p">)</span></pre></div></div><p><span class="yiyi-st" id="yiyi-180"><a class="reference internal" href="#sqlalchemy.dialects.postgresql.dml.Insert.on_conflict_do_update" title="sqlalchemy.dialects.postgresql.dml.Insert.on_conflict_do_update"><code class="xref py py-meth docutils literal"><span class="pre">Insert.on_conflict_do_update()</span></code></a>&#x65B9;&#x6CD5;&#x8FD8;&#x4F7F;&#x7528;<a class="reference internal" href="#sqlalchemy.dialects.postgresql.dml.Insert.on_conflict_do_update.params.where" title="sqlalchemy.dialects.postgresql.dml.Insert.on_conflict_do_update"><code class="xref py py-paramref docutils literal"><span class="pre">Insert.on_conflict_do_update.where</span></code></a>&#x53C2;&#x6570;&#x63A5;&#x53D7;WHERE&#x5B50;&#x53E5;&#xFF0C;&#x8BE5;&#x53C2;&#x6570;&#x5C06;&#x9650;&#x5236;&#x90A3;&#x4E9B;&#x63A5;&#x6536;UPDATE&#x7684;&#x884C;&#xFF1A;</span></p><div class="highlight-python"><div class="highlight"><pre><span></span>from sqlalchemy.dialects.postgresql import insert

stmt = insert(my_table).values(
    id=&apos;some_id&apos;,
    data=&apos;inserted value&apos;,
    author=&apos;jlh&apos;)
on_update_stmt = stmt.on_conflict_do_update(
    index_elements=[&apos;id&apos;],
    set_=dict(data=&apos;updated value&apos;, author=stmt.excluded.author)
    where=(my_table.c.status == 2)
    )
conn.execute(on_update_stmt)</pre></div></div><p><span class="yiyi-st" id="yiyi-181"><code class="docutils literal"><span class="pre">ON</span> <span class="pre">CONFLICT</span></code> may also be used to skip inserting a row entirely if any conflict with a unique or exclusion constraint occurs; below this is illustrated using the <a class="reference internal" href="#sqlalchemy.dialects.postgresql.dml.Insert.on_conflict_do_nothing" title="sqlalchemy.dialects.postgresql.dml.Insert.on_conflict_do_nothing"><code class="xref py py-meth docutils literal"><span class="pre">on_conflict_do_nothing()</span></code></a> method:</span></p><div class="highlight-python"><div class="highlight"><pre><span></span><span class="kn">from</span> <span class="nn">sqlalchemy.dialects.postgresql</span> <span class="kn">import</span> <span class="n">insert</span>

<span class="n">stmt</span> <span class="o">=</span> <span class="n">insert</span><span class="p">(</span><span class="n">my_table</span><span class="p">)</span><span class="o">.</span><span class="n">values</span><span class="p">(</span><span class="nb">id</span><span class="o">=</span><span class="s1">&apos;some_id&apos;</span><span class="p">,</span> <span class="n">data</span><span class="o">=</span><span class="s1">&apos;inserted value&apos;</span><span class="p">)</span>
<span class="n">stmt</span> <span class="o">=</span> <span class="n">stmt</span><span class="o">.</span><span class="n">on_conflict_do_nothing</span><span class="p">(</span><span class="n">index_elements</span><span class="o">=</span><span class="p">[</span><span class="s1">&apos;id&apos;</span><span class="p">])</span>
<span class="n">conn</span><span class="o">.</span><span class="n">execute</span><span class="p">(</span><span class="n">stmt</span><span class="p">)</span></pre></div></div><p><span class="yiyi-st" id="yiyi-182">&#x5982;&#x679C;&#x6CA1;&#x6709;&#x6307;&#x5B9A;&#x4EFB;&#x4F55;&#x5217;&#x6216;&#x7EA6;&#x675F;&#xFF0C;&#x5219;&#x4F7F;&#x7528;<code class="docutils literal"><span class="pre">DO</span> <span class="pre">NOTHING</span></code>&#xFF0C;&#x5B83;&#x4F1A;&#x8DF3;&#x8FC7;INSERT&#xFF0C; &#xFF1A;</span></p><div class="highlight-python"><div class="highlight"><pre><span></span><span class="kn">from</span> <span class="nn">sqlalchemy.dialects.postgresql</span> <span class="kn">import</span> <span class="n">insert</span>

<span class="n">stmt</span> <span class="o">=</span> <span class="n">insert</span><span class="p">(</span><span class="n">my_table</span><span class="p">)</span><span class="o">.</span><span class="n">values</span><span class="p">(</span><span class="nb">id</span><span class="o">=</span><span class="s1">&apos;some_id&apos;</span><span class="p">,</span> <span class="n">data</span><span class="o">=</span><span class="s1">&apos;inserted value&apos;</span><span class="p">)</span>
<span class="n">stmt</span> <span class="o">=</span> <span class="n">stmt</span><span class="o">.</span><span class="n">on_conflict_do_nothing</span><span class="p">()</span>
<span class="n">conn</span><span class="o">.</span><span class="n">execute</span><span class="p">(</span><span class="n">stmt</span><span class="p">)</span></pre></div></div><div class="versionadded"><p><span class="yiyi-st" id="yiyi-183"><span class="versionmodified">&#x7248;&#x672C;1.1&#x4E2D;&#x7684;&#x65B0;&#x589E;&#x529F;&#x80FD;</span>&#x589E;&#x52A0;&#x4E86;&#x5BF9;Postgresql ON CONFLICT&#x5B50;&#x53E5;&#x7684;&#x652F;&#x6301;</span></p></div><div class="admonition seealso"><p class="first admonition-title"><span class="yiyi-st" id="yiyi-184">&#x4E5F;&#x53EF;&#x4EE5;&#x770B;&#x770B;</span></p><p class="last"><span class="yiyi-st" id="yiyi-185"><a class="reference external" href="http://www.postgresql.org/docs/current/static/sql-insert.html#SQL-ON-CONFLICT">INSERT .. ON CONFLICT</a>  - &#x5728;Postgresql&#x6587;&#x6863;&#x4E2D;&#x3002;</span></p></div></div><div class="section" id="full-text-search"><h2><span class="yiyi-st" id="yiyi-186">&#x5168;&#x6587;&#x68C0;&#x7D22;<a class="headerlink" href="#full-text-search" title="Permalink to this headline">&#xB6;</a></span></h2><p><span class="yiyi-st" id="yiyi-187">SQLAlchemy makes available the Postgresql <code class="docutils literal"><span class="pre">@@</span></code> operator via the <a class="reference internal" href="core_sqlelement.html#sqlalchemy.sql.expression.ColumnElement.match" title="sqlalchemy.sql.expression.ColumnElement.match"><code class="xref py py-meth docutils literal"><span class="pre">ColumnElement.match()</span></code></a> method on any textual column expression. </span><span class="yiyi-st" id="yiyi-188">&#x5728;Postgresql&#x65B9;&#x8A00;&#x4E2D;&#xFF0C;&#x8868;&#x8FBE;&#x5F0F;&#x5982;&#x4E0B;&#x6240;&#x793A;&#xFF1A;</span></p><div class="highlight-python"><div class="highlight"><pre><span></span><span class="n">select</span><span class="p">([</span><span class="n">sometable</span><span class="o">.</span><span class="n">c</span><span class="o">.</span><span class="n">text</span><span class="o">.</span><span class="n">match</span><span class="p">(</span><span class="s2">&quot;search string&quot;</span><span class="p">)])</span></pre></div></div><p><span class="yiyi-st" id="yiyi-189">&#x5C06;&#x53D1;&#x5C04;&#x5230;&#x6570;&#x636E;&#x5E93;&#xFF1A;</span></p><div class="highlight-python"><div class="highlight"><pre><span></span>SELECT text @@ to_tsquery(&apos;search string&apos;) FROM table</pre></div></div><p><span class="yiyi-st" id="yiyi-190">&#x4F7F;&#x7528;&#x6807;&#x51C6;&#x7684;<a class="reference internal" href="core_sqlelement.html#sqlalchemy.sql.expression.func" title="sqlalchemy.sql.expression.func"><code class="xref py py-data docutils literal"><span class="pre">func</span></code></a>&#x7ED3;&#x6784;&#x663E;&#x5F0F;&#x4F7F;&#x7528;Postgresql&#x6587;&#x672C;&#x641C;&#x7D22;&#x51FD;&#x6570;&#xFF0C;&#x5982;<code class="docutils literal"><span class="pre">to_tsquery()</span></code>&#x548C;<code class="docutils literal"><span class="pre">to_tsvector()</span></code>&#x3002;</span><span class="yiyi-st" id="yiyi-191">&#x4F8B;&#x5982;&#xFF1A;</span></p><div class="highlight-python"><div class="highlight"><pre><span></span><span class="n">select</span><span class="p">([</span>
    <span class="n">func</span><span class="o">.</span><span class="n">to_tsvector</span><span class="p">(</span><span class="s1">&apos;fat cats ate rats&apos;</span><span class="p">)</span><span class="o">.</span><span class="n">match</span><span class="p">(</span><span class="s1">&apos;cat &amp; rat&apos;</span><span class="p">)</span>
<span class="p">])</span></pre></div></div><p><span class="yiyi-st" id="yiyi-192">&#x53D1;&#x51FA;&#x76F8;&#x5F53;&#x4E8E;&#xFF1A;</span></p><div class="highlight-python"><div class="highlight"><pre><span></span>SELECT to_tsvector(&apos;fat cats ate rats&apos;) @@ to_tsquery(&apos;cat &amp; rat&apos;)</pre></div></div><p><span class="yiyi-st" id="yiyi-193"><a class="reference internal" href="#sqlalchemy.dialects.postgresql.TSVECTOR" title="sqlalchemy.dialects.postgresql.TSVECTOR"><code class="xref py py-class docutils literal"><span class="pre">postgresql.TSVECTOR</span></code></a>&#x7C7B;&#x578B;&#x53EF;&#x4EE5;&#x63D0;&#x4F9B;&#x663E;&#x5F0F;CAST&#xFF1A;</span></p><div class="highlight-python"><div class="highlight"><pre><span></span><span class="kn">from</span> <span class="nn">sqlalchemy.dialects.postgresql</span> <span class="kn">import</span> <span class="n">TSVECTOR</span>
<span class="kn">from</span> <span class="nn">sqlalchemy</span> <span class="kn">import</span> <span class="n">select</span><span class="p">,</span> <span class="n">cast</span>
<span class="n">select</span><span class="p">([</span><span class="n">cast</span><span class="p">(</span><span class="s2">&quot;some text&quot;</span><span class="p">,</span> <span class="n">TSVECTOR</span><span class="p">)])</span></pre></div></div><p><span class="yiyi-st" id="yiyi-194">&#x4EA7;&#x751F;&#x4E00;&#x4E2A;&#x76F8;&#x5F53;&#x4E8E;&#xFF1A;</span></p><div class="highlight-python"><div class="highlight"><pre><span></span>SELECT CAST(&apos;some text&apos; AS TSVECTOR) AS anon_1</pre></div></div><p><span class="yiyi-st" id="yiyi-195">Postgresql&#x4E2D;&#x7684;&#x5168;&#x6587;&#x641C;&#x7D22;&#x53D7;&#x4EE5;&#x4E0B;&#x7EC4;&#x5408;&#x7684;&#x5F71;&#x54CD;&#xFF1A;<code class="docutils literal"><span class="pre">default_text_search_config</span></code>&#x7684;PostgresSQL&#x8BBE;&#x7F6E;&#xFF0C;&#x7528;&#x4E8E;&#x6784;&#x5EFA;GIN / GiST&#x7D22;&#x5F15;&#x7684;<code class="docutils literal"><span class="pre">regconfig</span></code>&#x4EE5;&#x53CA;<code class="docutils literal"><span class="pre">regconfig</span></code></span></p><p><span class="yiyi-st" id="yiyi-196">&#x5BF9;&#x5177;&#x6709;&#x5DF2;&#x7ECF;&#x9884;&#x5148;&#x8BA1;&#x7B97;&#x7684;GIN&#x6216;GiST&#x7D22;&#x5F15;&#x7684;&#x5217;&#x6267;&#x884C;&#x5168;&#x6587;&#x641C;&#x7D22;&#x65F6;&#xFF08;&#x5168;&#x6587;&#x641C;&#x7D22;&#x4E2D;&#x5E38;&#x89C1;&#xFF09;&#xFF0C;&#x53EF;&#x80FD;&#x9700;&#x8981;&#x663E;&#x5F0F;&#x4F20;&#x9012;&#x7279;&#x5B9A;&#x7684;PostgresSQL <code class="docutils literal"><span class="pre">regconfig</span></code>&#x503C;&#x4EE5;&#x786E;&#x4FDD;&#x67E5;&#x8BE2;&#x8BA1;&#x5212;&#x4EBA;&#x5458;&#x5229;&#x7528;&#x7D22;&#x5F15;&#x5E76;&#x4E14;&#x4E0D;&#x9700;&#x8981;&#x91CD;&#x65B0;&#x8BA1;&#x7B97;&#x5217;&#x3002;</span></p><p><span class="yiyi-st" id="yiyi-197">&#x4E3A;&#x4E86;&#x63D0;&#x4F9B;&#x660E;&#x786E;&#x7684;&#x67E5;&#x8BE2;&#x8BA1;&#x5212;&#x6216;&#x4F7F;&#x7528;&#x4E0D;&#x540C;&#x7684;&#x641C;&#x7D22;&#x7B56;&#x7565;&#xFF0C;<code class="docutils literal"><span class="pre">match</span></code>&#x65B9;&#x6CD5;&#x63A5;&#x53D7;&#x4E00;&#x4E2A;<code class="docutils literal"><span class="pre">postgresql_regconfig</span></code>&#x5173;&#x952E;&#x5B57;&#x53C2;&#x6570;&#xFF1A;</span></p><div class="highlight-python"><div class="highlight"><pre><span></span><span class="n">select</span><span class="p">([</span><span class="n">mytable</span><span class="o">.</span><span class="n">c</span><span class="o">.</span><span class="n">id</span><span class="p">])</span><span class="o">.</span><span class="n">where</span><span class="p">(</span>
    <span class="n">mytable</span><span class="o">.</span><span class="n">c</span><span class="o">.</span><span class="n">title</span><span class="o">.</span><span class="n">match</span><span class="p">(</span><span class="s1">&apos;somestring&apos;</span><span class="p">,</span> <span class="n">postgresql_regconfig</span><span class="o">=</span><span class="s1">&apos;english&apos;</span><span class="p">)</span>
<span class="p">)</span></pre></div></div><p><span class="yiyi-st" id="yiyi-198">&#x53D1;&#x51FA;&#x76F8;&#x5F53;&#x4E8E;&#xFF1A;</span></p><div class="highlight-python"><div class="highlight"><pre><span></span>SELECT mytable.id FROM mytable
WHERE mytable.title @@ to_tsquery(&apos;english&apos;, &apos;somestring&apos;)</pre></div></div><p><span class="yiyi-st" id="yiyi-199">&#x8FD8;&#x53EF;&#x4EE5;&#x5C06;<cite>&apos;regconfig&apos;</cite>&#x503C;&#x4F5C;&#x4E3A;&#x521D;&#x59CB;&#x53C2;&#x6570;&#x4F20;&#x9012;&#x7ED9;<code class="docutils literal"><span class="pre">to_tsvector()</span></code>&#x547D;&#x4EE4;&#xFF1A;</span></p><div class="highlight-python"><div class="highlight"><pre><span></span><span class="n">select</span><span class="p">([</span><span class="n">mytable</span><span class="o">.</span><span class="n">c</span><span class="o">.</span><span class="n">id</span><span class="p">])</span><span class="o">.</span><span class="n">where</span><span class="p">(</span>
        <span class="n">func</span><span class="o">.</span><span class="n">to_tsvector</span><span class="p">(</span><span class="s1">&apos;english&apos;</span><span class="p">,</span> <span class="n">mytable</span><span class="o">.</span><span class="n">c</span><span class="o">.</span><span class="n">title</span> <span class="p">)</span>            <span class="o">.</span><span class="n">match</span><span class="p">(</span><span class="s1">&apos;somestring&apos;</span><span class="p">,</span> <span class="n">postgresql_regconfig</span><span class="o">=</span><span class="s1">&apos;english&apos;</span><span class="p">)</span>
    <span class="p">)</span></pre></div></div><p><span class="yiyi-st" id="yiyi-200">&#x4EA7;&#x751F;&#x4E00;&#x4E2A;&#x76F8;&#x5F53;&#x4E8E;&#xFF1A;</span></p><div class="highlight-python"><div class="highlight"><pre><span></span>SELECT mytable.id FROM mytable
WHERE to_tsvector(&apos;english&apos;, mytable.title) @@
    to_tsquery(&apos;english&apos;, &apos;somestring&apos;)</pre></div></div><p><span class="yiyi-st" id="yiyi-201">&#x5EFA;&#x8BAE;&#x60A8;&#x4F7F;&#x7528;PostgresSQL&#x7684;<code class="docutils literal"><span class="pre">EXPLAIN</span> <span class="pre">ANALYZE ...</span></code>&#x5DE5;&#x5177;&#xFF0C;&#x4EE5;&#x786E;&#x4FDD;&#x60A8;&#x4F7F;&#x7528;SQLAlchemy&#x751F;&#x6210;&#x67E5;&#x8BE2;&#xFF0C;&#x4EE5;&#x5145;&#x5206;&#x5229;&#x7528;&#x60A8;&#x53EF;&#x80FD;&#x4E3A;&#x5168;&#x6587;&#x641C;&#x7D22;&#x521B;&#x5EFA;&#x7684;&#x4EFB;&#x4F55;&#x7D22;&#x5F15;&#x3002;</span></p></div><div class="section" id="from-only"><h2><span class="yiyi-st" id="yiyi-202">&#x4EC5;&#x4ECE;... <a class="headerlink" href="#from-only" title="Permalink to this headline">&#xB6;</a></span></h2><p><span class="yiyi-st" id="yiyi-203">&#x8BE5;&#x65B9;&#x8A00;&#x652F;&#x6301;PostgreSQL&#x7684;ONLY&#x5173;&#x952E;&#x5B57;&#xFF0C;&#x4EC5;&#x7528;&#x4E8E;&#x5B9A;&#x4F4D;&#x7EE7;&#x627F;&#x5C42;&#x6B21;&#x7ED3;&#x6784;&#x4E2D;&#x7684;&#x7279;&#x5B9A;&#x8868;&#x3002;</span><span class="yiyi-st" id="yiyi-204">This can be used to produce the <code class="docutils literal"><span class="pre">SELECT</span> <span class="pre">...</span> <span class="pre">FROM</span> <span class="pre">ONLY</span></code>, <code class="docutils literal"><span class="pre">UPDATE</span> <span class="pre">ONLY</span> <span class="pre">...</span></code>, and <code class="docutils literal"><span class="pre">DELETE</span> <span class="pre">FROM</span> <span class="pre">ONLY</span> <span class="pre">...</span></code> syntaxes. </span><span class="yiyi-st" id="yiyi-205">&#x5B83;&#x4F7F;&#x7528;SQLAlchemy&#x7684;&#x63D0;&#x793A;&#x673A;&#x5236;&#xFF1A;</span></p><div class="highlight-python"><div class="highlight"><pre><span></span><span class="c1"># SELECT ... FROM ONLY ...</span>
<span class="n">result</span> <span class="o">=</span> <span class="n">table</span><span class="o">.</span><span class="n">select</span><span class="p">()</span><span class="o">.</span><span class="n">with_hint</span><span class="p">(</span><span class="n">table</span><span class="p">,</span> <span class="s1">&apos;ONLY&apos;</span><span class="p">,</span> <span class="s1">&apos;postgresql&apos;</span><span class="p">)</span>
<span class="k">print</span> <span class="n">result</span><span class="o">.</span><span class="n">fetchall</span><span class="p">()</span>

<span class="c1"># UPDATE ONLY ...</span>
<span class="n">table</span><span class="o">.</span><span class="n">update</span><span class="p">(</span><span class="n">values</span><span class="o">=</span><span class="nb">dict</span><span class="p">(</span><span class="n">foo</span><span class="o">=</span><span class="s1">&apos;bar&apos;</span><span class="p">))</span><span class="o">.</span><span class="n">with_hint</span><span class="p">(</span><span class="s1">&apos;ONLY&apos;</span><span class="p">,</span>
                                               <span class="n">dialect_name</span><span class="o">=</span><span class="s1">&apos;postgresql&apos;</span><span class="p">)</span>

<span class="c1"># DELETE FROM ONLY ...</span>
<span class="n">table</span><span class="o">.</span><span class="n">delete</span><span class="p">()</span><span class="o">.</span><span class="n">with_hint</span><span class="p">(</span><span class="s1">&apos;ONLY&apos;</span><span class="p">,</span> <span class="n">dialect_name</span><span class="o">=</span><span class="s1">&apos;postgresql&apos;</span><span class="p">)</span></pre></div></div></div><div class="section" id="postgresql-specific-index-options"><h2><span class="yiyi-st" id="yiyi-206">Postgresql&#x7279;&#x5B9A;&#x7684;&#x7D22;&#x5F15;&#x9009;&#x9879;<a class="headerlink" href="#postgresql-specific-index-options" title="Permalink to this headline">&#xB6;</a></span></h2><p><span class="yiyi-st" id="yiyi-207">&#x5BF9;&#x4E8E;<a class="reference internal" href="core_constraints.html#sqlalchemy.schema.Index" title="sqlalchemy.schema.Index"><code class="xref py py-class docutils literal"><span class="pre">Index</span></code></a>&#x7ED3;&#x6784;&#x7684;&#x51E0;&#x4E2A;&#x6269;&#x5C55;&#x662F;&#x53EF;&#x7528;&#x7684;&#xFF0C;&#x7279;&#x5B9A;&#x4E8E;PostgreSQL&#x65B9;&#x8A00;&#x3002;</span></p><div class="section" id="partial-indexes"><h3><span class="yiyi-st" id="yiyi-208">&#x90E8;&#x5206;&#x7D22;&#x5F15;<a class="headerlink" href="#partial-indexes" title="Permalink to this headline">&#xB6;</a></span></h3><p><span class="yiyi-st" id="yiyi-209">&#x90E8;&#x5206;&#x7D22;&#x5F15;&#x4E3A;&#x7D22;&#x5F15;&#x5B9A;&#x4E49;&#x6DFB;&#x52A0;&#x6807;&#x51C6;&#xFF0C;&#x4EE5;&#x4FBF;&#x5C06;&#x7D22;&#x5F15;&#x5E94;&#x7528;&#x4E8E;&#x884C;&#x7684;&#x5B50;&#x96C6;&#x3002;</span><span class="yiyi-st" id="yiyi-210">&#x8FD9;&#x4E9B;&#x53EF;&#x4EE5;&#x4F7F;&#x7528;<code class="docutils literal"><span class="pre">postgresql_where</span></code>&#x5173;&#x952E;&#x5B57;&#x53C2;&#x6570;&#x5728;<a class="reference internal" href="core_constraints.html#sqlalchemy.schema.Index" title="sqlalchemy.schema.Index"><code class="xref py py-class docutils literal"><span class="pre">Index</span></code></a>&#x4E2D;&#x6307;&#x5B9A;&#xFF1A;</span></p><div class="highlight-python"><div class="highlight"><pre><span></span><span class="n">Index</span><span class="p">(</span><span class="s1">&apos;my_index&apos;</span><span class="p">,</span> <span class="n">my_table</span><span class="o">.</span><span class="n">c</span><span class="o">.</span><span class="n">id</span><span class="p">,</span> <span class="n">postgresql_where</span><span class="o">=</span><span class="n">tbl</span><span class="o">.</span><span class="n">c</span><span class="o">.</span><span class="n">value</span> <span class="o">&gt;</span> <span class="mi">10</span><span class="p">)</span></pre></div></div></div><div class="section" id="operator-classes"><h3><span class="yiyi-st" id="yiyi-211">&#x8FD0;&#x7B97;&#x7B26;&#x7C7B;<a class="headerlink" href="#operator-classes" title="Permalink to this headline">&#xB6;</a></span></h3><p><span class="yiyi-st" id="yiyi-212">PostgreSQL&#x5141;&#x8BB8;&#x4E3A;&#x7D22;&#x5F15;&#x7684;&#x6BCF;&#x4E00;&#x5217;&#x6307;&#x5B9A;&#x4E00;&#x4E2A;<em>&#x64CD;&#x4F5C;&#x7B26;&#x7C7B;</em>&#xFF08;&#x53C2;&#x89C1;<a class="reference external" href="http://www.postgresql.org/docs/8.3/interactive/indexes-opclass.html">http://www.postgresql.org/docs/8.3/interactive/indexes-opclass.html  t1 &gt;&#xFF09;&#x3002;</a></span><span class="yiyi-st" id="yiyi-213"><a class="reference internal" href="core_constraints.html#sqlalchemy.schema.Index" title="sqlalchemy.schema.Index"><code class="xref py py-class docutils literal"><span class="pre">Index</span></code></a>&#x6784;&#x9020;&#x5141;&#x8BB8;&#x901A;&#x8FC7;<code class="docutils literal"><span class="pre">postgresql_ops</span></code>&#x5173;&#x952E;&#x5B57;&#x53C2;&#x6570;&#x6307;&#x5B9A;&#x8FD9;&#x4E9B;&#x6784;&#x9020;&#xFF1A;</span></p><div class="highlight-python"><div class="highlight"><pre><span></span><span class="n">Index</span><span class="p">(</span><span class="s1">&apos;my_index&apos;</span><span class="p">,</span> <span class="n">my_table</span><span class="o">.</span><span class="n">c</span><span class="o">.</span><span class="n">id</span><span class="p">,</span> <span class="n">my_table</span><span class="o">.</span><span class="n">c</span><span class="o">.</span><span class="n">data</span><span class="p">,</span>
                        <span class="n">postgresql_ops</span><span class="o">=</span><span class="p">{</span>
                            <span class="s1">&apos;data&apos;</span><span class="p">:</span> <span class="s1">&apos;text_pattern_ops&apos;</span><span class="p">,</span>
                            <span class="s1">&apos;id&apos;</span><span class="p">:</span> <span class="s1">&apos;int4_ops&apos;</span>
                        <span class="p">})</span></pre></div></div><div class="versionadded"><p><span class="yiyi-st" id="yiyi-214"><span class="versionmodified">&#x7248;&#x672C;0.7.2&#x4E2D;&#x7684;&#x65B0;&#x529F;&#x80FD;&#xFF1A;</span> <code class="docutils literal"><span class="pre">postgresql_ops</span></code>&#x5173;&#x952E;&#x5B57;&#x53C2;&#x6570;&#x6307;&#x5411;<a class="reference internal" href="core_constraints.html#sqlalchemy.schema.Index" title="sqlalchemy.schema.Index"><code class="xref py py-class docutils literal"><span class="pre">Index</span></code></a>&#x7ED3;&#x6784;&#x3002;</span></p></div><p><span class="yiyi-st" id="yiyi-215">&#x8BF7;&#x6CE8;&#x610F;&#xFF0C;<code class="docutils literal"><span class="pre">postgresql_ops</span></code>&#x5B57;&#x5178;&#x4E2D;&#x7684;&#x952E;&#x662F;<a class="reference internal" href="core_metadata.html#sqlalchemy.schema.Column" title="sqlalchemy.schema.Column"><code class="xref py py-class docutils literal"><span class="pre">Column</span></code></a>&#x7684;&#x201C;&#x952E;&#x201D;&#x540D;&#x79F0;&#xFF0C;&#x5373;&#x7528;&#x4E8E;&#x4ECE;<code class="docutils literal"><span class="pre">.c</span></code>&#x8BBF;&#x95EE;&#x5B83;&#x7684;&#x540D;&#x79F0;<a class="reference internal" href="core_metadata.html#sqlalchemy.schema.Table" title="sqlalchemy.schema.Table"><code class="xref py py-class docutils literal"><span class="pre">Table</span></code></a>&#x7684;&#x96C6;&#x5408;&#xFF0C;&#x53EF;&#x4EE5;&#x5C06;&#x5176;&#x914D;&#x7F6E;&#x4E3A;&#x4E0E;&#x6570;&#x636E;&#x5E93;&#x4E2D;&#x8868;&#x793A;&#x7684;&#x5217;&#x7684;&#x5B9E;&#x9645;&#x540D;&#x79F0;&#x4E0D;&#x540C;&#x3002;</span></p></div><div class="section" id="index-types"><h3><span class="yiyi-st" id="yiyi-216">&#x7D22;&#x5F15;&#x7C7B;&#x578B;<a class="headerlink" href="#index-types" title="Permalink to this headline">&#xB6;</a></span></h3><p><span class="yiyi-st" id="yiyi-217">PostgreSQL&#x63D0;&#x4F9B;&#x4E86;&#x51E0;&#x79CD;&#x7D22;&#x5F15;&#x7C7B;&#x578B;&#xFF1A;B-Tree&#xFF0C;Hash&#xFF0C;GiST&#x548C;GIN&#xFF0C;&#x4EE5;&#x53CA;&#x7528;&#x6237;&#x521B;&#x5EFA;&#x81EA;&#x5DF1;&#x7684;&#x80FD;&#x529B;&#xFF08;&#x53C2;&#x89C1;<a class="reference external" href="http://www.postgresql.org/docs/8.3/static/indexes-types.html">http://www.postgresql.org/docs/8.3/static/indexes -types.html  T0&gt;&#xFF09;&#x3002;</a></span><span class="yiyi-st" id="yiyi-218">&#x53EF;&#x4EE5;&#x4F7F;&#x7528;<code class="docutils literal"><span class="pre">postgresql_using</span></code>&#x5173;&#x952E;&#x5B57;&#x53C2;&#x6570;&#x5728;<a class="reference internal" href="core_constraints.html#sqlalchemy.schema.Index" title="sqlalchemy.schema.Index"><code class="xref py py-class docutils literal"><span class="pre">Index</span></code></a>&#x4E2D;&#x6307;&#x5B9A;&#x8FD9;&#x4E9B;&#x53C2;&#x6570;&#xFF1A;</span></p><div class="highlight-python"><div class="highlight"><pre><span></span><span class="n">Index</span><span class="p">(</span><span class="s1">&apos;my_index&apos;</span><span class="p">,</span> <span class="n">my_table</span><span class="o">.</span><span class="n">c</span><span class="o">.</span><span class="n">data</span><span class="p">,</span> <span class="n">postgresql_using</span><span class="o">=</span><span class="s1">&apos;gin&apos;</span><span class="p">)</span></pre></div></div><p><span class="yiyi-st" id="yiyi-219">The value passed to the keyword argument will be simply passed through to the underlying CREATE INDEX command, so it <em>must</em> be a valid index type for your version of PostgreSQL.</span></p></div><div class="section" id="index-storage-parameters"><h3><span class="yiyi-st" id="yiyi-220">&#x7D22;&#x5F15;&#x5B58;&#x50A8;&#x53C2;&#x6570;<a class="headerlink" href="#index-storage-parameters" title="Permalink to this headline">&#xB6;</a></span></h3><p><span class="yiyi-st" id="yiyi-221">PostgreSQL&#x5141;&#x8BB8;&#x5728;&#x7D22;&#x5F15;&#x4E0A;&#x8BBE;&#x7F6E;&#x5B58;&#x50A8;&#x53C2;&#x6570;&#x3002;</span><span class="yiyi-st" id="yiyi-222">&#x53EF;&#x7528;&#x7684;&#x5B58;&#x50A8;&#x53C2;&#x6570;&#x53D6;&#x51B3;&#x4E8E;&#x7D22;&#x5F15;&#x4F7F;&#x7528;&#x7684;&#x7D22;&#x5F15;&#x65B9;&#x6CD5;&#x3002;</span><span class="yiyi-st" id="yiyi-223">&#x53EF;&#x4EE5;&#x4F7F;&#x7528;<code class="docutils literal"><span class="pre">postgresql_with</span></code>&#x5173;&#x952E;&#x5B57;&#x53C2;&#x6570;&#x5728;<a class="reference internal" href="core_constraints.html#sqlalchemy.schema.Index" title="sqlalchemy.schema.Index"><code class="xref py py-class docutils literal"><span class="pre">Index</span></code></a>&#x4E2D;&#x6307;&#x5B9A;&#x5B58;&#x50A8;&#x53C2;&#x6570;&#xFF1A;</span></p><div class="highlight-python"><div class="highlight"><pre><span></span><span class="n">Index</span><span class="p">(</span><span class="s1">&apos;my_index&apos;</span><span class="p">,</span> <span class="n">my_table</span><span class="o">.</span><span class="n">c</span><span class="o">.</span><span class="n">data</span><span class="p">,</span> <span class="n">postgresql_with</span><span class="o">=</span><span class="p">{</span><span class="s2">&quot;fillfactor&quot;</span><span class="p">:</span> <span class="mi">50</span><span class="p">})</span></pre></div></div><div class="versionadded"><p><span class="yiyi-st" id="yiyi-224"><span class="versionmodified">&#x7248;&#x672C;1.0.6&#x4E2D;&#x7684;&#x65B0;&#x529F;&#x80FD;</span></span></p></div><p><span class="yiyi-st" id="yiyi-225">PostgreSQL&#x5141;&#x8BB8;&#x5B9A;&#x4E49;&#x8981;&#x5728;&#x5176;&#x4E2D;&#x521B;&#x5EFA;&#x7D22;&#x5F15;&#x7684;&#x8868;&#x7A7A;&#x95F4;&#x3002;</span><span class="yiyi-st" id="yiyi-226">&#x53EF;&#x4EE5;&#x4F7F;&#x7528;<code class="docutils literal"><span class="pre">postgresql_tablespace</span></code>&#x5173;&#x952E;&#x5B57;&#x53C2;&#x6570;&#x5728;<a class="reference internal" href="core_constraints.html#sqlalchemy.schema.Index" title="sqlalchemy.schema.Index"><code class="xref py py-class docutils literal"><span class="pre">Index</span></code></a>&#x4E0A;&#x6307;&#x5B9A;&#x8868;&#x7A7A;&#x95F4;&#xFF1A;</span></p><div class="highlight-python"><div class="highlight"><pre><span></span><span class="n">Index</span><span class="p">(</span><span class="s1">&apos;my_index&apos;</span><span class="p">,</span> <span class="n">my_table</span><span class="o">.</span><span class="n">c</span><span class="o">.</span><span class="n">data</span><span class="p">,</span> <span class="n">postgresql_tablespace</span><span class="o">=</span><span class="s1">&apos;my_tablespace&apos;</span><span class="p">)</span></pre></div></div><div class="versionadded"><p><span class="yiyi-st" id="yiyi-227"><span class="versionmodified">&#x7248;&#x672C;1.1&#x4E2D;&#x7684;&#x65B0;&#x529F;&#x80FD;</span></span></p></div><p><span class="yiyi-st" id="yiyi-228">&#x8BF7;&#x6CE8;&#x610F;&#xFF0C;&#x540C;&#x6837;&#x7684;&#x9009;&#x9879;&#x4E5F;&#x53EF;&#x4EE5;&#x5728;<a class="reference internal" href="core_metadata.html#sqlalchemy.schema.Table" title="sqlalchemy.schema.Table"><code class="xref py py-class docutils literal"><span class="pre">Table</span></code></a>&#x4E0A;&#x4F7F;&#x7528;&#x3002;</span></p></div><div class="section" id="indexes-with-concurrently"><h3><span class="yiyi-st" id="yiyi-229">&#x4E0E;&#x5F53;&#x524D;<a class="headerlink" href="#indexes-with-concurrently" title="Permalink to this headline">&#xB6;</a>&#x7684;&#x7D22;&#x5F15;</span></h3><p><span class="yiyi-st" id="yiyi-230">&#x5C06;flag <code class="docutils literal"><span class="pre">postgresql_concurrently</span></code>&#x4F20;&#x9012;&#x7ED9;<a class="reference internal" href="core_constraints.html#sqlalchemy.schema.Index" title="sqlalchemy.schema.Index"><code class="xref py py-class docutils literal"><span class="pre">Index</span></code></a>&#x7ED3;&#x6784;&#x652F;&#x6301;PostgreSQL&#x7D22;&#x5F15;&#x9009;&#x9879;CONCURRENTLY&#xFF1A;</span></p><div class="highlight-python"><div class="highlight"><pre><span></span><span class="n">tbl</span> <span class="o">=</span> <span class="n">Table</span><span class="p">(</span><span class="s1">&apos;testtbl&apos;</span><span class="p">,</span> <span class="n">m</span><span class="p">,</span> <span class="n">Column</span><span class="p">(</span><span class="s1">&apos;data&apos;</span><span class="p">,</span> <span class="n">Integer</span><span class="p">))</span>

<span class="n">idx1</span> <span class="o">=</span> <span class="n">Index</span><span class="p">(</span><span class="s1">&apos;test_idx1&apos;</span><span class="p">,</span> <span class="n">tbl</span><span class="o">.</span><span class="n">c</span><span class="o">.</span><span class="n">data</span><span class="p">,</span> <span class="n">postgresql_concurrently</span><span class="o">=</span><span class="bp">True</span><span class="p">)</span></pre></div></div><p><span class="yiyi-st" id="yiyi-231">&#x5047;&#x8BBE;&#x68C0;&#x6D4B;&#x5230;Postgresql 8.2&#x6216;&#x66F4;&#x9AD8;&#x7248;&#x672C;&#x6216;&#x65E0;&#x8FDE;&#x63A5;&#x65B9;&#x8A00;&#xFF0C;&#x4E0A;&#x8FF0;&#x7D22;&#x5F15;&#x7ED3;&#x6784;&#x5C06;&#x5448;&#x73B0;DDL for CREATE INDEX&#xFF0C;&#x5982;&#x4E0B;&#x6240;&#x793A;&#xFF1A;</span></p><div class="highlight-python"><div class="highlight"><pre><span></span>CREATE INDEX CONCURRENTLY test_idx1 ON testtbl (data)</pre></div></div><p><span class="yiyi-st" id="yiyi-232">&#x5BF9;&#x4E8E;DROP INDEX&#xFF0C;&#x5047;&#x8BBE;&#x68C0;&#x6D4B;&#x5230;Postgresql 9.2&#x6216;&#x66F4;&#x9AD8;&#x7248;&#x672C;&#x6216;&#x8005;&#x65E0;&#x8FDE;&#x63A5;&#x65B9;&#x8A00;&#xFF0C;&#x5B83;&#x5C06;&#x53D1;&#x51FA;&#xFF1A;</span></p><div class="highlight-python"><div class="highlight"><pre><span></span>DROP INDEX CONCURRENTLY test_idx1</pre></div></div><div class="versionadded"><p><span class="yiyi-st" id="yiyi-233"><span class="versionmodified">&#x7248;&#x672C;1.1&#x4E2D;&#x7684;&#x65B0;&#x529F;&#x80FD;&#xFF1A;</span>&#x652F;&#x6301;DROP INDEX&#x4E0A;&#x7684;CONCURRENTLY&#x3002;</span><span class="yiyi-st" id="yiyi-234">&#x5982;&#x679C;&#x5728;&#x8FDE;&#x63A5;&#x4E0A;&#x68C0;&#x6D4B;&#x5230;&#x8DB3;&#x591F;&#x9AD8;&#x7684;Postgresql&#x7248;&#x672C;&#xFF08;&#x6216;&#x65E0;&#x8FDE;&#x63A5;&#x65B9;&#x8A00;&#xFF09;&#xFF0C;&#x5219;&#x53EA;&#x4F1A;&#x53D1;&#x51FA;CONCURRENTLY&#x5173;&#x952E;&#x5B57;&#x3002;</span></p></div></div></div><div class="section" id="postgresql-index-reflection"><h2><span class="yiyi-st" id="yiyi-235">Postgresql&#x7D22;&#x5F15;&#x53CD;&#x5C04;<a class="headerlink" href="#postgresql-index-reflection" title="Permalink to this headline">&#xB6;</a></span></h2><p><span class="yiyi-st" id="yiyi-236">&#x53EA;&#x8981;&#x4F7F;&#x7528;UNIQUE CONSTRAINT&#x6784;&#x9020;&#xFF0C;Postgresql&#x6570;&#x636E;&#x5E93;&#x5C31;&#x4F1A;&#x9690;&#x5F0F;&#x521B;&#x5EFA;&#x4E00;&#x4E2A;UNIQUE INDEX&#x3002;</span><span class="yiyi-st" id="yiyi-237">When inspecting a table using <a class="reference internal" href="core_reflection.html#sqlalchemy.engine.reflection.Inspector" title="sqlalchemy.engine.reflection.Inspector"><code class="xref py py-class docutils literal"><span class="pre">Inspector</span></code></a>, the <a class="reference internal" href="core_reflection.html#sqlalchemy.engine.reflection.Inspector.get_indexes" title="sqlalchemy.engine.reflection.Inspector.get_indexes"><code class="xref py py-meth docutils literal"><span class="pre">Inspector.get_indexes()</span></code></a> and the <a class="reference internal" href="core_reflection.html#sqlalchemy.engine.reflection.Inspector.get_unique_constraints" title="sqlalchemy.engine.reflection.Inspector.get_unique_constraints"><code class="xref py py-meth docutils literal"><span class="pre">Inspector.get_unique_constraints()</span></code></a> will report on these two constructs distinctly; in the case of the index, the key <code class="docutils literal"><span class="pre">duplicates_constraint</span></code> will be present in the index entry if it is detected as mirroring a constraint. </span><span class="yiyi-st" id="yiyi-238">When performing reflection using <code class="docutils literal"><span class="pre">Table(...,</span> <span class="pre">autoload=True)</span></code>, the UNIQUE INDEX is <strong>not</strong> returned in <code class="xref py py-attr docutils literal"><span class="pre">Table.indexes</span></code> when it is detected as mirroring a <a class="reference internal" href="core_constraints.html#sqlalchemy.schema.UniqueConstraint" title="sqlalchemy.schema.UniqueConstraint"><code class="xref py py-class docutils literal"><span class="pre">UniqueConstraint</span></code></a> in the <code class="xref py py-attr docutils literal"><span class="pre">Table.constraints</span></code> collection.</span></p><div class="versionchanged"><p><span class="yiyi-st" id="yiyi-239"><span class="versionmodified">Changed in version 1.0.0: </span>- <a class="reference internal" href="core_metadata.html#sqlalchemy.schema.Table" title="sqlalchemy.schema.Table"><code class="xref py py-class docutils literal"><span class="pre">Table</span></code></a> reflection now includes <a class="reference internal" href="core_constraints.html#sqlalchemy.schema.UniqueConstraint" title="sqlalchemy.schema.UniqueConstraint"><code class="xref py py-class docutils literal"><span class="pre">UniqueConstraint</span></code></a> objects present in the <code class="xref py py-attr docutils literal"><span class="pre">Table.constraints</span></code> collection; the Postgresql backend will no longer include a &#x201C;mirrored&#x201D; <a class="reference internal" href="core_constraints.html#sqlalchemy.schema.Index" title="sqlalchemy.schema.Index"><code class="xref py py-class docutils literal"><span class="pre">Index</span></code></a> construct in <code class="xref py py-attr docutils literal"><span class="pre">Table.indexes</span></code> if it is detected as corresponding to a unique constraint.</span></p></div></div><div class="section" id="special-reflection-options"><h2><span class="yiyi-st" id="yiyi-240">&#x7279;&#x6B8A;&#x53CD;&#x5C04;&#x9009;&#x9879;<a class="headerlink" href="#special-reflection-options" title="Permalink to this headline">&#xB6;</a></span></h2><p><span class="yiyi-st" id="yiyi-241">&#x7528;&#x4E8E;Postgresql&#x540E;&#x7AEF;&#x7684;<a class="reference internal" href="core_reflection.html#sqlalchemy.engine.reflection.Inspector" title="sqlalchemy.engine.reflection.Inspector"><code class="xref py py-class docutils literal"><span class="pre">Inspector</span></code></a>&#x662F;<a class="reference internal" href="#sqlalchemy.dialects.postgresql.base.PGInspector" title="sqlalchemy.dialects.postgresql.base.PGInspector"><code class="xref py py-class docutils literal"><span class="pre">PGInspector</span></code></a>&#x7684;&#x4E00;&#x4E2A;&#x5B9E;&#x4F8B;&#xFF0C;&#x5B83;&#x63D0;&#x4F9B;&#x4E86;&#x5176;&#x4ED6;&#x65B9;&#x6CD5;&#xFF1A;</span></p><div class="highlight-python"><div class="highlight"><pre><span></span><span class="kn">from</span> <span class="nn">sqlalchemy</span> <span class="kn">import</span> <span class="n">create_engine</span><span class="p">,</span> <span class="n">inspect</span>

<span class="n">engine</span> <span class="o">=</span> <span class="n">create_engine</span><span class="p">(</span><span class="s2">&quot;postgresql+psycopg2://localhost/test&quot;</span><span class="p">)</span>
<span class="n">insp</span> <span class="o">=</span> <span class="n">inspect</span><span class="p">(</span><span class="n">engine</span><span class="p">)</span>  <span class="c1"># will be a PGInspector</span>

<span class="k">print</span><span class="p">(</span><span class="n">insp</span><span class="o">.</span><span class="n">get_enums</span><span class="p">())</span></pre></div></div><dl class="class"><dt id="sqlalchemy.dialects.postgresql.base.PGInspector"><span class="yiyi-st" id="yiyi-242"><em class="property">class</em> <code class="descclassname">sqlalchemy.dialects.postgresql.base&#x3002;</code> <code class="descname">PGInspector</code> <span class="sig-paren">&#xFF08;</span> <em>conn</em> <span class="sig-paren">&#xFF09; T5&gt; <a class="headerlink" href="#sqlalchemy.dialects.postgresql.base.PGInspector" title="Permalink to this definition">&#xB6; T6&gt;</a></span></span></dt><dd><p><span class="yiyi-st" id="yiyi-243">&#x57FA;&#x7840;&#xFF1A;<a class="reference internal" href="core_reflection.html#sqlalchemy.engine.reflection.Inspector" title="sqlalchemy.engine.reflection.Inspector"><code class="xref py py-class docutils literal"><span class="pre">sqlalchemy.engine.reflection.Inspector</span></code></a></span></p><dl class="method"><dt id="sqlalchemy.dialects.postgresql.base.PGInspector.get_enums"><span class="yiyi-st" id="yiyi-244"><code class="descname"> get_enums  T0&gt; <span class="sig-paren">&#xFF08; T1&gt; <em>&#x67B6;&#x6784;=&#x65E0; T2&gt; <span class="sig-paren">&#xFF09; T3&gt; <a class="headerlink" href="#sqlalchemy.dialects.postgresql.base.PGInspector.get_enums" title="Permalink to this definition">&#xB6; T4&gt;</a></span></em></span></code></span></dt><dd><p><span class="yiyi-st" id="yiyi-245">&#x8FD4;&#x56DE;ENUM&#x5BF9;&#x8C61;&#x7684;&#x5217;&#x8868;&#x3002;</span></p><p><span class="yiyi-st" id="yiyi-246">&#x6BCF;&#x4E2A;&#x6210;&#x5458;&#x90FD;&#x662F;&#x5305;&#x542B;&#x8FD9;&#x4E9B;&#x5B57;&#x6BB5;&#x7684;&#x5B57;&#x5178;&#xFF1A;</span></p><blockquote><div><ul class="simple"><li><span class="yiyi-st" id="yiyi-247">&#x540D;&#x79F0; - &#x679A;&#x4E3E;&#x7684;&#x540D;&#x79F0;</span></li><li><span class="yiyi-st" id="yiyi-248">&#x6A21;&#x5F0F; - &#x679A;&#x4E3E;&#x7684;&#x6A21;&#x5F0F;&#x540D;&#x79F0;&#x3002;</span></li><li><span class="yiyi-st" id="yiyi-249">visible  - &#x5E03;&#x5C14;&#x503C;&#xFF0C;&#x65E0;&#x8BBA;&#x6B64;&#x679A;&#x4E3E;&#x662F;&#x5426;&#x5728;&#x9ED8;&#x8BA4;&#x641C;&#x7D22;&#x8DEF;&#x5F84;&#x4E2D;&#x53EF;&#x89C1;&#x3002;</span></li><li><span class="yiyi-st" id="yiyi-250">&#x6807;&#x7B7E; - &#x9002;&#x7528;&#x4E8E;&#x679A;&#x4E3E;&#x7684;&#x5B57;&#x7B26;&#x4E32;&#x6807;&#x7B7E;&#x5217;&#x8868;&#x3002;</span></li></ul></div></blockquote><table class="docutils field-list" frame="void" rules="none"><tbody valign="top"><tr class="field-odd field"><th class="field-name"><span class="yiyi-st" id="yiyi-251">&#x53C2;&#x6570;&#xFF1A;</span></th><td class="field-body"><span class="yiyi-st" id="yiyi-252"><span class="target" id="sqlalchemy.dialects.postgresql.base.PGInspector.get_enums.params.schema"></span> <strong>&#x67B6;&#x6784;</strong> <a class="paramlink headerlink reference internal" href="#sqlalchemy.dialects.postgresql.base.PGInspector.get_enums.params.schema">&#xB6;</a>  - &#x67B6;&#x6784;&#x540D;&#x79F0;&#x3002;</span><span class="yiyi-st" id="yiyi-253">&#x5982;&#x679C;&#x6CA1;&#x6709;&#xFF0C;&#x5219;&#x4F7F;&#x7528;&#x9ED8;&#x8BA4;&#x6A21;&#x5F0F;&#xFF08;&#x901A;&#x5E38;&#x662F;&#x201C;&#x516C;&#x5171;&#x201D;&#xFF09;&#x3002;</span><span class="yiyi-st" id="yiyi-254">&#x4E5F;&#x53EF;&#x4EE5;&#x8BBE;&#x7F6E;&#x4E3A;&apos;*&apos;&#x6765;&#x8868;&#x793A;&#x6240;&#x6709;&#x6A21;&#x5F0F;&#x7684;&#x52A0;&#x8F7D;&#x679A;&#x4E3E;&#x3002;</span></td></tr></tbody></table><div class="versionadded"><p><span class="yiyi-st" id="yiyi-255"><span class="versionmodified">&#x7248;&#x672C;1.0.0&#x4E2D;&#x7684;&#x65B0;&#x529F;&#x80FD;</span></span></p></div></dd></dl><dl class="method"><dt id="sqlalchemy.dialects.postgresql.base.PGInspector.get_foreign_table_names"><span class="yiyi-st" id="yiyi-256"><code class="descname"> get_foreign_table_names  T0&gt; <span class="sig-paren">&#xFF08; T1&gt; <em>&#x67B6;&#x6784;=&#x65E0; T2&gt; <span class="sig-paren">&#xFF09; T3&gt; <a class="headerlink" href="#sqlalchemy.dialects.postgresql.base.PGInspector.get_foreign_table_names" title="Permalink to this definition">&#xB6; T4&gt;</a></span></em></span></code></span></dt><dd><p><span class="yiyi-st" id="yiyi-257">&#x8FD4;&#x56DE;FOREIGN TABLE&#x540D;&#x79F0;&#x7684;&#x5217;&#x8868;&#x3002;</span></p><p><span class="yiyi-st" id="yiyi-258">Behavior is similar to that of <a class="reference internal" href="core_reflection.html#sqlalchemy.engine.reflection.Inspector.get_table_names" title="sqlalchemy.engine.reflection.Inspector.get_table_names"><code class="xref py py-meth docutils literal"><span class="pre">Inspector.get_table_names()</span></code></a>, except that the list is limited to those tables tha report a <code class="docutils literal"><span class="pre">relkind</span></code> value of <code class="docutils literal"><span class="pre">f</span></code>.</span></p><div class="versionadded"><p><span class="yiyi-st" id="yiyi-259"><span class="versionmodified">&#x7248;&#x672C;1.0.0&#x4E2D;&#x7684;&#x65B0;&#x529F;&#x80FD;</span></span></p></div></dd></dl><dl class="method"><dt id="sqlalchemy.dialects.postgresql.base.PGInspector.get_table_oid"><span class="yiyi-st" id="yiyi-260"><code class="descname">get_table_oid</code> <span class="sig-paren">&#xFF08;</span> <em>table_name</em>&#xFF0C;<em>schema =&#x65E0;</em> <span class="sig-paren">&#xFF09;</span> <a class="headerlink" href="#sqlalchemy.dialects.postgresql.base.PGInspector.get_table_oid" title="Permalink to this definition"> t5 &gt;</a></span></dt><dd><p><span class="yiyi-st" id="yiyi-261">&#x8FD4;&#x56DE;&#x7ED9;&#x5B9A;&#x8868;&#x540D;&#x79F0;&#x7684;OID&#x3002;</span></p></dd></dl><dl class="method"><dt id="sqlalchemy.dialects.postgresql.base.PGInspector.get_view_names"><span class="yiyi-st" id="yiyi-262"><code class="descname">get_view_names</code> <span class="sig-paren">&#xFF08;</span> <em>schema = None</em>&#xFF0C;<em>include =&#xFF08;&apos;plain&apos;</em>&#xFF0C;<em>&apos;materialized&apos; T4&gt; <span class="sig-paren">&#xFF09; T5&gt; <a class="headerlink" href="#sqlalchemy.dialects.postgresql.base.PGInspector.get_view_names" title="Permalink to this definition">&#xB6; T6&gt;</a></span></em></span></dt><dd><p><span class="yiyi-st" id="yiyi-263">&#x8FD4;&#x56DE;<cite>schema</cite>&#x4E2D;&#x7684;&#x6240;&#x6709;&#x89C6;&#x56FE;&#x540D;&#x79F0;&#x3002;</span></p><table class="docutils field-list" frame="void" rules="none"><tbody valign="top"><tr class="field-odd field"><th class="field-name"><span class="yiyi-st" id="yiyi-264">&#x53C2;&#x6570;&#xFF1A;</span></th><td class="field-body"><ul class="first last simple"><li><span class="yiyi-st" id="yiyi-265"><span class="target" id="sqlalchemy.dialects.postgresql.base.PGInspector.get_view_names.params.schema"></span><strong>schema</strong><a class="paramlink headerlink reference internal" href="#sqlalchemy.dialects.postgresql.base.PGInspector.get_view_names.params.schema">&#xB6;</a> &#x2013; Optional, retrieve names from a non-default schema. </span><span class="yiyi-st" id="yiyi-266">&#x5BF9;&#x4E8E;&#x7279;&#x6B8A;&#x5F15;&#x7528;&#xFF0C;&#x8BF7;&#x4F7F;&#x7528;<a class="reference internal" href="core_sqlelement.html#sqlalchemy.sql.elements.quoted_name" title="sqlalchemy.sql.elements.quoted_name"><code class="xref py py-class docutils literal"><span class="pre">quoted_name</span></code></a>&#x3002;</span></li><li><span class="yiyi-st" id="yiyi-271"><span class="target" id="sqlalchemy.dialects.postgresql.base.PGInspector.get_view_names.params.include"></span> <strong>include</strong> <a class="paramlink headerlink reference internal" href="#sqlalchemy.dialects.postgresql.base.PGInspector.get_view_names.params.include">&#xB6;</a>  - </span><p><span class="yiyi-st" id="yiyi-267">&#x6307;&#x5B9A;&#x8981;&#x8FD4;&#x56DE;&#x54EA;&#x4E9B;&#x7C7B;&#x578B;&#x7684;&#x89C6;&#x56FE;&#x3002;</span><span class="yiyi-st" id="yiyi-268">&#x4F5C;&#x4E3A;&#x5B57;&#x7B26;&#x4E32;&#x503C;&#xFF08;&#x5BF9;&#x4E8E;&#x5355;&#x4E00;&#x7C7B;&#x578B;&#xFF09;&#x6216;&#x5143;&#x7EC4;&#xFF08;&#x5BF9;&#x4E8E;&#x4EFB;&#x610F;&#x6570;&#x91CF;&#x7684;&#x7C7B;&#x578B;&#xFF09;&#x4F20;&#x9012;&#x3002;</span><span class="yiyi-st" id="yiyi-269">&#x9ED8;&#x8BA4;&#x4E3A;<code class="docutils literal"><span class="pre">&#xFF08;&apos;plain&apos;&#xFF0C;</span> <span class="pre">&apos;materialized&apos;&#xFF09;</span></code>&#x3002;</span></p><div class="versionadded"><p><span class="yiyi-st" id="yiyi-270"><span class="versionmodified">&#x7248;&#x672C;1.1&#x4E2D;&#x7684;&#x65B0;&#x529F;&#x80FD;</span></span></p></div></li></ul></td></tr></tbody></table></dd></dl></dd></dl></div><div class="section" id="postgresql-table-options"><h2><span class="yiyi-st" id="yiyi-272">PostgreSQL&#x8868;&#x9009;&#x9879;<a class="headerlink" href="#postgresql-table-options" title="Permalink to this headline">&#xB6;</a></span></h2><p><span class="yiyi-st" id="yiyi-273">PostgreSQL&#x65B9;&#x8A00;&#x7ED3;&#x5408;<a class="reference internal" href="core_metadata.html#sqlalchemy.schema.Table" title="sqlalchemy.schema.Table"><code class="xref py py-class docutils literal"><span class="pre">Table</span></code></a>&#x7ED3;&#x6784;&#x76F4;&#x63A5;&#x652F;&#x6301;CREATE TABLE&#x7684;&#x51E0;&#x4E2A;&#x9009;&#x9879;&#xFF1A;</span></p><ul><li><p class="first"><span class="yiyi-st" id="yiyi-274"><code class="docutils literal"><span class="pre">TABLESPACE</span></code></span></p><div class="highlight-python"><div class="highlight"><pre><span></span><span class="n">Table</span><span class="p">(</span><span class="s2">&quot;some_table&quot;</span><span class="p">,</span> <span class="n">metadata</span><span class="p">,</span> <span class="o">...</span><span class="p">,</span> <span class="n">postgresql_tablespace</span><span class="o">=</span><span class="s1">&apos;some_tablespace&apos;</span><span class="p">)</span></pre></div></div><p><span class="yiyi-st" id="yiyi-275">&#x4E0A;&#x8FF0;&#x9009;&#x9879;&#x4E5F;&#x53EF;&#x7528;&#x4E8E;<a class="reference internal" href="core_constraints.html#sqlalchemy.schema.Index" title="sqlalchemy.schema.Index"><code class="xref py py-class docutils literal"><span class="pre">Index</span></code></a>&#x7ED3;&#x6784;&#x3002;</span></p></li><li><p class="first"><span class="yiyi-st" id="yiyi-276"><code class="docutils literal"><span class="pre">ON</span> <span class="pre">COMMIT</span></code>&#xFF1A;</span></p><div class="highlight-python"><div class="highlight"><pre><span></span><span class="n">Table</span><span class="p">(</span><span class="s2">&quot;some_table&quot;</span><span class="p">,</span> <span class="n">metadata</span><span class="p">,</span> <span class="o">...</span><span class="p">,</span> <span class="n">postgresql_on_commit</span><span class="o">=</span><span class="s1">&apos;PRESERVE ROWS&apos;</span><span class="p">)</span></pre></div></div></li><li><p class="first"><span class="yiyi-st" id="yiyi-277"><code class="docutils literal"><span class="pre">WITH</span> <span class="pre">OIDS</span></code>&#xFF1A;</span></p><div class="highlight-python"><div class="highlight"><pre><span></span><span class="n">Table</span><span class="p">(</span><span class="s2">&quot;some_table&quot;</span><span class="p">,</span> <span class="n">metadata</span><span class="p">,</span> <span class="o">...</span><span class="p">,</span> <span class="n">postgresql_with_oids</span><span class="o">=</span><span class="bp">True</span><span class="p">)</span></pre></div></div></li><li><p class="first"><span class="yiyi-st" id="yiyi-278"><code class="docutils literal"><span class="pre">WITHOUT</span> <span class="pre">OIDS</span></code>&#xFF1A;</span></p><div class="highlight-python"><div class="highlight"><pre><span></span><span class="n">Table</span><span class="p">(</span><span class="s2">&quot;some_table&quot;</span><span class="p">,</span> <span class="n">metadata</span><span class="p">,</span> <span class="o">...</span><span class="p">,</span> <span class="n">postgresql_with_oids</span><span class="o">=</span><span class="bp">False</span><span class="p">)</span></pre></div></div></li><li><p class="first"><span class="yiyi-st" id="yiyi-279"><code class="docutils literal"><span class="pre">INHERITS</span></code></span></p><div class="highlight-python"><div class="highlight"><pre><span></span><span class="n">Table</span><span class="p">(</span><span class="s2">&quot;some_table&quot;</span><span class="p">,</span> <span class="n">metadata</span><span class="p">,</span> <span class="o">...</span><span class="p">,</span> <span class="n">postgresql_inherits</span><span class="o">=</span><span class="s2">&quot;some_supertable&quot;</span><span class="p">)</span>

<span class="n">Table</span><span class="p">(</span><span class="s2">&quot;some_table&quot;</span><span class="p">,</span> <span class="n">metadata</span><span class="p">,</span> <span class="o">...</span><span class="p">,</span> <span class="n">postgresql_inherits</span><span class="o">=</span><span class="p">(</span><span class="s2">&quot;t1&quot;</span><span class="p">,</span> <span class="s2">&quot;t2&quot;</span><span class="p">,</span> <span class="o">...</span><span class="p">))</span></pre></div></div></li></ul><div class="versionadded"><p><span class="yiyi-st" id="yiyi-280"><span class="versionmodified">&#x7248;&#x672C;1.0.0&#x4E2D;&#x7684;&#x65B0;&#x529F;&#x80FD;</span></span></p></div><div class="admonition seealso"><p class="first admonition-title"><span class="yiyi-st" id="yiyi-281">&#x4E5F;&#x53EF;&#x4EE5;&#x770B;&#x770B;</span></p><p class="last"><span class="yiyi-st" id="yiyi-282"><a class="reference external" href="http://www.postgresql.org/docs/current/static/sql-createtable.html">Postgresql CREATE TABLE&#x9009;&#x9879;</a></span></p></div></div><div class="section" id="array-types"><h2><span class="yiyi-st" id="yiyi-283">ARRAY&#x7C7B;&#x578B;<a class="headerlink" href="#array-types" title="Permalink to this headline">&#xB6;</a></span></h2><p><span class="yiyi-st" id="yiyi-284">Postgresql&#x65B9;&#x8A00;&#x652F;&#x6301;&#x6570;&#x7EC4;&#xFF0C;&#x65E2;&#x53EF;&#x4EE5;&#x662F;&#x591A;&#x7EF4;&#x5217;&#x7C7B;&#x578B;&#x4E5F;&#x53EF;&#x4EE5;&#x662F;&#x6570;&#x7EC4;&#x6587;&#x5B57;&#xFF1A;</span></p><ul class="simple"><li><span class="yiyi-st" id="yiyi-285"><a class="reference internal" href="#sqlalchemy.dialects.postgresql.ARRAY" title="sqlalchemy.dialects.postgresql.ARRAY"><code class="xref py py-class docutils literal"><span class="pre">postgresql.ARRAY</span></code></a>  -  ARRAY&#x6570;&#x636E;&#x7C7B;&#x578B;</span></li><li><span class="yiyi-st" id="yiyi-286"><a class="reference internal" href="#sqlalchemy.dialects.postgresql.array" title="sqlalchemy.dialects.postgresql.array"><code class="xref py py-class docutils literal"><span class="pre">postgresql.array</span></code></a>  - &#x6570;&#x7EC4;&#x5B57;&#x9762;&#x91CF;</span></li><li><span class="yiyi-st" id="yiyi-287"><a class="reference internal" href="#sqlalchemy.dialects.postgresql.array_agg" title="sqlalchemy.dialects.postgresql.array_agg"><code class="xref py py-func docutils literal"><span class="pre">postgresql.array_agg()</span></code></a>  -  ARRAY_AGG SQL&#x51FD;&#x6570;</span></li><li><span class="yiyi-st" id="yiyi-288"><a class="reference internal" href="#sqlalchemy.dialects.postgresql.aggregate_order_by" title="sqlalchemy.dialects.postgresql.aggregate_order_by"><code class="xref py py-class docutils literal"><span class="pre">postgresql.aggregate_order_by</span></code></a>  -  PG&#x7684;ORDER BY&#x805A;&#x5408;&#x51FD;&#x6570;&#x8BED;&#x6CD5;&#x7684;&#x52A9;&#x624B;&#x3002;</span></li></ul></div><div class="section" id="json-types"><h2><span class="yiyi-st" id="yiyi-289">JSON&#x7C7B;&#x578B;<a class="headerlink" href="#json-types" title="Permalink to this headline">&#xB6;</a></span></h2><p><span class="yiyi-st" id="yiyi-290">Postgresql&#x65B9;&#x8A00;&#x652F;&#x6301;JSON&#x548C;JSONB&#x6570;&#x636E;&#x7C7B;&#x578B;&#xFF0C;&#x5305;&#x62EC;psycopg2&#x7684;&#x672C;&#x5730;&#x652F;&#x6301;&#x548C;&#x5BF9;Postgresql&#x6240;&#x6709;&#x7279;&#x6B8A;&#x64CD;&#x4F5C;&#x7B26;&#x7684;&#x652F;&#x6301;&#xFF1A;</span></p><ul class="simple"><li><span class="yiyi-st" id="yiyi-291"><a class="reference internal" href="#sqlalchemy.dialects.postgresql.JSON" title="sqlalchemy.dialects.postgresql.JSON"><code class="xref py py-class docutils literal"><span class="pre">postgresql.JSON</span></code></a></span></li><li><span class="yiyi-st" id="yiyi-292"><a class="reference internal" href="#sqlalchemy.dialects.postgresql.JSONB" title="sqlalchemy.dialects.postgresql.JSONB"><code class="xref py py-class docutils literal"><span class="pre">postgresql.JSONB</span></code></a></span></li></ul></div><div class="section" id="hstore-type"><h2><span class="yiyi-st" id="yiyi-293">HSTORE&#x7C7B;&#x578B;<a class="headerlink" href="#hstore-type" title="Permalink to this headline">&#xB6;</a></span></h2><p><span class="yiyi-st" id="yiyi-294">&#x652F;&#x6301;Postgresql HSTORE&#x7C7B;&#x578B;&#x4EE5;&#x53CA;hstore&#x5B57;&#x9762;&#x503C;&#xFF1A;</span></p><ul class="simple"><li><span class="yiyi-st" id="yiyi-295"><a class="reference internal" href="#sqlalchemy.dialects.postgresql.HSTORE" title="sqlalchemy.dialects.postgresql.HSTORE"><code class="xref py py-class docutils literal"><span class="pre">postgresql.HSTORE</span></code></a>  -  HSTORE&#x6570;&#x636E;&#x7C7B;&#x578B;</span></li><li><span class="yiyi-st" id="yiyi-296"><a class="reference internal" href="#sqlalchemy.dialects.postgresql.hstore" title="sqlalchemy.dialects.postgresql.hstore"><code class="xref py py-class docutils literal"><span class="pre">postgresql.hstore</span></code></a>  -  hstore&#x6587;&#x5B57;</span></li></ul></div><div class="section" id="enum-types"><h2><span class="yiyi-st" id="yiyi-297">ENUM&#x7C7B;&#x578B;<a class="headerlink" href="#enum-types" title="Permalink to this headline">&#xB6;</a></span></h2><p><span class="yiyi-st" id="yiyi-298">Postgresql&#x6709;&#x4E00;&#x4E2A;&#x53EF;&#x72EC;&#x7ACB;&#x521B;&#x5EFA;&#x7684;TYPE&#x7ED3;&#x6784;&#xFF0C;&#x7528;&#x4E8E;&#x5B9E;&#x73B0;&#x679A;&#x4E3E;&#x7C7B;&#x578B;&#x3002;</span><span class="yiyi-st" id="yiyi-299">&#x8FD9;&#x79CD;&#x65B9;&#x6CD5;&#x5728;SQLAlchemy&#x65B9;&#x9762;&#x5728;&#x8FD9;&#x79CD;&#x7C7B;&#x578B;&#x5E94;&#x8BE5;&#x662F;CREATED&#x548C;DROPPED&#x7684;&#x65F6;&#x5019;&#x5F15;&#x5165;&#x4E86;&#x5F88;&#x5927;&#x7684;&#x590D;&#x6742;&#x6027;&#x3002;</span><span class="yiyi-st" id="yiyi-300">&#x7C7B;&#x578B;&#x5BF9;&#x8C61;&#x4E5F;&#x662F;&#x4E00;&#x4E2A;&#x53EF;&#x72EC;&#x7ACB;&#x53CD;&#x6620;&#x7684;&#x5B9E;&#x4F53;&#x3002;</span><span class="yiyi-st" id="yiyi-301">&#x5E94;&#x53C2;&#x8003;&#x4EE5;&#x4E0B;&#x90E8;&#x5206;&#xFF1A;</span></p><ul class="simple"><li><span class="yiyi-st" id="yiyi-302"><a class="reference internal" href="#sqlalchemy.dialects.postgresql.ENUM" title="sqlalchemy.dialects.postgresql.ENUM"><code class="xref py py-class docutils literal"><span class="pre">postgresql.ENUM</span></code></a>  -  DDL&#x5E76;&#x8F93;&#x5165;ENUM&#x7684;&#x652F;&#x6301;&#x3002;</span></li><li><span class="yiyi-st" id="yiyi-303"><a class="reference internal" href="#sqlalchemy.dialects.postgresql.base.PGInspector.get_enums" title="sqlalchemy.dialects.postgresql.base.PGInspector.get_enums"><code class="xref py py-meth docutils literal"><span class="pre">PGInspector.get_enums()</span></code></a>  - &#x68C0;&#x7D22;&#x5F53;&#x524D;ENUM&#x7C7B;&#x578B;&#x7684;&#x5217;&#x8868;</span></li><li><span class="yiyi-st" id="yiyi-304"><a class="reference internal" href="#sqlalchemy.dialects.postgresql.ENUM.create" title="sqlalchemy.dialects.postgresql.ENUM.create"><code class="xref py py-meth docutils literal"><span class="pre">postgresql.ENUM.create()</span></code></a> , <a class="reference internal" href="#sqlalchemy.dialects.postgresql.ENUM.drop" title="sqlalchemy.dialects.postgresql.ENUM.drop"><code class="xref py py-meth docutils literal"><span class="pre">postgresql.ENUM.drop()</span></code></a> - individual CREATE and DROP commands for ENUM.</span></li></ul><div class="section" id="using-enum-with-array"><h3><span class="yiyi-st" id="yiyi-305">&#x4F7F;&#x7528;&#x5E26;ARRAY&#x7684;ENUM <a class="headerlink" href="#using-enum-with-array" title="Permalink to this headline">&#xB6;</a></span></h3><p><span class="yiyi-st" id="yiyi-306">ENUM&#x548C;ARRAY&#x7684;&#x7EC4;&#x5408;&#x76EE;&#x524D;&#x4E0D;&#x76F4;&#x63A5;&#x652F;&#x6301;&#x540E;&#x7AEF;DBAPI&#x3002;</span><span class="yiyi-st" id="yiyi-307">&#x4E3A;&#x4E86;&#x53D1;&#x9001;&#x548C;&#x63A5;&#x6536;ENUM&#x7684;ARRAY&#xFF0C;&#x8BF7;&#x4F7F;&#x7528;&#x4EE5;&#x4E0B;&#x89E3;&#x51B3;&#x65B9;&#x6CD5;&#x7C7B;&#x578B;&#xFF1A;</span></p><div class="highlight-python"><div class="highlight"><pre><span></span><span class="k">class</span> <span class="nc">ArrayOfEnum</span><span class="p">(</span><span class="n">ARRAY</span><span class="p">):</span>

    <span class="k">def</span> <span class="nf">bind_expression</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">bindvalue</span><span class="p">):</span>
        <span class="k">return</span> <span class="n">sa</span><span class="o">.</span><span class="n">cast</span><span class="p">(</span><span class="n">bindvalue</span><span class="p">,</span> <span class="bp">self</span><span class="p">)</span>

    <span class="k">def</span> <span class="nf">result_processor</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">dialect</span><span class="p">,</span> <span class="n">coltype</span><span class="p">):</span>
        <span class="n">super_rp</span> <span class="o">=</span> <span class="nb">super</span><span class="p">(</span><span class="n">ArrayOfEnum</span><span class="p">,</span> <span class="bp">self</span><span class="p">)</span><span class="o">.</span><span class="n">result_processor</span><span class="p">(</span>
            <span class="n">dialect</span><span class="p">,</span> <span class="n">coltype</span><span class="p">)</span>

        <span class="k">def</span> <span class="nf">handle_raw_string</span><span class="p">(</span><span class="n">value</span><span class="p">):</span>
            <span class="n">inner</span> <span class="o">=</span> <span class="n">re</span><span class="o">.</span><span class="n">match</span><span class="p">(</span><span class="s2">r&quot;^{(.*)}$&quot;</span><span class="p">,</span> <span class="n">value</span><span class="p">)</span><span class="o">.</span><span class="n">group</span><span class="p">(</span><span class="mi">1</span><span class="p">)</span>
            <span class="k">return</span> <span class="n">inner</span><span class="o">.</span><span class="n">split</span><span class="p">(</span><span class="s2">&quot;,&quot;</span><span class="p">)</span> <span class="k">if</span> <span class="n">inner</span> <span class="k">else</span> <span class="p">[]</span>

        <span class="k">def</span> <span class="nf">process</span><span class="p">(</span><span class="n">value</span><span class="p">):</span>
            <span class="k">if</span> <span class="n">value</span> <span class="ow">is</span> <span class="bp">None</span><span class="p">:</span>
                <span class="k">return</span> <span class="bp">None</span>
            <span class="k">return</span> <span class="n">super_rp</span><span class="p">(</span><span class="n">handle_raw_string</span><span class="p">(</span><span class="n">value</span><span class="p">))</span>
        <span class="k">return</span> <span class="n">process</span></pre></div></div><p><span class="yiyi-st" id="yiyi-308">&#x4F8B;&#x5982;&#x3002;&#xFF1A;</span></p><div class="highlight-python"><div class="highlight"><pre><span></span>Table(
    &apos;mydata&apos;, metadata,
    Column(&apos;id&apos;, Integer, primary_key=True),
    Column(&apos;data&apos;, ArrayOfEnum(ENUM(&apos;a&apos;, &apos;b, &apos;c&apos;, name=&apos;myenum&apos;)))

)</pre></div></div><p><span class="yiyi-st" id="yiyi-309">&#x6B64;&#x7C7B;&#x578B;&#x4E0D;&#x4F5C;&#x4E3A;&#x5185;&#x7F6E;&#x7C7B;&#x578B;&#x5305;&#x542B;&#xFF0C;&#x56E0;&#x4E3A;&#x5B83;&#x5C06;&#x4E0E;&#x7A81;&#x7136;&#x51B3;&#x5B9A;&#x76F4;&#x63A5;&#x5728;&#x65B0;&#x7248;&#x672C;&#x4E2D;&#x652F;&#x6301;ENUM&#x7684;ARRAY&#x7684;DBAPI&#x4E0D;&#x517C;&#x5BB9;&#x3002;</span></p></div></div><div class="section" id="postgresql-data-types"><h2><span class="yiyi-st" id="yiyi-310">PostgreSQL&#x6570;&#x636E;&#x7C7B;&#x578B;<a class="headerlink" href="#postgresql-data-types" title="Permalink to this headline">&#xB6;</a></span></h2><p><span class="yiyi-st" id="yiyi-311">&#x4E0E;&#x6240;&#x6709;SQLAlchemy&#x65B9;&#x8A00;&#x4E00;&#x6837;&#xFF0C;&#x6240;&#x6709;&#x5DF2;&#x77E5;&#x53EF;&#x7528;&#x4E8E;Postgresql&#x7684;&#x5927;&#x5199;&#x7C7B;&#x578B;&#x90FD;&#x53EF;&#x4EE5;&#x4ECE;&#x9876;&#x7EA7;&#x65B9;&#x8A00;&#x5BFC;&#x5165;&#xFF0C;&#x65E0;&#x8BBA;&#x5B83;&#x4EEC;&#x6E90;&#x81EA;<a class="reference internal" href="core_type_basics.html#module-sqlalchemy.types" title="sqlalchemy.types"><code class="xref py py-mod docutils literal"><span class="pre">sqlalchemy.types</span></code></a>&#x8FD8;&#x662F;&#x6765;&#x81EA;&#x672C;&#x5730;&#x65B9;&#x8A00;&#xFF1A;</span></p><div class="highlight-python"><div class="highlight"><pre><span></span><span class="kn">from</span> <span class="nn">sqlalchemy.dialects.postgresql</span> <span class="kn">import</span> \
    <span class="n">ARRAY</span><span class="p">,</span> <span class="n">BIGINT</span><span class="p">,</span> <span class="n">BIT</span><span class="p">,</span> <span class="n">BOOLEAN</span><span class="p">,</span> <span class="n">BYTEA</span><span class="p">,</span> <span class="n">CHAR</span><span class="p">,</span> <span class="n">CIDR</span><span class="p">,</span> <span class="n">DATE</span><span class="p">,</span> \
    <span class="n">DOUBLE_PRECISION</span><span class="p">,</span> <span class="n">ENUM</span><span class="p">,</span> <span class="n">FLOAT</span><span class="p">,</span> <span class="n">HSTORE</span><span class="p">,</span> <span class="n">INET</span><span class="p">,</span> <span class="n">INTEGER</span><span class="p">,</span> \
    <span class="n">INTERVAL</span><span class="p">,</span> <span class="n">JSON</span><span class="p">,</span> <span class="n">JSONB</span><span class="p">,</span> <span class="n">MACADDR</span><span class="p">,</span> <span class="n">NUMERIC</span><span class="p">,</span> <span class="n">OID</span><span class="p">,</span> <span class="n">REAL</span><span class="p">,</span> <span class="n">SMALLINT</span><span class="p">,</span> <span class="n">TEXT</span><span class="p">,</span> \
    <span class="n">TIME</span><span class="p">,</span> <span class="n">TIMESTAMP</span><span class="p">,</span> <span class="n">UUID</span><span class="p">,</span> <span class="n">VARCHAR</span><span class="p">,</span> <span class="n">INT4RANGE</span><span class="p">,</span> <span class="n">INT8RANGE</span><span class="p">,</span> <span class="n">NUMRANGE</span><span class="p">,</span> \
    <span class="n">DATERANGE</span><span class="p">,</span> <span class="n">TSRANGE</span><span class="p">,</span> <span class="n">TSTZRANGE</span><span class="p">,</span> <span class="n">TSVECTOR</span></pre></div></div><p><span class="yiyi-st" id="yiyi-312">&#x7279;&#x5B9A;&#x4E8E;PostgreSQL&#x7684;&#x7C7B;&#x578B;&#xFF0C;&#x6216;&#x5177;&#x6709;&#x7279;&#x5B9A;&#x4E8E;PostgreSQL&#x7684;&#x6784;&#x9020;&#x53C2;&#x6570;&#xFF0C;&#x5982;&#x4E0B;&#x6240;&#x793A;&#xFF1A;</span></p><dl class="class"><dt id="sqlalchemy.dialects.postgresql.aggregate_order_by"><span class="yiyi-st" id="yiyi-313"><em class="property">class</em> <code class="descclassname">sqlalchemy.dialects.postgresql&#x3002;</code> <code class="descname">aggregate_order_by</code> <span class="sig-paren">&#xFF08;</span> <em>target</em>&#xFF0C;<em>order_by  T5&gt; <span class="sig-paren">&#xFF09; T6&gt; <a class="headerlink" href="#sqlalchemy.dialects.postgresql.aggregate_order_by" title="Permalink to this definition">&#xB6; T7&gt;</a></span></em></span></dt><dd><p><span class="yiyi-st" id="yiyi-314">&#x57FA;&#x7840;&#xFF1A;<a class="reference internal" href="core_sqlelement.html#sqlalchemy.sql.expression.ColumnElement" title="sqlalchemy.sql.expression.ColumnElement"><code class="xref py py-class docutils literal"><span class="pre">sqlalchemy.sql.expression.ColumnElement</span></code></a></span></p><p><span class="yiyi-st" id="yiyi-315">&#x7528;&#x8868;&#x8FBE;&#x5F0F;&#x8868;&#x793A;Postgresql&#x805A;&#x5408;&#x987A;&#x5E8F;&#x3002;</span></p><p><span class="yiyi-st" id="yiyi-316">&#x4F8B;&#x5982;&#x3002;&#xFF1A;</span></p><div class="highlight-python"><div class="highlight"><pre><span></span><span class="kn">from</span> <span class="nn">sqlalchemy.dialects.postgresql</span> <span class="kn">import</span> <span class="n">aggregate_order_by</span>
<span class="n">expr</span> <span class="o">=</span> <span class="n">func</span><span class="o">.</span><span class="n">array_agg</span><span class="p">(</span><span class="n">aggregate_order_by</span><span class="p">(</span><span class="n">table</span><span class="o">.</span><span class="n">c</span><span class="o">.</span><span class="n">a</span><span class="p">,</span> <span class="n">table</span><span class="o">.</span><span class="n">c</span><span class="o">.</span><span class="n">b</span><span class="o">.</span><span class="n">desc</span><span class="p">()))</span>
<span class="n">stmt</span> <span class="o">=</span> <span class="n">select</span><span class="p">([</span><span class="n">expr</span><span class="p">])</span></pre></div></div><p><span class="yiyi-st" id="yiyi-317">&#x5C06;&#x4EE3;&#x8868;&#x8868;&#x8FBE;&#x5F0F;&#xFF1A;</span></p><div class="highlight-python"><div class="highlight"><pre><span></span>SELECT array_agg(a ORDER BY b DESC) FROM table;</pre></div></div><p><span class="yiyi-st" id="yiyi-318">&#x540C;&#x7406;&#xFF1A;</span></p><div class="highlight-python"><div class="highlight"><pre><span></span><span class="n">expr</span> <span class="o">=</span> <span class="n">func</span><span class="o">.</span><span class="n">string_agg</span><span class="p">(</span>
    <span class="n">table</span><span class="o">.</span><span class="n">c</span><span class="o">.</span><span class="n">a</span><span class="p">,</span>
    <span class="n">aggregate_order_by</span><span class="p">(</span><span class="n">literal_column</span><span class="p">(</span><span class="s2">&quot;&apos;,&apos;&quot;</span><span class="p">),</span> <span class="n">table</span><span class="o">.</span><span class="n">c</span><span class="o">.</span><span class="n">a</span><span class="p">)</span>
<span class="p">)</span>
<span class="n">stmt</span> <span class="o">=</span> <span class="n">select</span><span class="p">([</span><span class="n">expr</span><span class="p">])</span></pre></div></div><p><span class="yiyi-st" id="yiyi-319">&#x5C06;&#x4EE3;&#x8868;&#xFF1A;</span></p><div class="highlight-python"><div class="highlight"><pre><span></span>SELECT string_agg(a, &apos;,&apos; ORDER BY a) FROM table;</pre></div></div><div class="versionadded"><p><span class="yiyi-st" id="yiyi-320"><span class="versionmodified">&#x7248;&#x672C;1.1&#x4E2D;&#x7684;&#x65B0;&#x529F;&#x80FD;</span></span></p></div><div class="admonition seealso"><p class="first admonition-title"><span class="yiyi-st" id="yiyi-321">&#x4E5F;&#x53EF;&#x4EE5;&#x770B;&#x770B;</span></p><p class="last"><span class="yiyi-st" id="yiyi-322"><a class="reference internal" href="core_functions.html#sqlalchemy.sql.functions.array_agg" title="sqlalchemy.sql.functions.array_agg"><code class="xref py py-class docutils literal"><span class="pre">array_agg</span></code></a></span></p></div></dd></dl><dl class="class"><dt id="sqlalchemy.dialects.postgresql.array"><span class="yiyi-st" id="yiyi-323"> <em class="property">class </em><code class="descclassname">sqlalchemy.dialects.postgresql.</code><code class="descname">array</code><span class="sig-paren">(</span><em>clauses</em>, <em>**kw</em><span class="sig-paren">)</span><a class="headerlink" href="#sqlalchemy.dialects.postgresql.array" title="Permalink to this definition">&#xB6;</a></span></dt><dd><p><span class="yiyi-st" id="yiyi-324">&#x57FA;&#x7840;&#xFF1A;<a class="reference internal" href="core_sqlelement.html#sqlalchemy.sql.expression.Tuple" title="sqlalchemy.sql.expression.Tuple"><code class="xref py py-class docutils literal"><span class="pre">sqlalchemy.sql.expression.Tuple</span></code></a></span></p><p><span class="yiyi-st" id="yiyi-325">Postgresql ARRAY&#x6587;&#x5B57;&#x3002;</span></p><p><span class="yiyi-st" id="yiyi-326">&#x8FD9;&#x7528;&#x4E8E;&#x5728;SQL&#x8868;&#x8FBE;&#x5F0F;&#x4E2D;&#x751F;&#x6210;ARRAY&#x6587;&#x5B57;&#xFF0C;&#x4F8B;&#x5982;&#xFF1A;</span></p><div class="highlight-python"><div class="highlight"><pre><span></span><span class="kn">from</span> <span class="nn">sqlalchemy.dialects.postgresql</span> <span class="kn">import</span> <span class="n">array</span>
<span class="kn">from</span> <span class="nn">sqlalchemy.dialects</span> <span class="kn">import</span> <span class="n">postgresql</span>
<span class="kn">from</span> <span class="nn">sqlalchemy</span> <span class="kn">import</span> <span class="n">select</span><span class="p">,</span> <span class="n">func</span>

<span class="n">stmt</span> <span class="o">=</span> <span class="n">select</span><span class="p">([</span>
                <span class="n">array</span><span class="p">([</span><span class="mi">1</span><span class="p">,</span><span class="mi">2</span><span class="p">])</span> <span class="o">+</span> <span class="n">array</span><span class="p">([</span><span class="mi">3</span><span class="p">,</span><span class="mi">4</span><span class="p">,</span><span class="mi">5</span><span class="p">])</span>
            <span class="p">])</span>

<span class="k">print</span> <span class="n">stmt</span><span class="o">.</span><span class="n">compile</span><span class="p">(</span><span class="n">dialect</span><span class="o">=</span><span class="n">postgresql</span><span class="o">.</span><span class="n">dialect</span><span class="p">())</span></pre></div></div><p><span class="yiyi-st" id="yiyi-327">&#x751F;&#x6210;SQL&#xFF1A;</span></p><div class="highlight-python"><div class="highlight"><pre><span></span>SELECT ARRAY[%(param_1)s, %(param_2)s] ||
    ARRAY[%(param_3)s, %(param_4)s, %(param_5)s]) AS anon_1</pre></div></div><p><span class="yiyi-st" id="yiyi-328"><a class="reference internal" href="#sqlalchemy.dialects.postgresql.array" title="sqlalchemy.dialects.postgresql.array"><code class="xref py py-class docutils literal"><span class="pre">array</span></code></a>&#x7684;&#x5B9E;&#x4F8B;&#x5C06;&#x59CB;&#x7EC8;&#x5177;&#x6709;&#x6570;&#x636E;&#x7C7B;&#x578B;<a class="reference internal" href="#sqlalchemy.dialects.postgresql.ARRAY" title="sqlalchemy.dialects.postgresql.ARRAY"><code class="xref py py-class docutils literal"><span class="pre">ARRAY</span></code></a>&#x3002;</span><span class="yiyi-st" id="yiyi-329">&#x9664;&#x975E;&#x4F20;&#x9012;&#x4E86;<code class="docutils literal"><span class="pre">type_</span></code>&#x5173;&#x952E;&#x5B57;&#x53C2;&#x6570;&#xFF0C;&#x5426;&#x5219;&#x6570;&#x7EC4;&#x7684;&#x201C;&#x5185;&#x90E8;&#x201D;&#x7C7B;&#x578B;&#x5C06;&#x6839;&#x636E;&#x5B58;&#x5728;&#x7684;&#x503C;&#x63A8;&#x65AD;&#x51FA;&#x6765;&#xFF1A;</span></p><div class="highlight-python"><div class="highlight"><pre><span></span><span class="n">array</span><span class="p">([</span><span class="s1">&apos;foo&apos;</span><span class="p">,</span> <span class="s1">&apos;bar&apos;</span><span class="p">],</span> <span class="n">type_</span><span class="o">=</span><span class="n">CHAR</span><span class="p">)</span></pre></div></div><div class="versionadded"><p><span class="yiyi-st" id="yiyi-330"><span class="versionmodified">0.8&#x7248;&#x65B0;&#x589E;&#xFF1A;</span>&#x6DFB;&#x52A0;&#x4E86;<a class="reference internal" href="#sqlalchemy.dialects.postgresql.array" title="sqlalchemy.dialects.postgresql.array"><code class="xref py py-class docutils literal"><span class="pre">array</span></code></a>&#x6587;&#x5B57;&#x7C7B;&#x578B;&#x3002;</span></p></div><p><span class="yiyi-st" id="yiyi-331">&#x4E5F;&#x53EF;&#x4EE5;&#x770B;&#x770B;&#xFF1A;</span></p><p><span class="yiyi-st" id="yiyi-332"><a class="reference internal" href="#sqlalchemy.dialects.postgresql.ARRAY" title="sqlalchemy.dialects.postgresql.ARRAY"><code class="xref py py-class docutils literal"><span class="pre">postgresql.ARRAY</span></code></a></span></p></dd></dl><dl class="class"><dt id="sqlalchemy.dialects.postgresql.ARRAY"><span class="yiyi-st" id="yiyi-333"><em class="property">class</em> <code class="descclassname">sqlalchemy.dialects.postgresql&#x3002;</code> <code class="descname">ARRAY</code> <span class="sig-paren">&#xFF08;</span> <em>item_type</em>&#xFF0C;<em>as_tuple = False</em>&#xFF0C;<em>dimensions = None</em>&#xFF0C;<em>zero_indexes = False</em> <span class="sig-paren">&#xFF09;</span> <a class="headerlink" href="#sqlalchemy.dialects.postgresql.ARRAY" title="Permalink to this definition">&#xB6;</a></span></dt><dd><p><span class="yiyi-st" id="yiyi-334">&#x57FA;&#x7840;&#xFF1A;<code class="xref py py-class docutils literal"><span class="pre">sqlalchemy.sql.expression.SchemaEventTarget</span></code>&#xFF0C;<a class="reference internal" href="core_type_basics.html#sqlalchemy.types.ARRAY" title="sqlalchemy.types.ARRAY"><code class="xref py py-class docutils literal"><span class="pre">sqlalchemy.types.ARRAY</span></code></a></span></p><p><span class="yiyi-st" id="yiyi-335">Postgresql ARRAY&#x7C7B;&#x578B;&#x3002;</span></p><div class="versionchanged"><p><span class="yiyi-st" id="yiyi-336"><span class="versionmodified">&#x7248;&#x672C;1.1&#x4E2D;&#x66F4;&#x6539;&#xFF1A;</span> <a class="reference internal" href="#sqlalchemy.dialects.postgresql.ARRAY" title="sqlalchemy.dialects.postgresql.ARRAY"><code class="xref py py-class docutils literal"><span class="pre">postgresql.ARRAY</span></code></a>&#x7C7B;&#x578B;&#x73B0;&#x5728;&#x662F;&#x6838;&#x5FC3;<a class="reference internal" href="core_type_basics.html#sqlalchemy.types.ARRAY" title="sqlalchemy.types.ARRAY"><code class="xref py py-class docutils literal"><span class="pre">types.ARRAY</span></code></a>&#x7C7B;&#x578B;&#x7684;&#x5B50;&#x7C7B;&#x3002;</span></p></div><p><span class="yiyi-st" id="yiyi-337"><a class="reference internal" href="#sqlalchemy.dialects.postgresql.ARRAY" title="sqlalchemy.dialects.postgresql.ARRAY"><code class="xref py py-class docutils literal"><span class="pre">postgresql.ARRAY</span></code></a>&#x7C7B;&#x578B;&#x7684;&#x6784;&#x9020;&#x65B9;&#x5F0F;&#x4E0E;&#x6838;&#x5FC3;<a class="reference internal" href="core_type_basics.html#sqlalchemy.types.ARRAY" title="sqlalchemy.types.ARRAY"><code class="xref py py-class docutils literal"><span class="pre">types.ARRAY</span></code></a>&#x7C7B;&#x578B;&#xFF1B;&#x4E00;&#x4E2A;&#x6210;&#x5458;&#x7C7B;&#x578B;&#x662F;&#x5FC5;&#x9700;&#x7684;&#xFF0C;&#x5E76;&#x4E14;&#x5982;&#x679C;&#x8BE5;&#x7C7B;&#x578B;&#x8981;&#x7528;&#x4E8E;&#x591A;&#x4E2A;&#x7EF4;&#x5EA6;&#xFF0C;&#x5219;&#x5EFA;&#x8BAE;&#x4F7F;&#x7528;&#x591A;&#x4E2A;&#x7EF4;&#x5EA6;&#xFF1A;</span></p><div class="highlight-python"><div class="highlight"><pre><span></span><span class="kn">from</span> <span class="nn">sqlalchemy.dialects</span> <span class="kn">import</span> <span class="n">postgresql</span>

<span class="n">mytable</span> <span class="o">=</span> <span class="n">Table</span><span class="p">(</span><span class="s2">&quot;mytable&quot;</span><span class="p">,</span> <span class="n">metadata</span><span class="p">,</span>
        <span class="n">Column</span><span class="p">(</span><span class="s2">&quot;data&quot;</span><span class="p">,</span> <span class="n">postgresql</span><span class="o">.</span><span class="n">ARRAY</span><span class="p">(</span><span class="n">Integer</span><span class="p">,</span> <span class="n">dimensions</span><span class="o">=</span><span class="mi">2</span><span class="p">))</span>
    <span class="p">)</span></pre></div></div><p><span class="yiyi-st" id="yiyi-338"><a class="reference internal" href="#sqlalchemy.dialects.postgresql.ARRAY" title="sqlalchemy.dialects.postgresql.ARRAY"><code class="xref py py-class docutils literal"><span class="pre">postgresql.ARRAY</span></code></a>&#x7C7B;&#x578B;&#x63D0;&#x4F9B;&#x5728;&#x6838;&#x5FC3;<a class="reference internal" href="core_type_basics.html#sqlalchemy.types.ARRAY" title="sqlalchemy.types.ARRAY"><code class="xref py py-class docutils literal"><span class="pre">types.ARRAY</span></code></a>&#x7C7B;&#x578B;&#x4E0A;&#x5B9A;&#x4E49;&#x7684;&#x6240;&#x6709;&#x64CD;&#x4F5C;&#xFF0C;&#x5305;&#x62EC;&#x5BF9;&#x201C;&#x7EF4;&#x5EA6;&#x201D;&#xFF0C;&#x7D22;&#x5F15;&#x8BBF;&#x95EE;&#x548C;&#x7B80;&#x5355;&#x5339;&#x914D;&#xFF08;&#x5982;<a class="reference internal" href="core_type_basics.html#sqlalchemy.types.ARRAY.Comparator.any" title="sqlalchemy.types.ARRAY.Comparator.any"><code class="xref py py-meth docutils literal"><span class="pre">types.ARRAY.Comparator.any()</span></code></a>&#x548C;<a class="reference internal" href="core_type_basics.html#sqlalchemy.types.ARRAY.Comparator.all" title="sqlalchemy.types.ARRAY.Comparator.all"><code class="xref py py-meth docutils literal"><span class="pre">types.ARRAY.Comparator.all()</span></code></a>&#x3002;</span><span class="yiyi-st" id="yiyi-339"><a class="reference internal" href="#sqlalchemy.dialects.postgresql.ARRAY" title="sqlalchemy.dialects.postgresql.ARRAY"><code class="xref py py-class docutils literal"><span class="pre">postgresql.ARRAY</span></code></a> class also provides PostgreSQL-specific methods for containment operations, including <a class="reference internal" href="#sqlalchemy.dialects.postgresql.ARRAY.Comparator.contains" title="sqlalchemy.dialects.postgresql.ARRAY.Comparator.contains"><code class="xref py py-meth docutils literal"><span class="pre">postgresql.ARRAY.Comparator.contains()</span></code></a> <a class="reference internal" href="#sqlalchemy.dialects.postgresql.ARRAY.Comparator.contained_by" title="sqlalchemy.dialects.postgresql.ARRAY.Comparator.contained_by"><code class="xref py py-meth docutils literal"><span class="pre">postgresql.ARRAY.Comparator.contained_by()</span></code></a>, and <a class="reference internal" href="#sqlalchemy.dialects.postgresql.ARRAY.Comparator.overlap" title="sqlalchemy.dialects.postgresql.ARRAY.Comparator.overlap"><code class="xref py py-meth docutils literal"><span class="pre">postgresql.ARRAY.Comparator.overlap()</span></code></a>, e.g.:</span></p><div class="highlight-python"><div class="highlight"><pre><span></span><span class="n">mytable</span><span class="o">.</span><span class="n">c</span><span class="o">.</span><span class="n">data</span><span class="o">.</span><span class="n">contains</span><span class="p">([</span><span class="mi">1</span><span class="p">,</span> <span class="mi">2</span><span class="p">])</span></pre></div></div><p><span class="yiyi-st" id="yiyi-340">&#x6240;&#x6709;PostgreSQL DBAPI&#x53EF;&#x80FD;&#x4E0D;&#x652F;&#x6301;<a class="reference internal" href="#sqlalchemy.dialects.postgresql.ARRAY" title="sqlalchemy.dialects.postgresql.ARRAY"><code class="xref py py-class docutils literal"><span class="pre">postgresql.ARRAY</span></code></a>&#x7C7B;&#x578B;&#xFF1B;&#x76EE;&#x524D;&#x5DF2;&#x77E5;&#x53EA;&#x80FD;&#x5728;psycopg2&#x4E0A;&#x5DE5;&#x4F5C;&#x3002;</span></p><p><span class="yiyi-st" id="yiyi-341">&#x6B64;&#x5916;&#xFF0C;<a class="reference internal" href="#sqlalchemy.dialects.postgresql.ARRAY" title="sqlalchemy.dialects.postgresql.ARRAY"><code class="xref py py-class docutils literal"><span class="pre">postgresql.ARRAY</span></code></a>&#x7C7B;&#x578B;&#x4E0D;&#x80FD;&#x76F4;&#x63A5;&#x4E0E;<a class="reference internal" href="#sqlalchemy.dialects.postgresql.ENUM" title="sqlalchemy.dialects.postgresql.ENUM"><code class="xref py py-class docutils literal"><span class="pre">ENUM</span></code></a>&#x7C7B;&#x578B;&#x7ED3;&#x5408;&#x4F7F;&#x7528;&#x3002;</span><span class="yiyi-st" id="yiyi-342">&#x6709;&#x5173;&#x89E3;&#x51B3;&#x65B9;&#x6CD5;&#xFF0C;&#x8BF7;&#x53C2;&#x9605;<a class="reference internal" href="#postgresql-array-of-enum"><span>Using ENUM with ARRAY</span></a>&#x4E2D;&#x7684;&#x7279;&#x6B8A;&#x7C7B;&#x578B;&#x3002;</span></p><div class="admonition seealso"><p class="first admonition-title"><span class="yiyi-st" id="yiyi-343">&#x4E5F;&#x53EF;&#x4EE5;&#x770B;&#x770B;</span></p><p><span class="yiyi-st" id="yiyi-344"><a class="reference internal" href="core_type_basics.html#sqlalchemy.types.ARRAY" title="sqlalchemy.types.ARRAY"><code class="xref py py-class docutils literal"><span class="pre">types.ARRAY</span></code></a>  - &#x57FA;&#x672C;&#x6570;&#x7EC4;&#x7C7B;&#x578B;</span></p><p class="last"><span class="yiyi-st" id="yiyi-345"><a class="reference internal" href="#sqlalchemy.dialects.postgresql.array" title="sqlalchemy.dialects.postgresql.array"><code class="xref py py-class docutils literal"><span class="pre">postgresql.array</span></code></a>  - &#x4EA7;&#x751F;&#x4E00;&#x4E2A;&#x6587;&#x5B57;&#x6570;&#x7EC4;&#x503C;&#x3002;</span></p></div><dl class="class"><dt id="sqlalchemy.dialects.postgresql.ARRAY.Comparator"><span class="yiyi-st" id="yiyi-346"><em class="property">class</em> <code class="descname">&#x6BD4;&#x8F83;&#x5668;</code> <span class="sig-paren">&#xFF08;</span> <em>expr</em> <span class="sig-paren">&#xFF09;</span> <a class="headerlink" href="#sqlalchemy.dialects.postgresql.ARRAY.Comparator" title="Permalink to this definition">&#xB6;</a></span></dt><dd><p><span class="yiyi-st" id="yiyi-347">&#x57FA;&#x7840;&#xFF1A;<code class="xref py py-class docutils literal"><span class="pre">sqlalchemy.types.Comparator</span></code></span></p><p><span class="yiyi-st" id="yiyi-348">&#x5B9A;&#x4E49;<a class="reference internal" href="#sqlalchemy.dialects.postgresql.ARRAY" title="sqlalchemy.dialects.postgresql.ARRAY"><code class="xref py py-class docutils literal"><span class="pre">ARRAY</span></code></a>&#x7684;&#x6BD4;&#x8F83;&#x64CD;&#x4F5C;&#x3002;</span></p><p><span class="yiyi-st" id="yiyi-349">&#x8BF7;&#x6CE8;&#x610F;&#xFF0C;&#x8FD9;&#x4E9B;&#x64CD;&#x4F5C;&#x9664;&#x4E86;&#x57FA;&#x7C7B;<a class="reference internal" href="core_type_basics.html#sqlalchemy.types.ARRAY.Comparator" title="sqlalchemy.types.ARRAY.Comparator"><code class="xref py py-class docutils literal"><span class="pre">types.ARRAY.Comparator</span></code></a>&#x7C7B;&#x63D0;&#x4F9B;&#x7684;&#x64CD;&#x4F5C;&#x5916;&#xFF0C;&#x8FD8;&#x5305;&#x62EC;<a class="reference internal" href="core_type_basics.html#sqlalchemy.types.ARRAY.Comparator.any" title="sqlalchemy.types.ARRAY.Comparator.any"><code class="xref py py-meth docutils literal"><span class="pre">types.ARRAY.Comparator.any()</span></code></a>&#x548C;<a class="reference internal" href="core_type_basics.html#sqlalchemy.types.ARRAY.Comparator.all" title="sqlalchemy.types.ARRAY.Comparator.all"><code class="xref py py-meth docutils literal"><span class="pre">types.ARRAY.Comparator.all()</span></code></a></span></p><dl class="method"><dt id="sqlalchemy.dialects.postgresql.ARRAY.Comparator.contained_by"><span class="yiyi-st" id="yiyi-350"><code class="descname"> contained_by  T0&gt; <span class="sig-paren">&#xFF08; T1&gt; <em>&#x5176;&#x4ED6; T2&gt; <span class="sig-paren">&#xFF09; T3&gt; <a class="headerlink" href="#sqlalchemy.dialects.postgresql.ARRAY.Comparator.contained_by" title="Permalink to this definition">&#xB6; T4&gt;</a></span></em></span></code></span></dt><dd><p><span class="yiyi-st" id="yiyi-351">&#x5E03;&#x5C14;&#x8868;&#x8FBE;&#x5F0F;&#x3002;</span><span class="yiyi-st" id="yiyi-352">&#x6D4B;&#x8BD5;&#x5143;&#x7D20;&#x662F;&#x5426;&#x662F;&#x53C2;&#x6570;&#x6570;&#x7EC4;&#x8868;&#x8FBE;&#x5F0F;&#x5143;&#x7D20;&#x7684;&#x9002;&#x5F53;&#x5B50;&#x96C6;&#x3002;</span></p></dd></dl><dl class="method"><dt id="sqlalchemy.dialects.postgresql.ARRAY.Comparator.contains"><span class="yiyi-st" id="yiyi-353"><code class="descname">&#x5305;&#x542B;</code> <span class="sig-paren">&#xFF08;</span> <em>&#x5176;&#x4ED6;</em>&#xFF0C;<em>** kwargs</em> <span class="sig-paren">&#xFF09;</span> <a class="headerlink" href="#sqlalchemy.dialects.postgresql.ARRAY.Comparator.contains" title="Permalink to this definition"></a> &gt;</span></dt><dd><p><span class="yiyi-st" id="yiyi-354">&#x5E03;&#x5C14;&#x8868;&#x8FBE;&#x5F0F;&#x3002;</span><span class="yiyi-st" id="yiyi-355">&#x6D4B;&#x8BD5;&#x5143;&#x7D20;&#x662F;&#x5426;&#x662F;&#x53C2;&#x6570;&#x6570;&#x7EC4;&#x8868;&#x8FBE;&#x5F0F;&#x5143;&#x7D20;&#x7684;&#x8D85;&#x96C6;&#x3002;</span></p></dd></dl><dl class="method"><dt id="sqlalchemy.dialects.postgresql.ARRAY.Comparator.overlap"><span class="yiyi-st" id="yiyi-356"><code class="descname">&#x91CD;&#x53E0; T0&gt; <span class="sig-paren">&#xFF08; T1&gt; <em>&#x5176;&#x4ED6; T2&gt; <span class="sig-paren">&#xFF09; T3&gt; <a class="headerlink" href="#sqlalchemy.dialects.postgresql.ARRAY.Comparator.overlap" title="Permalink to this definition">&#xB6; T4&gt;</a></span></em></span></code></span></dt><dd><p><span class="yiyi-st" id="yiyi-357">&#x5E03;&#x5C14;&#x8868;&#x8FBE;&#x5F0F;&#x3002;</span><span class="yiyi-st" id="yiyi-358">&#x6D4B;&#x8BD5;&#x6570;&#x7EC4;&#x662F;&#x5426;&#x5177;&#x6709;&#x4E0E;&#x53C2;&#x6570;&#x6570;&#x7EC4;&#x8868;&#x8FBE;&#x5F0F;&#x76F8;&#x540C;&#x7684;&#x5143;&#x7D20;&#x3002;</span></p></dd></dl></dd></dl><dl class="method"><dt id="sqlalchemy.dialects.postgresql.ARRAY.__init__"><span class="yiyi-st" id="yiyi-359"><code class="descclassname">ARRAY  tt&gt; <code class="descname">__ init __</code> <span class="sig-paren">&#xFF08;</span> <em>item_type</em>&#xFF0C;<em>as_tuple = False</em>&#xFF0C;<em>dimensions =&#x65E0;</em>&#xFF0C;<em>zero_indexes = False <span class="sig-paren">&#xFF09;</span> <a class="headerlink" href="#sqlalchemy.dialects.postgresql.ARRAY.__init__" title="Permalink to this definition">&#xB6;</a></em></code></span></dt><dd><p><span class="yiyi-st" id="yiyi-360">&#x6784;&#x5EFA;&#x4E00;&#x4E2A;ARRAY&#x3002;</span></p><p><span class="yiyi-st" id="yiyi-361">&#x4F8B;&#x5982;&#x3002;&#xFF1A;</span></p><div class="highlight-python"><div class="highlight"><pre><span></span><span class="n">Column</span><span class="p">(</span><span class="s1">&apos;myarray&apos;</span><span class="p">,</span> <span class="n">ARRAY</span><span class="p">(</span><span class="n">Integer</span><span class="p">))</span></pre></div></div><p><span class="yiyi-st" id="yiyi-362">&#x53C2;&#x6570;&#x662F;&#xFF1A;</span></p><table class="docutils field-list" frame="void" rules="none"><tbody valign="top"><tr class="field-odd field"><th class="field-name"><span class="yiyi-st" id="yiyi-363">&#x53C2;&#x6570;&#xFF1A;</span></th><td class="field-body"><ul class="first last simple"><li><span class="yiyi-st" id="yiyi-364"><span class="target" id="sqlalchemy.dialects.postgresql.ARRAY.params.item_type"></span> <strong>item_type</strong> <a class="paramlink headerlink reference internal" href="#sqlalchemy.dialects.postgresql.ARRAY.params.item_type">&#xB6;</a>  - &#x6B64;&#x6570;&#x7EC4;&#x9879;&#x76EE;&#x7684;&#x6570;&#x636E;&#x7C7B;&#x578B;&#x3002;</span><span class="yiyi-st" id="yiyi-365">&#x8BF7;&#x6CE8;&#x610F;&#xFF0C;&#x8FD9;&#x91CC;&#x7684;&#x7EF4;&#x6570;&#x662F;&#x4E0D;&#x76F8;&#x5173;&#x7684;&#xFF0C;&#x6240;&#x4EE5;&#x50CF;<code class="docutils literal"><span class="pre">INTEGER[][]</span></code>&#x8FD9;&#x6837;&#x7684;&#x591A;&#x7EF4;&#x6570;&#x7EC4;&#x88AB;&#x6784;&#x9020;&#x4E3A;<code class="docutils literal"><span class="pre">ARRAY(Integer)</span></code>&#xFF0C;&#x800C;&#x4E0D;&#x662F;<code class="docutils literal"><span class="pre">ARRAY(ARRAY(Integer))</span></code>&#x7B49;&#x7B49;&#x3002;</span></li><li><span class="yiyi-st" id="yiyi-366"><span class="target" id="sqlalchemy.dialects.postgresql.ARRAY.params.as_tuple"></span> <strong>as_tuple = False</strong> <a class="paramlink headerlink reference internal" href="#sqlalchemy.dialects.postgresql.ARRAY.params.as_tuple">&#xB6;</a>  - &#x6307;&#x5B9A;&#x8FD4;&#x56DE;&#x7ED3;&#x679C;&#x662F;&#x5426;&#x5E94;&#x8BE5;&#x4ECE;&#x5217;&#x8868;&#x8F6C;&#x6362;&#x4E3A;&#x5143;&#x7EC4;&#x3002;</span><span class="yiyi-st" id="yiyi-367">&#x8BF8;&#x5982;psycopg2&#x7684;DBAPI&#x9ED8;&#x8BA4;&#x8FD4;&#x56DE;&#x5217;&#x8868;&#x3002;</span><span class="yiyi-st" id="yiyi-368">&#x5F53;&#x5143;&#x7EC4;&#x8FD4;&#x56DE;&#x65F6;&#xFF0C;&#x7ED3;&#x679C;&#x662F;&#x53EF;&#x6563;&#x5217;&#x7684;&#x3002;</span></li><li><span class="yiyi-st" id="yiyi-369"><span class="target" id="sqlalchemy.dialects.postgresql.ARRAY.params.dimensions"></span><strong>dimensions</strong><a class="paramlink headerlink reference internal" href="#sqlalchemy.dialects.postgresql.ARRAY.params.dimensions">&#xB6;</a> &#x2013; if non-None, the ARRAY will assume a fixed number of dimensions. </span><span class="yiyi-st" id="yiyi-370">&#x8FD9;&#x5C06;&#x5BFC;&#x81F4;&#x4E3A;&#x6B64;ARRAY&#x53D1;&#x51FA;&#x7684;DDL&#x5305;&#x542B;&#x786E;&#x5207;&#x6570;&#x91CF;&#x7684;&#x62EC;&#x53F7;&#x5B50;&#x53E5;<code class="docutils literal"><span class="pre">[]</span></code>&#xFF0C;&#x5E76;&#x4E14;&#x8FD8;&#x4F1A;&#x4F18;&#x5316;&#x6574;&#x4F53;&#x7C7B;&#x578B;&#x7684;&#x6027;&#x80FD;&#x3002;</span><span class="yiyi-st" id="yiyi-371">&#x8BF7;&#x6CE8;&#x610F;&#xFF0C;PG&#x6570;&#x7EC4;&#x603B;&#x662F;&#x9690;&#x542B;&#x7684;&#x201C;&#x65E0;&#x91CF;&#x7EB2;&#x201D;&#xFF0C;&#x8FD9;&#x610F;&#x5473;&#x7740;&#x65E0;&#x8BBA;&#x5B83;&#x4EEC;&#x5982;&#x4F55;&#x58F0;&#x660E;&#xFF0C;&#x5B83;&#x4EEC;&#x90FD;&#x53EF;&#x4EE5;&#x5B58;&#x50A8;&#x4EFB;&#x610F;&#x6570;&#x91CF;&#x7684;&#x7EF4;&#x5EA6;&#x3002;</span></li><li><span class="yiyi-st" id="yiyi-374"><span class="target" id="sqlalchemy.dialects.postgresql.ARRAY.params.zero_indexes"></span> <strong>zero_indexes = False</strong> <a class="paramlink headerlink reference internal" href="#sqlalchemy.dialects.postgresql.ARRAY.params.zero_indexes">&#xB6;</a>  - </span><p><span class="yiyi-st" id="yiyi-372">&#x5F53;&#x4E3A;True&#x65F6;&#xFF0C;&#x7D22;&#x5F15;&#x503C;&#x5C06;&#x5728;&#x57FA;&#x4E8E;Python&#x7684;&#x96F6;&#x548C;&#x57FA;&#x4E8E;Postgresql one&#x7684;&#x7D22;&#x5F15;&#x4E4B;&#x95F4;&#x8F6C;&#x6362;&#x3002;&#x5728;&#x4F20;&#x9012;&#x7ED9;&#x6570;&#x636E;&#x5E93;&#x4E4B;&#x524D;&#xFF0C;&#x5C06;&#x5728;&#x6240;&#x6709;&#x7D22;&#x5F15;&#x503C;&#x4E2D;&#x6DFB;&#x52A0;&#x4E00;&#x4E2A;&#x503C;&#x3002;</span></p><div class="versionadded"><p><span class="yiyi-st" id="yiyi-373"><span class="versionmodified">&#x7248;&#x672C;0.9.5&#x4E2D;&#x7684;&#x65B0;&#x529F;&#x80FD;</span></span></p></div></li></ul></td></tr></tbody></table></dd></dl></dd></dl><dl class="function"><dt id="sqlalchemy.dialects.postgresql.array_agg"><span class="yiyi-st" id="yiyi-375"> <code class="descclassname">sqlalchemy.dialects.postgresql.</code><code class="descname">array_agg</code><span class="sig-paren">(</span><em>*arg</em>, <em>**kw</em><span class="sig-paren">)</span><a class="headerlink" href="#sqlalchemy.dialects.postgresql.array_agg" title="Permalink to this definition">&#xB6;</a></span></dt><dd><p><span class="yiyi-st" id="yiyi-376">&#x786E;&#x4FDD;&#x8FD4;&#x56DE;&#x7C7B;&#x578B;&#x662F;<a class="reference internal" href="#sqlalchemy.dialects.postgresql.ARRAY" title="sqlalchemy.dialects.postgresql.ARRAY"><code class="xref py py-class docutils literal"><span class="pre">postgresql.ARRAY</span></code></a>&#xFF0C;&#x800C;&#x4E0D;&#x662F;&#x666E;&#x901A;&#x7684;<a class="reference internal" href="core_type_basics.html#sqlalchemy.types.ARRAY" title="sqlalchemy.types.ARRAY"><code class="xref py py-class docutils literal"><span class="pre">types.ARRAY</span></code></a>&#x7C7B;&#x578B;&#x7684;<a class="reference internal" href="core_functions.html#sqlalchemy.sql.functions.array_agg" title="sqlalchemy.sql.functions.array_agg"><code class="xref py py-class docutils literal"><span class="pre">array_agg</span></code></a>&#x7684;Postgresql&#x7279;&#x5B9A;&#x5F62;&#x5F0F;&#x3002;</span></p><div class="versionadded"><p><span class="yiyi-st" id="yiyi-377"><span class="versionmodified">&#x7248;&#x672C;1.1&#x4E2D;&#x7684;&#x65B0;&#x529F;&#x80FD;</span></span></p></div></dd></dl><dl class="function"><dt id="sqlalchemy.dialects.postgresql.Any"><span class="yiyi-st" id="yiyi-378"> <code class="descclassname">sqlalchemy.dialects.postgresql.</code><code class="descname">Any</code><span class="sig-paren">(</span><em>other</em>, <em>arrexpr</em>, <em>operator=&lt;built-in function eq&gt;</em><span class="sig-paren">)</span><a class="headerlink" href="#sqlalchemy.dialects.postgresql.Any" title="Permalink to this definition">&#xB6;</a></span></dt><dd><p><span class="yiyi-st" id="yiyi-379"><a class="reference internal" href="core_type_basics.html#sqlalchemy.types.ARRAY.Comparator.any" title="sqlalchemy.types.ARRAY.Comparator.any"><code class="xref py py-meth docutils literal"><span class="pre">ARRAY.Comparator.any()</span></code></a>&#x65B9;&#x6CD5;&#x7684;&#x540C;&#x4E49;&#x8BCD;&#x3002;</span></p><p><span class="yiyi-st" id="yiyi-380">&#x8FD9;&#x79CD;&#x65B9;&#x6CD5;&#x662F;&#x9057;&#x7559;&#x7684;&#xFF0C;&#x5728;&#x8FD9;&#x91CC;&#x662F;&#x4E3A;&#x4E86;&#x5411;&#x540E;&#x517C;&#x5BB9;&#x3002;</span></p><div class="admonition seealso"><p class="first admonition-title"><span class="yiyi-st" id="yiyi-381">&#x4E5F;&#x53EF;&#x4EE5;&#x770B;&#x770B;</span></p><p class="last"><span class="yiyi-st" id="yiyi-382"><a class="reference internal" href="core_sqlelement.html#sqlalchemy.sql.expression.any_" title="sqlalchemy.sql.expression.any_"><code class="xref py py-func docutils literal"><span class="pre">expression.any_()</span></code></a></span></p></div></dd></dl><dl class="function"><dt id="sqlalchemy.dialects.postgresql.All"><span class="yiyi-st" id="yiyi-383"> <code class="descclassname">sqlalchemy.dialects.postgresql.</code><code class="descname">All</code><span class="sig-paren">(</span><em>other</em>, <em>arrexpr</em>, <em>operator=&lt;built-in function eq&gt;</em><span class="sig-paren">)</span><a class="headerlink" href="#sqlalchemy.dialects.postgresql.All" title="Permalink to this definition">&#xB6;</a></span></dt><dd><p><span class="yiyi-st" id="yiyi-384"><a class="reference internal" href="core_type_basics.html#sqlalchemy.types.ARRAY.Comparator.all" title="sqlalchemy.types.ARRAY.Comparator.all"><code class="xref py py-meth docutils literal"><span class="pre">ARRAY.Comparator.all()</span></code></a>&#x65B9;&#x6CD5;&#x7684;&#x540C;&#x4E49;&#x8BCD;&#x3002;</span></p><p><span class="yiyi-st" id="yiyi-385">&#x8FD9;&#x79CD;&#x65B9;&#x6CD5;&#x662F;&#x9057;&#x7559;&#x7684;&#xFF0C;&#x5728;&#x8FD9;&#x91CC;&#x662F;&#x4E3A;&#x4E86;&#x5411;&#x540E;&#x517C;&#x5BB9;&#x3002;</span></p><div class="admonition seealso"><p class="first admonition-title"><span class="yiyi-st" id="yiyi-386">&#x4E5F;&#x53EF;&#x4EE5;&#x770B;&#x770B;</span></p><p class="last"><span class="yiyi-st" id="yiyi-387"><a class="reference internal" href="core_sqlelement.html#sqlalchemy.sql.expression.all_" title="sqlalchemy.sql.expression.all_"><code class="xref py py-func docutils literal"><span class="pre">expression.all_()</span></code></a></span></p></div></dd></dl><dl class="class"><dt id="sqlalchemy.dialects.postgresql.BIT"><span class="yiyi-st" id="yiyi-388"><em class="property">class</em> <code class="descclassname">sqlalchemy.dialects.postgresql&#x3002;</code> <code class="descname">BIT</code> <span class="sig-paren">&#xFF08;</span> <em>length = None</em>&#xFF0C;<em>&#x53D8;&#x5316;=&#x5047; T5&gt; <span class="sig-paren">&#xFF09; T6&gt; <a class="headerlink" href="#sqlalchemy.dialects.postgresql.BIT" title="Permalink to this definition">&#xB6; T7&gt;</a></span></em></span></dt><dd><p><span class="yiyi-st" id="yiyi-389">&#x57FA;&#x7840;&#xFF1A;<a class="reference internal" href="core_type_api.html#sqlalchemy.types.TypeEngine" title="sqlalchemy.types.TypeEngine"><code class="xref py py-class docutils literal"><span class="pre">sqlalchemy.types.TypeEngine</span></code></a></span></p></dd></dl><dl class="class"><dt id="sqlalchemy.dialects.postgresql.BYTEA"><span class="yiyi-st" id="yiyi-390"> <em class="property">class </em><code class="descclassname">sqlalchemy.dialects.postgresql.</code><code class="descname">BYTEA</code><span class="sig-paren">(</span><em>length=None</em><span class="sig-paren">)</span><a class="headerlink" href="#sqlalchemy.dialects.postgresql.BYTEA" title="Permalink to this definition">&#xB6;</a></span></dt><dd><p><span class="yiyi-st" id="yiyi-391">&#x57FA;&#x7840;&#xFF1A;<a class="reference internal" href="core_type_basics.html#sqlalchemy.types.LargeBinary" title="sqlalchemy.types.LargeBinary"><code class="xref py py-class docutils literal"><span class="pre">sqlalchemy.types.LargeBinary</span></code></a></span></p><dl class="method"><dt id="sqlalchemy.dialects.postgresql.BYTEA.__init__"><span class="yiyi-st" id="yiyi-392"><code class="descname"> __&#x521D;&#x59CB;&#x5316;__  T0&gt; <span class="sig-paren">&#xFF08; T1&gt; <em>&#x957F;&#x5EA6;=&#x65E0; T2&gt; <span class="sig-paren">&#xFF09; T3&gt; <a class="headerlink" href="#sqlalchemy.dialects.postgresql.BYTEA.__init__" title="Permalink to this definition">&#xB6; T4&gt;</a></span></em></span></code></span></dt><dd><div class="inherited-member container"><span class="yiyi-st" id="yiyi-393"> <em>inherited from the</em> <a class="reference internal" href="core_type_basics.html#sqlalchemy.types.LargeBinary.__init__" title="sqlalchemy.types.LargeBinary.__init__"><code class="xref py py-meth docutils literal"><span class="pre">__init__()</span></code></a> <em>method of</em> <a class="reference internal" href="core_type_basics.html#sqlalchemy.types.LargeBinary" title="sqlalchemy.types.LargeBinary"><code class="xref py py-class docutils literal"><span class="pre">LargeBinary</span></code></a></span></div><p><span class="yiyi-st" id="yiyi-394">&#x6784;&#x5EFA;&#x4E00;&#x4E2A;LargeBinary&#x7C7B;&#x578B;&#x3002;</span></p><table class="docutils field-list" frame="void" rules="none"><tbody valign="top"><tr class="field-odd field"><th class="field-name"><span class="yiyi-st" id="yiyi-395">&#x53C2;&#x6570;&#xFF1A;</span></th><td class="field-body"><span class="yiyi-st" id="yiyi-396"><span class="target" id="sqlalchemy.dialects.postgresql.BYTEA.params.length"></span><strong>length</strong><a class="paramlink headerlink reference internal" href="#sqlalchemy.dialects.postgresql.BYTEA.params.length">&#xB6;</a> &#x2013; optional, a length for the column for use in DDL statements, for those binary types that accept a length, such as the MySQL BLOB type.</span></td></tr></tbody></table></dd></dl></dd></dl><dl class="class"><dt id="sqlalchemy.dialects.postgresql.CIDR"><span class="yiyi-st" id="yiyi-397"><em class="property">class</em> <code class="descclassname">sqlalchemy.dialects.postgresql&#x3002;</code> <code class="descname">CIDR</code> <a class="headerlink" href="#sqlalchemy.dialects.postgresql.CIDR" title="Permalink to this definition">&#xB6;</a></span></dt><dd><p><span class="yiyi-st" id="yiyi-398">&#x57FA;&#x7840;&#xFF1A;<a class="reference internal" href="core_type_api.html#sqlalchemy.types.TypeEngine" title="sqlalchemy.types.TypeEngine"><code class="xref py py-class docutils literal"><span class="pre">sqlalchemy.types.TypeEngine</span></code></a></span></p></dd></dl><dl class="class"><dt id="sqlalchemy.dialects.postgresql.DOUBLE_PRECISION"><span class="yiyi-st" id="yiyi-399"><em class="property">class</em> <code class="descclassname">sqlalchemy.dialects.postgresql&#x3002;</code> <code class="descname">DOUBLE_PRECISION</code> <span class="sig-paren">&#xFF08;</span> <em>precision = None</em>&#xFF0C;<em> asdecimal = False</em>&#xFF0C;<em>decimal_return_scale = None</em>&#xFF0C;<em>** kwargs</em> <span class="sig-paren">&#xFF09;</span> <a class="headerlink" href="#sqlalchemy.dialects.postgresql.DOUBLE_PRECISION" title="Permalink to this definition"></a></span></dt><dd><p><span class="yiyi-st" id="yiyi-400">&#x57FA;&#x7840;&#xFF1A;<a class="reference internal" href="core_type_basics.html#sqlalchemy.types.Float" title="sqlalchemy.types.Float"><code class="xref py py-class docutils literal"><span class="pre">sqlalchemy.types.Float</span></code></a></span></p><dl class="method"><dt id="sqlalchemy.dialects.postgresql.DOUBLE_PRECISION.__init__"><span class="yiyi-st" id="yiyi-401"> <code class="descname">__init__</code><span class="sig-paren">(</span><em>precision=None</em>, <em>asdecimal=False</em>, <em>decimal_return_scale=None</em>, <em>**kwargs</em><span class="sig-paren">)</span><a class="headerlink" href="#sqlalchemy.dialects.postgresql.DOUBLE_PRECISION.__init__" title="Permalink to this definition">&#xB6;</a></span></dt><dd><div class="inherited-member container"><span class="yiyi-st" id="yiyi-402"> <em>inherited from the</em> <a class="reference internal" href="core_type_basics.html#sqlalchemy.types.Float.__init__" title="sqlalchemy.types.Float.__init__"><code class="xref py py-meth docutils literal"><span class="pre">__init__()</span></code></a> <em>method of</em> <a class="reference internal" href="core_type_basics.html#sqlalchemy.types.Float" title="sqlalchemy.types.Float"><code class="xref py py-class docutils literal"><span class="pre">Float</span></code></a></span></div><p><span class="yiyi-st" id="yiyi-403">&#x6784;&#x5EFA;&#x4E00;&#x4E2A;&#x6D6E;&#x52A8;&#x3002;</span></p><table class="docutils field-list" frame="void" rules="none"><tbody valign="top"><tr class="field-odd field"><th class="field-name"><span class="yiyi-st" id="yiyi-404">&#x53C2;&#x6570;&#xFF1A;</span></th><td class="field-body"><ul class="first last simple"><li><span class="yiyi-st" id="yiyi-405"><span class="target" id="sqlalchemy.dialects.postgresql.DOUBLE_PRECISION.params.precision"></span><strong>precision</strong><a class="paramlink headerlink reference internal" href="#sqlalchemy.dialects.postgresql.DOUBLE_PRECISION.params.precision">&#xB6;</a> &#x2013; the numeric precision for use in DDL <code class="docutils literal"><span class="pre">CREATE</span> <span class="pre">TABLE</span></code>.</span></li><li><span class="yiyi-st" id="yiyi-406"><span class="target" id="sqlalchemy.dialects.postgresql.DOUBLE_PRECISION.params.asdecimal"></span><strong>asdecimal</strong><a class="paramlink headerlink reference internal" href="#sqlalchemy.dialects.postgresql.DOUBLE_PRECISION.params.asdecimal">&#xB6;</a> &#x2013; the same flag as that of <a class="reference internal" href="core_type_basics.html#sqlalchemy.types.Numeric" title="sqlalchemy.types.Numeric"><code class="xref py py-class docutils literal"><span class="pre">Numeric</span></code></a>, but defaults to <code class="docutils literal"><span class="pre">False</span></code>. </span><span class="yiyi-st" id="yiyi-407">&#x8BF7;&#x6CE8;&#x610F;&#xFF0C;&#x5C06;&#x6B64;&#x6807;&#x5FD7;&#x8BBE;&#x7F6E;&#x4E3A;<code class="docutils literal"><span class="pre">True</span></code>&#x4F1A;&#x5BFC;&#x81F4;&#x6D6E;&#x70B9;&#x8F6C;&#x6362;&#x3002;</span></li><li><span class="yiyi-st" id="yiyi-413"><span class="target" id="sqlalchemy.dialects.postgresql.DOUBLE_PRECISION.params.decimal_return_scale"></span> <strong>decimal_return_scale</strong> <a class="paramlink headerlink reference internal" href="#sqlalchemy.dialects.postgresql.DOUBLE_PRECISION.params.decimal_return_scale">&#xB6;</a>  - </span><p><span class="yiyi-st" id="yiyi-408">&#x4ECE;float&#x5230;Python&#x5C0F;&#x6570;&#x8F6C;&#x6362;&#x65F6;&#x4F7F;&#x7528;&#x7684;&#x9ED8;&#x8BA4;&#x7F29;&#x653E;&#x6BD4;&#x4F8B;&#x3002;</span><span class="yiyi-st" id="yiyi-409">&#x7531;&#x4E8E;&#x5341;&#x8FDB;&#x5236;&#x4E0D;&#x51C6;&#x786E;&#x6027;&#xFF0C;&#x6D6E;&#x70B9;&#x503C;&#x901A;&#x5E38;&#x4F1A;&#x957F;&#x5F97;&#x591A;&#xFF0C;&#x5E76;&#x4E14;&#x5927;&#x591A;&#x6570;&#x6D6E;&#x70B9;&#x6570;&#x636E;&#x5E93;&#x7C7B;&#x578B;&#x6CA1;&#x6709;&#x201C;&#x7F29;&#x653E;&#x201D;&#x7684;&#x6982;&#x5FF5;&#xFF0C;&#x6240;&#x4EE5;&#x9ED8;&#x8BA4;&#x60C5;&#x51B5;&#x4E0B;&#xFF0C;&#x6D6E;&#x70B9;&#x7C7B;&#x578B;&#x5728;&#x8F6C;&#x6362;&#x65F6;&#x4F1A;&#x67E5;&#x627E;&#x524D;&#x5341;&#x4E2A;&#x5C0F;&#x6570;&#x4F4D;&#x3002;</span><span class="yiyi-st" id="yiyi-410">&#x6307;&#x5B9A;&#x6B64;&#x503C;&#x5C06;&#x8986;&#x76D6;&#x8BE5;&#x957F;&#x5EA6;&#x3002;</span><span class="yiyi-st" id="yiyi-411">&#x8BF7;&#x6CE8;&#x610F;&#xFF0C;&#x5305;&#x542B;&#x201C;scale&#x201D;&#x7684;MySQL&#x6D6E;&#x70B9;&#x7C7B;&#x578B;&#x5C06;&#x4F7F;&#x7528;&#x201C;scale&#x201D;&#x4F5C;&#x4E3A;decimal_return_scale&#x7684;&#x9ED8;&#x8BA4;&#x503C;&#xFF08;&#x5982;&#x679C;&#x672A;&#x53E6;&#x5916;&#x6307;&#x5B9A;&#xFF09;&#x3002;</span></p><div class="versionadded"><p><span class="yiyi-st" id="yiyi-412"><span class="versionmodified">&#x7248;&#x672C;0.9.0&#x4E2D;&#x7684;&#x65B0;&#x529F;&#x80FD;</span></span></p></div></li><li><span class="yiyi-st" id="yiyi-414"><span class="target" id="sqlalchemy.dialects.postgresql.DOUBLE_PRECISION.params.**kwargs"></span> <strong>** kwargs</strong> <a class="paramlink headerlink reference internal" href="#sqlalchemy.dialects.postgresql.DOUBLE_PRECISION.params.**kwargs">&#xB6;</a>  - &#x4E0D;&#x5EFA;&#x8BAE;&#x4F7F;&#x7528;&#x3002;</span><span class="yiyi-st" id="yiyi-415">&#x5176;&#x4ED6;&#x53C2;&#x6570;&#x5728;&#x8FD9;&#x91CC;&#x88AB;&#x9ED8;&#x8BA4;&#x7684;<a class="reference internal" href="core_type_basics.html#sqlalchemy.types.Float" title="sqlalchemy.types.Float"><code class="xref py py-class docutils literal"><span class="pre">Float</span></code></a>&#x7C7B;&#x578B;&#x5FFD;&#x7565;&#x3002;</span><span class="yiyi-st" id="yiyi-416">&#x5BF9;&#x4E8E;&#x652F;&#x6301;&#x9644;&#x52A0;&#x53C2;&#x6570;&#x7684;&#x7279;&#x5B9A;&#x4E8E;&#x6570;&#x636E;&#x5E93;&#x7684;&#x6D6E;&#x70B9;&#x6570;&#xFF0C;&#x8BF7;&#x53C2;&#x9605;&#x8BE5;&#x65B9;&#x8A00;&#x7684;&#x6587;&#x6863;&#x4EE5;&#x83B7;&#x53D6;&#x8BE6;&#x7EC6;&#x4FE1;&#x606F;&#xFF0C;&#x4F8B;&#x5982;<a class="reference internal" href="mysql.html#sqlalchemy.dialects.mysql.FLOAT" title="sqlalchemy.dialects.mysql.FLOAT"><code class="xref py py-class docutils literal"><span class="pre">sqlalchemy.dialects.mysql.FLOAT</span></code></a>&#x3002;</span></li></ul></td></tr></tbody></table></dd></dl></dd></dl><dl class="class"><dt id="sqlalchemy.dialects.postgresql.ENUM"><span class="yiyi-st" id="yiyi-417"><em class="property">class</em> <code class="descclassname">sqlalchemy.dialects.postgresql&#x3002;</code> <code class="descname">ENUM</code> <span class="sig-paren">&#xFF08;</span> <em>* enums</em>&#xFF0C;<em>**&#x5343;&#x74E6; T5&gt; <span class="sig-paren">&#xFF09; T6&gt; <a class="headerlink" href="#sqlalchemy.dialects.postgresql.ENUM" title="Permalink to this definition">&#xB6; T7&gt;</a></span></em></span></dt><dd><p><span class="yiyi-st" id="yiyi-418">&#x57FA;&#x7840;&#xFF1A;<a class="reference internal" href="core_type_basics.html#sqlalchemy.types.Enum" title="sqlalchemy.types.Enum"><code class="xref py py-class docutils literal"><span class="pre">sqlalchemy.types.Enum</span></code></a></span></p><p><span class="yiyi-st" id="yiyi-419">Postgresql&#x7684;ENUM&#x7C7B;&#x578B;&#x3002;</span></p><p><span class="yiyi-st" id="yiyi-420">&#x8FD9;&#x662F;<a class="reference internal" href="core_type_basics.html#sqlalchemy.types.Enum" title="sqlalchemy.types.Enum"><code class="xref py py-class docutils literal"><span class="pre">types.Enum</span></code></a>&#x7684;&#x4E00;&#x4E2A;&#x5B50;&#x7C7B;&#xFF0C;&#x5B83;&#x5305;&#x542B;&#x5BF9;PG&#x7684;<code class="docutils literal"><span class="pre">CREATE <span class="pre">TYPE</span></span></code>&#x548C;<code class="docutils literal"><span class="pre">DROP <span class="pre">TYPE</span></span></code>&#x3002;</span></p><p><span class="yiyi-st" id="yiyi-421">&#x5F53;&#x4F7F;&#x7528;&#x5185;&#x5EFA;&#x7C7B;&#x578B;<a class="reference internal" href="core_type_basics.html#sqlalchemy.types.Enum" title="sqlalchemy.types.Enum"><code class="xref py py-class docutils literal"><span class="pre">types.Enum</span></code></a>&#x5E76;&#x4E14;<a class="reference internal" href="core_type_basics.html#sqlalchemy.types.Enum.params.native_enum" title="sqlalchemy.types.Enum"><code class="xref py py-paramref docutils literal"><span class="pre">Enum.native_enum</span></code></a>&#x6807;&#x5FD7;&#x4FDD;&#x7559;&#x5176;&#x9ED8;&#x8BA4;&#x503C;&#x4E3A;True&#x65F6;&#xFF0C;Postgresql&#x540E;&#x7AEF;&#x5C06;&#x4F7F;&#x7528;<a class="reference internal" href="#sqlalchemy.dialects.postgresql.ENUM" title="sqlalchemy.dialects.postgresql.ENUM"><code class="xref py py-class docutils literal"><span class="pre">postgresql.ENUM</span></code></a></span></p><p><span class="yiyi-st" id="yiyi-422">ENUM&#x7684;&#x521B;&#x5EFA;/&#x5220;&#x9664;&#x884C;&#x4E3A;&#x5FC5;&#x7136;&#x9519;&#x7EFC;&#x590D;&#x6742;&#xFF0C;&#x56E0;&#x4E3A;ENUM&#x7C7B;&#x578B;&#x4E0E;&#x7236;&#x8868;&#x5173;&#x7CFB;&#x7684;&#x5173;&#x7CFB;&#x5F88;&#x5C34;&#x5C2C;&#xFF0C;&#x56E0;&#x4E3A;&#x5B83;&#x53EF;&#x80FD;&#x4EC5;&#x7531;&#x5355;&#x4E2A;&#x8868;&#x201C;&#x62E5;&#x6709;&#x201D;&#xFF0C;&#x6216;&#x8005;&#x53EF;&#x80FD;&#x5728;&#x8BB8;&#x591A;&#x8868;&#x4E2D;&#x5171;&#x4EAB;&#x3002;</span></p><p><span class="yiyi-st" id="yiyi-423">When using <a class="reference internal" href="core_type_basics.html#sqlalchemy.types.Enum" title="sqlalchemy.types.Enum"><code class="xref py py-class docutils literal"><span class="pre">types.Enum</span></code></a> or <a class="reference internal" href="#sqlalchemy.dialects.postgresql.ENUM" title="sqlalchemy.dialects.postgresql.ENUM"><code class="xref py py-class docutils literal"><span class="pre">postgresql.ENUM</span></code></a> in an &#x201C;inline&#x201D; fashion, the <code class="docutils literal"><span class="pre">CREATE</span> <span class="pre">TYPE</span></code> and <code class="docutils literal"><span class="pre">DROP</span> <span class="pre">TYPE</span></code> is emitted corresponding to when the <a class="reference internal" href="core_metadata.html#sqlalchemy.schema.Table.create" title="sqlalchemy.schema.Table.create"><code class="xref py py-meth docutils literal"><span class="pre">Table.create()</span></code></a> and <a class="reference internal" href="core_metadata.html#sqlalchemy.schema.Table.drop" title="sqlalchemy.schema.Table.drop"><code class="xref py py-meth docutils literal"><span class="pre">Table.drop()</span></code></a> methods are called:</span></p><div class="highlight-python"><div class="highlight"><pre><span></span><span class="n">table</span> <span class="o">=</span> <span class="n">Table</span><span class="p">(</span><span class="s1">&apos;sometable&apos;</span><span class="p">,</span> <span class="n">metadata</span><span class="p">,</span>
    <span class="n">Column</span><span class="p">(</span><span class="s1">&apos;some_enum&apos;</span><span class="p">,</span> <span class="n">ENUM</span><span class="p">(</span><span class="s1">&apos;a&apos;</span><span class="p">,</span> <span class="s1">&apos;b&apos;</span><span class="p">,</span> <span class="s1">&apos;c&apos;</span><span class="p">,</span> <span class="n">name</span><span class="o">=</span><span class="s1">&apos;myenum&apos;</span><span class="p">))</span>
<span class="p">)</span>

<span class="n">table</span><span class="o">.</span><span class="n">create</span><span class="p">(</span><span class="n">engine</span><span class="p">)</span>  <span class="c1"># will emit CREATE ENUM and CREATE TABLE</span>
<span class="n">table</span><span class="o">.</span><span class="n">drop</span><span class="p">(</span><span class="n">engine</span><span class="p">)</span>  <span class="c1"># will emit DROP TABLE and DROP ENUM</span></pre></div></div><p><span class="yiyi-st" id="yiyi-424">&#x8981;&#x5728;&#x591A;&#x4E2A;&#x8868;&#x4E4B;&#x95F4;&#x4F7F;&#x7528;&#x901A;&#x7528;&#x679A;&#x4E3E;&#x7C7B;&#x578B;&#xFF0C;&#x6700;&#x597D;&#x7684;&#x505A;&#x6CD5;&#x662F;&#x72EC;&#x7ACB;&#x58F0;&#x660E;<a class="reference internal" href="core_type_basics.html#sqlalchemy.types.Enum" title="sqlalchemy.types.Enum"><code class="xref py py-class docutils literal"><span class="pre">types.Enum</span></code></a>&#x6216;<a class="reference internal" href="#sqlalchemy.dialects.postgresql.ENUM" title="sqlalchemy.dialects.postgresql.ENUM"><code class="xref py py-class docutils literal"><span class="pre">postgresql.ENUM</span></code></a>&#xFF0C;&#x5E76;&#x5C06;&#x5176;&#x4E0E;<a class="reference internal" href="core_metadata.html#sqlalchemy.schema.MetaData" title="sqlalchemy.schema.MetaData"><code class="xref py py-class docutils literal"><span class="pre">MetaData</span></code></a></span></p><div class="highlight-python"><div class="highlight"><pre><span></span><span class="n">my_enum</span> <span class="o">=</span> <span class="n">ENUM</span><span class="p">(</span><span class="s1">&apos;a&apos;</span><span class="p">,</span> <span class="s1">&apos;b&apos;</span><span class="p">,</span> <span class="s1">&apos;c&apos;</span><span class="p">,</span> <span class="n">name</span><span class="o">=</span><span class="s1">&apos;myenum&apos;</span><span class="p">,</span> <span class="n">metadata</span><span class="o">=</span><span class="n">metadata</span><span class="p">)</span>

<span class="n">t1</span> <span class="o">=</span> <span class="n">Table</span><span class="p">(</span><span class="s1">&apos;sometable_one&apos;</span><span class="p">,</span> <span class="n">metadata</span><span class="p">,</span>
    <span class="n">Column</span><span class="p">(</span><span class="s1">&apos;some_enum&apos;</span><span class="p">,</span> <span class="n">myenum</span><span class="p">)</span>
<span class="p">)</span>

<span class="n">t2</span> <span class="o">=</span> <span class="n">Table</span><span class="p">(</span><span class="s1">&apos;sometable_two&apos;</span><span class="p">,</span> <span class="n">metadata</span><span class="p">,</span>
    <span class="n">Column</span><span class="p">(</span><span class="s1">&apos;some_enum&apos;</span><span class="p">,</span> <span class="n">myenum</span><span class="p">)</span>
<span class="p">)</span></pre></div></div><p><span class="yiyi-st" id="yiyi-425">&#x5F53;&#x4F7F;&#x7528;&#x8FD9;&#x79CD;&#x6A21;&#x5F0F;&#x65F6;&#xFF0C;&#x4ECD;&#x7136;&#x5FC5;&#x987B;&#x6CE8;&#x610F;&#x5404;&#x4E2A;&#x8868;&#x683C;&#x521B;&#x5EFA;&#x7684;&#x7EA7;&#x522B;&#x3002;</span><span class="yiyi-st" id="yiyi-426">&#x5728;&#x6CA1;&#x6709;&#x6307;&#x5B9A;<code class="docutils literal"><span class="pre">checkfirst=True</span></code>&#x7684;&#x60C5;&#x51B5;&#x4E0B;&#x53D1;&#x9001;CREATE TABLE&#x4ECD;&#x7136;&#x4F1A;&#x5BFC;&#x81F4;&#x95EE;&#x9898;&#xFF1A;</span></p><div class="highlight-python"><div class="highlight"><pre><span></span><span class="n">t1</span><span class="o">.</span><span class="n">create</span><span class="p">(</span><span class="n">engine</span><span class="p">)</span> <span class="c1"># will fail: no such type &apos;myenum&apos;</span></pre></div></div><p><span class="yiyi-st" id="yiyi-427">&#x5982;&#x679C;&#x6211;&#x4EEC;&#x6307;&#x5B9A;<code class="docutils literal"><span class="pre">checkfirst=True</span></code>&#xFF0C;&#x5355;&#x72EC;&#x7684;&#x8868;&#x7EA7;&#x521B;&#x5EFA;&#x64CD;&#x4F5C;&#x5C06;&#x68C0;&#x67E5;<code class="docutils literal"><span class="pre">ENUM</span></code>&#x5E76;&#x521B;&#x5EFA;&#xFF08;&#x5982;&#x679C;&#x4E0D;&#x5B58;&#x5728;&#xFF09;&#xFF1A;</span></p><div class="highlight-python"><div class="highlight"><pre><span></span><span class="c1"># will check if enum exists, and emit CREATE TYPE if not</span>
<span class="n">t1</span><span class="o">.</span><span class="n">create</span><span class="p">(</span><span class="n">engine</span><span class="p">,</span> <span class="n">checkfirst</span><span class="o">=</span><span class="bp">True</span><span class="p">)</span></pre></div></div><p><span class="yiyi-st" id="yiyi-428">&#x5F53;&#x4F7F;&#x7528;&#x5143;&#x6570;&#x636E;&#x7EA7;ENUM&#x7C7B;&#x578B;&#x65F6;&#xFF0C;&#x5982;&#x679C;&#x8C03;&#x7528;&#x5143;&#x6570;&#x636E;&#x8303;&#x56F4;&#x7684;&#x521B;&#x5EFA;/&#x5220;&#x9664;&#x64CD;&#x4F5C;&#xFF0C;&#x5219;&#x5C06;&#x59CB;&#x7EC8;&#x521B;&#x5EFA;&#x5E76;&#x5220;&#x9664;&#x7C7B;&#x578B;&#xFF1A;</span></p><div class="highlight-python"><div class="highlight"><pre><span></span><span class="n">metadata</span><span class="o">.</span><span class="n">create_all</span><span class="p">(</span><span class="n">engine</span><span class="p">)</span>  <span class="c1"># will emit CREATE TYPE</span>
<span class="n">metadata</span><span class="o">.</span><span class="n">drop_all</span><span class="p">(</span><span class="n">engine</span><span class="p">)</span>  <span class="c1"># will emit DROP TYPE</span></pre></div></div><p><span class="yiyi-st" id="yiyi-429">&#x8BE5;&#x7C7B;&#x578B;&#x4E5F;&#x53EF;&#x4EE5;&#x76F4;&#x63A5;&#x521B;&#x5EFA;&#x548C;&#x5220;&#x9664;&#xFF1A;</span></p><div class="highlight-python"><div class="highlight"><pre><span></span><span class="n">my_enum</span><span class="o">.</span><span class="n">create</span><span class="p">(</span><span class="n">engine</span><span class="p">)</span>
<span class="n">my_enum</span><span class="o">.</span><span class="n">drop</span><span class="p">(</span><span class="n">engine</span><span class="p">)</span></pre></div></div><div class="versionchanged"><p><span class="yiyi-st" id="yiyi-430"><span class="versionmodified">&#x7248;&#x672C;1.0.0&#x66F4;&#x6539;&#xFF1A;</span>&#x73B0;&#x5728;&#xFF0C;Postgresql <a class="reference internal" href="#sqlalchemy.dialects.postgresql.ENUM" title="sqlalchemy.dialects.postgresql.ENUM"><code class="xref py py-class docutils literal"><span class="pre">postgresql.ENUM</span></code></a>&#x7C7B;&#x578B;&#x5BF9;&#x4E8E;CREATE / DROP&#x7684;&#x884C;&#x4E3A;&#x66F4;&#x4E3A;&#x4E25;&#x683C;&#x3002;</span><span class="yiyi-st" id="yiyi-431">&#x9664;&#x4E86;<code class="docutils literal"><span class="pre">table.create(checkfirst=True)</span></code>&#x5916;&#xFF0C;&#x5143;&#x6570;&#x636E;&#x7EA7;ENUM&#x7C7B;&#x578B;&#x53EA;&#x4F1A;&#x5728;&#x5143;&#x6570;&#x636E;&#x7EA7;&#x521B;&#x5EFA;&#x548C;&#x5220;&#x9664;&#xFF0C;&#x800C;&#x4E0D;&#x662F;&#x8868;&#x7EA7;&#x3002;</span><span class="yiyi-st" id="yiyi-432">The <code class="docutils literal"><span class="pre">table.drop()</span></code> call will now emit a DROP TYPE for a table-level enumerated type.</span></p></div><dl class="method"><dt id="sqlalchemy.dialects.postgresql.ENUM.__init__"><span class="yiyi-st" id="yiyi-433"><code class="descname">__ init __</code> <span class="sig-paren">&#xFF08;</span> <em>* enums</em>&#xFF0C;<em>** kw</em> <span class="sig-paren">&#xFF09;</span> <a class="headerlink" href="#sqlalchemy.dialects.postgresql.ENUM.__init__" title="Permalink to this definition">T5&gt;</a></span></dt><dd><p><span class="yiyi-st" id="yiyi-434">&#x6784;&#x5EFA;&#x4E00;&#x4E2A;<a class="reference internal" href="#sqlalchemy.dialects.postgresql.ENUM" title="sqlalchemy.dialects.postgresql.ENUM"><code class="xref py py-class docutils literal"><span class="pre">ENUM</span></code></a>&#x3002;</span></p><p><span class="yiyi-st" id="yiyi-435">&#x53C2;&#x6570;&#x4E0E;<a class="reference internal" href="core_type_basics.html#sqlalchemy.types.Enum" title="sqlalchemy.types.Enum"><code class="xref py py-class docutils literal"><span class="pre">types.Enum</span></code></a>&#x7684;&#x53C2;&#x6570;&#x76F8;&#x540C;&#xFF0C;&#x4F46;&#x4E5F;&#x5305;&#x62EC;&#x4EE5;&#x4E0B;&#x53C2;&#x6570;&#x3002;</span></p><table class="docutils field-list" frame="void" rules="none"><tbody valign="top"><tr class="field-odd field"><th class="field-name"><span class="yiyi-st" id="yiyi-436">&#x53C2;&#x6570;&#xFF1A;</span></th><td class="field-body"><span class="yiyi-st" id="yiyi-442"><span class="target" id="sqlalchemy.dialects.postgresql.ENUM.params.create_type"></span> <strong>create_type</strong> <a class="paramlink headerlink reference internal" href="#sqlalchemy.dialects.postgresql.ENUM.params.create_type">&#xB6;</a>  - </span><p><span class="yiyi-st" id="yiyi-437">&#x9ED8;&#x8BA4;&#x4E3A;True&#x3002;</span><span class="yiyi-st" id="yiyi-438">Indicates that <code class="docutils literal"><span class="pre">CREATE</span> <span class="pre">TYPE</span></code> should be emitted, after optionally checking for the presence of the type, when the parent table is being created; and additionally that <code class="docutils literal"><span class="pre">DROP</span> <span class="pre">TYPE</span></code> is called when the table is dropped. </span><span class="yiyi-st" id="yiyi-439">When <code class="docutils literal"><span class="pre">False</span></code>, no check will be performed and no <code class="docutils literal"><span class="pre">CREATE</span> <span class="pre">TYPE</span></code> or <code class="docutils literal"><span class="pre">DROP</span> <span class="pre">TYPE</span></code> is emitted, unless <a class="reference internal" href="#sqlalchemy.dialects.postgresql.ENUM.create" title="sqlalchemy.dialects.postgresql.ENUM.create"><code class="xref py py-meth docutils literal"><span class="pre">create()</span></code></a> or <a class="reference internal" href="#sqlalchemy.dialects.postgresql.ENUM.drop" title="sqlalchemy.dialects.postgresql.ENUM.drop"><code class="xref py py-meth docutils literal"><span class="pre">drop()</span></code></a> are called directly. </span><span class="yiyi-st" id="yiyi-440">&#x8BBE;&#x7F6E;&#x4E3A;<code class="docutils literal"><span class="pre">False</span></code>&#x5728;&#x521B;&#x5EFA;&#x65B9;&#x6848;&#x8C03;&#x7528;SQL&#x6587;&#x4EF6;&#x800C;&#x4E0D;&#x8BBF;&#x95EE;&#x5B9E;&#x9645;&#x6570;&#x636E;&#x5E93;&#x65F6;&#x5F88;&#x6709;&#x7528; -  <a class="reference internal" href="#sqlalchemy.dialects.postgresql.ENUM.create" title="sqlalchemy.dialects.postgresql.ENUM.create"><code class="xref py py-meth docutils literal"><span class="pre">create()</span></code></a>&#x548C;<a class="reference internal" href="#sqlalchemy.dialects.postgresql.ENUM.drop" title="sqlalchemy.dialects.postgresql.ENUM.drop"><code class="xref py py-meth docutils literal"><span class="pre">drop()</span></code></a>&#x65B9;&#x6CD5;&#x53EF;&#x7528;&#x4E8E;&#x5C06;SQL&#x53D1;&#x9001;&#x5230;&#x76EE;&#x6807;&#x7ED1;&#x5B9A;&#x3002;</span></p><div class="versionadded"><p><span class="yiyi-st" id="yiyi-441"><span class="versionmodified">New in version 0.7.4.</span></span></p></div></td></tr></tbody></table></dd></dl><dl class="method"><dt id="sqlalchemy.dialects.postgresql.ENUM.create"><span class="yiyi-st" id="yiyi-443"> <code class="descname">create</code><span class="sig-paren">(</span><em>bind=None</em>, <em>checkfirst=True</em><span class="sig-paren">)</span><a class="headerlink" href="#sqlalchemy.dialects.postgresql.ENUM.create" title="Permalink to this definition">&#xB6;</a></span></dt><dd><p><span class="yiyi-st" id="yiyi-444">Emit <code class="docutils literal"><span class="pre">CREATE</span> <span class="pre">TYPE</span></code> for this <a class="reference internal" href="#sqlalchemy.dialects.postgresql.ENUM" title="sqlalchemy.dialects.postgresql.ENUM"><code class="xref py py-class docutils literal"><span class="pre">ENUM</span></code></a>.</span></p><p><span class="yiyi-st" id="yiyi-445">&#x5982;&#x679C;&#x5E95;&#x5C42;&#x65B9;&#x8A00;&#x4E0D;&#x652F;&#x6301;Postgresql CREATE TYPE&#xFF0C;&#x5219;&#x4E0D;&#x91C7;&#x53D6;&#x4EFB;&#x4F55;&#x64CD;&#x4F5C;&#x3002;</span></p><table class="docutils field-list" frame="void" rules="none"><tbody valign="top"><tr class="field-odd field"><th class="field-name"><span class="yiyi-st" id="yiyi-446">&#x53C2;&#x6570;&#xFF1A;</span></th><td class="field-body"><ul class="first last simple"><li><span class="yiyi-st" id="yiyi-447"><span class="target" id="sqlalchemy.dialects.postgresql.ENUM.create.params.bind"></span><strong>bind</strong><a class="paramlink headerlink reference internal" href="#sqlalchemy.dialects.postgresql.ENUM.create.params.bind">&#xB6;</a> &#x2013; a connectable <a class="reference internal" href="core_connections.html#sqlalchemy.engine.Engine" title="sqlalchemy.engine.Engine"><code class="xref py py-class docutils literal"><span class="pre">Engine</span></code></a>, <a class="reference internal" href="core_connections.html#sqlalchemy.engine.Connection" title="sqlalchemy.engine.Connection"><code class="xref py py-class docutils literal"><span class="pre">Connection</span></code></a>, or similar object to emit SQL.</span></li><li><span class="yiyi-st" id="yiyi-448"><span class="target" id="sqlalchemy.dialects.postgresql.ENUM.create.params.checkfirst"></span><strong>checkfirst</strong><a class="paramlink headerlink reference internal" href="#sqlalchemy.dialects.postgresql.ENUM.create.params.checkfirst">&#xB6;</a> &#x2013; if <code class="docutils literal"><span class="pre">True</span></code>, a query against the PG catalog will be first performed to see if the type does not exist already before creating.</span></li></ul></td></tr></tbody></table></dd></dl><dl class="method"><dt id="sqlalchemy.dialects.postgresql.ENUM.drop"><span class="yiyi-st" id="yiyi-449"> <code class="descname">drop</code><span class="sig-paren">(</span><em>bind=None</em>, <em>checkfirst=True</em><span class="sig-paren">)</span><a class="headerlink" href="#sqlalchemy.dialects.postgresql.ENUM.drop" title="Permalink to this definition">&#xB6;</a></span></dt><dd><p><span class="yiyi-st" id="yiyi-450">Emit <code class="docutils literal"><span class="pre">DROP</span> <span class="pre">TYPE</span></code> for this <a class="reference internal" href="#sqlalchemy.dialects.postgresql.ENUM" title="sqlalchemy.dialects.postgresql.ENUM"><code class="xref py py-class docutils literal"><span class="pre">ENUM</span></code></a>.</span></p><p><span class="yiyi-st" id="yiyi-451">&#x5982;&#x679C;&#x5E95;&#x5C42;&#x65B9;&#x8A00;&#x4E0D;&#x652F;&#x6301;Postgresql DROP TYPE&#xFF0C;&#x5219;&#x4E0D;&#x91C7;&#x53D6;&#x4EFB;&#x4F55;&#x64CD;&#x4F5C;&#x3002;</span></p><table class="docutils field-list" frame="void" rules="none"><tbody valign="top"><tr class="field-odd field"><th class="field-name"><span class="yiyi-st" id="yiyi-452">&#x53C2;&#x6570;&#xFF1A;</span></th><td class="field-body"><ul class="first last simple"><li><span class="yiyi-st" id="yiyi-453"><span class="target" id="sqlalchemy.dialects.postgresql.ENUM.drop.params.bind"></span><strong>bind</strong><a class="paramlink headerlink reference internal" href="#sqlalchemy.dialects.postgresql.ENUM.drop.params.bind">&#xB6;</a> &#x2013; a connectable <a class="reference internal" href="core_connections.html#sqlalchemy.engine.Engine" title="sqlalchemy.engine.Engine"><code class="xref py py-class docutils literal"><span class="pre">Engine</span></code></a>, <a class="reference internal" href="core_connections.html#sqlalchemy.engine.Connection" title="sqlalchemy.engine.Connection"><code class="xref py py-class docutils literal"><span class="pre">Connection</span></code></a>, or similar object to emit SQL.</span></li><li><span class="yiyi-st" id="yiyi-454"><span class="target" id="sqlalchemy.dialects.postgresql.ENUM.drop.params.checkfirst"></span><strong>checkfirst</strong><a class="paramlink headerlink reference internal" href="#sqlalchemy.dialects.postgresql.ENUM.drop.params.checkfirst">&#xB6;</a> &#x2013; if <code class="docutils literal"><span class="pre">True</span></code>, a query against the PG catalog will be first performed to see if the type actually exists before dropping.</span></li></ul></td></tr></tbody></table></dd></dl></dd></dl><dl class="class"><dt id="sqlalchemy.dialects.postgresql.HSTORE"><span class="yiyi-st" id="yiyi-455"> <em class="property">class </em><code class="descclassname">sqlalchemy.dialects.postgresql.</code><code class="descname">HSTORE</code><span class="sig-paren">(</span><em>text_type=None</em><span class="sig-paren">)</span><a class="headerlink" href="#sqlalchemy.dialects.postgresql.HSTORE" title="Permalink to this definition">&#xB6;</a></span></dt><dd><p><span class="yiyi-st" id="yiyi-456">&#x57FA;&#x7840;&#xFF1A;<a class="reference internal" href="core_type_api.html#sqlalchemy.types.Indexable" title="sqlalchemy.types.Indexable"><code class="xref py py-class docutils literal"><span class="pre">sqlalchemy.types.Indexable</span></code></a>&#xFF0C;<a class="reference internal" href="core_type_api.html#sqlalchemy.types.Concatenable" title="sqlalchemy.types.Concatenable"><code class="xref py py-class docutils literal"><span class="pre">sqlalchemy.types.Concatenable</span></code></a>&#xFF0C;<a class="reference internal" href="core_type_api.html#sqlalchemy.types.TypeEngine" title="sqlalchemy.types.TypeEngine"><code class="xref py py-class docutils literal"><span class="pre">sqlalchemy.types.TypeEngine</span></code></a></span></p><p><span class="yiyi-st" id="yiyi-457">&#x8868;&#x793A;Postgresql HSTORE&#x7C7B;&#x578B;&#x3002;</span></p><p><span class="yiyi-st" id="yiyi-458"><a class="reference internal" href="#sqlalchemy.dialects.postgresql.HSTORE" title="sqlalchemy.dialects.postgresql.HSTORE"><code class="xref py py-class docutils literal"><span class="pre">HSTORE</span></code></a>&#x7C7B;&#x578B;&#x5B58;&#x50A8;&#x5305;&#x542B;&#x5B57;&#x7B26;&#x4E32;&#x7684;&#x5B57;&#x5178;&#xFF0C;&#x4F8B;&#x5982;&#xFF1A;</span></p><div class="highlight-python"><div class="highlight"><pre><span></span><span class="n">data_table</span> <span class="o">=</span> <span class="n">Table</span><span class="p">(</span><span class="s1">&apos;data_table&apos;</span><span class="p">,</span> <span class="n">metadata</span><span class="p">,</span>
    <span class="n">Column</span><span class="p">(</span><span class="s1">&apos;id&apos;</span><span class="p">,</span> <span class="n">Integer</span><span class="p">,</span> <span class="n">primary_key</span><span class="o">=</span><span class="bp">True</span><span class="p">),</span>
    <span class="n">Column</span><span class="p">(</span><span class="s1">&apos;data&apos;</span><span class="p">,</span> <span class="n">HSTORE</span><span class="p">)</span>
<span class="p">)</span>

<span class="k">with</span> <span class="n">engine</span><span class="o">.</span><span class="n">connect</span><span class="p">()</span> <span class="k">as</span> <span class="n">conn</span><span class="p">:</span>
    <span class="n">conn</span><span class="o">.</span><span class="n">execute</span><span class="p">(</span>
        <span class="n">data_table</span><span class="o">.</span><span class="n">insert</span><span class="p">(),</span>
        <span class="n">data</span> <span class="o">=</span> <span class="p">{</span><span class="s2">&quot;key1&quot;</span><span class="p">:</span> <span class="s2">&quot;value1&quot;</span><span class="p">,</span> <span class="s2">&quot;key2&quot;</span><span class="p">:</span> <span class="s2">&quot;value2&quot;</span><span class="p">}</span>
    <span class="p">)</span></pre></div></div><p><span class="yiyi-st" id="yiyi-459"><a class="reference internal" href="#sqlalchemy.dialects.postgresql.HSTORE" title="sqlalchemy.dialects.postgresql.HSTORE"><code class="xref py py-class docutils literal"><span class="pre">HSTORE</span></code></a> provides for a wide range of operations, including:</span></p><ul><li><p class="first"><span class="yiyi-st" id="yiyi-460">&#x7D22;&#x5F15;&#x64CD;&#x4F5C;&#xFF1A;</span></p><div class="highlight-python"><div class="highlight"><pre><span></span><span class="n">data_table</span><span class="o">.</span><span class="n">c</span><span class="o">.</span><span class="n">data</span><span class="p">[</span><span class="s1">&apos;some key&apos;</span><span class="p">]</span> <span class="o">==</span> <span class="s1">&apos;some value&apos;</span></pre></div></div></li><li><p class="first"><span class="yiyi-st" id="yiyi-461">&#x904F;&#x5236;&#x884C;&#x52A8;&#xFF1A;</span></p><div class="highlight-python"><div class="highlight"><pre><span></span><span class="n">data_table</span><span class="o">.</span><span class="n">c</span><span class="o">.</span><span class="n">data</span><span class="o">.</span><span class="n">has_key</span><span class="p">(</span><span class="s1">&apos;some key&apos;</span><span class="p">)</span>

<span class="n">data_table</span><span class="o">.</span><span class="n">c</span><span class="o">.</span><span class="n">data</span><span class="o">.</span><span class="n">has_all</span><span class="p">([</span><span class="s1">&apos;one&apos;</span><span class="p">,</span> <span class="s1">&apos;two&apos;</span><span class="p">,</span> <span class="s1">&apos;three&apos;</span><span class="p">])</span></pre></div></div></li><li><p class="first"><span class="yiyi-st" id="yiyi-462">&#x7EA7;&#x8054;&#xFF1A;</span></p><div class="highlight-python"><div class="highlight"><pre><span></span><span class="n">data_table</span><span class="o">.</span><span class="n">c</span><span class="o">.</span><span class="n">data</span> <span class="o">+</span> <span class="p">{</span><span class="s2">&quot;k1&quot;</span><span class="p">:</span> <span class="s2">&quot;v1&quot;</span><span class="p">}</span></pre></div></div></li></ul><p><span class="yiyi-st" id="yiyi-463">&#x6709;&#x5173;&#x7279;&#x6B8A;&#x65B9;&#x6CD5;&#x7684;&#x5B8C;&#x6574;&#x5217;&#x8868;&#xFF0C;&#x8BF7;&#x53C2;&#x9605;<code class="xref py py-class docutils literal"><span class="pre">HSTORE.comparator_factory</span></code>&#x3002;</span></p><p><span class="yiyi-st" id="yiyi-464">&#x5BF9;&#x4E8E;&#x4E0E;SQLAlchemy ORM&#x4E00;&#x8D77;&#x4F7F;&#x7528;&#xFF0C;&#x53EF;&#x80FD;&#x5E0C;&#x671B;&#x5C06;<a class="reference internal" href="#sqlalchemy.dialects.postgresql.HSTORE" title="sqlalchemy.dialects.postgresql.HSTORE"><code class="xref py py-class docutils literal"><span class="pre">HSTORE</span></code></a>&#x7684;&#x7528;&#x6CD5;&#x4E0E;<a class="reference internal" href="orm_extensions_mutable.html#sqlalchemy.ext.mutable.MutableDict" title="sqlalchemy.ext.mutable.MutableDict"><code class="xref py py-class docutils literal"><span class="pre">MutableDict</span></code></a>&#x5B57;&#x5178;&#x73B0;&#x5728;&#x4F5C;&#x4E3A;<a class="reference internal" href="orm_extensions_mutable.html#module-sqlalchemy.ext.mutable" title="sqlalchemy.ext.mutable"><code class="xref py py-mod docutils literal"><span class="pre">sqlalchemy.ext.mutable</span></code></a>&#x7684;&#x4E00;&#x90E8;&#x5206;&#x7ED3;&#x5408;&#x4F7F;&#x7528;&#x5EF6;&#x671F;&#x3002;</span><span class="yiyi-st" id="yiyi-465">&#x8BE5;&#x6269;&#x5C55;&#x5C06;&#x5141;&#x8BB8;&#x5BF9;&#x5B57;&#x5178;&#x8FDB;&#x884C;&#x201C;&#x539F;&#x5730;&#x201D;&#x66F4;&#x6539;&#xFF0C;&#x4F8B;&#x5982;&#xFF0C;&#x6DFB;&#x52A0;&#x65B0;&#x5BC6;&#x94A5;&#x6216;&#x66FF;&#x6362;/&#x5220;&#x9664;&#x5F53;&#x524D;&#x5B57;&#x5178;&#x4E2D;&#x7684;&#x73B0;&#x6709;&#x5BC6;&#x94A5;&#xFF0C;&#x4EE5;&#x4EA7;&#x751F;&#x5C06;&#x7531;&#x5DE5;&#x4F5C;&#x5355;&#x5143;&#x68C0;&#x6D4B;&#x5230;&#x7684;&#x4E8B;&#x4EF6;&#xFF1A;</span></p><div class="highlight-python"><div class="highlight"><pre><span></span><span class="kn">from</span> <span class="nn">sqlalchemy.ext.mutable</span> <span class="kn">import</span> <span class="n">MutableDict</span>

<span class="k">class</span> <span class="nc">MyClass</span><span class="p">(</span><span class="n">Base</span><span class="p">):</span>
    <span class="n">__tablename__</span> <span class="o">=</span> <span class="s1">&apos;data_table&apos;</span>

    <span class="nb">id</span> <span class="o">=</span> <span class="n">Column</span><span class="p">(</span><span class="n">Integer</span><span class="p">,</span> <span class="n">primary_key</span><span class="o">=</span><span class="bp">True</span><span class="p">)</span>
    <span class="n">data</span> <span class="o">=</span> <span class="n">Column</span><span class="p">(</span><span class="n">MutableDict</span><span class="o">.</span><span class="n">as_mutable</span><span class="p">(</span><span class="n">HSTORE</span><span class="p">))</span>

<span class="n">my_object</span> <span class="o">=</span> <span class="n">session</span><span class="o">.</span><span class="n">query</span><span class="p">(</span><span class="n">MyClass</span><span class="p">)</span><span class="o">.</span><span class="n">one</span><span class="p">()</span>

<span class="c1"># in-place mutation, requires Mutable extension</span>
<span class="c1"># in order for the ORM to detect</span>
<span class="n">my_object</span><span class="o">.</span><span class="n">data</span><span class="p">[</span><span class="s1">&apos;some_key&apos;</span><span class="p">]</span> <span class="o">=</span> <span class="s1">&apos;some value&apos;</span>

<span class="n">session</span><span class="o">.</span><span class="n">commit</span><span class="p">()</span></pre></div></div><p><span class="yiyi-st" id="yiyi-466">&#x5F53;&#x4E0D;&#x4F7F;&#x7528;<a class="reference internal" href="orm_extensions_mutable.html#module-sqlalchemy.ext.mutable" title="sqlalchemy.ext.mutable"><code class="xref py py-mod docutils literal"><span class="pre">sqlalchemy.ext.mutable</span></code></a>&#x6269;&#x5C55;&#x540D;&#x65F6;&#xFF0C;&#x9664;&#x975E;&#x8BE5;&#x5B57;&#x5178;&#x503C;&#x88AB;&#x91CD;&#x65B0;&#x5206;&#x914D;&#x7ED9;HSTORE&#x5C5E;&#x6027;&#x672C;&#x8EAB;&#xFF0C;&#x5426;&#x5219;ORM&#x5C06;&#x4E0D;&#x4F1A;&#x88AB;&#x63D0;&#x9192;&#x5BF9;&#x73B0;&#x6709;&#x5B57;&#x5178;&#x7684;&#x5185;&#x5BB9;&#x8FDB;&#x884C;&#x4EFB;&#x4F55;&#x66F4;&#x6539;&#xFF0C;&#x4ECE;&#x800C;&#x4EA7;&#x751F;&#x53D8;&#x5316;&#x4E8B;&#x4EF6;&#x3002;</span></p><div class="versionadded"><p><span class="yiyi-st" id="yiyi-467"><span class="versionmodified">0.8&#x7248;&#x672C;&#x4E2D;&#x7684;&#x65B0;&#x529F;&#x80FD;</span></span></p></div><div class="admonition seealso"><p class="first admonition-title"><span class="yiyi-st" id="yiyi-468">&#x4E5F;&#x53EF;&#x4EE5;&#x770B;&#x770B;</span></p><p class="last"><span class="yiyi-st" id="yiyi-469"><a class="reference internal" href="#sqlalchemy.dialects.postgresql.hstore" title="sqlalchemy.dialects.postgresql.hstore"><code class="xref py py-class docutils literal"><span class="pre">hstore</span></code></a>  - &#x5448;&#x73B0;Postgresql <code class="docutils literal"><span class="pre">hstore()</span></code>&#x51FD;&#x6570;&#x3002;</span></p></div><dl class="class"><dt id="sqlalchemy.dialects.postgresql.HSTORE.Comparator"><span class="yiyi-st" id="yiyi-470"><em class="property">class</em> <code class="descname">&#x6BD4;&#x8F83;&#x5668;</code> <span class="sig-paren">&#xFF08;</span> <em>expr</em> <span class="sig-paren">&#xFF09;</span> <a class="headerlink" href="#sqlalchemy.dialects.postgresql.HSTORE.Comparator" title="Permalink to this definition">&#xB6;</a></span></dt><dd><p><span class="yiyi-st" id="yiyi-471">&#x57FA;&#x7840;&#xFF1A;<code class="xref py py-class docutils literal"><span class="pre">sqlalchemy.types.Comparator</span></code>&#xFF0C;<code class="xref py py-class docutils literal"><span class="pre">sqlalchemy.types.Comparator</span></code></span></p><p><span class="yiyi-st" id="yiyi-472">&#x5B9A;&#x4E49;<a class="reference internal" href="#sqlalchemy.dialects.postgresql.HSTORE" title="sqlalchemy.dialects.postgresql.HSTORE"><code class="xref py py-class docutils literal"><span class="pre">HSTORE</span></code></a>&#x7684;&#x6BD4;&#x8F83;&#x64CD;&#x4F5C;&#x3002;</span></p><dl class="method"><dt id="sqlalchemy.dialects.postgresql.HSTORE.Comparator.array"><span class="yiyi-st" id="yiyi-473"><code class="descname">&#x9635;&#x5217; T0&gt; <span class="sig-paren">&#xFF08; T1&gt; <span class="sig-paren">&#xFF09; T2&gt; <a class="headerlink" href="#sqlalchemy.dialects.postgresql.HSTORE.Comparator.array" title="Permalink to this definition">&#xB6; T3&gt;</a></span></span></code></span></dt><dd><p><span class="yiyi-st" id="yiyi-474">&#x6587;&#x672C;&#x6570;&#x7EC4;&#x8868;&#x8FBE;&#x5F0F;&#x3002;</span><span class="yiyi-st" id="yiyi-475">&#x8FD4;&#x56DE;&#x4EA4;&#x66FF;&#x952E;&#x548C;&#x503C;&#x7684;&#x6570;&#x7EC4;&#x3002;</span></p></dd></dl><dl class="method"><dt id="sqlalchemy.dialects.postgresql.HSTORE.Comparator.contained_by"><span class="yiyi-st" id="yiyi-476"><code class="descname"> contained_by  T0&gt; <span class="sig-paren">&#xFF08; T1&gt; <em>&#x5176;&#x4ED6; T2&gt; <span class="sig-paren">&#xFF09; T3&gt; <a class="headerlink" href="#sqlalchemy.dialects.postgresql.HSTORE.Comparator.contained_by" title="Permalink to this definition">&#xB6; T4&gt;</a></span></em></span></code></span></dt><dd><p><span class="yiyi-st" id="yiyi-477">&#x5E03;&#x5C14;&#x8868;&#x8FBE;&#x5F0F;&#x3002;</span><span class="yiyi-st" id="yiyi-478">&#x6D4B;&#x8BD5;&#x952E;&#x662F;&#x5426;&#x662F;&#x53C2;&#x6570;jsonb&#x8868;&#x8FBE;&#x5F0F;&#x7684;&#x952E;&#x7684;&#x771F;&#x5B50;&#x96C6;&#x3002;</span></p></dd></dl><dl class="method"><dt id="sqlalchemy.dialects.postgresql.HSTORE.Comparator.contains"><span class="yiyi-st" id="yiyi-479"><code class="descname">&#x5305;&#x542B;</code> <span class="sig-paren">&#xFF08;</span> <em>&#x5176;&#x4ED6;</em>&#xFF0C;<em>** kwargs</em> <span class="sig-paren">&#xFF09;</span> <a class="headerlink" href="#sqlalchemy.dialects.postgresql.HSTORE.Comparator.contains" title="Permalink to this definition"></a> &gt;</span></dt><dd><p><span class="yiyi-st" id="yiyi-480">&#x5E03;&#x5C14;&#x8868;&#x8FBE;&#x5F0F;&#x3002;</span><span class="yiyi-st" id="yiyi-481">&#x6D4B;&#x8BD5;&#x952E;&#xFF08;&#x6216;&#x6570;&#x7EC4;&#xFF09;&#x662F;&#x5426;&#x662F;/&#x5305;&#x542B;&#x53C2;&#x6570;jsonb&#x8868;&#x8FBE;&#x5F0F;&#x7684;&#x952E;&#x7684;&#x8D85;&#x96C6;&#x3002;</span></p></dd></dl><dl class="method"><dt id="sqlalchemy.dialects.postgresql.HSTORE.Comparator.defined"><span class="yiyi-st" id="yiyi-482"><code class="descname">&#x5B9A;&#x4E49; T0&gt; <span class="sig-paren">&#xFF08; T1&gt; <em>&#x952E; T2&gt; <span class="sig-paren">&#xFF09; T3&gt; <a class="headerlink" href="#sqlalchemy.dialects.postgresql.HSTORE.Comparator.defined" title="Permalink to this definition">&#xB6; T4&gt;</a></span></em></span></code></span></dt><dd><p><span class="yiyi-st" id="yiyi-483">&#x5E03;&#x5C14;&#x8868;&#x8FBE;&#x5F0F;&#x3002;</span><span class="yiyi-st" id="yiyi-484">&#x6D4B;&#x8BD5;&#x5BC6;&#x94A5;&#x662F;&#x5426;&#x5B58;&#x5728;&#x975E;NULL&#x503C;&#x3002;</span><span class="yiyi-st" id="yiyi-485">&#x8BF7;&#x6CE8;&#x610F;&#xFF0C;&#x8BE5;&#x5BC6;&#x94A5;&#x53EF;&#x80FD;&#x662F;SQLA&#x8868;&#x8FBE;&#x5F0F;&#x3002;</span></p></dd></dl><dl class="method"><dt id="sqlalchemy.dialects.postgresql.HSTORE.Comparator.delete"><span class="yiyi-st" id="yiyi-486"><code class="descname">&#x5220;&#x9664; T0&gt; <span class="sig-paren">&#xFF08; T1&gt; <em>&#x952E; T2&gt; <span class="sig-paren">&#xFF09; T3&gt; <a class="headerlink" href="#sqlalchemy.dialects.postgresql.HSTORE.Comparator.delete" title="Permalink to this definition">&#xB6; T4&gt;</a></span></em></span></code></span></dt><dd><p><span class="yiyi-st" id="yiyi-487">HStore&#x8868;&#x8FBE;&#x3002;</span><span class="yiyi-st" id="yiyi-488">&#x8FD4;&#x56DE;&#x6B64;hstore&#x7684;&#x5185;&#x5BB9;&#xFF0C;&#x5E76;&#x5220;&#x9664;&#x7ED9;&#x5B9A;&#x7684;&#x5BC6;&#x94A5;&#x3002;</span><span class="yiyi-st" id="yiyi-489">&#x8BF7;&#x6CE8;&#x610F;&#xFF0C;&#x8BE5;&#x5BC6;&#x94A5;&#x53EF;&#x80FD;&#x662F;SQLA&#x8868;&#x8FBE;&#x5F0F;&#x3002;</span></p></dd></dl><dl class="method"><dt id="sqlalchemy.dialects.postgresql.HSTORE.Comparator.has_all"><span class="yiyi-st" id="yiyi-490"><code class="descname"> has_all  T0&gt; <span class="sig-paren">&#xFF08; T1&gt; <em>&#x5176;&#x4ED6; T2&gt; <span class="sig-paren">&#xFF09; T3&gt; <a class="headerlink" href="#sqlalchemy.dialects.postgresql.HSTORE.Comparator.has_all" title="Permalink to this definition">&#xB6; T4&gt;</a></span></em></span></code></span></dt><dd><p><span class="yiyi-st" id="yiyi-491">&#x5E03;&#x5C14;&#x8868;&#x8FBE;&#x5F0F;&#x3002;</span><span class="yiyi-st" id="yiyi-492">&#x6D4B;&#x8BD5;jsonb&#x4E2D;&#x662F;&#x5426;&#x5B58;&#x5728;&#x6240;&#x6709;&#x952E;</span></p></dd></dl><dl class="method"><dt id="sqlalchemy.dialects.postgresql.HSTORE.Comparator.has_any"><span class="yiyi-st" id="yiyi-493"><code class="descname"> has_any  T0&gt; <span class="sig-paren">&#xFF08; T1&gt; <em>&#x5176;&#x4ED6; T2&gt; <span class="sig-paren">&#xFF09; T3&gt; <a class="headerlink" href="#sqlalchemy.dialects.postgresql.HSTORE.Comparator.has_any" title="Permalink to this definition">&#xB6; T4&gt;</a></span></em></span></code></span></dt><dd><p><span class="yiyi-st" id="yiyi-494">&#x5E03;&#x5C14;&#x8868;&#x8FBE;&#x5F0F;&#x3002;</span><span class="yiyi-st" id="yiyi-495">&#x6D4B;&#x8BD5;jsonb&#x4E2D;&#x662F;&#x5426;&#x5B58;&#x5728;&#x4EFB;&#x4F55;&#x5BC6;&#x94A5;</span></p></dd></dl><dl class="method"><dt id="sqlalchemy.dialects.postgresql.HSTORE.Comparator.has_key"><span class="yiyi-st" id="yiyi-496"><code class="descname">&#x5BF9;&#x8C61;&#x7684;has_key  T0&gt; <span class="sig-paren">&#xFF08; T1&gt; <em>&#x5176;&#x4ED6; T2&gt; <span class="sig-paren">&#xFF09; T3&gt; <a class="headerlink" href="#sqlalchemy.dialects.postgresql.HSTORE.Comparator.has_key" title="Permalink to this definition">&#xB6; T4&gt;</a></span></em></span></code></span></dt><dd><p><span class="yiyi-st" id="yiyi-497">&#x5E03;&#x5C14;&#x8868;&#x8FBE;&#x5F0F;&#x3002;</span><span class="yiyi-st" id="yiyi-498">&#x6D4B;&#x8BD5;&#x5BC6;&#x94A5;&#x7684;&#x5B58;&#x5728;&#x3002;</span><span class="yiyi-st" id="yiyi-499">&#x8BF7;&#x6CE8;&#x610F;&#xFF0C;&#x8BE5;&#x5BC6;&#x94A5;&#x53EF;&#x80FD;&#x662F;SQLA&#x8868;&#x8FBE;&#x5F0F;&#x3002;</span></p></dd></dl><dl class="method"><dt id="sqlalchemy.dialects.postgresql.HSTORE.Comparator.keys"><span class="yiyi-st" id="yiyi-500"><code class="descname">&#x952E; T0&gt; <span class="sig-paren">&#xFF08; T1&gt; <span class="sig-paren">&#xFF09; T2&gt; <a class="headerlink" href="#sqlalchemy.dialects.postgresql.HSTORE.Comparator.keys" title="Permalink to this definition">&#xB6; T3&gt;</a></span></span></code></span></dt><dd><p><span class="yiyi-st" id="yiyi-501">&#x6587;&#x672C;&#x6570;&#x7EC4;&#x8868;&#x8FBE;&#x5F0F;&#x3002;</span><span class="yiyi-st" id="yiyi-502">&#x8FD4;&#x56DE;&#x952E;&#x6570;&#x7EC4;&#x3002;</span></p></dd></dl><dl class="method"><dt id="sqlalchemy.dialects.postgresql.HSTORE.Comparator.matrix"><span class="yiyi-st" id="yiyi-503"><code class="descname">&#x77E9;&#x9635; T0&gt; <span class="sig-paren">&#xFF08; T1&gt; <span class="sig-paren">&#xFF09; T2&gt; <a class="headerlink" href="#sqlalchemy.dialects.postgresql.HSTORE.Comparator.matrix" title="Permalink to this definition">&#xB6; T3&gt;</a></span></span></code></span></dt><dd><p><span class="yiyi-st" id="yiyi-504">&#x6587;&#x672C;&#x6570;&#x7EC4;&#x8868;&#x8FBE;&#x5F0F;&#x3002;</span><span class="yiyi-st" id="yiyi-505">&#x8FD4;&#x56DE;[key&#xFF0C;value]&#x5BF9;&#x7684;&#x6570;&#x7EC4;&#x3002;</span></p></dd></dl><dl class="method"><dt id="sqlalchemy.dialects.postgresql.HSTORE.Comparator.slice"><span class="yiyi-st" id="yiyi-506"><code class="descname">&#x7247; T0&gt; <span class="sig-paren">&#xFF08; T1&gt; <em>&#x9635;&#x5217; T2&gt; <span class="sig-paren">&#xFF09; T3&gt; <a class="headerlink" href="#sqlalchemy.dialects.postgresql.HSTORE.Comparator.slice" title="Permalink to this definition">&#xB6; T4&gt;</a></span></em></span></code></span></dt><dd><p><span class="yiyi-st" id="yiyi-507">HStore&#x8868;&#x8FBE;&#x3002;</span><span class="yiyi-st" id="yiyi-508">&#x8FD4;&#x56DE;&#x7531;key&#x6570;&#x7EC4;&#x5B9A;&#x4E49;&#x7684;hstore&#x7684;&#x5B50;&#x96C6;&#x3002;</span></p></dd></dl><dl class="method"><dt id="sqlalchemy.dialects.postgresql.HSTORE.Comparator.vals"><span class="yiyi-st" id="yiyi-509"><code class="descname">&#x74E6;&#x5C14;&#x65AF; T0&gt; <span class="sig-paren">&#xFF08; T1&gt; <span class="sig-paren">&#xFF09; T2&gt; <a class="headerlink" href="#sqlalchemy.dialects.postgresql.HSTORE.Comparator.vals" title="Permalink to this definition">&#xB6; T3&gt;</a></span></span></code></span></dt><dd><p><span class="yiyi-st" id="yiyi-510">&#x6587;&#x672C;&#x6570;&#x7EC4;&#x8868;&#x8FBE;&#x5F0F;&#x3002;</span><span class="yiyi-st" id="yiyi-511">&#x8FD4;&#x56DE;&#x503C;&#x6570;&#x7EC4;&#x3002;</span></p></dd></dl></dd></dl><dl class="method"><dt id="sqlalchemy.dialects.postgresql.HSTORE.__init__"><span class="yiyi-st" id="yiyi-512"><code class="descclassname"> HSTORE&#x3002; T0&gt; <code class="descname"> __&#x521D;&#x59CB;&#x5316;__  T1&gt; <span class="sig-paren">&#xFF08; T2&gt; <em> text_type =&#x65E0; T3&gt; <span class="sig-paren">&#xFF09; T4&gt; <a class="headerlink" href="#sqlalchemy.dialects.postgresql.HSTORE.__init__" title="Permalink to this definition">&#xB6; T5 &gt;</a></span></em></span></code></code></span></dt><dd><p><span class="yiyi-st" id="yiyi-513">&#x6784;&#x5EFA;&#x4E00;&#x4E2A;&#x65B0;&#x7684;<a class="reference internal" href="#sqlalchemy.dialects.postgresql.HSTORE" title="sqlalchemy.dialects.postgresql.HSTORE"><code class="xref py py-class docutils literal"><span class="pre">HSTORE</span></code></a>&#x3002;</span></p><table class="docutils field-list" frame="void" rules="none"><tbody valign="top"><tr class="field-odd field"><th class="field-name"><span class="yiyi-st" id="yiyi-514">&#x53C2;&#x6570;&#xFF1A;</span></th><td class="field-body"><span class="yiyi-st" id="yiyi-518"><span class="target" id="sqlalchemy.dialects.postgresql.HSTORE.params.text_type"></span> <strong>text_type</strong> <a class="paramlink headerlink reference internal" href="#sqlalchemy.dialects.postgresql.HSTORE.params.text_type">&#xB6;</a>  - </span><p><span class="yiyi-st" id="yiyi-515">&#x5E94;&#x8BE5;&#x7528;&#x4E8E;&#x7D22;&#x5F15;&#x503C;&#x7684;&#x7C7B;&#x578B;&#x3002;</span><span class="yiyi-st" id="yiyi-516">&#x9ED8;&#x8BA4;&#x4E3A;<a class="reference internal" href="core_type_basics.html#sqlalchemy.types.Text" title="sqlalchemy.types.Text"><code class="xref py py-class docutils literal"><span class="pre">types.Text</span></code></a>&#x3002;</span></p><div class="versionadded"><p><span class="yiyi-st" id="yiyi-517"><span class="versionmodified">&#x7248;&#x672C;1.1.0&#x4E2D;&#x7684;&#x65B0;&#x529F;&#x80FD;</span></span></p></div></td></tr></tbody></table></dd></dl><dl class="attribute"><dt id="sqlalchemy.dialects.postgresql.HSTORE.comparator_factory"><span class="yiyi-st" id="yiyi-519"><code class="descclassname"> HSTORE&#x3002; T0&gt; <code class="descname"> comparator_factory  T1&gt; <a class="headerlink" href="#sqlalchemy.dialects.postgresql.HSTORE.comparator_factory" title="Permalink to this definition">&#xB6; T2&gt;</a></code></code></span></dt><dd><p><span class="yiyi-st" id="yiyi-520"><a class="reference internal" href="#sqlalchemy.dialects.postgresql.HSTORE.Comparator" title="sqlalchemy.dialects.postgresql.HSTORE.Comparator"><code class="xref py py-class docutils literal"><span class="pre">Comparator</span></code></a>&#x7684;&#x522B;&#x540D;</span></p></dd></dl></dd></dl><dl class="class"><dt id="sqlalchemy.dialects.postgresql.hstore"><span class="yiyi-st" id="yiyi-521"><em class="property">class</em> <code class="descclassname">sqlalchemy.dialects.postgresql&#x3002;</code> <code class="descname">hstore</code> <span class="sig-paren">&#xFF08;</span> <em>* args</em>&#xFF0C;<em>** kwargs  T5&gt; <span class="sig-paren">&#xFF09; T6&gt; <a class="headerlink" href="#sqlalchemy.dialects.postgresql.hstore" title="Permalink to this definition">&#xB6; T7&gt;</a></span></em></span></dt><dd><p><span class="yiyi-st" id="yiyi-522">&#x57FA;&#x7840;&#xFF1A;<a class="reference internal" href="core_functions.html#sqlalchemy.sql.functions.GenericFunction" title="sqlalchemy.sql.functions.GenericFunction"><code class="xref py py-class docutils literal"><span class="pre">sqlalchemy.sql.functions.GenericFunction</span></code></a></span></p><p><span class="yiyi-st" id="yiyi-523">&#x4F7F;&#x7528;Postgresql <code class="docutils literal"><span class="pre">hstore()</span></code>&#x51FD;&#x6570;&#x5728;SQL&#x8868;&#x8FBE;&#x5F0F;&#x5185;&#x6784;&#x5EFA;hstore&#x503C;&#x3002;</span></p><p><span class="yiyi-st" id="yiyi-524"><a class="reference internal" href="#sqlalchemy.dialects.postgresql.hstore" title="sqlalchemy.dialects.postgresql.hstore"><code class="xref py py-class docutils literal"><span class="pre">hstore</span></code></a>&#x51FD;&#x6570;&#x63A5;&#x53D7;Postgresql&#x6587;&#x6863;&#x4E2D;&#x63CF;&#x8FF0;&#x7684;&#x4E00;&#x4E2A;&#x6216;&#x4E24;&#x4E2A;&#x53C2;&#x6570;&#x3002;</span></p><p><span class="yiyi-st" id="yiyi-525">&#x4F8B;&#x5982;&#x3002;&#xFF1A;</span></p><div class="highlight-python"><div class="highlight"><pre><span></span><span class="kn">from</span> <span class="nn">sqlalchemy.dialects.postgresql</span> <span class="kn">import</span> <span class="n">array</span><span class="p">,</span> <span class="n">hstore</span>

<span class="n">select</span><span class="p">([</span><span class="n">hstore</span><span class="p">(</span><span class="s1">&apos;key1&apos;</span><span class="p">,</span> <span class="s1">&apos;value1&apos;</span><span class="p">)])</span>

<span class="n">select</span><span class="p">([</span>
        <span class="n">hstore</span><span class="p">(</span>
            <span class="n">array</span><span class="p">([</span><span class="s1">&apos;key1&apos;</span><span class="p">,</span> <span class="s1">&apos;key2&apos;</span><span class="p">,</span> <span class="s1">&apos;key3&apos;</span><span class="p">]),</span>
            <span class="n">array</span><span class="p">([</span><span class="s1">&apos;value1&apos;</span><span class="p">,</span> <span class="s1">&apos;value2&apos;</span><span class="p">,</span> <span class="s1">&apos;value3&apos;</span><span class="p">])</span>
        <span class="p">)</span>
    <span class="p">])</span></pre></div></div><div class="versionadded"><p><span class="yiyi-st" id="yiyi-526"><span class="versionmodified">0.8&#x7248;&#x672C;&#x4E2D;&#x7684;&#x65B0;&#x529F;&#x80FD;</span></span></p></div><div class="admonition seealso"><p class="first admonition-title"><span class="yiyi-st" id="yiyi-527">&#x4E5F;&#x53EF;&#x4EE5;&#x770B;&#x770B;</span></p><p class="last"><span class="yiyi-st" id="yiyi-528"><a class="reference internal" href="#sqlalchemy.dialects.postgresql.HSTORE" title="sqlalchemy.dialects.postgresql.HSTORE"><code class="xref py py-class docutils literal"><span class="pre">HSTORE</span></code></a> - the Postgresql <code class="docutils literal"><span class="pre">HSTORE</span></code> datatype.</span></p></div><dl class="attribute"><dt id="sqlalchemy.dialects.postgresql.hstore.type"><span class="yiyi-st" id="yiyi-529"><code class="descname">&#x578B; T0&gt; <a class="headerlink" href="#sqlalchemy.dialects.postgresql.hstore.type" title="Permalink to this definition">&#xB6; T1&gt;</a></code></span></dt><dd><p><span class="yiyi-st" id="yiyi-530"><a class="reference internal" href="#sqlalchemy.dialects.postgresql.HSTORE" title="sqlalchemy.dialects.postgresql.HSTORE"><code class="xref py py-class docutils literal"><span class="pre">HSTORE</span></code></a>&#x7684;&#x522B;&#x540D;</span></p></dd></dl></dd></dl><dl class="class"><dt id="sqlalchemy.dialects.postgresql.INET"><span class="yiyi-st" id="yiyi-531"><em class="property">class</em> <code class="descclassname">sqlalchemy.dialects.postgresql&#x3002;</code> <code class="descname">INET</code> <a class="headerlink" href="#sqlalchemy.dialects.postgresql.INET" title="Permalink to this definition">&#xB6;</a></span></dt><dd><p><span class="yiyi-st" id="yiyi-532">&#x57FA;&#x7840;&#xFF1A;<a class="reference internal" href="core_type_api.html#sqlalchemy.types.TypeEngine" title="sqlalchemy.types.TypeEngine"><code class="xref py py-class docutils literal"><span class="pre">sqlalchemy.types.TypeEngine</span></code></a></span></p><dl class="attribute"><dt id="sqlalchemy.dialects.postgresql.INET.__init__"><span class="yiyi-st" id="yiyi-533"><code class="descname"> __&#x521D;&#x59CB;&#x5316;__  T0&gt; <a class="headerlink" href="#sqlalchemy.dialects.postgresql.INET.__init__" title="Permalink to this definition">&#xB6; T1&gt;</a></code></span></dt><dd><div class="inherited-member container"><span class="yiyi-st" id="yiyi-534"><em>&#x7EE7;&#x627F;&#x81EA;</em> <code class="xref py py-attr docutils literal"><span class="pre">__init__</span></code> <em>&#x5C5E;&#x6027;</em> <code class="xref py py-class docutils literal"><span class="pre">object</span></code></span></div><p><span class="yiyi-st" id="yiyi-535">x .__ init __&#xFF08;...&#xFF09;&#x521D;&#x59CB;&#x5316;x&#xFF1B;&#x8BF7;&#x53C2;&#x9605;&#x5E2E;&#x52A9;&#xFF08;&#x7C7B;&#x578B;&#xFF08;x&#xFF09;&#xFF09;&#x8FDB;&#x884C;&#x7B7E;&#x540D;</span></p></dd></dl></dd></dl><dl class="class"><dt id="sqlalchemy.dialects.postgresql.INTERVAL"><span class="yiyi-st" id="yiyi-536"><em class="property">class</em> <code class="descclassname">sqlalchemy.dialects.postgresql&#x3002;</code> <code class="descname">INTERVAL</code> <span class="sig-paren">&#xFF08;</span> <em>precision = None</em> <span class="sig-paren">&#xFF09; T5&gt; <a class="headerlink" href="#sqlalchemy.dialects.postgresql.INTERVAL" title="Permalink to this definition">&#xB6; T6&gt;</a></span></span></dt><dd><p><span class="yiyi-st" id="yiyi-537">&#x57FA;&#x7840;&#xFF1A;<a class="reference internal" href="core_type_api.html#sqlalchemy.types.TypeEngine" title="sqlalchemy.types.TypeEngine"><code class="xref py py-class docutils literal"><span class="pre">sqlalchemy.types.TypeEngine</span></code></a></span></p><p><span class="yiyi-st" id="yiyi-538">Postgresql INTERVAL&#x7C7B;&#x578B;&#x3002;</span></p><p><span class="yiyi-st" id="yiyi-539">&#x6240;&#x6709;DBAPI&#x53EF;&#x80FD;&#x4E0D;&#x652F;&#x6301;INTERVAL&#x7C7B;&#x578B;&#x3002;</span><span class="yiyi-st" id="yiyi-540">&#x5DF2;&#x77E5;&#x5728;psycopg2&#x4E0A;&#x5DE5;&#x4F5C;&#xFF0C;&#x800C;&#x4E0D;&#x662F;&#x5728;pg8000&#x6216;zxjdbc&#x4E0A;&#x5DE5;&#x4F5C;&#x3002;</span></p></dd></dl><dl class="class"><dt id="sqlalchemy.dialects.postgresql.JSON"><span class="yiyi-st" id="yiyi-541"><em class="property">class</em> <code class="descclassname">sqlalchemy.dialects.postgresql&#x3002;</code> <code class="descname">JSON</code> <span class="sig-paren">&#xFF08;</span> <em>none_as_null = False</em>&#xFF0C;<em> astext_type =&#x65E0; T5&gt; <span class="sig-paren">&#xFF09; T6&gt; <a class="headerlink" href="#sqlalchemy.dialects.postgresql.JSON" title="Permalink to this definition">&#xB6; T7&gt;</a></span></em></span></dt><dd><p><span class="yiyi-st" id="yiyi-542">&#x57FA;&#x7840;&#xFF1A;<a class="reference internal" href="core_type_basics.html#sqlalchemy.types.JSON" title="sqlalchemy.types.JSON"><code class="xref py py-class docutils literal"><span class="pre">sqlalchemy.types.JSON</span></code></a></span></p><p><span class="yiyi-st" id="yiyi-543">&#x8868;&#x793A;Postgresql JSON&#x7C7B;&#x578B;&#x3002;</span></p><p><span class="yiyi-st" id="yiyi-544">&#x8FD9;&#x79CD;&#x7C7B;&#x578B;&#x662F;&#x6838;&#x5FC3;&#x7EA7;<a class="reference internal" href="core_type_basics.html#sqlalchemy.types.JSON" title="sqlalchemy.types.JSON"><code class="xref py py-class docutils literal"><span class="pre">types.JSON</span></code></a>&#x7C7B;&#x578B;&#x7684;&#x7279;&#x5316;&#x3002;</span><span class="yiyi-st" id="yiyi-545">&#x8BF7;&#x52A1;&#x5FC5;&#x9605;&#x8BFB;<a class="reference internal" href="core_type_basics.html#sqlalchemy.types.JSON" title="sqlalchemy.types.JSON"><code class="xref py py-class docutils literal"><span class="pre">types.JSON</span></code></a>&#x7684;&#x6587;&#x6863;&#x4EE5;&#x83B7;&#x53D6;&#x6709;&#x5173;&#x5904;&#x7406;NULL&#x503C;&#x548C;ORM&#x4F7F;&#x7528;&#x7684;&#x91CD;&#x8981;&#x63D0;&#x793A;&#x3002;</span></p><div class="versionchanged"><p><span class="yiyi-st" id="yiyi-546"><span class="versionmodified">&#x5728;&#x7248;&#x672C;1.1&#x4E2D;&#x66F4;&#x6539;&#xFF1A;</span> <a class="reference internal" href="#sqlalchemy.dialects.postgresql.JSON" title="sqlalchemy.dialects.postgresql.JSON"><code class="xref py py-class docutils literal"><span class="pre">postgresql.JSON</span></code></a>&#x73B0;&#x5728;&#x662F;&#x65B0;&#x7684;<a class="reference internal" href="core_type_basics.html#sqlalchemy.types.JSON" title="sqlalchemy.types.JSON"><code class="xref py py-class docutils literal"><span class="pre">types.JSON</span></code></a>&#x7C7B;&#x578B;&#x7684;Postgresql&#x7279;&#x5B9A;&#x4E13;&#x7528;&#x3002;</span></p></div><p><span class="yiyi-st" id="yiyi-547">&#x7531;Postgresql&#x7248;&#x672C;&#x7684;<a class="reference internal" href="#sqlalchemy.dialects.postgresql.JSON" title="sqlalchemy.dialects.postgresql.JSON"><code class="xref py py-class docutils literal"><span class="pre">JSON</span></code></a>&#x63D0;&#x4F9B;&#x7684;&#x8FD0;&#x7B97;&#x7B26;&#x5305;&#x62EC;&#xFF1A;</span></p><ul><li><p class="first"><span class="yiyi-st" id="yiyi-548">&#x7D22;&#x5F15;&#x64CD;&#x4F5C;&#xFF08;<code class="docutils literal"><span class="pre">-&gt;</span></code>&#x8FD0;&#x7B97;&#x7B26;&#xFF09;&#xFF1A;</span></p><div class="highlight-python"><div class="highlight"><pre><span></span><span class="n">data_table</span><span class="o">.</span><span class="n">c</span><span class="o">.</span><span class="n">data</span><span class="p">[</span><span class="s1">&apos;some key&apos;</span><span class="p">]</span>

<span class="n">data_table</span><span class="o">.</span><span class="n">c</span><span class="o">.</span><span class="n">data</span><span class="p">[</span><span class="mi">5</span><span class="p">]</span></pre></div></div></li><li><p class="first"><span class="yiyi-st" id="yiyi-549">&#x8FD4;&#x56DE;&#x6587;&#x672C;&#x7684;&#x7D22;&#x5F15;&#x64CD;&#x4F5C;&#xFF08;<code class="docutils literal"><span class="pre">-&gt;&gt;</span></code>&#x8FD0;&#x7B97;&#x7B26;&#xFF09;&#xFF1A;</span></p><div class="highlight-python"><div class="highlight"><pre><span></span><span class="n">data_table</span><span class="o">.</span><span class="n">c</span><span class="o">.</span><span class="n">data</span><span class="p">[</span><span class="s1">&apos;some key&apos;</span><span class="p">]</span><span class="o">.</span><span class="n">astext</span> <span class="o">==</span> <span class="s1">&apos;some value&apos;</span></pre></div></div></li><li><p class="first"><span class="yiyi-st" id="yiyi-550">&#x4F7F;&#x7528;CAST&#x8FDB;&#x884C;&#x7D22;&#x5F15;&#x64CD;&#x4F5C;&#xFF08;&#x76F8;&#x5F53;&#x4E8E;<code class="docutils literal"><span class="pre">CAST&#xFF08;col</span> <span class="pre"> - &gt;&#xFF06;gt&#xFF1B;&gt;&#xFF06;lt&#xFF1B; / t2&gt; <span class="pre">[&apos;some</span> <span class="pre">key&apos; t4&gt; <span class="pre">AS</span> <span class="pre">&#xFF06;lt&#xFF1B; type&#xFF06;gt&#xFF1B;&#xFF09;</span></span></span></code>&#xFF09;&#xFF1A;</span></p><div class="highlight-python"><div class="highlight"><pre><span></span><span class="n">data_table</span><span class="o">.</span><span class="n">c</span><span class="o">.</span><span class="n">data</span><span class="p">[</span><span class="s1">&apos;some key&apos;</span><span class="p">]</span><span class="o">.</span><span class="n">astext</span><span class="o">.</span><span class="n">cast</span><span class="p">(</span><span class="n">Integer</span><span class="p">)</span> <span class="o">==</span> <span class="mi">5</span></pre></div></div></li><li><p class="first"><span class="yiyi-st" id="yiyi-551">&#x8DEF;&#x5F84;&#x7D22;&#x5F15;&#x64CD;&#x4F5C;&#xFF08;<code class="docutils literal"><span class="pre">#&gt;</span></code>&#x8FD0;&#x7B97;&#x7B26;&#xFF09;&#xFF1A;</span></p><div class="highlight-python"><div class="highlight"><pre><span></span><span class="n">data_table</span><span class="o">.</span><span class="n">c</span><span class="o">.</span><span class="n">data</span><span class="p">[(</span><span class="s1">&apos;key_1&apos;</span><span class="p">,</span> <span class="s1">&apos;key_2&apos;</span><span class="p">,</span> <span class="mi">5</span><span class="p">,</span> <span class="o">...</span><span class="p">,</span> <span class="s1">&apos;key_n&apos;</span><span class="p">)]</span></pre></div></div></li><li><p class="first"><span class="yiyi-st" id="yiyi-552">&#x8FD4;&#x56DE;&#x6587;&#x672C;&#x7684;&#x8DEF;&#x5F84;&#x7D22;&#x5F15;&#x64CD;&#x4F5C;&#xFF08;<code class="docutils literal"><span class="pre">#&gt;&gt;</span></code>&#x8FD0;&#x7B97;&#x7B26;&#xFF09;&#xFF1A;</span></p><div class="highlight-python"><div class="highlight"><pre><span></span><span class="n">data_table</span><span class="o">.</span><span class="n">c</span><span class="o">.</span><span class="n">data</span><span class="p">[(</span><span class="s1">&apos;key_1&apos;</span><span class="p">,</span> <span class="s1">&apos;key_2&apos;</span><span class="p">,</span> <span class="mi">5</span><span class="p">,</span> <span class="o">...</span><span class="p">,</span> <span class="s1">&apos;key_n&apos;</span><span class="p">)]</span><span class="o">.</span><span class="n">astext</span> <span class="o">==</span> <span class="s1">&apos;some value&apos;</span></pre></div></div></li></ul><div class="versionchanged"><p><span class="yiyi-st" id="yiyi-553"><span class="versionmodified">&#x7248;&#x672C;1.1&#x4E2D;&#x66F4;&#x6539;&#xFF1A;</span> JSON&#x5BF9;&#x8C61;&#x4E0A;&#x7684;<a class="reference internal" href="core_sqlelement.html#sqlalchemy.sql.expression.ColumnElement.cast" title="sqlalchemy.sql.expression.ColumnElement.cast"><code class="xref py py-meth docutils literal"><span class="pre">ColumnElement.cast()</span></code></a>&#x8FD0;&#x7B97;&#x7B26;&#x73B0;&#x5728;&#x8981;&#x6C42;&#x660E;&#x786E;&#x8C03;&#x7528;<a class="reference internal" href="#sqlalchemy.dialects.postgresql.JSON.Comparator.astext" title="sqlalchemy.dialects.postgresql.JSON.Comparator.astext"><code class="xref py py-attr docutils literal"><span class="pre">JSON.Comparator.astext</span></code></a>&#x4FEE;&#x9970;&#x7B26;&#xFF0C;&#x5982;&#x679C;&#x6F14;&#x5458;&#x53EA;&#x80FD;&#x4F7F;&#x7528;&#x6587;&#x672C;&#x5B57;&#x7B26;&#x4E32;&#x3002;</span></p></div><p><span class="yiyi-st" id="yiyi-554">&#x7D22;&#x5F15;&#x64CD;&#x4F5C;&#x9ED8;&#x8BA4;&#x8FD4;&#x56DE;&#x4E00;&#x4E2A;&#x9ED8;&#x8BA4;&#x7C7B;&#x578B;&#x9ED8;&#x8BA4;&#x4E3A;<a class="reference internal" href="#sqlalchemy.dialects.postgresql.JSON" title="sqlalchemy.dialects.postgresql.JSON"><code class="xref py py-class docutils literal"><span class="pre">JSON</span></code></a>&#x7684;&#x8868;&#x8FBE;&#x5F0F;&#x5BF9;&#x8C61;&#xFF0C;&#x8FD9;&#x6837;&#x53EF;&#x4EE5;&#x6839;&#x636E;&#x7ED3;&#x679C;&#x7C7B;&#x578B;&#x8C03;&#x7528;&#x66F4;&#x591A;&#x7684;&#x9762;&#x5411;JSON&#x7684;&#x6307;&#x4EE4;&#x3002;</span></p><p><span class="yiyi-st" id="yiyi-555">&#x81EA;&#x5B9A;&#x4E49;&#x5E8F;&#x5217;&#x5316;&#x5668;&#x548C;&#x53CD;&#x5E8F;&#x5217;&#x5316;&#x5668;&#x5728;&#x65B9;&#x8A00;&#x7EA7;&#x522B;&#x6307;&#x5B9A;&#xFF0C;&#x5373;&#x4F7F;&#x7528;<a class="reference internal" href="core_engines.html#sqlalchemy.create_engine" title="sqlalchemy.create_engine"><code class="xref py py-func docutils literal"><span class="pre">create_engine()</span></code></a>&#x3002;</span><span class="yiyi-st" id="yiyi-556">&#x539F;&#x56E0;&#x5728;&#x4E8E;&#xFF0C;&#x5728;&#x4F7F;&#x7528;psycopg2&#x65F6;&#xFF0C;DBAPI&#x53EA;&#x5141;&#x8BB8;&#x5728;&#x6BCF;&#x4E2A;&#x6E38;&#x6807;&#x6216;&#x6BCF;&#x4E2A;&#x8FDE;&#x63A5;&#x7EA7;&#x522B;&#x4F7F;&#x7528;&#x4E32;&#x884C;&#x5668;&#x3002;</span><span class="yiyi-st" id="yiyi-557">&#x4F8B;&#x5982;&#x3002;&#xFF1A;</span></p><div class="highlight-python"><div class="highlight"><pre><span></span><span class="n">engine</span> <span class="o">=</span> <span class="n">create_engine</span><span class="p">(</span><span class="s2">&quot;postgresql://scott:tiger@localhost/test&quot;</span><span class="p">,</span>
                        <span class="n">json_serializer</span><span class="o">=</span><span class="n">my_serialize_fn</span><span class="p">,</span>
                        <span class="n">json_deserializer</span><span class="o">=</span><span class="n">my_deserialize_fn</span>
                <span class="p">)</span></pre></div></div><p><span class="yiyi-st" id="yiyi-558">&#x4F7F;&#x7528;psycopg2&#x65B9;&#x8A00;&#x65F6;&#xFF0C;&#x4F7F;&#x7528;<code class="docutils literal"><span class="pre">psycopg2.extras.register_default_json</span></code>&#x5BF9;&#x6570;&#x636E;&#x5E93;&#x6CE8;&#x518C;json_deserializer&#x3002;</span></p><div class="admonition seealso"><p class="first admonition-title"><span class="yiyi-st" id="yiyi-559">&#x4E5F;&#x53EF;&#x4EE5;&#x770B;&#x770B;</span></p><p><span class="yiyi-st" id="yiyi-560"><a class="reference internal" href="core_type_basics.html#sqlalchemy.types.JSON" title="sqlalchemy.types.JSON"><code class="xref py py-class docutils literal"><span class="pre">types.JSON</span></code></a>  - &#x6838;&#x5FC3;&#x7EA7;JSON&#x7C7B;&#x578B;</span></p><p class="last"><span class="yiyi-st" id="yiyi-561"><a class="reference internal" href="#sqlalchemy.dialects.postgresql.JSONB" title="sqlalchemy.dialects.postgresql.JSONB"><code class="xref py py-class docutils literal"><span class="pre">JSONB</span></code></a></span></p></div><dl class="class"><dt id="sqlalchemy.dialects.postgresql.JSON.Comparator"><span class="yiyi-st" id="yiyi-562"><em class="property">class</em> <code class="descname">&#x6BD4;&#x8F83;&#x5668;</code> <span class="sig-paren">&#xFF08;</span> <em>expr</em> <span class="sig-paren">&#xFF09;</span> <a class="headerlink" href="#sqlalchemy.dialects.postgresql.JSON.Comparator" title="Permalink to this definition">&#xB6;</a></span></dt><dd><p><span class="yiyi-st" id="yiyi-563">&#x57FA;&#x7840;&#xFF1A;<code class="xref py py-class docutils literal"><span class="pre">sqlalchemy.types.Comparator</span></code></span></p><p><span class="yiyi-st" id="yiyi-564">&#x4E3A;<a class="reference internal" href="#sqlalchemy.dialects.postgresql.JSON" title="sqlalchemy.dialects.postgresql.JSON"><code class="xref py py-class docutils literal"><span class="pre">JSON</span></code></a>&#x5B9A;&#x4E49;&#x6BD4;&#x8F83;&#x64CD;&#x4F5C;&#x3002;</span></p><dl class="attribute"><dt id="sqlalchemy.dialects.postgresql.JSON.Comparator.astext"><span class="yiyi-st" id="yiyi-565"><code class="descname"> astext  T0&gt; <a class="headerlink" href="#sqlalchemy.dialects.postgresql.JSON.Comparator.astext" title="Permalink to this definition">&#xB6; T1&gt;</a></code></span></dt><dd><p><span class="yiyi-st" id="yiyi-566">&#x5728;&#x7D22;&#x5F15;&#x8868;&#x8FBE;&#x5F0F;&#x4E2D;&#xFF0C;&#x4F7F;&#x7528;SQL&#x4E2D;&#x5448;&#x73B0;&#x65F6;&#x7684;&#x201C;astext&#x201D;&#xFF08;&#x4F8B;&#x5982;&#x201C; -  &gt;&gt;&#x201D;&#xFF09;&#x8F6C;&#x6362;&#x3002;</span></p><p><span class="yiyi-st" id="yiyi-567">&#x4F8B;&#x5982;&#x3002;&#xFF1A;</span></p><div class="highlight-python"><div class="highlight"><pre><span></span><span class="n">select</span><span class="p">([</span><span class="n">data_table</span><span class="o">.</span><span class="n">c</span><span class="o">.</span><span class="n">data</span><span class="p">[</span><span class="s1">&apos;some key&apos;</span><span class="p">]</span><span class="o">.</span><span class="n">astext</span><span class="p">])</span></pre></div></div><div class="admonition seealso"><p class="first admonition-title"><span class="yiyi-st" id="yiyi-568">&#x4E5F;&#x53EF;&#x4EE5;&#x770B;&#x770B;</span></p><p class="last"><span class="yiyi-st" id="yiyi-569"><a class="reference internal" href="core_sqlelement.html#sqlalchemy.sql.expression.ColumnElement.cast" title="sqlalchemy.sql.expression.ColumnElement.cast"><code class="xref py py-meth docutils literal"><span class="pre">ColumnElement.cast()</span></code></a></span></p></div></dd></dl></dd></dl><dl class="method"><dt id="sqlalchemy.dialects.postgresql.JSON.__init__"><span class="yiyi-st" id="yiyi-570"><code class="descclassname">JSON&#x3002;</code> <code class="descname">__ init __</code> <span class="sig-paren">&#xFF08;</span> <em>none_as_null = False</em>&#xFF0C;<em>astext_type = None</em> <span class="sig-paren">&#xFF09;  T5&gt; <a class="headerlink" href="#sqlalchemy.dialects.postgresql.JSON.__init__" title="Permalink to this definition">&#xB6; T6&gt;</a></span></span></dt><dd><p><span class="yiyi-st" id="yiyi-571">&#x6784;&#x5EFA;&#x4E00;&#x4E2A;<a class="reference internal" href="#sqlalchemy.dialects.postgresql.JSON" title="sqlalchemy.dialects.postgresql.JSON"><code class="xref py py-class docutils literal"><span class="pre">JSON</span></code></a>&#x7C7B;&#x578B;&#x3002;</span></p><table class="docutils field-list" frame="void" rules="none"><tbody valign="top"><tr class="field-odd field"><th class="field-name"><span class="yiyi-st" id="yiyi-572">&#x53C2;&#x6570;&#xFF1A;</span></th><td class="field-body"><ul class="first last simple"><li><span class="yiyi-st" id="yiyi-578"><span class="target" id="sqlalchemy.dialects.postgresql.JSON.params.none_as_null"></span> <strong>none_as_null</strong> <a class="paramlink headerlink reference internal" href="#sqlalchemy.dialects.postgresql.JSON.params.none_as_null">&#xB6;</a>  - </span><p><span class="yiyi-st" id="yiyi-573">&#x5982;&#x679C;&#x4E3A;True&#xFF0C;&#x5219;&#x5C06;&#x503C;<code class="docutils literal"><span class="pre">None</span></code>&#x4FDD;&#x7559;&#x4E3A;SQL NULL&#x503C;&#xFF0C;&#x800C;&#x4E0D;&#x662F;<code class="docutils literal"><span class="pre">null</span></code>&#x7684;JSON&#x7F16;&#x7801;&#x3002;</span><span class="yiyi-st" id="yiyi-574">&#x8BF7;&#x6CE8;&#x610F;&#xFF0C;&#x5F53;&#x6B64;&#x6807;&#x5FD7;&#x4E3A;False&#x65F6;&#xFF0C;<a class="reference internal" href="core_sqlelement.html#sqlalchemy.sql.expression.null" title="sqlalchemy.sql.expression.null"><code class="xref py py-func docutils literal"><span class="pre">null()</span></code></a>&#x7ED3;&#x6784;&#x4ECD;&#x53EF;&#x7528;&#x4E8E;&#x4FDD;&#x7559;NULL&#x503C;&#xFF1A;</span></p><div class="highlight-python"><div class="highlight"><pre><span></span><span class="kn">from</span> <span class="nn">sqlalchemy</span> <span class="kn">import</span> <span class="n">null</span>
<span class="n">conn</span><span class="o">.</span><span class="n">execute</span><span class="p">(</span><span class="n">table</span><span class="o">.</span><span class="n">insert</span><span class="p">(),</span> <span class="n">data</span><span class="o">=</span><span class="n">null</span><span class="p">())</span></pre></div></div><div class="versionchanged"><p><span class="yiyi-st" id="yiyi-575"><span class="versionmodified">&#x66F4;&#x6539;&#x4E3A;0.9.8&#x7248;&#xFF1A;</span>  - &#x73B0;&#x5728;&#x652F;&#x6301;<code class="docutils literal"><span class="pre">none_as_null</span></code>&#x548C;<a class="reference internal" href="core_sqlelement.html#sqlalchemy.sql.expression.null" title="sqlalchemy.sql.expression.null"><code class="xref py py-func docutils literal"><span class="pre">null()</span></code></a>&#x4EE5;&#x4FDD;&#x7559;NULL&#x503C;&#x3002;</span></p></div><div class="admonition seealso"><p class="first admonition-title"><span class="yiyi-st" id="yiyi-576">&#x4E5F;&#x53EF;&#x4EE5;&#x770B;&#x770B;</span></p><p class="last"><span class="yiyi-st" id="yiyi-577"><a class="reference internal" href="core_type_basics.html#sqlalchemy.types.JSON.NULL" title="sqlalchemy.types.JSON.NULL"><code class="xref py py-attr docutils literal"><span class="pre">JSON.NULL</span></code></a></span></p></div></li><li><span class="yiyi-st" id="yiyi-582"><span class="target" id="sqlalchemy.dialects.postgresql.JSON.params.astext_type"></span> <strong>astext_type</strong> <a class="paramlink headerlink reference internal" href="#sqlalchemy.dialects.postgresql.JSON.params.astext_type">&#xB6;</a>  - </span><p><span class="yiyi-st" id="yiyi-579">&#x5728;&#x7D22;&#x5F15;&#x5C5E;&#x6027;&#x4E0A;&#x7528;&#x4E8E;<a class="reference internal" href="#sqlalchemy.dialects.postgresql.JSON.Comparator.astext" title="sqlalchemy.dialects.postgresql.JSON.Comparator.astext"><code class="xref py py-attr docutils literal"><span class="pre">JSON.Comparator.astext</span></code></a>&#x8BBF;&#x95EE;&#x5668;&#x7684;&#x7C7B;&#x578B;&#x3002;</span><span class="yiyi-st" id="yiyi-580">&#x9ED8;&#x8BA4;&#x4E3A;<a class="reference internal" href="core_type_basics.html#sqlalchemy.types.Text" title="sqlalchemy.types.Text"><code class="xref py py-class docutils literal"><span class="pre">types.Text</span></code></a>&#x3002;</span></p><div class="versionadded"><p><span class="yiyi-st" id="yiyi-581"><span class="versionmodified">&#x7248;&#x672C;1.1&#x4E2D;&#x7684;&#x65B0;&#x529F;&#x80FD;</span></span></p></div></li></ul></td></tr></tbody></table></dd></dl><dl class="attribute"><dt id="sqlalchemy.dialects.postgresql.JSON.comparator_factory"><span class="yiyi-st" id="yiyi-583"><code class="descclassname"> JSON&#x3002; T0&gt; <code class="descname"> comparator_factory  T1&gt; <a class="headerlink" href="#sqlalchemy.dialects.postgresql.JSON.comparator_factory" title="Permalink to this definition">&#xB6; T2&gt;</a></code></code></span></dt><dd><p><span class="yiyi-st" id="yiyi-584"><a class="reference internal" href="#sqlalchemy.dialects.postgresql.JSON.Comparator" title="sqlalchemy.dialects.postgresql.JSON.Comparator"><code class="xref py py-class docutils literal"><span class="pre">Comparator</span></code></a>&#x7684;&#x522B;&#x540D;</span></p></dd></dl></dd></dl><dl class="class"><dt id="sqlalchemy.dialects.postgresql.JSONB"><span class="yiyi-st" id="yiyi-585"><em class="property">class</em> <code class="descclassname">sqlalchemy.dialects.postgresql&#x3002;</code> <code class="descname">JSONB</code> <span class="sig-paren">&#xFF08;</span> <em>none_as_null = False</em>&#xFF0C;<em> astext_type =&#x65E0; T5&gt; <span class="sig-paren">&#xFF09; T6&gt; <a class="headerlink" href="#sqlalchemy.dialects.postgresql.JSONB" title="Permalink to this definition">&#xB6; T7&gt;</a></span></em></span></dt><dd><p><span class="yiyi-st" id="yiyi-586">&#x57FA;&#x7840;&#xFF1A;<code class="xref py py-class docutils literal"><span class="pre">sqlalchemy.dialects.postgresql.json.JSON</span></code></span></p><p><span class="yiyi-st" id="yiyi-587">&#x8868;&#x793A;Postgresql JSONB&#x7C7B;&#x578B;&#x3002;</span></p><p><span class="yiyi-st" id="yiyi-588"><a class="reference internal" href="#sqlalchemy.dialects.postgresql.JSONB" title="sqlalchemy.dialects.postgresql.JSONB"><code class="xref py py-class docutils literal"><span class="pre">JSONB</span></code></a>&#x7C7B;&#x578B;&#x5B58;&#x50A8;&#x4EFB;&#x610F;&#x7684;JSONB&#x683C;&#x5F0F;&#x6570;&#x636E;&#xFF0C;&#x4F8B;&#x5982;&#xFF1A;</span></p><div class="highlight-python"><div class="highlight"><pre><span></span><span class="n">data_table</span> <span class="o">=</span> <span class="n">Table</span><span class="p">(</span><span class="s1">&apos;data_table&apos;</span><span class="p">,</span> <span class="n">metadata</span><span class="p">,</span>
    <span class="n">Column</span><span class="p">(</span><span class="s1">&apos;id&apos;</span><span class="p">,</span> <span class="n">Integer</span><span class="p">,</span> <span class="n">primary_key</span><span class="o">=</span><span class="bp">True</span><span class="p">),</span>
    <span class="n">Column</span><span class="p">(</span><span class="s1">&apos;data&apos;</span><span class="p">,</span> <span class="n">JSONB</span><span class="p">)</span>
<span class="p">)</span>

<span class="k">with</span> <span class="n">engine</span><span class="o">.</span><span class="n">connect</span><span class="p">()</span> <span class="k">as</span> <span class="n">conn</span><span class="p">:</span>
    <span class="n">conn</span><span class="o">.</span><span class="n">execute</span><span class="p">(</span>
        <span class="n">data_table</span><span class="o">.</span><span class="n">insert</span><span class="p">(),</span>
        <span class="n">data</span> <span class="o">=</span> <span class="p">{</span><span class="s2">&quot;key1&quot;</span><span class="p">:</span> <span class="s2">&quot;value1&quot;</span><span class="p">,</span> <span class="s2">&quot;key2&quot;</span><span class="p">:</span> <span class="s2">&quot;value2&quot;</span><span class="p">}</span>
    <span class="p">)</span></pre></div></div><p><span class="yiyi-st" id="yiyi-589"><a class="reference internal" href="#sqlalchemy.dialects.postgresql.JSONB" title="sqlalchemy.dialects.postgresql.JSONB"><code class="xref py py-class docutils literal"><span class="pre">JSONB</span></code></a>&#x7C7B;&#x578B;&#x5305;&#x542B;<a class="reference internal" href="#sqlalchemy.dialects.postgresql.JSON" title="sqlalchemy.dialects.postgresql.JSON"><code class="xref py py-class docutils literal"><span class="pre">JSON</span></code></a>&#x63D0;&#x4F9B;&#x7684;&#x6240;&#x6709;&#x64CD;&#x4F5C;&#xFF0C;&#x5305;&#x62EC;&#x7D22;&#x5F15;&#x64CD;&#x4F5C;&#x7684;&#x76F8;&#x540C;&#x884C;&#x4E3A;&#x3002;</span><span class="yiyi-st" id="yiyi-590">It also adds additional operators specific to JSONB, including <a class="reference internal" href="#sqlalchemy.dialects.postgresql.JSONB.Comparator.has_key" title="sqlalchemy.dialects.postgresql.JSONB.Comparator.has_key"><code class="xref py py-meth docutils literal"><span class="pre">JSONB.Comparator.has_key()</span></code></a>, <a class="reference internal" href="#sqlalchemy.dialects.postgresql.JSONB.Comparator.has_all" title="sqlalchemy.dialects.postgresql.JSONB.Comparator.has_all"><code class="xref py py-meth docutils literal"><span class="pre">JSONB.Comparator.has_all()</span></code></a>, <a class="reference internal" href="#sqlalchemy.dialects.postgresql.JSONB.Comparator.has_any" title="sqlalchemy.dialects.postgresql.JSONB.Comparator.has_any"><code class="xref py py-meth docutils literal"><span class="pre">JSONB.Comparator.has_any()</span></code></a>, <a class="reference internal" href="#sqlalchemy.dialects.postgresql.JSONB.Comparator.contains" title="sqlalchemy.dialects.postgresql.JSONB.Comparator.contains"><code class="xref py py-meth docutils literal"><span class="pre">JSONB.Comparator.contains()</span></code></a>, and <a class="reference internal" href="#sqlalchemy.dialects.postgresql.JSONB.Comparator.contained_by" title="sqlalchemy.dialects.postgresql.JSONB.Comparator.contained_by"><code class="xref py py-meth docutils literal"><span class="pre">JSONB.Comparator.contained_by()</span></code></a>.</span></p><p><span class="yiyi-st" id="yiyi-591">&#x4E0E;<a class="reference internal" href="#sqlalchemy.dialects.postgresql.JSON" title="sqlalchemy.dialects.postgresql.JSON"><code class="xref py py-class docutils literal"><span class="pre">JSON</span></code></a>&#x7C7B;&#x578B;&#x7C7B;&#x4F3C;&#xFF0C;&#x5F53;&#x4E0E;ORM&#x4E00;&#x8D77;&#x4F7F;&#x7528;&#x65F6;&#xFF0C;<a class="reference internal" href="#sqlalchemy.dialects.postgresql.JSONB" title="sqlalchemy.dialects.postgresql.JSONB"><code class="xref py py-class docutils literal"><span class="pre">JSONB</span></code></a>&#x7C7B;&#x578B;&#x4E0D;&#x68C0;&#x6D4B;&#x5C31;&#x5730;&#x66F4;&#x6539;&#xFF0C;&#x9664;&#x975E;<a class="reference internal" href="orm_extensions_mutable.html#module-sqlalchemy.ext.mutable" title="sqlalchemy.ext.mutable"><code class="xref py py-mod docutils literal"><span class="pre">sqlalchemy.ext.mutable</span></code></a>&#x6269;&#x5C55;&#x7528;&#x6765;&#x3002;</span></p><p><span class="yiyi-st" id="yiyi-592">&#x81EA;&#x5B9A;&#x4E49;&#x5E8F;&#x5217;&#x5316;&#x5668;&#x548C;&#x53CD;&#x5E8F;&#x5217;&#x5316;&#x5668;&#x4F7F;&#x7528;<code class="docutils literal"><span class="pre">json_serializer</span></code>&#x548C;<code class="docutils literal"><span class="pre">json_deserializer</span></code>&#x5173;&#x952E;&#x5B57;&#x53C2;&#x6570;&#x4E0E;<a class="reference internal" href="#sqlalchemy.dialects.postgresql.JSON" title="sqlalchemy.dialects.postgresql.JSON"><code class="xref py py-class docutils literal"><span class="pre">JSON</span></code></a>&#x7C7B;&#x5171;&#x4EAB;&#x3002;</span><span class="yiyi-st" id="yiyi-593">&#x8FD9;&#x4E9B;&#x5FC5;&#x987B;&#x4F7F;&#x7528;<a class="reference internal" href="core_engines.html#sqlalchemy.create_engine" title="sqlalchemy.create_engine"><code class="xref py py-func docutils literal"><span class="pre">create_engine()</span></code></a>&#x5728;&#x65B9;&#x8A00;&#x7EA7;&#x522B;&#x6307;&#x5B9A;&#x3002;</span><span class="yiyi-st" id="yiyi-594">&#x5728;&#x4F7F;&#x7528;psycopg2&#x65F6;&#xFF0C;&#x5E8F;&#x5217;&#x5316;&#x7A0B;&#x5E8F;&#x4F7F;&#x7528;&#x57FA;&#x4E8E;&#x6BCF;&#x4E2A;&#x8FDE;&#x63A5;&#x7684;<code class="docutils literal"><span class="pre">psycopg2.extras.register_default_jsonb</span></code>&#x4E0E;jsonb&#x7C7B;&#x578B;&#x5173;&#x8054;&#xFF0C;&#x4E0E;<code class="docutils literal"><span class="pre">psycopg2.extras.register_default_json</span></code>&#x76F8;&#x540C;&#x7528;&#x4E8E;&#x4F7F;&#x7528;json&#x7C7B;&#x578B;&#x6CE8;&#x518C;&#x8FD9;&#x4E9B;&#x5904;&#x7406;&#x7A0B;&#x5E8F;&#x3002;</span></p><div class="versionadded"><p><span class="yiyi-st" id="yiyi-595"><span class="versionmodified">&#x7248;&#x672C;0.9.7&#x4E2D;&#x7684;&#x65B0;&#x529F;&#x80FD;</span></span></p></div><div class="admonition seealso"><p class="first admonition-title"><span class="yiyi-st" id="yiyi-596">&#x4E5F;&#x53EF;&#x4EE5;&#x770B;&#x770B;</span></p><p class="last"><span class="yiyi-st" id="yiyi-597"><a class="reference internal" href="#sqlalchemy.dialects.postgresql.JSON" title="sqlalchemy.dialects.postgresql.JSON"><code class="xref py py-class docutils literal"><span class="pre">JSON</span></code></a></span></p></div><dl class="class"><dt id="sqlalchemy.dialects.postgresql.JSONB.Comparator"><span class="yiyi-st" id="yiyi-598"><em class="property">class</em> <code class="descname">&#x6BD4;&#x8F83;&#x5668;</code> <span class="sig-paren">&#xFF08;</span> <em>expr</em> <span class="sig-paren">&#xFF09;</span> <a class="headerlink" href="#sqlalchemy.dialects.postgresql.JSONB.Comparator" title="Permalink to this definition">&#xB6;</a></span></dt><dd><p><span class="yiyi-st" id="yiyi-599">&#x57FA;&#x7840;&#xFF1A;<code class="xref py py-class docutils literal"><span class="pre">sqlalchemy.dialects.postgresql.json.Comparator</span></code></span></p><p><span class="yiyi-st" id="yiyi-600">&#x4E3A;<a class="reference internal" href="#sqlalchemy.dialects.postgresql.JSON" title="sqlalchemy.dialects.postgresql.JSON"><code class="xref py py-class docutils literal"><span class="pre">JSON</span></code></a>&#x5B9A;&#x4E49;&#x6BD4;&#x8F83;&#x64CD;&#x4F5C;&#x3002;</span></p><dl class="method"><dt id="sqlalchemy.dialects.postgresql.JSONB.Comparator.contained_by"><span class="yiyi-st" id="yiyi-601"><code class="descname"> contained_by  T0&gt; <span class="sig-paren">&#xFF08; T1&gt; <em>&#x5176;&#x4ED6; T2&gt; <span class="sig-paren">&#xFF09; T3&gt; <a class="headerlink" href="#sqlalchemy.dialects.postgresql.JSONB.Comparator.contained_by" title="Permalink to this definition">&#xB6; T4&gt;</a></span></em></span></code></span></dt><dd><p><span class="yiyi-st" id="yiyi-602">&#x5E03;&#x5C14;&#x8868;&#x8FBE;&#x5F0F;&#x3002;</span><span class="yiyi-st" id="yiyi-603">&#x6D4B;&#x8BD5;&#x952E;&#x662F;&#x5426;&#x662F;&#x53C2;&#x6570;jsonb&#x8868;&#x8FBE;&#x5F0F;&#x7684;&#x952E;&#x7684;&#x771F;&#x5B50;&#x96C6;&#x3002;</span></p></dd></dl><dl class="method"><dt id="sqlalchemy.dialects.postgresql.JSONB.Comparator.contains"><span class="yiyi-st" id="yiyi-604"><code class="descname">&#x5305;&#x542B;</code> <span class="sig-paren">&#xFF08;</span> <em>&#x5176;&#x4ED6;</em>&#xFF0C;<em>** kwargs</em> <span class="sig-paren">&#xFF09;</span> <a class="headerlink" href="#sqlalchemy.dialects.postgresql.JSONB.Comparator.contains" title="Permalink to this definition"></a> &gt;</span></dt><dd><p><span class="yiyi-st" id="yiyi-605">&#x5E03;&#x5C14;&#x8868;&#x8FBE;&#x5F0F;&#x3002;</span><span class="yiyi-st" id="yiyi-606">&#x6D4B;&#x8BD5;&#x952E;&#xFF08;&#x6216;&#x6570;&#x7EC4;&#xFF09;&#x662F;&#x5426;&#x662F;/&#x5305;&#x542B;&#x53C2;&#x6570;jsonb&#x8868;&#x8FBE;&#x5F0F;&#x7684;&#x952E;&#x7684;&#x8D85;&#x96C6;&#x3002;</span></p></dd></dl><dl class="method"><dt id="sqlalchemy.dialects.postgresql.JSONB.Comparator.has_all"><span class="yiyi-st" id="yiyi-607"><code class="descname"> has_all  T0&gt; <span class="sig-paren">&#xFF08; T1&gt; <em>&#x5176;&#x4ED6; T2&gt; <span class="sig-paren">&#xFF09; T3&gt; <a class="headerlink" href="#sqlalchemy.dialects.postgresql.JSONB.Comparator.has_all" title="Permalink to this definition">&#xB6; T4&gt;</a></span></em></span></code></span></dt><dd><p><span class="yiyi-st" id="yiyi-608">&#x5E03;&#x5C14;&#x8868;&#x8FBE;&#x5F0F;&#x3002;</span><span class="yiyi-st" id="yiyi-609">&#x6D4B;&#x8BD5;jsonb&#x4E2D;&#x662F;&#x5426;&#x5B58;&#x5728;&#x6240;&#x6709;&#x952E;</span></p></dd></dl><dl class="method"><dt id="sqlalchemy.dialects.postgresql.JSONB.Comparator.has_any"><span class="yiyi-st" id="yiyi-610"><code class="descname"> has_any  T0&gt; <span class="sig-paren">&#xFF08; T1&gt; <em>&#x5176;&#x4ED6; T2&gt; <span class="sig-paren">&#xFF09; T3&gt; <a class="headerlink" href="#sqlalchemy.dialects.postgresql.JSONB.Comparator.has_any" title="Permalink to this definition">&#xB6; T4&gt;</a></span></em></span></code></span></dt><dd><p><span class="yiyi-st" id="yiyi-611">&#x5E03;&#x5C14;&#x8868;&#x8FBE;&#x5F0F;&#x3002;</span><span class="yiyi-st" id="yiyi-612">&#x6D4B;&#x8BD5;jsonb&#x4E2D;&#x662F;&#x5426;&#x5B58;&#x5728;&#x4EFB;&#x4F55;&#x5BC6;&#x94A5;</span></p></dd></dl><dl class="method"><dt id="sqlalchemy.dialects.postgresql.JSONB.Comparator.has_key"><span class="yiyi-st" id="yiyi-613"><code class="descname">&#x5BF9;&#x8C61;&#x7684;has_key  T0&gt; <span class="sig-paren">&#xFF08; T1&gt; <em>&#x5176;&#x4ED6; T2&gt; <span class="sig-paren">&#xFF09; T3&gt; <a class="headerlink" href="#sqlalchemy.dialects.postgresql.JSONB.Comparator.has_key" title="Permalink to this definition">&#xB6; T4&gt;</a></span></em></span></code></span></dt><dd><p><span class="yiyi-st" id="yiyi-614">&#x5E03;&#x5C14;&#x8868;&#x8FBE;&#x5F0F;&#x3002;</span><span class="yiyi-st" id="yiyi-615">&#x6D4B;&#x8BD5;&#x5BC6;&#x94A5;&#x7684;&#x5B58;&#x5728;&#x3002;</span><span class="yiyi-st" id="yiyi-616">&#x8BF7;&#x6CE8;&#x610F;&#xFF0C;&#x8BE5;&#x5BC6;&#x94A5;&#x53EF;&#x80FD;&#x662F;SQLA&#x8868;&#x8FBE;&#x5F0F;&#x3002;</span></p></dd></dl></dd></dl><dl class="attribute"><dt id="sqlalchemy.dialects.postgresql.JSONB.comparator_factory"><span class="yiyi-st" id="yiyi-617"><code class="descclassname"> JSONB&#x3002; T0&gt; <code class="descname"> comparator_factory  T1&gt; <a class="headerlink" href="#sqlalchemy.dialects.postgresql.JSONB.comparator_factory" title="Permalink to this definition">&#xB6; T2&gt;</a></code></code></span></dt><dd><p><span class="yiyi-st" id="yiyi-618"><a class="reference internal" href="#sqlalchemy.dialects.postgresql.JSONB.Comparator" title="sqlalchemy.dialects.postgresql.JSONB.Comparator"><code class="xref py py-class docutils literal"><span class="pre">Comparator</span></code></a>&#x7684;&#x522B;&#x540D;</span></p></dd></dl></dd></dl><dl class="class"><dt id="sqlalchemy.dialects.postgresql.MACADDR"><span class="yiyi-st" id="yiyi-619"><em class="property">class</em> <code class="descclassname">sqlalchemy.dialects.postgresql&#x3002;</code> <code class="descname">MACADDR</code> <a class="headerlink" href="#sqlalchemy.dialects.postgresql.MACADDR" title="Permalink to this definition">&#xB6;</a></span></dt><dd><p><span class="yiyi-st" id="yiyi-620">&#x57FA;&#x7840;&#xFF1A;<a class="reference internal" href="core_type_api.html#sqlalchemy.types.TypeEngine" title="sqlalchemy.types.TypeEngine"><code class="xref py py-class docutils literal"><span class="pre">sqlalchemy.types.TypeEngine</span></code></a></span></p><dl class="attribute"><dt id="sqlalchemy.dialects.postgresql.MACADDR.__init__"><span class="yiyi-st" id="yiyi-621"><code class="descname"> __&#x521D;&#x59CB;&#x5316;__  T0&gt; <a class="headerlink" href="#sqlalchemy.dialects.postgresql.MACADDR.__init__" title="Permalink to this definition">&#xB6; T1&gt;</a></code></span></dt><dd><div class="inherited-member container"><span class="yiyi-st" id="yiyi-622"><em>&#x7EE7;&#x627F;&#x81EA;</em> <code class="xref py py-attr docutils literal"><span class="pre">__init__</span></code> <em>&#x5C5E;&#x6027;</em> <code class="xref py py-class docutils literal"><span class="pre">object</span></code></span></div><p><span class="yiyi-st" id="yiyi-623">x .__ init __&#xFF08;...&#xFF09;&#x521D;&#x59CB;&#x5316;x&#xFF1B;&#x8BF7;&#x53C2;&#x9605;&#x5E2E;&#x52A9;&#xFF08;&#x7C7B;&#x578B;&#xFF08;x&#xFF09;&#xFF09;&#x8FDB;&#x884C;&#x7B7E;&#x540D;</span></p></dd></dl></dd></dl><dl class="class"><dt id="sqlalchemy.dialects.postgresql.OID"><span class="yiyi-st" id="yiyi-624"><em class="property">class</em> <code class="descclassname">sqlalchemy.dialects.postgresql&#x3002;</code> <code class="descname">OID</code> <a class="headerlink" href="#sqlalchemy.dialects.postgresql.OID" title="Permalink to this definition">&#xB6;</a></span></dt><dd><p><span class="yiyi-st" id="yiyi-625">&#x57FA;&#x7840;&#xFF1A;<a class="reference internal" href="core_type_api.html#sqlalchemy.types.TypeEngine" title="sqlalchemy.types.TypeEngine"><code class="xref py py-class docutils literal"><span class="pre">sqlalchemy.types.TypeEngine</span></code></a></span></p><p><span class="yiyi-st" id="yiyi-626">&#x63D0;&#x4F9B;Postgresql OID&#x7C7B;&#x578B;&#x3002;</span></p><div class="versionadded"><p><span class="yiyi-st" id="yiyi-627"><span class="versionmodified">&#x7248;&#x672C;0.9.5&#x4E2D;&#x7684;&#x65B0;&#x529F;&#x80FD;</span></span></p></div><dl class="attribute"><dt id="sqlalchemy.dialects.postgresql.OID.__init__"><span class="yiyi-st" id="yiyi-628"><code class="descname"> __&#x521D;&#x59CB;&#x5316;__  T0&gt; <a class="headerlink" href="#sqlalchemy.dialects.postgresql.OID.__init__" title="Permalink to this definition">&#xB6; T1&gt;</a></code></span></dt><dd><div class="inherited-member container"><span class="yiyi-st" id="yiyi-629"><em>&#x7EE7;&#x627F;&#x81EA;</em> <code class="xref py py-attr docutils literal"><span class="pre">__init__</span></code> <em>&#x5C5E;&#x6027;</em> <code class="xref py py-class docutils literal"><span class="pre">object</span></code></span></div><p><span class="yiyi-st" id="yiyi-630">x .__ init __&#xFF08;...&#xFF09;&#x521D;&#x59CB;&#x5316;x&#xFF1B;&#x8BF7;&#x53C2;&#x9605;&#x5E2E;&#x52A9;&#xFF08;&#x7C7B;&#x578B;&#xFF08;x&#xFF09;&#xFF09;&#x8FDB;&#x884C;&#x7B7E;&#x540D;</span></p></dd></dl></dd></dl><dl class="class"><dt id="sqlalchemy.dialects.postgresql.REAL"><span class="yiyi-st" id="yiyi-631"><em class="property">class</em> <code class="descclassname">sqlalchemy.dialects.postgresql&#x3002;</code> <code class="descname">REAL</code> <span class="sig-paren">&#xFF08;</span> <em>precision = None</em>&#xFF0C;<em> asdecimal = False</em>&#xFF0C;<em>decimal_return_scale = None</em>&#xFF0C;<em>** kwargs</em> <span class="sig-paren">&#xFF09;</span> <a class="headerlink" href="#sqlalchemy.dialects.postgresql.REAL" title="Permalink to this definition"></a></span></dt><dd><p><span class="yiyi-st" id="yiyi-632">&#x57FA;&#x7840;&#xFF1A;<a class="reference internal" href="core_type_basics.html#sqlalchemy.types.Float" title="sqlalchemy.types.Float"><code class="xref py py-class docutils literal"><span class="pre">sqlalchemy.types.Float</span></code></a></span></p><p><span class="yiyi-st" id="yiyi-633">SQL REAL&#x7C7B;&#x578B;&#x3002;</span></p><dl class="method"><dt id="sqlalchemy.dialects.postgresql.REAL.__init__"><span class="yiyi-st" id="yiyi-634"> <code class="descname">__init__</code><span class="sig-paren">(</span><em>precision=None</em>, <em>asdecimal=False</em>, <em>decimal_return_scale=None</em>, <em>**kwargs</em><span class="sig-paren">)</span><a class="headerlink" href="#sqlalchemy.dialects.postgresql.REAL.__init__" title="Permalink to this definition">&#xB6;</a></span></dt><dd><div class="inherited-member container"><span class="yiyi-st" id="yiyi-635"> <em>inherited from the</em> <a class="reference internal" href="core_type_basics.html#sqlalchemy.types.Float.__init__" title="sqlalchemy.types.Float.__init__"><code class="xref py py-meth docutils literal"><span class="pre">__init__()</span></code></a> <em>method of</em> <a class="reference internal" href="core_type_basics.html#sqlalchemy.types.Float" title="sqlalchemy.types.Float"><code class="xref py py-class docutils literal"><span class="pre">Float</span></code></a></span></div><p><span class="yiyi-st" id="yiyi-636">&#x6784;&#x5EFA;&#x4E00;&#x4E2A;&#x6D6E;&#x52A8;&#x3002;</span></p><table class="docutils field-list" frame="void" rules="none"><tbody valign="top"><tr class="field-odd field"><th class="field-name"><span class="yiyi-st" id="yiyi-637">&#x53C2;&#x6570;&#xFF1A;</span></th><td class="field-body"><ul class="first last simple"><li><span class="yiyi-st" id="yiyi-638"><span class="target" id="sqlalchemy.dialects.postgresql.REAL.params.precision"></span><strong>precision</strong><a class="paramlink headerlink reference internal" href="#sqlalchemy.dialects.postgresql.REAL.params.precision">&#xB6;</a> &#x2013; the numeric precision for use in DDL <code class="docutils literal"><span class="pre">CREATE</span> <span class="pre">TABLE</span></code>.</span></li><li><span class="yiyi-st" id="yiyi-639"><span class="target" id="sqlalchemy.dialects.postgresql.REAL.params.asdecimal"></span><strong>asdecimal</strong><a class="paramlink headerlink reference internal" href="#sqlalchemy.dialects.postgresql.REAL.params.asdecimal">&#xB6;</a> &#x2013; the same flag as that of <a class="reference internal" href="core_type_basics.html#sqlalchemy.types.Numeric" title="sqlalchemy.types.Numeric"><code class="xref py py-class docutils literal"><span class="pre">Numeric</span></code></a>, but defaults to <code class="docutils literal"><span class="pre">False</span></code>. </span><span class="yiyi-st" id="yiyi-640">&#x8BF7;&#x6CE8;&#x610F;&#xFF0C;&#x5C06;&#x6B64;&#x6807;&#x5FD7;&#x8BBE;&#x7F6E;&#x4E3A;<code class="docutils literal"><span class="pre">True</span></code>&#x4F1A;&#x5BFC;&#x81F4;&#x6D6E;&#x70B9;&#x8F6C;&#x6362;&#x3002;</span></li><li><span class="yiyi-st" id="yiyi-646"><span class="target" id="sqlalchemy.dialects.postgresql.REAL.params.decimal_return_scale"></span> <strong>decimal_return_scale</strong> <a class="paramlink headerlink reference internal" href="#sqlalchemy.dialects.postgresql.REAL.params.decimal_return_scale">&#xB6;</a>  - </span><p><span class="yiyi-st" id="yiyi-641">&#x4ECE;float&#x5230;Python&#x5C0F;&#x6570;&#x8F6C;&#x6362;&#x65F6;&#x4F7F;&#x7528;&#x7684;&#x9ED8;&#x8BA4;&#x7F29;&#x653E;&#x6BD4;&#x4F8B;&#x3002;</span><span class="yiyi-st" id="yiyi-642">&#x7531;&#x4E8E;&#x5341;&#x8FDB;&#x5236;&#x4E0D;&#x51C6;&#x786E;&#x6027;&#xFF0C;&#x6D6E;&#x70B9;&#x503C;&#x901A;&#x5E38;&#x4F1A;&#x957F;&#x5F97;&#x591A;&#xFF0C;&#x5E76;&#x4E14;&#x5927;&#x591A;&#x6570;&#x6D6E;&#x70B9;&#x6570;&#x636E;&#x5E93;&#x7C7B;&#x578B;&#x6CA1;&#x6709;&#x201C;&#x7F29;&#x653E;&#x201D;&#x7684;&#x6982;&#x5FF5;&#xFF0C;&#x6240;&#x4EE5;&#x9ED8;&#x8BA4;&#x60C5;&#x51B5;&#x4E0B;&#xFF0C;&#x6D6E;&#x70B9;&#x7C7B;&#x578B;&#x5728;&#x8F6C;&#x6362;&#x65F6;&#x4F1A;&#x67E5;&#x627E;&#x524D;&#x5341;&#x4E2A;&#x5C0F;&#x6570;&#x4F4D;&#x3002;</span><span class="yiyi-st" id="yiyi-643">&#x6307;&#x5B9A;&#x6B64;&#x503C;&#x5C06;&#x8986;&#x76D6;&#x8BE5;&#x957F;&#x5EA6;&#x3002;</span><span class="yiyi-st" id="yiyi-644">&#x8BF7;&#x6CE8;&#x610F;&#xFF0C;&#x5305;&#x542B;&#x201C;scale&#x201D;&#x7684;MySQL&#x6D6E;&#x70B9;&#x7C7B;&#x578B;&#x5C06;&#x4F7F;&#x7528;&#x201C;scale&#x201D;&#x4F5C;&#x4E3A;decimal_return_scale&#x7684;&#x9ED8;&#x8BA4;&#x503C;&#xFF08;&#x5982;&#x679C;&#x672A;&#x53E6;&#x5916;&#x6307;&#x5B9A;&#xFF09;&#x3002;</span></p><div class="versionadded"><p><span class="yiyi-st" id="yiyi-645"><span class="versionmodified">&#x7248;&#x672C;0.9.0&#x4E2D;&#x7684;&#x65B0;&#x529F;&#x80FD;</span></span></p></div></li><li><span class="yiyi-st" id="yiyi-647"><span class="target" id="sqlalchemy.dialects.postgresql.REAL.params.**kwargs"></span> <strong>** kwargs</strong> <a class="paramlink headerlink reference internal" href="#sqlalchemy.dialects.postgresql.REAL.params.**kwargs">&#xB6;</a>  - &#x4E0D;&#x5EFA;&#x8BAE;&#x4F7F;&#x7528;&#x3002;</span><span class="yiyi-st" id="yiyi-648">&#x5176;&#x4ED6;&#x53C2;&#x6570;&#x5728;&#x8FD9;&#x91CC;&#x88AB;&#x9ED8;&#x8BA4;&#x7684;<a class="reference internal" href="core_type_basics.html#sqlalchemy.types.Float" title="sqlalchemy.types.Float"><code class="xref py py-class docutils literal"><span class="pre">Float</span></code></a>&#x7C7B;&#x578B;&#x5FFD;&#x7565;&#x3002;</span><span class="yiyi-st" id="yiyi-649">&#x5BF9;&#x4E8E;&#x652F;&#x6301;&#x9644;&#x52A0;&#x53C2;&#x6570;&#x7684;&#x7279;&#x5B9A;&#x4E8E;&#x6570;&#x636E;&#x5E93;&#x7684;&#x6D6E;&#x70B9;&#x6570;&#xFF0C;&#x8BF7;&#x53C2;&#x9605;&#x8BE5;&#x65B9;&#x8A00;&#x7684;&#x6587;&#x6863;&#x4EE5;&#x83B7;&#x53D6;&#x8BE6;&#x7EC6;&#x4FE1;&#x606F;&#xFF0C;&#x4F8B;&#x5982;<a class="reference internal" href="mysql.html#sqlalchemy.dialects.mysql.FLOAT" title="sqlalchemy.dialects.mysql.FLOAT"><code class="xref py py-class docutils literal"><span class="pre">sqlalchemy.dialects.mysql.FLOAT</span></code></a>&#x3002;</span></li></ul></td></tr></tbody></table></dd></dl></dd></dl><dl class="class"><dt id="sqlalchemy.dialects.postgresql.TSVECTOR"><span class="yiyi-st" id="yiyi-650"><em class="property">class</em> <code class="descclassname">sqlalchemy.dialects.postgresql&#x3002;</code> <code class="descname">TSVECTOR</code> <a class="headerlink" href="#sqlalchemy.dialects.postgresql.TSVECTOR" title="Permalink to this definition">&#xB6;</a></span></dt><dd><p><span class="yiyi-st" id="yiyi-651">&#x57FA;&#x7840;&#xFF1A;<a class="reference internal" href="core_type_api.html#sqlalchemy.types.TypeEngine" title="sqlalchemy.types.TypeEngine"><code class="xref py py-class docutils literal"><span class="pre">sqlalchemy.types.TypeEngine</span></code></a></span></p><p><span class="yiyi-st" id="yiyi-652"><a class="reference internal" href="#sqlalchemy.dialects.postgresql.TSVECTOR" title="sqlalchemy.dialects.postgresql.TSVECTOR"><code class="xref py py-class docutils literal"><span class="pre">postgresql.TSVECTOR</span></code></a>&#x7C7B;&#x578B;&#x5B9E;&#x73B0;&#x4E86;Postgresql&#x6587;&#x672C;&#x641C;&#x7D22;&#x7C7B;&#x578B;TSVECTOR&#x3002;</span></p><p><span class="yiyi-st" id="yiyi-653">&#x5B83;&#x53EF;&#x4EE5;&#x7528;&#x6765;&#x5BF9;&#x81EA;&#x7136;&#x8BED;&#x8A00;&#x6587;&#x6863;&#x8FDB;&#x884C;&#x5168;&#x6587;&#x67E5;&#x8BE2;&#x3002;</span></p><div class="versionadded"><p><span class="yiyi-st" id="yiyi-654"><span class="versionmodified">&#x7248;&#x672C;0.9.0&#x4E2D;&#x7684;&#x65B0;&#x529F;&#x80FD;</span></span></p></div><div class="admonition seealso"><p class="first admonition-title"><span class="yiyi-st" id="yiyi-655">&#x4E5F;&#x53EF;&#x4EE5;&#x770B;&#x770B;</span></p><p class="last"><span class="yiyi-st" id="yiyi-656"><a class="reference internal" href="#postgresql-match"><span>Full Text Search</span></a></span></p></div><dl class="attribute"><dt id="sqlalchemy.dialects.postgresql.TSVECTOR.__init__"><span class="yiyi-st" id="yiyi-657"><code class="descname"> __&#x521D;&#x59CB;&#x5316;__  T0&gt; <a class="headerlink" href="#sqlalchemy.dialects.postgresql.TSVECTOR.__init__" title="Permalink to this definition">&#xB6; T1&gt;</a></code></span></dt><dd><div class="inherited-member container"><span class="yiyi-st" id="yiyi-658"><em>&#x7EE7;&#x627F;&#x81EA;</em> <code class="xref py py-attr docutils literal"><span class="pre">__init__</span></code> <em>&#x5C5E;&#x6027;</em> <code class="xref py py-class docutils literal"><span class="pre">object</span></code></span></div><p><span class="yiyi-st" id="yiyi-659">x .__ init __&#xFF08;...&#xFF09;&#x521D;&#x59CB;&#x5316;x&#xFF1B;&#x8BF7;&#x53C2;&#x9605;&#x5E2E;&#x52A9;&#xFF08;&#x7C7B;&#x578B;&#xFF08;x&#xFF09;&#xFF09;&#x8FDB;&#x884C;&#x7B7E;&#x540D;</span></p></dd></dl></dd></dl><dl class="class"><dt id="sqlalchemy.dialects.postgresql.UUID"><span class="yiyi-st" id="yiyi-660"><em class="property">class</em> <code class="descclassname">sqlalchemy.dialects.postgresql&#x3002;</code> <code class="descname">UUID</code> <span class="sig-paren">&#xFF08;</span> <em>as_uuid = False</em> <span class="sig-paren">&#xFF09; T5&gt; <a class="headerlink" href="#sqlalchemy.dialects.postgresql.UUID" title="Permalink to this definition">&#xB6; T6&gt;</a></span></span></dt><dd><p><span class="yiyi-st" id="yiyi-661">&#x57FA;&#x7840;&#xFF1A;<a class="reference internal" href="core_type_api.html#sqlalchemy.types.TypeEngine" title="sqlalchemy.types.TypeEngine"><code class="xref py py-class docutils literal"><span class="pre">sqlalchemy.types.TypeEngine</span></code></a></span></p><p><span class="yiyi-st" id="yiyi-662">Postgresql UUID&#x7C7B;&#x578B;&#x3002;</span></p><p><span class="yiyi-st" id="yiyi-663">&#x8868;&#x793A;UUID&#x5217;&#x7684;&#x7C7B;&#x578B;&#xFF0C;&#x53EF;&#x4EE5;&#x5C06;&#x6570;&#x636E;&#x89E3;&#x91CA;&#x4E3A;&#x7531;DBAPI&#x672C;&#x673A;&#x8FD4;&#x56DE;&#x6216;&#x4F5C;&#x4E3A;Python uuid&#x5BF9;&#x8C61;&#x3002;</span></p><p><span class="yiyi-st" id="yiyi-664">&#x6240;&#x6709;DBAPI&#x53EF;&#x80FD;&#x4E0D;&#x652F;&#x6301;UUID&#x7C7B;&#x578B;&#x3002;</span><span class="yiyi-st" id="yiyi-665">&#x5DF2;&#x77E5;psycopg2&#x800C;&#x4E0D;&#x662F;pg8000&#x3002;</span></p><dl class="method"><dt id="sqlalchemy.dialects.postgresql.UUID.__init__"><span class="yiyi-st" id="yiyi-666"><code class="descname"> __&#x521D;&#x59CB;&#x5316;__  T0&gt; <span class="sig-paren">&#xFF08; T1&gt; <em> as_uuid =&#x5047; T2&gt; <span class="sig-paren">&#xFF09; T3&gt; <a class="headerlink" href="#sqlalchemy.dialects.postgresql.UUID.__init__" title="Permalink to this definition">&#xB6; T4&gt;</a></span></em></span></code></span></dt><dd><p><span class="yiyi-st" id="yiyi-667">&#x6784;&#x5EFA;&#x4E00;&#x4E2A;UUID&#x7C7B;&#x578B;&#x3002;</span></p><table class="docutils field-list" frame="void" rules="none"><tbody valign="top"><tr class="field-odd field"><th class="field-name"><span class="yiyi-st" id="yiyi-668">&#x53C2;&#x6570;&#xFF1A;</span></th><td class="field-body"><span class="yiyi-st" id="yiyi-669"><span class="target" id="sqlalchemy.dialects.postgresql.UUID.params.as_uuid"></span><strong>as_uuid=False</strong><a class="paramlink headerlink reference internal" href="#sqlalchemy.dialects.postgresql.UUID.params.as_uuid">&#xB6;</a> &#x2013; if True, values will be interpreted as Python uuid objects, converting to/from string via the DBAPI.</span></td></tr></tbody></table></dd></dl></dd></dl><div class="section" id="range-types"><h3><span class="yiyi-st" id="yiyi-670">&#x8303;&#x56F4;&#x7C7B;&#x578B;<a class="headerlink" href="#range-types" title="Permalink to this headline">&#xB6;</a></span></h3><p><span class="yiyi-st" id="yiyi-671">PostgreSQL 9.2&#x4EE5;&#x540E;&#x7684;&#x65B0;&#x8303;&#x56F4;&#x5217;&#x7C7B;&#x578B;&#x53EF;&#x4EE5;&#x901A;&#x8FC7;&#x4EE5;&#x4E0B;&#x7C7B;&#x578B;&#x6765;&#x6EE1;&#x8DB3;&#xFF1A;</span></p><dl class="class"><dt id="sqlalchemy.dialects.postgresql.INT4RANGE"><span class="yiyi-st" id="yiyi-672"><em class="property">class</em> <code class="descclassname">sqlalchemy.dialects.postgresql&#x3002;</code> <code class="descname">INT4RANGE</code> <a class="headerlink" href="#sqlalchemy.dialects.postgresql.INT4RANGE" title="Permalink to this definition">&#xB6;</a></span></dt><dd><p><span class="yiyi-st" id="yiyi-673">&#x57FA;&#x7840;&#xFF1A;<a class="reference internal" href="#sqlalchemy.dialects.postgresql.ranges.RangeOperators" title="sqlalchemy.dialects.postgresql.ranges.RangeOperators"><code class="xref py py-class docutils literal"><span class="pre">sqlalchemy.dialects.postgresql.ranges.RangeOperators</span></code></a>&#xFF0C;<a class="reference internal" href="core_type_api.html#sqlalchemy.types.TypeEngine" title="sqlalchemy.types.TypeEngine"><code class="xref py py-class docutils literal"><span class="pre">sqlalchemy.types.TypeEngine</span></code></a></span></p><p><span class="yiyi-st" id="yiyi-674">&#x8868;&#x793A;Postgresql INT4RANGE&#x7C7B;&#x578B;&#x3002;</span></p><div class="versionadded"><p><span class="yiyi-st" id="yiyi-675"><span class="versionmodified">0.8.2&#x7248;&#x672C;&#x4E2D;&#x7684;&#x65B0;&#x529F;&#x80FD;</span></span></p></div></dd></dl><dl class="class"><dt id="sqlalchemy.dialects.postgresql.INT8RANGE"><span class="yiyi-st" id="yiyi-676"><em class="property">class</em> <code class="descclassname">sqlalchemy.dialects.postgresql&#x3002;</code> <code class="descname">INT8RANGE</code> <a class="headerlink" href="#sqlalchemy.dialects.postgresql.INT8RANGE" title="Permalink to this definition">&#xB6;</a></span></dt><dd><p><span class="yiyi-st" id="yiyi-677">&#x57FA;&#x7840;&#xFF1A;<a class="reference internal" href="#sqlalchemy.dialects.postgresql.ranges.RangeOperators" title="sqlalchemy.dialects.postgresql.ranges.RangeOperators"><code class="xref py py-class docutils literal"><span class="pre">sqlalchemy.dialects.postgresql.ranges.RangeOperators</span></code></a>&#xFF0C;<a class="reference internal" href="core_type_api.html#sqlalchemy.types.TypeEngine" title="sqlalchemy.types.TypeEngine"><code class="xref py py-class docutils literal"><span class="pre">sqlalchemy.types.TypeEngine</span></code></a></span></p><p><span class="yiyi-st" id="yiyi-678">&#x8868;&#x793A;Postgresql INT8RANGE&#x7C7B;&#x578B;&#x3002;</span></p><div class="versionadded"><p><span class="yiyi-st" id="yiyi-679"><span class="versionmodified">0.8.2&#x7248;&#x672C;&#x4E2D;&#x7684;&#x65B0;&#x529F;&#x80FD;</span></span></p></div></dd></dl><dl class="class"><dt id="sqlalchemy.dialects.postgresql.NUMRANGE"><span class="yiyi-st" id="yiyi-680"><em class="property">class</em> <code class="descclassname">sqlalchemy.dialects.postgresql&#x3002;</code> <code class="descname">NUMRANGE</code> <a class="headerlink" href="#sqlalchemy.dialects.postgresql.NUMRANGE" title="Permalink to this definition">&#xB6;</a></span></dt><dd><p><span class="yiyi-st" id="yiyi-681">&#x57FA;&#x7840;&#xFF1A;<a class="reference internal" href="#sqlalchemy.dialects.postgresql.ranges.RangeOperators" title="sqlalchemy.dialects.postgresql.ranges.RangeOperators"><code class="xref py py-class docutils literal"><span class="pre">sqlalchemy.dialects.postgresql.ranges.RangeOperators</span></code></a>&#xFF0C;<a class="reference internal" href="core_type_api.html#sqlalchemy.types.TypeEngine" title="sqlalchemy.types.TypeEngine"><code class="xref py py-class docutils literal"><span class="pre">sqlalchemy.types.TypeEngine</span></code></a></span></p><p><span class="yiyi-st" id="yiyi-682">&#x8868;&#x793A;Postgresql NUMRANGE&#x7C7B;&#x578B;&#x3002;</span></p><div class="versionadded"><p><span class="yiyi-st" id="yiyi-683"><span class="versionmodified">0.8.2&#x7248;&#x672C;&#x4E2D;&#x7684;&#x65B0;&#x529F;&#x80FD;</span></span></p></div></dd></dl><dl class="class"><dt id="sqlalchemy.dialects.postgresql.DATERANGE"><span class="yiyi-st" id="yiyi-684"><em class="property">class</em> <code class="descclassname">sqlalchemy.dialects.postgresql&#x3002;</code> <code class="descname">DATERANGE</code> <a class="headerlink" href="#sqlalchemy.dialects.postgresql.DATERANGE" title="Permalink to this definition">&#xB6;</a></span></dt><dd><p><span class="yiyi-st" id="yiyi-685">&#x57FA;&#x7840;&#xFF1A;<a class="reference internal" href="#sqlalchemy.dialects.postgresql.ranges.RangeOperators" title="sqlalchemy.dialects.postgresql.ranges.RangeOperators"><code class="xref py py-class docutils literal"><span class="pre">sqlalchemy.dialects.postgresql.ranges.RangeOperators</span></code></a>&#xFF0C;<a class="reference internal" href="core_type_api.html#sqlalchemy.types.TypeEngine" title="sqlalchemy.types.TypeEngine"><code class="xref py py-class docutils literal"><span class="pre">sqlalchemy.types.TypeEngine</span></code></a></span></p><p><span class="yiyi-st" id="yiyi-686">&#x8868;&#x793A;Postgresql DATERANGE&#x7C7B;&#x578B;&#x3002;</span></p><div class="versionadded"><p><span class="yiyi-st" id="yiyi-687"><span class="versionmodified">0.8.2&#x7248;&#x672C;&#x4E2D;&#x7684;&#x65B0;&#x529F;&#x80FD;</span></span></p></div></dd></dl><dl class="class"><dt id="sqlalchemy.dialects.postgresql.TSRANGE"><span class="yiyi-st" id="yiyi-688"><em class="property">class</em> <code class="descclassname">sqlalchemy.dialects.postgresql&#x3002;</code> <code class="descname">TSRANGE</code> <a class="headerlink" href="#sqlalchemy.dialects.postgresql.TSRANGE" title="Permalink to this definition">&#xB6;</a></span></dt><dd><p><span class="yiyi-st" id="yiyi-689">&#x57FA;&#x7840;&#xFF1A;<a class="reference internal" href="#sqlalchemy.dialects.postgresql.ranges.RangeOperators" title="sqlalchemy.dialects.postgresql.ranges.RangeOperators"><code class="xref py py-class docutils literal"><span class="pre">sqlalchemy.dialects.postgresql.ranges.RangeOperators</span></code></a>&#xFF0C;<a class="reference internal" href="core_type_api.html#sqlalchemy.types.TypeEngine" title="sqlalchemy.types.TypeEngine"><code class="xref py py-class docutils literal"><span class="pre">sqlalchemy.types.TypeEngine</span></code></a></span></p><p><span class="yiyi-st" id="yiyi-690">&#x8868;&#x793A;Postgresql TSRANGE&#x7C7B;&#x578B;&#x3002;</span></p><div class="versionadded"><p><span class="yiyi-st" id="yiyi-691"><span class="versionmodified">0.8.2&#x7248;&#x672C;&#x4E2D;&#x7684;&#x65B0;&#x529F;&#x80FD;</span></span></p></div></dd></dl><dl class="class"><dt id="sqlalchemy.dialects.postgresql.TSTZRANGE"><span class="yiyi-st" id="yiyi-692"><em class="property">class</em> <code class="descclassname">sqlalchemy.dialects.postgresql&#x3002;</code> <code class="descname">TSTZRANGE</code> <a class="headerlink" href="#sqlalchemy.dialects.postgresql.TSTZRANGE" title="Permalink to this definition">&#xB6;</a></span></dt><dd><p><span class="yiyi-st" id="yiyi-693">&#x57FA;&#x7840;&#xFF1A;<a class="reference internal" href="#sqlalchemy.dialects.postgresql.ranges.RangeOperators" title="sqlalchemy.dialects.postgresql.ranges.RangeOperators"><code class="xref py py-class docutils literal"><span class="pre">sqlalchemy.dialects.postgresql.ranges.RangeOperators</span></code></a>&#xFF0C;<a class="reference internal" href="core_type_api.html#sqlalchemy.types.TypeEngine" title="sqlalchemy.types.TypeEngine"><code class="xref py py-class docutils literal"><span class="pre">sqlalchemy.types.TypeEngine</span></code></a></span></p><p><span class="yiyi-st" id="yiyi-694">&#x8868;&#x793A;Postgresql TSTZRANGE&#x7C7B;&#x578B;&#x3002;</span></p><div class="versionadded"><p><span class="yiyi-st" id="yiyi-695"><span class="versionmodified">0.8.2&#x7248;&#x672C;&#x4E2D;&#x7684;&#x65B0;&#x529F;&#x80FD;</span></span></p></div></dd></dl><p><span class="yiyi-st" id="yiyi-696">&#x4E0A;&#x9762;&#x7684;&#x7C7B;&#x578B;&#x901A;&#x8FC7;&#x4EE5;&#x4E0B;mixin&#x83B7;&#x5F97;&#x5927;&#x90E8;&#x5206;&#x529F;&#x80FD;&#xFF1A;</span></p><dl class="class"><dt id="sqlalchemy.dialects.postgresql.ranges.RangeOperators"><span class="yiyi-st" id="yiyi-697"><em class="property">class</em> <code class="descclassname">sqlalchemy.dialects.postgresql.ranges&#x3002;</code> <code class="descname">RangeOperators</code> <a class="headerlink" href="#sqlalchemy.dialects.postgresql.ranges.RangeOperators" title="Permalink to this definition">&#xB6;</a></span></dt><dd><p><span class="yiyi-st" id="yiyi-698">&#x8BE5;&#x6DF7;&#x5408;&#x4E3A;&#x8303;&#x56F4;&#x51FD;&#x6570;&#x548C;&#x64CD;&#x4F5C;&#x7B26;&#x7684;<a class="reference external" href="http://www.postgresql.org/docs/devel/static/functions-range.html">postgres&#x6587;&#x6863;</a>&#x7684;&#x8868;9-44&#x4E2D;&#x5217;&#x51FA;&#x7684;&#x8303;&#x56F4;&#x64CD;&#x4F5C;&#x7B26;&#x63D0;&#x4F9B;&#x4E86;&#x529F;&#x80FD;&#x3002;</span><span class="yiyi-st" id="yiyi-699">&#x5B83;&#x88AB;<code class="docutils literal"><span class="pre">postgres</span></code>&#x65B9;&#x8A00;&#x4E2D;&#x63D0;&#x4F9B;&#x7684;&#x6240;&#x6709;&#x8303;&#x56F4;&#x7C7B;&#x578B;&#x4F7F;&#x7528;&#xFF0C;&#x5E76;&#x53EF;&#x80FD;&#x7528;&#x4E8E;&#x60A8;&#x81EA;&#x5DF1;&#x521B;&#x5EFA;&#x7684;&#x4EFB;&#x4F55;&#x8303;&#x56F4;&#x7C7B;&#x578B;&#x3002;</span></p><p><span class="yiyi-st" id="yiyi-700">&#x5BF9;postgres&#x6587;&#x6863;&#x7684;&#x8868;9-45&#x4E2D;&#x5217;&#x51FA;&#x7684;&#x8303;&#x56F4;&#x51FD;&#x6570;&#x6CA1;&#x6709;&#x63D0;&#x4F9B;&#x989D;&#x5916;&#x7684;&#x652F;&#x6301;&#x3002;</span><span class="yiyi-st" id="yiyi-701">&#x5BF9;&#x4E8E;&#x8FD9;&#x4E9B;&#xFF0C;&#x5E94;&#x8BE5;&#x4F7F;&#x7528;&#x6B63;&#x5E38;&#x7684;<a class="reference internal" href="core_sqlelement.html#sqlalchemy.sql.expression.func" title="sqlalchemy.sql.expression.func"><code class="xref py py-func docutils literal"><span class="pre">func()</span></code></a>&#x5BF9;&#x8C61;&#x3002;</span></p><div class="versionadded"><p><span class="yiyi-st" id="yiyi-702"><span class="versionmodified">0.8.2&#x7248;&#x65B0;&#x589E;&#x529F;&#x80FD;&#xFF1A;</span>&#x652F;&#x6301;Postgresql RANGE&#x64CD;&#x4F5C;&#x3002;</span></p></div><dl class="class"><dt id="sqlalchemy.dialects.postgresql.ranges.RangeOperators.comparator_factory"><span class="yiyi-st" id="yiyi-703"><em class="property">class</em> <code class="descname">comparator_factory</code> <span class="sig-paren">&#xFF08;</span> <em>expr</em> <span class="sig-paren">&#xFF09;</span> <a class="headerlink" href="#sqlalchemy.dialects.postgresql.ranges.RangeOperators.comparator_factory" title="Permalink to this definition"></a></span></dt><dd><p><span class="yiyi-st" id="yiyi-704">&#x57FA;&#x7840;&#xFF1A;<code class="xref py py-class docutils literal"><span class="pre">sqlalchemy.types.Comparator</span></code></span></p><p><span class="yiyi-st" id="yiyi-705">&#x5B9A;&#x4E49;&#x8303;&#x56F4;&#x7C7B;&#x578B;&#x7684;&#x6BD4;&#x8F83;&#x64CD;&#x4F5C;&#x3002;</span></p><dl class="method"><dt id="sqlalchemy.dialects.postgresql.ranges.RangeOperators.comparator_factory.__ne__"><span class="yiyi-st" id="yiyi-706"><code class="descname"> __ NE __  T0&gt; <span class="sig-paren">&#xFF08; T1&gt; <em>&#x5176;&#x4ED6; T2&gt; <span class="sig-paren">&#xFF09; T3&gt; <a class="headerlink" href="#sqlalchemy.dialects.postgresql.ranges.RangeOperators.comparator_factory.__ne__" title="Permalink to this definition">&#xB6; T4&gt;</a></span></em></span></code></span></dt><dd><p><span class="yiyi-st" id="yiyi-707">&#x5E03;&#x5C14;&#x8868;&#x8FBE;&#x5F0F;&#x3002;</span><span class="yiyi-st" id="yiyi-708">&#x5982;&#x679C;&#x4E24;&#x4E2A;&#x8303;&#x56F4;&#x4E0D;&#x76F8;&#x7B49;&#xFF0C;&#x5219;&#x8FD4;&#x56DE;true</span></p></dd></dl><dl class="method"><dt id="sqlalchemy.dialects.postgresql.ranges.RangeOperators.comparator_factory.adjacent_to"><span class="yiyi-st" id="yiyi-709"><code class="descname"> adjacent_to  T0&gt; <span class="sig-paren">&#xFF08; T1&gt; <em>&#x5176;&#x4ED6; T2&gt; <span class="sig-paren">&#xFF09; T3&gt; <a class="headerlink" href="#sqlalchemy.dialects.postgresql.ranges.RangeOperators.comparator_factory.adjacent_to" title="Permalink to this definition">&#xB6; T4&gt;</a></span></em></span></code></span></dt><dd><p><span class="yiyi-st" id="yiyi-710">&#x5E03;&#x5C14;&#x8868;&#x8FBE;&#x5F0F;&#x3002;</span><span class="yiyi-st" id="yiyi-711">&#x5982;&#x679C;&#x5217;&#x4E2D;&#x7684;&#x8303;&#x56F4;&#x4E0E;&#x64CD;&#x4F5C;&#x6570;&#x4E2D;&#x7684;&#x8303;&#x56F4;&#x76F8;&#x90BB;&#xFF0C;&#x5219;&#x8FD4;&#x56DE;true&#x3002;</span></p></dd></dl><dl class="method"><dt id="sqlalchemy.dialects.postgresql.ranges.RangeOperators.comparator_factory.contained_by"><span class="yiyi-st" id="yiyi-712"><code class="descname"> contained_by  T0&gt; <span class="sig-paren">&#xFF08; T1&gt; <em>&#x5176;&#x4ED6; T2&gt; <span class="sig-paren">&#xFF09; T3&gt; <a class="headerlink" href="#sqlalchemy.dialects.postgresql.ranges.RangeOperators.comparator_factory.contained_by" title="Permalink to this definition">&#xB6; T4&gt;</a></span></em></span></code></span></dt><dd><p><span class="yiyi-st" id="yiyi-713">&#x5E03;&#x5C14;&#x8868;&#x8FBE;&#x5F0F;&#x3002;</span><span class="yiyi-st" id="yiyi-714">&#x5982;&#x679C;&#x5217;&#x5305;&#x542B;&#x5728;&#x53F3;&#x4FA7;&#x64CD;&#x4F5C;&#x6570;&#x4E2D;&#xFF0C;&#x5219;&#x8FD4;&#x56DE;true&#x3002;</span></p></dd></dl><dl class="method"><dt id="sqlalchemy.dialects.postgresql.ranges.RangeOperators.comparator_factory.contains"><span class="yiyi-st" id="yiyi-715"><code class="descname">&#x5305;&#x542B;</code> <span class="sig-paren">&#xFF08;</span> <em>&#x5176;&#x4ED6;</em>&#xFF0C;<em>** kw</em> <span class="sig-paren">&#xFF09;</span> <a class="headerlink" href="#sqlalchemy.dialects.postgresql.ranges.RangeOperators.comparator_factory.contains" title="Permalink to this definition">&#xB6; t5 &gt;</a></span></dt><dd><p><span class="yiyi-st" id="yiyi-716">&#x5E03;&#x5C14;&#x8868;&#x8FBE;&#x5F0F;&#x3002;</span><span class="yiyi-st" id="yiyi-717">&#x5982;&#x679C;&#x53F3;&#x4FA7;&#x64CD;&#x4F5C;&#x6570;&#xFF08;&#x53EF;&#x4EE5;&#x662F;&#x5143;&#x7D20;&#x6216;&#x8303;&#x56F4;&#xFF09;&#x5305;&#x542B;&#x5728;&#x5217;&#x4E2D;&#xFF0C;&#x5219;&#x8FD4;&#x56DE;true&#x3002;</span></p></dd></dl><dl class="method"><dt id="sqlalchemy.dialects.postgresql.ranges.RangeOperators.comparator_factory.not_extend_left_of"><span class="yiyi-st" id="yiyi-718"><code class="descname"> not_extend_left_of  T0&gt; <span class="sig-paren">&#xFF08; T1&gt; <em>&#x5176;&#x4ED6; T2&gt; <span class="sig-paren">&#xFF09; T3&gt; <a class="headerlink" href="#sqlalchemy.dialects.postgresql.ranges.RangeOperators.comparator_factory.not_extend_left_of" title="Permalink to this definition">&#xB6; T4&gt;</a></span></em></span></code></span></dt><dd><p><span class="yiyi-st" id="yiyi-719">&#x5E03;&#x5C14;&#x8868;&#x8FBE;&#x5F0F;&#x3002;</span><span class="yiyi-st" id="yiyi-720">&#x5982;&#x679C;&#x5217;&#x4E2D;&#x7684;&#x8303;&#x56F4;&#x672A;&#x6269;&#x5C55;&#x5230;&#x64CD;&#x4F5C;&#x6570;&#x8303;&#x56F4;&#x7684;&#x5DE6;&#x4FA7;&#xFF0C;&#x5219;&#x8FD4;&#x56DE;true&#x3002;</span></p></dd></dl><dl class="method"><dt id="sqlalchemy.dialects.postgresql.ranges.RangeOperators.comparator_factory.not_extend_right_of"><span class="yiyi-st" id="yiyi-721"><code class="descname"> not_extend_right_of  T0&gt; <span class="sig-paren">&#xFF08; T1&gt; <em>&#x5176;&#x4ED6; T2&gt; <span class="sig-paren">&#xFF09; T3&gt; <a class="headerlink" href="#sqlalchemy.dialects.postgresql.ranges.RangeOperators.comparator_factory.not_extend_right_of" title="Permalink to this definition">&#xB6; T4&gt;</a></span></em></span></code></span></dt><dd><p><span class="yiyi-st" id="yiyi-722">&#x5E03;&#x5C14;&#x8868;&#x8FBE;&#x5F0F;&#x3002;</span><span class="yiyi-st" id="yiyi-723">&#x5982;&#x679C;&#x5217;&#x4E2D;&#x7684;&#x8303;&#x56F4;&#x4E0D;&#x6269;&#x5C55;&#x5230;&#x64CD;&#x4F5C;&#x6570;&#x8303;&#x56F4;&#x7684;&#x53F3;&#x4FA7;&#xFF0C;&#x5219;&#x8FD4;&#x56DE;true&#x3002;</span></p></dd></dl><dl class="method"><dt id="sqlalchemy.dialects.postgresql.ranges.RangeOperators.comparator_factory.overlaps"><span class="yiyi-st" id="yiyi-724"><code class="descname">&#x91CD;&#x53E0; T0&gt; <span class="sig-paren">&#xFF08; T1&gt; <em>&#x5176;&#x4ED6; T2&gt; <span class="sig-paren">&#xFF09; T3&gt; <a class="headerlink" href="#sqlalchemy.dialects.postgresql.ranges.RangeOperators.comparator_factory.overlaps" title="Permalink to this definition">&#xB6; T4&gt;</a></span></em></span></code></span></dt><dd><p><span class="yiyi-st" id="yiyi-725">&#x5E03;&#x5C14;&#x8868;&#x8FBE;&#x5F0F;&#x3002;</span><span class="yiyi-st" id="yiyi-726">&#x5982;&#x679C;&#x5217;&#x91CD;&#x53E0;&#xFF08;&#x4E0E;&#x53F3;&#x8FB9;&#x7684;&#x64CD;&#x4F5C;&#x6570;&#x6709;&#x5171;&#x540C;&#x70B9;&#xFF09;&#xFF0C;&#x5219;&#x8FD4;&#x56DE;true&#x3002;</span></p></dd></dl><dl class="method"><dt id="sqlalchemy.dialects.postgresql.ranges.RangeOperators.comparator_factory.strictly_left_of"><span class="yiyi-st" id="yiyi-727"><code class="descname"> strictly_left_of  T0&gt; <span class="sig-paren">&#xFF08; T1&gt; <em>&#x5176;&#x4ED6; T2&gt; <span class="sig-paren">&#xFF09; T3&gt; <a class="headerlink" href="#sqlalchemy.dialects.postgresql.ranges.RangeOperators.comparator_factory.strictly_left_of" title="Permalink to this definition">&#xB6; T4&gt;</a></span></em></span></code></span></dt><dd><p><span class="yiyi-st" id="yiyi-728">&#x5E03;&#x5C14;&#x8868;&#x8FBE;&#x5F0F;&#x3002;</span><span class="yiyi-st" id="yiyi-729">&#x5982;&#x679C;&#x5217;&#x4E25;&#x683C;&#x4FDD;&#x7559;&#x5728;&#x53F3;&#x4FA7;&#x64CD;&#x4F5C;&#x6570;&#x7684;&#x5DE6;&#x4FA7;&#xFF0C;&#x5219;&#x8FD4;&#x56DE;true&#x3002;</span></p></dd></dl><dl class="method"><dt id="sqlalchemy.dialects.postgresql.ranges.RangeOperators.comparator_factory.strictly_right_of"><span class="yiyi-st" id="yiyi-730"><code class="descname"> strictly_right_of  T0&gt; <span class="sig-paren">&#xFF08; T1&gt; <em>&#x5176;&#x4ED6; T2&gt; <span class="sig-paren">&#xFF09; T3&gt; <a class="headerlink" href="#sqlalchemy.dialects.postgresql.ranges.RangeOperators.comparator_factory.strictly_right_of" title="Permalink to this definition">&#xB6; T4&gt;</a></span></em></span></code></span></dt><dd><p><span class="yiyi-st" id="yiyi-731">&#x5E03;&#x5C14;&#x8868;&#x8FBE;&#x5F0F;&#x3002;</span><span class="yiyi-st" id="yiyi-732">&#x5982;&#x679C;&#x5217;&#x4E25;&#x683C;&#x53F3;&#x4FA7;&#x64CD;&#x4F5C;&#x6570;&#x7684;&#x53F3;&#x4FA7;&#xFF0C;&#x5219;&#x8FD4;&#x56DE;true&#x3002;</span></p></dd></dl></dd></dl></dd></dl><div class="admonition warning"><p class="first admonition-title"><span class="yiyi-st" id="yiyi-733">&#x8B66;&#x544A;</span></p><p class="last"><span class="yiyi-st" id="yiyi-734">&#x8303;&#x56F4;&#x7C7B;&#x578B;DDL&#x652F;&#x6301;&#x5E94;&#x8BE5;&#x9002;&#x7528;&#x4E8E;&#x4EFB;&#x4F55;Postgres DBAPI&#x9A71;&#x52A8;&#x7A0B;&#x5E8F;&#xFF0C;&#x4F46;&#x8FD4;&#x56DE;&#x7684;&#x6570;&#x636E;&#x7C7B;&#x578B;&#x53EF;&#x80FD;&#x4F1A;&#x6709;&#x6240;&#x4E0D;&#x540C;&#x3002;</span><span class="yiyi-st" id="yiyi-735">&#x5982;&#x679C;&#x60A8;&#x4F7F;&#x7528;<code class="docutils literal"><span class="pre">psycopg2</span></code>&#xFF0C;&#x5EFA;&#x8BAE;&#x5728;&#x4F7F;&#x7528;&#x8FD9;&#x4E9B;&#x5217;&#x7C7B;&#x578B;&#x4E4B;&#x524D;&#x5347;&#x7EA7;&#x5230;&#x7248;&#x672C;2.5&#x6216;&#x66F4;&#x9AD8;&#x7248;&#x672C;&#x3002;</span></p></div><p><span class="yiyi-st" id="yiyi-736">&#x5728;&#x5B9E;&#x4F8B;&#x5316;&#x4F7F;&#x7528;&#x8FD9;&#x4E9B;&#x5217;&#x7C7B;&#x578B;&#x7684;&#x6A21;&#x578B;&#x65F6;&#xFF0C;&#x60A8;&#x5E94;&#x8BE5;&#x4F20;&#x9012;&#x60A8;&#x4E3A;&#x5217;&#x7C7B;&#x578B;&#x4F7F;&#x7528;&#x7684;DBAPI&#x9A71;&#x52A8;&#x7A0B;&#x5E8F;&#x6240;&#x671F;&#x671B;&#x7684;&#x4EFB;&#x4F55;&#x6570;&#x636E;&#x7C7B;&#x578B;&#x3002;</span><span class="yiyi-st" id="yiyi-737">&#x5BF9;&#x4E8E;<a class="reference external" href="http://pythonhosted.org/psycopg2/module.html#module-psycopg2" title="(in Psycopg v2.6)"><code class="xref py py-mod docutils literal"><span class="pre">psycopg2</span></code></a>&#x8FD9;&#x4E9B;&#x662F;<a class="reference external" href="http://pythonhosted.org/psycopg2/extras.html#psycopg2.extras.NumericRange" title="(in Psycopg v2.6)"><code class="xref py py-class docutils literal"><span class="pre">NumericRange</span></code></a>&#xFF0C;<a class="reference external" href="http://pythonhosted.org/psycopg2/extras.html#psycopg2.extras.DateRange" title="(in Psycopg v2.6)"><code class="xref py py-class docutils literal"><span class="pre">DateRange</span></code></a>&#xFF0C;<a class="reference external" href="http://pythonhosted.org/psycopg2/extras.html#psycopg2.extras.DateTimeRange" title="(in Psycopg v2.6)"><code class="xref py py-class docutils literal"><span class="pre">DateTimeRange</span></code></a>&#x548C;<a class="reference external" href="http://pythonhosted.org/psycopg2/extras.html#psycopg2.extras.DateTimeTZRange" title="(in Psycopg v2.6)"><code class="xref py py-class docutils literal"><span class="pre">DateTimeTZRange</span></code></a>&#x5DF2;&#x7ECF;&#x901A;&#x8FC7;<a class="reference external" href="http://pythonhosted.org/psycopg2/extras.html#psycopg2.extras.register_range" title="(in Psycopg v2.6)"><code class="xref py py-func docutils literal"><span class="pre">register_range()</span></code></a>&#x8FDB;&#x884C;&#x4E86;&#x6CE8;&#x518C;&#x3002;</span></p><p><span class="yiyi-st" id="yiyi-738">&#x4F8B;&#x5982;&#xFF1A;</span></p><div class="highlight-python"><div class="highlight"><pre><span></span><span class="kn">from</span> <span class="nn">psycopg2.extras</span> <span class="kn">import</span> <span class="n">DateTimeRange</span>
<span class="kn">from</span> <span class="nn">sqlalchemy.dialects.postgresql</span> <span class="kn">import</span> <span class="n">TSRANGE</span>

<span class="k">class</span> <span class="nc">RoomBooking</span><span class="p">(</span><span class="n">Base</span><span class="p">):</span>

    <span class="n">__tablename__</span> <span class="o">=</span> <span class="s1">&apos;room_booking&apos;</span>

    <span class="n">room</span> <span class="o">=</span> <span class="n">Column</span><span class="p">(</span><span class="n">Integer</span><span class="p">(),</span> <span class="n">primary_key</span><span class="o">=</span><span class="bp">True</span><span class="p">)</span>
    <span class="n">during</span> <span class="o">=</span> <span class="n">Column</span><span class="p">(</span><span class="n">TSRANGE</span><span class="p">())</span>

<span class="n">booking</span> <span class="o">=</span> <span class="n">RoomBooking</span><span class="p">(</span>
    <span class="n">room</span><span class="o">=</span><span class="mi">101</span><span class="p">,</span>
    <span class="n">during</span><span class="o">=</span><span class="n">DateTimeRange</span><span class="p">(</span><span class="n">datetime</span><span class="p">(</span><span class="mi">2013</span><span class="p">,</span> <span class="mi">3</span><span class="p">,</span> <span class="mi">23</span><span class="p">),</span> <span class="bp">None</span><span class="p">)</span>
<span class="p">)</span></pre></div></div></div></div><div class="section" id="postgresql-constraint-types"><h2><span class="yiyi-st" id="yiyi-739">PostgreSQL&#x7EA6;&#x675F;&#x7C7B;&#x578B;<a class="headerlink" href="#postgresql-constraint-types" title="Permalink to this headline">&#xB6;</a></span></h2><p><span class="yiyi-st" id="yiyi-740">SQLAlchemy&#x901A;&#x8FC7;<a class="reference internal" href="#sqlalchemy.dialects.postgresql.ExcludeConstraint" title="sqlalchemy.dialects.postgresql.ExcludeConstraint"><code class="xref py py-class docutils literal"><span class="pre">ExcludeConstraint</span></code></a>&#x7C7B;&#x652F;&#x6301;Postgresql EXCLUDE&#x7EA6;&#x675F;&#xFF1A;</span></p><dl class="class"><dt id="sqlalchemy.dialects.postgresql.ExcludeConstraint"><span class="yiyi-st" id="yiyi-741"> <em class="property">class </em><code class="descclassname">sqlalchemy.dialects.postgresql.</code><code class="descname">ExcludeConstraint</code><span class="sig-paren">(</span><em>*elements</em>, <em>**kw</em><span class="sig-paren">)</span><a class="headerlink" href="#sqlalchemy.dialects.postgresql.ExcludeConstraint" title="Permalink to this definition">&#xB6;</a></span></dt><dd><p><span class="yiyi-st" id="yiyi-742">&#x57FA;&#x7840;&#xFF1A;<a class="reference internal" href="core_constraints.html#sqlalchemy.schema.ColumnCollectionConstraint" title="sqlalchemy.schema.ColumnCollectionConstraint"><code class="xref py py-class docutils literal"><span class="pre">sqlalchemy.schema.ColumnCollectionConstraint</span></code></a></span></p><p><span class="yiyi-st" id="yiyi-743">&#x8868;&#x7EA7;EXCLUDE&#x7EA6;&#x675F;&#x3002;</span></p><p><span class="yiyi-st" id="yiyi-744">&#x5B9A;&#x4E49;&#x4E00;&#x4E2A;EXCLUDE&#x7EA6;&#x675F;&#xFF0C;&#x5982;<a class="reference external" href="http://www.postgresql.org/docs/9.0/static/sql-createtable.html#SQL-CREATETABLE-EXCLUDE">postgres&#x6587;&#x6863;</a>&#x4E2D;&#x6240;&#x8FF0;&#x3002;</span></p><dl class="method"><dt id="sqlalchemy.dialects.postgresql.ExcludeConstraint.__init__"><span class="yiyi-st" id="yiyi-745"> <code class="descname">__init__</code><span class="sig-paren">(</span><em>*elements</em>, <em>**kw</em><span class="sig-paren">)</span><a class="headerlink" href="#sqlalchemy.dialects.postgresql.ExcludeConstraint.__init__" title="Permalink to this definition">&#xB6;</a></span></dt><dd><table class="docutils field-list" frame="void" rules="none"><tbody valign="top"><tr class="field-odd field"><th class="field-name"><span class="yiyi-st" id="yiyi-746">&#x53C2;&#x6570;&#xFF1A;</span></th><td class="field-body"><ul class="first last simple"><li><span class="yiyi-st" id="yiyi-747"><span class="target" id="sqlalchemy.dialects.postgresql.ExcludeConstraint.params.*elements"></span><strong>*elements</strong><a class="paramlink headerlink reference internal" href="#sqlalchemy.dialects.postgresql.ExcludeConstraint.params.*elements">&#xB6;</a> &#x2013; A sequence of two tuples of the form <code class="docutils literal"><span class="pre">(column,</span> <span class="pre">operator)</span></code> where column must be a column name or Column object and operator must be a string containing the operator to use.</span></li><li><span class="yiyi-st" id="yiyi-748"><span class="target" id="sqlalchemy.dialects.postgresql.ExcludeConstraint.params.name"></span><strong>name</strong><a class="paramlink headerlink reference internal" href="#sqlalchemy.dialects.postgresql.ExcludeConstraint.params.name">&#xB6;</a> &#x2013; Optional, the in-database name of this constraint.</span></li><li><span class="yiyi-st" id="yiyi-749"><span class="target" id="sqlalchemy.dialects.postgresql.ExcludeConstraint.params.deferrable"></span> <strong>&#x53EF;&#x5EF6;&#x8FDF;</strong> <a class="paramlink headerlink reference internal" href="#sqlalchemy.dialects.postgresql.ExcludeConstraint.params.deferrable">&#xB6;</a>  - &#x53EF;&#x9009;bool&#x3002;</span><span class="yiyi-st" id="yiyi-750">&#x5982;&#x679C;&#x8BBE;&#x7F6E;&#xFF0C;&#x5219;&#x5728;&#x4E3A;&#x6B64;&#x7EA6;&#x675F;&#x53D1;&#x51FA;DDL&#x65F6;&#x53D1;&#x51FA;DEFERRABLE&#x6216;NOT DEFERRABLE&#x3002;</span></li><li><span class="yiyi-st" id="yiyi-751"><span class="target" id="sqlalchemy.dialects.postgresql.ExcludeConstraint.params.initially"></span> <strong>&#x6700;&#x521D;</strong> <a class="paramlink headerlink reference internal" href="#sqlalchemy.dialects.postgresql.ExcludeConstraint.params.initially">&#xB6;</a>  - &#x53EF;&#x9009;&#x5B57;&#x7B26;&#x4E32;&#x3002;</span><span class="yiyi-st" id="yiyi-752">&#x5982;&#x679C;&#x8BBE;&#x7F6E;&#xFF0C;&#x5219;&#x5728;&#x4E3A;&#x6B64;&#x7EA6;&#x675F;&#x53D1;&#x51FA;DDL&#x65F6;&#x53D1;&#x51FA;INITIALLY <value>&#x3002;</value></span></li><li><span class="yiyi-st" id="yiyi-753"><span class="target" id="sqlalchemy.dialects.postgresql.ExcludeConstraint.params.using"></span> <strong>&#x4F7F;&#x7528;</strong> <a class="paramlink headerlink reference internal" href="#sqlalchemy.dialects.postgresql.ExcludeConstraint.params.using">&#xB6;</a>  - &#x53EF;&#x9009;&#x5B57;&#x7B26;&#x4E32;&#x3002;</span><span class="yiyi-st" id="yiyi-754">&#x5982;&#x679C;&#x8BBE;&#x7F6E;&#xFF0C;&#x5219;&#x5728;&#x4E3A;&#x6B64;&#x7EA6;&#x675F;&#x53D1;&#x51FA;DDL&#x65F6;&#x53D1;&#x51FA;USING <index_method>&#x3002;  T0&gt;</index_method></span><span class="yiyi-st" id="yiyi-755">&#x9ED8;&#x8BA4;&#x4E3A;&apos;gist&apos;&#x3002;</span></li><li><span class="yiyi-st" id="yiyi-756"><span class="target" id="sqlalchemy.dialects.postgresql.ExcludeConstraint.params.where"></span> <strong>&#x5176;&#x4E2D;</strong> <a class="paramlink headerlink reference internal" href="#sqlalchemy.dialects.postgresql.ExcludeConstraint.params.where">&#xB6;</a>  - &#x53EF;&#x9009;&#x5B57;&#x7B26;&#x4E32;&#x3002;</span><span class="yiyi-st" id="yiyi-757">&#x5982;&#x679C;&#x8BBE;&#x7F6E;&#xFF0C;&#x5219;&#x5728;&#x4E3A;&#x6B64;&#x7EA6;&#x675F;&#x53D1;&#x51FA;DDL&#x65F6;&#x53D1;&#x51FA;WHERE <predicate>&#x3002;</predicate></span></li></ul></td></tr></tbody></table></dd></dl></dd></dl><p><span class="yiyi-st" id="yiyi-758">&#x4F8B;&#x5982;&#xFF1A;</span></p><div class="highlight-python"><div class="highlight"><pre><span></span><span class="kn">from</span> <span class="nn">sqlalchemy.dialects.postgresql</span> <span class="kn">import</span> <span class="n">ExcludeConstraint</span><span class="p">,</span> <span class="n">TSRANGE</span>

<span class="k">class</span> <span class="nc">RoomBooking</span><span class="p">(</span><span class="n">Base</span><span class="p">):</span>

    <span class="n">__tablename__</span> <span class="o">=</span> <span class="s1">&apos;room_booking&apos;</span>

    <span class="n">room</span> <span class="o">=</span> <span class="n">Column</span><span class="p">(</span><span class="n">Integer</span><span class="p">(),</span> <span class="n">primary_key</span><span class="o">=</span><span class="bp">True</span><span class="p">)</span>
    <span class="n">during</span> <span class="o">=</span> <span class="n">Column</span><span class="p">(</span><span class="n">TSRANGE</span><span class="p">())</span>

    <span class="n">__table_args__</span> <span class="o">=</span> <span class="p">(</span>
        <span class="n">ExcludeConstraint</span><span class="p">((</span><span class="s1">&apos;room&apos;</span><span class="p">,</span> <span class="s1">&apos;=&apos;</span><span class="p">),</span> <span class="p">(</span><span class="s1">&apos;during&apos;</span><span class="p">,</span> <span class="s1">&apos;&amp;&amp;&apos;</span><span class="p">)),</span>
    <span class="p">)</span></pre></div></div></div><div class="section" id="postgresql-dml-constructs"><h2><span class="yiyi-st" id="yiyi-759">PostgreSQL DML&#x6784;&#x9020;<a class="headerlink" href="#postgresql-dml-constructs" title="Permalink to this headline">&#xB6;</a></span></h2><dl class="function"><dt id="sqlalchemy.dialects.postgresql.dml.insert"><span class="yiyi-st" id="yiyi-760"> <code class="descclassname">sqlalchemy.dialects.postgresql.dml.</code><code class="descname">insert</code><span class="sig-paren">(</span><em>table</em>, <em>values=None</em>, <em>inline=False</em>, <em>bind=None</em>, <em>prefixes=None</em>, <em>returning=None</em>, <em>return_defaults=False</em>, <em>**dialect_kw</em><span class="sig-paren">)</span><a class="headerlink" href="#sqlalchemy.dialects.postgresql.dml.insert" title="Permalink to this definition">&#xB6;</a></span></dt><dd><p><span class="yiyi-st" id="yiyi-761">&#x6784;&#x5EFA;&#x4E00;&#x4E2A;&#x65B0;&#x7684;<a class="reference internal" href="core_dml.html#sqlalchemy.sql.expression.Insert" title="sqlalchemy.sql.expression.Insert"><code class="xref py py-class docutils literal"><span class="pre">Insert</span></code></a>&#x5BF9;&#x8C61;&#x3002;</span></p><p><span class="yiyi-st" id="yiyi-762">&#x8FD9;&#x4E2A;&#x6784;&#x9020;&#x51FD;&#x6570;&#x88AB;&#x955C;&#x50CF;&#x4E3A;&#x516C;&#x5171;API&#x51FD;&#x6570;&#xFF1B;&#x6709;&#x5173;&#x5B8C;&#x6574;&#x7684;&#x7528;&#x6CD5;&#x548C;&#x53C2;&#x6570;&#x8BF4;&#x660E;&#xFF0C;&#x8BF7;&#x53C2;&#x9605;<a class="reference internal" href="core_dml.html#sqlalchemy.sql.expression.insert" title="sqlalchemy.sql.expression.insert"><code class="xref py py-func docutils literal"><span class="pre">insert()</span></code></a>&#x3002;</span></p></dd></dl><dl class="class"><dt id="sqlalchemy.dialects.postgresql.dml.Insert"><span class="yiyi-st" id="yiyi-763"> <em class="property">class </em><code class="descclassname">sqlalchemy.dialects.postgresql.dml.</code><code class="descname">Insert</code><span class="sig-paren">(</span><em>table</em>, <em>values=None</em>, <em>inline=False</em>, <em>bind=None</em>, <em>prefixes=None</em>, <em>returning=None</em>, <em>return_defaults=False</em>, <em>**dialect_kw</em><span class="sig-paren">)</span><a class="headerlink" href="#sqlalchemy.dialects.postgresql.dml.Insert" title="Permalink to this definition">&#xB6;</a></span></dt><dd><p><span class="yiyi-st" id="yiyi-764">&#x57FA;&#x7840;&#xFF1A;<a class="reference internal" href="core_dml.html#sqlalchemy.sql.expression.Insert" title="sqlalchemy.sql.expression.Insert"><code class="xref py py-class docutils literal"><span class="pre">sqlalchemy.sql.expression.Insert</span></code></a></span></p><p><span class="yiyi-st" id="yiyi-765">INSERT&#x7684;Postgresql&#x7279;&#x5B9A;&#x5B9E;&#x73B0;&#x3002;</span></p><p><span class="yiyi-st" id="yiyi-766">&#x4E3A;&#x7279;&#x5B9A;&#x4E8E;PG&#x7684;&#x8BED;&#x6CD5;&#x6DFB;&#x52A0;&#x65B9;&#x6CD5;&#xFF0C;&#x5982;ON CONFLICT&#x3002;</span></p><div class="versionadded"><p><span class="yiyi-st" id="yiyi-767"><span class="versionmodified">&#x7248;&#x672C;1.1&#x4E2D;&#x7684;&#x65B0;&#x529F;&#x80FD;</span></span></p></div><dl class="attribute"><dt id="sqlalchemy.dialects.postgresql.dml.Insert.excluded"><span class="yiyi-st" id="yiyi-768"><code class="descname">&#x6392;&#x9664; T0&gt; <a class="headerlink" href="#sqlalchemy.dialects.postgresql.dml.Insert.excluded" title="Permalink to this definition">&#xB6; T1&gt;</a></code></span></dt><dd><p><span class="yiyi-st" id="yiyi-769">&#x4E3A;ON CONFLICT&#x8BED;&#x53E5;&#x63D0;&#x4F9B;<code class="docutils literal"><span class="pre">excluded</span></code>&#x540D;&#x79F0;&#x7A7A;&#x95F4;</span></p><p><span class="yiyi-st" id="yiyi-770">PG&#x7684;ON CONFLICT&#x5B50;&#x53E5;&#x5141;&#x8BB8;&#x5F15;&#x7528;&#x5C06;&#x88AB;&#x63D2;&#x5165;&#x7684;&#x884C;&#xFF0C;&#x79F0;&#x4E3A;<code class="docutils literal"><span class="pre">excluded</span></code>&#x3002;</span><span class="yiyi-st" id="yiyi-771">&#x6B64;&#x5C5E;&#x6027;&#x63D0;&#x4F9B;&#x6B64;&#x884C;&#x4E2D;&#x7684;&#x6240;&#x6709;&#x5217;&#x4EE5;&#x4F9B;&#x5F15;&#x7528;&#x3002;</span></p><div class="admonition seealso"><p class="first admonition-title"><span class="yiyi-st" id="yiyi-772">&#x4E5F;&#x53EF;&#x4EE5;&#x770B;&#x770B;</span></p><p class="last"><span class="yiyi-st" id="yiyi-773"><a class="reference internal" href="#postgresql-insert-on-conflict"><span>INSERT...ON CONFLICT (Upsert)</span></a>  - &#x5982;&#x4F55;&#x4F7F;&#x7528;<a class="reference internal" href="#sqlalchemy.dialects.postgresql.dml.Insert.excluded" title="sqlalchemy.dialects.postgresql.dml.Insert.excluded"><code class="xref py py-attr docutils literal"><span class="pre">Insert.excluded</span></code></a>&#x7684;&#x793A;&#x4F8B;</span></p></div></dd></dl><dl class="method"><dt id="sqlalchemy.dialects.postgresql.dml.Insert.on_conflict_do_nothing"><span class="yiyi-st" id="yiyi-774"><code class="descname">on_conflict_do_nothing</code> <span class="sig-paren">&#xFF08;</span> <em>&#x7EA6;&#x675F;=&#x65E0;</em>&#xFF0C;<em>index_elements =&#x65E0;</em>&#xFF0C;<em>index_where =&#x65E0;</em> <span class="sig-paren">&#xFF09; T5&gt; <a class="headerlink" href="#sqlalchemy.dialects.postgresql.dml.Insert.on_conflict_do_nothing" title="Permalink to this definition">&#xB6; T6&gt;</a></span></span></dt><dd><p><span class="yiyi-st" id="yiyi-775">&#x4E3A;ON CONFLICT&#x5B50;&#x53E5;&#x6307;&#x5B9A;DO NOTHING&#x64CD;&#x4F5C;&#x3002;</span></p><p><span class="yiyi-st" id="yiyi-776"><code class="docutils literal"><span class="pre">constraint</span></code>&#x548C;<code class="docutils literal"><span class="pre">index_elements</span></code>&#x53C2;&#x6570;&#x662F;&#x53EF;&#x9009;&#x7684;&#xFF0C;&#x4F46;&#x53EA;&#x80FD;&#x6307;&#x5B9A;&#x5176;&#x4E2D;&#x7684;&#x4E00;&#x4E2A;&#x53C2;&#x6570;&#x3002;</span></p><table class="docutils field-list" frame="void" rules="none"><tbody valign="top"><tr class="field-odd field"><th class="field-name"><span class="yiyi-st" id="yiyi-777">&#x53C2;&#x6570;&#xFF1A;</span></th><td class="field-body"><span class="yiyi-st" id="yiyi-778"><span class="target" id="sqlalchemy.dialects.postgresql.dml.Insert.on_conflict_do_nothing.params.constraint"></span> <strong>&#x7EA6;&#x675F;</strong> <a class="paramlink headerlink reference internal" href="#sqlalchemy.dialects.postgresql.dml.Insert.on_conflict_do_nothing.params.constraint">&#xB6;</a>  - </span></td></tr></tbody></table><p><span class="yiyi-st" id="yiyi-779">&#x8868;&#x4E0A;&#x552F;&#x4E00;&#x7EA6;&#x675F;&#x6216;&#x6392;&#x9664;&#x7EA6;&#x675F;&#x7684;&#x540D;&#x79F0;&#xFF0C;&#x6216;&#x7EA6;&#x675F;&#x5BF9;&#x8C61;&#x672C;&#x8EAB;&#xFF08;&#x5982;&#x679C;&#x5B83;&#x5177;&#x6709;.name&#x5C5E;&#x6027;&#xFF09;&#x3002;</span></p><table class="docutils field-list" frame="void" rules="none"><tbody valign="top"><tr class="field-odd field"><th class="field-name"><span class="yiyi-st" id="yiyi-780">&#x53C2;&#x6570;&#xFF1A;</span></th><td class="field-body"><span class="yiyi-st" id="yiyi-781"><span class="target" id="sqlalchemy.dialects.postgresql.dml.Insert.on_conflict_do_nothing.params.index_elements"></span> <strong>index_elements</strong> <a class="paramlink headerlink reference internal" href="#sqlalchemy.dialects.postgresql.dml.Insert.on_conflict_do_nothing.params.index_elements">&#xB6;</a>  - </span></td></tr></tbody></table><p><span class="yiyi-st" id="yiyi-782">&#x7531;&#x4E32;&#x5217;&#x540D;&#x79F0;&#xFF0C;<a class="reference internal" href="core_metadata.html#sqlalchemy.schema.Column" title="sqlalchemy.schema.Column"><code class="xref py py-class docutils literal"><span class="pre">Column</span></code></a>&#x5BF9;&#x8C61;&#x6216;&#x5C06;&#x7528;&#x4E8E;&#x63A8;&#x65AD;&#x76EE;&#x6807;&#x7D22;&#x5F15;&#x7684;&#x5176;&#x4ED6;&#x5217;&#x8868;&#x8FBE;&#x5F0F;&#x5BF9;&#x8C61;&#x7EC4;&#x6210;&#x7684;&#x5E8F;&#x5217;&#x3002;</span></p><table class="docutils field-list" frame="void" rules="none"><tbody valign="top"><tr class="field-odd field"><th class="field-name"><span class="yiyi-st" id="yiyi-783">&#x53C2;&#x6570;&#xFF1A;</span></th><td class="field-body"><span class="yiyi-st" id="yiyi-784"><span class="target" id="sqlalchemy.dialects.postgresql.dml.Insert.on_conflict_do_nothing.params.index_where"></span> <strong>index_where</strong> <a class="paramlink headerlink reference internal" href="#sqlalchemy.dialects.postgresql.dml.Insert.on_conflict_do_nothing.params.index_where">&#xB6;</a>  - </span></td></tr></tbody></table><p><span class="yiyi-st" id="yiyi-785">&#x9644;&#x52A0;&#x7684;WHERE&#x6807;&#x51C6;&#x53EF;&#x7528;&#x4E8E;&#x63A8;&#x65AD;&#x6761;&#x4EF6;&#x76EE;&#x6807;&#x7D22;&#x5F15;&#x3002;</span></p><div class="versionadded"><p><span class="yiyi-st" id="yiyi-786"><span class="versionmodified">&#x7248;&#x672C;1.1&#x4E2D;&#x7684;&#x65B0;&#x529F;&#x80FD;</span></span></p></div><div class="admonition seealso"><p class="first admonition-title"><span class="yiyi-st" id="yiyi-787">&#x4E5F;&#x53EF;&#x4EE5;&#x770B;&#x770B;</span></p><p class="last"><span class="yiyi-st" id="yiyi-788"><a class="reference internal" href="#postgresql-insert-on-conflict"><span>INSERT...ON CONFLICT (Upsert)</span></a></span></p></div></dd></dl><dl class="method"><dt id="sqlalchemy.dialects.postgresql.dml.Insert.on_conflict_do_update"><span class="yiyi-st" id="yiyi-789"> <code class="descname">on_conflict_do_update</code><span class="sig-paren">(</span><em>constraint=None</em>, <em>index_elements=None</em>, <em>index_where=None</em>, <em>set_=None</em>, <em>where=None</em><span class="sig-paren">)</span><a class="headerlink" href="#sqlalchemy.dialects.postgresql.dml.Insert.on_conflict_do_update" title="Permalink to this definition">&#xB6;</a></span></dt><dd><p><span class="yiyi-st" id="yiyi-790">&#x4E3A;ON CONFLICT&#x5B50;&#x53E5;&#x6307;&#x5B9A;DO UPDATE SET&#x64CD;&#x4F5C;&#x3002;</span></p><p><span class="yiyi-st" id="yiyi-791">&#x8981;&#x4E48;&#x4F7F;&#x7528;<code class="docutils literal"><span class="pre">constraint</span></code>&#x6216;<code class="docutils literal"><span class="pre">index_elements</span></code>&#x53C2;&#x6570;&#xFF0C;&#x800C;&#x53EA;&#x80FD;&#x6307;&#x5B9A;&#x5176;&#x4E2D;&#x7684;&#x4E00;&#x4E2A;&#x53C2;&#x6570;&#x3002;</span></p><table class="docutils field-list" frame="void" rules="none"><tbody valign="top"><tr class="field-odd field"><th class="field-name"><span class="yiyi-st" id="yiyi-792">&#x53C2;&#x6570;&#xFF1A;</span></th><td class="field-body"><span class="yiyi-st" id="yiyi-793"><span class="target" id="sqlalchemy.dialects.postgresql.dml.Insert.on_conflict_do_update.params.constraint"></span> <strong>&#x7EA6;&#x675F;</strong> <a class="paramlink headerlink reference internal" href="#sqlalchemy.dialects.postgresql.dml.Insert.on_conflict_do_update.params.constraint">&#xB6;</a>  - </span></td></tr></tbody></table><p><span class="yiyi-st" id="yiyi-794">&#x8868;&#x4E0A;&#x552F;&#x4E00;&#x7EA6;&#x675F;&#x6216;&#x6392;&#x9664;&#x7EA6;&#x675F;&#x7684;&#x540D;&#x79F0;&#xFF0C;&#x6216;&#x7EA6;&#x675F;&#x5BF9;&#x8C61;&#x672C;&#x8EAB;&#xFF08;&#x5982;&#x679C;&#x5B83;&#x5177;&#x6709;.name&#x5C5E;&#x6027;&#xFF09;&#x3002;</span></p><table class="docutils field-list" frame="void" rules="none"><tbody valign="top"><tr class="field-odd field"><th class="field-name"><span class="yiyi-st" id="yiyi-795">&#x53C2;&#x6570;&#xFF1A;</span></th><td class="field-body"><span class="yiyi-st" id="yiyi-796"><span class="target" id="sqlalchemy.dialects.postgresql.dml.Insert.on_conflict_do_update.params.index_elements"></span> <strong>index_elements</strong> <a class="paramlink headerlink reference internal" href="#sqlalchemy.dialects.postgresql.dml.Insert.on_conflict_do_update.params.index_elements">&#xB6;</a>  - </span></td></tr></tbody></table><p><span class="yiyi-st" id="yiyi-797">&#x7531;&#x4E32;&#x5217;&#x540D;&#x79F0;&#xFF0C;<a class="reference internal" href="core_metadata.html#sqlalchemy.schema.Column" title="sqlalchemy.schema.Column"><code class="xref py py-class docutils literal"><span class="pre">Column</span></code></a>&#x5BF9;&#x8C61;&#x6216;&#x5C06;&#x7528;&#x4E8E;&#x63A8;&#x65AD;&#x76EE;&#x6807;&#x7D22;&#x5F15;&#x7684;&#x5176;&#x4ED6;&#x5217;&#x8868;&#x8FBE;&#x5F0F;&#x5BF9;&#x8C61;&#x7EC4;&#x6210;&#x7684;&#x5E8F;&#x5217;&#x3002;</span></p><table class="docutils field-list" frame="void" rules="none"><tbody valign="top"><tr class="field-odd field"><th class="field-name"><span class="yiyi-st" id="yiyi-798">&#x53C2;&#x6570;&#xFF1A;</span></th><td class="field-body"><span class="yiyi-st" id="yiyi-799"><span class="target" id="sqlalchemy.dialects.postgresql.dml.Insert.on_conflict_do_update.params.index_where"></span> <strong>index_where</strong> <a class="paramlink headerlink reference internal" href="#sqlalchemy.dialects.postgresql.dml.Insert.on_conflict_do_update.params.index_where">&#xB6;</a>  - </span></td></tr></tbody></table><p><span class="yiyi-st" id="yiyi-800">&#x9644;&#x52A0;&#x7684;WHERE&#x6807;&#x51C6;&#x53EF;&#x7528;&#x4E8E;&#x63A8;&#x65AD;&#x6761;&#x4EF6;&#x76EE;&#x6807;&#x7D22;&#x5F15;&#x3002;</span></p><table class="docutils field-list" frame="void" rules="none"><tbody valign="top"><tr class="field-odd field"><th class="field-name"><span class="yiyi-st" id="yiyi-801">&#x53C2;&#x6570;&#xFF1A;</span></th><td class="field-body"><span class="yiyi-st" id="yiyi-802"><span class="target" id="sqlalchemy.dialects.postgresql.dml.Insert.on_conflict_do_update.params.set_"></span> <strong>set _</strong> <a class="paramlink headerlink reference internal" href="#sqlalchemy.dialects.postgresql.dml.Insert.on_conflict_do_update.params.set_">&#xB6;</a>  - </span></td></tr></tbody></table><p><span class="yiyi-st" id="yiyi-803">&#x5FC5;&#x9700;&#x7684;&#x53C2;&#x6570;&#x3002;</span><span class="yiyi-st" id="yiyi-804">&#x5B57;&#x5178;&#x6216;&#x5176;&#x4ED6;&#x6620;&#x5C04;&#x5BF9;&#x8C61;&#xFF0C;&#x5217;&#x540D;&#x79F0;&#x4F5C;&#x4E3A;&#x952E;&#x548C;&#x8868;&#x8FBE;&#x5F0F;&#x6216;&#x6587;&#x5B57;&#x4F5C;&#x4E3A;&#x503C;&#xFF0C;&#x6307;&#x5B9A;&#x8981;&#x91C7;&#x53D6;&#x7684;<code class="docutils literal"><span class="pre">SET</span></code>&#x52A8;&#x4F5C;&#x3002;</span></p><div class="admonition warning"><p class="first admonition-title"><span class="yiyi-st" id="yiyi-805">&#x8B66;&#x544A;</span></p><p class="last"><span class="yiyi-st" id="yiyi-806">&#x8FD9;&#x4E2A;&#x5B57;&#x5178;&#x4E0D;&#x8003;&#x8651;Python&#x6307;&#x5B9A;&#x7684;&#x9ED8;&#x8BA4;UPDATE&#x503C;&#x6216;&#x751F;&#x6210;&#x51FD;&#x6570;&#xFF0C;&#x4F8B;&#x5982;<strong></strong>&#x3002;&#x4F7F;&#x7528;<a class="reference internal" href="core_metadata.html#sqlalchemy.schema.Column.params.onupdate" title="sqlalchemy.schema.Column"><code class="xref py py-paramref docutils literal"><span class="pre">Column.onupdate</span></code></a>&#x6307;&#x5B9A;&#x7684;&#x90A3;&#x4E9B;&#x3002;</span><span class="yiyi-st" id="yiyi-807">&#x9664;&#x975E;&#x5728;<a class="reference internal" href="#sqlalchemy.dialects.postgresql.dml.Insert.on_conflict_do_update.params.set_" title="sqlalchemy.dialects.postgresql.dml.Insert.on_conflict_do_update"><code class="xref py py-paramref docutils literal"><span class="pre">Insert.on_conflict_do_update.set_</span></code></a>&#x5B57;&#x5178;&#x4E2D;&#x624B;&#x52A8;&#x6307;&#x5B9A;&#x8FD9;&#x4E9B;&#x503C;&#xFF0C;&#x5426;&#x5219;&#x8FD9;&#x4E9B;&#x503C;&#x4E0D;&#x4F1A;&#x7528;&#x4E8E;ON CONFLICT&#x6837;&#x5F0F;&#x7684;UPDATE&#x3002;</span></p></div><table class="docutils field-list" frame="void" rules="none"><tbody valign="top"><tr class="field-odd field"><th class="field-name"><span class="yiyi-st" id="yiyi-808">&#x53C2;&#x6570;&#xFF1A;</span></th><td class="field-body"><span class="yiyi-st" id="yiyi-809"><span class="target" id="sqlalchemy.dialects.postgresql.dml.Insert.on_conflict_do_update.params.where"></span> <strong>&#x5176;&#x4E2D;</strong> <a class="paramlink headerlink reference internal" href="#sqlalchemy.dialects.postgresql.dml.Insert.on_conflict_do_update.params.where">&#xB6;</a>  - </span></td></tr></tbody></table><p><span class="yiyi-st" id="yiyi-810">&#x53EF;&#x9009;&#x53C2;&#x6570;&#x3002;</span><span class="yiyi-st" id="yiyi-811">If present, can be a literal SQL string or an acceptable expression for a <code class="docutils literal"><span class="pre">WHERE</span></code> clause that restricts the rows affected by <code class="docutils literal"><span class="pre">DO</span> <span class="pre">UPDATE</span> <span class="pre">SET</span></code>. </span><span class="yiyi-st" id="yiyi-812">&#x4E0D;&#x7B26;&#x5408;<code class="docutils literal"><span class="pre">WHERE</span></code>&#x6761;&#x4EF6;&#x7684;&#x884C;&#x5C06;&#x4E0D;&#x4F1A;&#x88AB;&#x66F4;&#x65B0;&#xFF08;&#x5BF9;&#x4E8E;&#x8FD9;&#x4E9B;&#x884C;&#xFF0C;&#x5B9E;&#x9645;&#x4E0A;&#x662F;&#x4E00;&#x4E2A;<code class="docutils literal"><span class="pre">DO</span> <span class="pre">NOTHING</span></code>&#xFF09;&#x3002;</span></p><div class="versionadded"><p><span class="yiyi-st" id="yiyi-813"><span class="versionmodified">&#x7248;&#x672C;1.1&#x4E2D;&#x7684;&#x65B0;&#x529F;&#x80FD;</span></span></p></div><div class="admonition seealso"><p class="first admonition-title"><span class="yiyi-st" id="yiyi-814">&#x4E5F;&#x53EF;&#x4EE5;&#x770B;&#x770B;</span></p><p class="last"><span class="yiyi-st" id="yiyi-815"><a class="reference internal" href="#postgresql-insert-on-conflict"><span>INSERT...ON CONFLICT (Upsert)</span></a></span></p></div></dd></dl></dd></dl></div><div class="section" id="module-sqlalchemy.dialects.postgresql.psycopg2"><h2><span class="yiyi-st" id="yiyi-816">psycopg2 <a class="headerlink" href="#module-sqlalchemy.dialects.postgresql.psycopg2" title="Permalink to this headline">&#xB6; T0&gt;</a></span></h2><p><span class="yiyi-st" id="yiyi-817">&#x901A;&#x8FC7;psycopg2&#x9A71;&#x52A8;&#x7A0B;&#x5E8F;&#x652F;&#x6301;PostgreSQL&#x6570;&#x636E;&#x5E93;&#x3002;</span></p><div class="section" id="dialect-postgresql-psycopg2-url"><h3><span class="yiyi-st" id="yiyi-818">DBAPI <a class="headerlink" href="#dialect-postgresql-psycopg2-url" title="Permalink to this headline">&#xB6; T0&gt;</a></span></h3><p><span class="yiyi-st" id="yiyi-819">psycopg2&#x7684;&#x6587;&#x6863;&#x548C;&#x4E0B;&#x8F7D;&#x4FE1;&#x606F;&#xFF08;&#x5982;&#x679C;&#x9002;&#x7528;&#xFF09;&#x53EF;&#x5728;&#x4EE5;&#x4E0B;&#x7F51;&#x5740;&#x83B7;&#x5F97;&#xFF1A;<a class="reference external" href="http://pypi.python.org/pypi/psycopg2/">http://pypi.python.org/pypi/psycopg2/</a></span></p></div><div class="section" id="dialect-postgresql-psycopg2-connect"><h3><span class="yiyi-st" id="yiyi-820">&#x8FDE;&#x63A5;<a class="headerlink" href="#dialect-postgresql-psycopg2-connect" title="Permalink to this headline">&#xB6; T0&gt;</a></span></h3><p><span class="yiyi-st" id="yiyi-821">&#x8FDE;&#x63A5;&#x5B57;&#x7B26;&#x4E32;&#xFF1A;</span></p><div class="highlight-python"><div class="highlight"><pre><span></span>postgresql+psycopg2://user:password@host:port/dbname[?key=value&amp;key=value...]</pre></div></div></div><div class="section" id="psycopg2-connect-arguments"><h3><span class="yiyi-st" id="yiyi-822">psycopg2&#x8FDE;&#x63A5;&#x53C2;&#x6570;<a class="headerlink" href="#psycopg2-connect-arguments" title="Permalink to this headline">&#xB6;</a></span></h3><p><span class="yiyi-st" id="yiyi-823">&#x88AB;<a class="reference internal" href="core_engines.html#sqlalchemy.create_engine" title="sqlalchemy.create_engine"><code class="xref py py-func docutils literal"><span class="pre">create_engine()</span></code></a>&#x63A5;&#x53D7;&#x7684;psycopg2&#x7279;&#x5B9A;&#x7684;&#x5173;&#x952E;&#x5B57;&#x53C2;&#x6570;&#x662F;&#xFF1A;</span></p><ul><li><p class="first"><span class="yiyi-st" id="yiyi-824"><code class="docutils literal"><span class="pre">server_side_cursors</span></code>&#xFF1A;&#x4E3A;&#x652F;&#x6301;&#x6B64;&#x529F;&#x80FD;&#x7684;SQL&#x8BED;&#x53E5;&#x542F;&#x7528;&#x201C;&#x670D;&#x52A1;&#x5668;&#x7AEF;&#x6E38;&#x6807;&#x201D;&#x3002;</span><span class="yiyi-st" id="yiyi-825">&#x4ECE;psycopg2&#x7684;&#x89C2;&#x70B9;&#x6765;&#x770B;&#xFF0C;&#x8FD9;&#x5B9E;&#x8D28;&#x4E0A;&#x610F;&#x5473;&#x7740;&#x5149;&#x6807;&#x662F;&#x4F7F;&#x7528;&#x540D;&#x79F0;&#x521B;&#x5EFA;&#x7684;&#xFF0C;&#x4F8B;&#x5982;&#xFF0C; <code class="docutils literal"><span class="pre">connection.cursor&#xFF08;&apos;some</span> <span class="pre">name&apos;&#xFF09;</span></code>&#xFF0C;&#x5176;&#x7ED3;&#x679C;&#x662F;&#x7ED3;&#x679C;&#x884C;&#x4E0D;&#x4F1A;&#x5728;&#x8BED;&#x53E5;&#x6267;&#x884C;&#x540E;&#x7ACB;&#x5373;&#x88AB;&#x9884;&#x53D6;&#x5E76;&#x7F13;&#x51B2;&#xFF0C;&#x800C;&#x662F;&#x7559;&#x5728;&#x670D;&#x52A1;&#x5668;&#x4E0A;&#xFF0C;&#x53EA;&#x6839;&#x636E;&#x9700;&#x8981;&#x8FDB;&#x884C;&#x68C0;&#x7D22;&#x3002;</span><span class="yiyi-st" id="yiyi-826">&#x5F53;&#x542F;&#x7528;&#x6B64;&#x529F;&#x80FD;&#x65F6;&#xFF0C;SQLAlchemy&#x7684;<a class="reference internal" href="core_connections.html#sqlalchemy.engine.ResultProxy" title="sqlalchemy.engine.ResultProxy"><code class="xref py py-class docutils literal"><span class="pre">ResultProxy</span></code></a>&#x4F7F;&#x7528;&#x7279;&#x6B8A;&#x7684;&#x884C;&#x7F13;&#x51B2;&#x884C;&#x4E3A;&#xFF0C;&#x4ECE;&#x800C;&#x4E00;&#x6B21;&#x53EF;&#x83B7;&#x53D6;100&#x884C;&#x7684;&#x7EC4;&#xFF0C;&#x4EE5;&#x51CF;&#x5C11;&#x4F1A;&#x8BDD;&#x5F00;&#x9500;&#x3002;</span><span class="yiyi-st" id="yiyi-827">&#x8BF7;&#x6CE8;&#x610F;&#xFF0C;<code class="docutils literal"><span class="pre">stream_results=True</span></code>&#x6267;&#x884C;&#x9009;&#x9879;&#x662F;&#x4EE5;&#x6BCF;&#x4E2A;&#x6267;&#x884C;&#x4E3A;&#x57FA;&#x7840;&#x542F;&#x7528;&#x6B64;&#x6A21;&#x5F0F;&#x7684;&#x66F4;&#x6709;&#x9488;&#x5BF9;&#x6027;&#x7684;&#x65B9;&#x5F0F;&#x3002;</span></p></li><li><p class="first"><span class="yiyi-st" id="yiyi-828"><code class="docutils literal"><span class="pre">use_native_unicode</span></code>&#xFF1A;&#x4E3A;&#x6BCF;&#x4E2A;&#x8FDE;&#x63A5;&#x542F;&#x7528;Psycopg2&#x201C;&#x672C;&#x5730;unicode&#x201D;&#x6A21;&#x5F0F;&#x7684;&#x4F7F;&#x7528;&#x3002;</span><span class="yiyi-st" id="yiyi-829">&#x9ED8;&#x8BA4;&#x60C5;&#x51B5;&#x4E0B;&#x4E3A;&#x771F;&#x3002;</span></p><div class="admonition seealso"><p class="first admonition-title"><span class="yiyi-st" id="yiyi-830">&#x4E5F;&#x53EF;&#x4EE5;&#x770B;&#x770B;</span></p><p class="last"><span class="yiyi-st" id="yiyi-831"><a class="reference internal" href="#psycopg2-disable-native-unicode"><span>Disabling Native Unicode</span></a></span></p></div></li><li><p class="first"><span class="yiyi-st" id="yiyi-832"><code class="docutils literal"><span class="pre">isolation_level</span></code>&#xFF1A;&#x6B64;&#x9009;&#x9879;&#x9002;&#x7528;&#x4E8E;&#x6240;&#x6709;PostgreSQL&#x65B9;&#x8A00;&#xFF0C;&#x5305;&#x62EC;&#x4F7F;&#x7528;psycopg2&#x65B9;&#x8A00;&#x65F6;&#x7684;<code class="docutils literal"><span class="pre">AUTOCOMMIT</span></code>&#x9694;&#x79BB;&#x7EA7;&#x522B;&#x3002;</span></p><div class="admonition seealso"><p class="first admonition-title"><span class="yiyi-st" id="yiyi-833">&#x4E5F;&#x53EF;&#x4EE5;&#x770B;&#x770B;</span></p><p class="last"><span class="yiyi-st" id="yiyi-834"><a class="reference internal" href="#psycopg2-isolation-level"><span>Psycopg2 Transaction Isolation Level</span></a></span></p></div></li><li><p class="first"><span class="yiyi-st" id="yiyi-835"><code class="docutils literal"><span class="pre">client_encoding</span></code>&#xFF1A;&#x4F7F;&#x7528;psycopg2&#x7684;<code class="docutils literal"><span class="pre">set_client_encoding()</span></code>&#x65B9;&#x6CD5;&#x4EE5;libpq&#x65E0;&#x5173;&#x7684;&#x65B9;&#x5F0F;&#x8BBE;&#x7F6E;&#x5BA2;&#x6237;&#x7AEF;&#x7F16;&#x7801;&#x3002;</span></p><div class="admonition seealso"><p class="first admonition-title"><span class="yiyi-st" id="yiyi-836">&#x4E5F;&#x53EF;&#x4EE5;&#x770B;&#x770B;</span></p><p class="last"><span class="yiyi-st" id="yiyi-837"><a class="reference internal" href="#psycopg2-unicode"><span>Unicode with Psycopg2</span></a></span></p></div></li></ul></div><div class="section" id="unix-domain-connections"><h3><span class="yiyi-st" id="yiyi-838">Unix&#x57DF;&#x8FDE;&#x63A5;<a class="headerlink" href="#unix-domain-connections" title="Permalink to this headline">&#xB6;</a></span></h3><p><span class="yiyi-st" id="yiyi-839">psycopg2&#x652F;&#x6301;&#x901A;&#x8FC7;Unix&#x57DF;&#x8FDE;&#x63A5;&#x8FDB;&#x884C;&#x8FDE;&#x63A5;&#x3002;</span><span class="yiyi-st" id="yiyi-840">&#x5F53;&#x7701;&#x7565;URL&#x7684;<code class="docutils literal"><span class="pre">host</span></code>&#x90E8;&#x5206;&#x65F6;&#xFF0C;SQLAlchemy&#x5C06;<code class="docutils literal"><span class="pre">None</span></code>&#x4F20;&#x9012;&#x7ED9;psycopg2&#xFF0C;psycopg2&#x6307;&#x5B9A;&#x4E86;Unix&#x57DF;&#x901A;&#x4FE1;&#x800C;&#x4E0D;&#x662F;TCP / IP&#x901A;&#x4FE1;&#xFF1A;</span></p><div class="highlight-python"><div class="highlight"><pre><span></span><span class="n">create_engine</span><span class="p">(</span><span class="s2">&quot;postgresql+psycopg2://user:password@/dbname&quot;</span><span class="p">)</span></pre></div></div><p><span class="yiyi-st" id="yiyi-841">&#x9ED8;&#x8BA4;&#x60C5;&#x51B5;&#x4E0B;&#xFF0C;&#x4F7F;&#x7528;&#x7684;&#x5957;&#x63A5;&#x5B57;&#x6587;&#x4EF6;&#x5C06;&#x8FDE;&#x63A5;&#x5230;<code class="docutils literal"><span class="pre">/tmp</span></code>&#x4E2D;&#x7684;Unix&#x57DF;&#x5957;&#x63A5;&#x5B57;&#xFF0C;&#x6216;&#x8005;&#x5728;&#x6784;&#x5EFA;PostgreSQL&#x65F6;&#x6307;&#x5B9A;&#x4EFB;&#x4F55;&#x5957;&#x63A5;&#x5B57;&#x76EE;&#x5F55;&#x3002;</span><span class="yiyi-st" id="yiyi-842">&#x901A;&#x8FC7;&#x4F7F;&#x7528;<code class="docutils literal"><span class="pre">host</span></code>&#x4F5C;&#x4E3A;&#x9644;&#x52A0;&#x5173;&#x952E;&#x5B57;&#x53C2;&#x6570;&#xFF0C;&#x53EF;&#x4EE5;&#x901A;&#x8FC7;&#x5C06;&#x8DEF;&#x5F84;&#x540D;&#x4F20;&#x9012;&#x7ED9;psycopg2&#x6765;&#x8986;&#x76D6;&#x6B64;&#x503C;&#xFF1A;</span></p><div class="highlight-python"><div class="highlight"><pre><span></span><span class="n">create_engine</span><span class="p">(</span><span class="s2">&quot;postgresql+psycopg2://user:password@/dbname?host=/var/lib/postgresql&quot;</span><span class="p">)</span></pre></div></div><p><span class="yiyi-st" id="yiyi-843">&#x4E5F;&#x53EF;&#x4EE5;&#x770B;&#x770B;&#xFF1A;</span></p><p><span class="yiyi-st" id="yiyi-844"><a class="reference external" href="http://www.postgresql.org/docs/9.1/static/libpq-connect.html#LIBPQ-PQCONNECTDBPARAMS"> PQconnectdbParams  T0&gt;</a></span></p></div><div class="section" id="per-statement-connection-execution-options"><h3><span class="yiyi-st" id="yiyi-845">&#x6BCF;&#x4E2A;&#x8BED;&#x53E5;/&#x8FDE;&#x63A5;&#x6267;&#x884C;&#x9009;&#x9879;<a class="headerlink" href="#per-statement-connection-execution-options" title="Permalink to this headline">&#xB6;</a></span></h3><p><span class="yiyi-st" id="yiyi-846">&#x4E0E;<a class="reference internal" href="core_connections.html#sqlalchemy.engine.Connection.execution_options" title="sqlalchemy.engine.Connection.execution_options"><code class="xref py py-meth docutils literal"><span class="pre">Connection.execution_options()</span></code></a>&#xFF0C;<a class="reference internal" href="core_selectable.html#sqlalchemy.sql.expression.Executable.execution_options" title="sqlalchemy.sql.expression.Executable.execution_options"><code class="xref py py-meth docutils literal"><span class="pre">Executable.execution_options()</span></code></a>&#xFF0C;<a class="reference internal" href="orm_query.html#sqlalchemy.orm.query.Query.execution_options" title="sqlalchemy.orm.query.Query.execution_options"><code class="xref py py-meth docutils literal"><span class="pre">Query.execution_options()</span></code></a>&#x4E00;&#x8D77;&#x4F7F;&#x7528;&#x65F6;&#xFF0C;&#x4EE5;&#x4E0B;DBAPI&#x7279;&#x5B9A;&#x9009;&#x9879;&#x5C06;&#x5F97;&#x5230;&#x9075;&#x5B88;&#x3002;&#x9664;&#x4E86;&#x90A3;&#x4E9B;&#x4E0D;&#x7279;&#x5B9A;&#x4E8E;DBAPI&#x7684;&#xFF1A;</span></p><ul><li><p class="first"><span class="yiyi-st" id="yiyi-847"><code class="docutils literal"><span class="pre">isolation_level</span></code>  - &#x4E3A;<a class="reference internal" href="core_connections.html#sqlalchemy.engine.Connection" title="sqlalchemy.engine.Connection"><code class="xref py py-class docutils literal"><span class="pre">Connection</span></code></a>&#x7684;&#x751F;&#x547D;&#x5468;&#x671F;&#x8BBE;&#x7F6E;&#x4E8B;&#x52A1;&#x9694;&#x79BB;&#x7EA7;&#x522B;&#xFF08;&#x53EA;&#x80FD;&#x5728;&#x8FDE;&#x63A5;&#x4E0A;&#x8BBE;&#x7F6E;&#xFF0C;&#x800C;&#x4E0D;&#x80FD;&#x5728;&#x8BED;&#x53E5;&#x6216;&#x67E5;&#x8BE2;&#x4E2D;&#x8BBE;&#x7F6E;&#xFF09;&#x3002;</span><span class="yiyi-st" id="yiyi-848">&#x8BF7;&#x53C2;&#x9605;<a class="reference internal" href="#psycopg2-isolation-level"><span>Psycopg2 Transaction Isolation Level</span></a>&#x3002;</span></p></li><li><p class="first"><span class="yiyi-st" id="yiyi-849"><code class="docutils literal"><span class="pre">stream_results</span></code>  - &#x542F;&#x7528;&#x6216;&#x7981;&#x7528;psycopg2&#x670D;&#x52A1;&#x5668;&#x7AEF;&#x6E38;&#x6807;&#x7684;&#x4F7F;&#x7528; - &#x6B64;&#x529F;&#x80FD;&#x4F7F;&#x7528;&#x201C;&#x547D;&#x540D;&#x201D;&#x6E38;&#x6807;&#x4E0E;&#x7279;&#x6B8A;&#x7ED3;&#x679C;&#x5904;&#x7406;&#x65B9;&#x6CD5;&#x7ED3;&#x5408;&#x4F7F;&#x7528;&#xFF0C;&#x4EE5;&#x4FBF;&#x7ED3;&#x679C;&#x884C;&#x4E0D;&#x4F1A;&#x88AB;&#x5B8C;&#x5168;&#x7F13;&#x51B2;&#x3002;</span><span class="yiyi-st" id="yiyi-850">&#x5982;&#x679C;<code class="docutils literal"><span class="pre">None</span></code>&#x6216;&#x672A;&#x8BBE;&#x7F6E;&#xFF0C;&#x5219;&#x4F7F;&#x7528;<a class="reference internal" href="core_connections.html#sqlalchemy.engine.Engine" title="sqlalchemy.engine.Engine"><code class="xref py py-class docutils literal"><span class="pre">Engine</span></code></a>&#x7684;<code class="docutils literal"><span class="pre">server_side_cursors</span></code>&#x9009;&#x9879;&#x3002;</span></p></li><li><p class="first"><span class="yiyi-st" id="yiyi-851"><code class="docutils literal"><span class="pre">max_row_buffer</span></code>  - &#x4F7F;&#x7528;<code class="docutils literal"><span class="pre">stream_results</span></code>&#x65F6;&#xFF0C;&#x662F;&#x4E00;&#x4E2A;&#x6574;&#x6570;&#x503C;&#xFF0C;&#x6307;&#x5B9A;&#x4E00;&#x6B21;&#x7F13;&#x51B2;&#x7684;&#x6700;&#x5927;&#x884C;&#x6570;&#x3002;</span><span class="yiyi-st" id="yiyi-852">&#x8FD9;&#x7531;<code class="xref py py-class docutils literal"><span class="pre">BufferedRowResultProxy</span></code>&#x89E3;&#x91CA;&#xFF0C;&#x5982;&#x679C;&#x7701;&#x7565;&#xFF0C;&#x5219;&#x7F13;&#x51B2;&#x533A;&#x5C06;&#x589E;&#x957F;&#x4EE5;&#x6700;&#x7EC8;&#x4E00;&#x6B21;&#x5B58;&#x50A8;1000&#x884C;&#x3002;</span></p><div class="versionadded"><p><span class="yiyi-st" id="yiyi-853"><span class="versionmodified">&#x7248;&#x672C;1.0.6&#x4E2D;&#x7684;&#x65B0;&#x529F;&#x80FD;</span></span></p></div></li></ul></div><div class="section" id="unicode-with-psycopg2"><h3><span class="yiyi-st" id="yiyi-854">Unicode&#x4E0E;Psycopg2 <a class="headerlink" href="#unicode-with-psycopg2" title="Permalink to this headline">&#xB6;</a></span></h3><p><span class="yiyi-st" id="yiyi-855">&#x9ED8;&#x8BA4;&#x60C5;&#x51B5;&#x4E0B;&#xFF0C;psycopg2&#x9A71;&#x52A8;&#x7A0B;&#x5E8F;&#x4F7F;&#x7528;<code class="docutils literal"><span class="pre">psycopg2.extensions.UNICODE</span></code>&#x6269;&#x5C55;&#x540D;&#xFF0C;&#x4EE5;&#x4FBF;DBAPI&#x76F4;&#x63A5;&#x63A5;&#x6536;&#x5E76;&#x8FD4;&#x56DE;&#x6240;&#x6709;&#x5B57;&#x7B26;&#x4E32;&#x4F5C;&#x4E3A;Python Unicode&#x5BF9;&#x8C61; -  SQLAlchemy&#x65E0;&#x9700;&#x66F4;&#x6539;&#x5373;&#x53EF;&#x4F20;&#x9012;&#x8FD9;&#x4E9B;&#x503C;&#x3002;</span><span class="yiyi-st" id="yiyi-856">Psycopg2&#x5C06;&#x6839;&#x636E;&#x5F53;&#x524D;&#x7684;&#x201C;&#x5BA2;&#x6237;&#x7AEF;&#x7F16;&#x7801;&#x201D;&#x8BBE;&#x7F6E;&#x5BF9;&#x5B57;&#x7B26;&#x4E32;&#x503C;&#x8FDB;&#x884C;&#x7F16;&#x7801;/&#x89E3;&#x7801;&#xFF1B;&#x9ED8;&#x8BA4;&#x60C5;&#x51B5;&#x4E0B;&#xFF0C;&#x8FD9;&#x662F;<code class="docutils literal"><span class="pre">postgresql.conf</span></code>&#x6587;&#x4EF6;&#x4E2D;&#x7684;&#x503C;&#xFF0C;&#x901A;&#x5E38;&#x9ED8;&#x8BA4;&#x4E3A;<code class="docutils literal"><span class="pre">SQL_ASCII</span></code>&#x3002;</span><span class="yiyi-st" id="yiyi-857">&#x901A;&#x5E38;&#xFF0C;&#x8FD9;&#x53EF;&#x4EE5;&#x66F4;&#x6539;&#x4E3A;<code class="docutils literal"><span class="pre">utf8</span></code>&#xFF0C;&#x4F5C;&#x4E3A;&#x66F4;&#x6709;&#x7528;&#x7684;&#x9ED8;&#x8BA4;&#x503C;&#xFF1A;</span></p><div class="highlight-python"><div class="highlight"><pre><span></span><span class="c1"># postgresql.conf file</span>

<span class="c1"># client_encoding = sql_ascii # actually, defaults to database</span>
                             <span class="c1"># encoding</span>
<span class="n">client_encoding</span> <span class="o">=</span> <span class="n">utf8</span></pre></div></div><p><span class="yiyi-st" id="yiyi-858">&#x5F71;&#x54CD;&#x5BA2;&#x6237;&#x7AEF;&#x7F16;&#x7801;&#x7684;&#x7B2C;&#x4E8C;&#x79CD;&#x65B9;&#x6CD5;&#x662F;&#x5728;&#x672C;&#x5730;&#x5C06;&#x5176;&#x8BBE;&#x7F6E;&#x5728;Psycopg2&#x4E2D;&#x3002;</span><span class="yiyi-st" id="yiyi-859">SQLAlchemy&#x5C06;&#x6839;&#x636E;&#x4F20;&#x9012;&#x7ED9;<a class="reference internal" href="core_engines.html#sqlalchemy.create_engine" title="sqlalchemy.create_engine"><code class="xref py py-func docutils literal"><span class="pre">create_engine()</span></code></a>&#x7684;&#x503C;&#x4F7F;&#x7528;<code class="docutils literal"><span class="pre">client_encoding</span></code>&#x53C2;&#x6570;&#x5728;&#x6240;&#x6709;&#x65B0;&#x8FDE;&#x63A5;&#x4E0A;&#x8C03;&#x7528;psycopg2&#x7684;<a class="reference external" href="http://pythonhosted.org/psycopg2/connection.html#connection.set_client_encoding" title="(in Psycopg v2.6)"><code class="docutils literal"><span class="pre">connection.set_client_encoding()</span></code></a>&#x65B9;&#x6CD5;&#xFF1A;</span></p><div class="highlight-python"><div class="highlight"><pre><span></span><span class="c1"># set_client_encoding() setting;</span>
<span class="c1"># works for *all* Postgresql versions</span>
<span class="n">engine</span> <span class="o">=</span> <span class="n">create_engine</span><span class="p">(</span><span class="s2">&quot;postgresql://user:pass@host/dbname&quot;</span><span class="p">,</span>
                       <span class="n">client_encoding</span><span class="o">=</span><span class="s1">&apos;utf8&apos;</span><span class="p">)</span></pre></div></div><p><span class="yiyi-st" id="yiyi-860">&#x8FD9;&#x5C06;&#x8986;&#x76D6;Postgresql&#x5BA2;&#x6237;&#x7AEF;&#x914D;&#x7F6E;&#x4E2D;&#x6307;&#x5B9A;&#x7684;&#x7F16;&#x7801;&#x3002;</span><span class="yiyi-st" id="yiyi-861">When using the parameter in this way, the psycopg2 driver emits <code class="docutils literal"><span class="pre">SET</span> <span class="pre">client_encoding</span> <span class="pre">TO</span> <span class="pre">&apos;utf8&apos;</span></code> on the connection explicitly, and works in all Postgresql versions.</span></p><p><span class="yiyi-st" id="yiyi-862">&#x8BF7;&#x6CE8;&#x610F;&#xFF0C;&#x4F20;&#x9012;&#x7ED9;<a class="reference internal" href="core_engines.html#sqlalchemy.create_engine" title="sqlalchemy.create_engine"><code class="xref py py-func docutils literal"><span class="pre">create_engine()</span></code></a>&#x7684;<code class="docutils literal"><span class="pre">client_encoding</span></code>&#x8BBE;&#x7F6E;&#x4E0E;&#x6700;&#x8FD1;&#x6DFB;&#x52A0;&#x7684;<code class="docutils literal"><span class="pre">client_encoding</span></code>&#x53C2;&#x6570;<strong>&#x4E0D;&#x4E00;&#x6837;</strong>&#x73B0;&#x5728;&#x76F4;&#x63A5;&#x7531;libpq&#x652F;&#x6301;&#x3002;</span><span class="yiyi-st" id="yiyi-863">&#x5F53;&#x5C06;<code class="docutils literal"><span class="pre">client_encoding</span></code>&#x76F4;&#x63A5;&#x4F20;&#x9012;&#x7ED9;<code class="docutils literal"><span class="pre">psycopg2.connect()</span></code>&#xFF0C;&#x5E76;&#x4F7F;&#x7528;<a class="reference internal" href="core_engines.html#sqlalchemy.create_engine.params.connect_args" title="sqlalchemy.create_engine"><code class="xref py py-paramref docutils literal"><span class="pre">create_engine.connect_args</span></code></a>&#x53C2;&#x6570;&#x4F20;&#x9012;SQLAlchemy&#x65F6;&#xFF0C;</span></p><div class="highlight-python"><div class="highlight"><pre><span></span><span class="c1"># libpq direct parameter setting;</span>
<span class="c1"># only works for Postgresql **9.1 and above**</span>
<span class="n">engine</span> <span class="o">=</span> <span class="n">create_engine</span><span class="p">(</span><span class="s2">&quot;postgresql://user:pass@host/dbname&quot;</span><span class="p">,</span>
                       <span class="n">connect_args</span><span class="o">=</span><span class="p">{</span><span class="s1">&apos;client_encoding&apos;</span><span class="p">:</span> <span class="s1">&apos;utf8&apos;</span><span class="p">})</span>

<span class="c1"># using the query string is equivalent</span>
<span class="n">engine</span> <span class="o">=</span> <span class="n">create_engine</span><span class="p">(</span><span class="s2">&quot;postgresql://user:pass@host/dbname?client_encoding=utf8&quot;</span><span class="p">)</span></pre></div></div><p><span class="yiyi-st" id="yiyi-864">&#x4EE5;&#x4E0A;&#x53C2;&#x6570;&#x4EC5;&#x6DFB;&#x52A0;&#x5230;Postgresql 9.1&#x7248;&#x672C;&#x7684;libpq&#x4E2D;&#xFF0C;&#x56E0;&#x6B64;&#x4F7F;&#x7528;&#x5148;&#x524D;&#x7684;&#x65B9;&#x6CD5;&#x66F4;&#x9002;&#x5408;&#x8DE8;&#x7248;&#x672C;&#x652F;&#x6301;&#x3002;</span></p><div class="section" id="disabling-native-unicode"><h4><span class="yiyi-st" id="yiyi-865">&#x7981;&#x7528;&#x672C;&#x673A;Unicode <a class="headerlink" href="#disabling-native-unicode" title="Permalink to this headline">&#xB6;</a></span></h4><p><span class="yiyi-st" id="yiyi-866">&#x8FD8;&#x53EF;&#x4EE5;&#x6307;&#x793A;SQLAlchemy&#x8DF3;&#x8FC7;psycopg2 <code class="docutils literal"><span class="pre">UNICODE</span></code>&#x6269;&#x5C55;&#x540D;&#x7684;&#x4F7F;&#x7528;&#xFF0C;&#x5E76;&#x4F7F;&#x7528;&#x5176;&#x81EA;&#x5DF1;&#x7684;unicode&#x7F16;&#x7801;/&#x89E3;&#x7801;&#x670D;&#x52A1;&#xFF0C;&#x8FD9;&#x4E9B;&#x670D;&#x52A1;&#x901A;&#x5E38;&#x53EA;&#x4FDD;&#x7559;&#x7ED9;&#x90A3;&#x4E9B;&#x4E0D;&#x76F4;&#x63A5;&#x5B8C;&#x5168;&#x652F;&#x6301;unicode&#x7684;DBAPI&#x3002;</span><span class="yiyi-st" id="yiyi-867">&#x5C06;<code class="docutils literal"><span class="pre">use_native_unicode=False</span></code>&#x4F20;&#x9012;&#x7ED9;<a class="reference internal" href="core_engines.html#sqlalchemy.create_engine" title="sqlalchemy.create_engine"><code class="xref py py-func docutils literal"><span class="pre">create_engine()</span></code></a>&#x5C06;&#x7981;&#x6B62;&#x4F7F;&#x7528;<code class="docutils literal"><span class="pre">psycopg2.extensions.UNICODE</span></code>&#x3002;</span><span class="yiyi-st" id="yiyi-868">SQLAlchemy&#x5C06;&#x4F7F;&#x7528;<a class="reference internal" href="core_engines.html#sqlalchemy.create_engine" title="sqlalchemy.create_engine"><code class="xref py py-func docutils literal"><span class="pre">create_engine()</span></code></a> <code class="docutils literal"><span class="pre">encoding</span></code>&#x53C2;&#x6570;&#x7684;&#x503C;&#x5C06;&#x6570;&#x636E;&#x672C;&#x8EAB;&#x7F16;&#x7801;&#x4E3A;Python&#x5B57;&#x8282;&#x4E32;&#xFF0C;&#x5E76;&#x5728;&#x8FD4;&#x56DE;&#x7684;&#x8FC7;&#x7A0B;&#x4E2D;&#x4F7F;&#x7528;&#x5B57;&#x8282;&#x8FDB;&#x884C;&#x5F3A;&#x5236;&#x8F6C;&#x6362;&#xFF0C;&#x9ED8;&#x8BA4;&#x503C;&#x4E3A;<code class="docutils literal"><span class="pre">utf-8</span></code></span><span class="yiyi-st" id="yiyi-869">&#x7531;&#x4E8E;&#x5927;&#x591A;&#x6570;DBAPI&#x73B0;&#x5728;&#x5B8C;&#x5168;&#x652F;&#x6301;unicode&#xFF0C;&#x56E0;&#x6B64;SQLAlchemy&#x81EA;&#x5DF1;&#x7684;unicode&#x7F16;&#x7801;/&#x89E3;&#x7801;&#x529F;&#x80FD;&#x6B63;&#x9010;&#x6E10;&#x8FC7;&#x65F6;&#x3002;</span></p></div></div><div class="section" id="bound-parameter-styles"><h3><span class="yiyi-st" id="yiyi-870">&#x7ED1;&#x5B9A;&#x53C2;&#x6570;&#x6837;&#x5F0F;<a class="headerlink" href="#bound-parameter-styles" title="Permalink to this headline">&#xB6;</a></span></h3><p><span class="yiyi-st" id="yiyi-871">psycopg2&#x65B9;&#x8A00;&#x7684;&#x9ED8;&#x8BA4;&#x53C2;&#x6570;&#x6837;&#x5F0F;&#x662F;&#x201C;pyformat&#x201D;&#xFF0C;&#x5176;&#x4E2D;SQL&#x4F7F;&#x7528;<code class="docutils literal"><span class="pre">%(paramname)s</span></code>&#x6837;&#x5F0F;&#x5448;&#x73B0;&#x3002;</span><span class="yiyi-st" id="yiyi-872">&#x8FD9;&#x79CD;&#x683C;&#x5F0F;&#x7684;&#x5C40;&#x9650;&#x6027;&#x5728;&#x4E8E;&#x5B83;&#x4E0D;&#x80FD;&#x9002;&#x5E94;&#x5B9E;&#x9645;&#x5305;&#x542B;&#x767E;&#x5206;&#x53F7;&#x6216;&#x62EC;&#x53F7;&#x7B26;&#x53F7;&#x7684;&#x53C2;&#x6570;&#x540D;&#x79F0;&#x7684;&#x4E0D;&#x5BFB;&#x5E38;&#x60C5;&#x51B5;&#xFF1B;&#x56E0;&#x4E3A;SQLAlchemy&#x5728;&#x8BB8;&#x591A;&#x60C5;&#x51B5;&#x4E0B;&#x4F1A;&#x6839;&#x636E;&#x5217;&#x7684;&#x540D;&#x79F0;&#x751F;&#x6210;&#x7ED1;&#x5B9A;&#x53C2;&#x6570;&#x540D;&#x79F0;&#xFF0C;&#x6240;&#x4EE5;&#x5728;&#x5217;&#x540D;&#x4E2D;&#x51FA;&#x73B0;&#x8FD9;&#x4E9B;&#x5B57;&#x7B26;&#x4F1A;&#x5BFC;&#x81F4;&#x95EE;&#x9898;&#x3002;</span></p><p><span class="yiyi-st" id="yiyi-873">&#x5BF9;&#x4E8E;<a class="reference internal" href="core_metadata.html#sqlalchemy.schema.Column" title="sqlalchemy.schema.Column"><code class="xref py py-class docutils literal"><span class="pre">schema.Column</span></code></a>&#x7684;&#x95EE;&#x9898;&#x6709;&#x4E24;&#x79CD;&#x89E3;&#x51B3;&#x65B9;&#x6848;&#xFF0C;&#x5B83;&#x5305;&#x542B;&#x540D;&#x79F0;&#x4E2D;&#x7684;&#x8FD9;&#x4E9B;&#x5B57;&#x7B26;&#x4E4B;&#x4E00;&#x3002;</span><span class="yiyi-st" id="yiyi-874">&#x4E00;&#x79CD;&#x662F;&#x4E3A;&#x5177;&#x6709;&#x8FD9;&#x79CD;&#x540D;&#x79F0;&#x7684;&#x5217;&#x6307;&#x5B9A;<a class="reference internal" href="core_metadata.html#sqlalchemy.schema.Column.params.key" title="sqlalchemy.schema.Column"><code class="xref py py-paramref docutils literal"><span class="pre">schema.Column.key</span></code></a>&#xFF1A;</span></p><div class="highlight-python"><div class="highlight"><pre><span></span><span class="n">measurement</span> <span class="o">=</span> <span class="n">Table</span><span class="p">(</span><span class="s1">&apos;measurement&apos;</span><span class="p">,</span> <span class="n">metadata</span><span class="p">,</span>
    <span class="n">Column</span><span class="p">(</span><span class="s1">&apos;Size (meters)&apos;</span><span class="p">,</span> <span class="n">Integer</span><span class="p">,</span> <span class="n">key</span><span class="o">=</span><span class="s1">&apos;size_meters&apos;</span><span class="p">)</span>
<span class="p">)</span></pre></div></div><p><span class="yiyi-st" id="yiyi-875">Above, an INSERT statement such as <code class="docutils literal"><span class="pre">measurement.insert()</span></code> will use <code class="docutils literal"><span class="pre">size_meters</span></code> as the parameter name, and a SQL expression such as <code class="docutils literal"><span class="pre">measurement.c.size_meters</span> <span class="pre">&gt;</span> <span class="pre">10</span></code> will derive the bound parameter name from the <code class="docutils literal"><span class="pre">size_meters</span></code> key as well.</span></p><div class="versionchanged"><p><span class="yiyi-st" id="yiyi-876"><span class="versionmodified">&#x7248;&#x672C;1.0.0&#x66F4;&#x6539;&#xFF1A;</span>  - &#x5F53;SQL&#x8868;&#x8FBE;&#x5F0F;&#x4E2D;&#x521B;&#x5EFA;&#x533F;&#x540D;&#x7ED1;&#x5B9A;&#x53C2;&#x6570;&#x65F6;&#xFF0C;SQL&#x8868;&#x8FBE;&#x5F0F;&#x5C06;&#x4F7F;&#x7528;<code class="xref py py-attr docutils literal"><span class="pre">Column.key</span></code>&#x4F5C;&#x4E3A;&#x547D;&#x540D;&#x7684;&#x6765;&#x6E90;&#xFF1B;&#x6B64;&#x524D;&#xFF0C;&#x6B64;&#x884C;&#x4E3A;&#x4EC5;&#x9002;&#x7528;&#x4E8E;<a class="reference internal" href="core_metadata.html#sqlalchemy.schema.Table.insert" title="sqlalchemy.schema.Table.insert"><code class="xref py py-meth docutils literal"><span class="pre">Table.insert()</span></code></a>&#x548C;<a class="reference internal" href="core_metadata.html#sqlalchemy.schema.Table.update" title="sqlalchemy.schema.Table.update"><code class="xref py py-meth docutils literal"><span class="pre">Table.update()</span></code></a>&#x53C2;&#x6570;&#x540D;&#x79F0;&#x3002;</span></p></div><p><span class="yiyi-st" id="yiyi-877">&#x53E6;&#x4E00;&#x79CD;&#x89E3;&#x51B3;&#x65B9;&#x6848;&#x662F;&#x4F7F;&#x7528;&#x4F4D;&#x7F6E;&#x683C;&#x5F0F;&#xFF1B; psycopg2&#x5141;&#x8BB8;&#x4F7F;&#x7528;&#x201C;&#x683C;&#x5F0F;&#x201D;&#x53C2;&#x6570;&#x6837;&#x5F0F;&#xFF0C;&#x5B83;&#x53EF;&#x4EE5;&#x4F20;&#x9012;&#x7ED9;<a class="reference internal" href="core_engines.html#sqlalchemy.create_engine.params.paramstyle" title="sqlalchemy.create_engine"><code class="xref py py-paramref docutils literal"><span class="pre">create_engine.paramstyle</span></code></a>&#xFF1A;</span></p><div class="highlight-python"><div class="highlight"><pre><span></span><span class="n">engine</span> <span class="o">=</span> <span class="n">create_engine</span><span class="p">(</span>
    <span class="s1">&apos;postgresql://scott:tiger@localhost:5432/test&apos;</span><span class="p">,</span> <span class="n">paramstyle</span><span class="o">=</span><span class="s1">&apos;format&apos;</span><span class="p">)</span></pre></div></div><p><span class="yiyi-st" id="yiyi-878">&#x7528;&#x4E0A;&#x9762;&#x7684;&#x5F15;&#x64CE;&#xFF0C;&#x800C;&#x4E0D;&#x662F;&#x50CF;&#x8FD9;&#x6837;&#x7684;&#x9648;&#x8FF0;&#xFF1A;</span></p><div class="highlight-python"><div class="highlight"><pre><span></span>INSERT INTO measurement (&quot;Size (meters)&quot;) VALUES (%(Size (meters))s)
{&apos;Size (meters)&apos;: 1}</pre></div></div><p><span class="yiyi-st" id="yiyi-879">&#x6211;&#x4EEC;&#x53CD;&#x800C;&#x770B;&#x5230;&#xFF1A;</span></p><div class="highlight-python"><div class="highlight"><pre><span></span>INSERT INTO measurement (&quot;Size (meters)&quot;) VALUES (%s)
(1, )</pre></div></div><p><span class="yiyi-st" id="yiyi-880">&#x5982;&#x4E0A;&#x6240;&#x8FF0;&#xFF0C;&#x5B57;&#x5178;&#x6837;&#x5F0F;&#x88AB;&#x8F6C;&#x6362;&#x6210;&#x5177;&#x6709;&#x4F4D;&#x7F6E;&#x6837;&#x5F0F;&#x7684;&#x5143;&#x7EC4;&#x3002;</span></p></div><div class="section" id="transactions"><h3><span class="yiyi-st" id="yiyi-881">&#x4EA4;&#x6613;<a class="headerlink" href="#transactions" title="Permalink to this headline">&#xB6; T0&gt;</a></span></h3><p><span class="yiyi-st" id="yiyi-882">psycopg2&#x65B9;&#x8A00;&#x5B8C;&#x5168;&#x652F;&#x6301;SAVEPOINT&#x548C;&#x4E24;&#x9636;&#x6BB5;&#x63D0;&#x4EA4;&#x64CD;&#x4F5C;&#x3002;</span></p></div><div class="section" id="psycopg2-transaction-isolation-level"><h3><span class="yiyi-st" id="yiyi-883">Psycopg2&#x4E8B;&#x52A1;&#x9694;&#x79BB;&#x7EA7;&#x522B;<a class="headerlink" href="#psycopg2-transaction-isolation-level" title="Permalink to this headline">&#xB6;</a></span></h3><p><span class="yiyi-st" id="yiyi-884">As discussed in <a class="reference internal" href="#postgresql-isolation-level"><span>Transaction Isolation Level</span></a>, all Postgresql dialects support setting of transaction isolation level both via the <code class="docutils literal"><span class="pre">isolation_level</span></code> parameter passed to <a class="reference internal" href="core_engines.html#sqlalchemy.create_engine" title="sqlalchemy.create_engine"><code class="xref py py-func docutils literal"><span class="pre">create_engine()</span></code></a>, as well as the <code class="docutils literal"><span class="pre">isolation_level</span></code> argument used by <a class="reference internal" href="core_connections.html#sqlalchemy.engine.Connection.execution_options" title="sqlalchemy.engine.Connection.execution_options"><code class="xref py py-meth docutils literal"><span class="pre">Connection.execution_options()</span></code></a>. </span><span class="yiyi-st" id="yiyi-885">&#x5F53;&#x4F7F;&#x7528;psycopg2&#x65B9;&#x8A00;&#x65F6;&#xFF0C;&#x8FD9;&#x4E9B;&#x9009;&#x9879;&#x4F7F;&#x7528;psycopg2&#x7684;<code class="docutils literal"><span class="pre">set_isolation_level()</span></code>&#x8FDE;&#x63A5;&#x65B9;&#x6CD5;&#xFF0C;&#x800C;&#x4E0D;&#x662F;&#x53D1;&#x51FA;Postgresql&#x6307;&#x4EE4;&#xFF1B;&#x8FD9;&#x662F;&#x56E0;&#x4E3A;&#x65E0;&#x8BBA;&#x5982;&#x4F55;psycopg2&#x7684;API&#x7EA7;&#x522B;&#x8BBE;&#x7F6E;&#x603B;&#x662F;&#x5728;&#x6BCF;&#x4E2A;&#x4E8B;&#x52A1;&#x5F00;&#x59CB;&#x65F6;&#x53D1;&#x51FA;&#x3002;</span></p><p><span class="yiyi-st" id="yiyi-886">psycopg2&#x65B9;&#x8A00;&#x652F;&#x6301;&#x8FD9;&#x4E9B;&#x5E38;&#x91CF;&#x7684;&#x9694;&#x79BB;&#x7EA7;&#x522B;&#xFF1A;</span></p><ul class="simple"><li><span class="yiyi-st" id="yiyi-887"><code class="docutils literal"><span class="pre">READ</span> <span class="pre">COMMITTED</span></code></span></li><li><span class="yiyi-st" id="yiyi-888"><code class="docutils literal"><span class="pre">READ</span> <span class="pre">UNCOMMITTED</span></code></span></li><li><span class="yiyi-st" id="yiyi-889"><code class="docutils literal"><span class="pre">REPEATABLE</span> <span class="pre">READ</span></code></span></li><li><span class="yiyi-st" id="yiyi-890"><code class="docutils literal"><span class="pre">SERIALIZABLE</span></code></span></li><li><span class="yiyi-st" id="yiyi-891"><code class="docutils literal"><span class="pre">AUTOCOMMIT</span></code></span></li></ul><div class="versionadded"><p><span class="yiyi-st" id="yiyi-892"><span class="versionmodified">0.8.2&#x7248;&#x672C;&#x4E2D;&#x7684;&#x65B0;&#x529F;&#x80FD;&#xFF1A;</span>&#x5728;&#x4F7F;&#x7528;psycopg2&#x65F6;&#x652F;&#x6301;AUTOCOMMIT&#x9694;&#x79BB;&#x7EA7;&#x522B;&#x3002;</span></p></div><div class="admonition seealso"><p class="first admonition-title"><span class="yiyi-st" id="yiyi-893">&#x4E5F;&#x53EF;&#x4EE5;&#x770B;&#x770B;</span></p><p><span class="yiyi-st" id="yiyi-894"><a class="reference internal" href="#postgresql-isolation-level"><span>Transaction Isolation Level</span></a></span></p><p class="last"><span class="yiyi-st" id="yiyi-895"><a class="reference internal" href="#pg8000-isolation-level"><span>pg8000 Transaction Isolation Level</span></a></span></p></div></div><div class="section" id="notice-logging"><h3><span class="yiyi-st" id="yiyi-896">&#x6CE8;&#x610F;&#x8BB0;&#x5F55;<a class="headerlink" href="#notice-logging" title="Permalink to this headline">&#xB6;</a></span></h3><p><span class="yiyi-st" id="yiyi-897">psycopg2&#x65B9;&#x8A00;&#x5C06;&#x901A;&#x8FC7;<code class="docutils literal"><span class="pre">sqlalchemy.dialects.postgresql</span></code>&#x8BB0;&#x5F55;&#x5668;&#x8BB0;&#x5F55;Postgresql NOTICE&#x6D88;&#x606F;&#xFF1A;</span></p><div class="highlight-python"><div class="highlight"><pre><span></span><span class="kn">import</span> <span class="nn">logging</span>
<span class="n">logging</span><span class="o">.</span><span class="n">getLogger</span><span class="p">(</span><span class="s1">&apos;sqlalchemy.dialects.postgresql&apos;</span><span class="p">)</span><span class="o">.</span><span class="n">setLevel</span><span class="p">(</span><span class="n">logging</span><span class="o">.</span><span class="n">INFO</span><span class="p">)</span></pre></div></div></div><div class="section" id="id5"><h3><span class="yiyi-st" id="yiyi-898">HSTORE&#x7C7B;&#x578B;<a class="headerlink" href="#id5" title="Permalink to this headline">&#xB6;</a></span></h3><p><span class="yiyi-st" id="yiyi-899"><code class="docutils literal"><span class="pre">psycopg2</span></code> DBAPI&#x5305;&#x542B;&#x4E00;&#x4E2A;&#x672C;&#x5730;&#x5904;&#x7406;HSTORE&#x7C7B;&#x578B;&#x7F16;&#x7EC4;&#x7684;&#x6269;&#x5C55;&#x3002;</span><span class="yiyi-st" id="yiyi-900">&#x5F53;&#x4F7F;&#x7528;psycopg2&#x7248;&#x672C;2.4&#x6216;&#x66F4;&#x9AD8;&#x7248;&#x672C;&#x65F6;&#xFF0C;SQLAlchemy psycopg2&#x65B9;&#x8A00;&#x5C06;&#x9ED8;&#x8BA4;&#x542F;&#x7528;&#x6B64;&#x6269;&#x5C55;&#xFF0C;&#x5E76;&#x4E14;&#x68C0;&#x6D4B;&#x5230;&#x76EE;&#x6807;&#x6570;&#x636E;&#x5E93;&#x5DF2;&#x5C06;HSTORE&#x7C7B;&#x578B;&#x8BBE;&#x7F6E;&#x4E3A;&#x4F7F;&#x7528;&#x3002;</span><span class="yiyi-st" id="yiyi-901">&#x6362;&#x53E5;&#x8BDD;&#x8BF4;&#xFF0C;&#x5F53;&#x65B9;&#x8A00;&#x8FDB;&#x884C;&#x7B2C;&#x4E00;&#x6B21;&#x8FDE;&#x63A5;&#x65F6;&#xFF0C;&#x6267;&#x884C;&#x5982;&#x4E0B;&#x7684;&#x4E00;&#x4E2A;&#x5E8F;&#x5217;&#xFF1A;</span></p><ol class="arabic simple"><li><span class="yiyi-st" id="yiyi-902">&#x4F7F;&#x7528;<code class="docutils literal"><span class="pre">psycopg2.extras.HstoreAdapter.get_oids()</span></code>&#x8BF7;&#x6C42;&#x53EF;&#x7528;&#x7684;HSTORE oid&#x3002;</span><span class="yiyi-st" id="yiyi-903">&#x5982;&#x679C;&#x8FD9;&#x4E2A;&#x51FD;&#x6570;&#x8FD4;&#x56DE;&#x4E00;&#x4E2A;HSTORE&#x6807;&#x8BC6;&#x7B26;&#x5217;&#x8868;&#xFF0C;&#x7136;&#x540E;&#x6211;&#x4EEC;&#x786E;&#x5B9A;&#x5B58;&#x5728;<code class="docutils literal"><span class="pre">HSTORE</span></code>&#x6269;&#x5C55;&#x540D;&#x3002;</span><span class="yiyi-st" id="yiyi-904">This function is <strong>skipped</strong> if the version of psycopg2 installed is less than version 2.4.</span></li><li><span class="yiyi-st" id="yiyi-905">If the <code class="docutils literal"><span class="pre">use_native_hstore</span></code> flag is at its default of <code class="docutils literal"><span class="pre">True</span></code>, and we&#x2019;ve detected that <code class="docutils literal"><span class="pre">HSTORE</span></code> oids are available, the <code class="docutils literal"><span class="pre">psycopg2.extensions.register_hstore()</span></code> extension is invoked for all connections.</span></li></ol><p><span class="yiyi-st" id="yiyi-906">&#x65E0;&#x8BBA;SQL&#x4E2D;&#x7684;&#x76EE;&#x6807;&#x5217;&#x7684;&#x7C7B;&#x578B;&#x5982;&#x4F55;&#xFF0C;<code class="docutils literal"><span class="pre">register_hstore()</span></code>&#x6269;&#x5C55;&#x540D;&#x90FD;&#x5177;&#x6709;<strong>&#x6240;&#x6709;Python&#x5B57;&#x5178;&#x90FD;&#x88AB;&#x63A5;&#x53D7;&#x4E3A;&#x53C2;&#x6570;&#x7684;&#x6548;&#x679C;</strong>&#x3002;</span><span class="yiyi-st" id="yiyi-907">&#x5B57;&#x5178;&#x901A;&#x8FC7;&#x8FD9;&#x79CD;&#x6269;&#x5C55;&#x8F6C;&#x6362;&#x4E3A;&#x6587;&#x672C;HSTORE&#x8868;&#x8FBE;&#x5F0F;&#x3002;</span><span class="yiyi-st" id="yiyi-908">&#x5982;&#x679C;&#x4E0D;&#x9700;&#x8981;&#x6B64;&#x884C;&#x4E3A;&#xFF0C;&#x8BF7;&#x901A;&#x8FC7;&#x5C06;<code class="docutils literal"><span class="pre">use_native_hstore</span></code>&#x8BBE;&#x7F6E;&#x4E3A;<code class="docutils literal"><span class="pre">False</span></code>&#x6765;&#x7981;&#x7528;hstore&#x6269;&#x5C55;&#x7684;&#x4F7F;&#x7528;&#xFF0C;&#x5982;&#x4E0B;&#x6240;&#x793A;&#xFF1A;</span></p><div class="highlight-python"><div class="highlight"><pre><span></span><span class="n">engine</span> <span class="o">=</span> <span class="n">create_engine</span><span class="p">(</span><span class="s2">&quot;postgresql+psycopg2://scott:tiger@localhost/test&quot;</span><span class="p">,</span>
            <span class="n">use_native_hstore</span><span class="o">=</span><span class="bp">False</span><span class="p">)</span></pre></div></div><p><span class="yiyi-st" id="yiyi-909">&#x5F53;&#x4E0D;&#x4F7F;&#x7528;<code class="docutils literal"><span class="pre">psycopg2.extensions.register_hstore()</span></code>&#x6269;&#x5C55;&#x540D;&#x65F6;&#xFF0C;&#x4ECD;&#x7136;&#x652F;&#x6301;<code class="docutils literal"><span class="pre">HSTORE</span></code>&#x7C7B;&#x578B;<strong>&#x3002;</strong></span><span class="yiyi-st" id="yiyi-910">&#x5B83;&#x4EC5;&#x4EC5;&#x610F;&#x5473;&#x7740;Python&#x5B57;&#x5178;&#x548C;HSTORE&#x5B57;&#x7B26;&#x4E32;&#x683C;&#x5F0F;&#xFF08;&#x5728;&#x53C2;&#x6570;&#x7AEF;&#x548C;&#x7ED3;&#x679C;&#x7AEF;&#xFF09;&#x4E4B;&#x95F4;&#x7684;&#x5F3A;&#x5236;&#x5C06;&#x53D1;&#x751F;&#x5728;SQLAlchemy&#x81EA;&#x5DF1;&#x7684;&#x7F16;&#x7EC4;&#x903B;&#x8F91;&#x4E2D;&#xFF0C;&#x800C;&#x4E0D;&#x662F;<code class="docutils literal"><span class="pre">psycopg2</span></code>&#xFF0C;&#x5B83;&#x53EF;&#x80FD;&#x66F4;&#x591A;&#x9AD8;&#x6027;&#x80FD;&#x3002;</span></p></div></div><div class="section" id="module-sqlalchemy.dialects.postgresql.pg8000"><h2><span class="yiyi-st" id="yiyi-911">pg8000 <a class="headerlink" href="#module-sqlalchemy.dialects.postgresql.pg8000" title="Permalink to this headline">&#xB6; T0&gt;</a></span></h2><p><span class="yiyi-st" id="yiyi-912">&#x901A;&#x8FC7;pg8000&#x9A71;&#x52A8;&#x7A0B;&#x5E8F;&#x652F;&#x6301;PostgreSQL&#x6570;&#x636E;&#x5E93;&#x3002;</span></p><div class="section" id="dialect-postgresql-pg8000-url"><h3><span class="yiyi-st" id="yiyi-913">DBAPI <a class="headerlink" href="#dialect-postgresql-pg8000-url" title="Permalink to this headline">&#xB6; T0&gt;</a></span></h3><p><span class="yiyi-st" id="yiyi-914">&#x6709;&#x5173;pg8000&#x7684;&#x6587;&#x6863;&#x548C;&#x4E0B;&#x8F7D;&#x4FE1;&#x606F;&#xFF08;&#x5982;&#x679C;&#x9002;&#x7528;&#xFF09;&#xFF0C;&#x8BF7;&#x8BBF;&#x95EE;&#xFF1A;<a class="reference external" href="https://pythonhosted.org/pg8000/">https://pythonhosted.org/pg8000/</a></span></p></div><div class="section" id="dialect-postgresql-pg8000-connect"><h3><span class="yiyi-st" id="yiyi-915">&#x8FDE;&#x63A5;<a class="headerlink" href="#dialect-postgresql-pg8000-connect" title="Permalink to this headline">&#xB6; T0&gt;</a></span></h3><p><span class="yiyi-st" id="yiyi-916">&#x8FDE;&#x63A5;&#x5B57;&#x7B26;&#x4E32;&#xFF1A;</span></p><div class="highlight-python"><div class="highlight"><pre><span></span>postgresql+pg8000://user:password@host:port/dbname[?key=value&amp;key=value...]</pre></div></div></div><div class="section" id="unicode"><h3><span class="yiyi-st" id="yiyi-917">Unicode&#x7684;<a class="headerlink" href="#unicode" title="Permalink to this headline">&#xB6; T0&gt;</a></span></h3><p><span class="yiyi-st" id="yiyi-918">pg8000&#x5C06;&#x4F7F;&#x7528;PostgreSQL <code class="docutils literal"><span class="pre">client_encoding</span></code>&#x53C2;&#x6570;&#x5BF9;&#x5B83;&#x548C;&#x670D;&#x52A1;&#x5668;&#x4E4B;&#x95F4;&#x7684;&#x5B57;&#x7B26;&#x4E32;&#x503C;&#x8FDB;&#x884C;&#x7F16;&#x7801;/&#x89E3;&#x7801;&#xFF1B;&#x9ED8;&#x8BA4;&#x60C5;&#x51B5;&#x4E0B;&#xFF0C;&#x8FD9;&#x662F;<code class="docutils literal"><span class="pre">postgresql.conf</span></code>&#x6587;&#x4EF6;&#x4E2D;&#x7684;&#x503C;&#xFF0C;&#x901A;&#x5E38;&#x9ED8;&#x8BA4;&#x4E3A;<code class="docutils literal"><span class="pre">SQL_ASCII</span></code>&#x3002;</span><span class="yiyi-st" id="yiyi-919">&#x901A;&#x5E38;&#xFF0C;&#x8FD9;&#x53EF;&#x4EE5;&#x66F4;&#x6539;&#x4E3A;<code class="docutils literal"><span class="pre">utf-8</span></code>&#xFF0C;&#x4F5C;&#x4E3A;&#x66F4;&#x6709;&#x7528;&#x7684;&#x9ED8;&#x8BA4;&#x503C;&#xFF1A;</span></p><div class="highlight-python"><div class="highlight"><pre><span></span><span class="c1">#client_encoding = sql_ascii # actually, defaults to database</span>
                             <span class="c1"># encoding</span>
<span class="n">client_encoding</span> <span class="o">=</span> <span class="n">utf8</span></pre></div></div><p><span class="yiyi-st" id="yiyi-920">&#x901A;&#x8FC7;&#x6267;&#x884C;SQL&#xFF0C;&#x53EF;&#x4EE5;&#x4E3A;&#x4F1A;&#x8BDD;&#x8986;&#x76D6;<code class="docutils literal"><span class="pre">client_encoding</span></code>&#xFF1A;</span></p><p><span class="yiyi-st" id="yiyi-921">&#x5C06;CLIENT_ENCODING&#x8BBE;&#x7F6E;&#x4E3A;&apos;utf8&apos;&#xFF1B;</span></p><p><span class="yiyi-st" id="yiyi-922">SQLAlchemy&#x5C06;&#x57FA;&#x4E8E;&#x4F7F;&#x7528;<code class="docutils literal"><span class="pre">client_encoding</span></code>&#x53C2;&#x6570;&#x4F20;&#x9012;&#x7ED9;<a class="reference internal" href="core_engines.html#sqlalchemy.create_engine" title="sqlalchemy.create_engine"><code class="xref py py-func docutils literal"><span class="pre">create_engine()</span></code></a>&#x7684;&#x6240;&#x6709;&#x65B0;&#x8FDE;&#x63A5;&#x6267;&#x884C;&#x6B64;SQL&#xFF1A;</span></p><div class="highlight-python"><div class="highlight"><pre><span></span><span class="n">engine</span> <span class="o">=</span> <span class="n">create_engine</span><span class="p">(</span>
    <span class="s2">&quot;postgresql+pg8000://user:pass@host/dbname&quot;</span><span class="p">,</span> <span class="n">client_encoding</span><span class="o">=</span><span class="s1">&apos;utf8&apos;</span><span class="p">)</span></pre></div></div></div><div class="section" id="pg8000-transaction-isolation-level"><h3><span class="yiyi-st" id="yiyi-923">pg8000&#x4E8B;&#x52A1;&#x9694;&#x79BB;&#x7EA7;&#x522B;<a class="headerlink" href="#pg8000-transaction-isolation-level" title="Permalink to this headline">&#xB6;</a></span></h3><p><span class="yiyi-st" id="yiyi-924">pg8000&#x65B9;&#x8A00;&#x63D0;&#x4F9B;&#x4E0E;<a class="reference internal" href="#psycopg2-isolation-level"><span>psycopg2</span></a>&#x65B9;&#x8A00;&#x76F8;&#x540C;&#x7684;&#x9694;&#x79BB;&#x7EA7;&#x522B;&#x8BBE;&#x7F6E;&#xFF1A;</span></p><ul class="simple"><li><span class="yiyi-st" id="yiyi-925"><code class="docutils literal"><span class="pre">READ</span> <span class="pre">COMMITTED</span></code></span></li><li><span class="yiyi-st" id="yiyi-926"><code class="docutils literal"><span class="pre">READ</span> <span class="pre">UNCOMMITTED</span></code></span></li><li><span class="yiyi-st" id="yiyi-927"><code class="docutils literal"><span class="pre">REPEATABLE</span> <span class="pre">READ</span></code></span></li><li><span class="yiyi-st" id="yiyi-928"><code class="docutils literal"><span class="pre">SERIALIZABLE</span></code></span></li><li><span class="yiyi-st" id="yiyi-929"><code class="docutils literal"><span class="pre">AUTOCOMMIT</span></code></span></li></ul><div class="versionadded"><p><span class="yiyi-st" id="yiyi-930"><span class="versionmodified">0.9.5&#x7248;&#x672C;&#x4E2D;&#x7684;&#x65B0;&#x529F;&#x80FD;&#xFF1A;</span>&#x652F;&#x6301;&#x4F7F;&#x7528;pg8000&#x65F6;&#x7684;AUTOCOMMIT&#x9694;&#x79BB;&#x7EA7;&#x522B;&#x3002;</span></p></div><div class="admonition seealso"><p class="first admonition-title"><span class="yiyi-st" id="yiyi-931">&#x4E5F;&#x53EF;&#x4EE5;&#x770B;&#x770B;</span></p><p><span class="yiyi-st" id="yiyi-932"><a class="reference internal" href="#postgresql-isolation-level"><span>Transaction Isolation Level</span></a></span></p><p class="last"><span class="yiyi-st" id="yiyi-933"><a class="reference internal" href="#psycopg2-isolation-level"><span>Psycopg2 Transaction Isolation Level</span></a></span></p></div></div></div><div class="section" id="module-sqlalchemy.dialects.postgresql.psycopg2cffi"><h2><span class="yiyi-st" id="yiyi-934">psycopg2cffi <a class="headerlink" href="#module-sqlalchemy.dialects.postgresql.psycopg2cffi" title="Permalink to this headline">&#xB6; T0&gt;</a></span></h2><p><span class="yiyi-st" id="yiyi-935">&#x901A;&#x8FC7;psycopg2cffi&#x9A71;&#x52A8;&#x7A0B;&#x5E8F;&#x652F;&#x6301;PostgreSQL&#x6570;&#x636E;&#x5E93;&#x3002;</span></p><div class="section" id="dialect-postgresql-psycopg2cffi-url"><h3><span class="yiyi-st" id="yiyi-936">DBAPI <a class="headerlink" href="#dialect-postgresql-psycopg2cffi-url" title="Permalink to this headline">&#xB6; T0&gt;</a></span></h3><p><span class="yiyi-st" id="yiyi-937">psycopg2cffi&#x7684;&#x6587;&#x6863;&#x548C;&#x4E0B;&#x8F7D;&#x4FE1;&#x606F;&#xFF08;&#x5982;&#x679C;&#x9002;&#x7528;&#xFF09;&#x53EF;&#x5728;&#x4EE5;&#x4E0B;&#x7F51;&#x5740;&#x83B7;&#x5F97;&#xFF1A;<a class="reference external" href="http://pypi.python.org/pypi/psycopg2cffi/">http://pypi.python.org/pypi/psycopg2cffi/</a></span></p></div><div class="section" id="dialect-postgresql-psycopg2cffi-connect"><h3><span class="yiyi-st" id="yiyi-938">&#x8FDE;&#x63A5;<a class="headerlink" href="#dialect-postgresql-psycopg2cffi-connect" title="Permalink to this headline">&#xB6; T0&gt;</a></span></h3><p><span class="yiyi-st" id="yiyi-939">&#x8FDE;&#x63A5;&#x5B57;&#x7B26;&#x4E32;&#xFF1A;</span></p><div class="highlight-python"><div class="highlight"><pre><span></span>postgresql+psycopg2cffi://user:password@host:port/dbname[?key=value&amp;key=value...]</pre></div></div></div><p><span class="yiyi-st" id="yiyi-940"><code class="docutils literal"><span class="pre">psycopg2cffi</span></code> is an adaptation of <code class="docutils literal"><span class="pre">psycopg2</span></code>, using CFFI for the C layer. </span><span class="yiyi-st" id="yiyi-941">&#x8FD9;&#x4F7F;&#x5B83;&#x9002;&#x7528;&#x4E8E;&#x4F8B;&#x5982;PyPy&#x3002;</span><span class="yiyi-st" id="yiyi-942">&#x6587;&#x6863;&#x7B26;&#x5408;<code class="docutils literal"><span class="pre">psycopg2</span></code>&#x3002;</span></p><div class="versionadded"><p><span class="yiyi-st" id="yiyi-943"><span class="versionmodified">&#x7248;&#x672C;1.0.0&#x4E2D;&#x7684;&#x65B0;&#x529F;&#x80FD;</span></span></p></div><div class="admonition seealso"><p class="first admonition-title"><span class="yiyi-st" id="yiyi-944">&#x4E5F;&#x53EF;&#x4EE5;&#x770B;&#x770B;</span></p><p class="last"><span class="yiyi-st" id="yiyi-945"><a class="reference internal" href="#module-sqlalchemy.dialects.postgresql.psycopg2" title="sqlalchemy.dialects.postgresql.psycopg2"><code class="xref py py-mod docutils literal"><span class="pre">sqlalchemy.dialects.postgresql.psycopg2</span></code></a></span></p></div></div><div class="section" id="module-sqlalchemy.dialects.postgresql.pypostgresql"><h2><span class="yiyi-st" id="yiyi-946">PY-&#x7684;PostgreSQL <a class="headerlink" href="#module-sqlalchemy.dialects.postgresql.pypostgresql" title="Permalink to this headline">&#xB6; T0&gt;</a></span></h2><p><span class="yiyi-st" id="yiyi-947">&#x901A;&#x8FC7;py-postgresql&#x9A71;&#x52A8;&#x7A0B;&#x5E8F;&#x652F;&#x6301;PostgreSQL&#x6570;&#x636E;&#x5E93;&#x3002;</span></p><div class="section" id="dialect-postgresql-pypostgresql-url"><h3><span class="yiyi-st" id="yiyi-948">DBAPI <a class="headerlink" href="#dialect-postgresql-pypostgresql-url" title="Permalink to this headline">&#xB6; T0&gt;</a></span></h3><p><span class="yiyi-st" id="yiyi-949">Documentation and download information (if applicable) for py-postgresql is available at: <a class="reference external" href="http://python.projects.pgfoundry.org/">http://python.projects.pgfoundry.org/</a></span></p></div><div class="section" id="dialect-postgresql-pypostgresql-connect"><h3><span class="yiyi-st" id="yiyi-950">&#x8FDE;&#x63A5;<a class="headerlink" href="#dialect-postgresql-pypostgresql-connect" title="Permalink to this headline">&#xB6; T0&gt;</a></span></h3><p><span class="yiyi-st" id="yiyi-951">&#x8FDE;&#x63A5;&#x5B57;&#x7B26;&#x4E32;&#xFF1A;</span></p><div class="highlight-python"><div class="highlight"><pre><span></span>postgresql+pypostgresql://user:password@host:port/dbname[?key=value&amp;key=value...]</pre></div></div></div></div><div class="section" id="module-sqlalchemy.dialects.postgresql.pygresql"><h2><span class="yiyi-st" id="yiyi-952">pygresql <a class="headerlink" href="#module-sqlalchemy.dialects.postgresql.pygresql" title="Permalink to this headline">&#xB6; T0&gt;</a></span></h2><p><span class="yiyi-st" id="yiyi-953">&#x901A;&#x8FC7;pygresql&#x9A71;&#x52A8;&#x7A0B;&#x5E8F;&#x652F;&#x6301;PostgreSQL&#x6570;&#x636E;&#x5E93;&#x3002;</span></p><div class="section" id="dialect-postgresql-pygresql-url"><h3><span class="yiyi-st" id="yiyi-954">DBAPI <a class="headerlink" href="#dialect-postgresql-pygresql-url" title="Permalink to this headline">&#xB6; T0&gt;</a></span></h3><p><span class="yiyi-st" id="yiyi-955">&#x6709;&#x5173;pygresql&#x7684;&#x6587;&#x6863;&#x548C;&#x4E0B;&#x8F7D;&#x4FE1;&#x606F;&#xFF08;&#x5982;&#x679C;&#x9002;&#x7528;&#xFF09;&#x53EF;&#x5728;&#x4EE5;&#x4E0B;&#x7F51;&#x5740;&#x83B7;&#x5F97;&#xFF1A;<a class="reference external" href="http://www.pygresql.org/">http://www.pygresql.org/</a></span></p></div><div class="section" id="dialect-postgresql-pygresql-connect"><h3><span class="yiyi-st" id="yiyi-956">&#x8FDE;&#x63A5;<a class="headerlink" href="#dialect-postgresql-pygresql-connect" title="Permalink to this headline">&#xB6; T0&gt;</a></span></h3><p><span class="yiyi-st" id="yiyi-957">&#x8FDE;&#x63A5;&#x5B57;&#x7B26;&#x4E32;&#xFF1A;</span></p><div class="highlight-python"><div class="highlight"><pre><span></span>postgresql+pygresql://user:password@host:port/dbname[?key=value&amp;key=value...]</pre></div></div></div></div><div class="section" id="module-sqlalchemy.dialects.postgresql.zxjdbc"><h2><span class="yiyi-st" id="yiyi-958">zxjdbc <a class="headerlink" href="#module-sqlalchemy.dialects.postgresql.zxjdbc" title="Permalink to this headline">&#xB6; T0&gt;</a></span></h2><p><span class="yiyi-st" id="yiyi-959">&#x901A;&#x8FC7;zxJDBC&#x4E3A;Jython&#x9A71;&#x52A8;&#x7A0B;&#x5E8F;&#x652F;&#x6301;PostgreSQL&#x6570;&#x636E;&#x5E93;&#x3002;</span></p><div class="section" id="dialect-postgresql-zxjdbc-url"><h3><span class="yiyi-st" id="yiyi-960">DBAPI <a class="headerlink" href="#dialect-postgresql-zxjdbc-url" title="Permalink to this headline">&#xB6; T0&gt;</a></span></h3><p><span class="yiyi-st" id="yiyi-961">&#x6B64;&#x6570;&#x636E;&#x5E93;&#x7684;&#x9A71;&#x52A8;&#x7A0B;&#x5E8F;&#x53EF;&#x5728;&#x4EE5;&#x4E0B;&#x7F51;&#x5740;&#x627E;&#x5230;&#xFF1A;<a class="reference external" href="http://jdbc.postgresql.org/">http://jdbc.postgresql.org/</a></span></p></div><div class="section" id="dialect-postgresql-zxjdbc-connect"><h3><span class="yiyi-st" id="yiyi-962">&#x8FDE;&#x63A5;<a class="headerlink" href="#dialect-postgresql-zxjdbc-connect" title="Permalink to this headline">&#xB6; T0&gt;</a></span></h3><p><span class="yiyi-st" id="yiyi-963">&#x8FDE;&#x63A5;&#x5B57;&#x7B26;&#x4E32;&#xFF1A;</span></p><div class="highlight-python"><div class="highlight"><pre><span></span>postgresql+zxjdbc://scott:tiger@localhost/db</pre></div></div></div></div>